var nfe=Object.defineProperty;var _9=e=>{throw TypeError(e)};var rfe=(e,t,r)=>t in e?nfe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var ue=(e,t,r)=>rfe(e,typeof t!="symbol"?t+"":t,r),iS=(e,t,r)=>t.has(e)||_9("Cannot "+r);var ie=(e,t,r)=>(iS(e,t,"read from private field"),r?r.call(e):t.get(e)),Ut=(e,t,r)=>t.has(e)?_9("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),gt=(e,t,r,s)=>(iS(e,t,"write to private field"),s?s.call(e,r):t.set(e,r),r),yn=(e,t,r)=>(iS(e,t,"access private method"),r);var W1=(e,t,r,s)=>({set _(a){gt(e,t,a,r)},get _(){return ie(e,t,s)}});function RW(e,t){for(var r=0;r<t.length;r++){const s=t[r];if(typeof s!="string"&&!Array.isArray(s)){for(const a in s)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(s,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>s[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var Yg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function qn(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var FW={exports:{}},MN={},zW={exports:{}},Cn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bv=Symbol.for("react.element"),sfe=Symbol.for("react.portal"),afe=Symbol.for("react.fragment"),ife=Symbol.for("react.strict_mode"),ofe=Symbol.for("react.profiler"),lfe=Symbol.for("react.provider"),cfe=Symbol.for("react.context"),dfe=Symbol.for("react.forward_ref"),ufe=Symbol.for("react.suspense"),ffe=Symbol.for("react.memo"),hfe=Symbol.for("react.lazy"),P9=Symbol.iterator;function mfe(e){return e===null||typeof e!="object"?null:(e=P9&&e[P9]||e["@@iterator"],typeof e=="function"?e:null)}var BW={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},UW=Object.assign,VW={};function N0(e,t,r){this.props=e,this.context=t,this.refs=VW,this.updater=r||BW}N0.prototype.isReactComponent={};N0.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};N0.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function HW(){}HW.prototype=N0.prototype;function X5(e,t,r){this.props=e,this.context=t,this.refs=VW,this.updater=r||BW}var eP=X5.prototype=new HW;eP.constructor=X5;UW(eP,N0.prototype);eP.isPureReactComponent=!0;var T9=Array.isArray,WW=Object.prototype.hasOwnProperty,tP={current:null},qW={key:!0,ref:!0,__self:!0,__source:!0};function GW(e,t,r){var s,a={},i=null,o=null;if(t!=null)for(s in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)WW.call(t,s)&&!qW.hasOwnProperty(s)&&(a[s]=t[s]);var l=arguments.length-2;if(l===1)a.children=r;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];a.children=c}if(e&&e.defaultProps)for(s in l=e.defaultProps,l)a[s]===void 0&&(a[s]=l[s]);return{$$typeof:Bv,type:e,key:i,ref:o,props:a,_owner:tP.current}}function pfe(e,t){return{$$typeof:Bv,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function nP(e){return typeof e=="object"&&e!==null&&e.$$typeof===Bv}function gfe(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var A9=/\/+/g;function oS(e,t){return typeof e=="object"&&e!==null&&e.key!=null?gfe(""+e.key):t.toString(36)}function ew(e,t,r,s,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Bv:case sfe:o=!0}}if(o)return o=e,a=a(o),e=s===""?"."+oS(o,0):s,T9(a)?(r="",e!=null&&(r=e.replace(A9,"$&/")+"/"),ew(a,t,r,"",function(d){return d})):a!=null&&(nP(a)&&(a=pfe(a,r+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(A9,"$&/")+"/")+e)),t.push(a)),1;if(o=0,s=s===""?".":s+":",T9(e))for(var l=0;l<e.length;l++){i=e[l];var c=s+oS(i,l);o+=ew(i,t,r,c,a)}else if(c=mfe(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=s+oS(i,l++),o+=ew(i,t,r,c,a);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function q1(e,t,r){if(e==null)return e;var s=[],a=0;return ew(e,s,"","",function(i){return t.call(r,i,a++)}),s}function xfe(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Za={current:null},tw={transition:null},yfe={ReactCurrentDispatcher:Za,ReactCurrentBatchConfig:tw,ReactCurrentOwner:tP};function YW(){throw Error("act(...) is not supported in production builds of React.")}Cn.Children={map:q1,forEach:function(e,t,r){q1(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return q1(e,function(){t++}),t},toArray:function(e){return q1(e,function(t){return t})||[]},only:function(e){if(!nP(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Cn.Component=N0;Cn.Fragment=afe;Cn.Profiler=ofe;Cn.PureComponent=X5;Cn.StrictMode=ife;Cn.Suspense=ufe;Cn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=yfe;Cn.act=YW;Cn.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=UW({},e.props),a=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=tP.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)WW.call(t,c)&&!qW.hasOwnProperty(c)&&(s[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)s.children=r;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];s.children=l}return{$$typeof:Bv,type:e.type,key:a,ref:i,props:s,_owner:o}};Cn.createContext=function(e){return e={$$typeof:cfe,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:lfe,_context:e},e.Consumer=e};Cn.createElement=GW;Cn.createFactory=function(e){var t=GW.bind(null,e);return t.type=e,t};Cn.createRef=function(){return{current:null}};Cn.forwardRef=function(e){return{$$typeof:dfe,render:e}};Cn.isValidElement=nP;Cn.lazy=function(e){return{$$typeof:hfe,_payload:{_status:-1,_result:e},_init:xfe}};Cn.memo=function(e,t){return{$$typeof:ffe,type:e,compare:t===void 0?null:t}};Cn.startTransition=function(e){var t=tw.transition;tw.transition={};try{e()}finally{tw.transition=t}};Cn.unstable_act=YW;Cn.useCallback=function(e,t){return Za.current.useCallback(e,t)};Cn.useContext=function(e){return Za.current.useContext(e)};Cn.useDebugValue=function(){};Cn.useDeferredValue=function(e){return Za.current.useDeferredValue(e)};Cn.useEffect=function(e,t){return Za.current.useEffect(e,t)};Cn.useId=function(){return Za.current.useId()};Cn.useImperativeHandle=function(e,t,r){return Za.current.useImperativeHandle(e,t,r)};Cn.useInsertionEffect=function(e,t){return Za.current.useInsertionEffect(e,t)};Cn.useLayoutEffect=function(e,t){return Za.current.useLayoutEffect(e,t)};Cn.useMemo=function(e,t){return Za.current.useMemo(e,t)};Cn.useReducer=function(e,t,r){return Za.current.useReducer(e,t,r)};Cn.useRef=function(e){return Za.current.useRef(e)};Cn.useState=function(e){return Za.current.useState(e)};Cn.useSyncExternalStore=function(e,t,r){return Za.current.useSyncExternalStore(e,t,r)};Cn.useTransition=function(){return Za.current.useTransition()};Cn.version="18.3.1";zW.exports=Cn;var p=zW.exports;const Q=qn(p),QW=RW({__proto__:null,default:Q},[p]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vfe=p,bfe=Symbol.for("react.element"),wfe=Symbol.for("react.fragment"),jfe=Object.prototype.hasOwnProperty,Nfe=vfe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Sfe={key:!0,ref:!0,__self:!0,__source:!0};function KW(e,t,r){var s,a={},i=null,o=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(s in t)jfe.call(t,s)&&!Sfe.hasOwnProperty(s)&&(a[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps,t)a[s]===void 0&&(a[s]=t[s]);return{$$typeof:bfe,type:e,key:i,ref:o,props:a,_owner:Nfe.current}}MN.Fragment=wfe;MN.jsx=KW;MN.jsxs=KW;FW.exports=MN;var n=FW.exports,JW={exports:{}},qi={},ZW={exports:{}},XW={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(D,W){var E=D.length;D.push(W);e:for(;0<E;){var F=E-1>>>1,B=D[F];if(0<a(B,W))D[F]=W,D[E]=B,E=F;else break e}}function r(D){return D.length===0?null:D[0]}function s(D){if(D.length===0)return null;var W=D[0],E=D.pop();if(E!==W){D[0]=E;e:for(var F=0,B=D.length,Z=B>>>1;F<Z;){var ne=2*(F+1)-1,Y=D[ne],me=ne+1,pe=D[me];if(0>a(Y,E))me<B&&0>a(pe,Y)?(D[F]=pe,D[me]=E,F=me):(D[F]=Y,D[ne]=E,F=ne);else if(me<B&&0>a(pe,E))D[F]=pe,D[me]=E,F=me;else break e}}return W}function a(D,W){var E=D.sortIndex-W.sortIndex;return E!==0?E:D.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,f=null,h=3,m=!1,g=!1,x=!1,y=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(D){for(var W=r(d);W!==null;){if(W.callback===null)s(d);else if(W.startTime<=D)s(d),W.sortIndex=W.expirationTime,t(c,W);else break;W=r(d)}}function N(D){if(x=!1,w(D),!g)if(r(c)!==null)g=!0,G(j);else{var W=r(d);W!==null&&$(N,W.startTime-D)}}function j(D,W){g=!1,x&&(x=!1,v(k),k=-1),m=!0;var E=h;try{for(w(W),f=r(c);f!==null&&(!(f.expirationTime>W)||D&&!P());){var F=f.callback;if(typeof F=="function"){f.callback=null,h=f.priorityLevel;var B=F(f.expirationTime<=W);W=e.unstable_now(),typeof B=="function"?f.callback=B:f===r(c)&&s(c),w(W)}else s(c);f=r(c)}if(f!==null)var Z=!0;else{var ne=r(d);ne!==null&&$(N,ne.startTime-W),Z=!1}return Z}finally{f=null,h=E,m=!1}}var S=!1,C=null,k=-1,M=5,A=-1;function P(){return!(e.unstable_now()-A<M)}function T(){if(C!==null){var D=e.unstable_now();A=D;var W=!0;try{W=C(!0,D)}finally{W?I():(S=!1,C=null)}}else S=!1}var I;if(typeof b=="function")I=function(){b(T)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,R=L.port2;L.port1.onmessage=T,I=function(){R.postMessage(null)}}else I=function(){y(T,0)};function G(D){C=D,S||(S=!0,I())}function $(D,W){k=y(function(){D(e.unstable_now())},W)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(D){D.callback=null},e.unstable_continueExecution=function(){g||m||(g=!0,G(j))},e.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<D?Math.floor(1e3/D):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(D){switch(h){case 1:case 2:case 3:var W=3;break;default:W=h}var E=h;h=W;try{return D()}finally{h=E}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(D,W){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var E=h;h=D;try{return W()}finally{h=E}},e.unstable_scheduleCallback=function(D,W,E){var F=e.unstable_now();switch(typeof E=="object"&&E!==null?(E=E.delay,E=typeof E=="number"&&0<E?F+E:F):E=F,D){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=E+B,D={id:u++,callback:W,priorityLevel:D,startTime:E,expirationTime:B,sortIndex:-1},E>F?(D.sortIndex=E,t(d,D),r(c)===null&&D===r(d)&&(x?(v(k),k=-1):x=!0,$(N,E-F))):(D.sortIndex=B,t(c,D),g||m||(g=!0,G(j))),D},e.unstable_shouldYield=P,e.unstable_wrapCallback=function(D){var W=h;return function(){var E=h;h=W;try{return D.apply(this,arguments)}finally{h=E}}}})(XW);ZW.exports=XW;var Cfe=ZW.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kfe=p,Bi=Cfe;function Je(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var eq=new Set,qx={};function wh(e,t){pp(e,t),pp(e+"Capture",t)}function pp(e,t){for(qx[e]=t,e=0;e<t.length;e++)eq.add(t[e])}var Vc=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Sk=Object.prototype.hasOwnProperty,Mfe=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,E9={},I9={};function _fe(e){return Sk.call(I9,e)?!0:Sk.call(E9,e)?!1:Mfe.test(e)?I9[e]=!0:(E9[e]=!0,!1)}function Pfe(e,t,r,s){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Tfe(e,t,r,s){if(t===null||typeof t>"u"||Pfe(e,t,r,s))return!0;if(s)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Xa(e,t,r,s,a,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var aa={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){aa[e]=new Xa(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];aa[t]=new Xa(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){aa[e]=new Xa(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){aa[e]=new Xa(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){aa[e]=new Xa(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){aa[e]=new Xa(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){aa[e]=new Xa(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){aa[e]=new Xa(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){aa[e]=new Xa(e,5,!1,e.toLowerCase(),null,!1,!1)});var rP=/[\-:]([a-z])/g;function sP(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(rP,sP);aa[t]=new Xa(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(rP,sP);aa[t]=new Xa(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(rP,sP);aa[t]=new Xa(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){aa[e]=new Xa(e,1,!1,e.toLowerCase(),null,!1,!1)});aa.xlinkHref=new Xa("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){aa[e]=new Xa(e,1,!1,e.toLowerCase(),null,!0,!0)});function aP(e,t,r,s){var a=aa.hasOwnProperty(t)?aa[t]:null;(a!==null?a.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Tfe(t,r,a,s)&&(r=null),s||a===null?_fe(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(t=a.attributeName,s=a.attributeNamespace,r===null?e.removeAttribute(t):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,s?e.setAttributeNS(s,t,r):e.setAttribute(t,r))))}var ld=kfe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,G1=Symbol.for("react.element"),am=Symbol.for("react.portal"),im=Symbol.for("react.fragment"),iP=Symbol.for("react.strict_mode"),Ck=Symbol.for("react.profiler"),tq=Symbol.for("react.provider"),nq=Symbol.for("react.context"),oP=Symbol.for("react.forward_ref"),kk=Symbol.for("react.suspense"),Mk=Symbol.for("react.suspense_list"),lP=Symbol.for("react.memo"),_d=Symbol.for("react.lazy"),rq=Symbol.for("react.offscreen"),L9=Symbol.iterator;function gg(e){return e===null||typeof e!="object"?null:(e=L9&&e[L9]||e["@@iterator"],typeof e=="function"?e:null)}var Fr=Object.assign,lS;function Qg(e){if(lS===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);lS=t&&t[1]||""}return`
`+lS+e}var cS=!1;function dS(e,t){if(!e||cS)return"";cS=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var s=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){s=d}e.call(t.prototype)}else{try{throw Error()}catch(d){s=d}e()}}catch(d){if(d&&s&&typeof d.stack=="string"){for(var a=d.stack.split(`
`),i=s.stack.split(`
`),o=a.length-1,l=i.length-1;1<=o&&0<=l&&a[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(a[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||a[o]!==i[l]){var c=`
`+a[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{cS=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Qg(e):""}function Afe(e){switch(e.tag){case 5:return Qg(e.type);case 16:return Qg("Lazy");case 13:return Qg("Suspense");case 19:return Qg("SuspenseList");case 0:case 2:case 15:return e=dS(e.type,!1),e;case 11:return e=dS(e.type.render,!1),e;case 1:return e=dS(e.type,!0),e;default:return""}}function _k(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case im:return"Fragment";case am:return"Portal";case Ck:return"Profiler";case iP:return"StrictMode";case kk:return"Suspense";case Mk:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case nq:return(e.displayName||"Context")+".Consumer";case tq:return(e._context.displayName||"Context")+".Provider";case oP:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case lP:return t=e.displayName||null,t!==null?t:_k(e.type)||"Memo";case _d:t=e._payload,e=e._init;try{return _k(e(t))}catch{}}return null}function Efe(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return _k(t);case 8:return t===iP?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function uu(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function sq(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Ife(e){var t=sq(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(o){s=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return s},setValue:function(o){s=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Y1(e){e._valueTracker||(e._valueTracker=Ife(e))}function aq(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),s="";return e&&(s=sq(e)?e.checked?"true":"false":e.value),e=s,e!==r?(t.setValue(e),!0):!1}function Uw(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Pk(e,t){var r=t.checked;return Fr({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function D9(e,t){var r=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;r=uu(t.value!=null?t.value:r),e._wrapperState={initialChecked:s,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function iq(e,t){t=t.checked,t!=null&&aP(e,"checked",t,!1)}function Tk(e,t){iq(e,t);var r=uu(t.value),s=t.type;if(r!=null)s==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Ak(e,t.type,r):t.hasOwnProperty("defaultValue")&&Ak(e,t.type,uu(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function $9(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Ak(e,t,r){(t!=="number"||Uw(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Kg=Array.isArray;function _m(e,t,r,s){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&s&&(e[r].defaultSelected=!0)}else{for(r=""+uu(r),t=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,s&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function Ek(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Je(91));return Fr({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function O9(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(Je(92));if(Kg(r)){if(1<r.length)throw Error(Je(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:uu(r)}}function oq(e,t){var r=uu(t.value),s=uu(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),s!=null&&(e.defaultValue=""+s)}function R9(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function lq(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ik(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?lq(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Q1,cq=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,s,a){MSApp.execUnsafeLocalFunction(function(){return e(t,r,s,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Q1=Q1||document.createElement("div"),Q1.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Q1.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Gx(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var ux={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Lfe=["Webkit","ms","Moz","O"];Object.keys(ux).forEach(function(e){Lfe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ux[t]=ux[e]})});function dq(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||ux.hasOwnProperty(e)&&ux[e]?(""+t).trim():t+"px"}function uq(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var s=r.indexOf("--")===0,a=dq(r,t[r],s);r==="float"&&(r="cssFloat"),s?e.setProperty(r,a):e[r]=a}}var Dfe=Fr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Lk(e,t){if(t){if(Dfe[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Je(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Je(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Je(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Je(62))}}function Dk(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $k=null;function cP(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ok=null,Pm=null,Tm=null;function F9(e){if(e=Hv(e)){if(typeof Ok!="function")throw Error(Je(280));var t=e.stateNode;t&&(t=EN(t),Ok(e.stateNode,e.type,t))}}function fq(e){Pm?Tm?Tm.push(e):Tm=[e]:Pm=e}function hq(){if(Pm){var e=Pm,t=Tm;if(Tm=Pm=null,F9(e),t)for(e=0;e<t.length;e++)F9(t[e])}}function mq(e,t){return e(t)}function pq(){}var uS=!1;function gq(e,t,r){if(uS)return e(t,r);uS=!0;try{return mq(e,t,r)}finally{uS=!1,(Pm!==null||Tm!==null)&&(pq(),hq())}}function Yx(e,t){var r=e.stateNode;if(r===null)return null;var s=EN(r);if(s===null)return null;r=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(Je(231,t,typeof r));return r}var Rk=!1;if(Vc)try{var xg={};Object.defineProperty(xg,"passive",{get:function(){Rk=!0}}),window.addEventListener("test",xg,xg),window.removeEventListener("test",xg,xg)}catch{Rk=!1}function $fe(e,t,r,s,a,i,o,l,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(r,d)}catch(u){this.onError(u)}}var fx=!1,Vw=null,Hw=!1,Fk=null,Ofe={onError:function(e){fx=!0,Vw=e}};function Rfe(e,t,r,s,a,i,o,l,c){fx=!1,Vw=null,$fe.apply(Ofe,arguments)}function Ffe(e,t,r,s,a,i,o,l,c){if(Rfe.apply(this,arguments),fx){if(fx){var d=Vw;fx=!1,Vw=null}else throw Error(Je(198));Hw||(Hw=!0,Fk=d)}}function jh(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function xq(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function z9(e){if(jh(e)!==e)throw Error(Je(188))}function zfe(e){var t=e.alternate;if(!t){if(t=jh(e),t===null)throw Error(Je(188));return t!==e?null:e}for(var r=e,s=t;;){var a=r.return;if(a===null)break;var i=a.alternate;if(i===null){if(s=a.return,s!==null){r=s;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===r)return z9(a),e;if(i===s)return z9(a),t;i=i.sibling}throw Error(Je(188))}if(r.return!==s.return)r=a,s=i;else{for(var o=!1,l=a.child;l;){if(l===r){o=!0,r=a,s=i;break}if(l===s){o=!0,s=a,r=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===r){o=!0,r=i,s=a;break}if(l===s){o=!0,s=i,r=a;break}l=l.sibling}if(!o)throw Error(Je(189))}}if(r.alternate!==s)throw Error(Je(190))}if(r.tag!==3)throw Error(Je(188));return r.stateNode.current===r?e:t}function yq(e){return e=zfe(e),e!==null?vq(e):null}function vq(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=vq(e);if(t!==null)return t;e=e.sibling}return null}var bq=Bi.unstable_scheduleCallback,B9=Bi.unstable_cancelCallback,Bfe=Bi.unstable_shouldYield,Ufe=Bi.unstable_requestPaint,ss=Bi.unstable_now,Vfe=Bi.unstable_getCurrentPriorityLevel,dP=Bi.unstable_ImmediatePriority,wq=Bi.unstable_UserBlockingPriority,Ww=Bi.unstable_NormalPriority,Hfe=Bi.unstable_LowPriority,jq=Bi.unstable_IdlePriority,_N=null,zl=null;function Wfe(e){if(zl&&typeof zl.onCommitFiberRoot=="function")try{zl.onCommitFiberRoot(_N,e,void 0,(e.current.flags&128)===128)}catch{}}var nl=Math.clz32?Math.clz32:Yfe,qfe=Math.log,Gfe=Math.LN2;function Yfe(e){return e>>>=0,e===0?32:31-(qfe(e)/Gfe|0)|0}var K1=64,J1=4194304;function Jg(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function qw(e,t){var r=e.pendingLanes;if(r===0)return 0;var s=0,a=e.suspendedLanes,i=e.pingedLanes,o=r&268435455;if(o!==0){var l=o&~a;l!==0?s=Jg(l):(i&=o,i!==0&&(s=Jg(i)))}else o=r&~a,o!==0?s=Jg(o):i!==0&&(s=Jg(i));if(s===0)return 0;if(t!==0&&t!==s&&!(t&a)&&(a=s&-s,i=t&-t,a>=i||a===16&&(i&4194240)!==0))return t;if(s&4&&(s|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)r=31-nl(t),a=1<<r,s|=e[r],t&=~a;return s}function Qfe(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Kfe(e,t){for(var r=e.suspendedLanes,s=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-nl(i),l=1<<o,c=a[o];c===-1?(!(l&r)||l&s)&&(a[o]=Qfe(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function zk(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Nq(){var e=K1;return K1<<=1,!(K1&4194240)&&(K1=64),e}function fS(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Uv(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-nl(t),e[t]=r}function Jfe(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-nl(r),i=1<<a;t[a]=0,s[a]=-1,e[a]=-1,r&=~i}}function uP(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var s=31-nl(r),a=1<<s;a&t|e[s]&t&&(e[s]|=t),r&=~a}}var rr=0;function Sq(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Cq,fP,kq,Mq,_q,Bk=!1,Z1=[],Jd=null,Zd=null,Xd=null,Qx=new Map,Kx=new Map,Ed=[],Zfe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function U9(e,t){switch(e){case"focusin":case"focusout":Jd=null;break;case"dragenter":case"dragleave":Zd=null;break;case"mouseover":case"mouseout":Xd=null;break;case"pointerover":case"pointerout":Qx.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Kx.delete(t.pointerId)}}function yg(e,t,r,s,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:s,nativeEvent:i,targetContainers:[a]},t!==null&&(t=Hv(t),t!==null&&fP(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function Xfe(e,t,r,s,a){switch(t){case"focusin":return Jd=yg(Jd,e,t,r,s,a),!0;case"dragenter":return Zd=yg(Zd,e,t,r,s,a),!0;case"mouseover":return Xd=yg(Xd,e,t,r,s,a),!0;case"pointerover":var i=a.pointerId;return Qx.set(i,yg(Qx.get(i)||null,e,t,r,s,a)),!0;case"gotpointercapture":return i=a.pointerId,Kx.set(i,yg(Kx.get(i)||null,e,t,r,s,a)),!0}return!1}function Pq(e){var t=pf(e.target);if(t!==null){var r=jh(t);if(r!==null){if(t=r.tag,t===13){if(t=xq(r),t!==null){e.blockedOn=t,_q(e.priority,function(){kq(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function nw(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Uk(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var s=new r.constructor(r.type,r);$k=s,r.target.dispatchEvent(s),$k=null}else return t=Hv(r),t!==null&&fP(t),e.blockedOn=r,!1;t.shift()}return!0}function V9(e,t,r){nw(e)&&r.delete(t)}function ehe(){Bk=!1,Jd!==null&&nw(Jd)&&(Jd=null),Zd!==null&&nw(Zd)&&(Zd=null),Xd!==null&&nw(Xd)&&(Xd=null),Qx.forEach(V9),Kx.forEach(V9)}function vg(e,t){e.blockedOn===t&&(e.blockedOn=null,Bk||(Bk=!0,Bi.unstable_scheduleCallback(Bi.unstable_NormalPriority,ehe)))}function Jx(e){function t(a){return vg(a,e)}if(0<Z1.length){vg(Z1[0],e);for(var r=1;r<Z1.length;r++){var s=Z1[r];s.blockedOn===e&&(s.blockedOn=null)}}for(Jd!==null&&vg(Jd,e),Zd!==null&&vg(Zd,e),Xd!==null&&vg(Xd,e),Qx.forEach(t),Kx.forEach(t),r=0;r<Ed.length;r++)s=Ed[r],s.blockedOn===e&&(s.blockedOn=null);for(;0<Ed.length&&(r=Ed[0],r.blockedOn===null);)Pq(r),r.blockedOn===null&&Ed.shift()}var Am=ld.ReactCurrentBatchConfig,Gw=!0;function the(e,t,r,s){var a=rr,i=Am.transition;Am.transition=null;try{rr=1,hP(e,t,r,s)}finally{rr=a,Am.transition=i}}function nhe(e,t,r,s){var a=rr,i=Am.transition;Am.transition=null;try{rr=4,hP(e,t,r,s)}finally{rr=a,Am.transition=i}}function hP(e,t,r,s){if(Gw){var a=Uk(e,t,r,s);if(a===null)jS(e,t,s,Yw,r),U9(e,s);else if(Xfe(a,e,t,r,s))s.stopPropagation();else if(U9(e,s),t&4&&-1<Zfe.indexOf(e)){for(;a!==null;){var i=Hv(a);if(i!==null&&Cq(i),i=Uk(e,t,r,s),i===null&&jS(e,t,s,Yw,r),i===a)break;a=i}a!==null&&s.stopPropagation()}else jS(e,t,s,null,r)}}var Yw=null;function Uk(e,t,r,s){if(Yw=null,e=cP(s),e=pf(e),e!==null)if(t=jh(e),t===null)e=null;else if(r=t.tag,r===13){if(e=xq(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Yw=e,null}function Tq(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Vfe()){case dP:return 1;case wq:return 4;case Ww:case Hfe:return 16;case jq:return 536870912;default:return 16}default:return 16}}var qd=null,mP=null,rw=null;function Aq(){if(rw)return rw;var e,t=mP,r=t.length,s,a="value"in qd?qd.value:qd.textContent,i=a.length;for(e=0;e<r&&t[e]===a[e];e++);var o=r-e;for(s=1;s<=o&&t[r-s]===a[i-s];s++);return rw=a.slice(e,1<s?1-s:void 0)}function sw(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function X1(){return!0}function H9(){return!1}function Gi(e){function t(r,s,a,i,o){this._reactName=r,this._targetInst=a,this.type=s,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?X1:H9,this.isPropagationStopped=H9,this}return Fr(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=X1)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=X1)},persist:function(){},isPersistent:X1}),t}var S0={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pP=Gi(S0),Vv=Fr({},S0,{view:0,detail:0}),rhe=Gi(Vv),hS,mS,bg,PN=Fr({},Vv,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:gP,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==bg&&(bg&&e.type==="mousemove"?(hS=e.screenX-bg.screenX,mS=e.screenY-bg.screenY):mS=hS=0,bg=e),hS)},movementY:function(e){return"movementY"in e?e.movementY:mS}}),W9=Gi(PN),she=Fr({},PN,{dataTransfer:0}),ahe=Gi(she),ihe=Fr({},Vv,{relatedTarget:0}),pS=Gi(ihe),ohe=Fr({},S0,{animationName:0,elapsedTime:0,pseudoElement:0}),lhe=Gi(ohe),che=Fr({},S0,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),dhe=Gi(che),uhe=Fr({},S0,{data:0}),q9=Gi(uhe),fhe={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hhe={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mhe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function phe(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=mhe[e])?!!t[e]:!1}function gP(){return phe}var ghe=Fr({},Vv,{key:function(e){if(e.key){var t=fhe[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=sw(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?hhe[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:gP,charCode:function(e){return e.type==="keypress"?sw(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?sw(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),xhe=Gi(ghe),yhe=Fr({},PN,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),G9=Gi(yhe),vhe=Fr({},Vv,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:gP}),bhe=Gi(vhe),whe=Fr({},S0,{propertyName:0,elapsedTime:0,pseudoElement:0}),jhe=Gi(whe),Nhe=Fr({},PN,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),She=Gi(Nhe),Che=[9,13,27,32],xP=Vc&&"CompositionEvent"in window,hx=null;Vc&&"documentMode"in document&&(hx=document.documentMode);var khe=Vc&&"TextEvent"in window&&!hx,Eq=Vc&&(!xP||hx&&8<hx&&11>=hx),Y9=" ",Q9=!1;function Iq(e,t){switch(e){case"keyup":return Che.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Lq(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var om=!1;function Mhe(e,t){switch(e){case"compositionend":return Lq(t);case"keypress":return t.which!==32?null:(Q9=!0,Y9);case"textInput":return e=t.data,e===Y9&&Q9?null:e;default:return null}}function _he(e,t){if(om)return e==="compositionend"||!xP&&Iq(e,t)?(e=Aq(),rw=mP=qd=null,om=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Eq&&t.locale!=="ko"?null:t.data;default:return null}}var Phe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function K9(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Phe[e.type]:t==="textarea"}function Dq(e,t,r,s){fq(s),t=Qw(t,"onChange"),0<t.length&&(r=new pP("onChange","change",null,r,s),e.push({event:r,listeners:t}))}var mx=null,Zx=null;function The(e){qq(e,0)}function TN(e){var t=dm(e);if(aq(t))return e}function Ahe(e,t){if(e==="change")return t}var $q=!1;if(Vc){var gS;if(Vc){var xS="oninput"in document;if(!xS){var J9=document.createElement("div");J9.setAttribute("oninput","return;"),xS=typeof J9.oninput=="function"}gS=xS}else gS=!1;$q=gS&&(!document.documentMode||9<document.documentMode)}function Z9(){mx&&(mx.detachEvent("onpropertychange",Oq),Zx=mx=null)}function Oq(e){if(e.propertyName==="value"&&TN(Zx)){var t=[];Dq(t,Zx,e,cP(e)),gq(The,t)}}function Ehe(e,t,r){e==="focusin"?(Z9(),mx=t,Zx=r,mx.attachEvent("onpropertychange",Oq)):e==="focusout"&&Z9()}function Ihe(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return TN(Zx)}function Lhe(e,t){if(e==="click")return TN(t)}function Dhe(e,t){if(e==="input"||e==="change")return TN(t)}function $he(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var cl=typeof Object.is=="function"?Object.is:$he;function Xx(e,t){if(cl(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;for(s=0;s<r.length;s++){var a=r[s];if(!Sk.call(t,a)||!cl(e[a],t[a]))return!1}return!0}function X9(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function eL(e,t){var r=X9(e);e=0;for(var s;r;){if(r.nodeType===3){if(s=e+r.textContent.length,e<=t&&s>=t)return{node:r,offset:t-e};e=s}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=X9(r)}}function Rq(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Rq(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Fq(){for(var e=window,t=Uw();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Uw(e.document)}return t}function yP(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Ohe(e){var t=Fq(),r=e.focusedElem,s=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&Rq(r.ownerDocument.documentElement,r)){if(s!==null&&yP(r)){if(t=s.start,e=s.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,i=Math.min(s.start,a);s=s.end===void 0?i:Math.min(s.end,a),!e.extend&&i>s&&(a=s,s=i,i=a),a=eL(r,i);var o=eL(r,s);a&&o&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),i>s?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Rhe=Vc&&"documentMode"in document&&11>=document.documentMode,lm=null,Vk=null,px=null,Hk=!1;function tL(e,t,r){var s=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Hk||lm==null||lm!==Uw(s)||(s=lm,"selectionStart"in s&&yP(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),px&&Xx(px,s)||(px=s,s=Qw(Vk,"onSelect"),0<s.length&&(t=new pP("onSelect","select",null,t,r),e.push({event:t,listeners:s}),t.target=lm)))}function eb(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var cm={animationend:eb("Animation","AnimationEnd"),animationiteration:eb("Animation","AnimationIteration"),animationstart:eb("Animation","AnimationStart"),transitionend:eb("Transition","TransitionEnd")},yS={},zq={};Vc&&(zq=document.createElement("div").style,"AnimationEvent"in window||(delete cm.animationend.animation,delete cm.animationiteration.animation,delete cm.animationstart.animation),"TransitionEvent"in window||delete cm.transitionend.transition);function AN(e){if(yS[e])return yS[e];if(!cm[e])return e;var t=cm[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in zq)return yS[e]=t[r];return e}var Bq=AN("animationend"),Uq=AN("animationiteration"),Vq=AN("animationstart"),Hq=AN("transitionend"),Wq=new Map,nL="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Au(e,t){Wq.set(e,t),wh(t,[e])}for(var vS=0;vS<nL.length;vS++){var bS=nL[vS],Fhe=bS.toLowerCase(),zhe=bS[0].toUpperCase()+bS.slice(1);Au(Fhe,"on"+zhe)}Au(Bq,"onAnimationEnd");Au(Uq,"onAnimationIteration");Au(Vq,"onAnimationStart");Au("dblclick","onDoubleClick");Au("focusin","onFocus");Au("focusout","onBlur");Au(Hq,"onTransitionEnd");pp("onMouseEnter",["mouseout","mouseover"]);pp("onMouseLeave",["mouseout","mouseover"]);pp("onPointerEnter",["pointerout","pointerover"]);pp("onPointerLeave",["pointerout","pointerover"]);wh("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));wh("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));wh("onBeforeInput",["compositionend","keypress","textInput","paste"]);wh("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));wh("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));wh("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zg="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Bhe=new Set("cancel close invalid load scroll toggle".split(" ").concat(Zg));function rL(e,t,r){var s=e.type||"unknown-event";e.currentTarget=r,Ffe(s,t,void 0,e),e.currentTarget=null}function qq(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var s=e[r],a=s.event;s=s.listeners;e:{var i=void 0;if(t)for(var o=s.length-1;0<=o;o--){var l=s[o],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==i&&a.isPropagationStopped())break e;rL(a,l,d),i=c}else for(o=0;o<s.length;o++){if(l=s[o],c=l.instance,d=l.currentTarget,l=l.listener,c!==i&&a.isPropagationStopped())break e;rL(a,l,d),i=c}}}if(Hw)throw e=Fk,Hw=!1,Fk=null,e}function xr(e,t){var r=t[Qk];r===void 0&&(r=t[Qk]=new Set);var s=e+"__bubble";r.has(s)||(Gq(t,e,2,!1),r.add(s))}function wS(e,t,r){var s=0;t&&(s|=4),Gq(r,e,s,t)}var tb="_reactListening"+Math.random().toString(36).slice(2);function ey(e){if(!e[tb]){e[tb]=!0,eq.forEach(function(r){r!=="selectionchange"&&(Bhe.has(r)||wS(r,!1,e),wS(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[tb]||(t[tb]=!0,wS("selectionchange",!1,t))}}function Gq(e,t,r,s){switch(Tq(t)){case 1:var a=the;break;case 4:a=nhe;break;default:a=hP}r=a.bind(null,t,r,e),a=void 0,!Rk||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),s?a!==void 0?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):a!==void 0?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function jS(e,t,r,s,a){var i=s;if(!(t&1)&&!(t&2)&&s!==null)e:for(;;){if(s===null)return;var o=s.tag;if(o===3||o===4){var l=s.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(o===4)for(o=s.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;o=o.return}for(;l!==null;){if(o=pf(l),o===null)return;if(c=o.tag,c===5||c===6){s=i=o;continue e}l=l.parentNode}}s=s.return}gq(function(){var d=i,u=cP(r),f=[];e:{var h=Wq.get(e);if(h!==void 0){var m=pP,g=e;switch(e){case"keypress":if(sw(r)===0)break e;case"keydown":case"keyup":m=xhe;break;case"focusin":g="focus",m=pS;break;case"focusout":g="blur",m=pS;break;case"beforeblur":case"afterblur":m=pS;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=W9;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=ahe;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=bhe;break;case Bq:case Uq:case Vq:m=lhe;break;case Hq:m=jhe;break;case"scroll":m=rhe;break;case"wheel":m=She;break;case"copy":case"cut":case"paste":m=dhe;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=G9}var x=(t&4)!==0,y=!x&&e==="scroll",v=x?h!==null?h+"Capture":null:h;x=[];for(var b=d,w;b!==null;){w=b;var N=w.stateNode;if(w.tag===5&&N!==null&&(w=N,v!==null&&(N=Yx(b,v),N!=null&&x.push(ty(b,N,w)))),y)break;b=b.return}0<x.length&&(h=new m(h,g,null,r,u),f.push({event:h,listeners:x}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",h&&r!==$k&&(g=r.relatedTarget||r.fromElement)&&(pf(g)||g[Hc]))break e;if((m||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,m?(g=r.relatedTarget||r.toElement,m=d,g=g?pf(g):null,g!==null&&(y=jh(g),g!==y||g.tag!==5&&g.tag!==6)&&(g=null)):(m=null,g=d),m!==g)){if(x=W9,N="onMouseLeave",v="onMouseEnter",b="mouse",(e==="pointerout"||e==="pointerover")&&(x=G9,N="onPointerLeave",v="onPointerEnter",b="pointer"),y=m==null?h:dm(m),w=g==null?h:dm(g),h=new x(N,b+"leave",m,r,u),h.target=y,h.relatedTarget=w,N=null,pf(u)===d&&(x=new x(v,b+"enter",g,r,u),x.target=w,x.relatedTarget=y,N=x),y=N,m&&g)t:{for(x=m,v=g,b=0,w=x;w;w=zh(w))b++;for(w=0,N=v;N;N=zh(N))w++;for(;0<b-w;)x=zh(x),b--;for(;0<w-b;)v=zh(v),w--;for(;b--;){if(x===v||v!==null&&x===v.alternate)break t;x=zh(x),v=zh(v)}x=null}else x=null;m!==null&&sL(f,h,m,x,!1),g!==null&&y!==null&&sL(f,y,g,x,!0)}}e:{if(h=d?dm(d):window,m=h.nodeName&&h.nodeName.toLowerCase(),m==="select"||m==="input"&&h.type==="file")var j=Ahe;else if(K9(h))if($q)j=Dhe;else{j=Ihe;var S=Ehe}else(m=h.nodeName)&&m.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(j=Lhe);if(j&&(j=j(e,d))){Dq(f,j,r,u);break e}S&&S(e,h,d),e==="focusout"&&(S=h._wrapperState)&&S.controlled&&h.type==="number"&&Ak(h,"number",h.value)}switch(S=d?dm(d):window,e){case"focusin":(K9(S)||S.contentEditable==="true")&&(lm=S,Vk=d,px=null);break;case"focusout":px=Vk=lm=null;break;case"mousedown":Hk=!0;break;case"contextmenu":case"mouseup":case"dragend":Hk=!1,tL(f,r,u);break;case"selectionchange":if(Rhe)break;case"keydown":case"keyup":tL(f,r,u)}var C;if(xP)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else om?Iq(e,r)&&(k="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(k="onCompositionStart");k&&(Eq&&r.locale!=="ko"&&(om||k!=="onCompositionStart"?k==="onCompositionEnd"&&om&&(C=Aq()):(qd=u,mP="value"in qd?qd.value:qd.textContent,om=!0)),S=Qw(d,k),0<S.length&&(k=new q9(k,e,null,r,u),f.push({event:k,listeners:S}),C?k.data=C:(C=Lq(r),C!==null&&(k.data=C)))),(C=khe?Mhe(e,r):_he(e,r))&&(d=Qw(d,"onBeforeInput"),0<d.length&&(u=new q9("onBeforeInput","beforeinput",null,r,u),f.push({event:u,listeners:d}),u.data=C))}qq(f,t)})}function ty(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Qw(e,t){for(var r=t+"Capture",s=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=Yx(e,r),i!=null&&s.unshift(ty(e,i,a)),i=Yx(e,t),i!=null&&s.push(ty(e,i,a))),e=e.return}return s}function zh(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function sL(e,t,r,s,a){for(var i=t._reactName,o=[];r!==null&&r!==s;){var l=r,c=l.alternate,d=l.stateNode;if(c!==null&&c===s)break;l.tag===5&&d!==null&&(l=d,a?(c=Yx(r,i),c!=null&&o.unshift(ty(r,c,l))):a||(c=Yx(r,i),c!=null&&o.push(ty(r,c,l)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var Uhe=/\r\n?/g,Vhe=/\u0000|\uFFFD/g;function aL(e){return(typeof e=="string"?e:""+e).replace(Uhe,`
`).replace(Vhe,"")}function nb(e,t,r){if(t=aL(t),aL(e)!==t&&r)throw Error(Je(425))}function Kw(){}var Wk=null,qk=null;function Gk(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Yk=typeof setTimeout=="function"?setTimeout:void 0,Hhe=typeof clearTimeout=="function"?clearTimeout:void 0,iL=typeof Promise=="function"?Promise:void 0,Whe=typeof queueMicrotask=="function"?queueMicrotask:typeof iL<"u"?function(e){return iL.resolve(null).then(e).catch(qhe)}:Yk;function qhe(e){setTimeout(function(){throw e})}function NS(e,t){var r=t,s=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(s===0){e.removeChild(a),Jx(t);return}s--}else r!=="$"&&r!=="$?"&&r!=="$!"||s++;r=a}while(r);Jx(t)}function eu(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function oL(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var C0=Math.random().toString(36).slice(2),Il="__reactFiber$"+C0,ny="__reactProps$"+C0,Hc="__reactContainer$"+C0,Qk="__reactEvents$"+C0,Ghe="__reactListeners$"+C0,Yhe="__reactHandles$"+C0;function pf(e){var t=e[Il];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Hc]||r[Il]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=oL(e);e!==null;){if(r=e[Il])return r;e=oL(e)}return t}e=r,r=e.parentNode}return null}function Hv(e){return e=e[Il]||e[Hc],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function dm(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Je(33))}function EN(e){return e[ny]||null}var Kk=[],um=-1;function Eu(e){return{current:e}}function wr(e){0>um||(e.current=Kk[um],Kk[um]=null,um--)}function ur(e,t){um++,Kk[um]=e.current,e.current=t}var fu={},ba=Eu(fu),ci=Eu(!1),Gf=fu;function gp(e,t){var r=e.type.contextTypes;if(!r)return fu;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in r)a[i]=t[i];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function di(e){return e=e.childContextTypes,e!=null}function Jw(){wr(ci),wr(ba)}function lL(e,t,r){if(ba.current!==fu)throw Error(Je(168));ur(ba,t),ur(ci,r)}function Yq(e,t,r){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return r;s=s.getChildContext();for(var a in s)if(!(a in t))throw Error(Je(108,Efe(e)||"Unknown",a));return Fr({},r,s)}function Zw(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||fu,Gf=ba.current,ur(ba,e),ur(ci,ci.current),!0}function cL(e,t,r){var s=e.stateNode;if(!s)throw Error(Je(169));r?(e=Yq(e,t,Gf),s.__reactInternalMemoizedMergedChildContext=e,wr(ci),wr(ba),ur(ba,e)):wr(ci),ur(ci,r)}var jc=null,IN=!1,SS=!1;function Qq(e){jc===null?jc=[e]:jc.push(e)}function Qhe(e){IN=!0,Qq(e)}function Iu(){if(!SS&&jc!==null){SS=!0;var e=0,t=rr;try{var r=jc;for(rr=1;e<r.length;e++){var s=r[e];do s=s(!0);while(s!==null)}jc=null,IN=!1}catch(a){throw jc!==null&&(jc=jc.slice(e+1)),bq(dP,Iu),a}finally{rr=t,SS=!1}}return null}var fm=[],hm=0,Xw=null,ej=0,oo=[],lo=0,Yf=null,Pc=1,Tc="";function tf(e,t){fm[hm++]=ej,fm[hm++]=Xw,Xw=e,ej=t}function Kq(e,t,r){oo[lo++]=Pc,oo[lo++]=Tc,oo[lo++]=Yf,Yf=e;var s=Pc;e=Tc;var a=32-nl(s)-1;s&=~(1<<a),r+=1;var i=32-nl(t)+a;if(30<i){var o=a-a%5;i=(s&(1<<o)-1).toString(32),s>>=o,a-=o,Pc=1<<32-nl(t)+a|r<<a|s,Tc=i+e}else Pc=1<<i|r<<a|s,Tc=e}function vP(e){e.return!==null&&(tf(e,1),Kq(e,1,0))}function bP(e){for(;e===Xw;)Xw=fm[--hm],fm[hm]=null,ej=fm[--hm],fm[hm]=null;for(;e===Yf;)Yf=oo[--lo],oo[lo]=null,Tc=oo[--lo],oo[lo]=null,Pc=oo[--lo],oo[lo]=null}var Di=null,Ii=null,_r=!1,Go=null;function Jq(e,t){var r=fo(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function dL(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Di=e,Ii=eu(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Di=e,Ii=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Yf!==null?{id:Pc,overflow:Tc}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=fo(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Di=e,Ii=null,!0):!1;default:return!1}}function Jk(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Zk(e){if(_r){var t=Ii;if(t){var r=t;if(!dL(e,t)){if(Jk(e))throw Error(Je(418));t=eu(r.nextSibling);var s=Di;t&&dL(e,t)?Jq(s,r):(e.flags=e.flags&-4097|2,_r=!1,Di=e)}}else{if(Jk(e))throw Error(Je(418));e.flags=e.flags&-4097|2,_r=!1,Di=e}}}function uL(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Di=e}function rb(e){if(e!==Di)return!1;if(!_r)return uL(e),_r=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Gk(e.type,e.memoizedProps)),t&&(t=Ii)){if(Jk(e))throw Zq(),Error(Je(418));for(;t;)Jq(e,t),t=eu(t.nextSibling)}if(uL(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Je(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Ii=eu(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Ii=null}}else Ii=Di?eu(e.stateNode.nextSibling):null;return!0}function Zq(){for(var e=Ii;e;)e=eu(e.nextSibling)}function xp(){Ii=Di=null,_r=!1}function wP(e){Go===null?Go=[e]:Go.push(e)}var Khe=ld.ReactCurrentBatchConfig;function wg(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Je(309));var s=r.stateNode}if(!s)throw Error(Je(147,e));var a=s,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=a.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(Je(284));if(!r._owner)throw Error(Je(290,e))}return e}function sb(e,t){throw e=Object.prototype.toString.call(t),Error(Je(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function fL(e){var t=e._init;return t(e._payload)}function Xq(e){function t(v,b){if(e){var w=v.deletions;w===null?(v.deletions=[b],v.flags|=16):w.push(b)}}function r(v,b){if(!e)return null;for(;b!==null;)t(v,b),b=b.sibling;return null}function s(v,b){for(v=new Map;b!==null;)b.key!==null?v.set(b.key,b):v.set(b.index,b),b=b.sibling;return v}function a(v,b){return v=su(v,b),v.index=0,v.sibling=null,v}function i(v,b,w){return v.index=w,e?(w=v.alternate,w!==null?(w=w.index,w<b?(v.flags|=2,b):w):(v.flags|=2,b)):(v.flags|=1048576,b)}function o(v){return e&&v.alternate===null&&(v.flags|=2),v}function l(v,b,w,N){return b===null||b.tag!==6?(b=AS(w,v.mode,N),b.return=v,b):(b=a(b,w),b.return=v,b)}function c(v,b,w,N){var j=w.type;return j===im?u(v,b,w.props.children,N,w.key):b!==null&&(b.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===_d&&fL(j)===b.type)?(N=a(b,w.props),N.ref=wg(v,b,w),N.return=v,N):(N=uw(w.type,w.key,w.props,null,v.mode,N),N.ref=wg(v,b,w),N.return=v,N)}function d(v,b,w,N){return b===null||b.tag!==4||b.stateNode.containerInfo!==w.containerInfo||b.stateNode.implementation!==w.implementation?(b=ES(w,v.mode,N),b.return=v,b):(b=a(b,w.children||[]),b.return=v,b)}function u(v,b,w,N,j){return b===null||b.tag!==7?(b=Df(w,v.mode,N,j),b.return=v,b):(b=a(b,w),b.return=v,b)}function f(v,b,w){if(typeof b=="string"&&b!==""||typeof b=="number")return b=AS(""+b,v.mode,w),b.return=v,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case G1:return w=uw(b.type,b.key,b.props,null,v.mode,w),w.ref=wg(v,null,b),w.return=v,w;case am:return b=ES(b,v.mode,w),b.return=v,b;case _d:var N=b._init;return f(v,N(b._payload),w)}if(Kg(b)||gg(b))return b=Df(b,v.mode,w,null),b.return=v,b;sb(v,b)}return null}function h(v,b,w,N){var j=b!==null?b.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return j!==null?null:l(v,b,""+w,N);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case G1:return w.key===j?c(v,b,w,N):null;case am:return w.key===j?d(v,b,w,N):null;case _d:return j=w._init,h(v,b,j(w._payload),N)}if(Kg(w)||gg(w))return j!==null?null:u(v,b,w,N,null);sb(v,w)}return null}function m(v,b,w,N,j){if(typeof N=="string"&&N!==""||typeof N=="number")return v=v.get(w)||null,l(b,v,""+N,j);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case G1:return v=v.get(N.key===null?w:N.key)||null,c(b,v,N,j);case am:return v=v.get(N.key===null?w:N.key)||null,d(b,v,N,j);case _d:var S=N._init;return m(v,b,w,S(N._payload),j)}if(Kg(N)||gg(N))return v=v.get(w)||null,u(b,v,N,j,null);sb(b,N)}return null}function g(v,b,w,N){for(var j=null,S=null,C=b,k=b=0,M=null;C!==null&&k<w.length;k++){C.index>k?(M=C,C=null):M=C.sibling;var A=h(v,C,w[k],N);if(A===null){C===null&&(C=M);break}e&&C&&A.alternate===null&&t(v,C),b=i(A,b,k),S===null?j=A:S.sibling=A,S=A,C=M}if(k===w.length)return r(v,C),_r&&tf(v,k),j;if(C===null){for(;k<w.length;k++)C=f(v,w[k],N),C!==null&&(b=i(C,b,k),S===null?j=C:S.sibling=C,S=C);return _r&&tf(v,k),j}for(C=s(v,C);k<w.length;k++)M=m(C,v,k,w[k],N),M!==null&&(e&&M.alternate!==null&&C.delete(M.key===null?k:M.key),b=i(M,b,k),S===null?j=M:S.sibling=M,S=M);return e&&C.forEach(function(P){return t(v,P)}),_r&&tf(v,k),j}function x(v,b,w,N){var j=gg(w);if(typeof j!="function")throw Error(Je(150));if(w=j.call(w),w==null)throw Error(Je(151));for(var S=j=null,C=b,k=b=0,M=null,A=w.next();C!==null&&!A.done;k++,A=w.next()){C.index>k?(M=C,C=null):M=C.sibling;var P=h(v,C,A.value,N);if(P===null){C===null&&(C=M);break}e&&C&&P.alternate===null&&t(v,C),b=i(P,b,k),S===null?j=P:S.sibling=P,S=P,C=M}if(A.done)return r(v,C),_r&&tf(v,k),j;if(C===null){for(;!A.done;k++,A=w.next())A=f(v,A.value,N),A!==null&&(b=i(A,b,k),S===null?j=A:S.sibling=A,S=A);return _r&&tf(v,k),j}for(C=s(v,C);!A.done;k++,A=w.next())A=m(C,v,k,A.value,N),A!==null&&(e&&A.alternate!==null&&C.delete(A.key===null?k:A.key),b=i(A,b,k),S===null?j=A:S.sibling=A,S=A);return e&&C.forEach(function(T){return t(v,T)}),_r&&tf(v,k),j}function y(v,b,w,N){if(typeof w=="object"&&w!==null&&w.type===im&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case G1:e:{for(var j=w.key,S=b;S!==null;){if(S.key===j){if(j=w.type,j===im){if(S.tag===7){r(v,S.sibling),b=a(S,w.props.children),b.return=v,v=b;break e}}else if(S.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===_d&&fL(j)===S.type){r(v,S.sibling),b=a(S,w.props),b.ref=wg(v,S,w),b.return=v,v=b;break e}r(v,S);break}else t(v,S);S=S.sibling}w.type===im?(b=Df(w.props.children,v.mode,N,w.key),b.return=v,v=b):(N=uw(w.type,w.key,w.props,null,v.mode,N),N.ref=wg(v,b,w),N.return=v,v=N)}return o(v);case am:e:{for(S=w.key;b!==null;){if(b.key===S)if(b.tag===4&&b.stateNode.containerInfo===w.containerInfo&&b.stateNode.implementation===w.implementation){r(v,b.sibling),b=a(b,w.children||[]),b.return=v,v=b;break e}else{r(v,b);break}else t(v,b);b=b.sibling}b=ES(w,v.mode,N),b.return=v,v=b}return o(v);case _d:return S=w._init,y(v,b,S(w._payload),N)}if(Kg(w))return g(v,b,w,N);if(gg(w))return x(v,b,w,N);sb(v,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,b!==null&&b.tag===6?(r(v,b.sibling),b=a(b,w),b.return=v,v=b):(r(v,b),b=AS(w,v.mode,N),b.return=v,v=b),o(v)):r(v,b)}return y}var yp=Xq(!0),eG=Xq(!1),tj=Eu(null),nj=null,mm=null,jP=null;function NP(){jP=mm=nj=null}function SP(e){var t=tj.current;wr(tj),e._currentValue=t}function Xk(e,t,r){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===r)break;e=e.return}}function Em(e,t){nj=e,jP=mm=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(oi=!0),e.firstContext=null)}function wo(e){var t=e._currentValue;if(jP!==e)if(e={context:e,memoizedValue:t,next:null},mm===null){if(nj===null)throw Error(Je(308));mm=e,nj.dependencies={lanes:0,firstContext:e}}else mm=mm.next=e;return t}var gf=null;function CP(e){gf===null?gf=[e]:gf.push(e)}function tG(e,t,r,s){var a=t.interleaved;return a===null?(r.next=r,CP(t)):(r.next=a.next,a.next=r),t.interleaved=r,Wc(e,s)}function Wc(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Pd=!1;function kP(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function nG(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Dc(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function tu(e,t,r){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,Rn&2){var a=s.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),s.pending=t,Wc(e,r)}return a=s.interleaved,a===null?(t.next=t,CP(s)):(t.next=a.next,a.next=t),s.interleaved=t,Wc(e,r)}function aw(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,uP(e,r)}}function hL(e,t){var r=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,r===s)){var a=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?a=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?a=i=t:i=i.next=t}else a=i=t;r={baseState:s.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:s.shared,effects:s.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function rj(e,t,r,s){var a=e.updateQueue;Pd=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var c=l,d=c.next;c.next=null,o===null?i=d:o.next=d,o=c;var u=e.alternate;u!==null&&(u=u.updateQueue,l=u.lastBaseUpdate,l!==o&&(l===null?u.firstBaseUpdate=d:l.next=d,u.lastBaseUpdate=c))}if(i!==null){var f=a.baseState;o=0,u=d=c=null,l=i;do{var h=l.lane,m=l.eventTime;if((s&h)===h){u!==null&&(u=u.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var g=e,x=l;switch(h=t,m=r,x.tag){case 1:if(g=x.payload,typeof g=="function"){f=g.call(m,f,h);break e}f=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=x.payload,h=typeof g=="function"?g.call(m,f,h):g,h==null)break e;f=Fr({},f,h);break e;case 2:Pd=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,h=a.effects,h===null?a.effects=[l]:h.push(l))}else m={eventTime:m,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},u===null?(d=u=m,c=f):u=u.next=m,o|=h;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;h=l,l=h.next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}while(!0);if(u===null&&(c=f),a.baseState=c,a.firstBaseUpdate=d,a.lastBaseUpdate=u,t=a.shared.interleaved,t!==null){a=t;do o|=a.lane,a=a.next;while(a!==t)}else i===null&&(a.shared.lanes=0);Kf|=o,e.lanes=o,e.memoizedState=f}}function mL(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],a=s.callback;if(a!==null){if(s.callback=null,s=r,typeof a!="function")throw Error(Je(191,a));a.call(s)}}}var Wv={},Bl=Eu(Wv),ry=Eu(Wv),sy=Eu(Wv);function xf(e){if(e===Wv)throw Error(Je(174));return e}function MP(e,t){switch(ur(sy,t),ur(ry,e),ur(Bl,Wv),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ik(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Ik(t,e)}wr(Bl),ur(Bl,t)}function vp(){wr(Bl),wr(ry),wr(sy)}function rG(e){xf(sy.current);var t=xf(Bl.current),r=Ik(t,e.type);t!==r&&(ur(ry,e),ur(Bl,r))}function _P(e){ry.current===e&&(wr(Bl),wr(ry))}var Or=Eu(0);function sj(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var CS=[];function PP(){for(var e=0;e<CS.length;e++)CS[e]._workInProgressVersionPrimary=null;CS.length=0}var iw=ld.ReactCurrentDispatcher,kS=ld.ReactCurrentBatchConfig,Qf=0,Rr=null,_s=null,Bs=null,aj=!1,gx=!1,ay=0,Jhe=0;function la(){throw Error(Je(321))}function TP(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!cl(e[r],t[r]))return!1;return!0}function AP(e,t,r,s,a,i){if(Qf=i,Rr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,iw.current=e===null||e.memoizedState===null?tme:nme,e=r(s,a),gx){i=0;do{if(gx=!1,ay=0,25<=i)throw Error(Je(301));i+=1,Bs=_s=null,t.updateQueue=null,iw.current=rme,e=r(s,a)}while(gx)}if(iw.current=ij,t=_s!==null&&_s.next!==null,Qf=0,Bs=_s=Rr=null,aj=!1,t)throw Error(Je(300));return e}function EP(){var e=ay!==0;return ay=0,e}function Pl(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Bs===null?Rr.memoizedState=Bs=e:Bs=Bs.next=e,Bs}function jo(){if(_s===null){var e=Rr.alternate;e=e!==null?e.memoizedState:null}else e=_s.next;var t=Bs===null?Rr.memoizedState:Bs.next;if(t!==null)Bs=t,_s=e;else{if(e===null)throw Error(Je(310));_s=e,e={memoizedState:_s.memoizedState,baseState:_s.baseState,baseQueue:_s.baseQueue,queue:_s.queue,next:null},Bs===null?Rr.memoizedState=Bs=e:Bs=Bs.next=e}return Bs}function iy(e,t){return typeof t=="function"?t(e):t}function MS(e){var t=jo(),r=t.queue;if(r===null)throw Error(Je(311));r.lastRenderedReducer=e;var s=_s,a=s.baseQueue,i=r.pending;if(i!==null){if(a!==null){var o=a.next;a.next=i.next,i.next=o}s.baseQueue=a=i,r.pending=null}if(a!==null){i=a.next,s=s.baseState;var l=o=null,c=null,d=i;do{var u=d.lane;if((Qf&u)===u)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),s=d.hasEagerState?d.eagerState:e(s,d.action);else{var f={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=f,o=s):c=c.next=f,Rr.lanes|=u,Kf|=u}d=d.next}while(d!==null&&d!==i);c===null?o=s:c.next=l,cl(s,t.memoizedState)||(oi=!0),t.memoizedState=s,t.baseState=o,t.baseQueue=c,r.lastRenderedState=s}if(e=r.interleaved,e!==null){a=e;do i=a.lane,Rr.lanes|=i,Kf|=i,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function _S(e){var t=jo(),r=t.queue;if(r===null)throw Error(Je(311));r.lastRenderedReducer=e;var s=r.dispatch,a=r.pending,i=t.memoizedState;if(a!==null){r.pending=null;var o=a=a.next;do i=e(i,o.action),o=o.next;while(o!==a);cl(i,t.memoizedState)||(oi=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,s]}function sG(){}function aG(e,t){var r=Rr,s=jo(),a=t(),i=!cl(s.memoizedState,a);if(i&&(s.memoizedState=a,oi=!0),s=s.queue,IP(lG.bind(null,r,s,e),[e]),s.getSnapshot!==t||i||Bs!==null&&Bs.memoizedState.tag&1){if(r.flags|=2048,oy(9,oG.bind(null,r,s,a,t),void 0,null),Hs===null)throw Error(Je(349));Qf&30||iG(r,t,a)}return a}function iG(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Rr.updateQueue,t===null?(t={lastEffect:null,stores:null},Rr.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function oG(e,t,r,s){t.value=r,t.getSnapshot=s,cG(t)&&dG(e)}function lG(e,t,r){return r(function(){cG(t)&&dG(e)})}function cG(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!cl(e,r)}catch{return!0}}function dG(e){var t=Wc(e,1);t!==null&&rl(t,e,1,-1)}function pL(e){var t=Pl();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:iy,lastRenderedState:e},t.queue=e,e=e.dispatch=eme.bind(null,Rr,e),[t.memoizedState,e]}function oy(e,t,r,s){return e={tag:e,create:t,destroy:r,deps:s,next:null},t=Rr.updateQueue,t===null?(t={lastEffect:null,stores:null},Rr.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(s=r.next,r.next=e,e.next=s,t.lastEffect=e)),e}function uG(){return jo().memoizedState}function ow(e,t,r,s){var a=Pl();Rr.flags|=e,a.memoizedState=oy(1|t,r,void 0,s===void 0?null:s)}function LN(e,t,r,s){var a=jo();s=s===void 0?null:s;var i=void 0;if(_s!==null){var o=_s.memoizedState;if(i=o.destroy,s!==null&&TP(s,o.deps)){a.memoizedState=oy(t,r,i,s);return}}Rr.flags|=e,a.memoizedState=oy(1|t,r,i,s)}function gL(e,t){return ow(8390656,8,e,t)}function IP(e,t){return LN(2048,8,e,t)}function fG(e,t){return LN(4,2,e,t)}function hG(e,t){return LN(4,4,e,t)}function mG(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function pG(e,t,r){return r=r!=null?r.concat([e]):null,LN(4,4,mG.bind(null,t,e),r)}function LP(){}function gG(e,t){var r=jo();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&TP(t,s[1])?s[0]:(r.memoizedState=[e,t],e)}function xG(e,t){var r=jo();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&TP(t,s[1])?s[0]:(e=e(),r.memoizedState=[e,t],e)}function yG(e,t,r){return Qf&21?(cl(r,t)||(r=Nq(),Rr.lanes|=r,Kf|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,oi=!0),e.memoizedState=r)}function Zhe(e,t){var r=rr;rr=r!==0&&4>r?r:4,e(!0);var s=kS.transition;kS.transition={};try{e(!1),t()}finally{rr=r,kS.transition=s}}function vG(){return jo().memoizedState}function Xhe(e,t,r){var s=ru(e);if(r={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null},bG(e))wG(t,r);else if(r=tG(e,t,r,s),r!==null){var a=Ha();rl(r,e,s,a),jG(r,t,s)}}function eme(e,t,r){var s=ru(e),a={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null};if(bG(e))wG(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,r);if(a.hasEagerState=!0,a.eagerState=l,cl(l,o)){var c=t.interleaved;c===null?(a.next=a,CP(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}r=tG(e,t,a,s),r!==null&&(a=Ha(),rl(r,e,s,a),jG(r,t,s))}}function bG(e){var t=e.alternate;return e===Rr||t!==null&&t===Rr}function wG(e,t){gx=aj=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function jG(e,t,r){if(r&4194240){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,uP(e,r)}}var ij={readContext:wo,useCallback:la,useContext:la,useEffect:la,useImperativeHandle:la,useInsertionEffect:la,useLayoutEffect:la,useMemo:la,useReducer:la,useRef:la,useState:la,useDebugValue:la,useDeferredValue:la,useTransition:la,useMutableSource:la,useSyncExternalStore:la,useId:la,unstable_isNewReconciler:!1},tme={readContext:wo,useCallback:function(e,t){return Pl().memoizedState=[e,t===void 0?null:t],e},useContext:wo,useEffect:gL,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,ow(4194308,4,mG.bind(null,t,e),r)},useLayoutEffect:function(e,t){return ow(4194308,4,e,t)},useInsertionEffect:function(e,t){return ow(4,2,e,t)},useMemo:function(e,t){var r=Pl();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var s=Pl();return t=r!==void 0?r(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=Xhe.bind(null,Rr,e),[s.memoizedState,e]},useRef:function(e){var t=Pl();return e={current:e},t.memoizedState=e},useState:pL,useDebugValue:LP,useDeferredValue:function(e){return Pl().memoizedState=e},useTransition:function(){var e=pL(!1),t=e[0];return e=Zhe.bind(null,e[1]),Pl().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var s=Rr,a=Pl();if(_r){if(r===void 0)throw Error(Je(407));r=r()}else{if(r=t(),Hs===null)throw Error(Je(349));Qf&30||iG(s,t,r)}a.memoizedState=r;var i={value:r,getSnapshot:t};return a.queue=i,gL(lG.bind(null,s,i,e),[e]),s.flags|=2048,oy(9,oG.bind(null,s,i,r,t),void 0,null),r},useId:function(){var e=Pl(),t=Hs.identifierPrefix;if(_r){var r=Tc,s=Pc;r=(s&~(1<<32-nl(s)-1)).toString(32)+r,t=":"+t+"R"+r,r=ay++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=Jhe++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},nme={readContext:wo,useCallback:gG,useContext:wo,useEffect:IP,useImperativeHandle:pG,useInsertionEffect:fG,useLayoutEffect:hG,useMemo:xG,useReducer:MS,useRef:uG,useState:function(){return MS(iy)},useDebugValue:LP,useDeferredValue:function(e){var t=jo();return yG(t,_s.memoizedState,e)},useTransition:function(){var e=MS(iy)[0],t=jo().memoizedState;return[e,t]},useMutableSource:sG,useSyncExternalStore:aG,useId:vG,unstable_isNewReconciler:!1},rme={readContext:wo,useCallback:gG,useContext:wo,useEffect:IP,useImperativeHandle:pG,useInsertionEffect:fG,useLayoutEffect:hG,useMemo:xG,useReducer:_S,useRef:uG,useState:function(){return _S(iy)},useDebugValue:LP,useDeferredValue:function(e){var t=jo();return _s===null?t.memoizedState=e:yG(t,_s.memoizedState,e)},useTransition:function(){var e=_S(iy)[0],t=jo().memoizedState;return[e,t]},useMutableSource:sG,useSyncExternalStore:aG,useId:vG,unstable_isNewReconciler:!1};function Fo(e,t){if(e&&e.defaultProps){t=Fr({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function e6(e,t,r,s){t=e.memoizedState,r=r(s,t),r=r==null?t:Fr({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var DN={isMounted:function(e){return(e=e._reactInternals)?jh(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var s=Ha(),a=ru(e),i=Dc(s,a);i.payload=t,r!=null&&(i.callback=r),t=tu(e,i,a),t!==null&&(rl(t,e,a,s),aw(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var s=Ha(),a=ru(e),i=Dc(s,a);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=tu(e,i,a),t!==null&&(rl(t,e,a,s),aw(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Ha(),s=ru(e),a=Dc(r,s);a.tag=2,t!=null&&(a.callback=t),t=tu(e,a,s),t!==null&&(rl(t,e,s,r),aw(t,e,s))}};function xL(e,t,r,s,a,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,i,o):t.prototype&&t.prototype.isPureReactComponent?!Xx(r,s)||!Xx(a,i):!0}function NG(e,t,r){var s=!1,a=fu,i=t.contextType;return typeof i=="object"&&i!==null?i=wo(i):(a=di(t)?Gf:ba.current,s=t.contextTypes,i=(s=s!=null)?gp(e,a):fu),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=DN,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function yL(e,t,r,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,s),t.state!==e&&DN.enqueueReplaceState(t,t.state,null)}function t6(e,t,r,s){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},kP(e);var i=t.contextType;typeof i=="object"&&i!==null?a.context=wo(i):(i=di(t)?Gf:ba.current,a.context=gp(e,i)),a.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(e6(e,t,i,r),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&DN.enqueueReplaceState(a,a.state,null),rj(e,r,a,s),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function bp(e,t){try{var r="",s=t;do r+=Afe(s),s=s.return;while(s);var a=r}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:a,digest:null}}function PS(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function n6(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var sme=typeof WeakMap=="function"?WeakMap:Map;function SG(e,t,r){r=Dc(-1,r),r.tag=3,r.payload={element:null};var s=t.value;return r.callback=function(){lj||(lj=!0,f6=s),n6(e,t)},r}function CG(e,t,r){r=Dc(-1,r),r.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var a=t.value;r.payload=function(){return s(a)},r.callback=function(){n6(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){n6(e,t),typeof s!="function"&&(nu===null?nu=new Set([this]):nu.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function vL(e,t,r){var s=e.pingCache;if(s===null){s=e.pingCache=new sme;var a=new Set;s.set(t,a)}else a=s.get(t),a===void 0&&(a=new Set,s.set(t,a));a.has(r)||(a.add(r),e=yme.bind(null,e,t,r),t.then(e,e))}function bL(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function wL(e,t,r,s,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Dc(-1,1),t.tag=2,tu(r,t,1))),r.lanes|=1),e)}var ame=ld.ReactCurrentOwner,oi=!1;function La(e,t,r,s){t.child=e===null?eG(t,null,r,s):yp(t,e.child,r,s)}function jL(e,t,r,s,a){r=r.render;var i=t.ref;return Em(t,a),s=AP(e,t,r,s,i,a),r=EP(),e!==null&&!oi?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,qc(e,t,a)):(_r&&r&&vP(t),t.flags|=1,La(e,t,s,a),t.child)}function NL(e,t,r,s,a){if(e===null){var i=r.type;return typeof i=="function"&&!UP(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,kG(e,t,i,s,a)):(e=uw(r.type,null,s,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&a)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:Xx,r(o,s)&&e.ref===t.ref)return qc(e,t,a)}return t.flags|=1,e=su(i,s),e.ref=t.ref,e.return=t,t.child=e}function kG(e,t,r,s,a){if(e!==null){var i=e.memoizedProps;if(Xx(i,s)&&e.ref===t.ref)if(oi=!1,t.pendingProps=s=i,(e.lanes&a)!==0)e.flags&131072&&(oi=!0);else return t.lanes=e.lanes,qc(e,t,a)}return r6(e,t,r,s,a)}function MG(e,t,r){var s=t.pendingProps,a=s.children,i=e!==null?e.memoizedState:null;if(s.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ur(gm,Ci),Ci|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ur(gm,Ci),Ci|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=i!==null?i.baseLanes:r,ur(gm,Ci),Ci|=s}else i!==null?(s=i.baseLanes|r,t.memoizedState=null):s=r,ur(gm,Ci),Ci|=s;return La(e,t,a,r),t.child}function _G(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function r6(e,t,r,s,a){var i=di(r)?Gf:ba.current;return i=gp(t,i),Em(t,a),r=AP(e,t,r,s,i,a),s=EP(),e!==null&&!oi?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,qc(e,t,a)):(_r&&s&&vP(t),t.flags|=1,La(e,t,r,a),t.child)}function SL(e,t,r,s,a){if(di(r)){var i=!0;Zw(t)}else i=!1;if(Em(t,a),t.stateNode===null)lw(e,t),NG(t,r,s),t6(t,r,s,a),s=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,d=r.contextType;typeof d=="object"&&d!==null?d=wo(d):(d=di(r)?Gf:ba.current,d=gp(t,d));var u=r.getDerivedStateFromProps,f=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==s||c!==d)&&yL(t,o,s,d),Pd=!1;var h=t.memoizedState;o.state=h,rj(t,s,o,a),c=t.memoizedState,l!==s||h!==c||ci.current||Pd?(typeof u=="function"&&(e6(t,r,u,s),c=t.memoizedState),(l=Pd||xL(t,r,l,s,h,c,d))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=c),o.props=s,o.state=c,o.context=d,s=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{o=t.stateNode,nG(e,t),l=t.memoizedProps,d=t.type===t.elementType?l:Fo(t.type,l),o.props=d,f=t.pendingProps,h=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=wo(c):(c=di(r)?Gf:ba.current,c=gp(t,c));var m=r.getDerivedStateFromProps;(u=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==f||h!==c)&&yL(t,o,s,c),Pd=!1,h=t.memoizedState,o.state=h,rj(t,s,o,a);var g=t.memoizedState;l!==f||h!==g||ci.current||Pd?(typeof m=="function"&&(e6(t,r,m,s),g=t.memoizedState),(d=Pd||xL(t,r,d,s,h,g,c)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(s,g,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(s,g,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=g),o.props=s,o.state=g,o.context=c,s=d):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),s=!1)}return s6(e,t,r,s,i,a)}function s6(e,t,r,s,a,i){_G(e,t);var o=(t.flags&128)!==0;if(!s&&!o)return a&&cL(t,r,!1),qc(e,t,i);s=t.stateNode,ame.current=t;var l=o&&typeof r.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&o?(t.child=yp(t,e.child,null,i),t.child=yp(t,null,l,i)):La(e,t,l,i),t.memoizedState=s.state,a&&cL(t,r,!0),t.child}function PG(e){var t=e.stateNode;t.pendingContext?lL(e,t.pendingContext,t.pendingContext!==t.context):t.context&&lL(e,t.context,!1),MP(e,t.containerInfo)}function CL(e,t,r,s,a){return xp(),wP(a),t.flags|=256,La(e,t,r,s),t.child}var a6={dehydrated:null,treeContext:null,retryLane:0};function i6(e){return{baseLanes:e,cachePool:null,transitions:null}}function TG(e,t,r){var s=t.pendingProps,a=Or.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(a&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),ur(Or,a&1),e===null)return Zk(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=s.children,e=s.fallback,i?(s=t.mode,i=t.child,o={mode:"hidden",children:o},!(s&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=RN(o,s,0,null),e=Df(e,s,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=i6(r),t.memoizedState=a6,e):DP(t,o));if(a=e.memoizedState,a!==null&&(l=a.dehydrated,l!==null))return ime(e,t,o,s,l,a,r);if(i){i=s.fallback,o=t.mode,a=e.child,l=a.sibling;var c={mode:"hidden",children:s.children};return!(o&1)&&t.child!==a?(s=t.child,s.childLanes=0,s.pendingProps=c,t.deletions=null):(s=su(a,c),s.subtreeFlags=a.subtreeFlags&14680064),l!==null?i=su(l,i):(i=Df(i,o,r,null),i.flags|=2),i.return=t,s.return=t,s.sibling=i,t.child=s,s=i,i=t.child,o=e.child.memoizedState,o=o===null?i6(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~r,t.memoizedState=a6,s}return i=e.child,e=i.sibling,s=su(i,{mode:"visible",children:s.children}),!(t.mode&1)&&(s.lanes=r),s.return=t,s.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=s,t.memoizedState=null,s}function DP(e,t){return t=RN({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ab(e,t,r,s){return s!==null&&wP(s),yp(t,e.child,null,r),e=DP(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function ime(e,t,r,s,a,i,o){if(r)return t.flags&256?(t.flags&=-257,s=PS(Error(Je(422))),ab(e,t,o,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=s.fallback,a=t.mode,s=RN({mode:"visible",children:s.children},a,0,null),i=Df(i,a,o,null),i.flags|=2,s.return=t,i.return=t,s.sibling=i,t.child=s,t.mode&1&&yp(t,e.child,null,o),t.child.memoizedState=i6(o),t.memoizedState=a6,i);if(!(t.mode&1))return ab(e,t,o,null);if(a.data==="$!"){if(s=a.nextSibling&&a.nextSibling.dataset,s)var l=s.dgst;return s=l,i=Error(Je(419)),s=PS(i,s,void 0),ab(e,t,o,s)}if(l=(o&e.childLanes)!==0,oi||l){if(s=Hs,s!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(s.suspendedLanes|o)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,Wc(e,a),rl(s,e,a,-1))}return BP(),s=PS(Error(Je(421))),ab(e,t,o,s)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=vme.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,Ii=eu(a.nextSibling),Di=t,_r=!0,Go=null,e!==null&&(oo[lo++]=Pc,oo[lo++]=Tc,oo[lo++]=Yf,Pc=e.id,Tc=e.overflow,Yf=t),t=DP(t,s.children),t.flags|=4096,t)}function kL(e,t,r){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),Xk(e.return,t,r)}function TS(e,t,r,s,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:r,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=s,i.tail=r,i.tailMode=a)}function AG(e,t,r){var s=t.pendingProps,a=s.revealOrder,i=s.tail;if(La(e,t,s.children,r),s=Or.current,s&2)s=s&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&kL(e,r,t);else if(e.tag===19)kL(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(ur(Or,s),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;r!==null;)e=r.alternate,e!==null&&sj(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),TS(t,!1,a,r,i);break;case"backwards":for(r=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&sj(e)===null){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}TS(t,!0,r,null,i);break;case"together":TS(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function lw(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function qc(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Kf|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Je(153));if(t.child!==null){for(e=t.child,r=su(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=su(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function ome(e,t,r){switch(t.tag){case 3:PG(t),xp();break;case 5:rG(t);break;case 1:di(t.type)&&Zw(t);break;case 4:MP(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,a=t.memoizedProps.value;ur(tj,s._currentValue),s._currentValue=a;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(ur(Or,Or.current&1),t.flags|=128,null):r&t.child.childLanes?TG(e,t,r):(ur(Or,Or.current&1),e=qc(e,t,r),e!==null?e.sibling:null);ur(Or,Or.current&1);break;case 19:if(s=(r&t.childLanes)!==0,e.flags&128){if(s)return AG(e,t,r);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),ur(Or,Or.current),s)break;return null;case 22:case 23:return t.lanes=0,MG(e,t,r)}return qc(e,t,r)}var EG,o6,IG,LG;EG=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};o6=function(){};IG=function(e,t,r,s){var a=e.memoizedProps;if(a!==s){e=t.stateNode,xf(Bl.current);var i=null;switch(r){case"input":a=Pk(e,a),s=Pk(e,s),i=[];break;case"select":a=Fr({},a,{value:void 0}),s=Fr({},s,{value:void 0}),i=[];break;case"textarea":a=Ek(e,a),s=Ek(e,s),i=[];break;default:typeof a.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=Kw)}Lk(r,s);var o;r=null;for(d in a)if(!s.hasOwnProperty(d)&&a.hasOwnProperty(d)&&a[d]!=null)if(d==="style"){var l=a[d];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(qx.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in s){var c=s[d];if(l=a!=null?a[d]:void 0,s.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(i||(i=[]),i.push(d,r)),r=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(qx.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&xr("scroll",e),i||l===c||(i=[])):(i=i||[]).push(d,c))}r&&(i=i||[]).push("style",r);var d=i;(t.updateQueue=d)&&(t.flags|=4)}};LG=function(e,t,r,s){r!==s&&(t.flags|=4)};function jg(e,t){if(!_r)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var s=null;r!==null;)r.alternate!==null&&(s=r),r=r.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function ca(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,s=0;if(t)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,s|=a.subtreeFlags&14680064,s|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,s|=a.subtreeFlags,s|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=s,e.childLanes=r,t}function lme(e,t,r){var s=t.pendingProps;switch(bP(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ca(t),null;case 1:return di(t.type)&&Jw(),ca(t),null;case 3:return s=t.stateNode,vp(),wr(ci),wr(ba),PP(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(rb(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Go!==null&&(p6(Go),Go=null))),o6(e,t),ca(t),null;case 5:_P(t);var a=xf(sy.current);if(r=t.type,e!==null&&t.stateNode!=null)IG(e,t,r,s,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(Je(166));return ca(t),null}if(e=xf(Bl.current),rb(t)){s=t.stateNode,r=t.type;var i=t.memoizedProps;switch(s[Il]=t,s[ny]=i,e=(t.mode&1)!==0,r){case"dialog":xr("cancel",s),xr("close",s);break;case"iframe":case"object":case"embed":xr("load",s);break;case"video":case"audio":for(a=0;a<Zg.length;a++)xr(Zg[a],s);break;case"source":xr("error",s);break;case"img":case"image":case"link":xr("error",s),xr("load",s);break;case"details":xr("toggle",s);break;case"input":D9(s,i),xr("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!i.multiple},xr("invalid",s);break;case"textarea":O9(s,i),xr("invalid",s)}Lk(r,i),a=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?s.textContent!==l&&(i.suppressHydrationWarning!==!0&&nb(s.textContent,l,e),a=["children",l]):typeof l=="number"&&s.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&nb(s.textContent,l,e),a=["children",""+l]):qx.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&xr("scroll",s)}switch(r){case"input":Y1(s),$9(s,i,!0);break;case"textarea":Y1(s),R9(s);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(s.onclick=Kw)}s=a,t.updateQueue=s,s!==null&&(t.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=lq(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=o.createElement(r,{is:s.is}):(e=o.createElement(r),r==="select"&&(o=e,s.multiple?o.multiple=!0:s.size&&(o.size=s.size))):e=o.createElementNS(e,r),e[Il]=t,e[ny]=s,EG(e,t,!1,!1),t.stateNode=e;e:{switch(o=Dk(r,s),r){case"dialog":xr("cancel",e),xr("close",e),a=s;break;case"iframe":case"object":case"embed":xr("load",e),a=s;break;case"video":case"audio":for(a=0;a<Zg.length;a++)xr(Zg[a],e);a=s;break;case"source":xr("error",e),a=s;break;case"img":case"image":case"link":xr("error",e),xr("load",e),a=s;break;case"details":xr("toggle",e),a=s;break;case"input":D9(e,s),a=Pk(e,s),xr("invalid",e);break;case"option":a=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},a=Fr({},s,{value:void 0}),xr("invalid",e);break;case"textarea":O9(e,s),a=Ek(e,s),xr("invalid",e);break;default:a=s}Lk(r,a),l=a;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?uq(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&cq(e,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Gx(e,c):typeof c=="number"&&Gx(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(qx.hasOwnProperty(i)?c!=null&&i==="onScroll"&&xr("scroll",e):c!=null&&aP(e,i,c,o))}switch(r){case"input":Y1(e),$9(e,s,!1);break;case"textarea":Y1(e),R9(e);break;case"option":s.value!=null&&e.setAttribute("value",""+uu(s.value));break;case"select":e.multiple=!!s.multiple,i=s.value,i!=null?_m(e,!!s.multiple,i,!1):s.defaultValue!=null&&_m(e,!!s.multiple,s.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=Kw)}switch(r){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ca(t),null;case 6:if(e&&t.stateNode!=null)LG(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(Je(166));if(r=xf(sy.current),xf(Bl.current),rb(t)){if(s=t.stateNode,r=t.memoizedProps,s[Il]=t,(i=s.nodeValue!==r)&&(e=Di,e!==null))switch(e.tag){case 3:nb(s.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&nb(s.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else s=(r.nodeType===9?r:r.ownerDocument).createTextNode(s),s[Il]=t,t.stateNode=s}return ca(t),null;case 13:if(wr(Or),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(_r&&Ii!==null&&t.mode&1&&!(t.flags&128))Zq(),xp(),t.flags|=98560,i=!1;else if(i=rb(t),s!==null&&s.dehydrated!==null){if(e===null){if(!i)throw Error(Je(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Je(317));i[Il]=t}else xp(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ca(t),i=!1}else Go!==null&&(p6(Go),Go=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,t.mode&1&&(e===null||Or.current&1?Is===0&&(Is=3):BP())),t.updateQueue!==null&&(t.flags|=4),ca(t),null);case 4:return vp(),o6(e,t),e===null&&ey(t.stateNode.containerInfo),ca(t),null;case 10:return SP(t.type._context),ca(t),null;case 17:return di(t.type)&&Jw(),ca(t),null;case 19:if(wr(Or),i=t.memoizedState,i===null)return ca(t),null;if(s=(t.flags&128)!==0,o=i.rendering,o===null)if(s)jg(i,!1);else{if(Is!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=sj(e),o!==null){for(t.flags|=128,jg(i,!1),s=o.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=r,r=t.child;r!==null;)i=r,e=s,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return ur(Or,Or.current&1|2),t.child}e=e.sibling}i.tail!==null&&ss()>wp&&(t.flags|=128,s=!0,jg(i,!1),t.lanes=4194304)}else{if(!s)if(e=sj(o),e!==null){if(t.flags|=128,s=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),jg(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!_r)return ca(t),null}else 2*ss()-i.renderingStartTime>wp&&r!==1073741824&&(t.flags|=128,s=!0,jg(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(r=i.last,r!==null?r.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=ss(),t.sibling=null,r=Or.current,ur(Or,s?r&1|2:r&1),t):(ca(t),null);case 22:case 23:return zP(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&t.mode&1?Ci&1073741824&&(ca(t),t.subtreeFlags&6&&(t.flags|=8192)):ca(t),null;case 24:return null;case 25:return null}throw Error(Je(156,t.tag))}function cme(e,t){switch(bP(t),t.tag){case 1:return di(t.type)&&Jw(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return vp(),wr(ci),wr(ba),PP(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return _P(t),null;case 13:if(wr(Or),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Je(340));xp()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return wr(Or),null;case 4:return vp(),null;case 10:return SP(t.type._context),null;case 22:case 23:return zP(),null;case 24:return null;default:return null}}var ib=!1,pa=!1,dme=typeof WeakSet=="function"?WeakSet:Set,jt=null;function pm(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(s){Vr(e,t,s)}else r.current=null}function l6(e,t,r){try{r()}catch(s){Vr(e,t,s)}}var ML=!1;function ume(e,t){if(Wk=Gw,e=Fq(),yP(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var s=r.getSelection&&r.getSelection();if(s&&s.rangeCount!==0){r=s.anchorNode;var a=s.anchorOffset,i=s.focusNode;s=s.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,d=0,u=0,f=e,h=null;t:for(;;){for(var m;f!==r||a!==0&&f.nodeType!==3||(l=o+a),f!==i||s!==0&&f.nodeType!==3||(c=o+s),f.nodeType===3&&(o+=f.nodeValue.length),(m=f.firstChild)!==null;)h=f,f=m;for(;;){if(f===e)break t;if(h===r&&++d===a&&(l=o),h===i&&++u===s&&(c=o),(m=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=m}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(qk={focusedElem:e,selectionRange:r},Gw=!1,jt=t;jt!==null;)if(t=jt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,jt=e;else for(;jt!==null;){t=jt;try{var g=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var x=g.memoizedProps,y=g.memoizedState,v=t.stateNode,b=v.getSnapshotBeforeUpdate(t.elementType===t.type?x:Fo(t.type,x),y);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=t.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Je(163))}}catch(N){Vr(t,t.return,N)}if(e=t.sibling,e!==null){e.return=t.return,jt=e;break}jt=t.return}return g=ML,ML=!1,g}function xx(e,t,r){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&l6(t,r,i)}a=a.next}while(a!==s)}}function $N(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var s=r.create;r.destroy=s()}r=r.next}while(r!==t)}}function c6(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function DG(e){var t=e.alternate;t!==null&&(e.alternate=null,DG(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Il],delete t[ny],delete t[Qk],delete t[Ghe],delete t[Yhe])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function $G(e){return e.tag===5||e.tag===3||e.tag===4}function _L(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||$G(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function d6(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Kw));else if(s!==4&&(e=e.child,e!==null))for(d6(e,t,r),e=e.sibling;e!==null;)d6(e,t,r),e=e.sibling}function u6(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(u6(e,t,r),e=e.sibling;e!==null;)u6(e,t,r),e=e.sibling}var ta=null,Vo=!1;function bd(e,t,r){for(r=r.child;r!==null;)OG(e,t,r),r=r.sibling}function OG(e,t,r){if(zl&&typeof zl.onCommitFiberUnmount=="function")try{zl.onCommitFiberUnmount(_N,r)}catch{}switch(r.tag){case 5:pa||pm(r,t);case 6:var s=ta,a=Vo;ta=null,bd(e,t,r),ta=s,Vo=a,ta!==null&&(Vo?(e=ta,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):ta.removeChild(r.stateNode));break;case 18:ta!==null&&(Vo?(e=ta,r=r.stateNode,e.nodeType===8?NS(e.parentNode,r):e.nodeType===1&&NS(e,r),Jx(e)):NS(ta,r.stateNode));break;case 4:s=ta,a=Vo,ta=r.stateNode.containerInfo,Vo=!0,bd(e,t,r),ta=s,Vo=a;break;case 0:case 11:case 14:case 15:if(!pa&&(s=r.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){a=s=s.next;do{var i=a,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&l6(r,t,o),a=a.next}while(a!==s)}bd(e,t,r);break;case 1:if(!pa&&(pm(r,t),s=r.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=r.memoizedProps,s.state=r.memoizedState,s.componentWillUnmount()}catch(l){Vr(r,t,l)}bd(e,t,r);break;case 21:bd(e,t,r);break;case 22:r.mode&1?(pa=(s=pa)||r.memoizedState!==null,bd(e,t,r),pa=s):bd(e,t,r);break;default:bd(e,t,r)}}function PL(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new dme),t.forEach(function(s){var a=bme.bind(null,e,s);r.has(s)||(r.add(s),s.then(a,a))})}}function Do(e,t){var r=t.deletions;if(r!==null)for(var s=0;s<r.length;s++){var a=r[s];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:ta=l.stateNode,Vo=!1;break e;case 3:ta=l.stateNode.containerInfo,Vo=!0;break e;case 4:ta=l.stateNode.containerInfo,Vo=!0;break e}l=l.return}if(ta===null)throw Error(Je(160));OG(i,o,a),ta=null,Vo=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(d){Vr(a,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)RG(t,e),t=t.sibling}function RG(e,t){var r=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Do(t,e),_l(e),s&4){try{xx(3,e,e.return),$N(3,e)}catch(x){Vr(e,e.return,x)}try{xx(5,e,e.return)}catch(x){Vr(e,e.return,x)}}break;case 1:Do(t,e),_l(e),s&512&&r!==null&&pm(r,r.return);break;case 5:if(Do(t,e),_l(e),s&512&&r!==null&&pm(r,r.return),e.flags&32){var a=e.stateNode;try{Gx(a,"")}catch(x){Vr(e,e.return,x)}}if(s&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,o=r!==null?r.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&iq(a,i),Dk(l,o);var d=Dk(l,i);for(o=0;o<c.length;o+=2){var u=c[o],f=c[o+1];u==="style"?uq(a,f):u==="dangerouslySetInnerHTML"?cq(a,f):u==="children"?Gx(a,f):aP(a,u,f,d)}switch(l){case"input":Tk(a,i);break;case"textarea":oq(a,i);break;case"select":var h=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?_m(a,!!i.multiple,m,!1):h!==!!i.multiple&&(i.defaultValue!=null?_m(a,!!i.multiple,i.defaultValue,!0):_m(a,!!i.multiple,i.multiple?[]:"",!1))}a[ny]=i}catch(x){Vr(e,e.return,x)}}break;case 6:if(Do(t,e),_l(e),s&4){if(e.stateNode===null)throw Error(Je(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(x){Vr(e,e.return,x)}}break;case 3:if(Do(t,e),_l(e),s&4&&r!==null&&r.memoizedState.isDehydrated)try{Jx(t.containerInfo)}catch(x){Vr(e,e.return,x)}break;case 4:Do(t,e),_l(e);break;case 13:Do(t,e),_l(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(RP=ss())),s&4&&PL(e);break;case 22:if(u=r!==null&&r.memoizedState!==null,e.mode&1?(pa=(d=pa)||u,Do(t,e),pa=d):Do(t,e),_l(e),s&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!u&&e.mode&1)for(jt=e,u=e.child;u!==null;){for(f=jt=u;jt!==null;){switch(h=jt,m=h.child,h.tag){case 0:case 11:case 14:case 15:xx(4,h,h.return);break;case 1:pm(h,h.return);var g=h.stateNode;if(typeof g.componentWillUnmount=="function"){s=h,r=h.return;try{t=s,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(x){Vr(s,r,x)}}break;case 5:pm(h,h.return);break;case 22:if(h.memoizedState!==null){AL(f);continue}}m!==null?(m.return=h,jt=m):AL(f)}u=u.sibling}e:for(u=null,f=e;;){if(f.tag===5){if(u===null){u=f;try{a=f.stateNode,d?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=f.stateNode,c=f.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=dq("display",o))}catch(x){Vr(e,e.return,x)}}}else if(f.tag===6){if(u===null)try{f.stateNode.nodeValue=d?"":f.memoizedProps}catch(x){Vr(e,e.return,x)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;u===f&&(u=null),f=f.return}u===f&&(u=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Do(t,e),_l(e),s&4&&PL(e);break;case 21:break;default:Do(t,e),_l(e)}}function _l(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if($G(r)){var s=r;break e}r=r.return}throw Error(Je(160))}switch(s.tag){case 5:var a=s.stateNode;s.flags&32&&(Gx(a,""),s.flags&=-33);var i=_L(e);u6(e,i,a);break;case 3:case 4:var o=s.stateNode.containerInfo,l=_L(e);d6(e,l,o);break;default:throw Error(Je(161))}}catch(c){Vr(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function fme(e,t,r){jt=e,FG(e)}function FG(e,t,r){for(var s=(e.mode&1)!==0;jt!==null;){var a=jt,i=a.child;if(a.tag===22&&s){var o=a.memoizedState!==null||ib;if(!o){var l=a.alternate,c=l!==null&&l.memoizedState!==null||pa;l=ib;var d=pa;if(ib=o,(pa=c)&&!d)for(jt=a;jt!==null;)o=jt,c=o.child,o.tag===22&&o.memoizedState!==null?EL(a):c!==null?(c.return=o,jt=c):EL(a);for(;i!==null;)jt=i,FG(i),i=i.sibling;jt=a,ib=l,pa=d}TL(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,jt=i):TL(e)}}function TL(e){for(;jt!==null;){var t=jt;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:pa||$N(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!pa)if(r===null)s.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:Fo(t.type,r.memoizedProps);s.componentDidUpdate(a,r.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&mL(t,i,s);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}mL(t,o,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var f=u.dehydrated;f!==null&&Jx(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Je(163))}pa||t.flags&512&&c6(t)}catch(h){Vr(t,t.return,h)}}if(t===e){jt=null;break}if(r=t.sibling,r!==null){r.return=t.return,jt=r;break}jt=t.return}}function AL(e){for(;jt!==null;){var t=jt;if(t===e){jt=null;break}var r=t.sibling;if(r!==null){r.return=t.return,jt=r;break}jt=t.return}}function EL(e){for(;jt!==null;){var t=jt;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{$N(4,t)}catch(c){Vr(t,r,c)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var a=t.return;try{s.componentDidMount()}catch(c){Vr(t,a,c)}}var i=t.return;try{c6(t)}catch(c){Vr(t,i,c)}break;case 5:var o=t.return;try{c6(t)}catch(c){Vr(t,o,c)}}}catch(c){Vr(t,t.return,c)}if(t===e){jt=null;break}var l=t.sibling;if(l!==null){l.return=t.return,jt=l;break}jt=t.return}}var hme=Math.ceil,oj=ld.ReactCurrentDispatcher,$P=ld.ReactCurrentOwner,xo=ld.ReactCurrentBatchConfig,Rn=0,Hs=null,gs=null,sa=0,Ci=0,gm=Eu(0),Is=0,ly=null,Kf=0,ON=0,OP=0,yx=null,ii=null,RP=0,wp=1/0,vc=null,lj=!1,f6=null,nu=null,ob=!1,Gd=null,cj=0,vx=0,h6=null,cw=-1,dw=0;function Ha(){return Rn&6?ss():cw!==-1?cw:cw=ss()}function ru(e){return e.mode&1?Rn&2&&sa!==0?sa&-sa:Khe.transition!==null?(dw===0&&(dw=Nq()),dw):(e=rr,e!==0||(e=window.event,e=e===void 0?16:Tq(e.type)),e):1}function rl(e,t,r,s){if(50<vx)throw vx=0,h6=null,Error(Je(185));Uv(e,r,s),(!(Rn&2)||e!==Hs)&&(e===Hs&&(!(Rn&2)&&(ON|=r),Is===4&&Id(e,sa)),ui(e,s),r===1&&Rn===0&&!(t.mode&1)&&(wp=ss()+500,IN&&Iu()))}function ui(e,t){var r=e.callbackNode;Kfe(e,t);var s=qw(e,e===Hs?sa:0);if(s===0)r!==null&&B9(r),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(r!=null&&B9(r),t===1)e.tag===0?Qhe(IL.bind(null,e)):Qq(IL.bind(null,e)),Whe(function(){!(Rn&6)&&Iu()}),r=null;else{switch(Sq(s)){case 1:r=dP;break;case 4:r=wq;break;case 16:r=Ww;break;case 536870912:r=jq;break;default:r=Ww}r=GG(r,zG.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function zG(e,t){if(cw=-1,dw=0,Rn&6)throw Error(Je(327));var r=e.callbackNode;if(Im()&&e.callbackNode!==r)return null;var s=qw(e,e===Hs?sa:0);if(s===0)return null;if(s&30||s&e.expiredLanes||t)t=dj(e,s);else{t=s;var a=Rn;Rn|=2;var i=UG();(Hs!==e||sa!==t)&&(vc=null,wp=ss()+500,Lf(e,t));do try{gme();break}catch(l){BG(e,l)}while(!0);NP(),oj.current=i,Rn=a,gs!==null?t=0:(Hs=null,sa=0,t=Is)}if(t!==0){if(t===2&&(a=zk(e),a!==0&&(s=a,t=m6(e,a))),t===1)throw r=ly,Lf(e,0),Id(e,s),ui(e,ss()),r;if(t===6)Id(e,s);else{if(a=e.current.alternate,!(s&30)&&!mme(a)&&(t=dj(e,s),t===2&&(i=zk(e),i!==0&&(s=i,t=m6(e,i))),t===1))throw r=ly,Lf(e,0),Id(e,s),ui(e,ss()),r;switch(e.finishedWork=a,e.finishedLanes=s,t){case 0:case 1:throw Error(Je(345));case 2:nf(e,ii,vc);break;case 3:if(Id(e,s),(s&130023424)===s&&(t=RP+500-ss(),10<t)){if(qw(e,0)!==0)break;if(a=e.suspendedLanes,(a&s)!==s){Ha(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=Yk(nf.bind(null,e,ii,vc),t);break}nf(e,ii,vc);break;case 4:if(Id(e,s),(s&4194240)===s)break;for(t=e.eventTimes,a=-1;0<s;){var o=31-nl(s);i=1<<o,o=t[o],o>a&&(a=o),s&=~i}if(s=a,s=ss()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*hme(s/1960))-s,10<s){e.timeoutHandle=Yk(nf.bind(null,e,ii,vc),s);break}nf(e,ii,vc);break;case 5:nf(e,ii,vc);break;default:throw Error(Je(329))}}}return ui(e,ss()),e.callbackNode===r?zG.bind(null,e):null}function m6(e,t){var r=yx;return e.current.memoizedState.isDehydrated&&(Lf(e,t).flags|=256),e=dj(e,t),e!==2&&(t=ii,ii=r,t!==null&&p6(t)),e}function p6(e){ii===null?ii=e:ii.push.apply(ii,e)}function mme(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var s=0;s<r.length;s++){var a=r[s],i=a.getSnapshot;a=a.value;try{if(!cl(i(),a))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Id(e,t){for(t&=~OP,t&=~ON,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-nl(t),s=1<<r;e[r]=-1,t&=~s}}function IL(e){if(Rn&6)throw Error(Je(327));Im();var t=qw(e,0);if(!(t&1))return ui(e,ss()),null;var r=dj(e,t);if(e.tag!==0&&r===2){var s=zk(e);s!==0&&(t=s,r=m6(e,s))}if(r===1)throw r=ly,Lf(e,0),Id(e,t),ui(e,ss()),r;if(r===6)throw Error(Je(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,nf(e,ii,vc),ui(e,ss()),null}function FP(e,t){var r=Rn;Rn|=1;try{return e(t)}finally{Rn=r,Rn===0&&(wp=ss()+500,IN&&Iu())}}function Jf(e){Gd!==null&&Gd.tag===0&&!(Rn&6)&&Im();var t=Rn;Rn|=1;var r=xo.transition,s=rr;try{if(xo.transition=null,rr=1,e)return e()}finally{rr=s,xo.transition=r,Rn=t,!(Rn&6)&&Iu()}}function zP(){Ci=gm.current,wr(gm)}function Lf(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,Hhe(r)),gs!==null)for(r=gs.return;r!==null;){var s=r;switch(bP(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&Jw();break;case 3:vp(),wr(ci),wr(ba),PP();break;case 5:_P(s);break;case 4:vp();break;case 13:wr(Or);break;case 19:wr(Or);break;case 10:SP(s.type._context);break;case 22:case 23:zP()}r=r.return}if(Hs=e,gs=e=su(e.current,null),sa=Ci=t,Is=0,ly=null,OP=ON=Kf=0,ii=yx=null,gf!==null){for(t=0;t<gf.length;t++)if(r=gf[t],s=r.interleaved,s!==null){r.interleaved=null;var a=s.next,i=r.pending;if(i!==null){var o=i.next;i.next=a,s.next=o}r.pending=s}gf=null}return e}function BG(e,t){do{var r=gs;try{if(NP(),iw.current=ij,aj){for(var s=Rr.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}aj=!1}if(Qf=0,Bs=_s=Rr=null,gx=!1,ay=0,$P.current=null,r===null||r.return===null){Is=1,ly=t,gs=null;break}e:{var i=e,o=r.return,l=r,c=t;if(t=sa,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,u=l,f=u.tag;if(!(u.mode&1)&&(f===0||f===11||f===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var m=bL(o);if(m!==null){m.flags&=-257,wL(m,o,l,i,t),m.mode&1&&vL(i,d,t),t=m,c=d;var g=t.updateQueue;if(g===null){var x=new Set;x.add(c),t.updateQueue=x}else g.add(c);break e}else{if(!(t&1)){vL(i,d,t),BP();break e}c=Error(Je(426))}}else if(_r&&l.mode&1){var y=bL(o);if(y!==null){!(y.flags&65536)&&(y.flags|=256),wL(y,o,l,i,t),wP(bp(c,l));break e}}i=c=bp(c,l),Is!==4&&(Is=2),yx===null?yx=[i]:yx.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var v=SG(i,c,t);hL(i,v);break e;case 1:l=c;var b=i.type,w=i.stateNode;if(!(i.flags&128)&&(typeof b.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(nu===null||!nu.has(w)))){i.flags|=65536,t&=-t,i.lanes|=t;var N=CG(i,l,t);hL(i,N);break e}}i=i.return}while(i!==null)}HG(r)}catch(j){t=j,gs===r&&r!==null&&(gs=r=r.return);continue}break}while(!0)}function UG(){var e=oj.current;return oj.current=ij,e===null?ij:e}function BP(){(Is===0||Is===3||Is===2)&&(Is=4),Hs===null||!(Kf&268435455)&&!(ON&268435455)||Id(Hs,sa)}function dj(e,t){var r=Rn;Rn|=2;var s=UG();(Hs!==e||sa!==t)&&(vc=null,Lf(e,t));do try{pme();break}catch(a){BG(e,a)}while(!0);if(NP(),Rn=r,oj.current=s,gs!==null)throw Error(Je(261));return Hs=null,sa=0,Is}function pme(){for(;gs!==null;)VG(gs)}function gme(){for(;gs!==null&&!Bfe();)VG(gs)}function VG(e){var t=qG(e.alternate,e,Ci);e.memoizedProps=e.pendingProps,t===null?HG(e):gs=t,$P.current=null}function HG(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=cme(r,t),r!==null){r.flags&=32767,gs=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Is=6,gs=null;return}}else if(r=lme(r,t,Ci),r!==null){gs=r;return}if(t=t.sibling,t!==null){gs=t;return}gs=t=e}while(t!==null);Is===0&&(Is=5)}function nf(e,t,r){var s=rr,a=xo.transition;try{xo.transition=null,rr=1,xme(e,t,r,s)}finally{xo.transition=a,rr=s}return null}function xme(e,t,r,s){do Im();while(Gd!==null);if(Rn&6)throw Error(Je(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(Je(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(Jfe(e,i),e===Hs&&(gs=Hs=null,sa=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||ob||(ob=!0,GG(Ww,function(){return Im(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=xo.transition,xo.transition=null;var o=rr;rr=1;var l=Rn;Rn|=4,$P.current=null,ume(e,r),RG(r,e),Ohe(qk),Gw=!!Wk,qk=Wk=null,e.current=r,fme(r),Ufe(),Rn=l,rr=o,xo.transition=i}else e.current=r;if(ob&&(ob=!1,Gd=e,cj=a),i=e.pendingLanes,i===0&&(nu=null),Wfe(r.stateNode),ui(e,ss()),t!==null)for(s=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],s(a.value,{componentStack:a.stack,digest:a.digest});if(lj)throw lj=!1,e=f6,f6=null,e;return cj&1&&e.tag!==0&&Im(),i=e.pendingLanes,i&1?e===h6?vx++:(vx=0,h6=e):vx=0,Iu(),null}function Im(){if(Gd!==null){var e=Sq(cj),t=xo.transition,r=rr;try{if(xo.transition=null,rr=16>e?16:e,Gd===null)var s=!1;else{if(e=Gd,Gd=null,cj=0,Rn&6)throw Error(Je(331));var a=Rn;for(Rn|=4,jt=e.current;jt!==null;){var i=jt,o=i.child;if(jt.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(jt=d;jt!==null;){var u=jt;switch(u.tag){case 0:case 11:case 15:xx(8,u,i)}var f=u.child;if(f!==null)f.return=u,jt=f;else for(;jt!==null;){u=jt;var h=u.sibling,m=u.return;if(DG(u),u===d){jt=null;break}if(h!==null){h.return=m,jt=h;break}jt=m}}}var g=i.alternate;if(g!==null){var x=g.child;if(x!==null){g.child=null;do{var y=x.sibling;x.sibling=null,x=y}while(x!==null)}}jt=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,jt=o;else e:for(;jt!==null;){if(i=jt,i.flags&2048)switch(i.tag){case 0:case 11:case 15:xx(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,jt=v;break e}jt=i.return}}var b=e.current;for(jt=b;jt!==null;){o=jt;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,jt=w;else e:for(o=b;jt!==null;){if(l=jt,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:$N(9,l)}}catch(j){Vr(l,l.return,j)}if(l===o){jt=null;break e}var N=l.sibling;if(N!==null){N.return=l.return,jt=N;break e}jt=l.return}}if(Rn=a,Iu(),zl&&typeof zl.onPostCommitFiberRoot=="function")try{zl.onPostCommitFiberRoot(_N,e)}catch{}s=!0}return s}finally{rr=r,xo.transition=t}}return!1}function LL(e,t,r){t=bp(r,t),t=SG(e,t,1),e=tu(e,t,1),t=Ha(),e!==null&&(Uv(e,1,t),ui(e,t))}function Vr(e,t,r){if(e.tag===3)LL(e,e,r);else for(;t!==null;){if(t.tag===3){LL(t,e,r);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(nu===null||!nu.has(s))){e=bp(r,e),e=CG(t,e,1),t=tu(t,e,1),e=Ha(),t!==null&&(Uv(t,1,e),ui(t,e));break}}t=t.return}}function yme(e,t,r){var s=e.pingCache;s!==null&&s.delete(t),t=Ha(),e.pingedLanes|=e.suspendedLanes&r,Hs===e&&(sa&r)===r&&(Is===4||Is===3&&(sa&130023424)===sa&&500>ss()-RP?Lf(e,0):OP|=r),ui(e,t)}function WG(e,t){t===0&&(e.mode&1?(t=J1,J1<<=1,!(J1&130023424)&&(J1=4194304)):t=1);var r=Ha();e=Wc(e,t),e!==null&&(Uv(e,t,r),ui(e,r))}function vme(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),WG(e,r)}function bme(e,t){var r=0;switch(e.tag){case 13:var s=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(Je(314))}s!==null&&s.delete(t),WG(e,r)}var qG;qG=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||ci.current)oi=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return oi=!1,ome(e,t,r);oi=!!(e.flags&131072)}else oi=!1,_r&&t.flags&1048576&&Kq(t,ej,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;lw(e,t),e=t.pendingProps;var a=gp(t,ba.current);Em(t,r),a=AP(null,t,s,e,a,r);var i=EP();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,di(s)?(i=!0,Zw(t)):i=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,kP(t),a.updater=DN,t.stateNode=a,a._reactInternals=t,t6(t,s,e,r),t=s6(null,t,s,!0,i,r)):(t.tag=0,_r&&i&&vP(t),La(null,t,a,r),t=t.child),t;case 16:s=t.elementType;e:{switch(lw(e,t),e=t.pendingProps,a=s._init,s=a(s._payload),t.type=s,a=t.tag=jme(s),e=Fo(s,e),a){case 0:t=r6(null,t,s,e,r);break e;case 1:t=SL(null,t,s,e,r);break e;case 11:t=jL(null,t,s,e,r);break e;case 14:t=NL(null,t,s,Fo(s.type,e),r);break e}throw Error(Je(306,s,""))}return t;case 0:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Fo(s,a),r6(e,t,s,a,r);case 1:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Fo(s,a),SL(e,t,s,a,r);case 3:e:{if(PG(t),e===null)throw Error(Je(387));s=t.pendingProps,i=t.memoizedState,a=i.element,nG(e,t),rj(t,s,null,r);var o=t.memoizedState;if(s=o.element,i.isDehydrated)if(i={element:s,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){a=bp(Error(Je(423)),t),t=CL(e,t,s,r,a);break e}else if(s!==a){a=bp(Error(Je(424)),t),t=CL(e,t,s,r,a);break e}else for(Ii=eu(t.stateNode.containerInfo.firstChild),Di=t,_r=!0,Go=null,r=eG(t,null,s,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(xp(),s===a){t=qc(e,t,r);break e}La(e,t,s,r)}t=t.child}return t;case 5:return rG(t),e===null&&Zk(t),s=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,o=a.children,Gk(s,a)?o=null:i!==null&&Gk(s,i)&&(t.flags|=32),_G(e,t),La(e,t,o,r),t.child;case 6:return e===null&&Zk(t),null;case 13:return TG(e,t,r);case 4:return MP(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=yp(t,null,s,r):La(e,t,s,r),t.child;case 11:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Fo(s,a),jL(e,t,s,a,r);case 7:return La(e,t,t.pendingProps,r),t.child;case 8:return La(e,t,t.pendingProps.children,r),t.child;case 12:return La(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(s=t.type._context,a=t.pendingProps,i=t.memoizedProps,o=a.value,ur(tj,s._currentValue),s._currentValue=o,i!==null)if(cl(i.value,o)){if(i.children===a.children&&!ci.current){t=qc(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===s){if(i.tag===1){c=Dc(-1,r&-r),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),Xk(i.return,r,t),l.lanes|=r;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(Je(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),Xk(o,r,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}La(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,s=t.pendingProps.children,Em(t,r),a=wo(a),s=s(a),t.flags|=1,La(e,t,s,r),t.child;case 14:return s=t.type,a=Fo(s,t.pendingProps),a=Fo(s.type,a),NL(e,t,s,a,r);case 15:return kG(e,t,t.type,t.pendingProps,r);case 17:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Fo(s,a),lw(e,t),t.tag=1,di(s)?(e=!0,Zw(t)):e=!1,Em(t,r),NG(t,s,a),t6(t,s,a,r),s6(null,t,s,!0,e,r);case 19:return AG(e,t,r);case 22:return MG(e,t,r)}throw Error(Je(156,t.tag))};function GG(e,t){return bq(e,t)}function wme(e,t,r,s){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fo(e,t,r,s){return new wme(e,t,r,s)}function UP(e){return e=e.prototype,!(!e||!e.isReactComponent)}function jme(e){if(typeof e=="function")return UP(e)?1:0;if(e!=null){if(e=e.$$typeof,e===oP)return 11;if(e===lP)return 14}return 2}function su(e,t){var r=e.alternate;return r===null?(r=fo(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function uw(e,t,r,s,a,i){var o=2;if(s=e,typeof e=="function")UP(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case im:return Df(r.children,a,i,t);case iP:o=8,a|=8;break;case Ck:return e=fo(12,r,t,a|2),e.elementType=Ck,e.lanes=i,e;case kk:return e=fo(13,r,t,a),e.elementType=kk,e.lanes=i,e;case Mk:return e=fo(19,r,t,a),e.elementType=Mk,e.lanes=i,e;case rq:return RN(r,a,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case tq:o=10;break e;case nq:o=9;break e;case oP:o=11;break e;case lP:o=14;break e;case _d:o=16,s=null;break e}throw Error(Je(130,e==null?e:typeof e,""))}return t=fo(o,r,t,a),t.elementType=e,t.type=s,t.lanes=i,t}function Df(e,t,r,s){return e=fo(7,e,s,t),e.lanes=r,e}function RN(e,t,r,s){return e=fo(22,e,s,t),e.elementType=rq,e.lanes=r,e.stateNode={isHidden:!1},e}function AS(e,t,r){return e=fo(6,e,null,t),e.lanes=r,e}function ES(e,t,r){return t=fo(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Nme(e,t,r,s,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=fS(0),this.expirationTimes=fS(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fS(0),this.identifierPrefix=s,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function VP(e,t,r,s,a,i,o,l,c){return e=new Nme(e,t,r,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=fo(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:s,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},kP(i),e}function Sme(e,t,r){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:am,key:s==null?null:""+s,children:e,containerInfo:t,implementation:r}}function YG(e){if(!e)return fu;e=e._reactInternals;e:{if(jh(e)!==e||e.tag!==1)throw Error(Je(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(di(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Je(171))}if(e.tag===1){var r=e.type;if(di(r))return Yq(e,r,t)}return t}function QG(e,t,r,s,a,i,o,l,c){return e=VP(r,s,!0,e,a,i,o,l,c),e.context=YG(null),r=e.current,s=Ha(),a=ru(r),i=Dc(s,a),i.callback=t??null,tu(r,i,a),e.current.lanes=a,Uv(e,a,s),ui(e,s),e}function FN(e,t,r,s){var a=t.current,i=Ha(),o=ru(a);return r=YG(r),t.context===null?t.context=r:t.pendingContext=r,t=Dc(i,o),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=tu(a,t,o),e!==null&&(rl(e,a,o,i),aw(e,a,o)),o}function uj(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function DL(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function HP(e,t){DL(e,t),(e=e.alternate)&&DL(e,t)}function Cme(){return null}var KG=typeof reportError=="function"?reportError:function(e){console.error(e)};function WP(e){this._internalRoot=e}zN.prototype.render=WP.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Je(409));FN(e,t,null,null)};zN.prototype.unmount=WP.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Jf(function(){FN(null,e,null,null)}),t[Hc]=null}};function zN(e){this._internalRoot=e}zN.prototype.unstable_scheduleHydration=function(e){if(e){var t=Mq();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Ed.length&&t!==0&&t<Ed[r].priority;r++);Ed.splice(r,0,e),r===0&&Pq(e)}};function qP(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function BN(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function $L(){}function kme(e,t,r,s,a){if(a){if(typeof s=="function"){var i=s;s=function(){var d=uj(o);i.call(d)}}var o=QG(t,s,e,0,null,!1,!1,"",$L);return e._reactRootContainer=o,e[Hc]=o.current,ey(e.nodeType===8?e.parentNode:e),Jf(),o}for(;a=e.lastChild;)e.removeChild(a);if(typeof s=="function"){var l=s;s=function(){var d=uj(c);l.call(d)}}var c=VP(e,0,!1,null,null,!1,!1,"",$L);return e._reactRootContainer=c,e[Hc]=c.current,ey(e.nodeType===8?e.parentNode:e),Jf(function(){FN(t,c,r,s)}),c}function UN(e,t,r,s,a){var i=r._reactRootContainer;if(i){var o=i;if(typeof a=="function"){var l=a;a=function(){var c=uj(o);l.call(c)}}FN(t,o,e,a)}else o=kme(r,t,e,a,s);return uj(o)}Cq=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Jg(t.pendingLanes);r!==0&&(uP(t,r|1),ui(t,ss()),!(Rn&6)&&(wp=ss()+500,Iu()))}break;case 13:Jf(function(){var s=Wc(e,1);if(s!==null){var a=Ha();rl(s,e,1,a)}}),HP(e,1)}};fP=function(e){if(e.tag===13){var t=Wc(e,134217728);if(t!==null){var r=Ha();rl(t,e,134217728,r)}HP(e,134217728)}};kq=function(e){if(e.tag===13){var t=ru(e),r=Wc(e,t);if(r!==null){var s=Ha();rl(r,e,t,s)}HP(e,t)}};Mq=function(){return rr};_q=function(e,t){var r=rr;try{return rr=e,t()}finally{rr=r}};Ok=function(e,t,r){switch(t){case"input":if(Tk(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var s=r[t];if(s!==e&&s.form===e.form){var a=EN(s);if(!a)throw Error(Je(90));aq(s),Tk(s,a)}}}break;case"textarea":oq(e,r);break;case"select":t=r.value,t!=null&&_m(e,!!r.multiple,t,!1)}};mq=FP;pq=Jf;var Mme={usingClientEntryPoint:!1,Events:[Hv,dm,EN,fq,hq,FP]},Ng={findFiberByHostInstance:pf,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},_me={bundleType:Ng.bundleType,version:Ng.version,rendererPackageName:Ng.rendererPackageName,rendererConfig:Ng.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ld.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=yq(e),e===null?null:e.stateNode},findFiberByHostInstance:Ng.findFiberByHostInstance||Cme,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var lb=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!lb.isDisabled&&lb.supportsFiber)try{_N=lb.inject(_me),zl=lb}catch{}}qi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Mme;qi.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!qP(t))throw Error(Je(200));return Sme(e,t,null,r)};qi.createRoot=function(e,t){if(!qP(e))throw Error(Je(299));var r=!1,s="",a=KG;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=VP(e,1,!1,null,null,r,!1,s,a),e[Hc]=t.current,ey(e.nodeType===8?e.parentNode:e),new WP(t)};qi.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Je(188)):(e=Object.keys(e).join(","),Error(Je(268,e)));return e=yq(t),e=e===null?null:e.stateNode,e};qi.flushSync=function(e){return Jf(e)};qi.hydrate=function(e,t,r){if(!BN(t))throw Error(Je(200));return UN(null,e,t,!0,r)};qi.hydrateRoot=function(e,t,r){if(!qP(e))throw Error(Je(405));var s=r!=null&&r.hydratedSources||null,a=!1,i="",o=KG;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=QG(t,null,e,1,r??null,a,!1,i,o),e[Hc]=t.current,ey(e),s)for(e=0;e<s.length;e++)r=s[e],a=r._getVersion,a=a(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new zN(t)};qi.render=function(e,t,r){if(!BN(t))throw Error(Je(200));return UN(null,e,t,!1,r)};qi.unmountComponentAtNode=function(e){if(!BN(e))throw Error(Je(40));return e._reactRootContainer?(Jf(function(){UN(null,null,e,!1,function(){e._reactRootContainer=null,e[Hc]=null})}),!0):!1};qi.unstable_batchedUpdates=FP;qi.unstable_renderSubtreeIntoContainer=function(e,t,r,s){if(!BN(r))throw Error(Je(200));if(e==null||e._reactInternals===void 0)throw Error(Je(38));return UN(e,t,r,!1,s)};qi.version="18.3.1-next-f1338f8080-20240426";function JG(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(JG)}catch(e){console.error(e)}}JG(),JW.exports=qi;var ho=JW.exports;const ZG=qn(ho);var XG,OL=ho;XG=OL.createRoot,OL.hydrateRoot;const Pme="modulepreload",Tme=function(e){return"/"+e},RL={},cy=function(t,r,s){let a=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));a=Promise.allSettled(r.map(c=>{if(c=Tme(c),c in RL)return;RL[c]=!0;const d=c.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const f=document.createElement("link");if(f.rel=d?"stylesheet":Pme,d||(f.as="script"),f.crossOrigin="",f.href=c,l&&f.setAttribute("nonce",l),document.head.appendChild(f),d)return new Promise((h,m)=>{f.addEventListener("load",h),f.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return a.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})};function Ame(e,t){if(e instanceof RegExp)return{keys:!1,pattern:e};var r,s,a,i,o=[],l="",c=e.split("/");for(c[0]||c.shift();a=c.shift();)r=a[0],r==="*"?(o.push(r),l+=a[1]==="?"?"(?:/(.*))?":"/(.*)"):r===":"?(s=a.indexOf("?",1),i=a.indexOf(".",1),o.push(a.substring(1,~s?s:~i?i:a.length)),l+=~s&&!~i?"(?:/([^/]+?))?":"/([^/]+?)",~i&&(l+=(~s?"?":"")+"\\"+a.substring(i))):l+="/"+a;return{keys:o,pattern:new RegExp("^"+l+(t?"(?=$|/)":"/?$"),"i")}}var eY={exports:{}},tY={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jp=p;function Eme(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ime=typeof Object.is=="function"?Object.is:Eme,Lme=jp.useState,Dme=jp.useEffect,$me=jp.useLayoutEffect,Ome=jp.useDebugValue;function Rme(e,t){var r=t(),s=Lme({inst:{value:r,getSnapshot:t}}),a=s[0].inst,i=s[1];return $me(function(){a.value=r,a.getSnapshot=t,IS(a)&&i({inst:a})},[e,r,t]),Dme(function(){return IS(a)&&i({inst:a}),e(function(){IS(a)&&i({inst:a})})},[e]),Ome(r),r}function IS(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Ime(e,r)}catch{return!0}}function Fme(e,t){return t()}var zme=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Fme:Rme;tY.useSyncExternalStore=jp.useSyncExternalStore!==void 0?jp.useSyncExternalStore:zme;eY.exports=tY;var Bme=eY.exports;const Ume=QW.useInsertionEffect,Vme=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Hme=Vme?p.useLayoutEffect:p.useEffect,Wme=Ume||Hme,nY=e=>{const t=p.useRef([e,(...r)=>t[0](...r)]).current;return Wme(()=>{t[0]=e}),t[1]},qme="popstate",GP="pushState",YP="replaceState",Gme="hashchange",FL=[qme,GP,YP,Gme],Yme=e=>{for(const t of FL)addEventListener(t,e);return()=>{for(const t of FL)removeEventListener(t,e)}},rY=(e,t)=>Bme.useSyncExternalStore(Yme,e,t),Qme=()=>location.search,Kme=({ssrSearch:e=""}={})=>rY(Qme,()=>e),zL=()=>location.pathname,Jme=({ssrPath:e}={})=>rY(zL,e?()=>e:zL),Zme=(e,{replace:t=!1,state:r=null}={})=>history[t?YP:GP](r,"",e),Xme=(e={})=>[Jme(e),Zme],BL=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[BL]>"u"){for(const e of[GP,YP]){const t=history[e];history[e]=function(){const r=t.apply(this,arguments),s=new Event(e);return s.arguments=arguments,dispatchEvent(s),r}}Object.defineProperty(window,BL,{value:!0})}const epe=(e,t)=>t.toLowerCase().indexOf(e.toLowerCase())?"~"+t:t.slice(e.length)||"/",sY=(e="")=>e==="/"?"":e,tpe=(e,t)=>e[0]==="~"?e.slice(1):sY(t)+e,npe=(e="",t)=>epe(g6(sY(e)),g6(t)),rpe=e=>e[0]==="?"?e.slice(1):e,g6=e=>{try{return decodeURI(e)}catch{return e}},spe=e=>g6(rpe(e)),aY={hook:Xme,searchHook:Kme,parser:Ame,base:"",ssrPath:void 0,ssrSearch:void 0,ssrContext:void 0,hrefs:e=>e},iY=p.createContext(aY),Nh=()=>p.useContext(iY),oY={},lY=p.createContext(oY),cY=()=>p.useContext(lY),VN=e=>{const[t,r]=e.hook(e);return[npe(e.base,t),nY((s,a)=>r(tpe(s,e.base),a))]},zt=()=>VN(Nh()),ape=()=>{const e=Nh();return spe(e.searchHook(e))},QP=(e,t,r,s)=>{const{pattern:a,keys:i}=t instanceof RegExp?{keys:!1,pattern:t}:e(t||"*",s),o=a.exec(r)||[],[l,...c]=o;return l!==void 0?[!0,(()=>{const d=i!==!1?Object.fromEntries(i.map((f,h)=>[f,c[h]])):o.groups;let u={...c};return d&&Object.assign(u,d),u})(),...s?[l]:[]]:[!1,null]},k0=e=>QP(Nh().parser,e,zt()[0]),ipe=({children:e,...t})=>{var u,f;const r=Nh(),s=t.hook?aY:r;let a=s;const[i,o]=((u=t.ssrPath)==null?void 0:u.split("?"))??[];o&&(t.ssrSearch=o,t.ssrPath=i),t.hrefs=t.hrefs??((f=t.hook)==null?void 0:f.hrefs);let l=p.useRef({}),c=l.current,d=c;for(let h in s){const m=h==="base"?s[h]+(t[h]||""):t[h]||s[h];c===d&&m!==d[h]&&(l.current=d={...d}),d[h]=m,m!==s[h]&&(a=d)}return p.createElement(iY.Provider,{value:a,children:e})},UL=({children:e,component:t},r)=>t?p.createElement(t,{params:r}):typeof e=="function"?e(r):e,ope=e=>{let t=p.useRef(oY);const r=t.current;return t.current=Object.keys(e).length!==Object.keys(r).length||Object.entries(e).some(([s,a])=>a!==r[s])?e:r},at=({path:e,nest:t,match:r,...s})=>{const a=Nh(),[i]=VN(a),[o,l,c]=r??QP(a.parser,e,i,t),d=ope({...cY(),...l});if(!o)return null;const u=c?p.createElement(ipe,{base:c},UL(s,d)):UL(s,d);return p.createElement(lY.Provider,{value:d,children:u})},St=p.forwardRef((e,t)=>{const r=Nh(),[s,a]=VN(r),{to:i="",href:o=i,onClick:l,asChild:c,children:d,className:u,replace:f,state:h,...m}=e,g=nY(y=>{y.ctrlKey||y.metaKey||y.altKey||y.shiftKey||y.button!==0||(l==null||l(y),y.defaultPrevented||(y.preventDefault(),a(o,e)))}),x=r.hrefs(o[0]==="~"?o.slice(1):r.base+o,r);return c&&p.isValidElement(d)?p.cloneElement(d,{onClick:g,href:x}):p.createElement("a",{...m,onClick:g,href:x,className:u!=null&&u.call?u(s===o):u,children:d,ref:t})}),dY=e=>Array.isArray(e)?e.flatMap(t=>dY(t&&t.type===p.Fragment?t.props.children:t)):[e],lpe=({children:e,location:t})=>{const r=Nh(),[s]=VN(r);for(const a of dY(e)){let i=0;if(p.isValidElement(a)&&(i=QP(r.parser,a.props.path,t||s,a.props.nest))[0])return p.cloneElement(a,{match:i})}return null};var M0=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Zf=typeof window>"u"||"Deno"in globalThis;function Da(){}function cpe(e,t){return typeof e=="function"?e(t):e}function x6(e){return typeof e=="number"&&e>=0&&e!==1/0}function uY(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Lm(e,t){return typeof e=="function"?e(t):e}function Yo(e,t){return typeof e=="function"?e(t):e}function VL(e,t){const{type:r="all",exact:s,fetchStatus:a,predicate:i,queryKey:o,stale:l}=e;if(o){if(s){if(t.queryHash!==KP(o,t.options))return!1}else if(!dy(t.queryKey,o))return!1}if(r!=="all"){const c=t.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||a&&a!==t.state.fetchStatus||i&&!i(t))}function HL(e,t){const{exact:r,status:s,predicate:a,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(r){if(Xf(t.options.mutationKey)!==Xf(i))return!1}else if(!dy(t.options.mutationKey,i))return!1}return!(s&&t.state.status!==s||a&&!a(t))}function KP(e,t){return((t==null?void 0:t.queryKeyHashFn)||Xf)(e)}function Xf(e){return JSON.stringify(e,(t,r)=>y6(r)?Object.keys(r).sort().reduce((s,a)=>(s[a]=r[a],s),{}):r)}function dy(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>dy(e[r],t[r])):!1}function fY(e,t){if(e===t)return e;const r=WL(e)&&WL(t);if(r||y6(e)&&y6(t)){const s=r?e:Object.keys(e),a=s.length,i=r?t:Object.keys(t),o=i.length,l=r?[]:{};let c=0;for(let d=0;d<o;d++){const u=r?d:i[d];(!r&&s.includes(u)||r)&&e[u]===void 0&&t[u]===void 0?(l[u]=void 0,c++):(l[u]=fY(e[u],t[u]),l[u]===e[u]&&e[u]!==void 0&&c++)}return a===o&&c===a?e:l}return t}function fj(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function WL(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function y6(e){if(!qL(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!qL(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function qL(e){return Object.prototype.toString.call(e)==="[object Object]"}function dpe(e){return new Promise(t=>{setTimeout(t,e)})}function v6(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?fY(e,t):t}function upe(e,t,r=0){const s=[...e,t];return r&&s.length>r?s.slice(1):s}function fpe(e,t,r=0){const s=[t,...e];return r&&s.length>r?s.slice(0,-1):s}var JP=Symbol();function hY(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===JP?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function mY(e,t){return typeof e=="function"?e(...t):!!e}var kf,$d,np,RB,hpe=(RB=class extends M0{constructor(){super();Ut(this,kf);Ut(this,$d);Ut(this,np);gt(this,np,t=>{if(!Zf&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){ie(this,$d)||this.setEventListener(ie(this,np))}onUnsubscribe(){var t;this.hasListeners()||((t=ie(this,$d))==null||t.call(this),gt(this,$d,void 0))}setEventListener(t){var r;gt(this,np,t),(r=ie(this,$d))==null||r.call(this),gt(this,$d,t(s=>{typeof s=="boolean"?this.setFocused(s):this.onFocus()}))}setFocused(t){ie(this,kf)!==t&&(gt(this,kf,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof ie(this,kf)=="boolean"?ie(this,kf):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},kf=new WeakMap,$d=new WeakMap,np=new WeakMap,RB),ZP=new hpe,rp,Od,sp,FB,mpe=(FB=class extends M0{constructor(){super();Ut(this,rp,!0);Ut(this,Od);Ut(this,sp);gt(this,sp,t=>{if(!Zf&&window.addEventListener){const r=()=>t(!0),s=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",s)}}})}onSubscribe(){ie(this,Od)||this.setEventListener(ie(this,sp))}onUnsubscribe(){var t;this.hasListeners()||((t=ie(this,Od))==null||t.call(this),gt(this,Od,void 0))}setEventListener(t){var r;gt(this,sp,t),(r=ie(this,Od))==null||r.call(this),gt(this,Od,t(this.setOnline.bind(this)))}setOnline(t){ie(this,rp)!==t&&(gt(this,rp,t),this.listeners.forEach(s=>{s(t)}))}isOnline(){return ie(this,rp)}},rp=new WeakMap,Od=new WeakMap,sp=new WeakMap,FB),hj=new mpe;function b6(){let e,t;const r=new Promise((a,i)=>{e=a,t=i});r.status="pending",r.catch(()=>{});function s(a){Object.assign(r,a),delete r.resolve,delete r.reject}return r.resolve=a=>{s({status:"fulfilled",value:a}),e(a)},r.reject=a=>{s({status:"rejected",reason:a}),t(a)},r}function ppe(e){return Math.min(1e3*2**e,3e4)}function pY(e){return(e??"online")==="online"?hj.isOnline():!0}var gY=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function LS(e){return e instanceof gY}function xY(e){let t=!1,r=0,s=!1,a;const i=b6(),o=x=>{var y;s||(h(new gY(x)),(y=e.abort)==null||y.call(e))},l=()=>{t=!0},c=()=>{t=!1},d=()=>ZP.isFocused()&&(e.networkMode==="always"||hj.isOnline())&&e.canRun(),u=()=>pY(e.networkMode)&&e.canRun(),f=x=>{var y;s||(s=!0,(y=e.onSuccess)==null||y.call(e,x),a==null||a(),i.resolve(x))},h=x=>{var y;s||(s=!0,(y=e.onError)==null||y.call(e,x),a==null||a(),i.reject(x))},m=()=>new Promise(x=>{var y;a=v=>{(s||d())&&x(v)},(y=e.onPause)==null||y.call(e)}).then(()=>{var x;a=void 0,s||(x=e.onContinue)==null||x.call(e)}),g=()=>{if(s)return;let x;const y=r===0?e.initialPromise:void 0;try{x=y??e.fn()}catch(v){x=Promise.reject(v)}Promise.resolve(x).then(f).catch(v=>{var S;if(s)return;const b=e.retry??(Zf?0:3),w=e.retryDelay??ppe,N=typeof w=="function"?w(r,v):w,j=b===!0||typeof b=="number"&&r<b||typeof b=="function"&&b(r,v);if(t||!j){h(v);return}r++,(S=e.onFail)==null||S.call(e,r,v),dpe(N).then(()=>d()?void 0:m()).then(()=>{t?h(v):g()})})};return{promise:i,cancel:o,continue:()=>(a==null||a(),i),cancelRetry:l,continueRetry:c,canStart:u,start:()=>(u()?g():m().then(g),i)}}var gpe=e=>setTimeout(e,0);function xpe(){let e=[],t=0,r=l=>{l()},s=l=>{l()},a=gpe;const i=l=>{t?e.push(l):a(()=>{r(l)})},o=()=>{const l=e;e=[],l.length&&a(()=>{s(()=>{l.forEach(c=>{r(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||o()}return c},batchCalls:l=>(...c)=>{i(()=>{l(...c)})},schedule:i,setNotifyFunction:l=>{r=l},setBatchNotifyFunction:l=>{s=l},setScheduler:l=>{a=l}}}var Ts=xpe(),Mf,zB,yY=(zB=class{constructor(){Ut(this,Mf)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),x6(this.gcTime)&&gt(this,Mf,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Zf?1/0:5*60*1e3))}clearGcTimeout(){ie(this,Mf)&&(clearTimeout(ie(this,Mf)),gt(this,Mf,void 0))}},Mf=new WeakMap,zB),ap,ip,so,_f,da,Ov,Pf,Bo,xc,BB,ype=(BB=class extends yY{constructor(t){super();Ut(this,Bo);Ut(this,ap);Ut(this,ip);Ut(this,so);Ut(this,_f);Ut(this,da);Ut(this,Ov);Ut(this,Pf);gt(this,Pf,!1),gt(this,Ov,t.defaultOptions),this.setOptions(t.options),this.observers=[],gt(this,_f,t.client),gt(this,so,ie(this,_f).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,gt(this,ap,vpe(this.options)),this.state=t.state??ie(this,ap),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=ie(this,da))==null?void 0:t.promise}setOptions(t){this.options={...ie(this,Ov),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&ie(this,so).remove(this)}setData(t,r){const s=v6(this.state.data,t,this.options);return yn(this,Bo,xc).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(t,r){yn(this,Bo,xc).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var s,a;const r=(s=ie(this,da))==null?void 0:s.promise;return(a=ie(this,da))==null||a.cancel(t),r?r.then(Da).catch(Da):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(ie(this,ap))}isActive(){return this.observers.some(t=>Yo(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===JP||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(t=0){return this.state.isInvalidated||this.state.data===void 0||!uY(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(s=>s.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=ie(this,da))==null||r.continue()}onOnline(){var r;const t=this.observers.find(s=>s.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=ie(this,da))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),ie(this,so).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(ie(this,da)&&(ie(this,Pf)?ie(this,da).cancel({revert:!0}):ie(this,da).cancelRetry()),this.scheduleGc()),ie(this,so).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||yn(this,Bo,xc).call(this,{type:"invalidate"})}fetch(t,r){var c,d,u;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(ie(this,da))return ie(this,da).continueRetry(),ie(this,da).promise}if(t&&this.setOptions(t),!this.options.queryFn){const f=this.observers.find(h=>h.options.queryFn);f&&this.setOptions(f.options)}const s=new AbortController,a=f=>{Object.defineProperty(f,"signal",{enumerable:!0,get:()=>(gt(this,Pf,!0),s.signal)})},i=()=>{const f=hY(this.options,r),h={client:ie(this,_f),queryKey:this.queryKey,meta:this.meta};return a(h),gt(this,Pf,!1),this.options.persister?this.options.persister(f,h,this):f(h)},o={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:ie(this,_f),state:this.state,fetchFn:i};a(o),(c=this.options.behavior)==null||c.onFetch(o,this),gt(this,ip,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=o.fetchOptions)==null?void 0:d.meta))&&yn(this,Bo,xc).call(this,{type:"fetch",meta:(u=o.fetchOptions)==null?void 0:u.meta});const l=f=>{var h,m,g,x;LS(f)&&f.silent||yn(this,Bo,xc).call(this,{type:"error",error:f}),LS(f)||((m=(h=ie(this,so).config).onError)==null||m.call(h,f,this),(x=(g=ie(this,so).config).onSettled)==null||x.call(g,this.state.data,f,this)),this.scheduleGc()};return gt(this,da,xY({initialPromise:r==null?void 0:r.initialPromise,fn:o.fetchFn,abort:s.abort.bind(s),onSuccess:f=>{var h,m,g,x;if(f===void 0){l(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(f)}catch(y){l(y);return}(m=(h=ie(this,so).config).onSuccess)==null||m.call(h,f,this),(x=(g=ie(this,so).config).onSettled)==null||x.call(g,f,this.state.error,this),this.scheduleGc()},onError:l,onFail:(f,h)=>{yn(this,Bo,xc).call(this,{type:"failed",failureCount:f,error:h})},onPause:()=>{yn(this,Bo,xc).call(this,{type:"pause"})},onContinue:()=>{yn(this,Bo,xc).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0})),ie(this,da).start()}},ap=new WeakMap,ip=new WeakMap,so=new WeakMap,_f=new WeakMap,da=new WeakMap,Ov=new WeakMap,Pf=new WeakMap,Bo=new WeakSet,xc=function(t){const r=s=>{switch(t.type){case"failed":return{...s,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...vY(s.data,this.options),fetchMeta:t.meta??null};case"success":return{...s,data:t.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const a=t.error;return LS(a)&&a.revert&&ie(this,ip)?{...ie(this,ip),fetchStatus:"idle"}:{...s,error:a,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...t.state}}};this.state=r(this.state),Ts.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),ie(this,so).notify({query:this,type:"updated",action:t})})},BB);function vY(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:pY(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function vpe(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,s=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?s??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var Tl,UB,bpe=(UB=class extends M0{constructor(t={}){super();Ut(this,Tl);this.config=t,gt(this,Tl,new Map)}build(t,r,s){const a=r.queryKey,i=r.queryHash??KP(a,r);let o=this.get(i);return o||(o=new ype({client:t,queryKey:a,queryHash:i,options:t.defaultQueryOptions(r),state:s,defaultOptions:t.getQueryDefaults(a)}),this.add(o)),o}add(t){ie(this,Tl).has(t.queryHash)||(ie(this,Tl).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=ie(this,Tl).get(t.queryHash);r&&(t.destroy(),r===t&&ie(this,Tl).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Ts.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return ie(this,Tl).get(t)}getAll(){return[...ie(this,Tl).values()]}find(t){const r={exact:!0,...t};return this.getAll().find(s=>VL(r,s))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(s=>VL(t,s)):r}notify(t){Ts.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){Ts.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Ts.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Tl=new WeakMap,UB),Al,Aa,Tf,El,Sd,VB,wpe=(VB=class extends yY{constructor(t){super();Ut(this,El);Ut(this,Al);Ut(this,Aa);Ut(this,Tf);this.mutationId=t.mutationId,gt(this,Aa,t.mutationCache),gt(this,Al,[]),this.state=t.state||bY(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){ie(this,Al).includes(t)||(ie(this,Al).push(t),this.clearGcTimeout(),ie(this,Aa).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){gt(this,Al,ie(this,Al).filter(r=>r!==t)),this.scheduleGc(),ie(this,Aa).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){ie(this,Al).length||(this.state.status==="pending"?this.scheduleGc():ie(this,Aa).remove(this))}continue(){var t;return((t=ie(this,Tf))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var i,o,l,c,d,u,f,h,m,g,x,y,v,b,w,N,j,S,C,k;const r=()=>{yn(this,El,Sd).call(this,{type:"continue"})};gt(this,Tf,xY({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(M,A)=>{yn(this,El,Sd).call(this,{type:"failed",failureCount:M,error:A})},onPause:()=>{yn(this,El,Sd).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>ie(this,Aa).canRun(this)}));const s=this.state.status==="pending",a=!ie(this,Tf).canStart();try{if(s)r();else{yn(this,El,Sd).call(this,{type:"pending",variables:t,isPaused:a}),await((o=(i=ie(this,Aa).config).onMutate)==null?void 0:o.call(i,t,this));const A=await((c=(l=this.options).onMutate)==null?void 0:c.call(l,t));A!==this.state.context&&yn(this,El,Sd).call(this,{type:"pending",context:A,variables:t,isPaused:a})}const M=await ie(this,Tf).start();return await((u=(d=ie(this,Aa).config).onSuccess)==null?void 0:u.call(d,M,t,this.state.context,this)),await((h=(f=this.options).onSuccess)==null?void 0:h.call(f,M,t,this.state.context)),await((g=(m=ie(this,Aa).config).onSettled)==null?void 0:g.call(m,M,null,this.state.variables,this.state.context,this)),await((y=(x=this.options).onSettled)==null?void 0:y.call(x,M,null,t,this.state.context)),yn(this,El,Sd).call(this,{type:"success",data:M}),M}catch(M){try{throw await((b=(v=ie(this,Aa).config).onError)==null?void 0:b.call(v,M,t,this.state.context,this)),await((N=(w=this.options).onError)==null?void 0:N.call(w,M,t,this.state.context)),await((S=(j=ie(this,Aa).config).onSettled)==null?void 0:S.call(j,void 0,M,this.state.variables,this.state.context,this)),await((k=(C=this.options).onSettled)==null?void 0:k.call(C,void 0,M,t,this.state.context)),M}finally{yn(this,El,Sd).call(this,{type:"error",error:M})}}finally{ie(this,Aa).runNext(this)}}},Al=new WeakMap,Aa=new WeakMap,Tf=new WeakMap,El=new WeakSet,Sd=function(t){const r=s=>{switch(t.type){case"failed":return{...s,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...s,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:t.error,failureCount:s.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),Ts.batch(()=>{ie(this,Al).forEach(s=>{s.onMutationUpdate(t)}),ie(this,Aa).notify({mutation:this,type:"updated",action:t})})},VB);function bY(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var kc,Uo,Rv,HB,jpe=(HB=class extends M0{constructor(t={}){super();Ut(this,kc);Ut(this,Uo);Ut(this,Rv);this.config=t,gt(this,kc,new Set),gt(this,Uo,new Map),gt(this,Rv,0)}build(t,r,s){const a=new wpe({mutationCache:this,mutationId:++W1(this,Rv)._,options:t.defaultMutationOptions(r),state:s});return this.add(a),a}add(t){ie(this,kc).add(t);const r=cb(t);if(typeof r=="string"){const s=ie(this,Uo).get(r);s?s.push(t):ie(this,Uo).set(r,[t])}this.notify({type:"added",mutation:t})}remove(t){if(ie(this,kc).delete(t)){const r=cb(t);if(typeof r=="string"){const s=ie(this,Uo).get(r);if(s)if(s.length>1){const a=s.indexOf(t);a!==-1&&s.splice(a,1)}else s[0]===t&&ie(this,Uo).delete(r)}}this.notify({type:"removed",mutation:t})}canRun(t){const r=cb(t);if(typeof r=="string"){const s=ie(this,Uo).get(r),a=s==null?void 0:s.find(i=>i.state.status==="pending");return!a||a===t}else return!0}runNext(t){var s;const r=cb(t);if(typeof r=="string"){const a=(s=ie(this,Uo).get(r))==null?void 0:s.find(i=>i!==t&&i.state.isPaused);return(a==null?void 0:a.continue())??Promise.resolve()}else return Promise.resolve()}clear(){Ts.batch(()=>{ie(this,kc).forEach(t=>{this.notify({type:"removed",mutation:t})}),ie(this,kc).clear(),ie(this,Uo).clear()})}getAll(){return Array.from(ie(this,kc))}find(t){const r={exact:!0,...t};return this.getAll().find(s=>HL(r,s))}findAll(t={}){return this.getAll().filter(r=>HL(t,r))}notify(t){Ts.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return Ts.batch(()=>Promise.all(t.map(r=>r.continue().catch(Da))))}},kc=new WeakMap,Uo=new WeakMap,Rv=new WeakMap,HB);function cb(e){var t;return(t=e.options.scope)==null?void 0:t.id}function GL(e){return{onFetch:(t,r)=>{var u,f,h,m,g;const s=t.options,a=(h=(f=(u=t.fetchOptions)==null?void 0:u.meta)==null?void 0:f.fetchMore)==null?void 0:h.direction,i=((m=t.state.data)==null?void 0:m.pages)||[],o=((g=t.state.data)==null?void 0:g.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const d=async()=>{let x=!1;const y=w=>{Object.defineProperty(w,"signal",{enumerable:!0,get:()=>(t.signal.aborted?x=!0:t.signal.addEventListener("abort",()=>{x=!0}),t.signal)})},v=hY(t.options,t.fetchOptions),b=async(w,N,j)=>{if(x)return Promise.reject();if(N==null&&w.pages.length)return Promise.resolve(w);const S={client:t.client,queryKey:t.queryKey,pageParam:N,direction:j?"backward":"forward",meta:t.options.meta};y(S);const C=await v(S),{maxPages:k}=t.options,M=j?fpe:upe;return{pages:M(w.pages,C,k),pageParams:M(w.pageParams,N,k)}};if(a&&i.length){const w=a==="backward",N=w?Npe:YL,j={pages:i,pageParams:o},S=N(s,j);l=await b(j,S,w)}else{const w=e??i.length;do{const N=c===0?o[0]??s.initialPageParam:YL(s,l);if(c>0&&N==null)break;l=await b(l,N),c++}while(c<w)}return l};t.options.persister?t.fetchFn=()=>{var x,y;return(y=(x=t.options).persister)==null?void 0:y.call(x,d,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=d}}}function YL(e,{pages:t,pageParams:r}){const s=t.length-1;return t.length>0?e.getNextPageParam(t[s],t,r[s],r):void 0}function Npe(e,{pages:t,pageParams:r}){var s;return t.length>0?(s=e.getPreviousPageParam)==null?void 0:s.call(e,t[0],t,r[0],r):void 0}var Br,Rd,Fd,op,lp,zd,cp,dp,WB,wY=(WB=class{constructor(e={}){Ut(this,Br);Ut(this,Rd);Ut(this,Fd);Ut(this,op);Ut(this,lp);Ut(this,zd);Ut(this,cp);Ut(this,dp);gt(this,Br,e.queryCache||new bpe),gt(this,Rd,e.mutationCache||new jpe),gt(this,Fd,e.defaultOptions||{}),gt(this,op,new Map),gt(this,lp,new Map),gt(this,zd,0)}mount(){W1(this,zd)._++,ie(this,zd)===1&&(gt(this,cp,ZP.subscribe(async e=>{e&&(await this.resumePausedMutations(),ie(this,Br).onFocus())})),gt(this,dp,hj.subscribe(async e=>{e&&(await this.resumePausedMutations(),ie(this,Br).onOnline())})))}unmount(){var e,t;W1(this,zd)._--,ie(this,zd)===0&&((e=ie(this,cp))==null||e.call(this),gt(this,cp,void 0),(t=ie(this,dp))==null||t.call(this),gt(this,dp,void 0))}isFetching(e){return ie(this,Br).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return ie(this,Rd).findAll({...e,status:"pending"}).length}getQueryData(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=ie(this,Br).get(t.queryHash))==null?void 0:r.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=ie(this,Br).build(this,t),s=r.state.data;return s===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(Lm(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(s))}getQueriesData(e){return ie(this,Br).findAll(e).map(({queryKey:t,state:r})=>{const s=r.data;return[t,s]})}setQueryData(e,t,r){const s=this.defaultQueryOptions({queryKey:e}),a=ie(this,Br).get(s.queryHash),i=a==null?void 0:a.state.data,o=cpe(t,i);if(o!==void 0)return ie(this,Br).build(this,s).setData(o,{...r,manual:!0})}setQueriesData(e,t,r){return Ts.batch(()=>ie(this,Br).findAll(e).map(({queryKey:s})=>[s,this.setQueryData(s,t,r)]))}getQueryState(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=ie(this,Br).get(t.queryHash))==null?void 0:r.state}removeQueries(e){const t=ie(this,Br);Ts.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=ie(this,Br);return Ts.batch(()=>(r.findAll(e).forEach(s=>{s.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},s=Ts.batch(()=>ie(this,Br).findAll(e).map(a=>a.cancel(r)));return Promise.all(s).then(Da).catch(Da)}invalidateQueries(e,t={}){return Ts.batch(()=>(ie(this,Br).findAll(e).forEach(r=>{r.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},s=Ts.batch(()=>ie(this,Br).findAll(e).filter(a=>!a.isDisabled()).map(a=>{let i=a.fetch(void 0,r);return r.throwOnError||(i=i.catch(Da)),a.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(s).then(Da)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=ie(this,Br).build(this,t);return r.isStaleByTime(Lm(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Da).catch(Da)}fetchInfiniteQuery(e){return e.behavior=GL(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Da).catch(Da)}ensureInfiniteQueryData(e){return e.behavior=GL(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return hj.isOnline()?ie(this,Rd).resumePausedMutations():Promise.resolve()}getQueryCache(){return ie(this,Br)}getMutationCache(){return ie(this,Rd)}getDefaultOptions(){return ie(this,Fd)}setDefaultOptions(e){gt(this,Fd,e)}setQueryDefaults(e,t){ie(this,op).set(Xf(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...ie(this,op).values()],r={};return t.forEach(s=>{dy(e,s.queryKey)&&Object.assign(r,s.defaultOptions)}),r}setMutationDefaults(e,t){ie(this,lp).set(Xf(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...ie(this,lp).values()],r={};return t.forEach(s=>{dy(e,s.mutationKey)&&Object.assign(r,s.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...ie(this,Fd).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=KP(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===JP&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...ie(this,Fd).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){ie(this,Br).clear(),ie(this,Rd).clear()}},Br=new WeakMap,Rd=new WeakMap,Fd=new WeakMap,op=new WeakMap,lp=new WeakMap,zd=new WeakMap,cp=new WeakMap,dp=new WeakMap,WB),ri,Mn,Fv,Ea,Af,up,Bd,Ud,zv,fp,hp,Ef,If,Vd,mp,Jn,Xg,w6,j6,N6,S6,C6,k6,M6,jY,qB,Spe=(qB=class extends M0{constructor(t,r){super();Ut(this,Jn);Ut(this,ri);Ut(this,Mn);Ut(this,Fv);Ut(this,Ea);Ut(this,Af);Ut(this,up);Ut(this,Bd);Ut(this,Ud);Ut(this,zv);Ut(this,fp);Ut(this,hp);Ut(this,Ef);Ut(this,If);Ut(this,Vd);Ut(this,mp,new Set);this.options=r,gt(this,ri,t),gt(this,Ud,null),gt(this,Bd,b6()),this.options.experimental_prefetchInRender||ie(this,Bd).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(ie(this,Mn).addObserver(this),QL(ie(this,Mn),this.options)?yn(this,Jn,Xg).call(this):this.updateResult(),yn(this,Jn,S6).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return _6(ie(this,Mn),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return _6(ie(this,Mn),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,yn(this,Jn,C6).call(this),yn(this,Jn,k6).call(this),ie(this,Mn).removeObserver(this)}setOptions(t){const r=this.options,s=ie(this,Mn);if(this.options=ie(this,ri).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Yo(this.options.enabled,ie(this,Mn))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");yn(this,Jn,M6).call(this),ie(this,Mn).setOptions(this.options),r._defaulted&&!fj(this.options,r)&&ie(this,ri).getQueryCache().notify({type:"observerOptionsUpdated",query:ie(this,Mn),observer:this});const a=this.hasListeners();a&&KL(ie(this,Mn),s,this.options,r)&&yn(this,Jn,Xg).call(this),this.updateResult(),a&&(ie(this,Mn)!==s||Yo(this.options.enabled,ie(this,Mn))!==Yo(r.enabled,ie(this,Mn))||Lm(this.options.staleTime,ie(this,Mn))!==Lm(r.staleTime,ie(this,Mn)))&&yn(this,Jn,w6).call(this);const i=yn(this,Jn,j6).call(this);a&&(ie(this,Mn)!==s||Yo(this.options.enabled,ie(this,Mn))!==Yo(r.enabled,ie(this,Mn))||i!==ie(this,Vd))&&yn(this,Jn,N6).call(this,i)}getOptimisticResult(t){const r=ie(this,ri).getQueryCache().build(ie(this,ri),t),s=this.createResult(r,t);return kpe(this,s)&&(gt(this,Ea,s),gt(this,up,this.options),gt(this,Af,ie(this,Mn).state)),s}getCurrentResult(){return ie(this,Ea)}trackResult(t,r){return new Proxy(t,{get:(s,a)=>(this.trackProp(a),r==null||r(a),Reflect.get(s,a))})}trackProp(t){ie(this,mp).add(t)}getCurrentQuery(){return ie(this,Mn)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const r=ie(this,ri).defaultQueryOptions(t),s=ie(this,ri).getQueryCache().build(ie(this,ri),r);return s.fetch().then(()=>this.createResult(s,r))}fetch(t){return yn(this,Jn,Xg).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),ie(this,Ea)))}createResult(t,r){var M;const s=ie(this,Mn),a=this.options,i=ie(this,Ea),o=ie(this,Af),l=ie(this,up),d=t!==s?t.state:ie(this,Fv),{state:u}=t;let f={...u},h=!1,m;if(r._optimisticResults){const A=this.hasListeners(),P=!A&&QL(t,r),T=A&&KL(t,s,r,a);(P||T)&&(f={...f,...vY(u.data,t.options)}),r._optimisticResults==="isRestoring"&&(f.fetchStatus="idle")}let{error:g,errorUpdatedAt:x,status:y}=f;m=f.data;let v=!1;if(r.placeholderData!==void 0&&m===void 0&&y==="pending"){let A;i!=null&&i.isPlaceholderData&&r.placeholderData===(l==null?void 0:l.placeholderData)?(A=i.data,v=!0):A=typeof r.placeholderData=="function"?r.placeholderData((M=ie(this,hp))==null?void 0:M.state.data,ie(this,hp)):r.placeholderData,A!==void 0&&(y="success",m=v6(i==null?void 0:i.data,A,r),h=!0)}if(r.select&&m!==void 0&&!v)if(i&&m===(o==null?void 0:o.data)&&r.select===ie(this,zv))m=ie(this,fp);else try{gt(this,zv,r.select),m=r.select(m),m=v6(i==null?void 0:i.data,m,r),gt(this,fp,m),gt(this,Ud,null)}catch(A){gt(this,Ud,A)}ie(this,Ud)&&(g=ie(this,Ud),m=ie(this,fp),x=Date.now(),y="error");const b=f.fetchStatus==="fetching",w=y==="pending",N=y==="error",j=w&&b,S=m!==void 0,k={status:y,fetchStatus:f.fetchStatus,isPending:w,isSuccess:y==="success",isError:N,isInitialLoading:j,isLoading:j,data:m,dataUpdatedAt:f.dataUpdatedAt,error:g,errorUpdatedAt:x,failureCount:f.fetchFailureCount,failureReason:f.fetchFailureReason,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>d.dataUpdateCount||f.errorUpdateCount>d.errorUpdateCount,isFetching:b,isRefetching:b&&!w,isLoadingError:N&&!S,isPaused:f.fetchStatus==="paused",isPlaceholderData:h,isRefetchError:N&&S,isStale:XP(t,r),refetch:this.refetch,promise:ie(this,Bd)};if(this.options.experimental_prefetchInRender){const A=I=>{k.status==="error"?I.reject(k.error):k.data!==void 0&&I.resolve(k.data)},P=()=>{const I=gt(this,Bd,k.promise=b6());A(I)},T=ie(this,Bd);switch(T.status){case"pending":t.queryHash===s.queryHash&&A(T);break;case"fulfilled":(k.status==="error"||k.data!==T.value)&&P();break;case"rejected":(k.status!=="error"||k.error!==T.reason)&&P();break}}return k}updateResult(){const t=ie(this,Ea),r=this.createResult(ie(this,Mn),this.options);if(gt(this,Af,ie(this,Mn).state),gt(this,up,this.options),ie(this,Af).data!==void 0&&gt(this,hp,ie(this,Mn)),fj(r,t))return;gt(this,Ea,r);const s=()=>{if(!t)return!0;const{notifyOnChangeProps:a}=this.options,i=typeof a=="function"?a():a;if(i==="all"||!i&&!ie(this,mp).size)return!0;const o=new Set(i??ie(this,mp));return this.options.throwOnError&&o.add("error"),Object.keys(ie(this,Ea)).some(l=>{const c=l;return ie(this,Ea)[c]!==t[c]&&o.has(c)})};yn(this,Jn,jY).call(this,{listeners:s()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&yn(this,Jn,S6).call(this)}},ri=new WeakMap,Mn=new WeakMap,Fv=new WeakMap,Ea=new WeakMap,Af=new WeakMap,up=new WeakMap,Bd=new WeakMap,Ud=new WeakMap,zv=new WeakMap,fp=new WeakMap,hp=new WeakMap,Ef=new WeakMap,If=new WeakMap,Vd=new WeakMap,mp=new WeakMap,Jn=new WeakSet,Xg=function(t){yn(this,Jn,M6).call(this);let r=ie(this,Mn).fetch(this.options,t);return t!=null&&t.throwOnError||(r=r.catch(Da)),r},w6=function(){yn(this,Jn,C6).call(this);const t=Lm(this.options.staleTime,ie(this,Mn));if(Zf||ie(this,Ea).isStale||!x6(t))return;const s=uY(ie(this,Ea).dataUpdatedAt,t)+1;gt(this,Ef,setTimeout(()=>{ie(this,Ea).isStale||this.updateResult()},s))},j6=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(ie(this,Mn)):this.options.refetchInterval)??!1},N6=function(t){yn(this,Jn,k6).call(this),gt(this,Vd,t),!(Zf||Yo(this.options.enabled,ie(this,Mn))===!1||!x6(ie(this,Vd))||ie(this,Vd)===0)&&gt(this,If,setInterval(()=>{(this.options.refetchIntervalInBackground||ZP.isFocused())&&yn(this,Jn,Xg).call(this)},ie(this,Vd)))},S6=function(){yn(this,Jn,w6).call(this),yn(this,Jn,N6).call(this,yn(this,Jn,j6).call(this))},C6=function(){ie(this,Ef)&&(clearTimeout(ie(this,Ef)),gt(this,Ef,void 0))},k6=function(){ie(this,If)&&(clearInterval(ie(this,If)),gt(this,If,void 0))},M6=function(){const t=ie(this,ri).getQueryCache().build(ie(this,ri),this.options);if(t===ie(this,Mn))return;const r=ie(this,Mn);gt(this,Mn,t),gt(this,Fv,t.state),this.hasListeners()&&(r==null||r.removeObserver(this),t.addObserver(this))},jY=function(t){Ts.batch(()=>{t.listeners&&this.listeners.forEach(r=>{r(ie(this,Ea))}),ie(this,ri).getQueryCache().notify({query:ie(this,Mn),type:"observerResultsUpdated"})})},qB);function Cpe(e,t){return Yo(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function QL(e,t){return Cpe(e,t)||e.state.data!==void 0&&_6(e,t,t.refetchOnMount)}function _6(e,t,r){if(Yo(t.enabled,e)!==!1){const s=typeof r=="function"?r(e):r;return s==="always"||s!==!1&&XP(e,t)}return!1}function KL(e,t,r,s){return(e!==t||Yo(s.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&XP(e,r)}function XP(e,t){return Yo(t.enabled,e)!==!1&&e.isStaleByTime(Lm(t.staleTime,e))}function kpe(e,t){return!fj(e.getCurrentResult(),t)}var Hd,Wd,si,Mc,Uc,fw,P6,GB,Mpe=(GB=class extends M0{constructor(r,s){super();Ut(this,Uc);Ut(this,Hd);Ut(this,Wd);Ut(this,si);Ut(this,Mc);gt(this,Hd,r),this.setOptions(s),this.bindMethods(),yn(this,Uc,fw).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(r){var a;const s=this.options;this.options=ie(this,Hd).defaultMutationOptions(r),fj(this.options,s)||ie(this,Hd).getMutationCache().notify({type:"observerOptionsUpdated",mutation:ie(this,si),observer:this}),s!=null&&s.mutationKey&&this.options.mutationKey&&Xf(s.mutationKey)!==Xf(this.options.mutationKey)?this.reset():((a=ie(this,si))==null?void 0:a.state.status)==="pending"&&ie(this,si).setOptions(this.options)}onUnsubscribe(){var r;this.hasListeners()||(r=ie(this,si))==null||r.removeObserver(this)}onMutationUpdate(r){yn(this,Uc,fw).call(this),yn(this,Uc,P6).call(this,r)}getCurrentResult(){return ie(this,Wd)}reset(){var r;(r=ie(this,si))==null||r.removeObserver(this),gt(this,si,void 0),yn(this,Uc,fw).call(this),yn(this,Uc,P6).call(this)}mutate(r,s){var a;return gt(this,Mc,s),(a=ie(this,si))==null||a.removeObserver(this),gt(this,si,ie(this,Hd).getMutationCache().build(ie(this,Hd),this.options)),ie(this,si).addObserver(this),ie(this,si).execute(r)}},Hd=new WeakMap,Wd=new WeakMap,si=new WeakMap,Mc=new WeakMap,Uc=new WeakSet,fw=function(){var s;const r=((s=ie(this,si))==null?void 0:s.state)??bY();gt(this,Wd,{...r,isPending:r.status==="pending",isSuccess:r.status==="success",isError:r.status==="error",isIdle:r.status==="idle",mutate:this.mutate,reset:this.reset})},P6=function(r){Ts.batch(()=>{var s,a,i,o,l,c,d,u;if(ie(this,Mc)&&this.hasListeners()){const f=ie(this,Wd).variables,h=ie(this,Wd).context;(r==null?void 0:r.type)==="success"?((a=(s=ie(this,Mc)).onSuccess)==null||a.call(s,r.data,f,h),(o=(i=ie(this,Mc)).onSettled)==null||o.call(i,r.data,null,f,h)):(r==null?void 0:r.type)==="error"&&((c=(l=ie(this,Mc)).onError)==null||c.call(l,r.error,f,h),(u=(d=ie(this,Mc)).onSettled)==null||u.call(d,void 0,r.error,f,h))}this.listeners.forEach(f=>{f(ie(this,Wd))})})},GB),NY=p.createContext(void 0),cs=e=>{const t=p.useContext(NY);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},SY=({client:e,children:t})=>(p.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),n.jsx(NY.Provider,{value:e,children:t})),CY=p.createContext(!1),_pe=()=>p.useContext(CY);CY.Provider;function Ppe(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var Tpe=p.createContext(Ppe()),Ape=()=>p.useContext(Tpe),Epe=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},Ipe=e=>{p.useEffect(()=>{e.clearReset()},[e])},Lpe=({result:e,errorResetBoundary:t,throwOnError:r,query:s,suspense:a})=>e.isError&&!t.isReset()&&!e.isFetching&&s&&(a&&e.data===void 0||mY(r,[e.error,s])),Dpe=e=>{const t=e.staleTime;e.suspense&&(e.staleTime=typeof t=="function"?(...r)=>Math.max(t(...r),1e3):Math.max(t??1e3,1e3),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3)))},$pe=(e,t)=>e.isLoading&&e.isFetching&&!t,Ope=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,JL=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function Rpe(e,t,r){var f,h,m,g,x;const s=cs(),a=_pe(),i=Ape(),o=s.defaultQueryOptions(e);(h=(f=s.getDefaultOptions().queries)==null?void 0:f._experimental_beforeQuery)==null||h.call(f,o),o._optimisticResults=a?"isRestoring":"optimistic",Dpe(o),Epe(o,i),Ipe(i);const l=!s.getQueryCache().get(o.queryHash),[c]=p.useState(()=>new t(s,o)),d=c.getOptimisticResult(o),u=!a&&e.subscribed!==!1;if(p.useSyncExternalStore(p.useCallback(y=>{const v=u?c.subscribe(Ts.batchCalls(y)):Da;return c.updateResult(),v},[c,u]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),p.useEffect(()=>{c.setOptions(o)},[o,c]),Ope(o,d))throw JL(o,c,i);if(Lpe({result:d,errorResetBoundary:i,throwOnError:o.throwOnError,query:s.getQueryCache().get(o.queryHash),suspense:o.suspense}))throw d.error;if((g=(m=s.getDefaultOptions().queries)==null?void 0:m._experimental_afterQuery)==null||g.call(m,o,d),o.experimental_prefetchInRender&&!Zf&&$pe(d,a)){const y=l?JL(o,c,i):(x=s.getQueryCache().get(o.queryHash))==null?void 0:x.promise;y==null||y.catch(Da).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?d:c.trackResult(d)}function be(e,t){return Rpe(e,Spe)}function je(e,t){const r=cs(),[s]=p.useState(()=>new Mpe(r,e));p.useEffect(()=>{s.setOptions(e)},[s,e]);const a=p.useSyncExternalStore(p.useCallback(o=>s.subscribe(Ts.batchCalls(o)),[s]),()=>s.getCurrentResult(),()=>s.getCurrentResult()),i=p.useCallback((o,l)=>{s.mutate(o,l).catch(Da)},[s]);if(a.error&&mY(s.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:i,mutateAsync:a.mutate}}async function kY(e){if(!e.ok){const t=await e.text()||e.statusText;throw new Error(`${e.status}: ${t}`)}}async function Ne(e,t,r,s){const a={method:e,credentials:"include",...s};if(r){const o=s!=null&&s.headers&&typeof s.headers=="object"&&"Content-Type"in s.headers?String(s.headers["Content-Type"]):"application/json";a.headers={...a.headers||{},"Content-Type":o},o==="application/x-www-form-urlencoded"?a.body=new URLSearchParams(r).toString():a.body=JSON.stringify(r)}const i=await fetch(t,a);return await kY(i),i}const Fpe=({on401:e})=>async({queryKey:t})=>{const r=await fetch(t[0],{credentials:"include"});return await kY(r),await r.json()},ze=new wY({defaultOptions:{queries:{queryFn:Fpe({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}}),zpe=1,Bpe=2e3;let DS=0;function Upe(){return DS=(DS+1)%Number.MAX_SAFE_INTEGER,DS.toString()}const $S=new Map,ZL=e=>{if($S.has(e))return;const t=setTimeout(()=>{$S.delete(e),bx({type:"REMOVE_TOAST",toastId:e})},Bpe);$S.set(e,t)},Vpe=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,zpe)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(r=>r.id===t.toast.id?{...r,...t.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=t;return r?ZL(r):e.toasts.forEach(s=>{ZL(s.id)}),{...e,toasts:e.toasts.map(s=>s.id===r||r===void 0?{...s,open:!1}:s)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(r=>r.id!==t.toastId)}}},hw=[];let mw={toasts:[]};function bx(e){mw=Vpe(mw,e),hw.forEach(t=>{t(mw)})}function Hpe({...e}){const t=Upe(),r=a=>bx({type:"UPDATE_TOAST",toast:{...a,id:t}}),s=()=>bx({type:"DISMISS_TOAST",toastId:t});return bx({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:a=>{a||s()}}}),{id:t,dismiss:s,update:r}}function Ee(){const[e,t]=p.useState(mw);return p.useEffect(()=>(hw.push(t),()=>{const r=hw.indexOf(t);r>-1&&hw.splice(r,1)}),[e]),{...e,toast:Hpe,dismiss:r=>bx({type:"DISMISS_TOAST",toastId:r})}}function ut(e,t,{checkForDefaultPrevented:r=!0}={}){return function(a){if(e==null||e(a),r===!1||!a.defaultPrevented)return t==null?void 0:t(a)}}function XL(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function eh(...e){return t=>{let r=!1;const s=e.map(a=>{const i=XL(a,t);return!r&&typeof i=="function"&&(r=!0),i});if(r)return()=>{for(let a=0;a<s.length;a++){const i=s[a];typeof i=="function"?i():XL(e[a],null)}}}}function rn(...e){return p.useCallback(eh(...e),e)}function Wpe(e,t){const r=p.createContext(t),s=i=>{const{children:o,...l}=i,c=p.useMemo(()=>l,Object.values(l));return n.jsx(r.Provider,{value:c,children:o})};s.displayName=e+"Provider";function a(i){const o=p.useContext(r);if(o)return o;if(t!==void 0)return t;throw new Error(`\`${i}\` must be used within \`${e}\``)}return[s,a]}function ws(e,t=[]){let r=[];function s(i,o){const l=p.createContext(o),c=r.length;r=[...r,o];const d=f=>{var v;const{scope:h,children:m,...g}=f,x=((v=h==null?void 0:h[e])==null?void 0:v[c])||l,y=p.useMemo(()=>g,Object.values(g));return n.jsx(x.Provider,{value:y,children:m})};d.displayName=i+"Provider";function u(f,h){var x;const m=((x=h==null?void 0:h[e])==null?void 0:x[c])||l,g=p.useContext(m);if(g)return g;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${i}\``)}return[d,u]}const a=()=>{const i=r.map(o=>p.createContext(o));return function(l){const c=(l==null?void 0:l[e])||i;return p.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return a.scopeName=e,[s,qpe(a,...t)]}function qpe(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const s=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const o=s.reduce((l,{useScope:c,scopeName:d})=>{const f=c(i)[`__scope${d}`];return{...l,...f}},{});return p.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return r.scopeName=t.scopeName,r}function th(e){const t=Gpe(e),r=p.forwardRef((s,a)=>{const{children:i,...o}=s,l=p.Children.toArray(i),c=l.find(Ype);if(c){const d=c.props.children,u=l.map(f=>f===c?p.Children.count(d)>1?p.Children.only(null):p.isValidElement(d)?d.props.children:null:f);return n.jsx(t,{...o,ref:a,children:p.isValidElement(d)?p.cloneElement(d,void 0,u):null})}return n.jsx(t,{...o,ref:a,children:i})});return r.displayName=`${e}.Slot`,r}var MY=th("Slot");function Gpe(e){const t=p.forwardRef((r,s)=>{const{children:a,...i}=r;if(p.isValidElement(a)){const o=Kpe(a),l=Qpe(i,a.props);return a.type!==p.Fragment&&(l.ref=s?eh(s,o):o),p.cloneElement(a,l)}return p.Children.count(a)>1?p.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var _Y=Symbol("radix.slottable");function PY(e){const t=({children:r})=>n.jsx(n.Fragment,{children:r});return t.displayName=`${e}.Slottable`,t.__radixId=_Y,t}function Ype(e){return p.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===_Y}function Qpe(e,t){const r={...t};for(const s in t){const a=e[s],i=t[s];/^on[A-Z]/.test(s)?a&&i?r[s]=(...l)=>{i(...l),a(...l)}:a&&(r[s]=a):s==="style"?r[s]={...a,...i}:s==="className"&&(r[s]=[a,i].filter(Boolean).join(" "))}return{...e,...r}}function Kpe(e){var s,a;let t=(s=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function qv(e){const t=e+"CollectionProvider",[r,s]=ws(t),[a,i]=r(t,{collectionRef:{current:null},itemMap:new Map}),o=x=>{const{scope:y,children:v}=x,b=Q.useRef(null),w=Q.useRef(new Map).current;return n.jsx(a,{scope:y,itemMap:w,collectionRef:b,children:v})};o.displayName=t;const l=e+"CollectionSlot",c=th(l),d=Q.forwardRef((x,y)=>{const{scope:v,children:b}=x,w=i(l,v),N=rn(y,w.collectionRef);return n.jsx(c,{ref:N,children:b})});d.displayName=l;const u=e+"CollectionItemSlot",f="data-radix-collection-item",h=th(u),m=Q.forwardRef((x,y)=>{const{scope:v,children:b,...w}=x,N=Q.useRef(null),j=rn(y,N),S=i(u,v);return Q.useEffect(()=>(S.itemMap.set(N,{ref:N,...w}),()=>void S.itemMap.delete(N))),n.jsx(h,{[f]:"",ref:j,children:b})});m.displayName=u;function g(x){const y=i(e+"CollectionConsumer",x);return Q.useCallback(()=>{const b=y.collectionRef.current;if(!b)return[];const w=Array.from(b.querySelectorAll(`[${f}]`));return Array.from(y.itemMap.values()).sort((S,C)=>w.indexOf(S.ref.current)-w.indexOf(C.ref.current))},[y.collectionRef,y.itemMap])}return[{Provider:o,Slot:d,ItemSlot:m},g,s]}var Jpe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],ht=Jpe.reduce((e,t)=>{const r=th(`Primitive.${t}`),s=p.forwardRef((a,i)=>{const{asChild:o,...l}=a,c=o?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),n.jsx(c,{...l,ref:i})});return s.displayName=`Primitive.${t}`,{...e,[t]:s}},{});function TY(e,t){e&&ho.flushSync(()=>e.dispatchEvent(t))}function Gr(e){const t=p.useRef(e);return p.useEffect(()=>{t.current=e}),p.useMemo(()=>(...r)=>{var s;return(s=t.current)==null?void 0:s.call(t,...r)},[])}function Zpe(e,t=globalThis==null?void 0:globalThis.document){const r=Gr(e);p.useEffect(()=>{const s=a=>{a.key==="Escape"&&r(a)};return t.addEventListener("keydown",s,{capture:!0}),()=>t.removeEventListener("keydown",s,{capture:!0})},[r,t])}var Xpe="DismissableLayer",T6="dismissableLayer.update",e0e="dismissableLayer.pointerDownOutside",t0e="dismissableLayer.focusOutside",eD,AY=p.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),_0=p.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:s,onPointerDownOutside:a,onFocusOutside:i,onInteractOutside:o,onDismiss:l,...c}=e,d=p.useContext(AY),[u,f]=p.useState(null),h=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=p.useState({}),g=rn(t,C=>f(C)),x=Array.from(d.layers),[y]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),v=x.indexOf(y),b=u?x.indexOf(u):-1,w=d.layersWithOutsidePointerEventsDisabled.size>0,N=b>=v,j=r0e(C=>{const k=C.target,M=[...d.branches].some(A=>A.contains(k));!N||M||(a==null||a(C),o==null||o(C),C.defaultPrevented||l==null||l())},h),S=s0e(C=>{const k=C.target;[...d.branches].some(A=>A.contains(k))||(i==null||i(C),o==null||o(C),C.defaultPrevented||l==null||l())},h);return Zpe(C=>{b===d.layers.size-1&&(s==null||s(C),!C.defaultPrevented&&l&&(C.preventDefault(),l()))},h),p.useEffect(()=>{if(u)return r&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(eD=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(u)),d.layers.add(u),tD(),()=>{r&&d.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=eD)}},[u,h,r,d]),p.useEffect(()=>()=>{u&&(d.layers.delete(u),d.layersWithOutsidePointerEventsDisabled.delete(u),tD())},[u,d]),p.useEffect(()=>{const C=()=>m({});return document.addEventListener(T6,C),()=>document.removeEventListener(T6,C)},[]),n.jsx(ht.div,{...c,ref:g,style:{pointerEvents:w?N?"auto":"none":void 0,...e.style},onFocusCapture:ut(e.onFocusCapture,S.onFocusCapture),onBlurCapture:ut(e.onBlurCapture,S.onBlurCapture),onPointerDownCapture:ut(e.onPointerDownCapture,j.onPointerDownCapture)})});_0.displayName=Xpe;var n0e="DismissableLayerBranch",EY=p.forwardRef((e,t)=>{const r=p.useContext(AY),s=p.useRef(null),a=rn(t,s);return p.useEffect(()=>{const i=s.current;if(i)return r.branches.add(i),()=>{r.branches.delete(i)}},[r.branches]),n.jsx(ht.div,{...e,ref:a})});EY.displayName=n0e;function r0e(e,t=globalThis==null?void 0:globalThis.document){const r=Gr(e),s=p.useRef(!1),a=p.useRef(()=>{});return p.useEffect(()=>{const i=l=>{if(l.target&&!s.current){let c=function(){IY(e0e,r,d,{discrete:!0})};const d={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=c,t.addEventListener("click",a.current,{once:!0})):c()}else t.removeEventListener("click",a.current);s.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",i),t.removeEventListener("click",a.current)}},[t,r]),{onPointerDownCapture:()=>s.current=!0}}function s0e(e,t=globalThis==null?void 0:globalThis.document){const r=Gr(e),s=p.useRef(!1);return p.useEffect(()=>{const a=i=>{i.target&&!s.current&&IY(t0e,r,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,r]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}function tD(){const e=new CustomEvent(T6);document.dispatchEvent(e)}function IY(e,t,r,{discrete:s}){const a=r.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&a.addEventListener(e,t,{once:!0}),s?TY(a,i):a.dispatchEvent(i)}var a0e=_0,i0e=EY,ls=globalThis!=null&&globalThis.document?p.useLayoutEffect:()=>{},o0e="Portal",Gv=p.forwardRef((e,t)=>{var l;const{container:r,...s}=e,[a,i]=p.useState(!1);ls(()=>i(!0),[]);const o=r||a&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?ZG.createPortal(n.jsx(ht.div,{...s,ref:t}),o):null});Gv.displayName=o0e;function l0e(e,t){return p.useReducer((r,s)=>t[r][s]??r,e)}var Sa=e=>{const{present:t,children:r}=e,s=c0e(t),a=typeof r=="function"?r({present:s.isPresent}):p.Children.only(r),i=rn(s.ref,d0e(a));return typeof r=="function"||s.isPresent?p.cloneElement(a,{ref:i}):null};Sa.displayName="Presence";function c0e(e){const[t,r]=p.useState(),s=p.useRef({}),a=p.useRef(e),i=p.useRef("none"),o=e?"mounted":"unmounted",[l,c]=l0e(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return p.useEffect(()=>{const d=db(s.current);i.current=l==="mounted"?d:"none"},[l]),ls(()=>{const d=s.current,u=a.current;if(u!==e){const h=i.current,m=db(d);e?c("MOUNT"):m==="none"||(d==null?void 0:d.display)==="none"?c("UNMOUNT"):c(u&&h!==m?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,c]),ls(()=>{if(t){let d;const u=t.ownerDocument.defaultView??window,f=m=>{const x=db(s.current).includes(m.animationName);if(m.target===t&&x&&(c("ANIMATION_END"),!a.current)){const y=t.style.animationFillMode;t.style.animationFillMode="forwards",d=u.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=y)})}},h=m=>{m.target===t&&(i.current=db(s.current))};return t.addEventListener("animationstart",h),t.addEventListener("animationcancel",f),t.addEventListener("animationend",f),()=>{u.clearTimeout(d),t.removeEventListener("animationstart",h),t.removeEventListener("animationcancel",f),t.removeEventListener("animationend",f)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:p.useCallback(d=>{d&&(s.current=getComputedStyle(d)),r(d)},[])}}function db(e){return(e==null?void 0:e.animationName)||"none"}function d0e(e){var s,a;let t=(s=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:s.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function qa({prop:e,defaultProp:t,onChange:r=()=>{}}){const[s,a]=u0e({defaultProp:t,onChange:r}),i=e!==void 0,o=i?e:s,l=Gr(r),c=p.useCallback(d=>{if(i){const f=typeof d=="function"?d(e):d;f!==e&&l(f)}else a(d)},[i,e,a,l]);return[o,c]}function u0e({defaultProp:e,onChange:t}){const r=p.useState(e),[s]=r,a=p.useRef(s),i=Gr(t);return p.useEffect(()=>{a.current!==s&&(i(s),a.current=s)},[s,a,i]),r}var f0e="VisuallyHidden",Yv=p.forwardRef((e,t)=>n.jsx(ht.span,{...e,ref:t,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}}));Yv.displayName=f0e;var h0e=Yv,eT="ToastProvider",[tT,m0e,p0e]=qv("Toast"),[LY]=ws("Toast",[p0e]),[g0e,HN]=LY(eT),DY=e=>{const{__scopeToast:t,label:r="Notification",duration:s=5e3,swipeDirection:a="right",swipeThreshold:i=50,children:o}=e,[l,c]=p.useState(null),[d,u]=p.useState(0),f=p.useRef(!1),h=p.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${eT}\`. Expected non-empty \`string\`.`),n.jsx(tT.Provider,{scope:t,children:n.jsx(g0e,{scope:t,label:r,duration:s,swipeDirection:a,swipeThreshold:i,toastCount:d,viewport:l,onViewportChange:c,onToastAdd:p.useCallback(()=>u(m=>m+1),[]),onToastRemove:p.useCallback(()=>u(m=>m-1),[]),isFocusedToastEscapeKeyDownRef:f,isClosePausedRef:h,children:o})})};DY.displayName=eT;var $Y="ToastViewport",x0e=["F8"],A6="toast.viewportPause",E6="toast.viewportResume",OY=p.forwardRef((e,t)=>{const{__scopeToast:r,hotkey:s=x0e,label:a="Notifications ({hotkey})",...i}=e,o=HN($Y,r),l=m0e(r),c=p.useRef(null),d=p.useRef(null),u=p.useRef(null),f=p.useRef(null),h=rn(t,f,o.onViewportChange),m=s.join("+").replace(/Key/g,"").replace(/Digit/g,""),g=o.toastCount>0;p.useEffect(()=>{const y=v=>{var w;s.length!==0&&s.every(N=>v[N]||v.code===N)&&((w=f.current)==null||w.focus())};return document.addEventListener("keydown",y),()=>document.removeEventListener("keydown",y)},[s]),p.useEffect(()=>{const y=c.current,v=f.current;if(g&&y&&v){const b=()=>{if(!o.isClosePausedRef.current){const S=new CustomEvent(A6);v.dispatchEvent(S),o.isClosePausedRef.current=!0}},w=()=>{if(o.isClosePausedRef.current){const S=new CustomEvent(E6);v.dispatchEvent(S),o.isClosePausedRef.current=!1}},N=S=>{!y.contains(S.relatedTarget)&&w()},j=()=>{y.contains(document.activeElement)||w()};return y.addEventListener("focusin",b),y.addEventListener("focusout",N),y.addEventListener("pointermove",b),y.addEventListener("pointerleave",j),window.addEventListener("blur",b),window.addEventListener("focus",w),()=>{y.removeEventListener("focusin",b),y.removeEventListener("focusout",N),y.removeEventListener("pointermove",b),y.removeEventListener("pointerleave",j),window.removeEventListener("blur",b),window.removeEventListener("focus",w)}}},[g,o.isClosePausedRef]);const x=p.useCallback(({tabbingDirection:y})=>{const b=l().map(w=>{const N=w.ref.current,j=[N,...T0e(N)];return y==="forwards"?j:j.reverse()});return(y==="forwards"?b.reverse():b).flat()},[l]);return p.useEffect(()=>{const y=f.current;if(y){const v=b=>{var j,S,C;const w=b.altKey||b.ctrlKey||b.metaKey;if(b.key==="Tab"&&!w){const k=document.activeElement,M=b.shiftKey;if(b.target===y&&M){(j=d.current)==null||j.focus();return}const T=x({tabbingDirection:M?"backwards":"forwards"}),I=T.findIndex(L=>L===k);OS(T.slice(I+1))?b.preventDefault():M?(S=d.current)==null||S.focus():(C=u.current)==null||C.focus()}};return y.addEventListener("keydown",v),()=>y.removeEventListener("keydown",v)}},[l,x]),n.jsxs(i0e,{ref:c,role:"region","aria-label":a.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:g?void 0:"none"},children:[g&&n.jsx(I6,{ref:d,onFocusFromOutsideViewport:()=>{const y=x({tabbingDirection:"forwards"});OS(y)}}),n.jsx(tT.Slot,{scope:r,children:n.jsx(ht.ol,{tabIndex:-1,...i,ref:h})}),g&&n.jsx(I6,{ref:u,onFocusFromOutsideViewport:()=>{const y=x({tabbingDirection:"backwards"});OS(y)}})]})});OY.displayName=$Y;var RY="ToastFocusProxy",I6=p.forwardRef((e,t)=>{const{__scopeToast:r,onFocusFromOutsideViewport:s,...a}=e,i=HN(RY,r);return n.jsx(Yv,{"aria-hidden":!0,tabIndex:0,...a,ref:t,style:{position:"fixed"},onFocus:o=>{var d;const l=o.relatedTarget;!((d=i.viewport)!=null&&d.contains(l))&&s()}})});I6.displayName=RY;var WN="Toast",y0e="toast.swipeStart",v0e="toast.swipeMove",b0e="toast.swipeCancel",w0e="toast.swipeEnd",FY=p.forwardRef((e,t)=>{const{forceMount:r,open:s,defaultOpen:a,onOpenChange:i,...o}=e,[l=!0,c]=qa({prop:s,defaultProp:a,onChange:i});return n.jsx(Sa,{present:r||l,children:n.jsx(S0e,{open:l,...o,ref:t,onClose:()=>c(!1),onPause:Gr(e.onPause),onResume:Gr(e.onResume),onSwipeStart:ut(e.onSwipeStart,d=>{d.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:ut(e.onSwipeMove,d=>{const{x:u,y:f}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","move"),d.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${f}px`)}),onSwipeCancel:ut(e.onSwipeCancel,d=>{d.currentTarget.setAttribute("data-swipe","cancel"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:ut(e.onSwipeEnd,d=>{const{x:u,y:f}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","end"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${f}px`),c(!1)})})})});FY.displayName=WN;var[j0e,N0e]=LY(WN,{onClose(){}}),S0e=p.forwardRef((e,t)=>{const{__scopeToast:r,type:s="foreground",duration:a,open:i,onClose:o,onEscapeKeyDown:l,onPause:c,onResume:d,onSwipeStart:u,onSwipeMove:f,onSwipeCancel:h,onSwipeEnd:m,...g}=e,x=HN(WN,r),[y,v]=p.useState(null),b=rn(t,L=>v(L)),w=p.useRef(null),N=p.useRef(null),j=a||x.duration,S=p.useRef(0),C=p.useRef(j),k=p.useRef(0),{onToastAdd:M,onToastRemove:A}=x,P=Gr(()=>{var R;(y==null?void 0:y.contains(document.activeElement))&&((R=x.viewport)==null||R.focus()),o()}),T=p.useCallback(L=>{!L||L===1/0||(window.clearTimeout(k.current),S.current=new Date().getTime(),k.current=window.setTimeout(P,L))},[P]);p.useEffect(()=>{const L=x.viewport;if(L){const R=()=>{T(C.current),d==null||d()},G=()=>{const $=new Date().getTime()-S.current;C.current=C.current-$,window.clearTimeout(k.current),c==null||c()};return L.addEventListener(A6,G),L.addEventListener(E6,R),()=>{L.removeEventListener(A6,G),L.removeEventListener(E6,R)}}},[x.viewport,j,c,d,T]),p.useEffect(()=>{i&&!x.isClosePausedRef.current&&T(j)},[i,j,x.isClosePausedRef,T]),p.useEffect(()=>(M(),()=>A()),[M,A]);const I=p.useMemo(()=>y?qY(y):null,[y]);return x.viewport?n.jsxs(n.Fragment,{children:[I&&n.jsx(C0e,{__scopeToast:r,role:"status","aria-live":s==="foreground"?"assertive":"polite","aria-atomic":!0,children:I}),n.jsx(j0e,{scope:r,onClose:P,children:ho.createPortal(n.jsx(tT.ItemSlot,{scope:r,children:n.jsx(a0e,{asChild:!0,onEscapeKeyDown:ut(l,()=>{x.isFocusedToastEscapeKeyDownRef.current||P(),x.isFocusedToastEscapeKeyDownRef.current=!1}),children:n.jsx(ht.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":x.swipeDirection,...g,ref:b,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:ut(e.onKeyDown,L=>{L.key==="Escape"&&(l==null||l(L.nativeEvent),L.nativeEvent.defaultPrevented||(x.isFocusedToastEscapeKeyDownRef.current=!0,P()))}),onPointerDown:ut(e.onPointerDown,L=>{L.button===0&&(w.current={x:L.clientX,y:L.clientY})}),onPointerMove:ut(e.onPointerMove,L=>{if(!w.current)return;const R=L.clientX-w.current.x,G=L.clientY-w.current.y,$=!!N.current,D=["left","right"].includes(x.swipeDirection),W=["left","up"].includes(x.swipeDirection)?Math.min:Math.max,E=D?W(0,R):0,F=D?0:W(0,G),B=L.pointerType==="touch"?10:2,Z={x:E,y:F},ne={originalEvent:L,delta:Z};$?(N.current=Z,ub(v0e,f,ne,{discrete:!1})):nD(Z,x.swipeDirection,B)?(N.current=Z,ub(y0e,u,ne,{discrete:!1}),L.target.setPointerCapture(L.pointerId)):(Math.abs(R)>B||Math.abs(G)>B)&&(w.current=null)}),onPointerUp:ut(e.onPointerUp,L=>{const R=N.current,G=L.target;if(G.hasPointerCapture(L.pointerId)&&G.releasePointerCapture(L.pointerId),N.current=null,w.current=null,R){const $=L.currentTarget,D={originalEvent:L,delta:R};nD(R,x.swipeDirection,x.swipeThreshold)?ub(w0e,m,D,{discrete:!0}):ub(b0e,h,D,{discrete:!0}),$.addEventListener("click",W=>W.preventDefault(),{once:!0})}})})})}),x.viewport)})]}):null}),C0e=e=>{const{__scopeToast:t,children:r,...s}=e,a=HN(WN,t),[i,o]=p.useState(!1),[l,c]=p.useState(!1);return _0e(()=>o(!0)),p.useEffect(()=>{const d=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(d)},[]),l?null:n.jsx(Gv,{asChild:!0,children:n.jsx(Yv,{...s,children:i&&n.jsxs(n.Fragment,{children:[a.label," ",r]})})})},k0e="ToastTitle",zY=p.forwardRef((e,t)=>{const{__scopeToast:r,...s}=e;return n.jsx(ht.div,{...s,ref:t})});zY.displayName=k0e;var M0e="ToastDescription",BY=p.forwardRef((e,t)=>{const{__scopeToast:r,...s}=e;return n.jsx(ht.div,{...s,ref:t})});BY.displayName=M0e;var UY="ToastAction",VY=p.forwardRef((e,t)=>{const{altText:r,...s}=e;return r.trim()?n.jsx(WY,{altText:r,asChild:!0,children:n.jsx(nT,{...s,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${UY}\`. Expected non-empty \`string\`.`),null)});VY.displayName=UY;var HY="ToastClose",nT=p.forwardRef((e,t)=>{const{__scopeToast:r,...s}=e,a=N0e(HY,r);return n.jsx(WY,{asChild:!0,children:n.jsx(ht.button,{type:"button",...s,ref:t,onClick:ut(e.onClick,a.onClose)})})});nT.displayName=HY;var WY=p.forwardRef((e,t)=>{const{__scopeToast:r,altText:s,...a}=e;return n.jsx(ht.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":s||void 0,...a,ref:t})});function qY(e){const t=[];return Array.from(e.childNodes).forEach(s=>{if(s.nodeType===s.TEXT_NODE&&s.textContent&&t.push(s.textContent),P0e(s)){const a=s.ariaHidden||s.hidden||s.style.display==="none",i=s.dataset.radixToastAnnounceExclude==="";if(!a)if(i){const o=s.dataset.radixToastAnnounceAlt;o&&t.push(o)}else t.push(...qY(s))}}),t}function ub(e,t,r,{discrete:s}){const a=r.originalEvent.currentTarget,i=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:r});t&&a.addEventListener(e,t,{once:!0}),s?TY(a,i):a.dispatchEvent(i)}var nD=(e,t,r=0)=>{const s=Math.abs(e.x),a=Math.abs(e.y),i=s>a;return t==="left"||t==="right"?i&&s>r:!i&&a>r};function _0e(e=()=>{}){const t=Gr(e);ls(()=>{let r=0,s=0;return r=window.requestAnimationFrame(()=>s=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(s)}},[t])}function P0e(e){return e.nodeType===e.ELEMENT_NODE}function T0e(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const a=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||a?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function OS(e){const t=document.activeElement;return e.some(r=>r===t?!0:(r.focus(),document.activeElement!==t))}var A0e=DY,GY=OY,YY=FY,QY=zY,KY=BY,JY=VY,ZY=nT;function XY(e){var t,r,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=XY(e[t]))&&(s&&(s+=" "),s+=r)}else for(r in e)e[r]&&(s&&(s+=" "),s+=r);return s}function mn(){for(var e,t,r=0,s="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=XY(e))&&(s&&(s+=" "),s+=t);return s}const rD=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,sD=mn,P0=(e,t)=>r=>{var s;if((t==null?void 0:t.variants)==null)return sD(e,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:a,defaultVariants:i}=t,o=Object.keys(a).map(d=>{const u=r==null?void 0:r[d],f=i==null?void 0:i[d];if(u===null)return null;const h=rD(u)||rD(f);return a[d][h]}),l=r&&Object.entries(r).reduce((d,u)=>{let[f,h]=u;return h===void 0||(d[f]=h),d},{}),c=t==null||(s=t.compoundVariants)===null||s===void 0?void 0:s.reduce((d,u)=>{let{class:f,className:h,...m}=u;return Object.entries(m).every(g=>{let[x,y]=g;return Array.isArray(y)?y.includes({...i,...l}[x]):{...i,...l}[x]===y})?[...d,f,h]:d},[]);return sD(e,o,c,r==null?void 0:r.class,r==null?void 0:r.className)};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E0e=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),eQ=(...e)=>e.filter((t,r,s)=>!!t&&s.indexOf(t)===r).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var I0e={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L0e=p.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:s,className:a="",children:i,iconNode:o,...l},c)=>p.createElement("svg",{ref:c,...I0e,width:t,height:t,stroke:e,strokeWidth:s?Number(r)*24/Number(t):r,className:eQ("lucide",a),...l},[...o.map(([d,u])=>p.createElement(d,u)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=(e,t)=>{const r=p.forwardRef(({className:s,...a},i)=>p.createElement(L0e,{ref:i,iconNode:t,className:eQ(`lucide-${E0e(e)}`,s),...a}));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tQ=we("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D0e=we("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fb=we("ArrowLeftRight",[["path",{d:"M8 3 4 7l4 4",key:"9rb6wj"}],["path",{d:"M4 7h16",key:"6tx8e3"}],["path",{d:"m16 21 4-4-4-4",key:"siv7j2"}],["path",{d:"M20 17H4",key:"h6l3hr"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pi=we("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $0e=we("ArrowRightLeft",[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gc=we("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O0e=we("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yr=we("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yc=we("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yo=we("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $f=we("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Np=we("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Of=we("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qN=we("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ql=we("CalendarClock",[["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M17.5 17.5 16 16.3V14",key:"akvzfd"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hu=we("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R0e=we("CalendarPlus",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M21 13V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h8",key:"3spt84"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M16 19h6",key:"xwg31i"}],["path",{d:"M19 16v6",key:"tddt3s"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dt=we("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mu=we("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ys=we("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F0e=we("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nQ=we("ChartNoAxesColumnIncreasing",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L6=we("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mr=we("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ui=we("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lu=we("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vl=we("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T0=we("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wt=we("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bn=we("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nn=we("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rQ=we("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z0e=we("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aD=we("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mj=we("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ws=we("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B0e=we("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U0e=we("ClipboardCheck",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rt=we("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V0e=we("CloudOff",[["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M5.782 5.782A7 7 0 0 0 9 19h8.5a4.5 4.5 0 0 0 1.307-.193",key:"yfwify"}],["path",{d:"M21.532 16.5A4.5 4.5 0 0 0 17.5 10h-1.79A7.008 7.008 0 0 0 10 5.07",key:"jlfiyv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ex=we("CloudRain",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M16 14v6",key:"1j4efv"}],["path",{d:"M8 14v6",key:"17c4r9"}],["path",{d:"M12 16v6",key:"c8a4gj"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pj=we("CodeXml",[["path",{d:"m18 16 4-4-4-4",key:"1inbqp"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"m14.5 4-5 16",key:"e7oirm"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qv=we("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yf=we("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sQ=we("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H0e=we("Delete",[["path",{d:"M10 5a2 2 0 0 0-1.344.519l-6.328 5.74a1 1 0 0 0 0 1.481l6.328 5.741A2 2 0 0 0 10 19h10a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2z",key:"1yo7s0"}],["path",{d:"m12 9 6 6",key:"anjzzh"}],["path",{d:"m18 9-6 6",key:"1fp51s"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ar=we("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qc=we("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RS=we("Droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xa=we("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uy=we("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kl=we("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FS=we("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W0e=we("FileArchive",[["path",{d:"M10 12v-1",key:"v7bkov"}],["path",{d:"M10 18v-2",key:"1cjy8d"}],["path",{d:"M10 7V6",key:"dljcrl"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M15.5 22H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v16a2 2 0 0 0 .274 1.01",key:"gkbcor"}],["circle",{cx:"10",cy:"20",r:"2",key:"1xzdoj"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q0e=we("FileQuestion",[["path",{d:"M12 17h.01",key:"p32p05"}],["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z",key:"1mlx9k"}],["path",{d:"M9.1 9a3 3 0 0 1 5.82 1c0 2-3 3-3 3",key:"mhlwft"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bs=we("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G0e=we("Forward",[["polyline",{points:"15 17 20 12 15 7",key:"1w3sku"}],["path",{d:"M4 18v-2a4 4 0 0 1 4-4h12",key:"jmiej9"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jr=we("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aQ=we("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iQ=we("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y0e=we("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q0e=we("Headphones",[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kc=we("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D6=we("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $i=we("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vo=we("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iD=we("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gj=we("KeyRound",[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fy=we("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oQ=we("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $6=we("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nt=we("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rT=we("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oD=we("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lQ=we("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cr=we("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zr=we("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cQ=we("Map",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K0e=we("Maximize",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J0e=we("Megaphone",[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kv=we("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wa=we("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const on=we("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z0e=we("MessagesSquare",[["path",{d:"M14 9a2 2 0 0 1-2 2H6l-4 4V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2z",key:"p1xzt8"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v11l-4-4h-6a2 2 0 0 1-2-2v-1",key:"1cx29u"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dQ=we("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sp=we("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X0e=we("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ege=we("Move",[["path",{d:"M12 2v20",key:"t6zp3m"}],["path",{d:"m15 19-3 3-3-3",key:"11eu04"}],["path",{d:"m19 9 3 3-3 3",key:"1mg7y2"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m5 9-3 3 3 3",key:"j64kie"}],["path",{d:"m9 5 3-3 3 3",key:"l8vdw6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O6=we("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tge=we("Network",[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const au=we("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nge=we("PanelRightClose",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}],["path",{d:"m8 9 3 3-3 3",key:"12hl5m"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rge=we("PanelRight",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sge=we("PanelsTopLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const age=we("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cp=we("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ige=we("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kp=we("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oge=we("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wx=we("PhoneCall",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}],["path",{d:"M14.05 2a9 9 0 0 1 8 7.94",key:"vmijpz"}],["path",{d:"M14.05 6A5 5 0 0 1 18 10",key:"13nbpp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uQ=we("PhoneForwarded",[["polyline",{points:"18 2 22 6 18 10",key:"6vjanh"}],["line",{x1:"14",x2:"22",y1:"6",y2:"6",key:"1jsywh"}],["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fQ=we("PhoneIncoming",[["polyline",{points:"16 2 16 8 22 8",key:"1ygljm"}],["line",{x1:"22",x2:"16",y1:"2",y2:"8",key:"1xzwqn"}],["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hQ=we("PhoneMissed",[["line",{x1:"22",x2:"16",y1:"2",y2:"8",key:"1xzwqn"}],["line",{x1:"16",x2:"22",y1:"2",y2:"8",key:"13zxdn"}],["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sT=we("PhoneOff",[["path",{d:"M10.68 13.31a16 16 0 0 0 3.41 2.6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7 2 2 0 0 1 1.72 2v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.42 19.42 0 0 1-3.33-2.67m-2.67-3.34a19.79 19.79 0 0 1-3.07-8.63A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91",key:"z86iuo"}],["line",{x1:"22",x2:"2",y1:"2",y2:"22",key:"11kh81"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mQ=we("PhoneOutgoing",[["polyline",{points:"22 8 22 2 16 2",key:"1g204g"}],["line",{x1:"16",x2:"22",y1:"8",y2:"2",key:"1ggias"}],["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bt=we("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lge=we("Pin",[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lD=we("Plane",[["path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z",key:"1v9wt8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A0=we("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Un=we("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aT=we("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cge=we("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jc=we("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dge=we("Repeat",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pw=we("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E0=we("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fr=we("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ga=we("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vi=we("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R6=we("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ja=we("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uge=we("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zn=we("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pu=we("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pQ=we("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ln=we("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const No=we("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fge=we("StarHalf",[["path",{d:"M12 17.8 5.8 21 7 14.1 2 9.3l7-1L12 2",key:"nare05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qr=we("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hge=we("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jv=we("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mp=we("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mge=we("TestTubeDiagonal",[["path",{d:"M21 7 6.82 21.18a2.83 2.83 0 0 1-3.99-.01a2.83 2.83 0 0 1 0-4L17 3",key:"1ub6xw"}],["path",{d:"m16 2 6 6",key:"1gw87d"}],["path",{d:"M12 16H4",key:"1cjfip"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pge=we("ThumbsDown",[["path",{d:"M17 14V2",key:"8ymqnk"}],["path",{d:"M9 18.12 10 14H4.17a2 2 0 0 1-1.92-2.56l2.33-8A2 2 0 0 1 6.5 2H20a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-2.76a2 2 0 0 0-1.79 1.11L12 22a3.13 3.13 0 0 1-3-3.88Z",key:"m61m77"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gQ=we("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gge=we("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nr=we("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tx=we("TreePalm",[["path",{d:"M13 8c0-2.76-2.46-5-5.5-5S2 5.24 2 8h2l1-1 1 1h4",key:"foxbe7"}],["path",{d:"M13 7.14A5.82 5.82 0 0 1 16.5 6c3.04 0 5.5 2.24 5.5 5h-3l-1-1-1 1h-3",key:"18arnh"}],["path",{d:"M5.89 9.71c-2.15 2.15-2.3 5.47-.35 7.43l4.24-4.25.7-.7.71-.71 2.12-2.12c-1.95-1.96-5.27-1.8-7.42.35",key:"ywahnh"}],["path",{d:"M11 15.5c.5 2.5-.17 4.5-1 6.5h4c2-5.5-.5-12-1-14",key:"ft0feo"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xQ=we("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ya=we("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ya=we("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yQ=we("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _p=we("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xge=we("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yge=we("UserCog",[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nc=we("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vge=we("UserRound",[["circle",{cx:"12",cy:"8",r:"5",key:"1hypcn"}],["path",{d:"M20 21a8 8 0 0 0-16 0",key:"rfgkzh"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bge=we("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fn=we("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const br=we("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yd=we("Voicemail",[["circle",{cx:"6",cy:"12",r:"4",key:"1ehtga"}],["circle",{cx:"18",cy:"12",r:"4",key:"4vafl8"}],["line",{x1:"6",x2:"18",y1:"16",y2:"16",key:"pmt8us"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vQ=we("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wge=we("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zv=we("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jge=we("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nh=we("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jr=we("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const na=we("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),iT="-",Nge=e=>{const t=Cge(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:s}=e;return{getClassGroupId:o=>{const l=o.split(iT);return l[0]===""&&l.length!==1&&l.shift(),bQ(l,t)||Sge(o)},getConflictingClassGroupIds:(o,l)=>{const c=r[o]||[];return l&&s[o]?[...c,...s[o]]:c}}},bQ=(e,t)=>{var o;if(e.length===0)return t.classGroupId;const r=e[0],s=t.nextPart.get(r),a=s?bQ(e.slice(1),s):void 0;if(a)return a;if(t.validators.length===0)return;const i=e.join(iT);return(o=t.validators.find(({validator:l})=>l(i)))==null?void 0:o.classGroupId},cD=/^\[(.+)\]$/,Sge=e=>{if(cD.test(e)){const t=cD.exec(e)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},Cge=e=>{const{theme:t,prefix:r}=e,s={nextPart:new Map,validators:[]};return Mge(Object.entries(e.classGroups),r).forEach(([i,o])=>{F6(o,s,i,t)}),s},F6=(e,t,r,s)=>{e.forEach(a=>{if(typeof a=="string"){const i=a===""?t:dD(t,a);i.classGroupId=r;return}if(typeof a=="function"){if(kge(a)){F6(a(s),t,r,s);return}t.validators.push({validator:a,classGroupId:r});return}Object.entries(a).forEach(([i,o])=>{F6(o,dD(t,i),r,s)})})},dD=(e,t)=>{let r=e;return t.split(iT).forEach(s=>{r.nextPart.has(s)||r.nextPart.set(s,{nextPart:new Map,validators:[]}),r=r.nextPart.get(s)}),r},kge=e=>e.isThemeGetter,Mge=(e,t)=>t?e.map(([r,s])=>{const a=s.map(i=>typeof i=="string"?t+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,l])=>[t+o,l])):i);return[r,a]}):e,_ge=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,s=new Map;const a=(i,o)=>{r.set(i,o),t++,t>e&&(t=0,s=r,r=new Map)};return{get(i){let o=r.get(i);if(o!==void 0)return o;if((o=s.get(i))!==void 0)return a(i,o),o},set(i,o){r.has(i)?r.set(i,o):a(i,o)}}},wQ="!",Pge=e=>{const{separator:t,experimentalParseClassName:r}=e,s=t.length===1,a=t[0],i=t.length,o=l=>{const c=[];let d=0,u=0,f;for(let y=0;y<l.length;y++){let v=l[y];if(d===0){if(v===a&&(s||l.slice(y,y+i)===t)){c.push(l.slice(u,y)),u=y+i;continue}if(v==="/"){f=y;continue}}v==="["?d++:v==="]"&&d--}const h=c.length===0?l:l.substring(u),m=h.startsWith(wQ),g=m?h.substring(1):h,x=f&&f>u?f-u:void 0;return{modifiers:c,hasImportantModifier:m,baseClassName:g,maybePostfixModifierPosition:x}};return r?l=>r({className:l,parseClassName:o}):o},Tge=e=>{if(e.length<=1)return e;const t=[];let r=[];return e.forEach(s=>{s[0]==="["?(t.push(...r.sort(),s),r=[]):r.push(s)}),t.push(...r.sort()),t},Age=e=>({cache:_ge(e.cacheSize),parseClassName:Pge(e),...Nge(e)}),Ege=/\s+/,Ige=(e,t)=>{const{parseClassName:r,getClassGroupId:s,getConflictingClassGroupIds:a}=t,i=[],o=e.trim().split(Ege);let l="";for(let c=o.length-1;c>=0;c-=1){const d=o[c],{modifiers:u,hasImportantModifier:f,baseClassName:h,maybePostfixModifierPosition:m}=r(d);let g=!!m,x=s(g?h.substring(0,m):h);if(!x){if(!g){l=d+(l.length>0?" "+l:l);continue}if(x=s(h),!x){l=d+(l.length>0?" "+l:l);continue}g=!1}const y=Tge(u).join(":"),v=f?y+wQ:y,b=v+x;if(i.includes(b))continue;i.push(b);const w=a(x,g);for(let N=0;N<w.length;++N){const j=w[N];i.push(v+j)}l=d+(l.length>0?" "+l:l)}return l};function Lge(){let e=0,t,r,s="";for(;e<arguments.length;)(t=arguments[e++])&&(r=jQ(t))&&(s&&(s+=" "),s+=r);return s}const jQ=e=>{if(typeof e=="string")return e;let t,r="";for(let s=0;s<e.length;s++)e[s]&&(t=jQ(e[s]))&&(r&&(r+=" "),r+=t);return r};function Dge(e,...t){let r,s,a,i=o;function o(c){const d=t.reduce((u,f)=>f(u),e());return r=Age(d),s=r.cache.get,a=r.cache.set,i=l,l(c)}function l(c){const d=s(c);if(d)return d;const u=Ige(c,r);return a(c,u),u}return function(){return i(Lge.apply(null,arguments))}}const gr=e=>{const t=r=>r[e]||[];return t.isThemeGetter=!0,t},NQ=/^\[(?:([a-z-]+):)?(.+)\]$/i,$ge=/^\d+\/\d+$/,Oge=new Set(["px","full","screen"]),Rge=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Fge=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,zge=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Bge=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Uge=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,uc=e=>Dm(e)||Oge.has(e)||$ge.test(e),wd=e=>I0(e,"length",Kge),Dm=e=>!!e&&!Number.isNaN(Number(e)),zS=e=>I0(e,"number",Dm),Sg=e=>!!e&&Number.isInteger(Number(e)),Vge=e=>e.endsWith("%")&&Dm(e.slice(0,-1)),pn=e=>NQ.test(e),jd=e=>Rge.test(e),Hge=new Set(["length","size","percentage"]),Wge=e=>I0(e,Hge,SQ),qge=e=>I0(e,"position",SQ),Gge=new Set(["image","url"]),Yge=e=>I0(e,Gge,Zge),Qge=e=>I0(e,"",Jge),Cg=()=>!0,I0=(e,t,r)=>{const s=NQ.exec(e);return s?s[1]?typeof t=="string"?s[1]===t:t.has(s[1]):r(s[2]):!1},Kge=e=>Fge.test(e)&&!zge.test(e),SQ=()=>!1,Jge=e=>Bge.test(e),Zge=e=>Uge.test(e),Xge=()=>{const e=gr("colors"),t=gr("spacing"),r=gr("blur"),s=gr("brightness"),a=gr("borderColor"),i=gr("borderRadius"),o=gr("borderSpacing"),l=gr("borderWidth"),c=gr("contrast"),d=gr("grayscale"),u=gr("hueRotate"),f=gr("invert"),h=gr("gap"),m=gr("gradientColorStops"),g=gr("gradientColorStopPositions"),x=gr("inset"),y=gr("margin"),v=gr("opacity"),b=gr("padding"),w=gr("saturate"),N=gr("scale"),j=gr("sepia"),S=gr("skew"),C=gr("space"),k=gr("translate"),M=()=>["auto","contain","none"],A=()=>["auto","hidden","clip","visible","scroll"],P=()=>["auto",pn,t],T=()=>[pn,t],I=()=>["",uc,wd],L=()=>["auto",Dm,pn],R=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],G=()=>["solid","dashed","dotted","double","none"],$=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],D=()=>["start","end","center","between","around","evenly","stretch"],W=()=>["","0",pn],E=()=>["auto","avoid","all","avoid-page","page","left","right","column"],F=()=>[Dm,pn];return{cacheSize:500,separator:":",theme:{colors:[Cg],spacing:[uc,wd],blur:["none","",jd,pn],brightness:F(),borderColor:[e],borderRadius:["none","","full",jd,pn],borderSpacing:T(),borderWidth:I(),contrast:F(),grayscale:W(),hueRotate:F(),invert:W(),gap:T(),gradientColorStops:[e],gradientColorStopPositions:[Vge,wd],inset:P(),margin:P(),opacity:F(),padding:T(),saturate:F(),scale:F(),sepia:W(),skew:F(),space:T(),translate:T()},classGroups:{aspect:[{aspect:["auto","square","video",pn]}],container:["container"],columns:[{columns:[jd]}],"break-after":[{"break-after":E()}],"break-before":[{"break-before":E()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...R(),pn]}],overflow:[{overflow:A()}],"overflow-x":[{"overflow-x":A()}],"overflow-y":[{"overflow-y":A()}],overscroll:[{overscroll:M()}],"overscroll-x":[{"overscroll-x":M()}],"overscroll-y":[{"overscroll-y":M()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[x]}],"inset-x":[{"inset-x":[x]}],"inset-y":[{"inset-y":[x]}],start:[{start:[x]}],end:[{end:[x]}],top:[{top:[x]}],right:[{right:[x]}],bottom:[{bottom:[x]}],left:[{left:[x]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Sg,pn]}],basis:[{basis:P()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",pn]}],grow:[{grow:W()}],shrink:[{shrink:W()}],order:[{order:["first","last","none",Sg,pn]}],"grid-cols":[{"grid-cols":[Cg]}],"col-start-end":[{col:["auto",{span:["full",Sg,pn]},pn]}],"col-start":[{"col-start":L()}],"col-end":[{"col-end":L()}],"grid-rows":[{"grid-rows":[Cg]}],"row-start-end":[{row:["auto",{span:[Sg,pn]},pn]}],"row-start":[{"row-start":L()}],"row-end":[{"row-end":L()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",pn]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",pn]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal",...D()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...D(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...D(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[b]}],px:[{px:[b]}],py:[{py:[b]}],ps:[{ps:[b]}],pe:[{pe:[b]}],pt:[{pt:[b]}],pr:[{pr:[b]}],pb:[{pb:[b]}],pl:[{pl:[b]}],m:[{m:[y]}],mx:[{mx:[y]}],my:[{my:[y]}],ms:[{ms:[y]}],me:[{me:[y]}],mt:[{mt:[y]}],mr:[{mr:[y]}],mb:[{mb:[y]}],ml:[{ml:[y]}],"space-x":[{"space-x":[C]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[C]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",pn,t]}],"min-w":[{"min-w":[pn,t,"min","max","fit"]}],"max-w":[{"max-w":[pn,t,"none","full","min","max","fit","prose",{screen:[jd]},jd]}],h:[{h:[pn,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[pn,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[pn,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[pn,t,"auto","min","max","fit"]}],"font-size":[{text:["base",jd,wd]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",zS]}],"font-family":[{font:[Cg]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",pn]}],"line-clamp":[{"line-clamp":["none",Dm,zS]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",uc,pn]}],"list-image":[{"list-image":["none",pn]}],"list-style-type":[{list:["none","disc","decimal",pn]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[v]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[v]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...G(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",uc,wd]}],"underline-offset":[{"underline-offset":["auto",uc,pn]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:T()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",pn]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",pn]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[v]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...R(),qge]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Wge]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Yge]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[g]}],"gradient-via-pos":[{via:[g]}],"gradient-to-pos":[{to:[g]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[v]}],"border-style":[{border:[...G(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[v]}],"divide-style":[{divide:G()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["",...G()]}],"outline-offset":[{"outline-offset":[uc,pn]}],"outline-w":[{outline:[uc,wd]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:I()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[v]}],"ring-offset-w":[{"ring-offset":[uc,wd]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",jd,Qge]}],"shadow-color":[{shadow:[Cg]}],opacity:[{opacity:[v]}],"mix-blend":[{"mix-blend":[...$(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":$()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[s]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",jd,pn]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[f]}],saturate:[{saturate:[w]}],sepia:[{sepia:[j]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[s]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[v]}],"backdrop-saturate":[{"backdrop-saturate":[w]}],"backdrop-sepia":[{"backdrop-sepia":[j]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",pn]}],duration:[{duration:F()}],ease:[{ease:["linear","in","out","in-out",pn]}],delay:[{delay:F()}],animate:[{animate:["none","spin","ping","pulse","bounce",pn]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[N]}],"scale-x":[{"scale-x":[N]}],"scale-y":[{"scale-y":[N]}],rotate:[{rotate:[Sg,pn]}],"translate-x":[{"translate-x":[k]}],"translate-y":[{"translate-y":[k]}],"skew-x":[{"skew-x":[S]}],"skew-y":[{"skew-y":[S]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",pn]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",pn]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":T()}],"scroll-mx":[{"scroll-mx":T()}],"scroll-my":[{"scroll-my":T()}],"scroll-ms":[{"scroll-ms":T()}],"scroll-me":[{"scroll-me":T()}],"scroll-mt":[{"scroll-mt":T()}],"scroll-mr":[{"scroll-mr":T()}],"scroll-mb":[{"scroll-mb":T()}],"scroll-ml":[{"scroll-ml":T()}],"scroll-p":[{"scroll-p":T()}],"scroll-px":[{"scroll-px":T()}],"scroll-py":[{"scroll-py":T()}],"scroll-ps":[{"scroll-ps":T()}],"scroll-pe":[{"scroll-pe":T()}],"scroll-pt":[{"scroll-pt":T()}],"scroll-pr":[{"scroll-pr":T()}],"scroll-pb":[{"scroll-pb":T()}],"scroll-pl":[{"scroll-pl":T()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",pn]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[uc,wd,zS]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},exe=Dge(Xge);function Le(...e){return exe(mn(e))}const txe=A0e,CQ=p.forwardRef(({className:e,...t},r)=>n.jsx(GY,{ref:r,className:Le("fixed top-0 right-0 z-[100] flex max-h-screen w-full flex-col p-4 md:max-w-[420px]",e),...t}));CQ.displayName=GY.displayName;const nxe=P0("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),kQ=p.forwardRef(({className:e,variant:t,...r},s)=>n.jsx(YY,{ref:s,className:Le(nxe({variant:t}),e),...r}));kQ.displayName=YY.displayName;const oT=p.forwardRef(({className:e,...t},r)=>n.jsx(JY,{ref:r,className:Le("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));oT.displayName=JY.displayName;const MQ=p.forwardRef(({className:e,...t},r)=>n.jsx(ZY,{ref:r,className:Le("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:n.jsx(Jr,{className:"h-4 w-4"})}));MQ.displayName=ZY.displayName;const _Q=p.forwardRef(({className:e,...t},r)=>n.jsx(QY,{ref:r,className:Le("text-sm font-semibold",e),...t}));_Q.displayName=QY.displayName;const PQ=p.forwardRef(({className:e,...t},r)=>n.jsx(KY,{ref:r,className:Le("text-sm opacity-90",e),...t}));PQ.displayName=KY.displayName;function rxe(){const{toasts:e}=Ee();return n.jsxs(txe,{children:[e.map(function({id:t,title:r,description:s,action:a,...i}){return n.jsxs(kQ,{...i,"data-testid":"toast-notification",children:[n.jsxs("div",{className:"grid gap-1",children:[r&&n.jsx(_Q,{"data-testid":"toast-title",children:r}),s&&n.jsx(PQ,{"data-testid":"toast-description",children:s})]}),a,n.jsx(MQ,{})]},t)}),n.jsx(CQ,{})]})}function sxe(){const[e]=zt();p.useEffect(()=>{document.activeElement instanceof HTMLElement&&document.activeElement.blur()},[e]),p.useEffect(()=>{const t=r=>{const s=r.target;if(s&&s.tagName!=="INPUT"&&s.tagName!=="TEXTAREA"&&!s.closest("input")&&!s.closest("textarea")&&document.activeElement instanceof HTMLElement){const a=document.activeElement;(a.tagName==="INPUT"||a.tagName==="TEXTAREA")&&a.blur()}};return document.addEventListener("mousedown",t),document.addEventListener("touchstart",t),()=>{document.removeEventListener("mousedown",t),document.removeEventListener("touchstart",t)}},[]),p.useEffect(()=>{const t=()=>{setTimeout(()=>{document.activeElement instanceof HTMLElement&&document.activeElement.blur()},100)};return document.addEventListener("submit",t),()=>{document.removeEventListener("submit",t)}},[]),p.useEffect(()=>{const t=()=>{if(document.activeElement instanceof HTMLElement){const s=document.activeElement;(s.tagName==="INPUT"||s.tagName==="TEXTAREA")&&s.blur()}},r=new MutationObserver(s=>{s.forEach(a=>{a.type==="attributes"&&a.attributeName==="data-state"&&a.target.getAttribute("data-state")==="open"&&t()})});return r.observe(document.body,{attributes:!0,subtree:!0,attributeFilter:["data-state"]}),()=>{r.disconnect()}},[])}const TQ=p.createContext(null);function lT(){const e=p.useContext(TQ);if(!e)throw new Error("usePwa must be used within PwaProvider");return e}function axe({children:e}){const[t,r]=p.useState(navigator.onLine),[s,a]=p.useState(!1),[i,o]=p.useState(!1),[l,c]=p.useState(null),[d,u]=p.useState(0);p.useEffect(()=>{const b=()=>{const w=window.matchMedia("(display-mode: standalone)").matches,N=window.navigator.standalone===!0;o(w||N)};return b(),window.matchMedia("(display-mode: standalone)").addEventListener("change",b),()=>{window.matchMedia("(display-mode: standalone)").removeEventListener("change",b)}},[]),p.useEffect(()=>{const b=()=>{r(!0),console.log("[PWA] App is online"),"serviceWorker"in navigator&&"SyncManager"in window&&navigator.serviceWorker.ready.then(N=>{N.sync.register("sync-mutations").catch(j=>{console.error("[PWA] Failed to register sync:",j)})})},w=()=>{r(!1),console.log("[PWA] App is offline")};return window.addEventListener("online",b),window.addEventListener("offline",w),()=>{window.removeEventListener("online",b),window.removeEventListener("offline",w)}},[]),p.useEffect(()=>{const b=w=>{w.preventDefault(),c(w),a(!0),console.log("[PWA] Install prompt available")};return window.addEventListener("beforeinstallprompt",b),()=>{window.removeEventListener("beforeinstallprompt",b)}},[]),p.useEffect(()=>{const b=()=>{console.log("[PWA] App installed successfully"),o(!0),a(!1),c(null)};return window.addEventListener("appinstalled",b),()=>{window.removeEventListener("appinstalled",b)}},[]);const f=async()=>{if(!l){console.log("[PWA] No install prompt available");return}l.prompt();const{outcome:b}=await l.userChoice;console.log(`[PWA] User ${b==="accepted"?"accepted":"dismissed"} install prompt`),b==="accepted"&&(a(!1),c(null))},h=async b=>{if(!navigator.share)throw new Error("Web Share API not supported");try{await navigator.share(b),console.log("[PWA] Content shared successfully")}catch(w){if(w.name!=="AbortError")throw console.error("[PWA] Share failed:",w),w}},m=b=>{u(b),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(w=>{var N;(N=w.active)==null||N.postMessage({type:"SET_BADGE",count:b})})},g=()=>{m(0)},x=b=>{"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(w=>{var N;(N=w.active)==null||N.postMessage({type:"QUEUE_MUTATION",data:b})})},y=async()=>{if(!navigator.storage||!navigator.storage.persist)return console.warn("[PWA] Persistent storage not supported"),!1;if(await navigator.storage.persisted())return console.log("[PWA] Storage is already persistent"),!0;const w=await navigator.storage.persist();return console.log(`[PWA] Persistent storage ${w?"granted":"denied"}`),w},v={isOnline:t,isInstallable:s,isInstalled:i,canShare:typeof navigator.share<"u",unreadCount:d,promptInstall:f,shareContent:h,updateBadge:m,clearBadge:g,queueMutation:x,requestPersistentStorage:y};return n.jsx(TQ.Provider,{value:v,children:e})}const $m=[{id:"modern-dark",name:"Modern Dark",description:"Sleek dark theme with purple accents",preview:{primary:"#8b5cf6",secondary:"#6366f1",accent:"#a78bfa",background:"#0f172a",surface:"#1e293b",text:"#f1f5f9"},cssVariables:{background:"222.2 84% 4.9%",foreground:"210 40% 98%",card:"222.2 84% 4.9%",cardForeground:"210 40% 98%",popover:"222.2 84% 4.9%",popoverForeground:"210 40% 98%",primary:"263.4 70% 50.4%",primaryForeground:"210 40% 98%",secondary:"217.2 91.2% 59.8%",secondaryForeground:"222.2 47.4% 11.2%",muted:"217.2 32.6% 17.5%",mutedForeground:"215 20.2% 65.1%",accent:"262.1 83.3% 57.8%",accentForeground:"210 40% 98%",destructive:"0 62.8% 30.6%",destructiveForeground:"210 40% 98%",border:"217.2 32.6% 17.5%",input:"217.2 32.6% 17.5%",ring:"263.4 70% 50.4%"}},{id:"ocean-blue",name:"Ocean Blue",description:"Cool, calming blue tones",preview:{primary:"#0ea5e9",secondary:"#06b6d4",accent:"#22d3ee",background:"#0c4a6e",surface:"#075985",text:"#f0f9ff"},cssVariables:{background:"201 90% 27.5%",foreground:"199 89% 48%",card:"201 96% 32%",cardForeground:"199 89% 48%",popover:"201 90% 27.5%",popoverForeground:"199 89% 48%",primary:"199 89% 48%",primaryForeground:"201 96% 32%",secondary:"188 94% 43%",secondaryForeground:"201 96% 32%",muted:"201 60% 20%",mutedForeground:"199 50% 70%",accent:"186 94% 53%",accentForeground:"201 96% 32%",destructive:"0 84.2% 60.2%",destructiveForeground:"210 40% 98%",border:"201 60% 20%",input:"201 60% 20%",ring:"199 89% 48%"}},{id:"sunset-warm",name:"Sunset Warm",description:"Warm sunset-inspired colors",preview:{primary:"#f59e0b",secondary:"#f97316",accent:"#fb923c",background:"#7c2d12",surface:"#9a3412",text:"#fff7ed"},cssVariables:{background:"24 74% 28%",foreground:"33 100% 96.5%",card:"20 87% 33%",cardForeground:"33 100% 96.5%",popover:"24 74% 28%",popoverForeground:"33 100% 96.5%",primary:"38 92% 50%",primaryForeground:"24 74% 28%",secondary:"25 95% 53%",secondaryForeground:"24 74% 28%",muted:"24 50% 20%",mutedForeground:"33 80% 75%",accent:"27 96% 61%",accentForeground:"24 74% 28%",destructive:"0 84.2% 60.2%",destructiveForeground:"210 40% 98%",border:"24 50% 20%",input:"24 50% 20%",ring:"38 92% 50%"}},{id:"forest-green",name:"Forest Green",description:"Natural, earthy green palette",preview:{primary:"#10b981",secondary:"#14b8a6",accent:"#34d399",background:"#064e3b",surface:"#065f46",text:"#ecfdf5"},cssVariables:{background:"164 88% 17%",foreground:"151 81% 95.9%",card:"162 88% 20%",cardForeground:"151 81% 95.9%",popover:"164 88% 17%",popoverForeground:"151 81% 95.9%",primary:"160 84% 39%",primaryForeground:"164 88% 17%",secondary:"172 66% 50%",secondaryForeground:"164 88% 17%",muted:"164 60% 13%",mutedForeground:"151 60% 70%",accent:"158 64% 52%",accentForeground:"164 88% 17%",destructive:"0 84.2% 60.2%",destructiveForeground:"210 40% 98%",border:"164 60% 13%",input:"164 60% 13%",ring:"160 84% 39%"}},{id:"professional-slate",name:"Professional Slate",description:"Sophisticated slate gray",preview:{primary:"#64748b",secondary:"#475569",accent:"#94a3b8",background:"#0f172a",surface:"#1e293b",text:"#f1f5f9"},cssVariables:{background:"222.2 47.4% 11.2%",foreground:"210 40% 98%",card:"217.2 32.6% 17.5%",cardForeground:"210 40% 98%",popover:"222.2 47.4% 11.2%",popoverForeground:"210 40% 98%",primary:"215.4 16.3% 46.9%",primaryForeground:"210 40% 98%",secondary:"215 19% 35%",secondaryForeground:"210 40% 98%",muted:"217.2 32.6% 17.5%",mutedForeground:"215 20.2% 65.1%",accent:"215 20% 65%",accentForeground:"222.2 47.4% 11.2%",destructive:"0 62.8% 30.6%",destructiveForeground:"210 40% 98%",border:"217.2 32.6% 17.5%",input:"217.2 32.6% 17.5%",ring:"215.4 16.3% 46.9%"}},{id:"clean-light",name:"Clean Light",description:"Bright, minimalist light theme",preview:{primary:"#3b82f6",secondary:"#6366f1",accent:"#8b5cf6",background:"#ffffff",surface:"#f8fafc",text:"#0f172a"},cssVariables:{background:"0 0% 100%",foreground:"222.2 84% 4.9%",card:"0 0% 100%",cardForeground:"222.2 84% 4.9%",popover:"0 0% 100%",popoverForeground:"222.2 84% 4.9%",primary:"217.2 91.2% 59.8%",primaryForeground:"0 0% 100%",secondary:"243.8 75.4% 58.6%",secondaryForeground:"0 0% 100%",muted:"210 40% 96.1%",mutedForeground:"215.4 16.3% 46.9%",accent:"263.4 70% 50.4%",accentForeground:"0 0% 100%",destructive:"0 84.2% 60.2%",destructiveForeground:"210 40% 98%",border:"214.3 31.8% 91.4%",input:"214.3 31.8% 91.4%",ring:"217.2 91.2% 59.8%"}}];function uD(e){return $m.find(t=>t.id===e)}const AQ=p.createContext(void 0);function ixe({children:e}){const[t,r]=p.useState(()=>{if(typeof window>"u")return!1;const c=localStorage.getItem("theme");return c?c==="dark":window.matchMedia("(prefers-color-scheme: dark)").matches}),[s,a]=p.useState(()=>{if(typeof window>"u")return $m[0];const c=localStorage.getItem("dashboard-theme");return uD(c||"modern-dark")||$m[0]});p.useEffect(()=>{if(typeof window>"u")return;const c=document.documentElement;t?(c.classList.add("dark"),localStorage.setItem("theme","dark")):(c.classList.remove("dark"),localStorage.setItem("theme","light"))},[t]),p.useEffect(()=>{if(typeof window>"u")return;const c=document.documentElement;Object.entries(s.cssVariables).forEach(([d,u])=>{c.style.setProperty(`--${d}`,u)})},[s]);const i=()=>r(c=>!c),o=c=>r(c),l=c=>{const d=uD(c);d&&(a(d),localStorage.setItem("dashboard-theme",c))};return n.jsx(AQ.Provider,{value:{isDark:t,toggleTheme:i,setTheme:o,dashboardTheme:s,setDashboardTheme:l},children:e})}function EQ(){const e=p.useContext(AQ);if(!e)throw new Error("useTheme must be used within ThemeProvider");return e}const O=p.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:Le("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));O.displayName="Card";const ee=p.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:Le("flex flex-col space-y-1.5 p-6",e),...t}));ee.displayName="CardHeader";const te=p.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:Le("text-2xl font-semibold leading-none tracking-tight",e),...t}));te.displayName="CardTitle";const ke=p.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:Le("text-sm text-muted-foreground",e),...t}));ke.displayName="CardDescription";const H=p.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:Le("p-6 pt-0",e),...t}));H.displayName="CardContent";const sl=p.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:Le("flex items-center p-6 pt-0",e),...t}));sl.displayName="CardFooter";function oxe(){return n.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-50",children:n.jsx(O,{className:"w-full max-w-md mx-4",children:n.jsxs(H,{className:"pt-6",children:[n.jsxs("div",{className:"flex mb-4 gap-2",children:[n.jsx(Wt,{className:"h-8 w-8 text-red-500"}),n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"404 Page Not Found"})]}),n.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"Did you forget to add the page to the router?"})]})})})}function lxe(e){if(typeof Proxy>"u")return e;const t=new Map,r=(...s)=>e(...s);return new Proxy(r,{get:(s,a)=>a==="create"?e:(t.has(a)||t.set(a,e(a)),t.get(a))})}function GN(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const z6=e=>Array.isArray(e);function IQ(e,t){if(!Array.isArray(t))return!1;const r=t.length;if(r!==e.length)return!1;for(let s=0;s<r;s++)if(t[s]!==e[s])return!1;return!0}function hy(e){return typeof e=="string"||Array.isArray(e)}function fD(e){const t=[{},{}];return e==null||e.values.forEach((r,s)=>{t[0][s]=r.get(),t[1][s]=r.getVelocity()}),t}function cT(e,t,r,s){if(typeof t=="function"){const[a,i]=fD(s);t=t(r!==void 0?r:e.custom,a,i)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[a,i]=fD(s);t=t(r!==void 0?r:e.custom,a,i)}return t}function YN(e,t,r){const s=e.getProps();return cT(s,t,r!==void 0?r:s.custom,e)}const dT=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],uT=["initial",...dT],Xv=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Sh=new Set(Xv),$c=e=>e*1e3,Oc=e=>e/1e3,cxe={type:"spring",stiffness:500,damping:25,restSpeed:10},dxe=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),uxe={type:"keyframes",duration:.8},fxe={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},hxe=(e,{keyframes:t})=>t.length>2?uxe:Sh.has(e)?e.startsWith("scale")?dxe(t[1]):cxe:fxe;function fT(e,t){return e?e[t]||e.default||e:void 0}const mxe={useManualTiming:!1},pxe=e=>e!==null;function QN(e,{repeat:t,repeatType:r="loop"},s){const a=e.filter(pxe),i=t&&r!=="loop"&&t%2===1?0:a.length-1;return!i||s===void 0?a[i]:s}const qs=e=>e;let gxe=qs,LQ=qs;function xxe(e){let t=new Set,r=new Set,s=!1,a=!1;const i=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function l(d){i.has(d)&&(c.schedule(d),e()),d(o)}const c={schedule:(d,u=!1,f=!1)=>{const m=f&&s?t:r;return u&&i.add(d),m.has(d)||m.add(d),d},cancel:d=>{r.delete(d),i.delete(d)},process:d=>{if(o=d,s){a=!0;return}s=!0,[t,r]=[r,t],r.clear(),t.forEach(l),s=!1,a&&(a=!1,c.process(d))}};return c}const hb=["read","resolveKeyframes","update","preRender","render","postRender"],yxe=40;function DQ(e,t){let r=!1,s=!0;const a={delta:0,timestamp:0,isProcessing:!1},i=()=>r=!0,o=hb.reduce((v,b)=>(v[b]=xxe(i),v),{}),{read:l,resolveKeyframes:c,update:d,preRender:u,render:f,postRender:h}=o,m=()=>{const v=performance.now();r=!1,a.delta=s?1e3/60:Math.max(Math.min(v-a.timestamp,yxe),1),a.timestamp=v,a.isProcessing=!0,l.process(a),c.process(a),d.process(a),u.process(a),f.process(a),h.process(a),a.isProcessing=!1,r&&t&&(s=!1,e(m))},g=()=>{r=!0,s=!0,a.isProcessing||e(m)};return{schedule:hb.reduce((v,b)=>{const w=o[b];return v[b]=(N,j=!1,S=!1)=>(r||g(),w.schedule(N,j,S)),v},{}),cancel:v=>{for(let b=0;b<hb.length;b++)o[hb[b]].cancel(v)},state:a,steps:o}}const{schedule:Tn,cancel:dl,state:Ms,steps:BS}=DQ(typeof requestAnimationFrame<"u"?requestAnimationFrame:qs,!0),$Q=(e,t,r)=>(((1-3*r+3*t)*e+(3*r-6*t))*e+3*t)*e,vxe=1e-7,bxe=12;function wxe(e,t,r,s,a){let i,o,l=0;do o=t+(r-t)/2,i=$Q(o,s,a)-e,i>0?r=o:t=o;while(Math.abs(i)>vxe&&++l<bxe);return o}function e1(e,t,r,s){if(e===t&&r===s)return qs;const a=i=>wxe(i,0,1,e,r);return i=>i===0||i===1?i:$Q(a(i),t,s)}const OQ=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,RQ=e=>t=>1-e(1-t),FQ=e1(.33,1.53,.69,.99),hT=RQ(FQ),zQ=OQ(hT),BQ=e=>(e*=2)<1?.5*hT(e):.5*(2-Math.pow(2,-10*(e-1))),mT=e=>1-Math.sin(Math.acos(e)),UQ=RQ(mT),VQ=OQ(mT),HQ=e=>/^0[^.\s]+$/u.test(e);function jxe(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||HQ(e):!0}const WQ=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e),qQ=e=>t=>typeof t=="string"&&t.startsWith(e),GQ=qQ("--"),Nxe=qQ("var(--"),pT=e=>Nxe(e)?Sxe.test(e.split("/*")[0].trim()):!1,Sxe=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Cxe=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function kxe(e){const t=Cxe.exec(e);if(!t)return[,];const[,r,s,a]=t;return[`--${r??s}`,a]}function YQ(e,t,r=1){const[s,a]=kxe(e);if(!s)return;const i=window.getComputedStyle(t).getPropertyValue(s);if(i){const o=i.trim();return WQ(o)?parseFloat(o):o}return pT(a)?YQ(a,t,r+1):a}const Zc=(e,t,r)=>r>t?t:r<e?e:r,L0={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},my={...L0,transform:e=>Zc(0,1,e)},mb={...L0,default:1},t1=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Cd=t1("deg"),Ul=t1("%"),Gt=t1("px"),Mxe=t1("vh"),_xe=t1("vw"),hD={...Ul,parse:e=>Ul.parse(e)/100,transform:e=>Ul.transform(e*100)},Pxe=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),mD=e=>e===L0||e===Gt,pD=(e,t)=>parseFloat(e.split(", ")[t]),gD=(e,t)=>(r,{transform:s})=>{if(s==="none"||!s)return 0;const a=s.match(/^matrix3d\((.+)\)$/u);if(a)return pD(a[1],t);{const i=s.match(/^matrix\((.+)\)$/u);return i?pD(i[1],e):0}},Txe=new Set(["x","y","z"]),Axe=Xv.filter(e=>!Txe.has(e));function Exe(e){const t=[];return Axe.forEach(r=>{const s=e.getValue(r);s!==void 0&&(t.push([r,s.get()]),s.set(r.startsWith("scale")?1:0))}),t}const Pp={width:({x:e},{paddingLeft:t="0",paddingRight:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),height:({y:e},{paddingTop:t="0",paddingBottom:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:gD(4,13),y:gD(5,14)};Pp.translateX=Pp.x;Pp.translateY=Pp.y;const QQ=e=>t=>t.test(e),Ixe={test:e=>e==="auto",parse:e=>e},KQ=[L0,Gt,Ul,Cd,_xe,Mxe,Ixe],xD=e=>KQ.find(QQ(e)),Rf=new Set;let B6=!1,U6=!1;function JQ(){if(U6){const e=Array.from(Rf).filter(s=>s.needsMeasurement),t=new Set(e.map(s=>s.element)),r=new Map;t.forEach(s=>{const a=Exe(s);a.length&&(r.set(s,a),s.render())}),e.forEach(s=>s.measureInitialState()),t.forEach(s=>{s.render();const a=r.get(s);a&&a.forEach(([i,o])=>{var l;(l=s.getValue(i))===null||l===void 0||l.set(o)})}),e.forEach(s=>s.measureEndState()),e.forEach(s=>{s.suspendedScrollY!==void 0&&window.scrollTo(0,s.suspendedScrollY)})}U6=!1,B6=!1,Rf.forEach(e=>e.complete()),Rf.clear()}function ZQ(){Rf.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(U6=!0)})}function Lxe(){ZQ(),JQ()}class gT{constructor(t,r,s,a,i,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...t],this.onComplete=r,this.name=s,this.motionValue=a,this.element=i,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Rf.add(this),B6||(B6=!0,Tn.read(ZQ),Tn.resolveKeyframes(JQ))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:r,element:s,motionValue:a}=this;for(let i=0;i<t.length;i++)if(t[i]===null)if(i===0){const o=a==null?void 0:a.get(),l=t[t.length-1];if(o!==void 0)t[0]=o;else if(s&&r){const c=s.readValue(r,l);c!=null&&(t[0]=c)}t[0]===void 0&&(t[0]=l),a&&o===void 0&&a.set(t[0])}else t[i]=t[i-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Rf.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Rf.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const jx=e=>Math.round(e*1e5)/1e5,xT=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Dxe(e){return e==null}const $xe=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,yT=(e,t)=>r=>!!(typeof r=="string"&&$xe.test(r)&&r.startsWith(e)||t&&!Dxe(r)&&Object.prototype.hasOwnProperty.call(r,t)),XQ=(e,t,r)=>s=>{if(typeof s!="string")return s;const[a,i,o,l]=s.match(xT);return{[e]:parseFloat(a),[t]:parseFloat(i),[r]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},Oxe=e=>Zc(0,255,e),US={...L0,transform:e=>Math.round(Oxe(e))},vf={test:yT("rgb","red"),parse:XQ("red","green","blue"),transform:({red:e,green:t,blue:r,alpha:s=1})=>"rgba("+US.transform(e)+", "+US.transform(t)+", "+US.transform(r)+", "+jx(my.transform(s))+")"};function Rxe(e){let t="",r="",s="",a="";return e.length>5?(t=e.substring(1,3),r=e.substring(3,5),s=e.substring(5,7),a=e.substring(7,9)):(t=e.substring(1,2),r=e.substring(2,3),s=e.substring(3,4),a=e.substring(4,5),t+=t,r+=r,s+=s,a+=a),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(s,16),alpha:a?parseInt(a,16)/255:1}}const V6={test:yT("#"),parse:Rxe,transform:vf.transform},xm={test:yT("hsl","hue"),parse:XQ("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:r,alpha:s=1})=>"hsla("+Math.round(e)+", "+Ul.transform(jx(t))+", "+Ul.transform(jx(r))+", "+jx(my.transform(s))+")"},ua={test:e=>vf.test(e)||V6.test(e)||xm.test(e),parse:e=>vf.test(e)?vf.parse(e):xm.test(e)?xm.parse(e):V6.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?vf.transform(e):xm.transform(e)},Fxe=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function zxe(e){var t,r;return isNaN(e)&&typeof e=="string"&&(((t=e.match(xT))===null||t===void 0?void 0:t.length)||0)+(((r=e.match(Fxe))===null||r===void 0?void 0:r.length)||0)>0}const eK="number",tK="color",Bxe="var",Uxe="var(",yD="${}",Vxe=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function py(e){const t=e.toString(),r=[],s={color:[],number:[],var:[]},a=[];let i=0;const l=t.replace(Vxe,c=>(ua.test(c)?(s.color.push(i),a.push(tK),r.push(ua.parse(c))):c.startsWith(Uxe)?(s.var.push(i),a.push(Bxe),r.push(c)):(s.number.push(i),a.push(eK),r.push(parseFloat(c))),++i,yD)).split(yD);return{values:r,split:l,indexes:s,types:a}}function nK(e){return py(e).values}function rK(e){const{split:t,types:r}=py(e),s=t.length;return a=>{let i="";for(let o=0;o<s;o++)if(i+=t[o],a[o]!==void 0){const l=r[o];l===eK?i+=jx(a[o]):l===tK?i+=ua.transform(a[o]):i+=a[o]}return i}}const Hxe=e=>typeof e=="number"?0:e;function Wxe(e){const t=nK(e);return rK(e)(t.map(Hxe))}const gu={test:zxe,parse:nK,createTransformer:rK,getAnimatableNone:Wxe},qxe=new Set(["brightness","contrast","saturate","opacity"]);function Gxe(e){const[t,r]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[s]=r.match(xT)||[];if(!s)return e;const a=r.replace(s,"");let i=qxe.has(t)?1:0;return s!==r&&(i*=100),t+"("+i+a+")"}const Yxe=/\b([a-z-]*)\(.*?\)/gu,H6={...gu,getAnimatableNone:e=>{const t=e.match(Yxe);return t?t.map(Gxe).join(" "):e}},Qxe={borderWidth:Gt,borderTopWidth:Gt,borderRightWidth:Gt,borderBottomWidth:Gt,borderLeftWidth:Gt,borderRadius:Gt,radius:Gt,borderTopLeftRadius:Gt,borderTopRightRadius:Gt,borderBottomRightRadius:Gt,borderBottomLeftRadius:Gt,width:Gt,maxWidth:Gt,height:Gt,maxHeight:Gt,top:Gt,right:Gt,bottom:Gt,left:Gt,padding:Gt,paddingTop:Gt,paddingRight:Gt,paddingBottom:Gt,paddingLeft:Gt,margin:Gt,marginTop:Gt,marginRight:Gt,marginBottom:Gt,marginLeft:Gt,backgroundPositionX:Gt,backgroundPositionY:Gt},Kxe={rotate:Cd,rotateX:Cd,rotateY:Cd,rotateZ:Cd,scale:mb,scaleX:mb,scaleY:mb,scaleZ:mb,skew:Cd,skewX:Cd,skewY:Cd,distance:Gt,translateX:Gt,translateY:Gt,translateZ:Gt,x:Gt,y:Gt,z:Gt,perspective:Gt,transformPerspective:Gt,opacity:my,originX:hD,originY:hD,originZ:Gt},vD={...L0,transform:Math.round},vT={...Qxe,...Kxe,zIndex:vD,size:Gt,fillOpacity:my,strokeOpacity:my,numOctaves:vD},Jxe={...vT,color:ua,backgroundColor:ua,outlineColor:ua,fill:ua,stroke:ua,borderColor:ua,borderTopColor:ua,borderRightColor:ua,borderBottomColor:ua,borderLeftColor:ua,filter:H6,WebkitFilter:H6},bT=e=>Jxe[e];function sK(e,t){let r=bT(e);return r!==H6&&(r=gu),r.getAnimatableNone?r.getAnimatableNone(t):void 0}const Zxe=new Set(["auto","none","0"]);function Xxe(e,t,r){let s=0,a;for(;s<e.length&&!a;){const i=e[s];typeof i=="string"&&!Zxe.has(i)&&py(i).values.length&&(a=e[s]),s++}if(a&&r)for(const i of t)e[i]=sK(r,a)}class aK extends gT{constructor(t,r,s,a,i){super(t,r,s,a,i,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:r,name:s}=this;if(!r||!r.current)return;super.readKeyframes();for(let c=0;c<t.length;c++){let d=t[c];if(typeof d=="string"&&(d=d.trim(),pT(d))){const u=YQ(d,r.current);u!==void 0&&(t[c]=u),c===t.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!Pxe.has(s)||t.length!==2)return;const[a,i]=t,o=xD(a),l=xD(i);if(o!==l)if(mD(o)&&mD(l))for(let c=0;c<t.length;c++){const d=t[c];typeof d=="string"&&(t[c]=parseFloat(d))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:r}=this,s=[];for(let a=0;a<t.length;a++)jxe(t[a])&&s.push(a);s.length&&Xxe(t,s,r)}measureInitialState(){const{element:t,unresolvedKeyframes:r,name:s}=this;if(!t||!t.current)return;s==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Pp[s](t.measureViewportBox(),window.getComputedStyle(t.current)),r[0]=this.measuredOrigin;const a=r[r.length-1];a!==void 0&&t.getValue(s,a).jump(a,!1)}measureEndState(){var t;const{element:r,name:s,unresolvedKeyframes:a}=this;if(!r||!r.current)return;const i=r.getValue(s);i&&i.jump(this.measuredOrigin,!1);const o=a.length-1,l=a[o];a[o]=Pp[s](r.measureViewportBox(),window.getComputedStyle(r.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),!((t=this.removedTransforms)===null||t===void 0)&&t.length&&this.removedTransforms.forEach(([c,d])=>{r.getValue(c).set(d)}),this.resolveNoneKeyframes()}}function wT(e){return typeof e=="function"}let gw;function eye(){gw=void 0}const Vl={now:()=>(gw===void 0&&Vl.set(Ms.isProcessing||mxe.useManualTiming?Ms.timestamp:performance.now()),gw),set:e=>{gw=e,queueMicrotask(eye)}},bD=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(gu.test(e)||e==="0")&&!e.startsWith("url("));function tye(e){const t=e[0];if(e.length===1)return!0;for(let r=0;r<e.length;r++)if(e[r]!==t)return!0}function nye(e,t,r,s){const a=e[0];if(a===null)return!1;if(t==="display"||t==="visibility")return!0;const i=e[e.length-1],o=bD(a,t),l=bD(i,t);return!o||!l?!1:tye(e)||(r==="spring"||wT(r))&&s}const rye=40;class iK{constructor({autoplay:t=!0,delay:r=0,type:s="keyframes",repeat:a=0,repeatDelay:i=0,repeatType:o="loop",...l}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Vl.now(),this.options={autoplay:t,delay:r,type:s,repeat:a,repeatDelay:i,repeatType:o,...l},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>rye?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&Lxe(),this._resolved}onKeyframesResolved(t,r){this.resolvedAt=Vl.now(),this.hasAttemptedResolve=!0;const{name:s,type:a,velocity:i,delay:o,onComplete:l,onUpdate:c,isGenerator:d}=this.options;if(!d&&!nye(t,s,a,i))if(o)this.options.duration=0;else{c==null||c(QN(t,this.options,r)),l==null||l(),this.resolveFinishedPromise();return}const u=this.initPlayback(t,r);u!==!1&&(this._resolved={keyframes:t,finalKeyframe:r,...u},this.onPostResolved())}onPostResolved(){}then(t,r){return this.currentFinishedPromise.then(t,r)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(t=>{this.resolveFinishedPromise=t})}}const rh=(e,t,r)=>{const s=t-e;return s===0?1:(r-e)/s},oK=(e,t,r=10)=>{let s="";const a=Math.max(Math.round(t/r),2);for(let i=0;i<a;i++)s+=e(rh(0,a-1,i))+", ";return`linear(${s.substring(0,s.length-2)})`};function jT(e,t){return t?e*(1e3/t):0}const sye=5;function lK(e,t,r){const s=Math.max(t-sye,0);return jT(r-e(s),t-s)}const Ur={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},VS=.001;function aye({duration:e=Ur.duration,bounce:t=Ur.bounce,velocity:r=Ur.velocity,mass:s=Ur.mass}){let a,i,o=1-t;o=Zc(Ur.minDamping,Ur.maxDamping,o),e=Zc(Ur.minDuration,Ur.maxDuration,Oc(e)),o<1?(a=d=>{const u=d*o,f=u*e,h=u-r,m=W6(d,o),g=Math.exp(-f);return VS-h/m*g},i=d=>{const f=d*o*e,h=f*r+r,m=Math.pow(o,2)*Math.pow(d,2)*e,g=Math.exp(-f),x=W6(Math.pow(d,2),o);return(-a(d)+VS>0?-1:1)*((h-m)*g)/x}):(a=d=>{const u=Math.exp(-d*e),f=(d-r)*e+1;return-VS+u*f},i=d=>{const u=Math.exp(-d*e),f=(r-d)*(e*e);return u*f});const l=5/e,c=oye(a,i,l);if(e=$c(e),isNaN(c))return{stiffness:Ur.stiffness,damping:Ur.damping,duration:e};{const d=Math.pow(c,2)*s;return{stiffness:d,damping:o*2*Math.sqrt(s*d),duration:e}}}const iye=12;function oye(e,t,r){let s=r;for(let a=1;a<iye;a++)s=s-e(s)/t(s);return s}function W6(e,t){return e*Math.sqrt(1-t*t)}const q6=2e4;function cK(e){let t=0;const r=50;let s=e.next(t);for(;!s.done&&t<q6;)t+=r,s=e.next(t);return t>=q6?1/0:t}const lye=["duration","bounce"],cye=["stiffness","damping","mass"];function wD(e,t){return t.some(r=>e[r]!==void 0)}function dye(e){let t={velocity:Ur.velocity,stiffness:Ur.stiffness,damping:Ur.damping,mass:Ur.mass,isResolvedFromDuration:!1,...e};if(!wD(e,cye)&&wD(e,lye))if(e.visualDuration){const r=e.visualDuration,s=2*Math.PI/(r*1.2),a=s*s,i=2*Zc(.05,1,1-e.bounce)*Math.sqrt(a);t={...t,mass:Ur.mass,stiffness:a,damping:i}}else{const r=aye(e);t={...t,...r,mass:Ur.mass},t.isResolvedFromDuration=!0}return t}function dK(e=Ur.visualDuration,t=Ur.bounce){const r=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:s,restDelta:a}=r;const i=r.keyframes[0],o=r.keyframes[r.keyframes.length-1],l={done:!1,value:i},{stiffness:c,damping:d,mass:u,duration:f,velocity:h,isResolvedFromDuration:m}=dye({...r,velocity:-Oc(r.velocity||0)}),g=h||0,x=d/(2*Math.sqrt(c*u)),y=o-i,v=Oc(Math.sqrt(c/u)),b=Math.abs(y)<5;s||(s=b?Ur.restSpeed.granular:Ur.restSpeed.default),a||(a=b?Ur.restDelta.granular:Ur.restDelta.default);let w;if(x<1){const j=W6(v,x);w=S=>{const C=Math.exp(-x*v*S);return o-C*((g+x*v*y)/j*Math.sin(j*S)+y*Math.cos(j*S))}}else if(x===1)w=j=>o-Math.exp(-v*j)*(y+(g+v*y)*j);else{const j=v*Math.sqrt(x*x-1);w=S=>{const C=Math.exp(-x*v*S),k=Math.min(j*S,300);return o-C*((g+x*v*y)*Math.sinh(k)+j*y*Math.cosh(k))/j}}const N={calculatedDuration:m&&f||null,next:j=>{const S=w(j);if(m)l.done=j>=f;else{let C=0;x<1&&(C=j===0?$c(g):lK(w,j,S));const k=Math.abs(C)<=s,M=Math.abs(o-S)<=a;l.done=k&&M}return l.value=l.done?o:S,l},toString:()=>{const j=Math.min(cK(N),q6),S=oK(C=>N.next(j*C).value,j,30);return j+"ms "+S}};return N}function jD({keyframes:e,velocity:t=0,power:r=.8,timeConstant:s=325,bounceDamping:a=10,bounceStiffness:i=500,modifyTarget:o,min:l,max:c,restDelta:d=.5,restSpeed:u}){const f=e[0],h={done:!1,value:f},m=k=>l!==void 0&&k<l||c!==void 0&&k>c,g=k=>l===void 0?c:c===void 0||Math.abs(l-k)<Math.abs(c-k)?l:c;let x=r*t;const y=f+x,v=o===void 0?y:o(y);v!==y&&(x=v-f);const b=k=>-x*Math.exp(-k/s),w=k=>v+b(k),N=k=>{const M=b(k),A=w(k);h.done=Math.abs(M)<=d,h.value=h.done?v:A};let j,S;const C=k=>{m(h.value)&&(j=k,S=dK({keyframes:[h.value,g(h.value)],velocity:lK(w,k,h.value),damping:a,stiffness:i,restDelta:d,restSpeed:u}))};return C(0),{calculatedDuration:null,next:k=>{let M=!1;return!S&&j===void 0&&(M=!0,N(k),C(k)),j!==void 0&&k>=j?S.next(k-j):(!M&&N(k),h)}}}const uye=e1(.42,0,1,1),fye=e1(0,0,.58,1),uK=e1(.42,0,.58,1),hye=e=>Array.isArray(e)&&typeof e[0]!="number",NT=e=>Array.isArray(e)&&typeof e[0]=="number",mye={linear:qs,easeIn:uye,easeInOut:uK,easeOut:fye,circIn:mT,circInOut:VQ,circOut:UQ,backIn:hT,backInOut:zQ,backOut:FQ,anticipate:BQ},ND=e=>{if(NT(e)){LQ(e.length===4);const[t,r,s,a]=e;return e1(t,r,s,a)}else if(typeof e=="string")return mye[e];return e},pye=(e,t)=>r=>t(e(r)),iu=(...e)=>e.reduce(pye),Pr=(e,t,r)=>e+(t-e)*r;function HS(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*6*r:r<1/2?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function gye({hue:e,saturation:t,lightness:r,alpha:s}){e/=360,t/=100,r/=100;let a=0,i=0,o=0;if(!t)a=i=o=r;else{const l=r<.5?r*(1+t):r+t-r*t,c=2*r-l;a=HS(c,l,e+1/3),i=HS(c,l,e),o=HS(c,l,e-1/3)}return{red:Math.round(a*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:s}}function xj(e,t){return r=>r>0?t:e}const WS=(e,t,r)=>{const s=e*e,a=r*(t*t-s)+s;return a<0?0:Math.sqrt(a)},xye=[V6,vf,xm],yye=e=>xye.find(t=>t.test(e));function SD(e){const t=yye(e);if(!t)return!1;let r=t.parse(e);return t===xm&&(r=gye(r)),r}const CD=(e,t)=>{const r=SD(e),s=SD(t);if(!r||!s)return xj(e,t);const a={...r};return i=>(a.red=WS(r.red,s.red,i),a.green=WS(r.green,s.green,i),a.blue=WS(r.blue,s.blue,i),a.alpha=Pr(r.alpha,s.alpha,i),vf.transform(a))},G6=new Set(["none","hidden"]);function vye(e,t){return G6.has(e)?r=>r<=0?e:t:r=>r>=1?t:e}function bye(e,t){return r=>Pr(e,t,r)}function ST(e){return typeof e=="number"?bye:typeof e=="string"?pT(e)?xj:ua.test(e)?CD:Nye:Array.isArray(e)?fK:typeof e=="object"?ua.test(e)?CD:wye:xj}function fK(e,t){const r=[...e],s=r.length,a=e.map((i,o)=>ST(i)(i,t[o]));return i=>{for(let o=0;o<s;o++)r[o]=a[o](i);return r}}function wye(e,t){const r={...e,...t},s={};for(const a in r)e[a]!==void 0&&t[a]!==void 0&&(s[a]=ST(e[a])(e[a],t[a]));return a=>{for(const i in s)r[i]=s[i](a);return r}}function jye(e,t){var r;const s=[],a={color:0,var:0,number:0};for(let i=0;i<t.values.length;i++){const o=t.types[i],l=e.indexes[o][a[o]],c=(r=e.values[l])!==null&&r!==void 0?r:0;s[i]=c,a[o]++}return s}const Nye=(e,t)=>{const r=gu.createTransformer(t),s=py(e),a=py(t);return s.indexes.var.length===a.indexes.var.length&&s.indexes.color.length===a.indexes.color.length&&s.indexes.number.length>=a.indexes.number.length?G6.has(e)&&!a.values.length||G6.has(t)&&!s.values.length?vye(e,t):iu(fK(jye(s,a),a.values),r):xj(e,t)};function hK(e,t,r){return typeof e=="number"&&typeof t=="number"&&typeof r=="number"?Pr(e,t,r):ST(e)(e,t)}function Sye(e,t,r){const s=[],a=r||hK,i=e.length-1;for(let o=0;o<i;o++){let l=a(e[o],e[o+1]);if(t){const c=Array.isArray(t)?t[o]||qs:t;l=iu(c,l)}s.push(l)}return s}function CT(e,t,{clamp:r=!0,ease:s,mixer:a}={}){const i=e.length;if(LQ(i===t.length),i===1)return()=>t[0];if(i===2&&e[0]===e[1])return()=>t[1];e[0]>e[i-1]&&(e=[...e].reverse(),t=[...t].reverse());const o=Sye(t,s,a),l=o.length,c=d=>{let u=0;if(l>1)for(;u<e.length-2&&!(d<e[u+1]);u++);const f=rh(e[u],e[u+1],d);return o[u](f)};return r?d=>c(Zc(e[0],e[i-1],d)):c}function Cye(e,t){const r=e[e.length-1];for(let s=1;s<=t;s++){const a=rh(0,t,s);e.push(Pr(r,1,a))}}function mK(e){const t=[0];return Cye(t,e.length-1),t}function kye(e,t){return e.map(r=>r*t)}function Mye(e,t){return e.map(()=>t||uK).splice(0,e.length-1)}function yj({duration:e=300,keyframes:t,times:r,ease:s="easeInOut"}){const a=hye(s)?s.map(ND):ND(s),i={done:!1,value:t[0]},o=kye(r&&r.length===t.length?r:mK(t),e),l=CT(o,t,{ease:Array.isArray(a)?a:Mye(t,a)});return{calculatedDuration:e,next:c=>(i.value=l(c),i.done=c>=e,i)}}const _ye=e=>{const t=({timestamp:r})=>e(r);return{start:()=>Tn.update(t,!0),stop:()=>dl(t),now:()=>Ms.isProcessing?Ms.timestamp:Vl.now()}},Pye={decay:jD,inertia:jD,tween:yj,keyframes:yj,spring:dK},Tye=e=>e/100;class KN extends iK{constructor(t){super(t),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:c}=this.options;c&&c()};const{name:r,motionValue:s,element:a,keyframes:i}=this.options,o=(a==null?void 0:a.KeyframeResolver)||gT,l=(c,d)=>this.onKeyframesResolved(c,d);this.resolver=new o(i,l,r,s,a),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(t){const{type:r="keyframes",repeat:s=0,repeatDelay:a=0,repeatType:i,velocity:o=0}=this.options,l=wT(r)?r:Pye[r]||yj;let c,d;l!==yj&&typeof t[0]!="number"&&(c=iu(Tye,hK(t[0],t[1])),t=[0,100]);const u=l({...this.options,keyframes:t});i==="mirror"&&(d=l({...this.options,keyframes:[...t].reverse(),velocity:-o})),u.calculatedDuration===null&&(u.calculatedDuration=cK(u));const{calculatedDuration:f}=u,h=f+a,m=h*(s+1)-a;return{generator:u,mirroredGenerator:d,mapPercentToKeyframes:c,calculatedDuration:f,resolvedDuration:h,totalDuration:m}}onPostResolved(){const{autoplay:t=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!t?this.pause():this.state=this.pendingPlayState}tick(t,r=!1){const{resolved:s}=this;if(!s){const{keyframes:k}=this.options;return{done:!0,value:k[k.length-1]}}const{finalKeyframe:a,generator:i,mirroredGenerator:o,mapPercentToKeyframes:l,keyframes:c,calculatedDuration:d,totalDuration:u,resolvedDuration:f}=s;if(this.startTime===null)return i.next(0);const{delay:h,repeat:m,repeatType:g,repeatDelay:x,onUpdate:y}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-u/this.speed,this.startTime)),r?this.currentTime=t:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(t-this.startTime)*this.speed;const v=this.currentTime-h*(this.speed>=0?1:-1),b=this.speed>=0?v<0:v>u;this.currentTime=Math.max(v,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=u);let w=this.currentTime,N=i;if(m){const k=Math.min(this.currentTime,u)/f;let M=Math.floor(k),A=k%1;!A&&k>=1&&(A=1),A===1&&M--,M=Math.min(M,m+1),!!(M%2)&&(g==="reverse"?(A=1-A,x&&(A-=x/f)):g==="mirror"&&(N=o)),w=Zc(0,1,A)*f}const j=b?{done:!1,value:c[0]}:N.next(w);l&&(j.value=l(j.value));let{done:S}=j;!b&&d!==null&&(S=this.speed>=0?this.currentTime>=u:this.currentTime<=0);const C=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&S);return C&&a!==void 0&&(j.value=QN(c,this.options,a)),y&&y(j.value),C&&this.finish(),j}get duration(){const{resolved:t}=this;return t?Oc(t.calculatedDuration):0}get time(){return Oc(this.currentTime)}set time(t){t=$c(t),this.currentTime=t,this.holdTime!==null||this.speed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.speed)}get speed(){return this.playbackSpeed}set speed(t){const r=this.playbackSpeed!==t;this.playbackSpeed=t,r&&(this.time=Oc(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:t=_ye,onPlay:r,startTime:s}=this.options;this.driver||(this.driver=t(i=>this.tick(i))),r&&r();const a=this.driver.now();this.holdTime!==null?this.startTime=a-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=a):this.startTime=s??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var t;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(t=this.currentTime)!==null&&t!==void 0?t:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:t}=this.options;t&&t()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}}function Aye(e){return new KN(e)}const Eye=new Set(["opacity","clipPath","filter","transform"]);function kT(e){let t;return()=>(t===void 0&&(t=e()),t)}const Iye={linearEasing:void 0};function Lye(e,t){const r=kT(e);return()=>{var s;return(s=Iye[t])!==null&&s!==void 0?s:r()}}const vj=Lye(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing");function pK(e){return!!(typeof e=="function"&&vj()||!e||typeof e=="string"&&(e in Y6||vj())||NT(e)||Array.isArray(e)&&e.every(pK))}const nx=([e,t,r,s])=>`cubic-bezier(${e}, ${t}, ${r}, ${s})`,Y6={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:nx([0,.65,.55,1]),circOut:nx([.55,0,1,.45]),backIn:nx([.31,.01,.66,-.59]),backOut:nx([.33,1.53,.69,.99])};function gK(e,t){if(e)return typeof e=="function"&&vj()?oK(e,t):NT(e)?nx(e):Array.isArray(e)?e.map(r=>gK(r,t)||Y6.easeOut):Y6[e]}function Dye(e,t,r,{delay:s=0,duration:a=300,repeat:i=0,repeatType:o="loop",ease:l="easeInOut",times:c}={}){const d={[t]:r};c&&(d.offset=c);const u=gK(l,a);return Array.isArray(u)&&(d.easing=u),e.animate(d,{delay:s,duration:a,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"})}function kD(e,t){e.timeline=t,e.onfinish=null}const $ye=kT(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),bj=10,Oye=2e4;function Rye(e){return wT(e.type)||e.type==="spring"||!pK(e.ease)}function Fye(e,t){const r=new KN({...t,keyframes:e,repeat:0,delay:0,isGenerator:!0});let s={done:!1,value:e[0]};const a=[];let i=0;for(;!s.done&&i<Oye;)s=r.sample(i),a.push(s.value),i+=bj;return{times:void 0,keyframes:a,duration:i-bj,ease:"linear"}}const xK={anticipate:BQ,backInOut:zQ,circInOut:VQ};function zye(e){return e in xK}class MD extends iK{constructor(t){super(t);const{name:r,motionValue:s,element:a,keyframes:i}=this.options;this.resolver=new aK(i,(o,l)=>this.onKeyframesResolved(o,l),r,s,a),this.resolver.scheduleResolve()}initPlayback(t,r){var s;let{duration:a=300,times:i,ease:o,type:l,motionValue:c,name:d,startTime:u}=this.options;if(!(!((s=c.owner)===null||s===void 0)&&s.current))return!1;if(typeof o=="string"&&vj()&&zye(o)&&(o=xK[o]),Rye(this.options)){const{onComplete:h,onUpdate:m,motionValue:g,element:x,...y}=this.options,v=Fye(t,y);t=v.keyframes,t.length===1&&(t[1]=t[0]),a=v.duration,i=v.times,o=v.ease,l="keyframes"}const f=Dye(c.owner.current,d,t,{...this.options,duration:a,times:i,ease:o});return f.startTime=u??this.calcStartTime(),this.pendingTimeline?(kD(f,this.pendingTimeline),this.pendingTimeline=void 0):f.onfinish=()=>{const{onComplete:h}=this.options;c.set(QN(t,this.options,r)),h&&h(),this.cancel(),this.resolveFinishedPromise()},{animation:f,duration:a,times:i,type:l,ease:o,keyframes:t}}get duration(){const{resolved:t}=this;if(!t)return 0;const{duration:r}=t;return Oc(r)}get time(){const{resolved:t}=this;if(!t)return 0;const{animation:r}=t;return Oc(r.currentTime||0)}set time(t){const{resolved:r}=this;if(!r)return;const{animation:s}=r;s.currentTime=$c(t)}get speed(){const{resolved:t}=this;if(!t)return 1;const{animation:r}=t;return r.playbackRate}set speed(t){const{resolved:r}=this;if(!r)return;const{animation:s}=r;s.playbackRate=t}get state(){const{resolved:t}=this;if(!t)return"idle";const{animation:r}=t;return r.playState}get startTime(){const{resolved:t}=this;if(!t)return null;const{animation:r}=t;return r.startTime}attachTimeline(t){if(!this._resolved)this.pendingTimeline=t;else{const{resolved:r}=this;if(!r)return qs;const{animation:s}=r;kD(s,t)}return qs}play(){if(this.isStopped)return;const{resolved:t}=this;if(!t)return;const{animation:r}=t;r.playState==="finished"&&this.updateFinishedPromise(),r.play()}pause(){const{resolved:t}=this;if(!t)return;const{animation:r}=t;r.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:t}=this;if(!t)return;const{animation:r,keyframes:s,duration:a,type:i,ease:o,times:l}=t;if(r.playState==="idle"||r.playState==="finished")return;if(this.time){const{motionValue:d,onUpdate:u,onComplete:f,element:h,...m}=this.options,g=new KN({...m,keyframes:s,duration:a,type:i,ease:o,times:l,isGenerator:!0}),x=$c(this.time);d.setWithVelocity(g.sample(x-bj).value,g.sample(x).value,bj)}const{onStop:c}=this.options;c&&c(),this.cancel()}complete(){const{resolved:t}=this;t&&t.animation.finish()}cancel(){const{resolved:t}=this;t&&t.animation.cancel()}static supports(t){const{motionValue:r,name:s,repeatDelay:a,repeatType:i,damping:o,type:l}=t;return $ye()&&s&&Eye.has(s)&&r&&r.owner&&r.owner.current instanceof HTMLElement&&!r.owner.getProps().onUpdate&&!a&&i!=="mirror"&&o!==0&&l!=="inertia"}}const yK=kT(()=>window.ScrollTimeline!==void 0);class Bye{constructor(t){this.stop=()=>this.runAll("stop"),this.animations=t.filter(Boolean)}then(t,r){return Promise.all(this.animations).then(t).catch(r)}getAll(t){return this.animations[0][t]}setAll(t,r){for(let s=0;s<this.animations.length;s++)this.animations[s][t]=r}attachTimeline(t,r){const s=this.animations.map(a=>yK()&&a.attachTimeline?a.attachTimeline(t):r(a));return()=>{s.forEach((a,i)=>{a&&a(),this.animations[i].stop()})}}get time(){return this.getAll("time")}set time(t){this.setAll("time",t)}get speed(){return this.getAll("speed")}set speed(t){this.setAll("speed",t)}get startTime(){return this.getAll("startTime")}get duration(){let t=0;for(let r=0;r<this.animations.length;r++)t=Math.max(t,this.animations[r].duration);return t}runAll(t){this.animations.forEach(r=>r[t]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}function Uye({when:e,delay:t,delayChildren:r,staggerChildren:s,staggerDirection:a,repeat:i,repeatType:o,repeatDelay:l,from:c,elapsed:d,...u}){return!!Object.keys(u).length}const MT=(e,t,r,s={},a,i)=>o=>{const l=fT(s,e)||{},c=l.delay||s.delay||0;let{elapsed:d=0}=s;d=d-$c(c);let u={keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:t.getVelocity(),...l,delay:-d,onUpdate:h=>{t.set(h),l.onUpdate&&l.onUpdate(h)},onComplete:()=>{o(),l.onComplete&&l.onComplete()},name:e,motionValue:t,element:i?void 0:a};Uye(l)||(u={...u,...hxe(e,u)}),u.duration&&(u.duration=$c(u.duration)),u.repeatDelay&&(u.repeatDelay=$c(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let f=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(u.duration=0,u.delay===0&&(f=!0)),f&&!i&&t.get()!==void 0){const h=QN(u.keyframes,l);if(h!==void 0)return Tn.update(()=>{u.onUpdate(h),u.onComplete()}),new Bye([])}return!i&&MD.supports(u)?new MD(u):new KN(u)},Vye=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),Hye=e=>z6(e)?e[e.length-1]||0:e;function _T(e,t){e.indexOf(t)===-1&&e.push(t)}function PT(e,t){const r=e.indexOf(t);r>-1&&e.splice(r,1)}function Wye([...e],t,r){const s=t<0?e.length+t:t;if(s>=0&&s<e.length){const a=r<0?e.length+r:r,[i]=e.splice(t,1);e.splice(a,0,i)}return e}let TT=class{constructor(){this.subscriptions=[]}add(t){return _T(this.subscriptions,t),()=>PT(this.subscriptions,t)}notify(t,r,s){const a=this.subscriptions.length;if(a)if(a===1)this.subscriptions[0](t,r,s);else for(let i=0;i<a;i++){const o=this.subscriptions[i];o&&o(t,r,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}};const _D=30,qye=e=>!isNaN(parseFloat(e)),Nx={current:void 0};class Gye{constructor(t,r={}){this.version="11.13.1",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(s,a=!0)=>{const i=Vl.now();this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(s),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),a&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(t),this.owner=r.owner}setCurrent(t){this.current=t,this.updatedAt=Vl.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=qye(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,r){this.events[t]||(this.events[t]=new TT);const s=this.events[t].add(r);return t==="change"?()=>{s(),Tn.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,r){this.passiveEffect=t,this.stopPassiveEffect=r}set(t,r=!0){!r||!this.passiveEffect?this.updateAndNotify(t,r):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,r,s){this.set(r),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-s}jump(t,r=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,r&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return Nx.current&&Nx.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const t=Vl.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>_D)return 0;const r=Math.min(this.updatedAt-this.prevUpdatedAt,_D);return jT(parseFloat(this.current)-parseFloat(this.prevFrameValue),r)}start(t){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=t(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function $l(e,t){return new Gye(e,t)}function Yye(e,t,r){e.hasValue(t)?e.getValue(t).set(r):e.addValue(t,$l(r))}function AT(e,t){const r=YN(e,t);let{transitionEnd:s={},transition:a={},...i}=r||{};i={...i,...s};for(const o in i){const l=Hye(i[o]);Yye(e,o,l)}}const ET=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Qye="framerAppearId",vK="data-"+ET(Qye);function bK(e){return e.props[vK]}const Ls=e=>!!(e&&e.getVelocity);function Kye(e){return!!(Ls(e)&&e.add)}function Q6(e,t){const r=e.getValue("willChange");if(Kye(r))return r.add(t)}function Jye({protectedKeys:e,needsAnimating:t},r){const s=e.hasOwnProperty(r)&&t[r]!==!0;return t[r]=!1,s}function wK(e,t,{delay:r=0,transitionOverride:s,type:a}={}){var i;let{transition:o=e.getDefaultTransition(),transitionEnd:l,...c}=t;s&&(o=s);const d=[],u=a&&e.animationState&&e.animationState.getState()[a];for(const f in c){const h=e.getValue(f,(i=e.latestValues[f])!==null&&i!==void 0?i:null),m=c[f];if(m===void 0||u&&Jye(u,f))continue;const g={delay:r,...fT(o||{},f)};let x=!1;if(window.MotionHandoffAnimation){const v=bK(e);if(v){const b=window.MotionHandoffAnimation(v,f,Tn);b!==null&&(g.startTime=b,x=!0)}}Q6(e,f),h.start(MT(f,h,m,e.shouldReduceMotion&&Sh.has(f)?{type:!1}:g,e,x));const y=h.animation;y&&d.push(y)}return l&&Promise.all(d).then(()=>{Tn.update(()=>{l&&AT(e,l)})}),d}function K6(e,t,r={}){var s;const a=YN(e,t,r.type==="exit"?(s=e.presenceContext)===null||s===void 0?void 0:s.custom:void 0);let{transition:i=e.getDefaultTransition()||{}}=a||{};r.transitionOverride&&(i=r.transitionOverride);const o=a?()=>Promise.all(wK(e,a,r)):()=>Promise.resolve(),l=e.variantChildren&&e.variantChildren.size?(d=0)=>{const{delayChildren:u=0,staggerChildren:f,staggerDirection:h}=i;return Zye(e,t,u+d,f,h,r)}:()=>Promise.resolve(),{when:c}=i;if(c){const[d,u]=c==="beforeChildren"?[o,l]:[l,o];return d().then(()=>u())}else return Promise.all([o(),l(r.delay)])}function Zye(e,t,r=0,s=0,a=1,i){const o=[],l=(e.variantChildren.size-1)*s,c=a===1?(d=0)=>d*s:(d=0)=>l-d*s;return Array.from(e.variantChildren).sort(Xye).forEach((d,u)=>{d.notify("AnimationStart",t),o.push(K6(d,t,{...i,delay:r+c(u)}).then(()=>d.notify("AnimationComplete",t)))}),Promise.all(o)}function Xye(e,t){return e.sortNodePosition(t)}function jK(e,t,r={}){e.notify("AnimationStart",t);let s;if(Array.isArray(t)){const a=t.map(i=>K6(e,i,r));s=Promise.all(a)}else if(typeof t=="string")s=K6(e,t,r);else{const a=typeof t=="function"?YN(e,t,r.custom):t;s=Promise.all(wK(e,a,r))}return s.then(()=>{e.notify("AnimationComplete",t)})}const eve=uT.length;function NK(e){if(!e)return;if(!e.isControllingVariants){const r=e.parent?NK(e.parent)||{}:{};return e.props.initial!==void 0&&(r.initial=e.props.initial),r}const t={};for(let r=0;r<eve;r++){const s=uT[r],a=e.props[s];(hy(a)||a===!1)&&(t[s]=a)}return t}const tve=[...dT].reverse(),nve=dT.length;function rve(e){return t=>Promise.all(t.map(({animation:r,options:s})=>jK(e,r,s)))}function sve(e){let t=rve(e),r=PD(),s=!0;const a=c=>(d,u)=>{var f;const h=YN(e,u,c==="exit"?(f=e.presenceContext)===null||f===void 0?void 0:f.custom:void 0);if(h){const{transition:m,transitionEnd:g,...x}=h;d={...d,...x,...g}}return d};function i(c){t=c(e)}function o(c){const{props:d}=e,u=NK(e.parent)||{},f=[],h=new Set;let m={},g=1/0;for(let y=0;y<nve;y++){const v=tve[y],b=r[v],w=d[v]!==void 0?d[v]:u[v],N=hy(w),j=v===c?b.isActive:null;j===!1&&(g=y);let S=w===u[v]&&w!==d[v]&&N;if(S&&s&&e.manuallyAnimateOnMount&&(S=!1),b.protectedKeys={...m},!b.isActive&&j===null||!w&&!b.prevProp||GN(w)||typeof w=="boolean")continue;const C=ave(b.prevProp,w);let k=C||v===c&&b.isActive&&!S&&N||y>g&&N,M=!1;const A=Array.isArray(w)?w:[w];let P=A.reduce(a(v),{});j===!1&&(P={});const{prevResolvedValues:T={}}=b,I={...T,...P},L=$=>{k=!0,h.has($)&&(M=!0,h.delete($)),b.needsAnimating[$]=!0;const D=e.getValue($);D&&(D.liveStyle=!1)};for(const $ in I){const D=P[$],W=T[$];if(m.hasOwnProperty($))continue;let E=!1;z6(D)&&z6(W)?E=!IQ(D,W):E=D!==W,E?D!=null?L($):h.add($):D!==void 0&&h.has($)?L($):b.protectedKeys[$]=!0}b.prevProp=w,b.prevResolvedValues=P,b.isActive&&(m={...m,...P}),s&&e.blockInitialAnimation&&(k=!1),k&&(!(S&&C)||M)&&f.push(...A.map($=>({animation:$,options:{type:v}})))}if(h.size){const y={};h.forEach(v=>{const b=e.getBaseTarget(v),w=e.getValue(v);w&&(w.liveStyle=!0),y[v]=b??null}),f.push({animation:y})}let x=!!f.length;return s&&(d.initial===!1||d.initial===d.animate)&&!e.manuallyAnimateOnMount&&(x=!1),s=!1,x?t(f):Promise.resolve()}function l(c,d){var u;if(r[c].isActive===d)return Promise.resolve();(u=e.variantChildren)===null||u===void 0||u.forEach(h=>{var m;return(m=h.animationState)===null||m===void 0?void 0:m.setActive(c,d)}),r[c].isActive=d;const f=o(c);for(const h in r)r[h].protectedKeys={};return f}return{animateChanges:o,setActive:l,setAnimateFunction:i,getState:()=>r,reset:()=>{r=PD(),s=!0}}}function ave(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!IQ(t,e):!1}function Qu(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function PD(){return{animate:Qu(!0),whileInView:Qu(),whileHover:Qu(),whileTap:Qu(),whileDrag:Qu(),whileFocus:Qu(),exit:Qu()}}class Du{constructor(t){this.isMounted=!1,this.node=t}update(){}}class ive extends Du{constructor(t){super(t),t.animationState||(t.animationState=sve(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();GN(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:r}=this.node.prevProps||{};t!==r&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)===null||t===void 0||t.call(this)}}let ove=0;class lve extends Du{constructor(){super(...arguments),this.id=ove++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:r}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===s)return;const a=this.node.animationState.setActive("exit",!t);r&&!t&&a.then(()=>r(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const cve={animation:{Feature:ive},exit:{Feature:lve}};function IT(e,t,r){var s;if(e instanceof Element)return[e];if(typeof e=="string"){let a=document;const i=(s=void 0)!==null&&s!==void 0?s:a.querySelectorAll(e);return i?Array.from(i):[]}return Array.from(e)}const Oo={x:!1,y:!1};function SK(){return Oo.x||Oo.y}function TD(e){return t=>{t.pointerType==="touch"||SK()||e(t)}}function dve(e,t,r={}){const s=new AbortController,a={passive:!0,...r,signal:s.signal},i=TD(o=>{const{target:l}=o,c=t(o);if(!c||!l)return;const d=TD(u=>{c(u),l.removeEventListener("pointerleave",d)});l.addEventListener("pointerleave",d,a)});return IT(e).forEach(o=>{o.addEventListener("pointerenter",i,a)}),()=>s.abort()}function uve(e){return e==="x"||e==="y"?Oo[e]?null:(Oo[e]=!0,()=>{Oo[e]=!1}):Oo.x||Oo.y?null:(Oo.x=Oo.y=!0,()=>{Oo.x=Oo.y=!1})}const CK=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function n1(e){return{point:{x:e.pageX,y:e.pageY}}}const fve=e=>t=>CK(t)&&e(t,n1(t));function Ac(e,t,r,s={passive:!0}){return e.addEventListener(t,r,s),()=>e.removeEventListener(t,r)}function ou(e,t,r,s){return Ac(e,t,fve(r),s)}const AD=(e,t)=>Math.abs(e-t);function hve(e,t){const r=AD(e.x,t.x),s=AD(e.y,t.y);return Math.sqrt(r**2+s**2)}class kK{constructor(t,r,{transformPagePoint:s,contextWindow:a,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=GS(this.lastMoveEventInfo,this.history),h=this.startEvent!==null,m=hve(f.offset,{x:0,y:0})>=3;if(!h&&!m)return;const{point:g}=f,{timestamp:x}=Ms;this.history.push({...g,timestamp:x});const{onStart:y,onMove:v}=this.handlers;h||(y&&y(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),v&&v(this.lastMoveEvent,f)},this.handlePointerMove=(f,h)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=qS(h,this.transformPagePoint),Tn.update(this.updatePoint,!0)},this.handlePointerUp=(f,h)=>{this.end();const{onEnd:m,onSessionEnd:g,resumeAnimation:x}=this.handlers;if(this.dragSnapToOrigin&&x&&x(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=GS(f.type==="pointercancel"?this.lastMoveEventInfo:qS(h,this.transformPagePoint),this.history);this.startEvent&&m&&m(f,y),g&&g(f,y)},!CK(t))return;this.dragSnapToOrigin=i,this.handlers=r,this.transformPagePoint=s,this.contextWindow=a||window;const o=n1(t),l=qS(o,this.transformPagePoint),{point:c}=l,{timestamp:d}=Ms;this.history=[{...c,timestamp:d}];const{onSessionStart:u}=r;u&&u(t,GS(l,this.history)),this.removeListeners=iu(ou(this.contextWindow,"pointermove",this.handlePointerMove),ou(this.contextWindow,"pointerup",this.handlePointerUp),ou(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),dl(this.updatePoint)}}function qS(e,t){return t?{point:t(e.point)}:e}function ED(e,t){return{x:e.x-t.x,y:e.y-t.y}}function GS({point:e},t){return{point:e,delta:ED(e,MK(t)),offset:ED(e,mve(t)),velocity:pve(t,.1)}}function mve(e){return e[0]}function MK(e){return e[e.length-1]}function pve(e,t){if(e.length<2)return{x:0,y:0};let r=e.length-1,s=null;const a=MK(e);for(;r>=0&&(s=e[r],!(a.timestamp-s.timestamp>$c(t)));)r--;if(!s)return{x:0,y:0};const i=Oc(a.timestamp-s.timestamp);if(i===0)return{x:0,y:0};const o={x:(a.x-s.x)/i,y:(a.y-s.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function ym(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}const _K=1e-4,gve=1-_K,xve=1+_K,PK=.01,yve=0-PK,vve=0+PK;function Hi(e){return e.max-e.min}function bve(e,t,r){return Math.abs(e-t)<=r}function ID(e,t,r,s=.5){e.origin=s,e.originPoint=Pr(t.min,t.max,e.origin),e.scale=Hi(r)/Hi(t),e.translate=Pr(r.min,r.max,e.origin)-e.originPoint,(e.scale>=gve&&e.scale<=xve||isNaN(e.scale))&&(e.scale=1),(e.translate>=yve&&e.translate<=vve||isNaN(e.translate))&&(e.translate=0)}function Sx(e,t,r,s){ID(e.x,t.x,r.x,s?s.originX:void 0),ID(e.y,t.y,r.y,s?s.originY:void 0)}function LD(e,t,r){e.min=r.min+t.min,e.max=e.min+Hi(t)}function wve(e,t,r){LD(e.x,t.x,r.x),LD(e.y,t.y,r.y)}function DD(e,t,r){e.min=t.min-r.min,e.max=e.min+Hi(t)}function Cx(e,t,r){DD(e.x,t.x,r.x),DD(e.y,t.y,r.y)}function jve(e,{min:t,max:r},s){return t!==void 0&&e<t?e=s?Pr(t,e,s.min):Math.max(e,t):r!==void 0&&e>r&&(e=s?Pr(r,e,s.max):Math.min(e,r)),e}function $D(e,t,r){return{min:t!==void 0?e.min+t:void 0,max:r!==void 0?e.max+r-(e.max-e.min):void 0}}function Nve(e,{top:t,left:r,bottom:s,right:a}){return{x:$D(e.x,r,a),y:$D(e.y,t,s)}}function OD(e,t){let r=t.min-e.min,s=t.max-e.max;return t.max-t.min<e.max-e.min&&([r,s]=[s,r]),{min:r,max:s}}function Sve(e,t){return{x:OD(e.x,t.x),y:OD(e.y,t.y)}}function Cve(e,t){let r=.5;const s=Hi(e),a=Hi(t);return a>s?r=rh(t.min,t.max-s,e.min):s>a&&(r=rh(e.min,e.max-a,t.min)),Zc(0,1,r)}function kve(e,t){const r={};return t.min!==void 0&&(r.min=t.min-e.min),t.max!==void 0&&(r.max=t.max-e.min),r}const J6=.35;function Mve(e=J6){return e===!1?e=0:e===!0&&(e=J6),{x:RD(e,"left","right"),y:RD(e,"top","bottom")}}function RD(e,t,r){return{min:FD(e,t),max:FD(e,r)}}function FD(e,t){return typeof e=="number"?e:e[t]||0}const zD=()=>({translate:0,scale:1,origin:0,originPoint:0}),vm=()=>({x:zD(),y:zD()}),BD=()=>({min:0,max:0}),ts=()=>({x:BD(),y:BD()});function ro(e){return[e("x"),e("y")]}function TK({top:e,left:t,right:r,bottom:s}){return{x:{min:t,max:r},y:{min:e,max:s}}}function _ve({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function Pve(e,t){if(!t)return e;const r=t({x:e.left,y:e.top}),s=t({x:e.right,y:e.bottom});return{top:r.y,left:r.x,bottom:s.y,right:s.x}}function YS(e){return e===void 0||e===1}function Z6({scale:e,scaleX:t,scaleY:r}){return!YS(e)||!YS(t)||!YS(r)}function rf(e){return Z6(e)||AK(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function AK(e){return UD(e.x)||UD(e.y)}function UD(e){return e&&e!=="0%"}function wj(e,t,r){const s=e-r,a=t*s;return r+a}function VD(e,t,r,s,a){return a!==void 0&&(e=wj(e,a,s)),wj(e,r,s)+t}function X6(e,t=0,r=1,s,a){e.min=VD(e.min,t,r,s,a),e.max=VD(e.max,t,r,s,a)}function EK(e,{x:t,y:r}){X6(e.x,t.translate,t.scale,t.originPoint),X6(e.y,r.translate,r.scale,r.originPoint)}const HD=.999999999999,WD=1.0000000000001;function Tve(e,t,r,s=!1){const a=r.length;if(!a)return;t.x=t.y=1;let i,o;for(let l=0;l<a;l++){i=r[l],o=i.projectionDelta;const{visualElement:c}=i.options;c&&c.props.style&&c.props.style.display==="contents"||(s&&i.options.layoutScroll&&i.scroll&&i!==i.root&&wm(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,EK(e,o)),s&&rf(i.latestValues)&&wm(e,i.latestValues))}t.x<WD&&t.x>HD&&(t.x=1),t.y<WD&&t.y>HD&&(t.y=1)}function bm(e,t){e.min=e.min+t,e.max=e.max+t}function qD(e,t,r,s,a=.5){const i=Pr(e.min,e.max,a);X6(e,t,r,i,s)}function wm(e,t){qD(e.x,t.x,t.scaleX,t.scale,t.originX),qD(e.y,t.y,t.scaleY,t.scale,t.originY)}function IK(e,t){return TK(Pve(e.getBoundingClientRect(),t))}function Ave(e,t,r){const s=IK(e,r),{scroll:a}=t;return a&&(bm(s.x,a.offset.x),bm(s.y,a.offset.y)),s}const LK=({current:e})=>e?e.ownerDocument.defaultView:null,Eve=new WeakMap;class Ive{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ts(),this.visualElement=t}start(t,{snapToCursor:r=!1}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const a=u=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(n1(u).point)},i=(u,f)=>{const{drag:h,dragPropagation:m,onDragStart:g}=this.getProps();if(h&&!m&&(this.openDragLock&&this.openDragLock(),this.openDragLock=uve(h),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ro(y=>{let v=this.getAxisMotionValue(y).get()||0;if(Ul.test(v)){const{projection:b}=this.visualElement;if(b&&b.layout){const w=b.layout.layoutBox[y];w&&(v=Hi(w)*(parseFloat(v)/100))}}this.originPoint[y]=v}),g&&Tn.postRender(()=>g(u,f)),Q6(this.visualElement,"transform");const{animationState:x}=this.visualElement;x&&x.setActive("whileDrag",!0)},o=(u,f)=>{const{dragPropagation:h,dragDirectionLock:m,onDirectionLock:g,onDrag:x}=this.getProps();if(!h&&!this.openDragLock)return;const{offset:y}=f;if(m&&this.currentDirection===null){this.currentDirection=Lve(y),this.currentDirection!==null&&g&&g(this.currentDirection);return}this.updateAxis("x",f.point,y),this.updateAxis("y",f.point,y),this.visualElement.render(),x&&x(u,f)},l=(u,f)=>this.stop(u,f),c=()=>ro(u=>{var f;return this.getAnimationState(u)==="paused"&&((f=this.getAxisMotionValue(u).animation)===null||f===void 0?void 0:f.play())}),{dragSnapToOrigin:d}=this.getProps();this.panSession=new kK(t,{onSessionStart:a,onStart:i,onMove:o,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,contextWindow:LK(this.visualElement)})}stop(t,r){const s=this.isDragging;if(this.cancel(),!s)return;const{velocity:a}=r;this.startAnimation(a);const{onDragEnd:i}=this.getProps();i&&Tn.postRender(()=>i(t,r))}cancel(){this.isDragging=!1;const{projection:t,animationState:r}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:s}=this.getProps();!s&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(t,r,s){const{drag:a}=this.getProps();if(!s||!pb(t,a,this.currentDirection))return;const i=this.getAxisMotionValue(t);let o=this.originPoint[t]+s[t];this.constraints&&this.constraints[t]&&(o=jve(o,this.constraints[t],this.elastic[t])),i.set(o)}resolveConstraints(){var t;const{dragConstraints:r,dragElastic:s}=this.getProps(),a=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,i=this.constraints;r&&ym(r)?this.constraints||(this.constraints=this.resolveRefConstraints()):r&&a?this.constraints=Nve(a.layoutBox,r):this.constraints=!1,this.elastic=Mve(s),i!==this.constraints&&a&&this.constraints&&!this.hasMutatedConstraints&&ro(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=kve(a.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:r}=this.getProps();if(!t||!ym(t))return!1;const s=t.current,{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const i=Ave(s,a.root,this.visualElement.getTransformPagePoint());let o=Sve(a.layout.layoutBox,i);if(r){const l=r(_ve(o));this.hasMutatedConstraints=!!l,l&&(o=TK(l))}return o}startAnimation(t){const{drag:r,dragMomentum:s,dragElastic:a,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},d=ro(u=>{if(!pb(u,r,this.currentDirection))return;let f=c&&c[u]||{};o&&(f={min:0,max:0});const h=a?200:1e6,m=a?40:1e7,g={type:"inertia",velocity:s?t[u]:0,bounceStiffness:h,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...i,...f};return this.startAxisValueAnimation(u,g)});return Promise.all(d).then(l)}startAxisValueAnimation(t,r){const s=this.getAxisMotionValue(t);return Q6(this.visualElement,t),s.start(MT(t,s,0,r,this.visualElement,!1))}stopAnimation(){ro(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){ro(t=>{var r;return(r=this.getAxisMotionValue(t).animation)===null||r===void 0?void 0:r.pause()})}getAnimationState(t){var r;return(r=this.getAxisMotionValue(t).animation)===null||r===void 0?void 0:r.state}getAxisMotionValue(t){const r=`_drag${t.toUpperCase()}`,s=this.visualElement.getProps(),a=s[r];return a||this.visualElement.getValue(t,(s.initial?s.initial[t]:void 0)||0)}snapToCursor(t){ro(r=>{const{drag:s}=this.getProps();if(!pb(r,s,this.currentDirection))return;const{projection:a}=this.visualElement,i=this.getAxisMotionValue(r);if(a&&a.layout){const{min:o,max:l}=a.layout.layoutBox[r];i.set(t[r]-Pr(o,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:r}=this.getProps(),{projection:s}=this.visualElement;if(!ym(r)||!s||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};ro(o=>{const l=this.getAxisMotionValue(o);if(l&&this.constraints!==!1){const c=l.get();a[o]=Cve({min:c,max:c},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.resolveConstraints(),ro(o=>{if(!pb(o,t,null))return;const l=this.getAxisMotionValue(o),{min:c,max:d}=this.constraints[o];l.set(Pr(c,d,a[o]))})}addListeners(){if(!this.visualElement.current)return;Eve.set(this.visualElement,this);const t=this.visualElement.current,r=ou(t,"pointerdown",c=>{const{drag:d,dragListener:u=!0}=this.getProps();d&&u&&this.start(c)}),s=()=>{const{dragConstraints:c}=this.getProps();ym(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,i=a.addEventListener("measure",s);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),Tn.read(s);const o=Ac(window,"resize",()=>this.scalePositionWithinConstraints()),l=a.addEventListener("didUpdate",({delta:c,hasLayoutChanged:d})=>{this.isDragging&&d&&(ro(u=>{const f=this.getAxisMotionValue(u);f&&(this.originPoint[u]+=c[u].translate,f.set(f.get()+c[u].translate))}),this.visualElement.render())});return()=>{o(),r(),i(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:s=!1,dragPropagation:a=!1,dragConstraints:i=!1,dragElastic:o=J6,dragMomentum:l=!0}=t;return{...t,drag:r,dragDirectionLock:s,dragPropagation:a,dragConstraints:i,dragElastic:o,dragMomentum:l}}}function pb(e,t,r){return(t===!0||t===e)&&(r===null||r===e)}function Lve(e,t=10){let r=null;return Math.abs(e.y)>t?r="y":Math.abs(e.x)>t&&(r="x"),r}class Dve extends Du{constructor(t){super(t),this.removeGroupControls=qs,this.removeListeners=qs,this.controls=new Ive(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||qs}unmount(){this.removeGroupControls(),this.removeListeners()}}const GD=e=>(t,r)=>{e&&Tn.postRender(()=>e(t,r))};class $ve extends Du{constructor(){super(...arguments),this.removePointerDownListener=qs}onPointerDown(t){this.session=new kK(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:LK(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:r,onPan:s,onPanEnd:a}=this.node.getProps();return{onSessionStart:GD(t),onStart:GD(r),onMove:s,onEnd:(i,o)=>{delete this.session,a&&Tn.postRender(()=>a(i,o))}}}mount(){this.removePointerDownListener=ou(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const JN=p.createContext(null);function Ove(){const e=p.useContext(JN);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:r,register:s}=e,a=p.useId();p.useEffect(()=>s(a),[]);const i=p.useCallback(()=>r&&r(a),[a,r]);return!t&&r?[!1,i]:[!0]}const LT=p.createContext({}),DK=p.createContext({}),xw={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function YD(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const kg={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(Gt.test(e))e=parseFloat(e);else return e;const r=YD(e,t.target.x),s=YD(e,t.target.y);return`${r}% ${s}%`}},Rve={correct:(e,{treeScale:t,projectionDelta:r})=>{const s=e,a=gu.parse(e);if(a.length>5)return s;const i=gu.createTransformer(e),o=typeof a[0]!="number"?1:0,l=r.x.scale*t.x,c=r.y.scale*t.y;a[0+o]/=l,a[1+o]/=c;const d=Pr(l,c,.5);return typeof a[2+o]=="number"&&(a[2+o]/=d),typeof a[3+o]=="number"&&(a[3+o]/=d),i(a)}},jj={};function Fve(e){Object.assign(jj,e)}const{schedule:DT}=DQ(queueMicrotask,!1);class zve extends p.Component{componentDidMount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:s,layoutId:a}=this.props,{projection:i}=t;Fve(Bve),i&&(r.group&&r.group.add(i),s&&s.register&&a&&s.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),xw.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:r,visualElement:s,drag:a,isPresent:i}=this.props,o=s.projection;return o&&(o.isPresent=i,a||t.layoutDependency!==r||r===void 0?o.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?o.promote():o.relegate()||Tn.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),DT.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:s}=this.props,{projection:a}=t;a&&(a.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(a),s&&s.deregister&&s.deregister(a))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function $K(e){const[t,r]=Ove(),s=p.useContext(LT);return n.jsx(zve,{...e,layoutGroup:s,switchLayoutGroup:p.useContext(DK),isPresent:t,safeToRemove:r})}const Bve={borderRadius:{...kg,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:kg,borderTopRightRadius:kg,borderBottomLeftRadius:kg,borderBottomRightRadius:kg,boxShadow:Rve},OK=["TopLeft","TopRight","BottomLeft","BottomRight"],Uve=OK.length,QD=e=>typeof e=="string"?parseFloat(e):e,KD=e=>typeof e=="number"||Gt.test(e);function Vve(e,t,r,s,a,i){a?(e.opacity=Pr(0,r.opacity!==void 0?r.opacity:1,Hve(s)),e.opacityExit=Pr(t.opacity!==void 0?t.opacity:1,0,Wve(s))):i&&(e.opacity=Pr(t.opacity!==void 0?t.opacity:1,r.opacity!==void 0?r.opacity:1,s));for(let o=0;o<Uve;o++){const l=`border${OK[o]}Radius`;let c=JD(t,l),d=JD(r,l);if(c===void 0&&d===void 0)continue;c||(c=0),d||(d=0),c===0||d===0||KD(c)===KD(d)?(e[l]=Math.max(Pr(QD(c),QD(d),s),0),(Ul.test(d)||Ul.test(c))&&(e[l]+="%")):e[l]=d}(t.rotate||r.rotate)&&(e.rotate=Pr(t.rotate||0,r.rotate||0,s))}function JD(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const Hve=RK(0,.5,UQ),Wve=RK(.5,.95,qs);function RK(e,t,r){return s=>s<e?0:s>t?1:r(rh(e,t,s))}function ZD(e,t){e.min=t.min,e.max=t.max}function Zi(e,t){ZD(e.x,t.x),ZD(e.y,t.y)}function XD(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function e8(e,t,r,s,a){return e-=t,e=wj(e,1/r,s),a!==void 0&&(e=wj(e,1/a,s)),e}function qve(e,t=0,r=1,s=.5,a,i=e,o=e){if(Ul.test(t)&&(t=parseFloat(t),t=Pr(o.min,o.max,t/100)-o.min),typeof t!="number")return;let l=Pr(i.min,i.max,s);e===i&&(l-=t),e.min=e8(e.min,t,r,l,a),e.max=e8(e.max,t,r,l,a)}function t8(e,t,[r,s,a],i,o){qve(e,t[r],t[s],t[a],t.scale,i,o)}const Gve=["x","scaleX","originX"],Yve=["y","scaleY","originY"];function n8(e,t,r,s){t8(e.x,t,Gve,r?r.x:void 0,s?s.x:void 0),t8(e.y,t,Yve,r?r.y:void 0,s?s.y:void 0)}function r8(e){return e.translate===0&&e.scale===1}function FK(e){return r8(e.x)&&r8(e.y)}function s8(e,t){return e.min===t.min&&e.max===t.max}function Qve(e,t){return s8(e.x,t.x)&&s8(e.y,t.y)}function a8(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function zK(e,t){return a8(e.x,t.x)&&a8(e.y,t.y)}function i8(e){return Hi(e.x)/Hi(e.y)}function o8(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class Kve{constructor(){this.members=[]}add(t){_T(this.members,t),t.scheduleRender()}remove(t){if(PT(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(t){const r=this.members.findIndex(a=>t===a);if(r===0)return!1;let s;for(let a=r;a>=0;a--){const i=this.members[a];if(i.isPresent!==!1){s=i;break}}return s?(this.promote(s),!0):!1}promote(t,r){const s=this.lead;if(t!==s&&(this.prevLead=s,this.lead=t,t.show(),s)){s.instance&&s.scheduleRender(),t.scheduleRender(),t.resumeFrom=s,r&&(t.resumeFrom.preserveOpacity=!0),s.snapshot&&(t.snapshot=s.snapshot,t.snapshot.latestValues=s.animationValues||s.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:a}=t.options;a===!1&&s.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:r,resumingFrom:s}=t;r.onExitComplete&&r.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Jve(e,t,r){let s="";const a=e.x.translate/t.x,i=e.y.translate/t.y,o=(r==null?void 0:r.z)||0;if((a||i||o)&&(s=`translate3d(${a}px, ${i}px, ${o}px) `),(t.x!==1||t.y!==1)&&(s+=`scale(${1/t.x}, ${1/t.y}) `),r){const{transformPerspective:d,rotate:u,rotateX:f,rotateY:h,skewX:m,skewY:g}=r;d&&(s=`perspective(${d}px) ${s}`),u&&(s+=`rotate(${u}deg) `),f&&(s+=`rotateX(${f}deg) `),h&&(s+=`rotateY(${h}deg) `),m&&(s+=`skewX(${m}deg) `),g&&(s+=`skewY(${g}deg) `)}const l=e.x.scale*t.x,c=e.y.scale*t.y;return(l!==1||c!==1)&&(s+=`scale(${l}, ${c})`),s||"none"}const Zve=(e,t)=>e.depth-t.depth;class Xve{constructor(){this.children=[],this.isDirty=!1}add(t){_T(this.children,t),this.isDirty=!0}remove(t){PT(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(Zve),this.isDirty=!1,this.children.forEach(t)}}function yw(e){const t=Ls(e)?e.get():e;return Vye(t)?t.toValue():t}function e1e(e,t){const r=Vl.now(),s=({timestamp:a})=>{const i=a-r;i>=t&&(dl(s),e(i-t))};return Tn.read(s,!0),()=>dl(s)}function t1e(e){return e instanceof SVGElement&&e.tagName!=="svg"}function n1e(e,t,r){const s=Ls(e)?e:$l(e);return s.start(MT("",s,t,r)),s.animation}const sf={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},rx=typeof window<"u"&&window.MotionDebug!==void 0,QS=["","X","Y","Z"],r1e={visibility:"hidden"},l8=1e3;let s1e=0;function KS(e,t,r,s){const{latestValues:a}=t;a[e]&&(r[e]=a[e],t.setStaticValue(e,0),s&&(s[e]=0))}function BK(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const r=bK(t);if(window.MotionHasOptimisedAnimation(r,"transform")){const{layout:a,layoutId:i}=e.options;window.MotionCancelOptimisedAnimation(r,"transform",Tn,!(a||i))}const{parent:s}=e;s&&!s.hasCheckedOptimisedAppear&&BK(s)}function UK({attachResizeListener:e,defaultParent:t,measureScroll:r,checkIsScrollRoot:s,resetTransform:a}){return class{constructor(o={},l=t==null?void 0:t()){this.id=s1e++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,rx&&(sf.totalNodes=sf.resolvedTargetDeltas=sf.recalculatedProjection=0),this.nodes.forEach(o1e),this.nodes.forEach(f1e),this.nodes.forEach(h1e),this.nodes.forEach(l1e),rx&&window.MotionDebug.record(sf)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new Xve)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new TT),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const c=this.eventHandlers.get(o);c&&c.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,l=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=t1e(o),this.instance=o;const{layoutId:c,layout:d,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),l&&(d||c)&&(this.isLayoutDirty=!0),e){let f;const h=()=>this.root.updateBlockedByResize=!1;e(o,()=>{this.root.updateBlockedByResize=!0,f&&f(),f=e1e(h,250),xw.hasAnimatedSinceResize&&(xw.hasAnimatedSinceResize=!1,this.nodes.forEach(d8))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&u&&(c||d)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:h,hasRelativeTargetChanged:m,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const x=this.options.transition||u.getDefaultTransition()||y1e,{onLayoutAnimationStart:y,onLayoutAnimationComplete:v}=u.getProps(),b=!this.targetLayout||!zK(this.targetLayout,g)||m,w=!h&&m;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||w||h&&(b||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(f,w);const N={...fT(x,"layout"),onPlay:y,onComplete:v};(u.shouldReduceMotion||this.options.layoutRoot)&&(N.delay=0,N.type=!1),this.startAnimation(N)}else h||d8(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,dl(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(m1e),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&BK(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const f=this.path[u];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(c8);return}this.isUpdating||this.nodes.forEach(d1e),this.isUpdating=!1,this.nodes.forEach(u1e),this.nodes.forEach(a1e),this.nodes.forEach(i1e),this.clearAllSnapshots();const l=Vl.now();Ms.delta=Zc(0,1e3/60,l-Ms.timestamp),Ms.timestamp=l,Ms.isProcessing=!0,BS.update.process(Ms),BS.preRender.process(Ms),BS.render.process(Ms),Ms.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,DT.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(c1e),this.sharedNodes.forEach(p1e)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Tn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Tn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ts(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l){const c=s(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:c,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!a)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!FK(this.projectionDelta),c=this.getTransformTemplate(),d=c?c(this.latestValues,""):void 0,u=d!==this.prevTransformTemplateValue;o&&(l||rf(this.latestValues)||u)&&(a(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return o&&(c=this.removeTransform(c)),v1e(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:l}=this.options;if(!l)return ts();const c=l.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(b1e))){const{scroll:u}=this.root;u&&(bm(c.x,u.offset.x),bm(c.y,u.offset.y))}return c}removeElementScroll(o){var l;const c=ts();if(Zi(c,o),!((l=this.scroll)===null||l===void 0)&&l.wasRoot)return c;for(let d=0;d<this.path.length;d++){const u=this.path[d],{scroll:f,options:h}=u;u!==this.root&&f&&h.layoutScroll&&(f.wasRoot&&Zi(c,o),bm(c.x,f.offset.x),bm(c.y,f.offset.y))}return c}applyTransform(o,l=!1){const c=ts();Zi(c,o);for(let d=0;d<this.path.length;d++){const u=this.path[d];!l&&u.options.layoutScroll&&u.scroll&&u!==u.root&&wm(c,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),rf(u.latestValues)&&wm(c,u.latestValues)}return rf(this.latestValues)&&wm(c,this.latestValues),c}removeTransform(o){const l=ts();Zi(l,o);for(let c=0;c<this.path.length;c++){const d=this.path[c];if(!d.instance||!rf(d.latestValues))continue;Z6(d.latestValues)&&d.updateSnapshot();const u=ts(),f=d.measurePageBox();Zi(u,f),n8(l,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,u)}return rf(this.latestValues)&&n8(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ms.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var l;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==c;if(!(o||d&&this.isSharedProjectionDirty||this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:f,layoutId:h}=this.options;if(!(!this.layout||!(f||h))){if(this.resolvedRelativeTargetAt=Ms.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ts(),this.relativeTargetOrigin=ts(),Cx(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),Zi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=ts(),this.targetWithTransforms=ts()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),wve(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Zi(this.target,this.layout.layoutBox),EK(this.target,this.targetDelta)):Zi(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ts(),this.relativeTargetOrigin=ts(),Cx(this.relativeTargetOrigin,this.target,m.target),Zi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}rx&&sf.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Z6(this.parent.latestValues)||AK(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const l=this.getLead(),c=!!this.resumingFrom||this!==l;let d=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(d=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===Ms.timestamp&&(d=!1),d)return;const{layout:u,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||f))return;Zi(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,m=this.treeScale.y;Tve(this.layoutCorrected,this.treeScale,this.path,c),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=ts());const{target:g}=l;if(!g){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(XD(this.prevProjectionDelta.x,this.projectionDelta.x),XD(this.prevProjectionDelta.y,this.projectionDelta.y)),Sx(this.projectionDelta,this.layoutCorrected,g,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==m||!o8(this.projectionDelta.x,this.prevProjectionDelta.x)||!o8(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g)),rx&&sf.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var l;if((l=this.options.visualElement)===null||l===void 0||l.scheduleRender(),o){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=vm(),this.projectionDelta=vm(),this.projectionDeltaWithTransform=vm()}setAnimationOrigin(o,l=!1){const c=this.snapshot,d=c?c.latestValues:{},u={...this.latestValues},f=vm();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const h=ts(),m=c?c.source:void 0,g=this.layout?this.layout.source:void 0,x=m!==g,y=this.getStack(),v=!y||y.members.length<=1,b=!!(x&&!v&&this.options.crossfade===!0&&!this.path.some(x1e));this.animationProgress=0;let w;this.mixTargetDelta=N=>{const j=N/1e3;u8(f.x,o.x,j),u8(f.y,o.y,j),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Cx(h,this.layout.layoutBox,this.relativeParent.layout.layoutBox),g1e(this.relativeTarget,this.relativeTargetOrigin,h,j),w&&Qve(this.relativeTarget,w)&&(this.isProjectionDirty=!1),w||(w=ts()),Zi(w,this.relativeTarget)),x&&(this.animationValues=u,Vve(u,d,this.latestValues,j,b,v)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=j},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(dl(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Tn.update(()=>{xw.hasAnimatedSinceResize=!0,this.currentAnimation=n1e(0,l8,{...o,onUpdate:l=>{this.mixTargetDelta(l),o.onUpdate&&o.onUpdate(l)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(l8),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:c,layout:d,latestValues:u}=o;if(!(!l||!c||!d)){if(this!==o&&this.layout&&d&&VK(this.options.animationType,this.layout.layoutBox,d.layoutBox)){c=this.target||ts();const f=Hi(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+f;const h=Hi(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+h}Zi(l,c),wm(l,u),Sx(this.projectionDeltaWithTransform,this.layoutCorrected,l,u)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new Kve),this.sharedNodes.get(o).add(l);const d=l.options.initialPromotionConfig;l.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:l}=this.options;return l?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:l}=this.options;return l?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:c}={}){const d=this.getStack();d&&d.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:c}=o;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(l=!0),!l)return;const d={};c.z&&KS("z",o,d,this.animationValues);for(let u=0;u<QS.length;u++)KS(`rotate${QS[u]}`,o,d,this.animationValues),KS(`skew${QS[u]}`,o,d,this.animationValues);o.render();for(const u in d)o.setStaticValue(u,d[u]),this.animationValues&&(this.animationValues[u]=d[u]);o.scheduleRender()}getProjectionStyles(o){var l,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return r1e;const d={visibility:""},u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,d.opacity="",d.pointerEvents=yw(o==null?void 0:o.pointerEvents)||"",d.transform=u?u(this.latestValues,""):"none",d;const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){const x={};return this.options.layoutId&&(x.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,x.pointerEvents=yw(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!rf(this.latestValues)&&(x.transform=u?u({},""):"none",this.hasProjected=!1),x}const h=f.animationValues||f.latestValues;this.applyTransformsToTarget(),d.transform=Jve(this.projectionDeltaWithTransform,this.treeScale,h),u&&(d.transform=u(h,d.transform));const{x:m,y:g}=this.projectionDelta;d.transformOrigin=`${m.origin*100}% ${g.origin*100}% 0`,f.animationValues?d.opacity=f===this?(c=(l=h.opacity)!==null&&l!==void 0?l:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:d.opacity=f===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const x in jj){if(h[x]===void 0)continue;const{correct:y,applyTo:v}=jj[x],b=d.transform==="none"?h[x]:y(h[x],f);if(v){const w=v.length;for(let N=0;N<w;N++)d[v[N]]=b}else d[x]=b}return this.options.layoutId&&(d.pointerEvents=f===this?yw(o==null?void 0:o.pointerEvents)||"":"none"),d}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var l;return(l=o.currentAnimation)===null||l===void 0?void 0:l.stop()}),this.root.nodes.forEach(c8),this.root.sharedNodes.clear()}}}function a1e(e){e.updateLayout()}function i1e(e){var t;const r=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&r&&e.hasListeners("didUpdate")){const{layoutBox:s,measuredBox:a}=e.layout,{animationType:i}=e.options,o=r.source!==e.layout.source;i==="size"?ro(f=>{const h=o?r.measuredBox[f]:r.layoutBox[f],m=Hi(h);h.min=s[f].min,h.max=h.min+m}):VK(i,r.layoutBox,s)&&ro(f=>{const h=o?r.measuredBox[f]:r.layoutBox[f],m=Hi(s[f]);h.max=h.min+m,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[f].max=e.relativeTarget[f].min+m)});const l=vm();Sx(l,s,r.layoutBox);const c=vm();o?Sx(c,e.applyTransform(a,!0),r.measuredBox):Sx(c,s,r.layoutBox);const d=!FK(l);let u=!1;if(!e.resumeFrom){const f=e.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:h,layout:m}=f;if(h&&m){const g=ts();Cx(g,r.layoutBox,h.layoutBox);const x=ts();Cx(x,s,m.layoutBox),zK(g,x)||(u=!0),f.options.layoutRoot&&(e.relativeTarget=x,e.relativeTargetOrigin=g,e.relativeParent=f)}}}e.notifyListeners("didUpdate",{layout:s,snapshot:r,delta:c,layoutDelta:l,hasLayoutChanged:d,hasRelativeTargetChanged:u})}else if(e.isLead()){const{onExitComplete:s}=e.options;s&&s()}e.options.transition=void 0}function o1e(e){rx&&sf.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function l1e(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function c1e(e){e.clearSnapshot()}function c8(e){e.clearMeasurements()}function d1e(e){e.isLayoutDirty=!1}function u1e(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function d8(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function f1e(e){e.resolveTargetDelta()}function h1e(e){e.calcProjection()}function m1e(e){e.resetSkewAndRotation()}function p1e(e){e.removeLeadSnapshot()}function u8(e,t,r){e.translate=Pr(t.translate,0,r),e.scale=Pr(t.scale,1,r),e.origin=t.origin,e.originPoint=t.originPoint}function f8(e,t,r,s){e.min=Pr(t.min,r.min,s),e.max=Pr(t.max,r.max,s)}function g1e(e,t,r,s){f8(e.x,t.x,r.x,s),f8(e.y,t.y,r.y,s)}function x1e(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const y1e={duration:.45,ease:[.4,0,.1,1]},h8=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),m8=h8("applewebkit/")&&!h8("chrome/")?Math.round:qs;function p8(e){e.min=m8(e.min),e.max=m8(e.max)}function v1e(e){p8(e.x),p8(e.y)}function VK(e,t,r){return e==="position"||e==="preserve-aspect"&&!bve(i8(t),i8(r),.2)}function b1e(e){var t;return e!==e.root&&((t=e.scroll)===null||t===void 0?void 0:t.wasRoot)}const w1e=UK({attachResizeListener:(e,t)=>Ac(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),JS={current:void 0},HK=UK({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!JS.current){const e=new w1e({});e.mount(window),e.setOptions({layoutScroll:!0}),JS.current=e}return JS.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),j1e={pan:{Feature:$ve},drag:{Feature:Dve,ProjectionNode:HK,MeasureLayout:$K}};function g8(e,t,r){const{props:s}=e;e.animationState&&s.whileHover&&e.animationState.setActive("whileHover",r);const a=s[r?"onHoverStart":"onHoverEnd"];a&&Tn.postRender(()=>a(t,n1(t)))}class N1e extends Du{mount(){const{current:t,props:r}=this.node;t&&(this.unmount=dve(t,s=>(g8(this.node,s,!0),a=>g8(this.node,a,!1)),{passive:!r.onHoverStart&&!r.onHoverEnd}))}unmount(){}}class S1e extends Du{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=iu(Ac(this.node.current,"focus",()=>this.onFocus()),Ac(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const WK=(e,t)=>t?e===t?!0:WK(e,t.parentElement):!1;function ZS(e,t){if(!t)return;const r=new PointerEvent("pointer"+e);t(r,n1(r))}class C1e extends Du{constructor(){super(...arguments),this.removeStartListeners=qs,this.removeEndListeners=qs,this.removeAccessibleListeners=qs,this.startPointerPress=(t,r)=>{if(this.isPressing)return;this.removeEndListeners();const s=this.node.getProps(),i=ou(window,"pointerup",(l,c)=>{if(!this.checkPressEnd())return;const{onTap:d,onTapCancel:u,globalTapTarget:f}=this.node.getProps(),h=!f&&!WK(this.node.current,l.target)?u:d;h&&Tn.update(()=>h(l,c))},{passive:!(s.onTap||s.onPointerUp)}),o=ou(window,"pointercancel",(l,c)=>this.cancelPress(l,c),{passive:!(s.onTapCancel||s.onPointerCancel)});this.removeEndListeners=iu(i,o),this.startPress(t,r)},this.startAccessiblePress=()=>{const t=i=>{if(i.key!=="Enter"||this.isPressing)return;const o=l=>{l.key!=="Enter"||!this.checkPressEnd()||ZS("up",(c,d)=>{const{onTap:u}=this.node.getProps();u&&Tn.postRender(()=>u(c,d))})};this.removeEndListeners(),this.removeEndListeners=Ac(this.node.current,"keyup",o),ZS("down",(l,c)=>{this.startPress(l,c)})},r=Ac(this.node.current,"keydown",t),s=()=>{this.isPressing&&ZS("cancel",(i,o)=>this.cancelPress(i,o))},a=Ac(this.node.current,"blur",s);this.removeAccessibleListeners=iu(r,a)}}startPress(t,r){this.isPressing=!0;const{onTapStart:s,whileTap:a}=this.node.getProps();a&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),s&&Tn.postRender(()=>s(t,r))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!SK()}cancelPress(t,r){if(!this.checkPressEnd())return;const{onTapCancel:s}=this.node.getProps();s&&Tn.postRender(()=>s(t,r))}mount(){const t=this.node.getProps(),r=ou(t.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),s=Ac(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=iu(r,s)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const eM=new WeakMap,XS=new WeakMap,k1e=e=>{const t=eM.get(e.target);t&&t(e)},M1e=e=>{e.forEach(k1e)};function _1e({root:e,...t}){const r=e||document;XS.has(r)||XS.set(r,{});const s=XS.get(r),a=JSON.stringify(t);return s[a]||(s[a]=new IntersectionObserver(M1e,{root:e,...t})),s[a]}function P1e(e,t,r){const s=_1e(t);return eM.set(e,r),s.observe(e),()=>{eM.delete(e),s.unobserve(e)}}const T1e={some:0,all:1};class A1e extends Du{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:r,margin:s,amount:a="some",once:i}=t,o={root:r?r.current:void 0,rootMargin:s,threshold:typeof a=="number"?a:T1e[a]},l=c=>{const{isIntersecting:d}=c;if(this.isInView===d||(this.isInView=d,i&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:u,onViewportLeave:f}=this.node.getProps(),h=d?u:f;h&&h(c)};return P1e(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:r}=this.node;["amount","margin","root"].some(E1e(t,r))&&this.startObserver()}unmount(){}}function E1e({viewport:e={}},{viewport:t={}}={}){return r=>e[r]!==t[r]}const I1e={inView:{Feature:A1e},tap:{Feature:C1e},focus:{Feature:S1e},hover:{Feature:N1e}},L1e={layout:{ProjectionNode:HK,MeasureLayout:$K}},r1=p.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),ZN=p.createContext({}),$T=typeof window<"u",D0=$T?p.useLayoutEffect:p.useEffect,qK=p.createContext({strict:!1});function D1e(e,t,r,s,a){var i,o;const{visualElement:l}=p.useContext(ZN),c=p.useContext(qK),d=p.useContext(JN),u=p.useContext(r1).reducedMotion,f=p.useRef();s=s||c.renderer,!f.current&&s&&(f.current=s(e,{visualState:t,parent:l,props:r,presenceContext:d,blockInitialAnimation:d?d.initial===!1:!1,reducedMotionConfig:u}));const h=f.current,m=p.useContext(DK);h&&!h.projection&&a&&(h.type==="html"||h.type==="svg")&&$1e(f.current,r,a,m);const g=p.useRef(!1);p.useInsertionEffect(()=>{h&&g.current&&h.update(r,d)});const x=r[vK],y=p.useRef(!!x&&!(!((i=window.MotionHandoffIsComplete)===null||i===void 0)&&i.call(window,x))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,x)));return D0(()=>{h&&(g.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),DT.render(h.render),y.current&&h.animationState&&h.animationState.animateChanges())}),p.useEffect(()=>{h&&(!y.current&&h.animationState&&h.animationState.animateChanges(),y.current&&(queueMicrotask(()=>{var v;(v=window.MotionHandoffMarkAsComplete)===null||v===void 0||v.call(window,x)}),y.current=!1))}),h}function $1e(e,t,r,s){const{layoutId:a,layout:i,drag:o,dragConstraints:l,layoutScroll:c,layoutRoot:d}=t;e.projection=new r(e.latestValues,t["data-framer-portal-id"]?void 0:GK(e.parent)),e.projection.setOptions({layoutId:a,layout:i,alwaysMeasureLayout:!!o||l&&ym(l),visualElement:e,animationType:typeof i=="string"?i:"both",initialPromotionConfig:s,layoutScroll:c,layoutRoot:d})}function GK(e){if(e)return e.options.allowProjection!==!1?e.projection:GK(e.parent)}function O1e(e,t,r){return p.useCallback(s=>{s&&e.mount&&e.mount(s),t&&(s?t.mount(s):t.unmount()),r&&(typeof r=="function"?r(s):ym(r)&&(r.current=s))},[t])}function XN(e){return GN(e.animate)||uT.some(t=>hy(e[t]))}function YK(e){return!!(XN(e)||e.variants)}function R1e(e,t){if(XN(e)){const{initial:r,animate:s}=e;return{initial:r===!1||hy(r)?r:void 0,animate:hy(s)?s:void 0}}return e.inherit!==!1?t:{}}function F1e(e){const{initial:t,animate:r}=R1e(e,p.useContext(ZN));return p.useMemo(()=>({initial:t,animate:r}),[x8(t),x8(r)])}function x8(e){return Array.isArray(e)?e.join(" "):e}const y8={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Tp={};for(const e in y8)Tp[e]={isEnabled:t=>y8[e].some(r=>!!t[r])};function z1e(e){for(const t in e)Tp[t]={...Tp[t],...e[t]}}const B1e=Symbol.for("motionComponentSymbol");function U1e({preloadedFeatures:e,createVisualElement:t,useRender:r,useVisualState:s,Component:a}){e&&z1e(e);function i(l,c){let d;const u={...p.useContext(r1),...l,layoutId:V1e(l)},{isStatic:f}=u,h=F1e(l),m=s(l,f);if(!f&&$T){H1e();const g=W1e(u);d=g.MeasureLayout,h.visualElement=D1e(a,m,u,t,g.ProjectionNode)}return n.jsxs(ZN.Provider,{value:h,children:[d&&h.visualElement?n.jsx(d,{visualElement:h.visualElement,...u}):null,r(a,l,O1e(m,h.visualElement,c),m,f,h.visualElement)]})}const o=p.forwardRef(i);return o[B1e]=a,o}function V1e({layoutId:e}){const t=p.useContext(LT).id;return t&&e!==void 0?t+"-"+e:e}function H1e(e,t){p.useContext(qK).strict}function W1e(e){const{drag:t,layout:r}=Tp;if(!t&&!r)return{};const s={...t,...r};return{MeasureLayout:t!=null&&t.isEnabled(e)||r!=null&&r.isEnabled(e)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}const q1e=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function OT(e){return typeof e!="string"||e.includes("-")?!1:!!(q1e.indexOf(e)>-1||/[A-Z]/u.test(e))}function QK(e,{style:t,vars:r},s,a){Object.assign(e.style,t,a&&a.getProjectionStyles(s));for(const i in r)e.style.setProperty(i,r[i])}const KK=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function JK(e,t,r,s){QK(e,t,void 0,s);for(const a in t.attrs)e.setAttribute(KK.has(a)?a:ET(a),t.attrs[a])}function ZK(e,{layout:t,layoutId:r}){return Sh.has(e)||e.startsWith("origin")||(t||r!==void 0)&&(!!jj[e]||e==="opacity")}function RT(e,t,r){var s;const{style:a}=e,i={};for(const o in a)(Ls(a[o])||t.style&&Ls(t.style[o])||ZK(o,e)||((s=r==null?void 0:r.getValue(o))===null||s===void 0?void 0:s.liveStyle)!==void 0)&&(i[o]=a[o]);return i}function XK(e,t,r){const s=RT(e,t,r);for(const a in e)if(Ls(e[a])||Ls(t[a])){const i=Xv.indexOf(a)!==-1?"attr"+a.charAt(0).toUpperCase()+a.substring(1):a;s[i]=e[a]}return s}function cd(e){const t=p.useRef(null);return t.current===null&&(t.current=e()),t.current}function G1e({scrapeMotionValuesFromProps:e,createRenderState:t,onMount:r},s,a,i){const o={latestValues:Y1e(s,a,i,e),renderState:t()};return r&&(o.mount=l=>r(s,l,o)),o}const eJ=e=>(t,r)=>{const s=p.useContext(ZN),a=p.useContext(JN),i=()=>G1e(e,t,s,a);return r?i():cd(i)};function Y1e(e,t,r,s){const a={},i=s(e,{});for(const h in i)a[h]=yw(i[h]);let{initial:o,animate:l}=e;const c=XN(e),d=YK(e);t&&d&&!c&&e.inherit!==!1&&(o===void 0&&(o=t.initial),l===void 0&&(l=t.animate));let u=r?r.initial===!1:!1;u=u||o===!1;const f=u?l:o;if(f&&typeof f!="boolean"&&!GN(f)){const h=Array.isArray(f)?f:[f];for(let m=0;m<h.length;m++){const g=cT(e,h[m]);if(g){const{transitionEnd:x,transition:y,...v}=g;for(const b in v){let w=v[b];if(Array.isArray(w)){const N=u?w.length-1:0;w=w[N]}w!==null&&(a[b]=w)}for(const b in x)a[b]=x[b]}}}return a}const FT=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),tJ=()=>({...FT(),attrs:{}}),nJ=(e,t)=>t&&typeof e=="number"?t.transform(e):e,Q1e={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},K1e=Xv.length;function J1e(e,t,r){let s="",a=!0;for(let i=0;i<K1e;i++){const o=Xv[i],l=e[o];if(l===void 0)continue;let c=!0;if(typeof l=="number"?c=l===(o.startsWith("scale")?1:0):c=parseFloat(l)===0,!c||r){const d=nJ(l,vT[o]);if(!c){a=!1;const u=Q1e[o]||o;s+=`${u}(${d}) `}r&&(t[o]=d)}}return s=s.trim(),r?s=r(t,a?"":s):a&&(s="none"),s}function zT(e,t,r){const{style:s,vars:a,transformOrigin:i}=e;let o=!1,l=!1;for(const c in t){const d=t[c];if(Sh.has(c)){o=!0;continue}else if(GQ(c)){a[c]=d;continue}else{const u=nJ(d,vT[c]);c.startsWith("origin")?(l=!0,i[c]=u):s[c]=u}}if(t.transform||(o||r?s.transform=J1e(t,e.transform,r):s.transform&&(s.transform="none")),l){const{originX:c="50%",originY:d="50%",originZ:u=0}=i;s.transformOrigin=`${c} ${d} ${u}`}}function v8(e,t,r){return typeof e=="string"?e:Gt.transform(t+r*e)}function Z1e(e,t,r){const s=v8(t,e.x,e.width),a=v8(r,e.y,e.height);return`${s} ${a}`}const X1e={offset:"stroke-dashoffset",array:"stroke-dasharray"},ebe={offset:"strokeDashoffset",array:"strokeDasharray"};function tbe(e,t,r=1,s=0,a=!0){e.pathLength=1;const i=a?X1e:ebe;e[i.offset]=Gt.transform(-s);const o=Gt.transform(t),l=Gt.transform(r);e[i.array]=`${o} ${l}`}function BT(e,{attrX:t,attrY:r,attrScale:s,originX:a,originY:i,pathLength:o,pathSpacing:l=1,pathOffset:c=0,...d},u,f){if(zT(e,d,f),u){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:h,style:m,dimensions:g}=e;h.transform&&(g&&(m.transform=h.transform),delete h.transform),g&&(a!==void 0||i!==void 0||m.transform)&&(m.transformOrigin=Z1e(g,a!==void 0?a:.5,i!==void 0?i:.5)),t!==void 0&&(h.x=t),r!==void 0&&(h.y=r),s!==void 0&&(h.scale=s),o!==void 0&&tbe(h,o,l,c,!1)}const UT=e=>typeof e=="string"&&e.toLowerCase()==="svg",nbe={useVisualState:eJ({scrapeMotionValuesFromProps:XK,createRenderState:tJ,onMount:(e,t,{renderState:r,latestValues:s})=>{Tn.read(()=>{try{r.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{r.dimensions={x:0,y:0,width:0,height:0}}}),Tn.render(()=>{BT(r,s,UT(t.tagName),e.transformTemplate),JK(t,r)})}})},rbe={useVisualState:eJ({scrapeMotionValuesFromProps:RT,createRenderState:FT})};function rJ(e,t,r){for(const s in t)!Ls(t[s])&&!ZK(s,r)&&(e[s]=t[s])}function sbe({transformTemplate:e},t){return p.useMemo(()=>{const r=FT();return zT(r,t,e),Object.assign({},r.vars,r.style)},[t])}function abe(e,t){const r=e.style||{},s={};return rJ(s,r,e),Object.assign(s,sbe(e,t)),s}function ibe(e,t){const r={},s=abe(e,t);return e.drag&&e.dragListener!==!1&&(r.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(r.tabIndex=0),r.style=s,r}const obe=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Nj(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||obe.has(e)}let sJ=e=>!Nj(e);function lbe(e){e&&(sJ=t=>t.startsWith("on")?!Nj(t):e(t))}try{lbe(require("@emotion/is-prop-valid").default)}catch{}function cbe(e,t,r){const s={};for(const a in e)a==="values"&&typeof e.values=="object"||(sJ(a)||r===!0&&Nj(a)||!t&&!Nj(a)||e.draggable&&a.startsWith("onDrag"))&&(s[a]=e[a]);return s}function dbe(e,t,r,s){const a=p.useMemo(()=>{const i=tJ();return BT(i,t,UT(s),e.transformTemplate),{...i.attrs,style:{...i.style}}},[t]);if(e.style){const i={};rJ(i,e.style,e),a.style={...i,...a.style}}return a}function ube(e=!1){return(r,s,a,{latestValues:i},o)=>{const c=(OT(r)?dbe:ibe)(s,i,o,r),d=cbe(s,typeof r=="string",e),u=r!==p.Fragment?{...d,...c,ref:a}:{},{children:f}=s,h=p.useMemo(()=>Ls(f)?f.get():f,[f]);return p.createElement(r,{...u,children:h})}}function fbe(e,t){return function(s,{forwardMotionProps:a}={forwardMotionProps:!1}){const o={...OT(s)?nbe:rbe,preloadedFeatures:e,useRender:ube(a),createVisualElement:t,Component:s};return U1e(o)}}const Sj={current:null},VT={current:!1};function aJ(){if(VT.current=!0,!!$T)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>Sj.current=e.matches;e.addListener(t),t()}else Sj.current=!1}function hbe(e,t,r){for(const s in t){const a=t[s],i=r[s];if(Ls(a))e.addValue(s,a);else if(Ls(i))e.addValue(s,$l(a,{owner:e}));else if(i!==a)if(e.hasValue(s)){const o=e.getValue(s);o.liveStyle===!0?o.jump(a):o.hasAnimated||o.set(a)}else{const o=e.getStaticValue(s);e.addValue(s,$l(o!==void 0?o:a,{owner:e}))}}for(const s in r)t[s]===void 0&&e.removeValue(s);return t}const b8=new WeakMap,mbe=[...KQ,ua,gu],pbe=e=>mbe.find(QQ(e)),w8=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class gbe{scrapeMotionValuesFromProps(t,r,s){return{}}constructor({parent:t,props:r,presenceContext:s,reducedMotionConfig:a,blockInitialAnimation:i,visualState:o},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=gT,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const h=Vl.now();this.renderScheduledAt<h&&(this.renderScheduledAt=h,Tn.render(this.render,!1,!0))};const{latestValues:c,renderState:d}=o;this.latestValues=c,this.baseTarget={...c},this.initialValues=r.initial?{...c}:{},this.renderState=d,this.parent=t,this.props=r,this.presenceContext=s,this.depth=t?t.depth+1:0,this.reducedMotionConfig=a,this.options=l,this.blockInitialAnimation=!!i,this.isControllingVariants=XN(r),this.isVariantNode=YK(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:u,...f}=this.scrapeMotionValuesFromProps(r,{},this);for(const h in f){const m=f[h];c[h]!==void 0&&Ls(m)&&m.set(c[h],!1)}}mount(t){this.current=t,b8.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,s)=>this.bindToMotionValue(s,r)),VT.current||aJ(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Sj.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){b8.delete(this.current),this.projection&&this.projection.unmount(),dl(this.notifyUpdate),dl(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const r=this.features[t];r&&(r.unmount(),r.isMounted=!1)}this.current=null}bindToMotionValue(t,r){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const s=Sh.has(t),a=r.on("change",l=>{this.latestValues[t]=l,this.props.onUpdate&&Tn.preRender(this.notifyUpdate),s&&this.projection&&(this.projection.isTransformDirty=!0)}),i=r.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,t,r)),this.valueSubscriptions.set(t,()=>{a(),i(),o&&o(),r.owner&&r.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Tp){const r=Tp[t];if(!r)continue;const{isEnabled:s,Feature:a}=r;if(!this.features[t]&&a&&s(this.props)&&(this.features[t]=new a(this)),this.features[t]){const i=this.features[t];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ts()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,r){this.latestValues[t]=r}update(t,r){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let s=0;s<w8.length;s++){const a=w8[s];this.propEventSubscriptions[a]&&(this.propEventSubscriptions[a](),delete this.propEventSubscriptions[a]);const i="on"+a,o=t[i];o&&(this.propEventSubscriptions[a]=this.on(a,o))}this.prevMotionValues=hbe(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(t),()=>r.variantChildren.delete(t)}addValue(t,r){const s=this.values.get(t);r!==s&&(s&&this.removeValue(t),this.bindToMotionValue(t,r),this.values.set(t,r),this.latestValues[t]=r.get())}removeValue(t){this.values.delete(t);const r=this.valueSubscriptions.get(t);r&&(r(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,r){if(this.props.values&&this.props.values[t])return this.props.values[t];let s=this.values.get(t);return s===void 0&&r!==void 0&&(s=$l(r===null?void 0:r,{owner:this}),this.addValue(t,s)),s}readValue(t,r){var s;let a=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(s=this.getBaseTargetFromProps(this.props,t))!==null&&s!==void 0?s:this.readValueFromInstance(this.current,t,this.options);return a!=null&&(typeof a=="string"&&(WQ(a)||HQ(a))?a=parseFloat(a):!pbe(a)&&gu.test(r)&&(a=sK(t,r)),this.setBaseTarget(t,Ls(a)?a.get():a)),Ls(a)?a.get():a}setBaseTarget(t,r){this.baseTarget[t]=r}getBaseTarget(t){var r;const{initial:s}=this.props;let a;if(typeof s=="string"||typeof s=="object"){const o=cT(this.props,s,(r=this.presenceContext)===null||r===void 0?void 0:r.custom);o&&(a=o[t])}if(s&&a!==void 0)return a;const i=this.getBaseTargetFromProps(this.props,t);return i!==void 0&&!Ls(i)?i:this.initialValues[t]!==void 0&&a===void 0?void 0:this.baseTarget[t]}on(t,r){return this.events[t]||(this.events[t]=new TT),this.events[t].add(r)}notify(t,...r){this.events[t]&&this.events[t].notify(...r)}}class iJ extends gbe{constructor(){super(...arguments),this.KeyframeResolver=aK}sortInstanceNodePosition(t,r){return t.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(t,r){return t.style?t.style[r]:void 0}removeValueFromRenderState(t,{vars:r,style:s}){delete r[t],delete s[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Ls(t)&&(this.childSubscription=t.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}}function xbe(e){return window.getComputedStyle(e)}class ybe extends iJ{constructor(){super(...arguments),this.type="html",this.renderInstance=QK}readValueFromInstance(t,r){if(Sh.has(r)){const s=bT(r);return s&&s.default||0}else{const s=xbe(t),a=(GQ(r)?s.getPropertyValue(r):s[r])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(t,{transformPagePoint:r}){return IK(t,r)}build(t,r,s){zT(t,r,s.transformTemplate)}scrapeMotionValuesFromProps(t,r,s){return RT(t,r,s)}}class vbe extends iJ{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=ts}getBaseTargetFromProps(t,r){return t[r]}readValueFromInstance(t,r){if(Sh.has(r)){const s=bT(r);return s&&s.default||0}return r=KK.has(r)?r:ET(r),t.getAttribute(r)}scrapeMotionValuesFromProps(t,r,s){return XK(t,r,s)}build(t,r,s){BT(t,r,this.isSVGTag,s.transformTemplate)}renderInstance(t,r,s,a){JK(t,r,s,a)}mount(t){this.isSVGTag=UT(t.tagName),super.mount(t)}}const bbe=(e,t)=>OT(e)?new vbe(t):new ybe(t,{allowProjection:e!==p.Fragment}),wbe=fbe({...cve,...I1e,...j1e,...L1e},bbe),q=lxe(wbe);class jbe extends p.Component{getSnapshotBeforeUpdate(t){const r=this.props.childRef.current;if(r&&t.isPresent&&!this.props.isPresent){const s=this.props.sizeRef.current;s.height=r.offsetHeight||0,s.width=r.offsetWidth||0,s.top=r.offsetTop,s.left=r.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function Nbe({children:e,isPresent:t}){const r=p.useId(),s=p.useRef(null),a=p.useRef({width:0,height:0,top:0,left:0}),{nonce:i}=p.useContext(r1);return p.useInsertionEffect(()=>{const{width:o,height:l,top:c,left:d}=a.current;if(t||!s.current||!o||!l)return;s.current.dataset.motionPopId=r;const u=document.createElement("style");return i&&(u.nonce=i),document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${o}px !important;
            height: ${l}px !important;
            top: ${c}px !important;
            left: ${d}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[t]),n.jsx(jbe,{isPresent:t,childRef:s,sizeRef:a,children:p.cloneElement(e,{ref:s})})}const Sbe=({children:e,initial:t,isPresent:r,onExitComplete:s,custom:a,presenceAffectsLayout:i,mode:o})=>{const l=cd(Cbe),c=p.useId(),d=p.useCallback(f=>{l.set(f,!0);for(const h of l.values())if(!h)return;s&&s()},[l,s]),u=p.useMemo(()=>({id:c,initial:t,isPresent:r,custom:a,onExitComplete:d,register:f=>(l.set(f,!1),()=>l.delete(f))}),i?[Math.random(),d]:[r,d]);return p.useMemo(()=>{l.forEach((f,h)=>l.set(h,!1))},[r]),p.useEffect(()=>{!r&&!l.size&&s&&s()},[r]),o==="popLayout"&&(e=n.jsx(Nbe,{isPresent:r,children:e})),n.jsx(JN.Provider,{value:u,children:e})};function Cbe(){return new Map}const gb=e=>e.key||"";function j8(e){const t=[];return p.Children.forEach(e,r=>{p.isValidElement(r)&&t.push(r)}),t}const $s=({children:e,exitBeforeEnter:t,custom:r,initial:s=!0,onExitComplete:a,presenceAffectsLayout:i=!0,mode:o="sync"})=>{const l=p.useMemo(()=>j8(e),[e]),c=l.map(gb),d=p.useRef(!0),u=p.useRef(l),f=cd(()=>new Map),[h,m]=p.useState(l),[g,x]=p.useState(l);D0(()=>{d.current=!1,u.current=l;for(let b=0;b<g.length;b++){const w=gb(g[b]);c.includes(w)?f.delete(w):f.get(w)!==!0&&f.set(w,!1)}},[g,c.length,c.join("-")]);const y=[];if(l!==h){let b=[...l];for(let w=0;w<g.length;w++){const N=g[w],j=gb(N);c.includes(j)||(b.splice(w,0,N),y.push(N))}o==="wait"&&y.length&&(b=y),x(j8(b)),m(l);return}const{forceRender:v}=p.useContext(LT);return n.jsx(n.Fragment,{children:g.map(b=>{const w=gb(b),N=l===g||c.includes(w),j=()=>{if(f.has(w))f.set(w,!0);else return;let S=!0;f.forEach(C=>{C||(S=!1)}),S&&(v==null||v(),x(u.current),a&&a())};return n.jsx(Sbe,{isPresent:N,initial:!d.current||s?void 0:!1,custom:N?void 0:r,presenceAffectsLayout:i,mode:o,onExitComplete:N?void 0:j,children:b},w)})})};function gy(e){const t=cd(()=>$l(e)),{isStatic:r}=p.useContext(r1);if(r){const[,s]=p.useState(e);p.useEffect(()=>t.on("change",s),[])}return t}function oJ(e,t){const r=gy(t()),s=()=>r.set(t());return s(),D0(()=>{const a=()=>Tn.preRender(s,!1,!0),i=e.map(o=>o.on("change",a));return()=>{i.forEach(o=>o()),dl(s)}}),r}const kbe=e=>e&&typeof e=="object"&&e.mix,Mbe=e=>kbe(e)?e.mix:void 0;function _be(...e){const t=!Array.isArray(e[0]),r=t?0:-1,s=e[0+r],a=e[1+r],i=e[2+r],o=e[3+r],l=CT(a,i,{mixer:Mbe(i[0]),...o});return t?l(s):l}function Pbe(e){Nx.current=[],e();const t=oJ(Nx.current,e);return Nx.current=void 0,t}function Ra(e,t,r,s){if(typeof e=="function")return Pbe(e);const a=typeof t=="function"?t:_be(t,r,s);return Array.isArray(e)?N8(e,a):N8([e],([i])=>a(i))}function N8(e,t){const r=cd(()=>[]);return oJ(e,()=>{r.length=0;const s=e.length;for(let a=0;a<s;a++)r[a]=e[a].get();return t(r)})}function S8(e){return typeof e=="number"?e:parseFloat(e)}function tM(e,t={}){const{isStatic:r}=p.useContext(r1),s=p.useRef(null),a=gy(Ls(e)?S8(e.get()):e),i=p.useRef(a.get()),o=p.useRef(()=>{}),l=()=>{const d=s.current;d&&d.time===0&&d.sample(Ms.delta),c(),s.current=Aye({keyframes:[a.get(),i.current],velocity:a.getVelocity(),type:"spring",restDelta:.001,restSpeed:.01,...t,onUpdate:o.current})},c=()=>{s.current&&s.current.stop()};return p.useInsertionEffect(()=>a.attach((d,u)=>r?u(d):(i.current=d,o.current=u,Tn.update(l),a.get()),c),[JSON.stringify(t)]),D0(()=>{if(Ls(e))return e.on("change",d=>a.set(S8(d)))},[a]),a}const vw=new WeakMap;let kd;function Tbe(e,t){if(t){const{inlineSize:r,blockSize:s}=t[0];return{width:r,height:s}}else return e instanceof SVGElement&&"getBBox"in e?e.getBBox():{width:e.offsetWidth,height:e.offsetHeight}}function Abe({target:e,contentRect:t,borderBoxSize:r}){var s;(s=vw.get(e))===null||s===void 0||s.forEach(a=>{a({target:e,contentSize:t,get size(){return Tbe(e,r)}})})}function Ebe(e){e.forEach(Abe)}function Ibe(){typeof ResizeObserver>"u"||(kd=new ResizeObserver(Ebe))}function Lbe(e,t){kd||Ibe();const r=IT(e);return r.forEach(s=>{let a=vw.get(s);a||(a=new Set,vw.set(s,a)),a.add(t),kd==null||kd.observe(s)}),()=>{r.forEach(s=>{const a=vw.get(s);a==null||a.delete(t),a!=null&&a.size||kd==null||kd.unobserve(s)})}}const bw=new Set;let kx;function Dbe(){kx=()=>{const e={width:window.innerWidth,height:window.innerHeight},t={target:window,size:e,contentSize:e};bw.forEach(r=>r(t))},window.addEventListener("resize",kx)}function $be(e){return bw.add(e),kx||Dbe(),()=>{bw.delete(e),!bw.size&&kx&&(kx=void 0)}}function Obe(e,t){return typeof e=="function"?$be(e):Lbe(e,t)}const Rbe=50,C8=()=>({current:0,offset:[],progress:0,scrollLength:0,targetOffset:0,targetLength:0,containerLength:0,velocity:0}),Fbe=()=>({time:0,x:C8(),y:C8()}),zbe={x:{length:"Width",position:"Left"},y:{length:"Height",position:"Top"}};function k8(e,t,r,s){const a=r[t],{length:i,position:o}=zbe[t],l=a.current,c=r.time;a.current=e[`scroll${o}`],a.scrollLength=e[`scroll${i}`]-e[`client${i}`],a.offset.length=0,a.offset[0]=0,a.offset[1]=a.scrollLength,a.progress=rh(0,a.scrollLength,a.current);const d=s-c;a.velocity=d>Rbe?0:jT(a.current-l,d)}function Bbe(e,t,r){k8(e,"x",t,r),k8(e,"y",t,r),t.time=r}function Ube(e,t){const r={x:0,y:0};let s=e;for(;s&&s!==t;)if(s instanceof HTMLElement)r.x+=s.offsetLeft,r.y+=s.offsetTop,s=s.offsetParent;else if(s.tagName==="svg"){const a=s.getBoundingClientRect();s=s.parentElement;const i=s.getBoundingClientRect();r.x+=a.left-i.left,r.y+=a.top-i.top}else if(s instanceof SVGGraphicsElement){const{x:a,y:i}=s.getBBox();r.x+=a,r.y+=i;let o=null,l=s.parentNode;for(;!o;)l.tagName==="svg"&&(o=l),l=s.parentNode;s=o}else break;return r}const Vbe={All:[[0,0],[1,1]]},nM={start:0,center:.5,end:1};function M8(e,t,r=0){let s=0;if(e in nM&&(e=nM[e]),typeof e=="string"){const a=parseFloat(e);e.endsWith("px")?s=a:e.endsWith("%")?e=a/100:e.endsWith("vw")?s=a/100*document.documentElement.clientWidth:e.endsWith("vh")?s=a/100*document.documentElement.clientHeight:e=a}return typeof e=="number"&&(s=t*e),r+s}const Hbe=[0,0];function Wbe(e,t,r,s){let a=Array.isArray(e)?e:Hbe,i=0,o=0;return typeof e=="number"?a=[e,e]:typeof e=="string"&&(e=e.trim(),e.includes(" ")?a=e.split(" "):a=[e,nM[e]?e:"0"]),i=M8(a[0],r,s),o=M8(a[1],t),i-o}const qbe={x:0,y:0};function Gbe(e){return"getBBox"in e&&e.tagName!=="svg"?e.getBBox():{width:e.clientWidth,height:e.clientHeight}}function Ybe(e,t,r){const{offset:s=Vbe.All}=r,{target:a=e,axis:i="y"}=r,o=i==="y"?"height":"width",l=a!==e?Ube(a,e):qbe,c=a===e?{width:e.scrollWidth,height:e.scrollHeight}:Gbe(a),d={width:e.clientWidth,height:e.clientHeight};t[i].offset.length=0;let u=!t[i].interpolate;const f=s.length;for(let h=0;h<f;h++){const m=Wbe(s[h],d[o],c[o],l[i]);!u&&m!==t[i].interpolatorOffsets[h]&&(u=!0),t[i].offset[h]=m}u&&(t[i].interpolate=CT(t[i].offset,mK(s)),t[i].interpolatorOffsets=[...t[i].offset]),t[i].progress=t[i].interpolate(t[i].current)}function Qbe(e,t=e,r){if(r.x.targetOffset=0,r.y.targetOffset=0,t!==e){let s=t;for(;s&&s!==e;)r.x.targetOffset+=s.offsetLeft,r.y.targetOffset+=s.offsetTop,s=s.offsetParent}r.x.targetLength=t===e?t.scrollWidth:t.clientWidth,r.y.targetLength=t===e?t.scrollHeight:t.clientHeight,r.x.containerLength=e.clientWidth,r.y.containerLength=e.clientHeight}function Kbe(e,t,r,s={}){return{measure:()=>Qbe(e,s.target,r),update:a=>{Bbe(e,r,a),(s.offset||s.target)&&Ybe(e,r,s)},notify:()=>t(r)}}const Mg=new WeakMap,_8=new WeakMap,eC=new WeakMap,P8=e=>e===document.documentElement?window:e;function HT(e,{container:t=document.documentElement,...r}={}){let s=eC.get(t);s||(s=new Set,eC.set(t,s));const a=Fbe(),i=Kbe(t,e,a,r);if(s.add(i),!Mg.has(t)){const l=()=>{for(const h of s)h.measure()},c=()=>{for(const h of s)h.update(Ms.timestamp)},d=()=>{for(const h of s)h.notify()},u=()=>{Tn.read(l,!1,!0),Tn.read(c,!1,!0),Tn.update(d,!1,!0)};Mg.set(t,u);const f=P8(t);window.addEventListener("resize",u,{passive:!0}),t!==document.documentElement&&_8.set(t,Obe(t,u)),f.addEventListener("scroll",u,{passive:!0})}const o=Mg.get(t);return Tn.read(o,!1,!0),()=>{var l;dl(o);const c=eC.get(t);if(!c||(c.delete(i),c.size))return;const d=Mg.get(t);Mg.delete(t),d&&(P8(t).removeEventListener("scroll",d),(l=_8.get(t))===null||l===void 0||l(),window.removeEventListener("resize",d))}}function lJ(e,t){let r;const s=()=>{const{currentTime:a}=t,o=(a===null?0:a.value)/100;r!==o&&e(o),r=o};return Tn.update(s,!0),()=>dl(s)}function Jbe({source:e,container:t,axis:r="y"}){e&&(t=e);const s={value:0},a=HT(i=>{s.value=i[r].progress*100},{container:t,axis:r});return{currentTime:s,cancel:a}}const tC=new Map;function cJ({source:e,container:t=document.documentElement,axis:r="y"}={}){e&&(t=e),tC.has(t)||tC.set(t,{});const s=tC.get(t);return s[r]||(s[r]=yK()?new ScrollTimeline({source:t,axis:r}):Jbe({source:t,axis:r})),s[r]}function Zbe(e){return e.length===2}function dJ(e){return e&&(e.target||e.offset)}function Xbe(e,t){return Zbe(e)||dJ(t)?HT(r=>{e(r[t.axis].progress,r)},t):lJ(e,cJ(t))}function ewe(e,t){if(e.flatten(),dJ(t))return e.pause(),HT(r=>{e.time=e.duration*r[t.axis].progress},t);{const r=cJ(t);return e.attachTimeline?e.attachTimeline(r,s=>(s.pause(),lJ(a=>{s.time=s.duration*a},r))):qs}}function twe(e,{axis:t="y",...r}={}){const s={axis:t,...r};return typeof e=="function"?Xbe(e,s):ewe(e,s)}function T8(e,t){gxe(!!(!t||t.current))}const nwe=()=>({scrollX:$l(0),scrollY:$l(0),scrollXProgress:$l(0),scrollYProgress:$l(0)});function s1({container:e,target:t,layoutEffect:r=!0,...s}={}){const a=cd(nwe);return(r?D0:p.useEffect)(()=>(T8("target",t),T8("container",e),twe((o,{x:l,y:c})=>{a.scrollX.set(l.current),a.scrollXProgress.set(l.progress),a.scrollY.set(c.current),a.scrollYProgress.set(c.progress)},{...s,container:(e==null?void 0:e.current)||void 0,target:(t==null?void 0:t.current)||void 0})),[e,t,JSON.stringify(s.offset)]),a}function rwe(){!VT.current&&aJ();const[e]=p.useState(Sj.current);return e}function swe(e){e.values.forEach(t=>t.stop())}function rM(e,t){[...t].reverse().forEach(s=>{const a=e.getVariant(s);a&&AT(e,a),e.variantChildren&&e.variantChildren.forEach(i=>{rM(i,t)})})}function awe(e,t){if(Array.isArray(t))return rM(e,t);if(typeof t=="string")return rM(e,[t]);AT(e,t)}function iwe(){const e=new Set,t={subscribe(r){return e.add(r),()=>void e.delete(r)},start(r,s){const a=[];return e.forEach(i=>{a.push(jK(i,r,{transitionOverride:s}))}),Promise.all(a)},set(r){return e.forEach(s=>{awe(s,r)})},stop(){e.forEach(r=>{swe(r)})},mount(){return()=>{t.stop()}}};return t}function owe(){const e=cd(iwe);return D0(e.mount,[]),e}const lwe=owe,cwe={some:0,all:1};function dwe(e,t,{root:r,margin:s,amount:a="some"}={}){const i=IT(e),o=new WeakMap,l=d=>{d.forEach(u=>{const f=o.get(u.target);if(u.isIntersecting!==!!f)if(u.isIntersecting){const h=t(u);typeof h=="function"?o.set(u.target,h):c.unobserve(u.target)}else f&&(f(u),o.delete(u.target))})},c=new IntersectionObserver(l,{root:r,rootMargin:s,threshold:typeof a=="number"?a:cwe[a]});return i.forEach(d=>c.observe(d)),()=>c.disconnect()}function uJ(e,{root:t,margin:r,amount:s,once:a=!1}={}){const[i,o]=p.useState(!1);return p.useEffect(()=>{if(!e.current||a&&i)return;const l=()=>(o(!0),a?void 0:()=>o(!1)),c={root:t&&t.current||void 0,margin:r,amount:s};return dwe(e.current,l,c)},[t,e,r,a,s]),i}const fJ=p.createContext(null);function uwe(e,t,r,s){if(!s)return e;const a=e.findIndex(u=>u.value===t);if(a===-1)return e;const i=s>0?1:-1,o=e[a+i];if(!o)return e;const l=e[a],c=o.layout,d=Pr(c.min,c.max,.5);return i===1&&l.layout.max+r>d||i===-1&&l.layout.min+r<d?Wye(e,a,a+i):e}function fwe({children:e,as:t="ul",axis:r="y",onReorder:s,values:a,...i},o){const l=cd(()=>q[t]),c=[],d=p.useRef(!1),u={axis:r,registerItem:(f,h)=>{const m=c.findIndex(g=>f===g.value);m!==-1?c[m].layout=h[r]:c.push({value:f,layout:h[r]}),c.sort(pwe)},updateOrder:(f,h,m)=>{if(d.current)return;const g=uwe(c,f,h,m);c!==g&&(d.current=!0,s(g.map(mwe).filter(x=>a.indexOf(x)!==-1)))}};return p.useEffect(()=>{d.current=!1}),n.jsx(l,{...i,ref:o,ignoreStrict:!0,children:n.jsx(fJ.Provider,{value:u,children:e})})}const hwe=p.forwardRef(fwe);function mwe(e){return e.value}function pwe(e,t){return e.layout.min-t.layout.min}function A8(e,t=0){return Ls(e)?e:gy(t)}function gwe({children:e,style:t={},value:r,as:s="li",onDrag:a,layout:i=!0,...o},l){const c=cd(()=>q[s]),d=p.useContext(fJ),u={x:A8(t.x),y:A8(t.y)},f=Ra([u.x,u.y],([x,y])=>x||y?1:"unset"),{axis:h,registerItem:m,updateOrder:g}=d;return n.jsx(c,{drag:h,...o,dragSnapToOrigin:!0,style:{...t,x:u.x,y:u.y,zIndex:f},layout:i,onDrag:(x,y)=>{const{velocity:v}=y;v[h]&&g(r,u[h].get(),v[h]),a&&a(x,y)},onLayoutMeasure:x=>m(r,x),ref:l,ignoreStrict:!0,children:e})}const xwe=p.forwardRef(gwe),xy=P0("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 active:scale-[0.98] hover:-translate-y-[1px] hover:shadow-md active:shadow-sm",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),_=p.forwardRef(({className:e,variant:t,size:r,asChild:s=!1,...a},i)=>{const o=s?MY:"button";return n.jsx(o,{className:Le(xy({variant:t,size:r,className:e})),ref:i,...a})});_.displayName="Button";const se=p.forwardRef(({className:e,type:t,...r},s)=>n.jsx("input",{type:t,className:Le("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base text-foreground ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:s,...r}));se.displayName="Input";var ywe=p.createContext(void 0);function Ch(e){const t=p.useContext(ywe);return e||t||"ltr"}function yy(e,[t,r]){return Math.min(r,Math.max(t,e))}function vwe(e,t){return p.useReducer((r,s)=>t[r][s]??r,e)}var WT="ScrollArea",[hJ]=ws(WT),[bwe,_o]=hJ(WT),mJ=p.forwardRef((e,t)=>{const{__scopeScrollArea:r,type:s="hover",dir:a,scrollHideDelay:i=600,...o}=e,[l,c]=p.useState(null),[d,u]=p.useState(null),[f,h]=p.useState(null),[m,g]=p.useState(null),[x,y]=p.useState(null),[v,b]=p.useState(0),[w,N]=p.useState(0),[j,S]=p.useState(!1),[C,k]=p.useState(!1),M=rn(t,P=>c(P)),A=Ch(a);return n.jsx(bwe,{scope:r,type:s,dir:A,scrollHideDelay:i,scrollArea:l,viewport:d,onViewportChange:u,content:f,onContentChange:h,scrollbarX:m,onScrollbarXChange:g,scrollbarXEnabled:j,onScrollbarXEnabledChange:S,scrollbarY:x,onScrollbarYChange:y,scrollbarYEnabled:C,onScrollbarYEnabledChange:k,onCornerWidthChange:b,onCornerHeightChange:N,children:n.jsx(ht.div,{dir:A,...o,ref:M,style:{position:"relative","--radix-scroll-area-corner-width":v+"px","--radix-scroll-area-corner-height":w+"px",...e.style}})})});mJ.displayName=WT;var pJ="ScrollAreaViewport",gJ=p.forwardRef((e,t)=>{const{__scopeScrollArea:r,children:s,nonce:a,...i}=e,o=_o(pJ,r),l=p.useRef(null),c=rn(t,l,o.onViewportChange);return n.jsxs(n.Fragment,{children:[n.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),n.jsx(ht.div,{"data-radix-scroll-area-viewport":"",...i,ref:c,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...e.style},children:n.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:s})})]})});gJ.displayName=pJ;var sc="ScrollAreaScrollbar",qT=p.forwardRef((e,t)=>{const{forceMount:r,...s}=e,a=_o(sc,e.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:o}=a,l=e.orientation==="horizontal";return p.useEffect(()=>(l?i(!0):o(!0),()=>{l?i(!1):o(!1)}),[l,i,o]),a.type==="hover"?n.jsx(wwe,{...s,ref:t,forceMount:r}):a.type==="scroll"?n.jsx(jwe,{...s,ref:t,forceMount:r}):a.type==="auto"?n.jsx(xJ,{...s,ref:t,forceMount:r}):a.type==="always"?n.jsx(GT,{...s,ref:t}):null});qT.displayName=sc;var wwe=p.forwardRef((e,t)=>{const{forceMount:r,...s}=e,a=_o(sc,e.__scopeScrollArea),[i,o]=p.useState(!1);return p.useEffect(()=>{const l=a.scrollArea;let c=0;if(l){const d=()=>{window.clearTimeout(c),o(!0)},u=()=>{c=window.setTimeout(()=>o(!1),a.scrollHideDelay)};return l.addEventListener("pointerenter",d),l.addEventListener("pointerleave",u),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",d),l.removeEventListener("pointerleave",u)}}},[a.scrollArea,a.scrollHideDelay]),n.jsx(Sa,{present:r||i,children:n.jsx(xJ,{"data-state":i?"visible":"hidden",...s,ref:t})})}),jwe=p.forwardRef((e,t)=>{const{forceMount:r,...s}=e,a=_o(sc,e.__scopeScrollArea),i=e.orientation==="horizontal",o=t4(()=>c("SCROLL_END"),100),[l,c]=vwe("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return p.useEffect(()=>{if(l==="idle"){const d=window.setTimeout(()=>c("HIDE"),a.scrollHideDelay);return()=>window.clearTimeout(d)}},[l,a.scrollHideDelay,c]),p.useEffect(()=>{const d=a.viewport,u=i?"scrollLeft":"scrollTop";if(d){let f=d[u];const h=()=>{const m=d[u];f!==m&&(c("SCROLL"),o()),f=m};return d.addEventListener("scroll",h),()=>d.removeEventListener("scroll",h)}},[a.viewport,i,c,o]),n.jsx(Sa,{present:r||l!=="hidden",children:n.jsx(GT,{"data-state":l==="hidden"?"hidden":"visible",...s,ref:t,onPointerEnter:ut(e.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:ut(e.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),xJ=p.forwardRef((e,t)=>{const r=_o(sc,e.__scopeScrollArea),{forceMount:s,...a}=e,[i,o]=p.useState(!1),l=e.orientation==="horizontal",c=t4(()=>{if(r.viewport){const d=r.viewport.offsetWidth<r.viewport.scrollWidth,u=r.viewport.offsetHeight<r.viewport.scrollHeight;o(l?d:u)}},10);return Ap(r.viewport,c),Ap(r.content,c),n.jsx(Sa,{present:s||i,children:n.jsx(GT,{"data-state":i?"visible":"hidden",...a,ref:t})})}),GT=p.forwardRef((e,t)=>{const{orientation:r="vertical",...s}=e,a=_o(sc,e.__scopeScrollArea),i=p.useRef(null),o=p.useRef(0),[l,c]=p.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),d=jJ(l.viewport,l.content),u={...s,sizes:l,onSizesChange:c,hasThumb:d>0&&d<1,onThumbChange:h=>i.current=h,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:h=>o.current=h};function f(h,m){return _we(h,o.current,l,m)}return r==="horizontal"?n.jsx(Nwe,{...u,ref:t,onThumbPositionChange:()=>{if(a.viewport&&i.current){const h=a.viewport.scrollLeft,m=E8(h,l,a.dir);i.current.style.transform=`translate3d(${m}px, 0, 0)`}},onWheelScroll:h=>{a.viewport&&(a.viewport.scrollLeft=h)},onDragScroll:h=>{a.viewport&&(a.viewport.scrollLeft=f(h,a.dir))}}):r==="vertical"?n.jsx(Swe,{...u,ref:t,onThumbPositionChange:()=>{if(a.viewport&&i.current){const h=a.viewport.scrollTop,m=E8(h,l);i.current.style.transform=`translate3d(0, ${m}px, 0)`}},onWheelScroll:h=>{a.viewport&&(a.viewport.scrollTop=h)},onDragScroll:h=>{a.viewport&&(a.viewport.scrollTop=f(h))}}):null}),Nwe=p.forwardRef((e,t)=>{const{sizes:r,onSizesChange:s,...a}=e,i=_o(sc,e.__scopeScrollArea),[o,l]=p.useState(),c=p.useRef(null),d=rn(t,c,i.onScrollbarXChange);return p.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),n.jsx(vJ,{"data-orientation":"horizontal",...a,ref:d,sizes:r,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":e4(r)+"px",...e.style},onThumbPointerDown:u=>e.onThumbPointerDown(u.x),onDragScroll:u=>e.onDragScroll(u.x),onWheelScroll:(u,f)=>{if(i.viewport){const h=i.viewport.scrollLeft+u.deltaX;e.onWheelScroll(h),SJ(h,f)&&u.preventDefault()}},onResize:()=>{c.current&&i.viewport&&o&&s({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:kj(o.paddingLeft),paddingEnd:kj(o.paddingRight)}})}})}),Swe=p.forwardRef((e,t)=>{const{sizes:r,onSizesChange:s,...a}=e,i=_o(sc,e.__scopeScrollArea),[o,l]=p.useState(),c=p.useRef(null),d=rn(t,c,i.onScrollbarYChange);return p.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),n.jsx(vJ,{"data-orientation":"vertical",...a,ref:d,sizes:r,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":e4(r)+"px",...e.style},onThumbPointerDown:u=>e.onThumbPointerDown(u.y),onDragScroll:u=>e.onDragScroll(u.y),onWheelScroll:(u,f)=>{if(i.viewport){const h=i.viewport.scrollTop+u.deltaY;e.onWheelScroll(h),SJ(h,f)&&u.preventDefault()}},onResize:()=>{c.current&&i.viewport&&o&&s({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:kj(o.paddingTop),paddingEnd:kj(o.paddingBottom)}})}})}),[Cwe,yJ]=hJ(sc),vJ=p.forwardRef((e,t)=>{const{__scopeScrollArea:r,sizes:s,hasThumb:a,onThumbChange:i,onThumbPointerUp:o,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:d,onWheelScroll:u,onResize:f,...h}=e,m=_o(sc,r),[g,x]=p.useState(null),y=rn(t,M=>x(M)),v=p.useRef(null),b=p.useRef(""),w=m.viewport,N=s.content-s.viewport,j=Gr(u),S=Gr(c),C=t4(f,10);function k(M){if(v.current){const A=M.clientX-v.current.left,P=M.clientY-v.current.top;d({x:A,y:P})}}return p.useEffect(()=>{const M=A=>{const P=A.target;(g==null?void 0:g.contains(P))&&j(A,N)};return document.addEventListener("wheel",M,{passive:!1}),()=>document.removeEventListener("wheel",M,{passive:!1})},[w,g,N,j]),p.useEffect(S,[s,S]),Ap(g,C),Ap(m.content,C),n.jsx(Cwe,{scope:r,scrollbar:g,hasThumb:a,onThumbChange:Gr(i),onThumbPointerUp:Gr(o),onThumbPositionChange:S,onThumbPointerDown:Gr(l),children:n.jsx(ht.div,{...h,ref:y,style:{position:"absolute",...h.style},onPointerDown:ut(e.onPointerDown,M=>{M.button===0&&(M.target.setPointerCapture(M.pointerId),v.current=g.getBoundingClientRect(),b.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",m.viewport&&(m.viewport.style.scrollBehavior="auto"),k(M))}),onPointerMove:ut(e.onPointerMove,k),onPointerUp:ut(e.onPointerUp,M=>{const A=M.target;A.hasPointerCapture(M.pointerId)&&A.releasePointerCapture(M.pointerId),document.body.style.webkitUserSelect=b.current,m.viewport&&(m.viewport.style.scrollBehavior=""),v.current=null})})})}),Cj="ScrollAreaThumb",bJ=p.forwardRef((e,t)=>{const{forceMount:r,...s}=e,a=yJ(Cj,e.__scopeScrollArea);return n.jsx(Sa,{present:r||a.hasThumb,children:n.jsx(kwe,{ref:t,...s})})}),kwe=p.forwardRef((e,t)=>{const{__scopeScrollArea:r,style:s,...a}=e,i=_o(Cj,r),o=yJ(Cj,r),{onThumbPositionChange:l}=o,c=rn(t,f=>o.onThumbChange(f)),d=p.useRef(void 0),u=t4(()=>{d.current&&(d.current(),d.current=void 0)},100);return p.useEffect(()=>{const f=i.viewport;if(f){const h=()=>{if(u(),!d.current){const m=Pwe(f,l);d.current=m,l()}};return l(),f.addEventListener("scroll",h),()=>f.removeEventListener("scroll",h)}},[i.viewport,u,l]),n.jsx(ht.div,{"data-state":o.hasThumb?"visible":"hidden",...a,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...s},onPointerDownCapture:ut(e.onPointerDownCapture,f=>{const m=f.target.getBoundingClientRect(),g=f.clientX-m.left,x=f.clientY-m.top;o.onThumbPointerDown({x:g,y:x})}),onPointerUp:ut(e.onPointerUp,o.onThumbPointerUp)})});bJ.displayName=Cj;var YT="ScrollAreaCorner",wJ=p.forwardRef((e,t)=>{const r=_o(YT,e.__scopeScrollArea),s=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&s?n.jsx(Mwe,{...e,ref:t}):null});wJ.displayName=YT;var Mwe=p.forwardRef((e,t)=>{const{__scopeScrollArea:r,...s}=e,a=_o(YT,r),[i,o]=p.useState(0),[l,c]=p.useState(0),d=!!(i&&l);return Ap(a.scrollbarX,()=>{var f;const u=((f=a.scrollbarX)==null?void 0:f.offsetHeight)||0;a.onCornerHeightChange(u),c(u)}),Ap(a.scrollbarY,()=>{var f;const u=((f=a.scrollbarY)==null?void 0:f.offsetWidth)||0;a.onCornerWidthChange(u),o(u)}),d?n.jsx(ht.div,{...s,ref:t,style:{width:i,height:l,position:"absolute",right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function kj(e){return e?parseInt(e,10):0}function jJ(e,t){const r=e/t;return isNaN(r)?0:r}function e4(e){const t=jJ(e.viewport,e.content),r=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,s=(e.scrollbar.size-r)*t;return Math.max(s,18)}function _we(e,t,r,s="ltr"){const a=e4(r),i=a/2,o=t||i,l=a-o,c=r.scrollbar.paddingStart+o,d=r.scrollbar.size-r.scrollbar.paddingEnd-l,u=r.content-r.viewport,f=s==="ltr"?[0,u]:[u*-1,0];return NJ([c,d],f)(e)}function E8(e,t,r="ltr"){const s=e4(t),a=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,i=t.scrollbar.size-a,o=t.content-t.viewport,l=i-s,c=r==="ltr"?[0,o]:[o*-1,0],d=yy(e,c);return NJ([0,o],[0,l])(d)}function NJ(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const s=(t[1]-t[0])/(e[1]-e[0]);return t[0]+s*(r-e[0])}}function SJ(e,t){return e>0&&e<t}var Pwe=(e,t=()=>{})=>{let r={left:e.scrollLeft,top:e.scrollTop},s=0;return function a(){const i={left:e.scrollLeft,top:e.scrollTop},o=r.left!==i.left,l=r.top!==i.top;(o||l)&&t(),r=i,s=window.requestAnimationFrame(a)}(),()=>window.cancelAnimationFrame(s)};function t4(e,t){const r=Gr(e),s=p.useRef(0);return p.useEffect(()=>()=>window.clearTimeout(s.current),[]),p.useCallback(()=>{window.clearTimeout(s.current),s.current=window.setTimeout(r,t)},[r,t])}function Ap(e,t){const r=Gr(t);ls(()=>{let s=0;if(e){const a=new ResizeObserver(()=>{cancelAnimationFrame(s),s=window.requestAnimationFrame(r)});return a.observe(e),()=>{window.cancelAnimationFrame(s),a.unobserve(e)}}},[e,r])}var CJ=mJ,Twe=gJ,Awe=wJ;const ia=p.forwardRef(({className:e,children:t,...r},s)=>n.jsxs(CJ,{ref:s,className:Le("relative overflow-hidden",e),...r,children:[n.jsx(Twe,{className:"h-full w-full rounded-[inherit]",children:t}),n.jsx(kJ,{}),n.jsx(Awe,{})]}));ia.displayName=CJ.displayName;const kJ=p.forwardRef(({className:e,orientation:t="vertical",...r},s)=>n.jsx(qT,{ref:s,orientation:t,className:Le("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...r,children:n.jsx(bJ,{className:"relative flex-1 rounded-full bg-border"})}));kJ.displayName=qT.displayName;var Ewe="Label",MJ=p.forwardRef((e,t)=>n.jsx(ht.label,{...e,ref:t,onMouseDown:r=>{var a;r.target.closest("button, input, select, textarea")||((a=e.onMouseDown)==null||a.call(e,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));MJ.displayName=Ewe;var _J=MJ;const Iwe=P0("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),U=p.forwardRef(({className:e,...t},r)=>n.jsx(_J,{ref:r,className:Le(Iwe(),e),...t}));U.displayName=_J.displayName;const Lwe=P0("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function ge({className:e,variant:t,...r}){return n.jsx("div",{className:Le(Lwe({variant:t}),e),...r})}function a1(e){const t=p.useRef({value:e,previous:e});return p.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}function i1(e){const[t,r]=p.useState(void 0);return ls(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const s=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const i=a[0];let o,l;if("borderBoxSize"in i){const c=i.borderBoxSize,d=Array.isArray(c)?c[0]:c;o=d.inlineSize,l=d.blockSize}else o=e.offsetWidth,l=e.offsetHeight;r({width:o,height:l})});return s.observe(e,{box:"border-box"}),()=>s.unobserve(e)}else r(void 0)},[e]),t}var QT="Checkbox",[Dwe]=ws(QT),[$we,Owe]=Dwe(QT),PJ=p.forwardRef((e,t)=>{const{__scopeCheckbox:r,name:s,checked:a,defaultChecked:i,required:o,disabled:l,value:c="on",onCheckedChange:d,form:u,...f}=e,[h,m]=p.useState(null),g=rn(t,N=>m(N)),x=p.useRef(!1),y=h?u||!!h.closest("form"):!0,[v=!1,b]=qa({prop:a,defaultProp:i,onChange:d}),w=p.useRef(v);return p.useEffect(()=>{const N=h==null?void 0:h.form;if(N){const j=()=>b(w.current);return N.addEventListener("reset",j),()=>N.removeEventListener("reset",j)}},[h,b]),n.jsxs($we,{scope:r,state:v,disabled:l,children:[n.jsx(ht.button,{type:"button",role:"checkbox","aria-checked":lu(v)?"mixed":v,"aria-required":o,"data-state":EJ(v),"data-disabled":l?"":void 0,disabled:l,value:c,...f,ref:g,onKeyDown:ut(e.onKeyDown,N=>{N.key==="Enter"&&N.preventDefault()}),onClick:ut(e.onClick,N=>{b(j=>lu(j)?!0:!j),y&&(x.current=N.isPropagationStopped(),x.current||N.stopPropagation())})}),y&&n.jsx(Rwe,{control:h,bubbles:!x.current,name:s,value:c,checked:v,required:o,disabled:l,form:u,style:{transform:"translateX(-100%)"},defaultChecked:lu(i)?!1:i})]})});PJ.displayName=QT;var TJ="CheckboxIndicator",AJ=p.forwardRef((e,t)=>{const{__scopeCheckbox:r,forceMount:s,...a}=e,i=Owe(TJ,r);return n.jsx(Sa,{present:s||lu(i.state)||i.state===!0,children:n.jsx(ht.span,{"data-state":EJ(i.state),"data-disabled":i.disabled?"":void 0,...a,ref:t,style:{pointerEvents:"none",...e.style}})})});AJ.displayName=TJ;var Rwe=e=>{const{control:t,checked:r,bubbles:s=!0,defaultChecked:a,...i}=e,o=p.useRef(null),l=a1(r),c=i1(t);p.useEffect(()=>{const u=o.current,f=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(f,"checked").set;if(l!==r&&m){const g=new Event("click",{bubbles:s});u.indeterminate=lu(r),m.call(u,lu(r)?!1:r),u.dispatchEvent(g)}},[l,r,s]);const d=p.useRef(lu(r)?!1:r);return n.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:a??d.current,...i,tabIndex:-1,ref:o,style:{...e.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function lu(e){return e==="indeterminate"}function EJ(e){return lu(e)?"indeterminate":e?"checked":"unchecked"}var IJ=PJ,Fwe=AJ;const as=p.forwardRef(({className:e,...t},r)=>n.jsx(IJ,{ref:r,className:Le("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:n.jsx(Fwe,{className:Le("flex items-center justify-center text-current"),children:n.jsx(Mr,{className:"h-4 w-4"})})}));as.displayName=IJ.displayName;var nC=0;function KT(){p.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??I8()),document.body.insertAdjacentElement("beforeend",e[1]??I8()),nC++,()=>{nC===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),nC--}},[])}function I8(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var rC="focusScope.autoFocusOnMount",sC="focusScope.autoFocusOnUnmount",L8={bubbles:!1,cancelable:!0},zwe="FocusScope",n4=p.forwardRef((e,t)=>{const{loop:r=!1,trapped:s=!1,onMountAutoFocus:a,onUnmountAutoFocus:i,...o}=e,[l,c]=p.useState(null),d=Gr(a),u=Gr(i),f=p.useRef(null),h=rn(t,x=>c(x)),m=p.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;p.useEffect(()=>{if(s){let x=function(w){if(m.paused||!l)return;const N=w.target;l.contains(N)?f.current=N:Md(f.current,{select:!0})},y=function(w){if(m.paused||!l)return;const N=w.relatedTarget;N!==null&&(l.contains(N)||Md(f.current,{select:!0}))},v=function(w){if(document.activeElement===document.body)for(const j of w)j.removedNodes.length>0&&Md(l)};document.addEventListener("focusin",x),document.addEventListener("focusout",y);const b=new MutationObserver(v);return l&&b.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",x),document.removeEventListener("focusout",y),b.disconnect()}}},[s,l,m.paused]),p.useEffect(()=>{if(l){$8.add(m);const x=document.activeElement;if(!l.contains(x)){const v=new CustomEvent(rC,L8);l.addEventListener(rC,d),l.dispatchEvent(v),v.defaultPrevented||(Bwe(qwe(LJ(l)),{select:!0}),document.activeElement===x&&Md(l))}return()=>{l.removeEventListener(rC,d),setTimeout(()=>{const v=new CustomEvent(sC,L8);l.addEventListener(sC,u),l.dispatchEvent(v),v.defaultPrevented||Md(x??document.body,{select:!0}),l.removeEventListener(sC,u),$8.remove(m)},0)}}},[l,d,u,m]);const g=p.useCallback(x=>{if(!r&&!s||m.paused)return;const y=x.key==="Tab"&&!x.altKey&&!x.ctrlKey&&!x.metaKey,v=document.activeElement;if(y&&v){const b=x.currentTarget,[w,N]=Uwe(b);w&&N?!x.shiftKey&&v===N?(x.preventDefault(),r&&Md(w,{select:!0})):x.shiftKey&&v===w&&(x.preventDefault(),r&&Md(N,{select:!0})):v===b&&x.preventDefault()}},[r,s,m.paused]);return n.jsx(ht.div,{tabIndex:-1,...o,ref:h,onKeyDown:g})});n4.displayName=zwe;function Bwe(e,{select:t=!1}={}){const r=document.activeElement;for(const s of e)if(Md(s,{select:t}),document.activeElement!==r)return}function Uwe(e){const t=LJ(e),r=D8(t,e),s=D8(t.reverse(),e);return[r,s]}function LJ(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const a=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||a?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function D8(e,t){for(const r of e)if(!Vwe(r,{upTo:t}))return r}function Vwe(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function Hwe(e){return e instanceof HTMLInputElement&&"select"in e}function Md(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&Hwe(e)&&t&&e.select()}}var $8=Wwe();function Wwe(){let e=[];return{add(t){const r=e[0];t!==r&&(r==null||r.pause()),e=O8(e,t),e.unshift(t)},remove(t){var r;e=O8(e,t),(r=e[0])==null||r.resume()}}}function O8(e,t){const r=[...e],s=r.indexOf(t);return s!==-1&&r.splice(s,1),r}function qwe(e){return e.filter(t=>t.tagName!=="A")}var Gwe=QW[" useId ".trim().toString()]||(()=>{}),Ywe=0;function Gs(e){const[t,r]=p.useState(Gwe());return ls(()=>{r(s=>s??String(Ywe++))},[e]),t?`radix-${t}`:""}const Qwe=["top","right","bottom","left"],xu=Math.min,Pi=Math.max,Mj=Math.round,xb=Math.floor,Hl=e=>({x:e,y:e}),Kwe={left:"right",right:"left",bottom:"top",top:"bottom"},Jwe={start:"end",end:"start"};function sM(e,t,r){return Pi(e,xu(t,r))}function Xc(e,t){return typeof e=="function"?e(t):e}function ed(e){return e.split("-")[0]}function $0(e){return e.split("-")[1]}function JT(e){return e==="x"?"y":"x"}function ZT(e){return e==="y"?"height":"width"}function yu(e){return["top","bottom"].includes(ed(e))?"y":"x"}function XT(e){return JT(yu(e))}function Zwe(e,t,r){r===void 0&&(r=!1);const s=$0(e),a=XT(e),i=ZT(a);let o=a==="x"?s===(r?"end":"start")?"right":"left":s==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(o=_j(o)),[o,_j(o)]}function Xwe(e){const t=_j(e);return[aM(e),t,aM(t)]}function aM(e){return e.replace(/start|end/g,t=>Jwe[t])}function eje(e,t,r){const s=["left","right"],a=["right","left"],i=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return r?t?a:s:t?s:a;case"left":case"right":return t?i:o;default:return[]}}function tje(e,t,r,s){const a=$0(e);let i=eje(ed(e),r==="start",s);return a&&(i=i.map(o=>o+"-"+a),t&&(i=i.concat(i.map(aM)))),i}function _j(e){return e.replace(/left|right|bottom|top/g,t=>Kwe[t])}function nje(e){return{top:0,right:0,bottom:0,left:0,...e}}function DJ(e){return typeof e!="number"?nje(e):{top:e,right:e,bottom:e,left:e}}function Pj(e){const{x:t,y:r,width:s,height:a}=e;return{width:s,height:a,top:r,left:t,right:t+s,bottom:r+a,x:t,y:r}}function R8(e,t,r){let{reference:s,floating:a}=e;const i=yu(t),o=XT(t),l=ZT(o),c=ed(t),d=i==="y",u=s.x+s.width/2-a.width/2,f=s.y+s.height/2-a.height/2,h=s[l]/2-a[l]/2;let m;switch(c){case"top":m={x:u,y:s.y-a.height};break;case"bottom":m={x:u,y:s.y+s.height};break;case"right":m={x:s.x+s.width,y:f};break;case"left":m={x:s.x-a.width,y:f};break;default:m={x:s.x,y:s.y}}switch($0(t)){case"start":m[o]-=h*(r&&d?-1:1);break;case"end":m[o]+=h*(r&&d?-1:1);break}return m}const rje=async(e,t,r)=>{const{placement:s="bottom",strategy:a="absolute",middleware:i=[],platform:o}=r,l=i.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(t));let d=await o.getElementRects({reference:e,floating:t,strategy:a}),{x:u,y:f}=R8(d,s,c),h=s,m={},g=0;for(let x=0;x<l.length;x++){const{name:y,fn:v}=l[x],{x:b,y:w,data:N,reset:j}=await v({x:u,y:f,initialPlacement:s,placement:h,strategy:a,middlewareData:m,rects:d,platform:o,elements:{reference:e,floating:t}});u=b??u,f=w??f,m={...m,[y]:{...m[y],...N}},j&&g<=50&&(g++,typeof j=="object"&&(j.placement&&(h=j.placement),j.rects&&(d=j.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:a}):j.rects),{x:u,y:f}=R8(d,h,c)),x=-1)}return{x:u,y:f,placement:h,strategy:a,middlewareData:m}};async function vy(e,t){var r;t===void 0&&(t={});const{x:s,y:a,platform:i,rects:o,elements:l,strategy:c}=e,{boundary:d="clippingAncestors",rootBoundary:u="viewport",elementContext:f="floating",altBoundary:h=!1,padding:m=0}=Xc(t,e),g=DJ(m),y=l[h?f==="floating"?"reference":"floating":f],v=Pj(await i.getClippingRect({element:(r=await(i.isElement==null?void 0:i.isElement(y)))==null||r?y:y.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:d,rootBoundary:u,strategy:c})),b=f==="floating"?{x:s,y:a,width:o.floating.width,height:o.floating.height}:o.reference,w=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),N=await(i.isElement==null?void 0:i.isElement(w))?await(i.getScale==null?void 0:i.getScale(w))||{x:1,y:1}:{x:1,y:1},j=Pj(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:b,offsetParent:w,strategy:c}):b);return{top:(v.top-j.top+g.top)/N.y,bottom:(j.bottom-v.bottom+g.bottom)/N.y,left:(v.left-j.left+g.left)/N.x,right:(j.right-v.right+g.right)/N.x}}const sje=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:s,placement:a,rects:i,platform:o,elements:l,middlewareData:c}=t,{element:d,padding:u=0}=Xc(e,t)||{};if(d==null)return{};const f=DJ(u),h={x:r,y:s},m=XT(a),g=ZT(m),x=await o.getDimensions(d),y=m==="y",v=y?"top":"left",b=y?"bottom":"right",w=y?"clientHeight":"clientWidth",N=i.reference[g]+i.reference[m]-h[m]-i.floating[g],j=h[m]-i.reference[m],S=await(o.getOffsetParent==null?void 0:o.getOffsetParent(d));let C=S?S[w]:0;(!C||!await(o.isElement==null?void 0:o.isElement(S)))&&(C=l.floating[w]||i.floating[g]);const k=N/2-j/2,M=C/2-x[g]/2-1,A=xu(f[v],M),P=xu(f[b],M),T=A,I=C-x[g]-P,L=C/2-x[g]/2+k,R=sM(T,L,I),G=!c.arrow&&$0(a)!=null&&L!==R&&i.reference[g]/2-(L<T?A:P)-x[g]/2<0,$=G?L<T?L-T:L-I:0;return{[m]:h[m]+$,data:{[m]:R,centerOffset:L-R-$,...G&&{alignmentOffset:$}},reset:G}}}),aje=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,s;const{placement:a,middlewareData:i,rects:o,initialPlacement:l,platform:c,elements:d}=t,{mainAxis:u=!0,crossAxis:f=!0,fallbackPlacements:h,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:x=!0,...y}=Xc(e,t);if((r=i.arrow)!=null&&r.alignmentOffset)return{};const v=ed(a),b=yu(l),w=ed(l)===l,N=await(c.isRTL==null?void 0:c.isRTL(d.floating)),j=h||(w||!x?[_j(l)]:Xwe(l)),S=g!=="none";!h&&S&&j.push(...tje(l,x,g,N));const C=[l,...j],k=await vy(t,y),M=[];let A=((s=i.flip)==null?void 0:s.overflows)||[];if(u&&M.push(k[v]),f){const L=Zwe(a,o,N);M.push(k[L[0]],k[L[1]])}if(A=[...A,{placement:a,overflows:M}],!M.every(L=>L<=0)){var P,T;const L=(((P=i.flip)==null?void 0:P.index)||0)+1,R=C[L];if(R)return{data:{index:L,overflows:A},reset:{placement:R}};let G=(T=A.filter($=>$.overflows[0]<=0).sort(($,D)=>$.overflows[1]-D.overflows[1])[0])==null?void 0:T.placement;if(!G)switch(m){case"bestFit":{var I;const $=(I=A.filter(D=>{if(S){const W=yu(D.placement);return W===b||W==="y"}return!0}).map(D=>[D.placement,D.overflows.filter(W=>W>0).reduce((W,E)=>W+E,0)]).sort((D,W)=>D[1]-W[1])[0])==null?void 0:I[0];$&&(G=$);break}case"initialPlacement":G=l;break}if(a!==G)return{reset:{placement:G}}}return{}}}};function F8(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function z8(e){return Qwe.some(t=>e[t]>=0)}const ije=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:r}=t,{strategy:s="referenceHidden",...a}=Xc(e,t);switch(s){case"referenceHidden":{const i=await vy(t,{...a,elementContext:"reference"}),o=F8(i,r.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:z8(o)}}}case"escaped":{const i=await vy(t,{...a,altBoundary:!0}),o=F8(i,r.floating);return{data:{escapedOffsets:o,escaped:z8(o)}}}default:return{}}}}};async function oje(e,t){const{placement:r,platform:s,elements:a}=e,i=await(s.isRTL==null?void 0:s.isRTL(a.floating)),o=ed(r),l=$0(r),c=yu(r)==="y",d=["left","top"].includes(o)?-1:1,u=i&&c?-1:1,f=Xc(t,e);let{mainAxis:h,crossAxis:m,alignmentAxis:g}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return l&&typeof g=="number"&&(m=l==="end"?g*-1:g),c?{x:m*u,y:h*d}:{x:h*d,y:m*u}}const lje=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,s;const{x:a,y:i,placement:o,middlewareData:l}=t,c=await oje(t,e);return o===((r=l.offset)==null?void 0:r.placement)&&(s=l.arrow)!=null&&s.alignmentOffset?{}:{x:a+c.x,y:i+c.y,data:{...c,placement:o}}}}},cje=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:s,placement:a}=t,{mainAxis:i=!0,crossAxis:o=!1,limiter:l={fn:y=>{let{x:v,y:b}=y;return{x:v,y:b}}},...c}=Xc(e,t),d={x:r,y:s},u=await vy(t,c),f=yu(ed(a)),h=JT(f);let m=d[h],g=d[f];if(i){const y=h==="y"?"top":"left",v=h==="y"?"bottom":"right",b=m+u[y],w=m-u[v];m=sM(b,m,w)}if(o){const y=f==="y"?"top":"left",v=f==="y"?"bottom":"right",b=g+u[y],w=g-u[v];g=sM(b,g,w)}const x=l.fn({...t,[h]:m,[f]:g});return{...x,data:{x:x.x-r,y:x.y-s,enabled:{[h]:i,[f]:o}}}}}},dje=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:r,y:s,placement:a,rects:i,middlewareData:o}=t,{offset:l=0,mainAxis:c=!0,crossAxis:d=!0}=Xc(e,t),u={x:r,y:s},f=yu(a),h=JT(f);let m=u[h],g=u[f];const x=Xc(l,t),y=typeof x=="number"?{mainAxis:x,crossAxis:0}:{mainAxis:0,crossAxis:0,...x};if(c){const w=h==="y"?"height":"width",N=i.reference[h]-i.floating[w]+y.mainAxis,j=i.reference[h]+i.reference[w]-y.mainAxis;m<N?m=N:m>j&&(m=j)}if(d){var v,b;const w=h==="y"?"width":"height",N=["top","left"].includes(ed(a)),j=i.reference[f]-i.floating[w]+(N&&((v=o.offset)==null?void 0:v[f])||0)+(N?0:y.crossAxis),S=i.reference[f]+i.reference[w]+(N?0:((b=o.offset)==null?void 0:b[f])||0)-(N?y.crossAxis:0);g<j?g=j:g>S&&(g=S)}return{[h]:m,[f]:g}}}},uje=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var r,s;const{placement:a,rects:i,platform:o,elements:l}=t,{apply:c=()=>{},...d}=Xc(e,t),u=await vy(t,d),f=ed(a),h=$0(a),m=yu(a)==="y",{width:g,height:x}=i.floating;let y,v;f==="top"||f==="bottom"?(y=f,v=h===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(v=f,y=h==="end"?"top":"bottom");const b=x-u.top-u.bottom,w=g-u.left-u.right,N=xu(x-u[y],b),j=xu(g-u[v],w),S=!t.middlewareData.shift;let C=N,k=j;if((r=t.middlewareData.shift)!=null&&r.enabled.x&&(k=w),(s=t.middlewareData.shift)!=null&&s.enabled.y&&(C=b),S&&!h){const A=Pi(u.left,0),P=Pi(u.right,0),T=Pi(u.top,0),I=Pi(u.bottom,0);m?k=g-2*(A!==0||P!==0?A+P:Pi(u.left,u.right)):C=x-2*(T!==0||I!==0?T+I:Pi(u.top,u.bottom))}await c({...t,availableWidth:k,availableHeight:C});const M=await o.getDimensions(l.floating);return g!==M.width||x!==M.height?{reset:{rects:!0}}:{}}}};function r4(){return typeof window<"u"}function O0(e){return $J(e)?(e.nodeName||"").toLowerCase():"#document"}function Oi(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function ac(e){var t;return(t=($J(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function $J(e){return r4()?e instanceof Node||e instanceof Oi(e).Node:!1}function ul(e){return r4()?e instanceof Element||e instanceof Oi(e).Element:!1}function Jl(e){return r4()?e instanceof HTMLElement||e instanceof Oi(e).HTMLElement:!1}function B8(e){return!r4()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Oi(e).ShadowRoot}function o1(e){const{overflow:t,overflowX:r,overflowY:s,display:a}=fl(e);return/auto|scroll|overlay|hidden|clip/.test(t+s+r)&&!["inline","contents"].includes(a)}function fje(e){return["table","td","th"].includes(O0(e))}function s4(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function eA(e){const t=tA(),r=ul(e)?fl(e):e;return["transform","translate","scale","rotate","perspective"].some(s=>r[s]?r[s]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(s=>(r.willChange||"").includes(s))||["paint","layout","strict","content"].some(s=>(r.contain||"").includes(s))}function hje(e){let t=vu(e);for(;Jl(t)&&!Ep(t);){if(eA(t))return t;if(s4(t))return null;t=vu(t)}return null}function tA(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Ep(e){return["html","body","#document"].includes(O0(e))}function fl(e){return Oi(e).getComputedStyle(e)}function a4(e){return ul(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function vu(e){if(O0(e)==="html")return e;const t=e.assignedSlot||e.parentNode||B8(e)&&e.host||ac(e);return B8(t)?t.host:t}function OJ(e){const t=vu(e);return Ep(t)?e.ownerDocument?e.ownerDocument.body:e.body:Jl(t)&&o1(t)?t:OJ(t)}function by(e,t,r){var s;t===void 0&&(t=[]),r===void 0&&(r=!0);const a=OJ(e),i=a===((s=e.ownerDocument)==null?void 0:s.body),o=Oi(a);if(i){const l=iM(o);return t.concat(o,o.visualViewport||[],o1(a)?a:[],l&&r?by(l):[])}return t.concat(a,by(a,[],r))}function iM(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function RJ(e){const t=fl(e);let r=parseFloat(t.width)||0,s=parseFloat(t.height)||0;const a=Jl(e),i=a?e.offsetWidth:r,o=a?e.offsetHeight:s,l=Mj(r)!==i||Mj(s)!==o;return l&&(r=i,s=o),{width:r,height:s,$:l}}function nA(e){return ul(e)?e:e.contextElement}function Om(e){const t=nA(e);if(!Jl(t))return Hl(1);const r=t.getBoundingClientRect(),{width:s,height:a,$:i}=RJ(t);let o=(i?Mj(r.width):r.width)/s,l=(i?Mj(r.height):r.height)/a;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const mje=Hl(0);function FJ(e){const t=Oi(e);return!tA()||!t.visualViewport?mje:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function pje(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==Oi(e)?!1:t}function sh(e,t,r,s){t===void 0&&(t=!1),r===void 0&&(r=!1);const a=e.getBoundingClientRect(),i=nA(e);let o=Hl(1);t&&(s?ul(s)&&(o=Om(s)):o=Om(e));const l=pje(i,r,s)?FJ(i):Hl(0);let c=(a.left+l.x)/o.x,d=(a.top+l.y)/o.y,u=a.width/o.x,f=a.height/o.y;if(i){const h=Oi(i),m=s&&ul(s)?Oi(s):s;let g=h,x=iM(g);for(;x&&s&&m!==g;){const y=Om(x),v=x.getBoundingClientRect(),b=fl(x),w=v.left+(x.clientLeft+parseFloat(b.paddingLeft))*y.x,N=v.top+(x.clientTop+parseFloat(b.paddingTop))*y.y;c*=y.x,d*=y.y,u*=y.x,f*=y.y,c+=w,d+=N,g=Oi(x),x=iM(g)}}return Pj({width:u,height:f,x:c,y:d})}function rA(e,t){const r=a4(e).scrollLeft;return t?t.left+r:sh(ac(e)).left+r}function zJ(e,t,r){r===void 0&&(r=!1);const s=e.getBoundingClientRect(),a=s.left+t.scrollLeft-(r?0:rA(e,s)),i=s.top+t.scrollTop;return{x:a,y:i}}function gje(e){let{elements:t,rect:r,offsetParent:s,strategy:a}=e;const i=a==="fixed",o=ac(s),l=t?s4(t.floating):!1;if(s===o||l&&i)return r;let c={scrollLeft:0,scrollTop:0},d=Hl(1);const u=Hl(0),f=Jl(s);if((f||!f&&!i)&&((O0(s)!=="body"||o1(o))&&(c=a4(s)),Jl(s))){const m=sh(s);d=Om(s),u.x=m.x+s.clientLeft,u.y=m.y+s.clientTop}const h=o&&!f&&!i?zJ(o,c,!0):Hl(0);return{width:r.width*d.x,height:r.height*d.y,x:r.x*d.x-c.scrollLeft*d.x+u.x+h.x,y:r.y*d.y-c.scrollTop*d.y+u.y+h.y}}function xje(e){return Array.from(e.getClientRects())}function yje(e){const t=ac(e),r=a4(e),s=e.ownerDocument.body,a=Pi(t.scrollWidth,t.clientWidth,s.scrollWidth,s.clientWidth),i=Pi(t.scrollHeight,t.clientHeight,s.scrollHeight,s.clientHeight);let o=-r.scrollLeft+rA(e);const l=-r.scrollTop;return fl(s).direction==="rtl"&&(o+=Pi(t.clientWidth,s.clientWidth)-a),{width:a,height:i,x:o,y:l}}function vje(e,t){const r=Oi(e),s=ac(e),a=r.visualViewport;let i=s.clientWidth,o=s.clientHeight,l=0,c=0;if(a){i=a.width,o=a.height;const d=tA();(!d||d&&t==="fixed")&&(l=a.offsetLeft,c=a.offsetTop)}return{width:i,height:o,x:l,y:c}}function bje(e,t){const r=sh(e,!0,t==="fixed"),s=r.top+e.clientTop,a=r.left+e.clientLeft,i=Jl(e)?Om(e):Hl(1),o=e.clientWidth*i.x,l=e.clientHeight*i.y,c=a*i.x,d=s*i.y;return{width:o,height:l,x:c,y:d}}function U8(e,t,r){let s;if(t==="viewport")s=vje(e,r);else if(t==="document")s=yje(ac(e));else if(ul(t))s=bje(t,r);else{const a=FJ(e);s={x:t.x-a.x,y:t.y-a.y,width:t.width,height:t.height}}return Pj(s)}function BJ(e,t){const r=vu(e);return r===t||!ul(r)||Ep(r)?!1:fl(r).position==="fixed"||BJ(r,t)}function wje(e,t){const r=t.get(e);if(r)return r;let s=by(e,[],!1).filter(l=>ul(l)&&O0(l)!=="body"),a=null;const i=fl(e).position==="fixed";let o=i?vu(e):e;for(;ul(o)&&!Ep(o);){const l=fl(o),c=eA(o);!c&&l.position==="fixed"&&(a=null),(i?!c&&!a:!c&&l.position==="static"&&!!a&&["absolute","fixed"].includes(a.position)||o1(o)&&!c&&BJ(e,o))?s=s.filter(u=>u!==o):a=l,o=vu(o)}return t.set(e,s),s}function jje(e){let{element:t,boundary:r,rootBoundary:s,strategy:a}=e;const o=[...r==="clippingAncestors"?s4(t)?[]:wje(t,this._c):[].concat(r),s],l=o[0],c=o.reduce((d,u)=>{const f=U8(t,u,a);return d.top=Pi(f.top,d.top),d.right=xu(f.right,d.right),d.bottom=xu(f.bottom,d.bottom),d.left=Pi(f.left,d.left),d},U8(t,l,a));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function Nje(e){const{width:t,height:r}=RJ(e);return{width:t,height:r}}function Sje(e,t,r){const s=Jl(t),a=ac(t),i=r==="fixed",o=sh(e,!0,i,t);let l={scrollLeft:0,scrollTop:0};const c=Hl(0);if(s||!s&&!i)if((O0(t)!=="body"||o1(a))&&(l=a4(t)),s){const h=sh(t,!0,i,t);c.x=h.x+t.clientLeft,c.y=h.y+t.clientTop}else a&&(c.x=rA(a));const d=a&&!s&&!i?zJ(a,l):Hl(0),u=o.left+l.scrollLeft-c.x-d.x,f=o.top+l.scrollTop-c.y-d.y;return{x:u,y:f,width:o.width,height:o.height}}function aC(e){return fl(e).position==="static"}function V8(e,t){if(!Jl(e)||fl(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return ac(e)===r&&(r=r.ownerDocument.body),r}function UJ(e,t){const r=Oi(e);if(s4(e))return r;if(!Jl(e)){let a=vu(e);for(;a&&!Ep(a);){if(ul(a)&&!aC(a))return a;a=vu(a)}return r}let s=V8(e,t);for(;s&&fje(s)&&aC(s);)s=V8(s,t);return s&&Ep(s)&&aC(s)&&!eA(s)?r:s||hje(e)||r}const Cje=async function(e){const t=this.getOffsetParent||UJ,r=this.getDimensions,s=await r(e.floating);return{reference:Sje(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:s.width,height:s.height}}};function kje(e){return fl(e).direction==="rtl"}const Mje={convertOffsetParentRelativeRectToViewportRelativeRect:gje,getDocumentElement:ac,getClippingRect:jje,getOffsetParent:UJ,getElementRects:Cje,getClientRects:xje,getDimensions:Nje,getScale:Om,isElement:ul,isRTL:kje};function VJ(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function _je(e,t){let r=null,s;const a=ac(e);function i(){var l;clearTimeout(s),(l=r)==null||l.disconnect(),r=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const d=e.getBoundingClientRect(),{left:u,top:f,width:h,height:m}=d;if(l||t(),!h||!m)return;const g=xb(f),x=xb(a.clientWidth-(u+h)),y=xb(a.clientHeight-(f+m)),v=xb(u),w={rootMargin:-g+"px "+-x+"px "+-y+"px "+-v+"px",threshold:Pi(0,xu(1,c))||1};let N=!0;function j(S){const C=S[0].intersectionRatio;if(C!==c){if(!N)return o();C?o(!1,C):s=setTimeout(()=>{o(!1,1e-7)},1e3)}C===1&&!VJ(d,e.getBoundingClientRect())&&o(),N=!1}try{r=new IntersectionObserver(j,{...w,root:a.ownerDocument})}catch{r=new IntersectionObserver(j,w)}r.observe(e)}return o(!0),i}function Pje(e,t,r,s){s===void 0&&(s={});const{ancestorScroll:a=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=s,d=nA(e),u=a||i?[...d?by(d):[],...by(t)]:[];u.forEach(v=>{a&&v.addEventListener("scroll",r,{passive:!0}),i&&v.addEventListener("resize",r)});const f=d&&l?_je(d,r):null;let h=-1,m=null;o&&(m=new ResizeObserver(v=>{let[b]=v;b&&b.target===d&&m&&(m.unobserve(t),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var w;(w=m)==null||w.observe(t)})),r()}),d&&!c&&m.observe(d),m.observe(t));let g,x=c?sh(e):null;c&&y();function y(){const v=sh(e);x&&!VJ(x,v)&&r(),x=v,g=requestAnimationFrame(y)}return r(),()=>{var v;u.forEach(b=>{a&&b.removeEventListener("scroll",r),i&&b.removeEventListener("resize",r)}),f==null||f(),(v=m)==null||v.disconnect(),m=null,c&&cancelAnimationFrame(g)}}const Tje=lje,Aje=cje,Eje=aje,Ije=uje,Lje=ije,H8=sje,Dje=dje,$je=(e,t,r)=>{const s=new Map,a={platform:Mje,...r},i={...a.platform,_c:s};return rje(e,t,{...a,platform:i})};var ww=typeof document<"u"?p.useLayoutEffect:p.useEffect;function Tj(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,s,a;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(s=r;s--!==0;)if(!Tj(e[s],t[s]))return!1;return!0}if(a=Object.keys(e),r=a.length,r!==Object.keys(t).length)return!1;for(s=r;s--!==0;)if(!{}.hasOwnProperty.call(t,a[s]))return!1;for(s=r;s--!==0;){const i=a[s];if(!(i==="_owner"&&e.$$typeof)&&!Tj(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function HJ(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function W8(e,t){const r=HJ(e);return Math.round(t*r)/r}function iC(e){const t=p.useRef(e);return ww(()=>{t.current=e}),t}function Oje(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:s=[],platform:a,elements:{reference:i,floating:o}={},transform:l=!0,whileElementsMounted:c,open:d}=e,[u,f]=p.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[h,m]=p.useState(s);Tj(h,s)||m(s);const[g,x]=p.useState(null),[y,v]=p.useState(null),b=p.useCallback(D=>{D!==S.current&&(S.current=D,x(D))},[]),w=p.useCallback(D=>{D!==C.current&&(C.current=D,v(D))},[]),N=i||g,j=o||y,S=p.useRef(null),C=p.useRef(null),k=p.useRef(u),M=c!=null,A=iC(c),P=iC(a),T=iC(d),I=p.useCallback(()=>{if(!S.current||!C.current)return;const D={placement:t,strategy:r,middleware:h};P.current&&(D.platform=P.current),$je(S.current,C.current,D).then(W=>{const E={...W,isPositioned:T.current!==!1};L.current&&!Tj(k.current,E)&&(k.current=E,ho.flushSync(()=>{f(E)}))})},[h,t,r,P,T]);ww(()=>{d===!1&&k.current.isPositioned&&(k.current.isPositioned=!1,f(D=>({...D,isPositioned:!1})))},[d]);const L=p.useRef(!1);ww(()=>(L.current=!0,()=>{L.current=!1}),[]),ww(()=>{if(N&&(S.current=N),j&&(C.current=j),N&&j){if(A.current)return A.current(N,j,I);I()}},[N,j,I,A,M]);const R=p.useMemo(()=>({reference:S,floating:C,setReference:b,setFloating:w}),[b,w]),G=p.useMemo(()=>({reference:N,floating:j}),[N,j]),$=p.useMemo(()=>{const D={position:r,left:0,top:0};if(!G.floating)return D;const W=W8(G.floating,u.x),E=W8(G.floating,u.y);return l?{...D,transform:"translate("+W+"px, "+E+"px)",...HJ(G.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:W,top:E}},[r,l,G.floating,u.x,u.y]);return p.useMemo(()=>({...u,update:I,refs:R,elements:G,floatingStyles:$}),[u,I,R,G,$])}const Rje=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:s,padding:a}=typeof e=="function"?e(r):e;return s&&t(s)?s.current!=null?H8({element:s.current,padding:a}).fn(r):{}:s?H8({element:s,padding:a}).fn(r):{}}}},Fje=(e,t)=>({...Tje(e),options:[e,t]}),zje=(e,t)=>({...Aje(e),options:[e,t]}),Bje=(e,t)=>({...Dje(e),options:[e,t]}),Uje=(e,t)=>({...Eje(e),options:[e,t]}),Vje=(e,t)=>({...Ije(e),options:[e,t]}),Hje=(e,t)=>({...Lje(e),options:[e,t]}),Wje=(e,t)=>({...Rje(e),options:[e,t]});var qje="Arrow",WJ=p.forwardRef((e,t)=>{const{children:r,width:s=10,height:a=5,...i}=e;return n.jsx(ht.svg,{...i,ref:t,width:s,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:n.jsx("polygon",{points:"0,0 30,0 15,10"})})});WJ.displayName=qje;var Gje=WJ,sA="Popper",[qJ,R0]=ws(sA),[Yje,GJ]=qJ(sA),YJ=e=>{const{__scopePopper:t,children:r}=e,[s,a]=p.useState(null);return n.jsx(Yje,{scope:t,anchor:s,onAnchorChange:a,children:r})};YJ.displayName=sA;var QJ="PopperAnchor",KJ=p.forwardRef((e,t)=>{const{__scopePopper:r,virtualRef:s,...a}=e,i=GJ(QJ,r),o=p.useRef(null),l=rn(t,o);return p.useEffect(()=>{i.onAnchorChange((s==null?void 0:s.current)||o.current)}),s?null:n.jsx(ht.div,{...a,ref:l})});KJ.displayName=QJ;var aA="PopperContent",[Qje,Kje]=qJ(aA),JJ=p.forwardRef((e,t)=>{var pe,Me,re,de,he,ce;const{__scopePopper:r,side:s="bottom",sideOffset:a=0,align:i="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:d=[],collisionPadding:u=0,sticky:f="partial",hideWhenDetached:h=!1,updatePositionStrategy:m="optimized",onPlaced:g,...x}=e,y=GJ(aA,r),[v,b]=p.useState(null),w=rn(t,Be=>b(Be)),[N,j]=p.useState(null),S=i1(N),C=(S==null?void 0:S.width)??0,k=(S==null?void 0:S.height)??0,M=s+(i!=="center"?"-"+i:""),A=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},P=Array.isArray(d)?d:[d],T=P.length>0,I={padding:A,boundary:P.filter(Zje),altBoundary:T},{refs:L,floatingStyles:R,placement:G,isPositioned:$,middlewareData:D}=Oje({strategy:"fixed",placement:M,whileElementsMounted:(...Be)=>Pje(...Be,{animationFrame:m==="always"}),elements:{reference:y.anchor},middleware:[Fje({mainAxis:a+k,alignmentAxis:o}),c&&zje({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?Bje():void 0,...I}),c&&Uje({...I}),Vje({...I,apply:({elements:Be,rects:le,availableWidth:$e,availableHeight:et})=>{const{width:_e,height:ot}=le.reference,rt=Be.floating.style;rt.setProperty("--radix-popper-available-width",`${$e}px`),rt.setProperty("--radix-popper-available-height",`${et}px`),rt.setProperty("--radix-popper-anchor-width",`${_e}px`),rt.setProperty("--radix-popper-anchor-height",`${ot}px`)}}),N&&Wje({element:N,padding:l}),Xje({arrowWidth:C,arrowHeight:k}),h&&Hje({strategy:"referenceHidden",...I})]}),[W,E]=eZ(G),F=Gr(g);ls(()=>{$&&(F==null||F())},[$,F]);const B=(pe=D.arrow)==null?void 0:pe.x,Z=(Me=D.arrow)==null?void 0:Me.y,ne=((re=D.arrow)==null?void 0:re.centerOffset)!==0,[Y,me]=p.useState();return ls(()=>{v&&me(window.getComputedStyle(v).zIndex)},[v]),n.jsx("div",{ref:L.setFloating,"data-radix-popper-content-wrapper":"",style:{...R,transform:$?R.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Y,"--radix-popper-transform-origin":[(de=D.transformOrigin)==null?void 0:de.x,(he=D.transformOrigin)==null?void 0:he.y].join(" "),...((ce=D.hide)==null?void 0:ce.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:n.jsx(Qje,{scope:r,placedSide:W,onArrowChange:j,arrowX:B,arrowY:Z,shouldHideArrow:ne,children:n.jsx(ht.div,{"data-side":W,"data-align":E,...x,ref:w,style:{...x.style,animation:$?void 0:"none"}})})})});JJ.displayName=aA;var ZJ="PopperArrow",Jje={top:"bottom",right:"left",bottom:"top",left:"right"},XJ=p.forwardRef(function(t,r){const{__scopePopper:s,...a}=t,i=Kje(ZJ,s),o=Jje[i.placedSide];return n.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:n.jsx(Gje,{...a,ref:r,style:{...a.style,display:"block"}})})});XJ.displayName=ZJ;function Zje(e){return e!==null}var Xje=e=>({name:"transformOrigin",options:e,fn(t){var y,v,b;const{placement:r,rects:s,middlewareData:a}=t,o=((y=a.arrow)==null?void 0:y.centerOffset)!==0,l=o?0:e.arrowWidth,c=o?0:e.arrowHeight,[d,u]=eZ(r),f={start:"0%",center:"50%",end:"100%"}[u],h=(((v=a.arrow)==null?void 0:v.x)??0)+l/2,m=(((b=a.arrow)==null?void 0:b.y)??0)+c/2;let g="",x="";return d==="bottom"?(g=o?f:`${h}px`,x=`${-c}px`):d==="top"?(g=o?f:`${h}px`,x=`${s.floating.height+c}px`):d==="right"?(g=`${-c}px`,x=o?f:`${m}px`):d==="left"&&(g=`${s.floating.width+c}px`,x=o?f:`${m}px`),{data:{x:g,y:x}}}});function eZ(e){const[t,r="center"]=e.split("-");return[t,r]}var iA=YJ,i4=KJ,oA=JJ,lA=XJ,e2e=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Bh=new WeakMap,yb=new WeakMap,vb={},oC=0,tZ=function(e){return e&&(e.host||tZ(e.parentNode))},t2e=function(e,t){return t.map(function(r){if(e.contains(r))return r;var s=tZ(r);return s&&e.contains(s)?s:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(r){return!!r})},n2e=function(e,t,r,s){var a=t2e(t,Array.isArray(e)?e:[e]);vb[r]||(vb[r]=new WeakMap);var i=vb[r],o=[],l=new Set,c=new Set(a),d=function(f){!f||l.has(f)||(l.add(f),d(f.parentNode))};a.forEach(d);var u=function(f){!f||c.has(f)||Array.prototype.forEach.call(f.children,function(h){if(l.has(h))u(h);else try{var m=h.getAttribute(s),g=m!==null&&m!=="false",x=(Bh.get(h)||0)+1,y=(i.get(h)||0)+1;Bh.set(h,x),i.set(h,y),o.push(h),x===1&&g&&yb.set(h,!0),y===1&&h.setAttribute(r,"true"),g||h.setAttribute(s,"true")}catch(v){console.error("aria-hidden: cannot operate on ",h,v)}})};return u(t),l.clear(),oC++,function(){o.forEach(function(f){var h=Bh.get(f)-1,m=i.get(f)-1;Bh.set(f,h),i.set(f,m),h||(yb.has(f)||f.removeAttribute(s),yb.delete(f)),m||f.removeAttribute(r)}),oC--,oC||(Bh=new WeakMap,Bh=new WeakMap,yb=new WeakMap,vb={})}},cA=function(e,t,r){r===void 0&&(r="data-aria-hidden");var s=Array.from(Array.isArray(e)?e:[e]),a=e2e(e);return a?(s.push.apply(s,Array.from(a.querySelectorAll("[aria-live]"))),n2e(s,a,r,"aria-hidden")):function(){return null}},Ll=function(){return Ll=Object.assign||function(t){for(var r,s=1,a=arguments.length;s<a;s++){r=arguments[s];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},Ll.apply(this,arguments)};function nZ(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(r[s[a]]=e[s[a]]);return r}function Fa(e,t,r,s){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{d(s.next(u))}catch(f){o(f)}}function c(u){try{d(s.throw(u))}catch(f){o(f)}}function d(u){u.done?i(u.value):a(u.value).then(l,c)}d((s=s.apply(e,t||[])).next())})}function r2e(e,t,r){if(r||arguments.length===2)for(var s=0,a=t.length,i;s<a;s++)(i||!(s in t))&&(i||(i=Array.prototype.slice.call(t,0,s)),i[s]=t[s]);return e.concat(i||Array.prototype.slice.call(t))}var jw="right-scroll-bar-position",Nw="width-before-scroll-bar",s2e="with-scroll-bars-hidden",a2e="--removed-body-scroll-bar-size";function lC(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function i2e(e,t){var r=p.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(s){var a=r.value;a!==s&&(r.value=s,r.callback(s,a))}}}})[0];return r.callback=t,r.facade}var o2e=typeof window<"u"?p.useLayoutEffect:p.useEffect,q8=new WeakMap;function l2e(e,t){var r=i2e(null,function(s){return e.forEach(function(a){return lC(a,s)})});return o2e(function(){var s=q8.get(r);if(s){var a=new Set(s),i=new Set(e),o=r.current;a.forEach(function(l){i.has(l)||lC(l,null)}),i.forEach(function(l){a.has(l)||lC(l,o)})}q8.set(r,e)},[e]),r}function c2e(e){return e}function d2e(e,t){t===void 0&&(t=c2e);var r=[],s=!1,a={read:function(){if(s)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(i){var o=t(i,s);return r.push(o),function(){r=r.filter(function(l){return l!==o})}},assignSyncMedium:function(i){for(s=!0;r.length;){var o=r;r=[],o.forEach(i)}r={push:function(l){return i(l)},filter:function(){return r}}},assignMedium:function(i){s=!0;var o=[];if(r.length){var l=r;r=[],l.forEach(i),o=r}var c=function(){var u=o;o=[],u.forEach(i)},d=function(){return Promise.resolve().then(c)};d(),r={push:function(u){o.push(u),d()},filter:function(u){return o=o.filter(u),r}}}};return a}function u2e(e){e===void 0&&(e={});var t=d2e(null);return t.options=Ll({async:!0,ssr:!1},e),t}var rZ=function(e){var t=e.sideCar,r=nZ(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var s=t.read();if(!s)throw new Error("Sidecar medium not found");return p.createElement(s,Ll({},r))};rZ.isSideCarExport=!0;function f2e(e,t){return e.useMedium(t),rZ}var sZ=u2e(),cC=function(){},o4=p.forwardRef(function(e,t){var r=p.useRef(null),s=p.useState({onScrollCapture:cC,onWheelCapture:cC,onTouchMoveCapture:cC}),a=s[0],i=s[1],o=e.forwardProps,l=e.children,c=e.className,d=e.removeScrollBar,u=e.enabled,f=e.shards,h=e.sideCar,m=e.noIsolation,g=e.inert,x=e.allowPinchZoom,y=e.as,v=y===void 0?"div":y,b=e.gapMode,w=nZ(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),N=h,j=l2e([r,t]),S=Ll(Ll({},w),a);return p.createElement(p.Fragment,null,u&&p.createElement(N,{sideCar:sZ,removeScrollBar:d,shards:f,noIsolation:m,inert:g,setCallbacks:i,allowPinchZoom:!!x,lockRef:r,gapMode:b}),o?p.cloneElement(p.Children.only(l),Ll(Ll({},S),{ref:j})):p.createElement(v,Ll({},S,{className:c,ref:j}),l))});o4.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};o4.classNames={fullWidth:Nw,zeroRight:jw};var h2e=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function m2e(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=h2e();return t&&e.setAttribute("nonce",t),e}function p2e(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function g2e(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var x2e=function(){var e=0,t=null;return{add:function(r){e==0&&(t=m2e())&&(p2e(t,r),g2e(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},y2e=function(){var e=x2e();return function(t,r){p.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},aZ=function(){var e=y2e(),t=function(r){var s=r.styles,a=r.dynamic;return e(s,a),null};return t},v2e={left:0,top:0,right:0,gap:0},dC=function(e){return parseInt(e||"",10)||0},b2e=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],s=t[e==="padding"?"paddingTop":"marginTop"],a=t[e==="padding"?"paddingRight":"marginRight"];return[dC(r),dC(s),dC(a)]},w2e=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return v2e;var t=b2e(e),r=document.documentElement.clientWidth,s=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,s-r+t[2]-t[0])}},j2e=aZ(),Rm="data-scroll-locked",N2e=function(e,t,r,s){var a=e.left,i=e.top,o=e.right,l=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(s2e,` {
   overflow: hidden `).concat(s,`;
   padding-right: `).concat(l,"px ").concat(s,`;
  }
  body[`).concat(Rm,`] {
    overflow: hidden `).concat(s,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(s,";"),r==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(s,`;
    `),r==="padding"&&"padding-right: ".concat(l,"px ").concat(s,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(jw,` {
    right: `).concat(l,"px ").concat(s,`;
  }
  
  .`).concat(Nw,` {
    margin-right: `).concat(l,"px ").concat(s,`;
  }
  
  .`).concat(jw," .").concat(jw,` {
    right: 0 `).concat(s,`;
  }
  
  .`).concat(Nw," .").concat(Nw,` {
    margin-right: 0 `).concat(s,`;
  }
  
  body[`).concat(Rm,`] {
    `).concat(a2e,": ").concat(l,`px;
  }
`)},G8=function(){var e=parseInt(document.body.getAttribute(Rm)||"0",10);return isFinite(e)?e:0},S2e=function(){p.useEffect(function(){return document.body.setAttribute(Rm,(G8()+1).toString()),function(){var e=G8()-1;e<=0?document.body.removeAttribute(Rm):document.body.setAttribute(Rm,e.toString())}},[])},C2e=function(e){var t=e.noRelative,r=e.noImportant,s=e.gapMode,a=s===void 0?"margin":s;S2e();var i=p.useMemo(function(){return w2e(a)},[a]);return p.createElement(j2e,{styles:N2e(i,!t,a,r?"":"!important")})},oM=!1;if(typeof window<"u")try{var bb=Object.defineProperty({},"passive",{get:function(){return oM=!0,!0}});window.addEventListener("test",bb,bb),window.removeEventListener("test",bb,bb)}catch{oM=!1}var Uh=oM?{passive:!1}:!1,k2e=function(e){return e.tagName==="TEXTAREA"},iZ=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!k2e(e)&&r[t]==="visible")},M2e=function(e){return iZ(e,"overflowY")},_2e=function(e){return iZ(e,"overflowX")},Y8=function(e,t){var r=t.ownerDocument,s=t;do{typeof ShadowRoot<"u"&&s instanceof ShadowRoot&&(s=s.host);var a=oZ(e,s);if(a){var i=lZ(e,s),o=i[1],l=i[2];if(o>l)return!0}s=s.parentNode}while(s&&s!==r.body);return!1},P2e=function(e){var t=e.scrollTop,r=e.scrollHeight,s=e.clientHeight;return[t,r,s]},T2e=function(e){var t=e.scrollLeft,r=e.scrollWidth,s=e.clientWidth;return[t,r,s]},oZ=function(e,t){return e==="v"?M2e(t):_2e(t)},lZ=function(e,t){return e==="v"?P2e(t):T2e(t)},A2e=function(e,t){return e==="h"&&t==="rtl"?-1:1},E2e=function(e,t,r,s,a){var i=A2e(e,window.getComputedStyle(t).direction),o=i*s,l=r.target,c=t.contains(l),d=!1,u=o>0,f=0,h=0;do{var m=lZ(e,l),g=m[0],x=m[1],y=m[2],v=x-y-i*g;(g||v)&&oZ(e,l)&&(f+=v,h+=g),l instanceof ShadowRoot?l=l.host:l=l.parentNode}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(u&&Math.abs(f)<1||!u&&Math.abs(h)<1)&&(d=!0),d},wb=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Q8=function(e){return[e.deltaX,e.deltaY]},K8=function(e){return e&&"current"in e?e.current:e},I2e=function(e,t){return e[0]===t[0]&&e[1]===t[1]},L2e=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},D2e=0,Vh=[];function $2e(e){var t=p.useRef([]),r=p.useRef([0,0]),s=p.useRef(),a=p.useState(D2e++)[0],i=p.useState(aZ)[0],o=p.useRef(e);p.useEffect(function(){o.current=e},[e]),p.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var x=r2e([e.lockRef.current],(e.shards||[]).map(K8),!0).filter(Boolean);return x.forEach(function(y){return y.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),x.forEach(function(y){return y.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var l=p.useCallback(function(x,y){if("touches"in x&&x.touches.length===2||x.type==="wheel"&&x.ctrlKey)return!o.current.allowPinchZoom;var v=wb(x),b=r.current,w="deltaX"in x?x.deltaX:b[0]-v[0],N="deltaY"in x?x.deltaY:b[1]-v[1],j,S=x.target,C=Math.abs(w)>Math.abs(N)?"h":"v";if("touches"in x&&C==="h"&&S.type==="range")return!1;var k=Y8(C,S);if(!k)return!0;if(k?j=C:(j=C==="v"?"h":"v",k=Y8(C,S)),!k)return!1;if(!s.current&&"changedTouches"in x&&(w||N)&&(s.current=j),!j)return!0;var M=s.current||j;return E2e(M,y,x,M==="h"?w:N)},[]),c=p.useCallback(function(x){var y=x;if(!(!Vh.length||Vh[Vh.length-1]!==i)){var v="deltaY"in y?Q8(y):wb(y),b=t.current.filter(function(j){return j.name===y.type&&(j.target===y.target||y.target===j.shadowParent)&&I2e(j.delta,v)})[0];if(b&&b.should){y.cancelable&&y.preventDefault();return}if(!b){var w=(o.current.shards||[]).map(K8).filter(Boolean).filter(function(j){return j.contains(y.target)}),N=w.length>0?l(y,w[0]):!o.current.noIsolation;N&&y.cancelable&&y.preventDefault()}}},[]),d=p.useCallback(function(x,y,v,b){var w={name:x,delta:y,target:v,should:b,shadowParent:O2e(v)};t.current.push(w),setTimeout(function(){t.current=t.current.filter(function(N){return N!==w})},1)},[]),u=p.useCallback(function(x){r.current=wb(x),s.current=void 0},[]),f=p.useCallback(function(x){d(x.type,Q8(x),x.target,l(x,e.lockRef.current))},[]),h=p.useCallback(function(x){d(x.type,wb(x),x.target,l(x,e.lockRef.current))},[]);p.useEffect(function(){return Vh.push(i),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:h}),document.addEventListener("wheel",c,Uh),document.addEventListener("touchmove",c,Uh),document.addEventListener("touchstart",u,Uh),function(){Vh=Vh.filter(function(x){return x!==i}),document.removeEventListener("wheel",c,Uh),document.removeEventListener("touchmove",c,Uh),document.removeEventListener("touchstart",u,Uh)}},[]);var m=e.removeScrollBar,g=e.inert;return p.createElement(p.Fragment,null,g?p.createElement(i,{styles:L2e(a)}):null,m?p.createElement(C2e,{gapMode:e.gapMode}):null)}function O2e(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const R2e=f2e(sZ,$2e);var l4=p.forwardRef(function(e,t){return p.createElement(o4,Ll({},e,{ref:t,sideCar:R2e}))});l4.classNames=o4.classNames;var F2e=[" ","Enter","ArrowUp","ArrowDown"],z2e=[" ","Enter"],l1="Select",[c4,d4,B2e]=qv(l1),[F0]=ws(l1,[B2e,R0]),u4=R0(),[U2e,$u]=F0(l1),[V2e,H2e]=F0(l1),cZ=e=>{const{__scopeSelect:t,children:r,open:s,defaultOpen:a,onOpenChange:i,value:o,defaultValue:l,onValueChange:c,dir:d,name:u,autoComplete:f,disabled:h,required:m,form:g}=e,x=u4(t),[y,v]=p.useState(null),[b,w]=p.useState(null),[N,j]=p.useState(!1),S=Ch(d),[C=!1,k]=qa({prop:s,defaultProp:a,onChange:i}),[M,A]=qa({prop:o,defaultProp:l,onChange:c}),P=p.useRef(null),T=y?g||!!y.closest("form"):!0,[I,L]=p.useState(new Set),R=Array.from(I).map(G=>G.props.value).join(";");return n.jsx(iA,{...x,children:n.jsxs(U2e,{required:m,scope:t,trigger:y,onTriggerChange:v,valueNode:b,onValueNodeChange:w,valueNodeHasChildren:N,onValueNodeHasChildrenChange:j,contentId:Gs(),value:M,onValueChange:A,open:C,onOpenChange:k,dir:S,triggerPointerDownPosRef:P,disabled:h,children:[n.jsx(c4.Provider,{scope:t,children:n.jsx(V2e,{scope:e.__scopeSelect,onNativeOptionAdd:p.useCallback(G=>{L($=>new Set($).add(G))},[]),onNativeOptionRemove:p.useCallback(G=>{L($=>{const D=new Set($);return D.delete(G),D})},[]),children:r})}),T?n.jsxs(LZ,{"aria-hidden":!0,required:m,tabIndex:-1,name:u,autoComplete:f,value:M,onChange:G=>A(G.target.value),disabled:h,form:g,children:[M===void 0?n.jsx("option",{value:""}):null,Array.from(I)]},R):null]})})};cZ.displayName=l1;var dZ="SelectTrigger",uZ=p.forwardRef((e,t)=>{const{__scopeSelect:r,disabled:s=!1,...a}=e,i=u4(r),o=$u(dZ,r),l=o.disabled||s,c=rn(t,o.onTriggerChange),d=d4(r),u=p.useRef("touch"),[f,h,m]=DZ(x=>{const y=d().filter(w=>!w.disabled),v=y.find(w=>w.value===o.value),b=$Z(y,x,v);b!==void 0&&o.onValueChange(b.value)}),g=x=>{l||(o.onOpenChange(!0),m()),x&&(o.triggerPointerDownPosRef.current={x:Math.round(x.pageX),y:Math.round(x.pageY)})};return n.jsx(i4,{asChild:!0,...i,children:n.jsx(ht.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":IZ(o.value)?"":void 0,...a,ref:c,onClick:ut(a.onClick,x=>{x.currentTarget.focus(),u.current!=="mouse"&&g(x)}),onPointerDown:ut(a.onPointerDown,x=>{u.current=x.pointerType;const y=x.target;y.hasPointerCapture(x.pointerId)&&y.releasePointerCapture(x.pointerId),x.button===0&&x.ctrlKey===!1&&x.pointerType==="mouse"&&(g(x),x.preventDefault())}),onKeyDown:ut(a.onKeyDown,x=>{const y=f.current!=="";!(x.ctrlKey||x.altKey||x.metaKey)&&x.key.length===1&&h(x.key),!(y&&x.key===" ")&&F2e.includes(x.key)&&(g(),x.preventDefault())})})})});uZ.displayName=dZ;var fZ="SelectValue",hZ=p.forwardRef((e,t)=>{const{__scopeSelect:r,className:s,style:a,children:i,placeholder:o="",...l}=e,c=$u(fZ,r),{onValueNodeHasChildrenChange:d}=c,u=i!==void 0,f=rn(t,c.onValueNodeChange);return ls(()=>{d(u)},[d,u]),n.jsx(ht.span,{...l,ref:f,style:{pointerEvents:"none"},children:IZ(c.value)?n.jsx(n.Fragment,{children:o}):i})});hZ.displayName=fZ;var W2e="SelectIcon",mZ=p.forwardRef((e,t)=>{const{__scopeSelect:r,children:s,...a}=e;return n.jsx(ht.span,{"aria-hidden":!0,...a,ref:t,children:s||""})});mZ.displayName=W2e;var q2e="SelectPortal",pZ=e=>n.jsx(Gv,{asChild:!0,...e});pZ.displayName=q2e;var ah="SelectContent",gZ=p.forwardRef((e,t)=>{const r=$u(ah,e.__scopeSelect),[s,a]=p.useState();if(ls(()=>{a(new DocumentFragment)},[]),!r.open){const i=s;return i?ho.createPortal(n.jsx(xZ,{scope:e.__scopeSelect,children:n.jsx(c4.Slot,{scope:e.__scopeSelect,children:n.jsx("div",{children:e.children})})}),i):null}return n.jsx(yZ,{...e,ref:t})});gZ.displayName=ah;var Ro=10,[xZ,Ou]=F0(ah),G2e="SelectContentImpl",Y2e=th("SelectContent.RemoveScroll"),yZ=p.forwardRef((e,t)=>{const{__scopeSelect:r,position:s="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:i,onPointerDownOutside:o,side:l,sideOffset:c,align:d,alignOffset:u,arrowPadding:f,collisionBoundary:h,collisionPadding:m,sticky:g,hideWhenDetached:x,avoidCollisions:y,...v}=e,b=$u(ah,r),[w,N]=p.useState(null),[j,S]=p.useState(null),C=rn(t,pe=>N(pe)),[k,M]=p.useState(null),[A,P]=p.useState(null),T=d4(r),[I,L]=p.useState(!1),R=p.useRef(!1);p.useEffect(()=>{if(w)return cA(w)},[w]),KT();const G=p.useCallback(pe=>{const[Me,...re]=T().map(ce=>ce.ref.current),[de]=re.slice(-1),he=document.activeElement;for(const ce of pe)if(ce===he||(ce==null||ce.scrollIntoView({block:"nearest"}),ce===Me&&j&&(j.scrollTop=0),ce===de&&j&&(j.scrollTop=j.scrollHeight),ce==null||ce.focus(),document.activeElement!==he))return},[T,j]),$=p.useCallback(()=>G([k,w]),[G,k,w]);p.useEffect(()=>{I&&$()},[I,$]);const{onOpenChange:D,triggerPointerDownPosRef:W}=b;p.useEffect(()=>{if(w){let pe={x:0,y:0};const Me=de=>{var he,ce;pe={x:Math.abs(Math.round(de.pageX)-(((he=W.current)==null?void 0:he.x)??0)),y:Math.abs(Math.round(de.pageY)-(((ce=W.current)==null?void 0:ce.y)??0))}},re=de=>{pe.x<=10&&pe.y<=10?de.preventDefault():w.contains(de.target)||D(!1),document.removeEventListener("pointermove",Me),W.current=null};return W.current!==null&&(document.addEventListener("pointermove",Me),document.addEventListener("pointerup",re,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Me),document.removeEventListener("pointerup",re,{capture:!0})}}},[w,D,W]),p.useEffect(()=>{const pe=()=>D(!1);return window.addEventListener("blur",pe),window.addEventListener("resize",pe),()=>{window.removeEventListener("blur",pe),window.removeEventListener("resize",pe)}},[D]);const[E,F]=DZ(pe=>{const Me=T().filter(he=>!he.disabled),re=Me.find(he=>he.ref.current===document.activeElement),de=$Z(Me,pe,re);de&&setTimeout(()=>de.ref.current.focus())}),B=p.useCallback((pe,Me,re)=>{const de=!R.current&&!re;(b.value!==void 0&&b.value===Me||de)&&(M(pe),de&&(R.current=!0))},[b.value]),Z=p.useCallback(()=>w==null?void 0:w.focus(),[w]),ne=p.useCallback((pe,Me,re)=>{const de=!R.current&&!re;(b.value!==void 0&&b.value===Me||de)&&P(pe)},[b.value]),Y=s==="popper"?lM:vZ,me=Y===lM?{side:l,sideOffset:c,align:d,alignOffset:u,arrowPadding:f,collisionBoundary:h,collisionPadding:m,sticky:g,hideWhenDetached:x,avoidCollisions:y}:{};return n.jsx(xZ,{scope:r,content:w,viewport:j,onViewportChange:S,itemRefCallback:B,selectedItem:k,onItemLeave:Z,itemTextRefCallback:ne,focusSelectedItem:$,selectedItemText:A,position:s,isPositioned:I,searchRef:E,children:n.jsx(l4,{as:Y2e,allowPinchZoom:!0,children:n.jsx(n4,{asChild:!0,trapped:b.open,onMountAutoFocus:pe=>{pe.preventDefault()},onUnmountAutoFocus:ut(a,pe=>{var Me;(Me=b.trigger)==null||Me.focus({preventScroll:!0}),pe.preventDefault()}),children:n.jsx(_0,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:pe=>pe.preventDefault(),onDismiss:()=>b.onOpenChange(!1),children:n.jsx(Y,{role:"listbox",id:b.contentId,"data-state":b.open?"open":"closed",dir:b.dir,onContextMenu:pe=>pe.preventDefault(),...v,...me,onPlaced:()=>L(!0),ref:C,style:{display:"flex",flexDirection:"column",outline:"none",...v.style},onKeyDown:ut(v.onKeyDown,pe=>{const Me=pe.ctrlKey||pe.altKey||pe.metaKey;if(pe.key==="Tab"&&pe.preventDefault(),!Me&&pe.key.length===1&&F(pe.key),["ArrowUp","ArrowDown","Home","End"].includes(pe.key)){let de=T().filter(he=>!he.disabled).map(he=>he.ref.current);if(["ArrowUp","End"].includes(pe.key)&&(de=de.slice().reverse()),["ArrowUp","ArrowDown"].includes(pe.key)){const he=pe.target,ce=de.indexOf(he);de=de.slice(ce+1)}setTimeout(()=>G(de)),pe.preventDefault()}})})})})})})});yZ.displayName=G2e;var Q2e="SelectItemAlignedPosition",vZ=p.forwardRef((e,t)=>{const{__scopeSelect:r,onPlaced:s,...a}=e,i=$u(ah,r),o=Ou(ah,r),[l,c]=p.useState(null),[d,u]=p.useState(null),f=rn(t,C=>u(C)),h=d4(r),m=p.useRef(!1),g=p.useRef(!0),{viewport:x,selectedItem:y,selectedItemText:v,focusSelectedItem:b}=o,w=p.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&d&&x&&y&&v){const C=i.trigger.getBoundingClientRect(),k=d.getBoundingClientRect(),M=i.valueNode.getBoundingClientRect(),A=v.getBoundingClientRect();if(i.dir!=="rtl"){const he=A.left-k.left,ce=M.left-he,Be=C.left-ce,le=C.width+Be,$e=Math.max(le,k.width),et=window.innerWidth-Ro,_e=yy(ce,[Ro,Math.max(Ro,et-$e)]);l.style.minWidth=le+"px",l.style.left=_e+"px"}else{const he=k.right-A.right,ce=window.innerWidth-M.right-he,Be=window.innerWidth-C.right-ce,le=C.width+Be,$e=Math.max(le,k.width),et=window.innerWidth-Ro,_e=yy(ce,[Ro,Math.max(Ro,et-$e)]);l.style.minWidth=le+"px",l.style.right=_e+"px"}const P=h(),T=window.innerHeight-Ro*2,I=x.scrollHeight,L=window.getComputedStyle(d),R=parseInt(L.borderTopWidth,10),G=parseInt(L.paddingTop,10),$=parseInt(L.borderBottomWidth,10),D=parseInt(L.paddingBottom,10),W=R+G+I+D+$,E=Math.min(y.offsetHeight*5,W),F=window.getComputedStyle(x),B=parseInt(F.paddingTop,10),Z=parseInt(F.paddingBottom,10),ne=C.top+C.height/2-Ro,Y=T-ne,me=y.offsetHeight/2,pe=y.offsetTop+me,Me=R+G+pe,re=W-Me;if(Me<=ne){const he=P.length>0&&y===P[P.length-1].ref.current;l.style.bottom="0px";const ce=d.clientHeight-x.offsetTop-x.offsetHeight,Be=Math.max(Y,me+(he?Z:0)+ce+$),le=Me+Be;l.style.height=le+"px"}else{const he=P.length>0&&y===P[0].ref.current;l.style.top="0px";const Be=Math.max(ne,R+x.offsetTop+(he?B:0)+me)+re;l.style.height=Be+"px",x.scrollTop=Me-ne+x.offsetTop}l.style.margin=`${Ro}px 0`,l.style.minHeight=E+"px",l.style.maxHeight=T+"px",s==null||s(),requestAnimationFrame(()=>m.current=!0)}},[h,i.trigger,i.valueNode,l,d,x,y,v,i.dir,s]);ls(()=>w(),[w]);const[N,j]=p.useState();ls(()=>{d&&j(window.getComputedStyle(d).zIndex)},[d]);const S=p.useCallback(C=>{C&&g.current===!0&&(w(),b==null||b(),g.current=!1)},[w,b]);return n.jsx(J2e,{scope:r,contentWrapper:l,shouldExpandOnScrollRef:m,onScrollButtonChange:S,children:n.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:N},children:n.jsx(ht.div,{...a,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});vZ.displayName=Q2e;var K2e="SelectPopperPosition",lM=p.forwardRef((e,t)=>{const{__scopeSelect:r,align:s="start",collisionPadding:a=Ro,...i}=e,o=u4(r);return n.jsx(oA,{...o,...i,ref:t,align:s,collisionPadding:a,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});lM.displayName=K2e;var[J2e,dA]=F0(ah,{}),cM="SelectViewport",bZ=p.forwardRef((e,t)=>{const{__scopeSelect:r,nonce:s,...a}=e,i=Ou(cM,r),o=dA(cM,r),l=rn(t,i.onViewportChange),c=p.useRef(0);return n.jsxs(n.Fragment,{children:[n.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),n.jsx(c4.Slot,{scope:r,children:n.jsx(ht.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:ut(a.onScroll,d=>{const u=d.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:h}=o;if(h!=null&&h.current&&f){const m=Math.abs(c.current-u.scrollTop);if(m>0){const g=window.innerHeight-Ro*2,x=parseFloat(f.style.minHeight),y=parseFloat(f.style.height),v=Math.max(x,y);if(v<g){const b=v+m,w=Math.min(g,b),N=b-w;f.style.height=w+"px",f.style.bottom==="0px"&&(u.scrollTop=N>0?N:0,f.style.justifyContent="flex-end")}}}c.current=u.scrollTop})})})]})});bZ.displayName=cM;var wZ="SelectGroup",[Z2e,X2e]=F0(wZ),eNe=p.forwardRef((e,t)=>{const{__scopeSelect:r,...s}=e,a=Gs();return n.jsx(Z2e,{scope:r,id:a,children:n.jsx(ht.div,{role:"group","aria-labelledby":a,...s,ref:t})})});eNe.displayName=wZ;var jZ="SelectLabel",NZ=p.forwardRef((e,t)=>{const{__scopeSelect:r,...s}=e,a=X2e(jZ,r);return n.jsx(ht.div,{id:a.id,...s,ref:t})});NZ.displayName=jZ;var Aj="SelectItem",[tNe,SZ]=F0(Aj),CZ=p.forwardRef((e,t)=>{const{__scopeSelect:r,value:s,disabled:a=!1,textValue:i,...o}=e,l=$u(Aj,r),c=Ou(Aj,r),d=l.value===s,[u,f]=p.useState(i??""),[h,m]=p.useState(!1),g=rn(t,b=>{var w;return(w=c.itemRefCallback)==null?void 0:w.call(c,b,s,a)}),x=Gs(),y=p.useRef("touch"),v=()=>{a||(l.onValueChange(s),l.onOpenChange(!1))};if(s==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return n.jsx(tNe,{scope:r,value:s,disabled:a,textId:x,isSelected:d,onItemTextChange:p.useCallback(b=>{f(w=>w||((b==null?void 0:b.textContent)??"").trim())},[]),children:n.jsx(c4.ItemSlot,{scope:r,value:s,disabled:a,textValue:u,children:n.jsx(ht.div,{role:"option","aria-labelledby":x,"data-highlighted":h?"":void 0,"aria-selected":d&&h,"data-state":d?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...o,ref:g,onFocus:ut(o.onFocus,()=>m(!0)),onBlur:ut(o.onBlur,()=>m(!1)),onClick:ut(o.onClick,()=>{y.current!=="mouse"&&v()}),onPointerUp:ut(o.onPointerUp,()=>{y.current==="mouse"&&v()}),onPointerDown:ut(o.onPointerDown,b=>{y.current=b.pointerType}),onPointerMove:ut(o.onPointerMove,b=>{var w;y.current=b.pointerType,a?(w=c.onItemLeave)==null||w.call(c):y.current==="mouse"&&b.currentTarget.focus({preventScroll:!0})}),onPointerLeave:ut(o.onPointerLeave,b=>{var w;b.currentTarget===document.activeElement&&((w=c.onItemLeave)==null||w.call(c))}),onKeyDown:ut(o.onKeyDown,b=>{var N;((N=c.searchRef)==null?void 0:N.current)!==""&&b.key===" "||(z2e.includes(b.key)&&v(),b.key===" "&&b.preventDefault())})})})})});CZ.displayName=Aj;var sx="SelectItemText",kZ=p.forwardRef((e,t)=>{const{__scopeSelect:r,className:s,style:a,...i}=e,o=$u(sx,r),l=Ou(sx,r),c=SZ(sx,r),d=H2e(sx,r),[u,f]=p.useState(null),h=rn(t,v=>f(v),c.onItemTextChange,v=>{var b;return(b=l.itemTextRefCallback)==null?void 0:b.call(l,v,c.value,c.disabled)}),m=u==null?void 0:u.textContent,g=p.useMemo(()=>n.jsx("option",{value:c.value,disabled:c.disabled,children:m},c.value),[c.disabled,c.value,m]),{onNativeOptionAdd:x,onNativeOptionRemove:y}=d;return ls(()=>(x(g),()=>y(g)),[x,y,g]),n.jsxs(n.Fragment,{children:[n.jsx(ht.span,{id:c.textId,...i,ref:h}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?ho.createPortal(i.children,o.valueNode):null]})});kZ.displayName=sx;var MZ="SelectItemIndicator",_Z=p.forwardRef((e,t)=>{const{__scopeSelect:r,...s}=e;return SZ(MZ,r).isSelected?n.jsx(ht.span,{"aria-hidden":!0,...s,ref:t}):null});_Z.displayName=MZ;var dM="SelectScrollUpButton",PZ=p.forwardRef((e,t)=>{const r=Ou(dM,e.__scopeSelect),s=dA(dM,e.__scopeSelect),[a,i]=p.useState(!1),o=rn(t,s.onScrollButtonChange);return ls(()=>{if(r.viewport&&r.isPositioned){let l=function(){const d=c.scrollTop>0;i(d)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),a?n.jsx(AZ,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});PZ.displayName=dM;var uM="SelectScrollDownButton",TZ=p.forwardRef((e,t)=>{const r=Ou(uM,e.__scopeSelect),s=dA(uM,e.__scopeSelect),[a,i]=p.useState(!1),o=rn(t,s.onScrollButtonChange);return ls(()=>{if(r.viewport&&r.isPositioned){let l=function(){const d=c.scrollHeight-c.clientHeight,u=Math.ceil(c.scrollTop)<d;i(u)};const c=r.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),a?n.jsx(AZ,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=r;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});TZ.displayName=uM;var AZ=p.forwardRef((e,t)=>{const{__scopeSelect:r,onAutoScroll:s,...a}=e,i=Ou("SelectScrollButton",r),o=p.useRef(null),l=d4(r),c=p.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return p.useEffect(()=>()=>c(),[c]),ls(()=>{var u;const d=l().find(f=>f.ref.current===document.activeElement);(u=d==null?void 0:d.ref.current)==null||u.scrollIntoView({block:"nearest"})},[l]),n.jsx(ht.div,{"aria-hidden":!0,...a,ref:t,style:{flexShrink:0,...a.style},onPointerDown:ut(a.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(s,50))}),onPointerMove:ut(a.onPointerMove,()=>{var d;(d=i.onItemLeave)==null||d.call(i),o.current===null&&(o.current=window.setInterval(s,50))}),onPointerLeave:ut(a.onPointerLeave,()=>{c()})})}),nNe="SelectSeparator",EZ=p.forwardRef((e,t)=>{const{__scopeSelect:r,...s}=e;return n.jsx(ht.div,{"aria-hidden":!0,...s,ref:t})});EZ.displayName=nNe;var fM="SelectArrow",rNe=p.forwardRef((e,t)=>{const{__scopeSelect:r,...s}=e,a=u4(r),i=$u(fM,r),o=Ou(fM,r);return i.open&&o.position==="popper"?n.jsx(lA,{...a,...s,ref:t}):null});rNe.displayName=fM;function IZ(e){return e===""||e===void 0}var LZ=p.forwardRef((e,t)=>{const{value:r,...s}=e,a=p.useRef(null),i=rn(t,a),o=a1(r);return p.useEffect(()=>{const l=a.current,c=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==r&&u){const f=new Event("change",{bubbles:!0});u.call(l,r),l.dispatchEvent(f)}},[o,r]),n.jsx(Yv,{asChild:!0,children:n.jsx("select",{...s,ref:i,defaultValue:r})})});LZ.displayName="BubbleSelect";function DZ(e){const t=Gr(e),r=p.useRef(""),s=p.useRef(0),a=p.useCallback(o=>{const l=r.current+o;t(l),function c(d){r.current=d,window.clearTimeout(s.current),d!==""&&(s.current=window.setTimeout(()=>c(""),1e3))}(l)},[t]),i=p.useCallback(()=>{r.current="",window.clearTimeout(s.current)},[]);return p.useEffect(()=>()=>window.clearTimeout(s.current),[]),[r,a,i]}function $Z(e,t,r){const a=t.length>1&&Array.from(t).every(d=>d===t[0])?t[0]:t,i=r?e.indexOf(r):-1;let o=sNe(e,Math.max(i,0));a.length===1&&(o=o.filter(d=>d!==r));const c=o.find(d=>d.textValue.toLowerCase().startsWith(a.toLowerCase()));return c!==r?c:void 0}function sNe(e,t){return e.map((r,s)=>e[(t+s)%e.length])}var aNe=cZ,OZ=uZ,iNe=hZ,oNe=mZ,lNe=pZ,RZ=gZ,cNe=bZ,FZ=NZ,zZ=CZ,dNe=kZ,uNe=_Z,BZ=PZ,UZ=TZ,VZ=EZ;const Pt=aNe,Tt=iNe,kt=p.forwardRef(({className:e,children:t,...r},s)=>n.jsxs(OZ,{ref:s,className:Le("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...r,children:[t,n.jsx(oNe,{asChild:!0,children:n.jsx(Ui,{className:"h-4 w-4 opacity-50"})})]}));kt.displayName=OZ.displayName;const HZ=p.forwardRef(({className:e,...t},r)=>n.jsx(BZ,{ref:r,className:Le("flex cursor-default items-center justify-center py-1",e),...t,children:n.jsx(T0,{className:"h-4 w-4"})}));HZ.displayName=BZ.displayName;const WZ=p.forwardRef(({className:e,...t},r)=>n.jsx(UZ,{ref:r,className:Le("flex cursor-default items-center justify-center py-1",e),...t,children:n.jsx(Ui,{className:"h-4 w-4"})}));WZ.displayName=UZ.displayName;const Mt=p.forwardRef(({className:e,children:t,position:r="popper",...s},a)=>n.jsx(lNe,{children:n.jsxs(RZ,{ref:a,className:Le("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...s,children:[n.jsx(HZ,{}),n.jsx(cNe,{className:Le("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),n.jsx(WZ,{})]})}));Mt.displayName=RZ.displayName;const fNe=p.forwardRef(({className:e,...t},r)=>n.jsx(FZ,{ref:r,className:Le("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));fNe.displayName=FZ.displayName;const ve=p.forwardRef(({className:e,children:t,...r},s)=>n.jsxs(zZ,{ref:s,className:Le("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[n.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:n.jsx(uNe,{children:n.jsx(Mr,{className:"h-4 w-4"})})}),n.jsx(dNe,{children:t})]}));ve.displayName=zZ.displayName;const hNe=p.forwardRef(({className:e,...t},r)=>n.jsx(VZ,{ref:r,className:Le("-mx-1 my-1 h-px bg-muted",e),...t}));hNe.displayName=VZ.displayName;function Ft(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function Qa(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function Hr(e,t){const r=Ft(e);return isNaN(t)?Qa(e,NaN):(t&&r.setDate(r.getDate()+t),r)}function Wr(e,t){const r=Ft(e);if(isNaN(t))return Qa(e,NaN);if(!t)return r;const s=r.getDate(),a=Qa(e,r.getTime());a.setMonth(r.getMonth()+t+1,0);const i=a.getDate();return s>=i?a:(r.setFullYear(a.getFullYear(),a.getMonth(),s),r)}function _g(e,t){const{years:r=0,months:s=0,weeks:a=0,days:i=0,hours:o=0,minutes:l=0,seconds:c=0}=t,d=Ft(e),u=s||r?Wr(d,s+r*12):d,f=i||a?Hr(u,i+a*7):u,h=l+o*60,g=(c+h*60)*1e3;return Qa(e,f.getTime()+g)}function qZ(e){const t=Ft(e).getDay();return t===0||t===6}const uA=6048e5,mNe=864e5,fA=6e4,hA=36e5,jb=43200,J8=1440;let pNe={};function z0(){return pNe}function hl(e,t){var l,c,d,u;const r=z0(),s=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((u=(d=r.locale)==null?void 0:d.options)==null?void 0:u.weekStartsOn)??0,a=Ft(e),i=a.getDay(),o=(i<s?7:0)+i-s;return a.setDate(a.getDate()-o),a.setHours(0,0,0,0),a}function ih(e){return hl(e,{weekStartsOn:1})}function GZ(e){const t=Ft(e),r=t.getFullYear(),s=Qa(e,0);s.setFullYear(r+1,0,4),s.setHours(0,0,0,0);const a=ih(s),i=Qa(e,0);i.setFullYear(r,0,4),i.setHours(0,0,0,0);const o=ih(i);return t.getTime()>=a.getTime()?r+1:t.getTime()>=o.getTime()?r:r-1}function Ip(e){const t=Ft(e);return t.setHours(0,0,0,0),t}function Lp(e){const t=Ft(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function el(e,t){const r=Ip(e),s=Ip(t),a=+r-Lp(r),i=+s-Lp(s);return Math.round((a-i)/mNe)}function gNe(e){const t=GZ(e),r=Qa(e,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),ih(r)}function wy(e,t){const r=t*7;return Hr(e,r)}function xNe(e,t){return Wr(e,t*12)}function yNe(e){let t;return e.forEach(function(r){const s=Ft(r);(t===void 0||t<s||isNaN(Number(s)))&&(t=s)}),t||new Date(NaN)}function vNe(e){let t;return e.forEach(r=>{const s=Ft(r);(!t||t>s||isNaN(+s))&&(t=s)}),t||new Date(NaN)}function Fm(e,t){const r=Ft(e),s=Ft(t),a=r.getTime()-s.getTime();return a<0?-1:a>0?1:a}function f4(e){return Qa(e,Date.now())}function is(e,t){const r=Ip(e),s=Ip(t);return+r==+s}function mA(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function bNe(e){if(!mA(e)&&typeof e!="number")return!1;const t=Ft(e);return!isNaN(Number(t))}function Dp(e,t){const r=Ft(e),s=Ft(t),a=r.getFullYear()-s.getFullYear(),i=r.getMonth()-s.getMonth();return a*12+i}function wNe(e,t,r){const s=hl(e,r),a=hl(t,r),i=+s-Lp(s),o=+a-Lp(a);return Math.round((i-o)/uA)}function jNe(e,t){const r=Ft(e),s=Ft(t);return r.getFullYear()-s.getFullYear()}function YZ(e,t){const r=Ft(e),s=Ft(t),a=Z8(r,s),i=Math.abs(el(r,s));r.setDate(r.getDate()-a*i);const o=+(Z8(r,s)===-a),l=a*(i-o);return l===0?0:l}function Z8(e,t){const r=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return r<0?-1:r>0?1:r}function pA(e){return t=>{const s=(e?Math[e]:Math.trunc)(t);return s===0?0:s}}function gA(e,t){return+Ft(e)-+Ft(t)}function NNe(e,t,r){const s=gA(e,t)/hA;return pA(r==null?void 0:r.roundingMethod)(s)}function SNe(e,t,r){const s=gA(e,t)/fA;return pA(r==null?void 0:r.roundingMethod)(s)}function CNe(e){const t=Ft(e);return t.setHours(23,59,59,999),t}function c1(e){const t=Ft(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}function kNe(e){const t=Ft(e);return+CNe(t)==+c1(t)}function QZ(e,t){const r=Ft(e),s=Ft(t),a=Fm(r,s),i=Math.abs(Dp(r,s));let o;if(i<1)o=0;else{r.getMonth()===1&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-a*i);let l=Fm(r,s)===-a;kNe(Ft(e))&&i===1&&Fm(e,s)===1&&(l=!1),o=a*(i-Number(l))}return o===0?0:o}function KZ(e,t,r){const s=gA(e,t)/1e3;return pA(r==null?void 0:r.roundingMethod)(s)}function MNe(e,t){const r=Ft(e),s=Ft(t),a=Fm(r,s),i=Math.abs(jNe(r,s));r.setFullYear(1584),s.setFullYear(1584);const o=Fm(r,s)===-a,l=a*(i-+o);return l===0?0:l}function _Ne(e,t){const r=Ft(e.start),s=Ft(e.end);let a=+r>+s;const i=a?+r:+s,o=a?s:r;o.setHours(0,0,0,0);let l=1;const c=[];for(;+o<=i;)c.push(Ft(o)),o.setDate(o.getDate()+l),o.setHours(0,0,0,0);return a?c.reverse():c}function Wa(e){const t=Ft(e);return t.setDate(1),t.setHours(0,0,0,0),t}function JZ(e){const t=Ft(e),r=Qa(e,0);return r.setFullYear(t.getFullYear(),0,1),r.setHours(0,0,0,0),r}function h4(e,t){var l,c,d,u;const r=z0(),s=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((u=(d=r.locale)==null?void 0:d.options)==null?void 0:u.weekStartsOn)??0,a=Ft(e),i=a.getDay(),o=(i<s?-7:0)+6-(i-s);return a.setDate(a.getDate()+o),a.setHours(23,59,59,999),a}function ZZ(e){return h4(e,{weekStartsOn:1})}const PNe={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},TNe=(e,t,r)=>{let s;const a=PNe[e];return typeof a=="string"?s=a:t===1?s=a.one:s=a.other.replace("{{count}}",t.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+s:s+" ago":s};function uC(e){return(t={})=>{const r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}const ANe={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},ENe={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},INe={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},LNe={date:uC({formats:ANe,defaultWidth:"full"}),time:uC({formats:ENe,defaultWidth:"full"}),dateTime:uC({formats:INe,defaultWidth:"full"})},DNe={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},$Ne=(e,t,r,s)=>DNe[e];function Pg(e){return(t,r)=>{const s=r!=null&&r.context?String(r.context):"standalone";let a;if(s==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,l=r!=null&&r.width?String(r.width):o;a=e.formattingValues[l]||e.formattingValues[o]}else{const o=e.defaultWidth,l=r!=null&&r.width?String(r.width):e.defaultWidth;a=e.values[l]||e.values[o]}const i=e.argumentCallback?e.argumentCallback(t):t;return a[i]}}const ONe={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},RNe={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},FNe={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},zNe={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},BNe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},UNe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},VNe=(e,t)=>{const r=Number(e),s=r%100;if(s>20||s<10)switch(s%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},HNe={ordinalNumber:VNe,era:Pg({values:ONe,defaultWidth:"wide"}),quarter:Pg({values:RNe,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Pg({values:FNe,defaultWidth:"wide"}),day:Pg({values:zNe,defaultWidth:"wide"}),dayPeriod:Pg({values:BNe,defaultWidth:"wide",formattingValues:UNe,defaultFormattingWidth:"wide"})};function Tg(e){return(t,r={})=>{const s=r.width,a=s&&e.matchPatterns[s]||e.matchPatterns[e.defaultMatchWidth],i=t.match(a);if(!i)return null;const o=i[0],l=s&&e.parsePatterns[s]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?qNe(l,f=>f.test(o)):WNe(l,f=>f.test(o));let d;d=e.valueCallback?e.valueCallback(c):c,d=r.valueCallback?r.valueCallback(d):d;const u=t.slice(o.length);return{value:d,rest:u}}}function WNe(e,t){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r}function qNe(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r}function GNe(e){return(t,r={})=>{const s=t.match(e.matchPattern);if(!s)return null;const a=s[0],i=t.match(e.parsePattern);if(!i)return null;let o=e.valueCallback?e.valueCallback(i[0]):i[0];o=r.valueCallback?r.valueCallback(o):o;const l=t.slice(a.length);return{value:o,rest:l}}}const YNe=/^(\d+)(th|st|nd|rd)?/i,QNe=/\d+/i,KNe={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},JNe={any:[/^b/i,/^(a|c)/i]},ZNe={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},XNe={any:[/1/i,/2/i,/3/i,/4/i]},e4e={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},t4e={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},n4e={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},r4e={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},s4e={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},a4e={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},i4e={ordinalNumber:GNe({matchPattern:YNe,parsePattern:QNe,valueCallback:e=>parseInt(e,10)}),era:Tg({matchPatterns:KNe,defaultMatchWidth:"wide",parsePatterns:JNe,defaultParseWidth:"any"}),quarter:Tg({matchPatterns:ZNe,defaultMatchWidth:"wide",parsePatterns:XNe,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Tg({matchPatterns:e4e,defaultMatchWidth:"wide",parsePatterns:t4e,defaultParseWidth:"any"}),day:Tg({matchPatterns:n4e,defaultMatchWidth:"wide",parsePatterns:r4e,defaultParseWidth:"any"}),dayPeriod:Tg({matchPatterns:s4e,defaultMatchWidth:"any",parsePatterns:a4e,defaultParseWidth:"any"})},xA={code:"en-US",formatDistance:TNe,formatLong:LNe,formatRelative:$Ne,localize:HNe,match:i4e,options:{weekStartsOn:0,firstWeekContainsDate:1}};function o4e(e){const t=Ft(e);return el(t,JZ(t))+1}function XZ(e){const t=Ft(e),r=+ih(t)-+gNe(t);return Math.round(r/uA)+1}function eX(e,t){var u,f,h,m;const r=Ft(e),s=r.getFullYear(),a=z0(),i=(t==null?void 0:t.firstWeekContainsDate)??((f=(u=t==null?void 0:t.locale)==null?void 0:u.options)==null?void 0:f.firstWeekContainsDate)??a.firstWeekContainsDate??((m=(h=a.locale)==null?void 0:h.options)==null?void 0:m.firstWeekContainsDate)??1,o=Qa(e,0);o.setFullYear(s+1,0,i),o.setHours(0,0,0,0);const l=hl(o,t),c=Qa(e,0);c.setFullYear(s,0,i),c.setHours(0,0,0,0);const d=hl(c,t);return r.getTime()>=l.getTime()?s+1:r.getTime()>=d.getTime()?s:s-1}function l4e(e,t){var l,c,d,u;const r=z0(),s=(t==null?void 0:t.firstWeekContainsDate)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??r.firstWeekContainsDate??((u=(d=r.locale)==null?void 0:d.options)==null?void 0:u.firstWeekContainsDate)??1,a=eX(e,t),i=Qa(e,0);return i.setFullYear(a,0,s),i.setHours(0,0,0,0),hl(i,t)}function tX(e,t){const r=Ft(e),s=+hl(r,t)-+l4e(r,t);return Math.round(s/uA)+1}function er(e,t){const r=e<0?"-":"",s=Math.abs(e).toString().padStart(t,"0");return r+s}const Nd={y(e,t){const r=e.getFullYear(),s=r>0?r:1-r;return er(t==="yy"?s%100:s,t.length)},M(e,t){const r=e.getMonth();return t==="M"?String(r+1):er(r+1,2)},d(e,t){return er(e.getDate(),t.length)},a(e,t){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(e,t){return er(e.getHours()%12||12,t.length)},H(e,t){return er(e.getHours(),t.length)},m(e,t){return er(e.getMinutes(),t.length)},s(e,t){return er(e.getSeconds(),t.length)},S(e,t){const r=t.length,s=e.getMilliseconds(),a=Math.trunc(s*Math.pow(10,r-3));return er(a,t.length)}},Hh={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},X8={G:function(e,t,r){const s=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(s,{width:"abbreviated"});case"GGGGG":return r.era(s,{width:"narrow"});case"GGGG":default:return r.era(s,{width:"wide"})}},y:function(e,t,r){if(t==="yo"){const s=e.getFullYear(),a=s>0?s:1-s;return r.ordinalNumber(a,{unit:"year"})}return Nd.y(e,t)},Y:function(e,t,r,s){const a=eX(e,s),i=a>0?a:1-a;if(t==="YY"){const o=i%100;return er(o,2)}return t==="Yo"?r.ordinalNumber(i,{unit:"year"}):er(i,t.length)},R:function(e,t){const r=GZ(e);return er(r,t.length)},u:function(e,t){const r=e.getFullYear();return er(r,t.length)},Q:function(e,t,r){const s=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(s);case"QQ":return er(s,2);case"Qo":return r.ordinalNumber(s,{unit:"quarter"});case"QQQ":return r.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(s,{width:"wide",context:"formatting"})}},q:function(e,t,r){const s=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(s);case"qq":return er(s,2);case"qo":return r.ordinalNumber(s,{unit:"quarter"});case"qqq":return r.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(s,{width:"wide",context:"standalone"})}},M:function(e,t,r){const s=e.getMonth();switch(t){case"M":case"MM":return Nd.M(e,t);case"Mo":return r.ordinalNumber(s+1,{unit:"month"});case"MMM":return r.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(s,{width:"wide",context:"formatting"})}},L:function(e,t,r){const s=e.getMonth();switch(t){case"L":return String(s+1);case"LL":return er(s+1,2);case"Lo":return r.ordinalNumber(s+1,{unit:"month"});case"LLL":return r.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(s,{width:"wide",context:"standalone"})}},w:function(e,t,r,s){const a=tX(e,s);return t==="wo"?r.ordinalNumber(a,{unit:"week"}):er(a,t.length)},I:function(e,t,r){const s=XZ(e);return t==="Io"?r.ordinalNumber(s,{unit:"week"}):er(s,t.length)},d:function(e,t,r){return t==="do"?r.ordinalNumber(e.getDate(),{unit:"date"}):Nd.d(e,t)},D:function(e,t,r){const s=o4e(e);return t==="Do"?r.ordinalNumber(s,{unit:"dayOfYear"}):er(s,t.length)},E:function(e,t,r){const s=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(s,{width:"short",context:"formatting"});case"EEEE":default:return r.day(s,{width:"wide",context:"formatting"})}},e:function(e,t,r,s){const a=e.getDay(),i=(a-s.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return er(i,2);case"eo":return r.ordinalNumber(i,{unit:"day"});case"eee":return r.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(a,{width:"short",context:"formatting"});case"eeee":default:return r.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,r,s){const a=e.getDay(),i=(a-s.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return er(i,t.length);case"co":return r.ordinalNumber(i,{unit:"day"});case"ccc":return r.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(a,{width:"narrow",context:"standalone"});case"cccccc":return r.day(a,{width:"short",context:"standalone"});case"cccc":default:return r.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,r){const s=e.getDay(),a=s===0?7:s;switch(t){case"i":return String(a);case"ii":return er(a,t.length);case"io":return r.ordinalNumber(a,{unit:"day"});case"iii":return r.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(s,{width:"short",context:"formatting"});case"iiii":default:return r.day(s,{width:"wide",context:"formatting"})}},a:function(e,t,r){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,r){const s=e.getHours();let a;switch(s===12?a=Hh.noon:s===0?a=Hh.midnight:a=s/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,r){const s=e.getHours();let a;switch(s>=17?a=Hh.evening:s>=12?a=Hh.afternoon:s>=4?a=Hh.morning:a=Hh.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,r){if(t==="ho"){let s=e.getHours()%12;return s===0&&(s=12),r.ordinalNumber(s,{unit:"hour"})}return Nd.h(e,t)},H:function(e,t,r){return t==="Ho"?r.ordinalNumber(e.getHours(),{unit:"hour"}):Nd.H(e,t)},K:function(e,t,r){const s=e.getHours()%12;return t==="Ko"?r.ordinalNumber(s,{unit:"hour"}):er(s,t.length)},k:function(e,t,r){let s=e.getHours();return s===0&&(s=24),t==="ko"?r.ordinalNumber(s,{unit:"hour"}):er(s,t.length)},m:function(e,t,r){return t==="mo"?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):Nd.m(e,t)},s:function(e,t,r){return t==="so"?r.ordinalNumber(e.getSeconds(),{unit:"second"}):Nd.s(e,t)},S:function(e,t){return Nd.S(e,t)},X:function(e,t,r){const s=e.getTimezoneOffset();if(s===0)return"Z";switch(t){case"X":return t$(s);case"XXXX":case"XX":return af(s);case"XXXXX":case"XXX":default:return af(s,":")}},x:function(e,t,r){const s=e.getTimezoneOffset();switch(t){case"x":return t$(s);case"xxxx":case"xx":return af(s);case"xxxxx":case"xxx":default:return af(s,":")}},O:function(e,t,r){const s=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+e$(s,":");case"OOOO":default:return"GMT"+af(s,":")}},z:function(e,t,r){const s=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+e$(s,":");case"zzzz":default:return"GMT"+af(s,":")}},t:function(e,t,r){const s=Math.trunc(e.getTime()/1e3);return er(s,t.length)},T:function(e,t,r){const s=e.getTime();return er(s,t.length)}};function e$(e,t=""){const r=e>0?"-":"+",s=Math.abs(e),a=Math.trunc(s/60),i=s%60;return i===0?r+String(a):r+String(a)+t+er(i,2)}function t$(e,t){return e%60===0?(e>0?"-":"+")+er(Math.abs(e)/60,2):af(e,t)}function af(e,t=""){const r=e>0?"-":"+",s=Math.abs(e),a=er(Math.trunc(s/60),2),i=er(s%60,2);return r+a+t+i}const n$=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},nX=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},c4e=(e,t)=>{const r=e.match(/(P+)(p+)?/)||[],s=r[1],a=r[2];if(!a)return n$(e,t);let i;switch(s){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",n$(s,t)).replace("{{time}}",nX(a,t))},d4e={p:nX,P:c4e},u4e=/^D+$/,f4e=/^Y+$/,h4e=["D","DD","YY","YYYY"];function m4e(e){return u4e.test(e)}function p4e(e){return f4e.test(e)}function g4e(e,t,r){const s=x4e(e,t,r);if(console.warn(s),h4e.includes(e))throw new RangeError(s)}function x4e(e,t,r){const s=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${s} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const y4e=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,v4e=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,b4e=/^'([^]*?)'?$/,w4e=/''/g,j4e=/[a-zA-Z]/;function Ie(e,t,r){var u,f,h,m,g,x,y,v;const s=z0(),a=(r==null?void 0:r.locale)??s.locale??xA,i=(r==null?void 0:r.firstWeekContainsDate)??((f=(u=r==null?void 0:r.locale)==null?void 0:u.options)==null?void 0:f.firstWeekContainsDate)??s.firstWeekContainsDate??((m=(h=s.locale)==null?void 0:h.options)==null?void 0:m.firstWeekContainsDate)??1,o=(r==null?void 0:r.weekStartsOn)??((x=(g=r==null?void 0:r.locale)==null?void 0:g.options)==null?void 0:x.weekStartsOn)??s.weekStartsOn??((v=(y=s.locale)==null?void 0:y.options)==null?void 0:v.weekStartsOn)??0,l=Ft(e);if(!bNe(l))throw new RangeError("Invalid time value");let c=t.match(v4e).map(b=>{const w=b[0];if(w==="p"||w==="P"){const N=d4e[w];return N(b,a.formatLong)}return b}).join("").match(y4e).map(b=>{if(b==="''")return{isToken:!1,value:"'"};const w=b[0];if(w==="'")return{isToken:!1,value:N4e(b)};if(X8[w])return{isToken:!0,value:b};if(w.match(j4e))throw new RangeError("Format string contains an unescaped latin alphabet character `"+w+"`");return{isToken:!1,value:b}});a.localize.preprocessor&&(c=a.localize.preprocessor(l,c));const d={firstWeekContainsDate:i,weekStartsOn:o,locale:a};return c.map(b=>{if(!b.isToken)return b.value;const w=b.value;(!(r!=null&&r.useAdditionalWeekYearTokens)&&p4e(w)||!(r!=null&&r.useAdditionalDayOfYearTokens)&&m4e(w))&&g4e(w,t,String(e));const N=X8[w[0]];return N(l,w,a.localize,d)}).join("")}function N4e(e){const t=e.match(b4e);return t?t[1].replace(w4e,"'"):e}function S4e(e,t,r){const s=z0(),a=(r==null?void 0:r.locale)??s.locale??xA,i=2520,o=Fm(e,t);if(isNaN(o))throw new RangeError("Invalid time value");const l=Object.assign({},r,{addSuffix:r==null?void 0:r.addSuffix,comparison:o});let c,d;o>0?(c=Ft(t),d=Ft(e)):(c=Ft(e),d=Ft(t));const u=KZ(d,c),f=(Lp(d)-Lp(c))/1e3,h=Math.round((u-f)/60);let m;if(h<2)return r!=null&&r.includeSeconds?u<5?a.formatDistance("lessThanXSeconds",5,l):u<10?a.formatDistance("lessThanXSeconds",10,l):u<20?a.formatDistance("lessThanXSeconds",20,l):u<40?a.formatDistance("halfAMinute",0,l):u<60?a.formatDistance("lessThanXMinutes",1,l):a.formatDistance("xMinutes",1,l):h===0?a.formatDistance("lessThanXMinutes",1,l):a.formatDistance("xMinutes",h,l);if(h<45)return a.formatDistance("xMinutes",h,l);if(h<90)return a.formatDistance("aboutXHours",1,l);if(h<J8){const g=Math.round(h/60);return a.formatDistance("aboutXHours",g,l)}else{if(h<i)return a.formatDistance("xDays",1,l);if(h<jb){const g=Math.round(h/J8);return a.formatDistance("xDays",g,l)}else if(h<jb*2)return m=Math.round(h/jb),a.formatDistance("aboutXMonths",m,l)}if(m=QZ(d,c),m<12){const g=Math.round(h/jb);return a.formatDistance("xMonths",g,l)}else{const g=m%12,x=Math.trunc(m/12);return g<3?a.formatDistance("aboutXYears",x,l):g<9?a.formatDistance("overXYears",x,l):a.formatDistance("almostXYears",x+1,l)}}function bu(e,t){return S4e(e,f4(e),t)}function C4e(e){const t=Ft(e),r=t.getFullYear(),s=t.getMonth(),a=Qa(e,0);return a.setFullYear(r,s+1,0),a.setHours(0,0,0,0),a.getDate()}function k4e(e){return Math.trunc(+Ft(e)/1e3)}function M4e(e){const t=Ft(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(0,0,0,0),t}function _4e(e,t){return wNe(M4e(e),Wa(e),t)+1}function P4e(e){const t=Ft(e.start),r=Ft(e.end),s={},a=MNe(r,t);a&&(s.years=a);const i=_g(t,{years:s.years}),o=QZ(r,i);o&&(s.months=o);const l=_g(i,{months:s.months}),c=YZ(r,l);c&&(s.days=c);const d=_g(l,{days:s.days}),u=NNe(r,d);u&&(s.hours=u);const f=_g(d,{hours:s.hours}),h=SNe(r,f);h&&(s.minutes=h);const m=_g(f,{minutes:s.minutes}),g=KZ(r,m);return g&&(s.seconds=g),s}function hM(e,t){const r=Ft(e),s=Ft(t);return r.getTime()>s.getTime()}function m4(e,t){const r=Ft(e),s=Ft(t);return+r<+s}function jy(e,t){const r=Ft(e),s=Ft(t);return r.getFullYear()===s.getFullYear()&&r.getMonth()===s.getMonth()}function T4e(e,t){const r=Ft(e),s=Ft(t);return r.getFullYear()===s.getFullYear()}function Ny(e){return is(e,f4(e))}function A4e(e){return is(e,Hr(f4(e),1))}function Sw(e,t){return Hr(e,-t)}function rX(e){return is(e,Sw(f4(e),1))}function zm(e,t){const s=D4e(e);let a;if(s.date){const c=$4e(s.date,2);a=O4e(c.restDateString,c.year)}if(!a||isNaN(a.getTime()))return new Date(NaN);const i=a.getTime();let o=0,l;if(s.time&&(o=R4e(s.time),isNaN(o)))return new Date(NaN);if(s.timezone){if(l=F4e(s.timezone),isNaN(l))return new Date(NaN)}else{const c=new Date(i+o),d=new Date(0);return d.setFullYear(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()),d.setHours(c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()),d}return new Date(i+o+l)}const Nb={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},E4e=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,I4e=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,L4e=/^([+-])(\d{2})(?::?(\d{2}))?$/;function D4e(e){const t={},r=e.split(Nb.dateTimeDelimiter);let s;if(r.length>2)return t;if(/:/.test(r[0])?s=r[0]:(t.date=r[0],s=r[1],Nb.timeZoneDelimiter.test(t.date)&&(t.date=e.split(Nb.timeZoneDelimiter)[0],s=e.substr(t.date.length,e.length))),s){const a=Nb.timezone.exec(s);a?(t.time=s.replace(a[1],""),t.timezone=a[1]):t.time=s}return t}function $4e(e,t){const r=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),s=e.match(r);if(!s)return{year:NaN,restDateString:""};const a=s[1]?parseInt(s[1]):null,i=s[2]?parseInt(s[2]):null;return{year:i===null?a:i*100,restDateString:e.slice((s[1]||s[2]).length)}}function O4e(e,t){if(t===null)return new Date(NaN);const r=e.match(E4e);if(!r)return new Date(NaN);const s=!!r[4],a=Ag(r[1]),i=Ag(r[2])-1,o=Ag(r[3]),l=Ag(r[4]),c=Ag(r[5])-1;if(s)return H4e(t,l,c)?z4e(t,l,c):new Date(NaN);{const d=new Date(0);return!U4e(t,i,o)||!V4e(t,a)?new Date(NaN):(d.setUTCFullYear(t,i,Math.max(a,o)),d)}}function Ag(e){return e?parseInt(e):1}function R4e(e){const t=e.match(I4e);if(!t)return NaN;const r=fC(t[1]),s=fC(t[2]),a=fC(t[3]);return W4e(r,s,a)?r*hA+s*fA+a*1e3:NaN}function fC(e){return e&&parseFloat(e.replace(",","."))||0}function F4e(e){if(e==="Z")return 0;const t=e.match(L4e);if(!t)return 0;const r=t[1]==="+"?-1:1,s=parseInt(t[2]),a=t[3]&&parseInt(t[3])||0;return q4e(s,a)?r*(s*hA+a*fA):NaN}function z4e(e,t,r){const s=new Date(0);s.setUTCFullYear(e,0,4);const a=s.getUTCDay()||7,i=(t-1)*7+r+1-a;return s.setUTCDate(s.getUTCDate()+i),s}const B4e=[31,null,31,30,31,30,31,31,30,31,30,31];function sX(e){return e%400===0||e%4===0&&e%100!==0}function U4e(e,t,r){return t>=0&&t<=11&&r>=1&&r<=(B4e[t]||(sX(e)?29:28))}function V4e(e,t){return t>=1&&t<=(sX(e)?366:365)}function H4e(e,t,r){return t>=1&&t<=53&&r>=0&&r<=6}function W4e(e,t,r){return e===24?t===0&&r===0:r>=0&&r<60&&t>=0&&t<60&&e>=0&&e<25}function q4e(e,t){return t>=0&&t<=59}function hC(e,t){const r=Ft(e),s=r.getFullYear(),a=r.getDate(),i=Qa(e,0);i.setFullYear(s,t,15),i.setHours(0,0,0,0);const o=C4e(i);return r.setMonth(t,Math.min(a,o)),r}function r$(e,t){const r=Ft(e);return isNaN(+r)?Qa(e,NaN):(r.setFullYear(t),r)}function G4e(e,t){return Wr(e,-1)}var Kt=function(){return Kt=Object.assign||function(t){for(var r,s=1,a=arguments.length;s<a;s++){r=arguments[s];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},Kt.apply(this,arguments)};function Y4e(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(r[s[a]]=e[s[a]]);return r}function aX(e,t,r){for(var s=0,a=t.length,i;s<a;s++)(i||!(s in t))&&(i||(i=Array.prototype.slice.call(t,0,s)),i[s]=t[s]);return e.concat(i||Array.prototype.slice.call(t))}function d1(e){return e.mode==="multiple"}function u1(e){return e.mode==="range"}function p4(e){return e.mode==="single"}var Q4e={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function K4e(e,t){return Ie(e,"LLLL y",t)}function J4e(e,t){return Ie(e,"d",t)}function Z4e(e,t){return Ie(e,"LLLL",t)}function X4e(e){return"".concat(e)}function e3e(e,t){return Ie(e,"cccccc",t)}function t3e(e,t){return Ie(e,"yyyy",t)}var n3e=Object.freeze({__proto__:null,formatCaption:K4e,formatDay:J4e,formatMonthCaption:Z4e,formatWeekNumber:X4e,formatWeekdayName:e3e,formatYearCaption:t3e}),r3e=function(e,t,r){return Ie(e,"do MMMM (EEEE)",r)},s3e=function(){return"Month: "},a3e=function(){return"Go to next month"},i3e=function(){return"Go to previous month"},o3e=function(e,t){return Ie(e,"cccc",t)},l3e=function(e){return"Week n. ".concat(e)},c3e=function(){return"Year: "},d3e=Object.freeze({__proto__:null,labelDay:r3e,labelMonthDropdown:s3e,labelNext:a3e,labelPrevious:i3e,labelWeekNumber:l3e,labelWeekday:o3e,labelYearDropdown:c3e});function u3e(){var e="buttons",t=Q4e,r=xA,s={},a={},i=1,o={},l=new Date;return{captionLayout:e,classNames:t,formatters:n3e,labels:d3e,locale:r,modifiersClassNames:s,modifiers:a,numberOfMonths:i,styles:o,today:l,mode:"default"}}function f3e(e){var t=e.fromYear,r=e.toYear,s=e.fromMonth,a=e.toMonth,i=e.fromDate,o=e.toDate;return s?i=Wa(s):t&&(i=new Date(t,0,1)),a?o=c1(a):r&&(o=new Date(r,11,31)),{fromDate:i?Ip(i):void 0,toDate:o?Ip(o):void 0}}var iX=p.createContext(void 0);function h3e(e){var t,r=e.initialProps,s=u3e(),a=f3e(r),i=a.fromDate,o=a.toDate,l=(t=r.captionLayout)!==null&&t!==void 0?t:s.captionLayout;l!=="buttons"&&(!i||!o)&&(l="buttons");var c;(p4(r)||d1(r)||u1(r))&&(c=r.onSelect);var d=Kt(Kt(Kt({},s),r),{captionLayout:l,classNames:Kt(Kt({},s.classNames),r.classNames),components:Kt({},r.components),formatters:Kt(Kt({},s.formatters),r.formatters),fromDate:i,labels:Kt(Kt({},s.labels),r.labels),mode:r.mode||s.mode,modifiers:Kt(Kt({},s.modifiers),r.modifiers),modifiersClassNames:Kt(Kt({},s.modifiersClassNames),r.modifiersClassNames),onSelect:c,styles:Kt(Kt({},s.styles),r.styles),toDate:o});return n.jsx(iX.Provider,{value:d,children:e.children})}function pr(){var e=p.useContext(iX);if(!e)throw new Error("useDayPicker must be used within a DayPickerProvider.");return e}function oX(e){var t=pr(),r=t.locale,s=t.classNames,a=t.styles,i=t.formatters.formatCaption;return n.jsx("div",{className:s.caption_label,style:a.caption_label,"aria-live":"polite",role:"presentation",id:e.id,children:i(e.displayMonth,{locale:r})})}function m3e(e){return n.jsx("svg",Kt({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},e,{children:n.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function lX(e){var t,r,s=e.onChange,a=e.value,i=e.children,o=e.caption,l=e.className,c=e.style,d=pr(),u=(r=(t=d.components)===null||t===void 0?void 0:t.IconDropdown)!==null&&r!==void 0?r:m3e;return n.jsxs("div",{className:l,style:c,children:[n.jsx("span",{className:d.classNames.vhidden,children:e["aria-label"]}),n.jsx("select",{name:e.name,"aria-label":e["aria-label"],className:d.classNames.dropdown,style:d.styles.dropdown,value:a,onChange:s,children:i}),n.jsxs("div",{className:d.classNames.caption_label,style:d.styles.caption_label,"aria-hidden":"true",children:[o,n.jsx(u,{className:d.classNames.dropdown_icon,style:d.styles.dropdown_icon})]})]})}function p3e(e){var t,r=pr(),s=r.fromDate,a=r.toDate,i=r.styles,o=r.locale,l=r.formatters.formatMonthCaption,c=r.classNames,d=r.components,u=r.labels.labelMonthDropdown;if(!s)return n.jsx(n.Fragment,{});if(!a)return n.jsx(n.Fragment,{});var f=[];if(T4e(s,a))for(var h=Wa(s),m=s.getMonth();m<=a.getMonth();m++)f.push(hC(h,m));else for(var h=Wa(new Date),m=0;m<=11;m++)f.push(hC(h,m));var g=function(y){var v=Number(y.target.value),b=hC(Wa(e.displayMonth),v);e.onChange(b)},x=(t=d==null?void 0:d.Dropdown)!==null&&t!==void 0?t:lX;return n.jsx(x,{name:"months","aria-label":u(),className:c.dropdown_month,style:i.dropdown_month,onChange:g,value:e.displayMonth.getMonth(),caption:l(e.displayMonth,{locale:o}),children:f.map(function(y){return n.jsx("option",{value:y.getMonth(),children:l(y,{locale:o})},y.getMonth())})})}function g3e(e){var t,r=e.displayMonth,s=pr(),a=s.fromDate,i=s.toDate,o=s.locale,l=s.styles,c=s.classNames,d=s.components,u=s.formatters.formatYearCaption,f=s.labels.labelYearDropdown,h=[];if(!a)return n.jsx(n.Fragment,{});if(!i)return n.jsx(n.Fragment,{});for(var m=a.getFullYear(),g=i.getFullYear(),x=m;x<=g;x++)h.push(r$(JZ(new Date),x));var y=function(b){var w=r$(Wa(r),Number(b.target.value));e.onChange(w)},v=(t=d==null?void 0:d.Dropdown)!==null&&t!==void 0?t:lX;return n.jsx(v,{name:"years","aria-label":f(),className:c.dropdown_year,style:l.dropdown_year,onChange:y,value:r.getFullYear(),caption:u(r,{locale:o}),children:h.map(function(b){return n.jsx("option",{value:b.getFullYear(),children:u(b,{locale:o})},b.getFullYear())})})}function x3e(e,t){var r=p.useState(e),s=r[0],a=r[1],i=t===void 0?s:t;return[i,a]}function y3e(e){var t=e.month,r=e.defaultMonth,s=e.today,a=t||r||s||new Date,i=e.toDate,o=e.fromDate,l=e.numberOfMonths,c=l===void 0?1:l;if(i&&Dp(i,a)<0){var d=-1*(c-1);a=Wr(i,d)}return o&&Dp(a,o)<0&&(a=o),Wa(a)}function v3e(){var e=pr(),t=y3e(e),r=x3e(t,e.month),s=r[0],a=r[1],i=function(o){var l;if(!e.disableNavigation){var c=Wa(o);a(c),(l=e.onMonthChange)===null||l===void 0||l.call(e,c)}};return[s,i]}function b3e(e,t){for(var r=t.reverseMonths,s=t.numberOfMonths,a=Wa(e),i=Wa(Wr(a,s)),o=Dp(i,a),l=[],c=0;c<o;c++){var d=Wr(a,c);l.push(d)}return r&&(l=l.reverse()),l}function w3e(e,t){if(!t.disableNavigation){var r=t.toDate,s=t.pagedNavigation,a=t.numberOfMonths,i=a===void 0?1:a,o=s?i:1,l=Wa(e);if(!r)return Wr(l,o);var c=Dp(r,e);if(!(c<i))return Wr(l,o)}}function j3e(e,t){if(!t.disableNavigation){var r=t.fromDate,s=t.pagedNavigation,a=t.numberOfMonths,i=a===void 0?1:a,o=s?i:1,l=Wa(e);if(!r)return Wr(l,-o);var c=Dp(l,r);if(!(c<=0))return Wr(l,-o)}}var cX=p.createContext(void 0);function N3e(e){var t=pr(),r=v3e(),s=r[0],a=r[1],i=b3e(s,t),o=w3e(s,t),l=j3e(s,t),c=function(f){return i.some(function(h){return jy(f,h)})},d=function(f,h){c(f)||(h&&m4(f,h)?a(Wr(f,1+t.numberOfMonths*-1)):a(f))},u={currentMonth:s,displayMonths:i,goToMonth:a,goToDate:d,previousMonth:l,nextMonth:o,isDateDisplayed:c};return n.jsx(cX.Provider,{value:u,children:e.children})}function f1(){var e=p.useContext(cX);if(!e)throw new Error("useNavigation must be used within a NavigationProvider");return e}function s$(e){var t,r=pr(),s=r.classNames,a=r.styles,i=r.components,o=f1().goToMonth,l=function(u){o(Wr(u,e.displayIndex?-e.displayIndex:0))},c=(t=i==null?void 0:i.CaptionLabel)!==null&&t!==void 0?t:oX,d=n.jsx(c,{id:e.id,displayMonth:e.displayMonth});return n.jsxs("div",{className:s.caption_dropdowns,style:a.caption_dropdowns,children:[n.jsx("div",{className:s.vhidden,children:d}),n.jsx(p3e,{onChange:l,displayMonth:e.displayMonth}),n.jsx(g3e,{onChange:l,displayMonth:e.displayMonth})]})}function S3e(e){return n.jsx("svg",Kt({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:n.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function C3e(e){return n.jsx("svg",Kt({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:n.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var Ej=p.forwardRef(function(e,t){var r=pr(),s=r.classNames,a=r.styles,i=[s.button_reset,s.button];e.className&&i.push(e.className);var o=i.join(" "),l=Kt(Kt({},a.button_reset),a.button);return e.style&&Object.assign(l,e.style),n.jsx("button",Kt({},e,{ref:t,type:"button",className:o,style:l}))});function k3e(e){var t,r,s=pr(),a=s.dir,i=s.locale,o=s.classNames,l=s.styles,c=s.labels,d=c.labelPrevious,u=c.labelNext,f=s.components;if(!e.nextMonth&&!e.previousMonth)return n.jsx(n.Fragment,{});var h=d(e.previousMonth,{locale:i}),m=[o.nav_button,o.nav_button_previous].join(" "),g=u(e.nextMonth,{locale:i}),x=[o.nav_button,o.nav_button_next].join(" "),y=(t=f==null?void 0:f.IconRight)!==null&&t!==void 0?t:C3e,v=(r=f==null?void 0:f.IconLeft)!==null&&r!==void 0?r:S3e;return n.jsxs("div",{className:o.nav,style:l.nav,children:[!e.hidePrevious&&n.jsx(Ej,{name:"previous-month","aria-label":h,className:m,style:l.nav_button_previous,disabled:!e.previousMonth,onClick:e.onPreviousClick,children:a==="rtl"?n.jsx(y,{className:o.nav_icon,style:l.nav_icon}):n.jsx(v,{className:o.nav_icon,style:l.nav_icon})}),!e.hideNext&&n.jsx(Ej,{name:"next-month","aria-label":g,className:x,style:l.nav_button_next,disabled:!e.nextMonth,onClick:e.onNextClick,children:a==="rtl"?n.jsx(v,{className:o.nav_icon,style:l.nav_icon}):n.jsx(y,{className:o.nav_icon,style:l.nav_icon})})]})}function a$(e){var t=pr().numberOfMonths,r=f1(),s=r.previousMonth,a=r.nextMonth,i=r.goToMonth,o=r.displayMonths,l=o.findIndex(function(g){return jy(e.displayMonth,g)}),c=l===0,d=l===o.length-1,u=t>1&&(c||!d),f=t>1&&(d||!c),h=function(){s&&i(s)},m=function(){a&&i(a)};return n.jsx(k3e,{displayMonth:e.displayMonth,hideNext:u,hidePrevious:f,nextMonth:a,previousMonth:s,onPreviousClick:h,onNextClick:m})}function M3e(e){var t,r=pr(),s=r.classNames,a=r.disableNavigation,i=r.styles,o=r.captionLayout,l=r.components,c=(t=l==null?void 0:l.CaptionLabel)!==null&&t!==void 0?t:oX,d;return a?d=n.jsx(c,{id:e.id,displayMonth:e.displayMonth}):o==="dropdown"?d=n.jsx(s$,{displayMonth:e.displayMonth,id:e.id}):o==="dropdown-buttons"?d=n.jsxs(n.Fragment,{children:[n.jsx(s$,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id}),n.jsx(a$,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id})]}):d=n.jsxs(n.Fragment,{children:[n.jsx(c,{id:e.id,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),n.jsx(a$,{displayMonth:e.displayMonth,id:e.id})]}),n.jsx("div",{className:s.caption,style:i.caption,children:d})}function _3e(e){var t=pr(),r=t.footer,s=t.styles,a=t.classNames.tfoot;return r?n.jsx("tfoot",{className:a,style:s.tfoot,children:n.jsx("tr",{children:n.jsx("td",{colSpan:8,children:r})})}):n.jsx(n.Fragment,{})}function P3e(e,t,r){for(var s=r?ih(new Date):hl(new Date,{locale:e,weekStartsOn:t}),a=[],i=0;i<7;i++){var o=Hr(s,i);a.push(o)}return a}function T3e(){var e=pr(),t=e.classNames,r=e.styles,s=e.showWeekNumber,a=e.locale,i=e.weekStartsOn,o=e.ISOWeek,l=e.formatters.formatWeekdayName,c=e.labels.labelWeekday,d=P3e(a,i,o);return n.jsxs("tr",{style:r.head_row,className:t.head_row,children:[s&&n.jsx("td",{style:r.head_cell,className:t.head_cell}),d.map(function(u,f){return n.jsx("th",{scope:"col",className:t.head_cell,style:r.head_cell,"aria-label":c(u,{locale:a}),children:l(u,{locale:a})},f)})]})}function A3e(){var e,t=pr(),r=t.classNames,s=t.styles,a=t.components,i=(e=a==null?void 0:a.HeadRow)!==null&&e!==void 0?e:T3e;return n.jsx("thead",{style:s.head,className:r.head,children:n.jsx(i,{})})}function E3e(e){var t=pr(),r=t.locale,s=t.formatters.formatDay;return n.jsx(n.Fragment,{children:s(e.date,{locale:r})})}var yA=p.createContext(void 0);function I3e(e){if(!d1(e.initialProps)){var t={selected:void 0,modifiers:{disabled:[]}};return n.jsx(yA.Provider,{value:t,children:e.children})}return n.jsx(L3e,{initialProps:e.initialProps,children:e.children})}function L3e(e){var t=e.initialProps,r=e.children,s=t.selected,a=t.min,i=t.max,o=function(d,u,f){var h,m;(h=t.onDayClick)===null||h===void 0||h.call(t,d,u,f);var g=!!(u.selected&&a&&(s==null?void 0:s.length)===a);if(!g){var x=!!(!u.selected&&i&&(s==null?void 0:s.length)===i);if(!x){var y=s?aX([],s):[];if(u.selected){var v=y.findIndex(function(b){return is(d,b)});y.splice(v,1)}else y.push(d);(m=t.onSelect)===null||m===void 0||m.call(t,y,d,u,f)}}},l={disabled:[]};s&&l.disabled.push(function(d){var u=i&&s.length>i-1,f=s.some(function(h){return is(h,d)});return!!(u&&!f)});var c={selected:s,onDayClick:o,modifiers:l};return n.jsx(yA.Provider,{value:c,children:r})}function vA(){var e=p.useContext(yA);if(!e)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return e}function D3e(e,t){var r=t||{},s=r.from,a=r.to;return s&&a?is(a,e)&&is(s,e)?void 0:is(a,e)?{from:a,to:void 0}:is(s,e)?void 0:hM(s,e)?{from:e,to:a}:{from:s,to:e}:a?hM(e,a)?{from:a,to:e}:{from:e,to:a}:s?m4(e,s)?{from:e,to:s}:{from:s,to:e}:{from:e,to:void 0}}var bA=p.createContext(void 0);function $3e(e){if(!u1(e.initialProps)){var t={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return n.jsx(bA.Provider,{value:t,children:e.children})}return n.jsx(O3e,{initialProps:e.initialProps,children:e.children})}function O3e(e){var t=e.initialProps,r=e.children,s=t.selected,a=s||{},i=a.from,o=a.to,l=t.min,c=t.max,d=function(m,g,x){var y,v;(y=t.onDayClick)===null||y===void 0||y.call(t,m,g,x);var b=D3e(m,s);(v=t.onSelect)===null||v===void 0||v.call(t,b,m,g,x)},u={range_start:[],range_end:[],range_middle:[],disabled:[]};if(i?(u.range_start=[i],o?(u.range_end=[o],is(i,o)||(u.range_middle=[{after:i,before:o}])):u.range_end=[i]):o&&(u.range_start=[o],u.range_end=[o]),l&&(i&&!o&&u.disabled.push({after:Sw(i,l-1),before:Hr(i,l-1)}),i&&o&&u.disabled.push({after:i,before:Hr(i,l-1)}),!i&&o&&u.disabled.push({after:Sw(o,l-1),before:Hr(o,l-1)})),c){if(i&&!o&&(u.disabled.push({before:Hr(i,-c+1)}),u.disabled.push({after:Hr(i,c-1)})),i&&o){var f=el(o,i)+1,h=c-f;u.disabled.push({before:Sw(i,h)}),u.disabled.push({after:Hr(o,h)})}!i&&o&&(u.disabled.push({before:Hr(o,-c+1)}),u.disabled.push({after:Hr(o,c-1)}))}return n.jsx(bA.Provider,{value:{selected:s,onDayClick:d,modifiers:u},children:r})}function wA(){var e=p.useContext(bA);if(!e)throw new Error("useSelectRange must be used within a SelectRangeProvider");return e}function Cw(e){return Array.isArray(e)?aX([],e):e!==void 0?[e]:[]}function R3e(e){var t={};return Object.entries(e).forEach(function(r){var s=r[0],a=r[1];t[s]=Cw(a)}),t}var ml;(function(e){e.Outside="outside",e.Disabled="disabled",e.Selected="selected",e.Hidden="hidden",e.Today="today",e.RangeStart="range_start",e.RangeEnd="range_end",e.RangeMiddle="range_middle"})(ml||(ml={}));var F3e=ml.Selected,fc=ml.Disabled,z3e=ml.Hidden,B3e=ml.Today,mC=ml.RangeEnd,pC=ml.RangeMiddle,gC=ml.RangeStart,U3e=ml.Outside;function V3e(e,t,r){var s,a=(s={},s[F3e]=Cw(e.selected),s[fc]=Cw(e.disabled),s[z3e]=Cw(e.hidden),s[B3e]=[e.today],s[mC]=[],s[pC]=[],s[gC]=[],s[U3e]=[],s);return e.fromDate&&a[fc].push({before:e.fromDate}),e.toDate&&a[fc].push({after:e.toDate}),d1(e)?a[fc]=a[fc].concat(t.modifiers[fc]):u1(e)&&(a[fc]=a[fc].concat(r.modifiers[fc]),a[gC]=r.modifiers[gC],a[pC]=r.modifiers[pC],a[mC]=r.modifiers[mC]),a}var dX=p.createContext(void 0);function H3e(e){var t=pr(),r=vA(),s=wA(),a=V3e(t,r,s),i=R3e(t.modifiers),o=Kt(Kt({},a),i);return n.jsx(dX.Provider,{value:o,children:e.children})}function uX(){var e=p.useContext(dX);if(!e)throw new Error("useModifiers must be used within a ModifiersProvider");return e}function W3e(e){return!!(e&&typeof e=="object"&&"before"in e&&"after"in e)}function q3e(e){return!!(e&&typeof e=="object"&&"from"in e)}function G3e(e){return!!(e&&typeof e=="object"&&"after"in e)}function Y3e(e){return!!(e&&typeof e=="object"&&"before"in e)}function Q3e(e){return!!(e&&typeof e=="object"&&"dayOfWeek"in e)}function K3e(e,t){var r,s=t.from,a=t.to;if(s&&a){var i=el(a,s)<0;i&&(r=[a,s],s=r[0],a=r[1]);var o=el(e,s)>=0&&el(a,e)>=0;return o}return a?is(a,e):s?is(s,e):!1}function J3e(e){return mA(e)}function Z3e(e){return Array.isArray(e)&&e.every(mA)}function X3e(e,t){return t.some(function(r){if(typeof r=="boolean")return r;if(J3e(r))return is(e,r);if(Z3e(r))return r.includes(e);if(q3e(r))return K3e(e,r);if(Q3e(r))return r.dayOfWeek.includes(e.getDay());if(W3e(r)){var s=el(r.before,e),a=el(r.after,e),i=s>0,o=a<0,l=hM(r.before,r.after);return l?o&&i:i||o}return G3e(r)?el(e,r.after)>0:Y3e(r)?el(r.before,e)>0:typeof r=="function"?r(e):!1})}function jA(e,t,r){var s=Object.keys(t).reduce(function(i,o){var l=t[o];return X3e(e,l)&&i.push(o),i},[]),a={};return s.forEach(function(i){return a[i]=!0}),r&&!jy(e,r)&&(a.outside=!0),a}function eSe(e,t){for(var r=Wa(e[0]),s=c1(e[e.length-1]),a,i,o=r;o<=s;){var l=jA(o,t),c=!l.disabled&&!l.hidden;if(!c){o=Hr(o,1);continue}if(l.selected)return o;l.today&&!i&&(i=o),a||(a=o),o=Hr(o,1)}return i||a}var tSe=365;function fX(e,t){var r=t.moveBy,s=t.direction,a=t.context,i=t.modifiers,o=t.retry,l=o===void 0?{count:0,lastFocused:e}:o,c=a.weekStartsOn,d=a.fromDate,u=a.toDate,f=a.locale,h={day:Hr,week:wy,month:Wr,year:xNe,startOfWeek:function(y){return a.ISOWeek?ih(y):hl(y,{locale:f,weekStartsOn:c})},endOfWeek:function(y){return a.ISOWeek?ZZ(y):h4(y,{locale:f,weekStartsOn:c})}},m=h[r](e,s==="after"?1:-1);s==="before"&&d?m=yNe([d,m]):s==="after"&&u&&(m=vNe([u,m]));var g=!0;if(i){var x=jA(m,i);g=!x.disabled&&!x.hidden}return g?m:l.count>tSe?l.lastFocused:fX(m,{moveBy:r,direction:s,context:a,modifiers:i,retry:Kt(Kt({},l),{count:l.count+1})})}var hX=p.createContext(void 0);function nSe(e){var t=f1(),r=uX(),s=p.useState(),a=s[0],i=s[1],o=p.useState(),l=o[0],c=o[1],d=eSe(t.displayMonths,r),u=a??(l&&t.isDateDisplayed(l))?l:d,f=function(){c(a),i(void 0)},h=function(y){i(y)},m=pr(),g=function(y,v){if(a){var b=fX(a,{moveBy:y,direction:v,context:m,modifiers:r});is(a,b)||(t.goToDate(b,a),h(b))}},x={focusedDay:a,focusTarget:u,blur:f,focus:h,focusDayAfter:function(){return g("day","after")},focusDayBefore:function(){return g("day","before")},focusWeekAfter:function(){return g("week","after")},focusWeekBefore:function(){return g("week","before")},focusMonthBefore:function(){return g("month","before")},focusMonthAfter:function(){return g("month","after")},focusYearBefore:function(){return g("year","before")},focusYearAfter:function(){return g("year","after")},focusStartOfWeek:function(){return g("startOfWeek","before")},focusEndOfWeek:function(){return g("endOfWeek","after")}};return n.jsx(hX.Provider,{value:x,children:e.children})}function NA(){var e=p.useContext(hX);if(!e)throw new Error("useFocusContext must be used within a FocusProvider");return e}function rSe(e,t){var r=uX(),s=jA(e,r,t);return s}var SA=p.createContext(void 0);function sSe(e){if(!p4(e.initialProps)){var t={selected:void 0};return n.jsx(SA.Provider,{value:t,children:e.children})}return n.jsx(aSe,{initialProps:e.initialProps,children:e.children})}function aSe(e){var t=e.initialProps,r=e.children,s=function(i,o,l){var c,d,u;if((c=t.onDayClick)===null||c===void 0||c.call(t,i,o,l),o.selected&&!t.required){(d=t.onSelect)===null||d===void 0||d.call(t,void 0,i,o,l);return}(u=t.onSelect)===null||u===void 0||u.call(t,i,i,o,l)},a={selected:t.selected,onDayClick:s};return n.jsx(SA.Provider,{value:a,children:r})}function mX(){var e=p.useContext(SA);if(!e)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return e}function iSe(e,t){var r=pr(),s=mX(),a=vA(),i=wA(),o=NA(),l=o.focusDayAfter,c=o.focusDayBefore,d=o.focusWeekAfter,u=o.focusWeekBefore,f=o.blur,h=o.focus,m=o.focusMonthBefore,g=o.focusMonthAfter,x=o.focusYearBefore,y=o.focusYearAfter,v=o.focusStartOfWeek,b=o.focusEndOfWeek,w=function($){var D,W,E,F;p4(r)?(D=s.onDayClick)===null||D===void 0||D.call(s,e,t,$):d1(r)?(W=a.onDayClick)===null||W===void 0||W.call(a,e,t,$):u1(r)?(E=i.onDayClick)===null||E===void 0||E.call(i,e,t,$):(F=r.onDayClick)===null||F===void 0||F.call(r,e,t,$)},N=function($){var D;h(e),(D=r.onDayFocus)===null||D===void 0||D.call(r,e,t,$)},j=function($){var D;f(),(D=r.onDayBlur)===null||D===void 0||D.call(r,e,t,$)},S=function($){var D;(D=r.onDayMouseEnter)===null||D===void 0||D.call(r,e,t,$)},C=function($){var D;(D=r.onDayMouseLeave)===null||D===void 0||D.call(r,e,t,$)},k=function($){var D;(D=r.onDayPointerEnter)===null||D===void 0||D.call(r,e,t,$)},M=function($){var D;(D=r.onDayPointerLeave)===null||D===void 0||D.call(r,e,t,$)},A=function($){var D;(D=r.onDayTouchCancel)===null||D===void 0||D.call(r,e,t,$)},P=function($){var D;(D=r.onDayTouchEnd)===null||D===void 0||D.call(r,e,t,$)},T=function($){var D;(D=r.onDayTouchMove)===null||D===void 0||D.call(r,e,t,$)},I=function($){var D;(D=r.onDayTouchStart)===null||D===void 0||D.call(r,e,t,$)},L=function($){var D;(D=r.onDayKeyUp)===null||D===void 0||D.call(r,e,t,$)},R=function($){var D;switch($.key){case"ArrowLeft":$.preventDefault(),$.stopPropagation(),r.dir==="rtl"?l():c();break;case"ArrowRight":$.preventDefault(),$.stopPropagation(),r.dir==="rtl"?c():l();break;case"ArrowDown":$.preventDefault(),$.stopPropagation(),d();break;case"ArrowUp":$.preventDefault(),$.stopPropagation(),u();break;case"PageUp":$.preventDefault(),$.stopPropagation(),$.shiftKey?x():m();break;case"PageDown":$.preventDefault(),$.stopPropagation(),$.shiftKey?y():g();break;case"Home":$.preventDefault(),$.stopPropagation(),v();break;case"End":$.preventDefault(),$.stopPropagation(),b();break}(D=r.onDayKeyDown)===null||D===void 0||D.call(r,e,t,$)},G={onClick:w,onFocus:N,onBlur:j,onKeyDown:R,onKeyUp:L,onMouseEnter:S,onMouseLeave:C,onPointerEnter:k,onPointerLeave:M,onTouchCancel:A,onTouchEnd:P,onTouchMove:T,onTouchStart:I};return G}function oSe(){var e=pr(),t=mX(),r=vA(),s=wA(),a=p4(e)?t.selected:d1(e)?r.selected:u1(e)?s.selected:void 0;return a}function lSe(e){return Object.values(ml).includes(e)}function cSe(e,t){var r=[e.classNames.day];return Object.keys(t).forEach(function(s){var a=e.modifiersClassNames[s];if(a)r.push(a);else if(lSe(s)){var i=e.classNames["day_".concat(s)];i&&r.push(i)}}),r}function dSe(e,t){var r=Kt({},e.styles.day);return Object.keys(t).forEach(function(s){var a;r=Kt(Kt({},r),(a=e.modifiersStyles)===null||a===void 0?void 0:a[s])}),r}function uSe(e,t,r){var s,a,i,o=pr(),l=NA(),c=rSe(e,t),d=iSe(e,c),u=oSe(),f=!!(o.onDayClick||o.mode!=="default");p.useEffect(function(){var S;c.outside||l.focusedDay&&f&&is(l.focusedDay,e)&&((S=r.current)===null||S===void 0||S.focus())},[l.focusedDay,e,r,f,c.outside]);var h=cSe(o,c).join(" "),m=dSe(o,c),g=!!(c.outside&&!o.showOutsideDays||c.hidden),x=(i=(a=o.components)===null||a===void 0?void 0:a.DayContent)!==null&&i!==void 0?i:E3e,y=n.jsx(x,{date:e,displayMonth:t,activeModifiers:c}),v={style:m,className:h,children:y,role:"gridcell"},b=l.focusTarget&&is(l.focusTarget,e)&&!c.outside,w=l.focusedDay&&is(l.focusedDay,e),N=Kt(Kt(Kt({},v),(s={disabled:c.disabled,role:"gridcell"},s["aria-selected"]=c.selected,s.tabIndex=w||b?0:-1,s)),d),j={isButton:f,isHidden:g,activeModifiers:c,selectedDays:u,buttonProps:N,divProps:v};return j}function fSe(e){var t=p.useRef(null),r=uSe(e.date,e.displayMonth,t);return r.isHidden?n.jsx("div",{role:"gridcell"}):r.isButton?n.jsx(Ej,Kt({name:"day",ref:t},r.buttonProps)):n.jsx("div",Kt({},r.divProps))}function hSe(e){var t=e.number,r=e.dates,s=pr(),a=s.onWeekNumberClick,i=s.styles,o=s.classNames,l=s.locale,c=s.labels.labelWeekNumber,d=s.formatters.formatWeekNumber,u=d(Number(t),{locale:l});if(!a)return n.jsx("span",{className:o.weeknumber,style:i.weeknumber,children:u});var f=c(Number(t),{locale:l}),h=function(m){a(t,r,m)};return n.jsx(Ej,{name:"week-number","aria-label":f,className:o.weeknumber,style:i.weeknumber,onClick:h,children:u})}function mSe(e){var t,r,s=pr(),a=s.styles,i=s.classNames,o=s.showWeekNumber,l=s.components,c=(t=l==null?void 0:l.Day)!==null&&t!==void 0?t:fSe,d=(r=l==null?void 0:l.WeekNumber)!==null&&r!==void 0?r:hSe,u;return o&&(u=n.jsx("td",{className:i.cell,style:a.cell,children:n.jsx(d,{number:e.weekNumber,dates:e.dates})})),n.jsxs("tr",{className:i.row,style:a.row,children:[u,e.dates.map(function(f){return n.jsx("td",{className:i.cell,style:a.cell,role:"presentation",children:n.jsx(c,{displayMonth:e.displayMonth,date:f})},k4e(f))})]})}function i$(e,t,r){for(var s=r!=null&&r.ISOWeek?ZZ(t):h4(t,r),a=r!=null&&r.ISOWeek?ih(e):hl(e,r),i=el(s,a),o=[],l=0;l<=i;l++)o.push(Hr(a,l));var c=o.reduce(function(d,u){var f=r!=null&&r.ISOWeek?XZ(u):tX(u,r),h=d.find(function(m){return m.weekNumber===f});return h?(h.dates.push(u),d):(d.push({weekNumber:f,dates:[u]}),d)},[]);return c}function pSe(e,t){var r=i$(Wa(e),c1(e),t);if(t!=null&&t.useFixedWeeks){var s=_4e(e,t);if(s<6){var a=r[r.length-1],i=a.dates[a.dates.length-1],o=wy(i,6-s),l=i$(wy(i,1),o,t);r.push.apply(r,l)}}return r}function gSe(e){var t,r,s,a=pr(),i=a.locale,o=a.classNames,l=a.styles,c=a.hideHead,d=a.fixedWeeks,u=a.components,f=a.weekStartsOn,h=a.firstWeekContainsDate,m=a.ISOWeek,g=pSe(e.displayMonth,{useFixedWeeks:!!d,ISOWeek:m,locale:i,weekStartsOn:f,firstWeekContainsDate:h}),x=(t=u==null?void 0:u.Head)!==null&&t!==void 0?t:A3e,y=(r=u==null?void 0:u.Row)!==null&&r!==void 0?r:mSe,v=(s=u==null?void 0:u.Footer)!==null&&s!==void 0?s:_3e;return n.jsxs("table",{id:e.id,className:o.table,style:l.table,role:"grid","aria-labelledby":e["aria-labelledby"],children:[!c&&n.jsx(x,{}),n.jsx("tbody",{className:o.tbody,style:l.tbody,children:g.map(function(b){return n.jsx(y,{displayMonth:e.displayMonth,dates:b.dates,weekNumber:b.weekNumber},b.weekNumber)})}),n.jsx(v,{displayMonth:e.displayMonth})]})}function xSe(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var ySe=xSe()?p.useLayoutEffect:p.useEffect,xC=!1,vSe=0;function o$(){return"react-day-picker-".concat(++vSe)}function bSe(e){var t,r=e??(xC?o$():null),s=p.useState(r),a=s[0],i=s[1];return ySe(function(){a===null&&i(o$())},[]),p.useEffect(function(){xC===!1&&(xC=!0)},[]),(t=e??a)!==null&&t!==void 0?t:void 0}function wSe(e){var t,r,s=pr(),a=s.dir,i=s.classNames,o=s.styles,l=s.components,c=f1().displayMonths,d=bSe(s.id?"".concat(s.id,"-").concat(e.displayIndex):void 0),u=s.id?"".concat(s.id,"-grid-").concat(e.displayIndex):void 0,f=[i.month],h=o.month,m=e.displayIndex===0,g=e.displayIndex===c.length-1,x=!m&&!g;a==="rtl"&&(t=[m,g],g=t[0],m=t[1]),m&&(f.push(i.caption_start),h=Kt(Kt({},h),o.caption_start)),g&&(f.push(i.caption_end),h=Kt(Kt({},h),o.caption_end)),x&&(f.push(i.caption_between),h=Kt(Kt({},h),o.caption_between));var y=(r=l==null?void 0:l.Caption)!==null&&r!==void 0?r:M3e;return n.jsxs("div",{className:f.join(" "),style:h,children:[n.jsx(y,{id:d,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),n.jsx(gSe,{id:u,"aria-labelledby":d,displayMonth:e.displayMonth})]},e.displayIndex)}function jSe(e){var t=pr(),r=t.classNames,s=t.styles;return n.jsx("div",{className:r.months,style:s.months,children:e.children})}function NSe(e){var t,r,s=e.initialProps,a=pr(),i=NA(),o=f1(),l=p.useState(!1),c=l[0],d=l[1];p.useEffect(function(){a.initialFocus&&i.focusTarget&&(c||(i.focus(i.focusTarget),d(!0)))},[a.initialFocus,c,i.focus,i.focusTarget,i]);var u=[a.classNames.root,a.className];a.numberOfMonths>1&&u.push(a.classNames.multiple_months),a.showWeekNumber&&u.push(a.classNames.with_weeknumber);var f=Kt(Kt({},a.styles.root),a.style),h=Object.keys(s).filter(function(g){return g.startsWith("data-")}).reduce(function(g,x){var y;return Kt(Kt({},g),(y={},y[x]=s[x],y))},{}),m=(r=(t=s.components)===null||t===void 0?void 0:t.Months)!==null&&r!==void 0?r:jSe;return n.jsx("div",Kt({className:u.join(" "),style:f,dir:a.dir,id:a.id,nonce:s.nonce,title:s.title,lang:s.lang},h,{children:n.jsx(m,{children:o.displayMonths.map(function(g,x){return n.jsx(wSe,{displayIndex:x,displayMonth:g},x)})})}))}function SSe(e){var t=e.children,r=Y4e(e,["children"]);return n.jsx(h3e,{initialProps:r,children:n.jsx(N3e,{children:n.jsx(sSe,{initialProps:r,children:n.jsx(I3e,{initialProps:r,children:n.jsx($3e,{initialProps:r,children:n.jsx(H3e,{children:n.jsx(nSe,{children:t})})})})})})})}function CSe(e){return n.jsx(SSe,Kt({},e,{children:n.jsx(NSe,{initialProps:e})}))}function oh({className:e,classNames:t,showOutsideDays:r=!0,...s}){return n.jsx(CSe,{showOutsideDays:r,className:Le("p-3",e),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:Le(xy({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:Le(xy({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...t},components:{IconLeft:({className:a,...i})=>n.jsx(Lu,{className:Le("h-4 w-4",a),...i}),IconRight:({className:a,...i})=>n.jsx(vl,{className:Le("h-4 w-4",a),...i})},...s})}oh.displayName="Calendar";var CA="Dialog",[pX,gX]=ws(CA),[kSe,bl]=pX(CA),xX=e=>{const{__scopeDialog:t,children:r,open:s,defaultOpen:a,onOpenChange:i,modal:o=!0}=e,l=p.useRef(null),c=p.useRef(null),[d=!1,u]=qa({prop:s,defaultProp:a,onChange:i});return n.jsx(kSe,{scope:t,triggerRef:l,contentRef:c,contentId:Gs(),titleId:Gs(),descriptionId:Gs(),open:d,onOpenChange:u,onOpenToggle:p.useCallback(()=>u(f=>!f),[u]),modal:o,children:r})};xX.displayName=CA;var yX="DialogTrigger",vX=p.forwardRef((e,t)=>{const{__scopeDialog:r,...s}=e,a=bl(yX,r),i=rn(t,a.triggerRef);return n.jsx(ht.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":_A(a.open),...s,ref:i,onClick:ut(e.onClick,a.onOpenToggle)})});vX.displayName=yX;var kA="DialogPortal",[MSe,bX]=pX(kA,{forceMount:void 0}),wX=e=>{const{__scopeDialog:t,forceMount:r,children:s,container:a}=e,i=bl(kA,t);return n.jsx(MSe,{scope:t,forceMount:r,children:p.Children.map(s,o=>n.jsx(Sa,{present:r||i.open,children:n.jsx(Gv,{asChild:!0,container:a,children:o})}))})};wX.displayName=kA;var Ij="DialogOverlay",jX=p.forwardRef((e,t)=>{const r=bX(Ij,e.__scopeDialog),{forceMount:s=r.forceMount,...a}=e,i=bl(Ij,e.__scopeDialog);return i.modal?n.jsx(Sa,{present:s||i.open,children:n.jsx(PSe,{...a,ref:t})}):null});jX.displayName=Ij;var _Se=th("DialogOverlay.RemoveScroll"),PSe=p.forwardRef((e,t)=>{const{__scopeDialog:r,...s}=e,a=bl(Ij,r);return n.jsx(l4,{as:_Se,allowPinchZoom:!0,shards:[a.contentRef],children:n.jsx(ht.div,{"data-state":_A(a.open),...s,ref:t,style:{pointerEvents:"auto",...s.style}})})}),lh="DialogContent",NX=p.forwardRef((e,t)=>{const r=bX(lh,e.__scopeDialog),{forceMount:s=r.forceMount,...a}=e,i=bl(lh,e.__scopeDialog);return n.jsx(Sa,{present:s||i.open,children:i.modal?n.jsx(TSe,{...a,ref:t}):n.jsx(ASe,{...a,ref:t})})});NX.displayName=lh;var TSe=p.forwardRef((e,t)=>{const r=bl(lh,e.__scopeDialog),s=p.useRef(null),a=rn(t,r.contentRef,s);return p.useEffect(()=>{const i=s.current;if(i)return cA(i)},[]),n.jsx(SX,{...e,ref:a,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ut(e.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=r.triggerRef.current)==null||o.focus()}),onPointerDownOutside:ut(e.onPointerDownOutside,i=>{const o=i.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&i.preventDefault()}),onFocusOutside:ut(e.onFocusOutside,i=>i.preventDefault())})}),ASe=p.forwardRef((e,t)=>{const r=bl(lh,e.__scopeDialog),s=p.useRef(!1),a=p.useRef(!1);return n.jsx(SX,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,l;(o=e.onCloseAutoFocus)==null||o.call(e,i),i.defaultPrevented||(s.current||(l=r.triggerRef.current)==null||l.focus(),i.preventDefault()),s.current=!1,a.current=!1},onInteractOutside:i=>{var c,d;(c=e.onInteractOutside)==null||c.call(e,i),i.defaultPrevented||(s.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=i.target;((d=r.triggerRef.current)==null?void 0:d.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),SX=p.forwardRef((e,t)=>{const{__scopeDialog:r,trapFocus:s,onOpenAutoFocus:a,onCloseAutoFocus:i,...o}=e,l=bl(lh,r),c=p.useRef(null),d=rn(t,c);return KT(),n.jsxs(n.Fragment,{children:[n.jsx(n4,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:a,onUnmountAutoFocus:i,children:n.jsx(_0,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":_A(l.open),...o,ref:d,onDismiss:()=>l.onOpenChange(!1)})}),n.jsxs(n.Fragment,{children:[n.jsx(ISe,{titleId:l.titleId}),n.jsx(DSe,{contentRef:c,descriptionId:l.descriptionId})]})]})}),MA="DialogTitle",CX=p.forwardRef((e,t)=>{const{__scopeDialog:r,...s}=e,a=bl(MA,r);return n.jsx(ht.h2,{id:a.titleId,...s,ref:t})});CX.displayName=MA;var kX="DialogDescription",MX=p.forwardRef((e,t)=>{const{__scopeDialog:r,...s}=e,a=bl(kX,r);return n.jsx(ht.p,{id:a.descriptionId,...s,ref:t})});MX.displayName=kX;var _X="DialogClose",PX=p.forwardRef((e,t)=>{const{__scopeDialog:r,...s}=e,a=bl(_X,r);return n.jsx(ht.button,{type:"button",...s,ref:t,onClick:ut(e.onClick,()=>a.onOpenChange(!1))})});PX.displayName=_X;function _A(e){return e?"open":"closed"}var TX="DialogTitleWarning",[ESe,AX]=Wpe(TX,{contentName:lh,titleName:MA,docsSlug:"dialog"}),ISe=({titleId:e})=>{const t=AX(TX),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return p.useEffect(()=>{e&&(document.getElementById(e)||console.error(r))},[r,e]),null},LSe="DialogDescriptionWarning",DSe=({contentRef:e,descriptionId:t})=>{const s=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${AX(LSe).contentName}}.`;return p.useEffect(()=>{var i;const a=(i=e.current)==null?void 0:i.getAttribute("aria-describedby");t&&a&&(document.getElementById(t)||console.warn(s))},[s,e,t]),null},g4=xX,PA=vX,x4=wX,B0=jX,U0=NX,h1=CX,m1=MX,p1=PX,EX="AlertDialog",[$Se]=ws(EX,[gX]),dd=gX(),IX=e=>{const{__scopeAlertDialog:t,...r}=e,s=dd(t);return n.jsx(g4,{...s,...r,modal:!0})};IX.displayName=EX;var OSe="AlertDialogTrigger",LX=p.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...s}=e,a=dd(r);return n.jsx(PA,{...a,...s,ref:t})});LX.displayName=OSe;var RSe="AlertDialogPortal",DX=e=>{const{__scopeAlertDialog:t,...r}=e,s=dd(t);return n.jsx(x4,{...s,...r})};DX.displayName=RSe;var FSe="AlertDialogOverlay",$X=p.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...s}=e,a=dd(r);return n.jsx(B0,{...a,...s,ref:t})});$X.displayName=FSe;var Bm="AlertDialogContent",[zSe,BSe]=$Se(Bm),USe=PY("AlertDialogContent"),OX=p.forwardRef((e,t)=>{const{__scopeAlertDialog:r,children:s,...a}=e,i=dd(r),o=p.useRef(null),l=rn(t,o),c=p.useRef(null);return n.jsx(ESe,{contentName:Bm,titleName:RX,docsSlug:"alert-dialog",children:n.jsx(zSe,{scope:r,cancelRef:c,children:n.jsxs(U0,{role:"alertdialog",...i,...a,ref:l,onOpenAutoFocus:ut(a.onOpenAutoFocus,d=>{var u;d.preventDefault(),(u=c.current)==null||u.focus({preventScroll:!0})}),onPointerDownOutside:d=>d.preventDefault(),onInteractOutside:d=>d.preventDefault(),children:[n.jsx(USe,{children:s}),n.jsx(HSe,{contentRef:o})]})})})});OX.displayName=Bm;var RX="AlertDialogTitle",FX=p.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...s}=e,a=dd(r);return n.jsx(h1,{...a,...s,ref:t})});FX.displayName=RX;var zX="AlertDialogDescription",BX=p.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...s}=e,a=dd(r);return n.jsx(m1,{...a,...s,ref:t})});BX.displayName=zX;var VSe="AlertDialogAction",UX=p.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...s}=e,a=dd(r);return n.jsx(p1,{...a,...s,ref:t})});UX.displayName=VSe;var VX="AlertDialogCancel",HX=p.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...s}=e,{cancelRef:a}=BSe(VX,r),i=dd(r),o=rn(t,a);return n.jsx(p1,{...i,...s,ref:o})});HX.displayName=VX;var HSe=({contentRef:e})=>{const t=`\`${Bm}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Bm}\` by passing a \`${zX}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Bm}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return p.useEffect(()=>{var s;document.getElementById((s=e.current)==null?void 0:s.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},WSe=IX,qSe=LX,GSe=DX,WX=$X,qX=OX,GX=UX,YX=HX,QX=FX,KX=BX;const V0=WSe,YSe=qSe,QSe=GSe,JX=p.forwardRef(({className:e,...t},r)=>n.jsx(WX,{className:Le("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:r}));JX.displayName=WX.displayName;const kh=p.forwardRef(({className:e,...t},r)=>n.jsxs(QSe,{children:[n.jsx(JX,{}),n.jsx(qX,{ref:r,className:Le("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));kh.displayName=qX.displayName;const wu=({className:e,...t})=>n.jsx("div",{className:Le("flex flex-col space-y-2 text-center sm:text-left",e),...t});wu.displayName="AlertDialogHeader";const ju=({className:e,...t})=>n.jsx("div",{className:Le("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});ju.displayName="AlertDialogFooter";const Nu=p.forwardRef(({className:e,...t},r)=>n.jsx(QX,{ref:r,className:Le("text-lg font-semibold",e),...t}));Nu.displayName=QX.displayName;const Rc=p.forwardRef(({className:e,...t},r)=>n.jsx(KX,{ref:r,className:Le("text-sm text-muted-foreground",e),...t}));Rc.displayName=KX.displayName;const Mh=p.forwardRef(({className:e,...t},r)=>n.jsx(GX,{ref:r,className:Le(xy(),e),...t}));Mh.displayName=GX.displayName;const _h=p.forwardRef(({className:e,...t},r)=>n.jsx(YX,{ref:r,className:Le(xy({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));_h.displayName=YX.displayName;function KSe({onNext:e,onBack:t}){const[r,s]=p.useState(""),[a,i]=p.useState(!1),[o,l]=p.useState(!1),[c,d]=p.useState(""),[u,f]=p.useState(""),[h,m]=p.useState(""),[g,x]=p.useState(),[y,v]=p.useState(),{toast:b}=Ee(),w=async C=>{i(!0);try{const k=await fetch(`/api/geocode?address=${encodeURIComponent(C)}`);if(!k.ok)throw new Error("Failed to geocode address");const M=await k.json();if(!M.success||!M.location)throw new Error("Invalid address or geocoding failed");x(M.location.lat),v(M.location.lng);const A=await fetch(`/api/distance-check?address=${encodeURIComponent(C)}`);if(!A.ok)throw new Error("Failed to check distance");const P=await A.json();if(!P.success)throw new Error("Distance check failed");return P.formattedAddress&&d(P.formattedAddress),P.distance&&P.distance.text&&f(P.distance.text),P.driveTime&&P.driveTime.text&&m(P.driveTime.text),P.isInServiceArea}catch(k){return console.error("Error checking service area:",k),b({title:"Address Check Error",description:"We had trouble verifying your address. Please ensure it's entered correctly.",variant:"destructive"}),!1}finally{i(!1)}},N=async C=>{if(C.preventDefault(),!r.trim()){b({title:"Error",description:"Please enter an address to check",variant:"destructive"});return}await w(r)?(b({title:"Great news!",description:h?`You're in our service area (${h} drive). Let's confirm your location on the map.`:"You're in our service area. Let's confirm your location on the map."}),e(c||r,!1,g,y)):l(!0)},j=()=>{l(!1),e(c||r,!0,g,y),b({title:"Extended Area Request",description:"Your appointment will be marked as an extended service area request. Please confirm your location on the map."})},S=()=>{l(!1)};return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"text-center pb-4 border-b border-blue-400/10",children:[n.jsx("h3",{className:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-200 via-blue-400 to-blue-200",children:"Check Service Area"}),n.jsx("p",{className:"text-sm text-blue-200/60 mt-2",children:"Please enter your address to check if you're in our service area"})]}),n.jsxs("form",{onSubmit:N,className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(U,{htmlFor:"address",className:"text-blue-100",children:"Your Address"}),n.jsx(se,{id:"address",value:r,onChange:C=>s(C.target.value),placeholder:"Enter your full address",className:"w-full bg-gray-700/30 border-blue-400/30 text-blue-100 placeholder:text-blue-200/40",required:!0})]}),n.jsxs("div",{className:"flex justify-between items-center pt-4",children:[n.jsx(_,{type:"button",variant:"ghost",onClick:t,className:"text-blue-200 hover:bg-blue-500/20",children:"Cancel"}),n.jsx(_,{type:"submit",disabled:a||!r.trim(),className:"bg-blue-600 hover:bg-blue-700 text-white",children:a?"Checking...":"Check Address"})]})]})]}),n.jsx(V0,{open:o,onOpenChange:l,children:n.jsxs(kh,{children:[n.jsxs(wu,{children:[n.jsx(Nu,{children:"Outside Service Area"}),n.jsxs(Rc,{children:["Sorry, the address you entered ",c?`(${c})`:""," is ",h?`a ${h} drive from our location`:u?`${u} away from our location`:"",", which is outside our regular service area of 26 minutes driving time. We do sometimes make exceptions for extended areas. Would you like to submit your request anyway as an extended service area request, or try a different address?"]})]}),n.jsxs(ju,{children:[n.jsx(_h,{onClick:S,children:"Try Different Address"}),n.jsx(Mh,{onClick:j,className:"bg-blue-600 hover:bg-blue-700",children:"Submit Request Anyway"})]})]})})]})}var yC="rovingFocusGroup.onEntryFocus",JSe={bubbles:!1,cancelable:!0},y4="RovingFocusGroup",[mM,ZX,ZSe]=qv(y4),[XSe,v4]=ws(y4,[ZSe]),[eCe,tCe]=XSe(y4),XX=p.forwardRef((e,t)=>n.jsx(mM.Provider,{scope:e.__scopeRovingFocusGroup,children:n.jsx(mM.Slot,{scope:e.__scopeRovingFocusGroup,children:n.jsx(nCe,{...e,ref:t})})}));XX.displayName=y4;var nCe=p.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:s,loop:a=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:d,preventScrollOnEntryFocus:u=!1,...f}=e,h=p.useRef(null),m=rn(t,h),g=Ch(i),[x=null,y]=qa({prop:o,defaultProp:l,onChange:c}),[v,b]=p.useState(!1),w=Gr(d),N=ZX(r),j=p.useRef(!1),[S,C]=p.useState(0);return p.useEffect(()=>{const k=h.current;if(k)return k.addEventListener(yC,w),()=>k.removeEventListener(yC,w)},[w]),n.jsx(eCe,{scope:r,orientation:s,dir:g,loop:a,currentTabStopId:x,onItemFocus:p.useCallback(k=>y(k),[y]),onItemShiftTab:p.useCallback(()=>b(!0),[]),onFocusableItemAdd:p.useCallback(()=>C(k=>k+1),[]),onFocusableItemRemove:p.useCallback(()=>C(k=>k-1),[]),children:n.jsx(ht.div,{tabIndex:v||S===0?-1:0,"data-orientation":s,...f,ref:m,style:{outline:"none",...e.style},onMouseDown:ut(e.onMouseDown,()=>{j.current=!0}),onFocus:ut(e.onFocus,k=>{const M=!j.current;if(k.target===k.currentTarget&&M&&!v){const A=new CustomEvent(yC,JSe);if(k.currentTarget.dispatchEvent(A),!A.defaultPrevented){const P=N().filter(G=>G.focusable),T=P.find(G=>G.active),I=P.find(G=>G.id===x),R=[T,I,...P].filter(Boolean).map(G=>G.ref.current);nee(R,u)}}j.current=!1}),onBlur:ut(e.onBlur,()=>b(!1))})})}),eee="RovingFocusGroupItem",tee=p.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:s=!0,active:a=!1,tabStopId:i,...o}=e,l=Gs(),c=i||l,d=tCe(eee,r),u=d.currentTabStopId===c,f=ZX(r),{onFocusableItemAdd:h,onFocusableItemRemove:m}=d;return p.useEffect(()=>{if(s)return h(),()=>m()},[s,h,m]),n.jsx(mM.ItemSlot,{scope:r,id:c,focusable:s,active:a,children:n.jsx(ht.span,{tabIndex:u?0:-1,"data-orientation":d.orientation,...o,ref:t,onMouseDown:ut(e.onMouseDown,g=>{s?d.onItemFocus(c):g.preventDefault()}),onFocus:ut(e.onFocus,()=>d.onItemFocus(c)),onKeyDown:ut(e.onKeyDown,g=>{if(g.key==="Tab"&&g.shiftKey){d.onItemShiftTab();return}if(g.target!==g.currentTarget)return;const x=aCe(g,d.orientation,d.dir);if(x!==void 0){if(g.metaKey||g.ctrlKey||g.altKey||g.shiftKey)return;g.preventDefault();let v=f().filter(b=>b.focusable).map(b=>b.ref.current);if(x==="last")v.reverse();else if(x==="prev"||x==="next"){x==="prev"&&v.reverse();const b=v.indexOf(g.currentTarget);v=d.loop?iCe(v,b+1):v.slice(b+1)}setTimeout(()=>nee(v))}})})})});tee.displayName=eee;var rCe={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function sCe(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function aCe(e,t,r){const s=sCe(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(s))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(s)))return rCe[s]}function nee(e,t=!1){const r=document.activeElement;for(const s of e)if(s===r||(s.focus({preventScroll:t}),document.activeElement!==r))return}function iCe(e,t){return e.map((r,s)=>e[(t+s)%e.length])}var ree=XX,see=tee,TA="Radio",[oCe,aee]=ws(TA),[lCe,cCe]=oCe(TA),iee=p.forwardRef((e,t)=>{const{__scopeRadio:r,name:s,checked:a=!1,required:i,disabled:o,value:l="on",onCheck:c,form:d,...u}=e,[f,h]=p.useState(null),m=rn(t,y=>h(y)),g=p.useRef(!1),x=f?d||!!f.closest("form"):!0;return n.jsxs(lCe,{scope:r,checked:a,disabled:o,children:[n.jsx(ht.button,{type:"button",role:"radio","aria-checked":a,"data-state":cee(a),"data-disabled":o?"":void 0,disabled:o,value:l,...u,ref:m,onClick:ut(e.onClick,y=>{a||c==null||c(),x&&(g.current=y.isPropagationStopped(),g.current||y.stopPropagation())})}),x&&n.jsx(dCe,{control:f,bubbles:!g.current,name:s,value:l,checked:a,required:i,disabled:o,form:d,style:{transform:"translateX(-100%)"}})]})});iee.displayName=TA;var oee="RadioIndicator",lee=p.forwardRef((e,t)=>{const{__scopeRadio:r,forceMount:s,...a}=e,i=cCe(oee,r);return n.jsx(Sa,{present:s||i.checked,children:n.jsx(ht.span,{"data-state":cee(i.checked),"data-disabled":i.disabled?"":void 0,...a,ref:t})})});lee.displayName=oee;var dCe=e=>{const{control:t,checked:r,bubbles:s=!0,...a}=e,i=p.useRef(null),o=a1(r),l=i1(t);return p.useEffect(()=>{const c=i.current,d=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(d,"checked").set;if(o!==r&&f){const h=new Event("click",{bubbles:s});f.call(c,r),c.dispatchEvent(h)}},[o,r,s]),n.jsx("input",{type:"radio","aria-hidden":!0,defaultChecked:r,...a,tabIndex:-1,ref:i,style:{...e.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function cee(e){return e?"checked":"unchecked"}var uCe=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],AA="RadioGroup",[fCe]=ws(AA,[v4,aee]),dee=v4(),uee=aee(),[hCe,mCe]=fCe(AA),fee=p.forwardRef((e,t)=>{const{__scopeRadioGroup:r,name:s,defaultValue:a,value:i,required:o=!1,disabled:l=!1,orientation:c,dir:d,loop:u=!0,onValueChange:f,...h}=e,m=dee(r),g=Ch(d),[x,y]=qa({prop:i,defaultProp:a,onChange:f});return n.jsx(hCe,{scope:r,name:s,required:o,disabled:l,value:x,onValueChange:y,children:n.jsx(ree,{asChild:!0,...m,orientation:c,dir:g,loop:u,children:n.jsx(ht.div,{role:"radiogroup","aria-required":o,"aria-orientation":c,"data-disabled":l?"":void 0,dir:g,...h,ref:t})})})});fee.displayName=AA;var hee="RadioGroupItem",mee=p.forwardRef((e,t)=>{const{__scopeRadioGroup:r,disabled:s,...a}=e,i=mCe(hee,r),o=i.disabled||s,l=dee(r),c=uee(r),d=p.useRef(null),u=rn(t,d),f=i.value===a.value,h=p.useRef(!1);return p.useEffect(()=>{const m=x=>{uCe.includes(x.key)&&(h.current=!0)},g=()=>h.current=!1;return document.addEventListener("keydown",m),document.addEventListener("keyup",g),()=>{document.removeEventListener("keydown",m),document.removeEventListener("keyup",g)}},[]),n.jsx(see,{asChild:!0,...l,focusable:!o,active:f,children:n.jsx(iee,{disabled:o,required:i.required,checked:f,...c,...a,name:i.name,ref:u,onCheck:()=>i.onValueChange(a.value),onKeyDown:ut(m=>{m.key==="Enter"&&m.preventDefault()}),onFocus:ut(a.onFocus,()=>{var m;h.current&&((m=d.current)==null||m.click())})})})});mee.displayName=hee;var pCe="RadioGroupIndicator",pee=p.forwardRef((e,t)=>{const{__scopeRadioGroup:r,...s}=e,a=uee(r);return n.jsx(lee,{...a,...s,ref:t})});pee.displayName=pCe;var gee=fee,xee=mee,gCe=pee;const mo=p.forwardRef(({className:e,...t},r)=>n.jsx(gee,{className:Le("grid gap-2",e),...t,ref:r}));mo.displayName=gee.displayName;const Kn=p.forwardRef(({className:e,...t},r)=>n.jsx(xee,{ref:r,className:Le("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:n.jsx(gCe,{className:"flex items-center justify-center",children:n.jsx(B0e,{className:"h-2.5 w-2.5 fill-current text-current"})})}));Kn.displayName=xee.displayName;function xCe({onConfirm:e,onBack:t,locationType:r="residence"}){const[s,a]=p.useState(null),[i,o]=p.useState(null),[l,c]=p.useState(null),[d,u]=p.useState(r),[f,h]=p.useState(""),{toast:m}=Ee(),g=()=>{if(s===null){m({title:"Required Field",description:"Please select whether you need exterior service.",variant:"destructive"});return}if(i===null){m({title:"Required Field",description:"Please indicate if power is available.",variant:"destructive"});return}if(s&&l===null){m({title:"Required Field",description:"Please indicate if water is available for your exterior service.",variant:"destructive"});return}e({hasPowerAccess:i===!0,hasWaterAccess:s?l===!0:!1,locationType:d,needsExteriorService:s===!0,notes:f})};return n.jsxs("div",{className:"w-full space-y-6",children:[n.jsxs("div",{className:"text-center pb-4 border-b border-blue-400/10",children:[n.jsx("h3",{className:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-200 via-blue-400 to-blue-200",children:"Service Requirements"}),n.jsx("p",{className:"text-sm text-blue-200/60 mt-2",children:"Let's verify we can provide service at your location"})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"space-y-3",children:[n.jsx(U,{className:"text-base text-blue-100",children:"Do you need exterior detailing service?"}),n.jsxs(mo,{onValueChange:x=>a(x==="yes"),className:"flex flex-col space-y-2",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Kn,{value:"yes",id:"exterior-yes",className:"border-blue-400/40"}),n.jsx(U,{htmlFor:"exterior-yes",className:"font-normal text-blue-100",children:"Yes, I need exterior cleaning"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Kn,{value:"no",id:"exterior-no",className:"border-blue-400/40"}),n.jsx(U,{htmlFor:"exterior-no",className:"font-normal text-blue-100",children:"No, interior service only"})]})]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(U,{className:"text-base text-blue-100",children:"Is there a power outlet available?"}),n.jsx("div",{className:"text-blue-400",children:n.jsx(na,{size:16})})]}),n.jsx("p",{className:"text-sm text-blue-200/60 mb-2",children:"We need a standard 110v outlet within 100ft of your vehicle. I bring 100ft extensions and can run power through doors/windows if needed."}),n.jsxs(mo,{onValueChange:x=>o(x==="yes"),className:"flex flex-col space-y-2",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Kn,{value:"yes",id:"power-yes",className:"border-blue-400/40"}),n.jsx(U,{htmlFor:"power-yes",className:"font-normal text-blue-100",children:"Yes, power is available"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Kn,{value:"no",id:"power-no",className:"border-blue-400/40"}),n.jsx(U,{htmlFor:"power-no",className:"font-normal text-blue-100",children:"No, I'm unsure about power"})]})]}),i===!1&&n.jsx("div",{className:"mt-2 p-3 bg-blue-50 rounded-md text-sm text-blue-700 dark:bg-blue-950 dark:text-blue-200",children:n.jsxs("div",{className:"flex items-start",children:[n.jsx(vo,{className:"h-5 w-5 mr-2 flex-shrink-0 mt-0.5"}),n.jsx("div",{children:"No problem! For apartments, condos, or tight spaces, I can run my power cable through a door or window. Just mention this in the notes below so I know what to expect."})]})})]}),s&&n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(U,{className:"text-base",children:"Is there a water spigot/hose connection available?"}),n.jsx("div",{className:"text-blue-500",children:n.jsx(RS,{size:16})})]}),n.jsx(ke,{className:"text-sm text-muted-foreground mb-2",children:"For exterior services, we need access to a water spigot within 100ft of your vehicle."}),n.jsxs(mo,{onValueChange:x=>c(x==="yes"),className:"flex flex-col space-y-2",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Kn,{value:"yes",id:"water-yes"}),n.jsx(U,{htmlFor:"water-yes",className:"font-normal",children:"Yes, water access is available"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Kn,{value:"no",id:"water-no"}),n.jsx(U,{htmlFor:"water-no",className:"font-normal",children:"No, I'm unsure about water access"})]})]}),l===!1&&n.jsx("div",{className:"mt-2 p-3 bg-amber-50 rounded-md text-sm text-amber-700 dark:bg-amber-950 dark:text-amber-200",children:n.jsxs("div",{className:"flex items-start",children:[n.jsx(Wt,{className:"h-5 w-5 mr-2 flex-shrink-0 mt-0.5"}),n.jsx("div",{children:d==="apartment"||d==="condo"?"For apartments or condos, please check with building maintenance if there's a water spigot you can use.":d==="business"?"For business locations, you might need to check with the facilities manager for water access.":"Water access is required for exterior services. Please check if a spigot is available or add details below."})]})})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsx(U,{className:"text-base",children:"Location Type"}),n.jsxs(mo,{value:d,onValueChange:u,className:"flex flex-col space-y-2",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Kn,{value:"house",id:"loc-house"}),n.jsx(U,{htmlFor:"loc-house",className:"font-normal",children:"House"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Kn,{value:"apartment",id:"loc-apartment"}),n.jsx(U,{htmlFor:"loc-apartment",className:"font-normal",children:"Apartment/Condo"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Kn,{value:"business",id:"loc-business"}),n.jsx(U,{htmlFor:"loc-business",className:"font-normal",children:"Business/Workplace"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Kn,{value:"other",id:"loc-other"}),n.jsx(U,{htmlFor:"loc-other",className:"font-normal",children:"Other"})]})]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsx(U,{htmlFor:"notes",className:"text-base",children:"Additional Notes"}),n.jsx("textarea",{id:"notes",value:f,onChange:x=>h(x.target.value),placeholder:"Add any details about power/water access or special circumstances.",className:"min-h-[100px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"})]}),(s&&l!==null||!s)&&i!==null&&n.jsxs("div",{className:"p-4 bg-gray-50 rounded-md dark:bg-gray-900",children:[n.jsxs("h3",{className:"font-medium mb-2 flex items-center",children:[n.jsx(bn,{className:"h-5 w-5 mr-2 text-green-500"}),"Service Requirements Summary"]}),n.jsxs("ul",{className:"space-y-2 text-sm",children:[n.jsxs("li",{className:"flex items-center",children:[n.jsx(na,{className:"h-4 w-4 mr-2 text-blue-500"}),"Power: ",i?"Available ":"Verification needed"]}),s&&n.jsxs("li",{className:"flex items-center",children:[n.jsx(RS,{className:"h-4 w-4 mr-2 text-blue-500"}),"Water: ",l?"Available ":"Verification needed"]}),!s&&n.jsxs("li",{className:"flex items-center",children:[n.jsx(RS,{className:"h-4 w-4 mr-2 text-gray-500"}),"Water: Not required for interior-only service"]}),n.jsx("li",{className:"text-xs mt-2 text-gray-500",children:"Note: Our technicians bring 100ft extensions for both water and power."})]})]}),n.jsxs("div",{className:"flex justify-between pt-4",children:[n.jsx(_,{variant:"outline",onClick:t,className:"border-blue-400/40 text-blue-200 hover:bg-blue-500/20",children:"Back"}),n.jsx(_,{onClick:g,disabled:s===null||i===null||s&&l===null,className:"bg-blue-600 hover:bg-blue-700",children:"Continue"})]})]})]})}const yCe=({open:e,onOpenChange:t,onProceed:r,onReschedule:s,weatherRiskLevel:a,precipitationChance:i,date:o,selectedService:l})=>{const[c,d]=p.useState(!1),[u,f]=p.useState([]),[h,m]=p.useState(void 0),[g,x]=p.useState(!1);p.useEffect(()=>{c&&l&&u.length===0&&y()},[c,l]);const y=async()=>{x(!0);try{const M=await fetch(`/api/available-slots?service=${encodeURIComponent(l||"")}`);if(!M.ok)throw new Error("Failed to fetch available slots");const A=await M.json();if(A.success&&A.slots&&Array.isArray(A.slots)){const T=A.slots.map(I=>{const L=new Date(I);return L.setHours(0,0,0,0),L}).filter((I,L,R)=>R.findIndex(G=>G.getTime()===I.getTime())===L);f(T)}}catch(M){console.error("Error fetching available dates:",M)}finally{x(!1)}},v=()=>{d(!0)},b=()=>{h&&s(h)},w=()=>{d(!1),m(void 0)},N=()=>{switch(a){case"severe":return{color:"bg-red-600 bg-opacity-20 text-red-800",icon:n.jsx(Ya,{className:"h-5 w-5 text-red-800 mr-2"}),title:"Severe Weather Warning",description:`There is an extremely high chance (${i}%) of rain on the selected date. This will almost certainly prevent us from performing quality detailing work.`};case"very-high":return{color:"bg-orange-500 bg-opacity-30 text-orange-800",icon:n.jsx(ex,{className:"h-5 w-5 text-orange-800 mr-2"}),title:"Very High Chance of Rain",description:`There is a very high chance (${i}%) of rain on the selected date. This may significantly impact our ability to provide quality service.`};case"high":return{color:"bg-orange-400 bg-opacity-25 text-orange-800",icon:n.jsx(ex,{className:"h-5 w-5 text-orange-800 mr-2"}),title:"High Chance of Rain",description:`There is a high chance (${i}%) of rain on the selected date. This may affect the quality of our detailing service.`};case"moderate":return{color:"bg-yellow-400 bg-opacity-30 text-yellow-800",icon:n.jsx(ex,{className:"h-5 w-5 text-yellow-800 mr-2"}),title:"Moderate Chance of Rain",description:`There is a moderate chance (${i}%) of rain on the selected date. We can still perform the service, but exterior detailing might be affected.`};default:return{color:"bg-green-500 bg-opacity-20 text-green-800",icon:n.jsx(ex,{className:"h-5 w-5 text-green-800 mr-2"}),title:"Weather Notice",description:`There is a low chance (${i}%) of rain on the selected date.`}}},{color:j,icon:S,title:C,description:k}=N();return n.jsx(V0,{open:e,onOpenChange:t,children:n.jsx(kh,{className:"max-w-lg",children:c?n.jsxs(n.Fragment,{children:[n.jsxs(wu,{children:[n.jsxs(Nu,{className:"flex items-center",children:[n.jsx(hu,{className:"h-5 w-5 mr-2 text-blue-600"}),"Choose a New Date"]}),n.jsx(Rc,{children:"Select a date with better weather conditions for your appointment."})]}),n.jsxs("div",{className:"py-4",children:[g?n.jsx("div",{className:"flex items-center justify-center py-8",children:n.jsx("div",{className:"text-gray-500",children:"Loading available dates..."})}):n.jsx(oh,{mode:"single",selected:h,onSelect:m,disabled:M=>m4(M,new Date)||qZ(M)||!u.some(A=>is(A,M)),className:"rounded-md border"}),h&&n.jsxs("div",{className:"mt-4 p-3 bg-green-50 border border-green-200 rounded-md",children:[n.jsxs("p",{className:"text-sm text-green-800",children:[n.jsx("strong",{children:"New Date:"})," ",Ie(h,"EEEE, MMMM d, yyyy")]}),n.jsx("p",{className:"text-xs text-green-600 mt-1",children:"You'll be able to select a specific time on the next step."})]})]}),n.jsxs(ju,{children:[n.jsx(_,{variant:"outline",onClick:w,children:"Back"}),n.jsx(_,{onClick:b,disabled:!h,className:"bg-blue-600 hover:bg-blue-700",children:"Continue with This Date"})]})]}):n.jsxs(n.Fragment,{children:[n.jsxs(wu,{children:[n.jsxs(Nu,{className:"flex items-center",children:[S," ",C]}),n.jsx("div",{className:`p-3 rounded-md ${j} mb-3 mt-1`,children:n.jsx(Rc,{className:"text-inherit",children:k})}),n.jsx(Rc,{children:"Would you like to proceed with this appointment time or choose a different date?"})]}),n.jsxs(ju,{children:[n.jsx(_h,{onClick:()=>t(!1),children:"Cancel"}),n.jsxs(_,{variant:"outline",onClick:v,children:[n.jsx(hu,{className:"h-4 w-4 mr-2"}),"Reschedule"]}),n.jsx(Mh,{onClick:r,children:"Proceed Anyway"})]})]})})})};var vCe="Separator",l$="horizontal",bCe=["horizontal","vertical"],yee=p.forwardRef((e,t)=>{const{decorative:r,orientation:s=l$,...a}=e,i=wCe(s)?s:l$,l=r?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return n.jsx(ht.div,{"data-orientation":i,...l,...a,ref:t})});yee.displayName=vCe;function wCe(e){return bCe.includes(e)}var vee=yee;const Ot=p.forwardRef(({className:e,orientation:t="horizontal",decorative:r=!0,...s},a)=>n.jsx(vee,{ref:a,decorative:r,orientation:t,className:Le("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...s}));Ot.displayName=vee.displayName;function jCe({phoneNumber:e,selectedService:t,selectedAddOns:r,vehicleConditions:s,estimatedPrice:a,pointsEarningRate:i=1}){const[o,l]=p.useState(null),[c,d]=p.useState(!1),[u,f]=p.useState(0);Ee();const h=e.replace(/\D/g,"");return p.useEffect(()=>{async function m(){if(!(!h||h.length<10)){d(!0);try{const g=await fetch(`/api/loyalty/points/phone/${h}`);if(g.ok){const x=await g.json();x.success?l(x.data):l(null)}else console.error("Error fetching loyalty information")}catch(g){console.error("Error fetching loyalty data:",g)}finally{d(!1)}}}h&&m()},[h]),p.useEffect(()=>{a>0?f(Math.floor(a*i)):f(0)},[a,i]),!h||h.length<10?null:n.jsx(O,{className:"bg-muted/50 border-dashed border-muted-foreground/50 my-4",children:n.jsx(H,{className:"pt-4",children:n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("h4",{className:"font-medium",children:"Clean Machine Loyalty"}),c?n.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading..."}):o&&o.customer?n.jsx(ge,{variant:"outline",className:"bg-blue-100 text-blue-800",children:o.loyaltyPoints?`${o.loyaltyPoints.points} points`:"Enrolled"}):n.jsx(ge,{variant:"outline",className:"bg-gray-100",children:"Not Enrolled"})]}),n.jsx(Ot,{className:"my-2"}),o&&o.customer?n.jsxs("div",{className:"space-y-1 text-sm",children:[n.jsxs("p",{className:"text-muted-foreground",children:["Welcome back, ",o.customer.name,"!"]}),o.loyaltyPoints&&n.jsxs("p",{children:["Current balance: ",n.jsxs("span",{className:"font-semibold",children:[o.loyaltyPoints.points," points"]})]}),n.jsxs("p",{className:"text-green-600 font-medium",children:["You'll earn ",n.jsx("span",{className:"font-bold",children:u})," points from this service!"]}),o.loyaltyPoints&&o.loyaltyPoints.expiryDate&&n.jsxs("p",{className:"text-xs text-muted-foreground",children:["Points expire: ",new Date(o.loyaltyPoints.expiryDate).toLocaleDateString()]})]}):n.jsxs("div",{className:"space-y-1 text-sm",children:[n.jsx("p",{children:"You're not enrolled in our loyalty program yet."}),n.jsxs("p",{className:"text-green-600",children:["Join today and earn ",n.jsx("span",{className:"font-bold",children:u})," points from this service!"]}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"We'll automatically enroll you when you book your first appointment."})]})]})})})}function NCe({selectedService:e,selectedAddOns:t,vehicles:r,basePriceEstimate:s,addOnPrices:a,conditionPrices:i}){const[o,l]=p.useState(0),[c,d]=p.useState([]);return p.useEffect(()=>{if(!e){l(0),d([]);return}const u=[];u.push({name:e,price:s,type:"service"}),t.forEach(m=>{a[m]&&u.push({name:m,price:a[m],type:"addon"})});let f=1;for(const m of r)if(m.make&&m.model){const g=m.conditions||[];f>1&&u.push({name:`Additional Vehicle (${m.make} ${m.model})`,price:Math.round(s*.75),type:"vehicle"}),g.forEach(x=>{i[x]&&u.push({name:`${x} (${m.make} ${m.model})`,price:i[x],type:"condition"})}),f++}const h=u.reduce((m,g)=>m+g.price,0);d(u),l(h)},[e,t,r,s,a,i]),e?n.jsx(O,{className:"mt-4",children:n.jsxs(H,{className:"pt-4",children:[n.jsx("h3",{className:"font-medium text-lg mb-2",children:"Price Estimate"}),n.jsx(Ot,{className:"my-2"}),n.jsxs("div",{className:"space-y-2",children:[c.map((u,f)=>n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{className:u.type==="service"?"font-medium":"",children:u.name}),n.jsxs("span",{children:["$",u.price]})]},f)),n.jsx(Ot,{className:"my-1"}),n.jsxs("div",{className:"flex justify-between font-bold",children:[n.jsx("span",{children:"Total Estimate"}),n.jsxs("span",{children:["$",o," - $",Math.round(o*1.67)]})]}),n.jsxs("div",{className:"mt-2 p-2 bg-blue-50 rounded-md",children:[n.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[n.jsx("span",{className:"text-blue-600 font-medium",children:" Loyalty Points:"}),n.jsxs("span",{className:"text-blue-800",children:["Earn ",o,"-",Math.round(o*1.67)," points from this booking!"]})]}),n.jsx("p",{className:"text-xs text-blue-600 mt-1",children:"Points awarded based on final invoice amount (1 point per $1)"})]}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"*Final price may vary based on actual vehicle condition and service requirements."})]})]})}):null}function EA({checked:e,onCheckedChange:t,businessName:r="Clean Machine Auto Detail",required:s=!0,id:a="sms-consent"}){return n.jsxs("div",{className:"flex items-start space-x-3 p-4 border rounded-lg bg-blue-50 dark:bg-blue-950/20",children:[n.jsx(as,{id:a,checked:e,onCheckedChange:t,className:"mt-1","data-testid":"checkbox-sms-consent"}),n.jsxs("div",{className:"flex-1",children:[n.jsxs(U,{htmlFor:a,className:"text-sm font-medium leading-relaxed cursor-pointer",children:["I Consent to Receive Informational messages & Alerts from ",r,"."," ",n.jsxs("span",{className:"font-normal text-muted-foreground",children:["Message frequency varies. Message & data rates may apply."," ","You can reply STOP to unsubscribe at any time."]}),s&&n.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"By checking this box and entering your phone number, you explicitly agree to receive messages from our business."})]})]})}function SCe({address:e,latitude:t,longitude:r,onConfirm:s,onCancel:a}){const[i,o]=p.useState(null),[l,c]=p.useState(null),[d,u]=p.useState(t),[f,h]=p.useState(r),[m,g]=p.useState(!1),[x,y]=p.useState(!1),[v,b]=p.useState(!1),[w,N]=p.useState("initial"),j=p.useRef(null),[S,C]=p.useState(!1);p.useEffect(()=>{var T;if((T=window.google)!=null&&T.maps){C(!0);return}const P=document.createElement("script");return P.src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCK4Yd7Gc2otBRl2KFVImNiJvWoNjGLbOc&libraries=places",P.async=!0,P.defer=!0,P.onload=()=>C(!0),document.head.appendChild(P),()=>{P.parentNode&&document.head.removeChild(P)}},[]),p.useEffect(()=>{if(!S||!j.current||i)return;const A=new google.maps.Map(j.current,{center:{lat:d,lng:f},zoom:17,mapTypeControl:!1,streetViewControl:!1,fullscreenControl:!1,styles:[{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]}]}),P=new google.maps.Marker({position:{lat:d,lng:f},map:A,draggable:!0,animation:google.maps.Animation.DROP,title:"Drag to adjust location"});P.addListener("dragstart",()=>{g(!0)}),P.addListener("dragend",()=>{g(!1);const T=P.getPosition();T&&(u(T.lat()),h(T.lng()),y(!0),N("needs_review"))}),o(A),c(P)},[S]);const k=async()=>{b(!0);try{const P=await new google.maps.Geocoder().geocode({location:{lat:d,lng:f}});if(P.results&&P.results[0]){const T=P.results[0].formatted_address;!0&&N("valid")}else N("needs_review")}catch(A){console.error("Geocoding error:",A),N("needs_review")}finally{b(!1)}},M=()=>{s(d,f,x&&w==="needs_review")};return S?n.jsx("div",{className:"space-y-4",children:n.jsx(O,{className:"p-6",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(zr,{className:"h-5 w-5 text-primary mt-0.5 flex-shrink-0"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h3",{className:"font-semibold mb-1",children:"Confirm Your Address"}),n.jsx("p",{className:"text-sm text-muted-foreground break-words",children:e})]})]}),x&&n.jsx("div",{className:"flex items-center gap-2 p-3 rounded-lg bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800",children:w==="needs_review"?n.jsxs(n.Fragment,{children:[n.jsx(Ya,{className:"h-4 w-4 text-amber-600 dark:text-amber-400 flex-shrink-0"}),n.jsx("p",{className:"text-sm text-amber-800 dark:text-amber-300",children:"Pin moved - this will be marked for technician review"})]}):n.jsxs(n.Fragment,{children:[n.jsx(nn,{className:"h-4 w-4 text-green-600 dark:text-green-400 flex-shrink-0"}),n.jsx("p",{className:"text-sm text-green-800 dark:text-green-300",children:"New location validated"})]})}),n.jsxs("div",{className:"relative",children:[n.jsx("div",{ref:j,className:"w-full h-[400px] rounded-lg border border-border overflow-hidden","data-testid":"map-address-confirmation"}),m&&n.jsx("div",{className:"absolute top-4 left-1/2 -translate-x-1/2 bg-background/95 backdrop-blur px-4 py-2 rounded-lg shadow-lg border border-border",children:n.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[n.jsx(ege,{className:"h-4 w-4 text-primary"}),"Drag pin to adjust location"]})})]}),n.jsxs("div",{className:"bg-muted/50 rounded-lg p-4 space-y-2",children:[n.jsx("p",{className:"text-sm font-medium",children:"Is this pin in the correct location?"}),n.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1 list-disc list-inside",children:[n.jsx("li",{children:'If correct, click "Confirm Location"'}),n.jsx("li",{children:"If wrong, drag the red pin to the correct spot"}),n.jsx("li",{children:"Our technician will review any adjusted locations before arrival"})]})]}),n.jsxs("div",{className:"flex gap-3 pt-2",children:[n.jsx(_,{variant:"outline",onClick:a,className:"flex-1","data-testid":"button-cancel-map",children:"Cancel"}),x&&w==="needs_review"&&n.jsx(_,{variant:"secondary",onClick:k,disabled:v,"data-testid":"button-revalidate-address",children:v?n.jsxs(n.Fragment,{children:[n.jsx(nt,{className:"h-4 w-4 mr-2 animate-spin"}),"Validating..."]}):"Re-validate"}),n.jsxs(_,{onClick:M,className:"flex-1","data-testid":"button-confirm-location",children:[n.jsx(nn,{className:"h-4 w-4 mr-2"}),"Confirm Location"]})]})]})})}):n.jsxs(O,{className:"p-8 text-center",children:[n.jsx(nt,{className:"h-8 w-8 animate-spin mx-auto mb-4 text-primary"}),n.jsx("p",{className:"text-muted-foreground",children:"Loading map..."})]})}var IA="Switch",[CCe]=ws(IA),[kCe,MCe]=CCe(IA),bee=p.forwardRef((e,t)=>{const{__scopeSwitch:r,name:s,checked:a,defaultChecked:i,required:o,disabled:l,value:c="on",onCheckedChange:d,form:u,...f}=e,[h,m]=p.useState(null),g=rn(t,w=>m(w)),x=p.useRef(!1),y=h?u||!!h.closest("form"):!0,[v=!1,b]=qa({prop:a,defaultProp:i,onChange:d});return n.jsxs(kCe,{scope:r,checked:v,disabled:l,children:[n.jsx(ht.button,{type:"button",role:"switch","aria-checked":v,"aria-required":o,"data-state":Nee(v),"data-disabled":l?"":void 0,disabled:l,value:c,...f,ref:g,onClick:ut(e.onClick,w=>{b(N=>!N),y&&(x.current=w.isPropagationStopped(),x.current||w.stopPropagation())})}),y&&n.jsx(_Ce,{control:h,bubbles:!x.current,name:s,value:c,checked:v,required:o,disabled:l,form:u,style:{transform:"translateX(-100%)"}})]})});bee.displayName=IA;var wee="SwitchThumb",jee=p.forwardRef((e,t)=>{const{__scopeSwitch:r,...s}=e,a=MCe(wee,r);return n.jsx(ht.span,{"data-state":Nee(a.checked),"data-disabled":a.disabled?"":void 0,...s,ref:t})});jee.displayName=wee;var _Ce=e=>{const{control:t,checked:r,bubbles:s=!0,...a}=e,i=p.useRef(null),o=a1(r),l=i1(t);return p.useEffect(()=>{const c=i.current,d=window.HTMLInputElement.prototype,f=Object.getOwnPropertyDescriptor(d,"checked").set;if(o!==r&&f){const h=new Event("click",{bubbles:s});f.call(c,r),c.dispatchEvent(h)}},[o,r,s]),n.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...a,tabIndex:-1,ref:i,style:{...e.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function Nee(e){return e?"checked":"unchecked"}var See=bee,PCe=jee;const Vt=p.forwardRef(({className:e,...t},r)=>n.jsx(See,{className:Le("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:r,children:n.jsx(PCe,{className:Le("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Vt.displayName=See.displayName;function Cee(e,t=500){const[r,s]=p.useState(e);return p.useEffect(()=>{const a=setTimeout(()=>{s(e)},t);return()=>{clearTimeout(a)}},[e,t]),r}const Wh="bg-gray-900/40 backdrop-blur-xl border border-blue-500/20 shadow-2xl shadow-blue-500/10",Ku="bg-clip-text text-transparent bg-gradient-to-r from-blue-200 via-blue-400 to-blue-200",vC="bg-gradient-to-r from-blue-600 to-blue-500 hover:from-blue-500 hover:to-blue-400",TCe="bg-blue-500 text-white shadow-lg shadow-blue-500/50",ACe="bg-green-500 text-white shadow-lg shadow-green-500/50",ECe="bg-gray-700/50 text-gray-400 border border-gray-600/30",hc={enter:{opacity:0,x:20},center:{opacity:1,x:0},exit:{opacity:0,x:-20}},mc={duration:.3,ease:"easeInOut"};function b4({onClose:e,onSuccess:t,initialName:r,initialPhone:s,initialService:a,initialReferralCode:i}={}){var M9;const[o,l]=p.useState("address"),[c,d]=p.useState(""),[u,f]=p.useState(!1),[h,m]=p.useState(),[g,x]=p.useState(),[y,v]=p.useState(!1),[b,w]=p.useState(null),[N,j]=p.useState([]),[S,C]=p.useState(r||""),[k,M]=p.useState(s||""),[A,P]=p.useState(""),[T,I]=p.useState((i==null?void 0:i.toUpperCase())||""),[L,R]=p.useState(!1),[G,$]=p.useState(null),D=p.useRef({}),[W,E]=p.useState(null),[F,B]=p.useState(!1),[Z,ne]=p.useState(!1),[Y,me]=p.useState(!1),[pe,Me]=p.useState("3months"),[re,de]=p.useState({hasPowerAccess:!1,hasWaterAccess:!1,locationType:"house",needsExteriorService:!0,notes:""}),[he,ce]=p.useState([{make:"",model:"",year:"",color:"",conditions:[]}]),[Be,le]=p.useState(0),[$e,et]=p.useState(""),[_e,ot]=p.useState(void 0),[rt,z]=p.useState(""),[Se,J]=p.useState(""),[oe,ye]=p.useState(!1),[Re,He]=p.useState([]),[Fe,st]=p.useState([]),[Bt,En]=p.useState({}),[jn,wi]=p.useState(!1),[Js,cc]=p.useState([]),[Eo,Rs]=p.useState([]),[dc,Ji]=p.useState(!0),[xd,yd]=p.useState(!1),[vd,Ir]=p.useState(!1),[Fs,Zs]=p.useState({weatherRiskLevel:"none",precipitationChance:0}),{toast:Xn}=Ee(),Hn=he[Be];p.useEffect(()=>{async function xe(){Ji(!0);try{const tt=await fetch("/api/services");if(!tt.ok)throw new Error("Failed to fetch services");const ct=await tt.json();if(ct.success&&Array.isArray(ct.services))cc(ct.services);else throw new Error("Invalid service data")}catch(tt){console.error("Error fetching services:",tt),Xn({title:"Error",description:"Could not load service options. Please try again.",variant:"destructive"})}finally{Ji(!1)}}xe()},[Xn]),p.useEffect(()=>{if(a&&Js.length>0){const xe=Js.find(tt=>tt.name.toLowerCase()===a.toLowerCase());xe&&(w(xe),l(r&&s?"address":"service"))}},[a,Js,r,s]);const Ns=async xe=>{yd(!0);try{const tt=await fetch("/api/addon-services");if(!tt.ok)throw new Error("Failed to fetch add-on services");const ct=await tt.json();if(ct.success&&Array.isArray(ct.addOns)){const Ct=ct.addOns.map(Wn=>{let or=!1;return(xe.toLowerCase().includes("interior")&&(Wn.name.toLowerCase().includes("leather")||Wn.name.toLowerCase().includes("upholstery")||Wn.name.toLowerCase().includes("fabric"))||xe.toLowerCase().includes("exterior")&&(Wn.name.toLowerCase().includes("headlight")||Wn.name.toLowerCase().includes("windshield")||Wn.name.toLowerCase().includes("glass"))||xe.toLowerCase().includes("polish")&&Wn.name.toLowerCase().includes("ceramic coating"))&&(or=!0),{...Wn,recommended:or}});Ct.sort((Wn,or)=>Wn.recommended&&!or.recommended?-1:!Wn.recommended&&or.recommended?1:0),Rs(Ct)}else throw new Error("Invalid add-on service data")}catch(tt){console.error("Error fetching add-on services:",tt),Xn({title:"Warning",description:"Could not load add-on options. You can continue without them."}),Rs([])}finally{yd(!1)}};p.useEffect(()=>{b&&Ns(b.name)},[b]),p.useEffect(()=>{o==="date"&&b&&ti()},[o,b]);const ti=async()=>{wi(!0);try{const xe=await fetch(`/api/available-slots?service=${encodeURIComponent(b.name)}`);if(!xe.ok)throw new Error("Failed to fetch available time slots");const tt=await xe.json();if(tt.success&&tt.slots&&Array.isArray(tt.slots)){const ct=tt.slots,Ct=[],Wn={},or=new Set;ct.forEach(_a=>{const Ml=zm(_a),Yu=Ie(Ml,"yyyy-MM-dd");Wn[Yu]||(Wn[Yu]=[]),Wn[Yu].push(_a),or.has(Yu)||(or.add(Yu),Ct.push(Ml))}),Ct.sort((_a,Ml)=>_a.getTime()-Ml.getTime()),He(ct),st(Ct),En(Wn),ct.length===0&&Xn({title:"No Available Slots",description:"We don't have any available slots at this time. Please contact us directly to schedule."})}else He([]),st([]),En({}),Xn({title:"Error",description:"No available time slots found. Please try a different service or contact us directly.",variant:"destructive"})}catch(xe){console.error("Error fetching time slots:",xe),Xn({title:"Error",description:"Failed to load available time slots. Please try again later.",variant:"destructive"}),He([]),st([]),En({})}finally{wi(!1)}},jl=()=>{ce(xe=>[...xe,{make:"",model:"",year:"",color:"",conditions:[]}]),le(he.length)},Xr=xe=>{he.length<=1||(ce(tt=>{const ct=[...tt];return ct.splice(xe,1),ct}),xe<=Be&&le(Math.max(0,Be-1)))},oa=(xe,tt)=>{ce(ct=>{const Ct=[...ct];return xe==="conditions"?Ct[Be]={...Ct[Be],conditions:tt}:Ct[Be]={...Ct[Be],[xe]:tt},Ct})},ni=xe=>{w(xe),Ns(xe.name),l("addons")},ka=async xe=>{try{const tt=xe.toISOString(),Wn=await fetch(`/api/appointment-weather?latitude=${36.1236407}&longitude=${-95.9359214}&date=${tt}`);if(!Wn.ok)throw new Error("Failed to check weather");const or=await Wn.json();if(or.success){let _a=0;or.forecastData&&or.forecastData.length>0&&(_a=or.forecastData.reduce((Ml,Yu)=>Ml+Yu.chanceOfRain,0)/or.forecastData.length),Zs({weatherRiskLevel:or.weatherRiskLevel||"none",precipitationChance:Math.round(_a)}),_a>=15?Ir(!0):l("time")}else l("time")}catch(tt){console.error("Error checking weather:",tt),l("time")}},Nl=()=>{Ir(!1),l("time"),Xn({title:"Weather Notice",description:"We'll monitor the forecast and notify you ahead of your service date if weather conditions change significantly."})},Sl=xe=>{Ir(!1),xe?(ot(xe),z(""),ka(xe)):(ot(void 0),z(""))},Ce=xe=>{ot(xe),z(""),xe&&ka(xe)},lt=xe=>{z(xe),l("details")},sn=()=>{l("vehicle")},es=()=>{l("date")},Ma=xe=>{const tt=Hn.conditions;let ct;xe==="None of the above"?ct=tt.includes(xe)?[]:[xe]:(ct=tt.filter(Ct=>Ct!=="None of the above"),tt.includes(xe)?ct=ct.filter(Ct=>Ct!==xe):ct=[...ct,xe]),oa("conditions",ct)},Io=()=>{if(!_e)return[];const xe=Ie(_e,"yyyy-MM-dd");return Bt[xe]||[]},Cl=xe=>{j(tt=>tt.includes(xe)?tt.filter(ct=>ct!==xe):[...tt,xe])},kl=async xe=>{var ct,Ct;const tt=xe.trim().toUpperCase();if(!tt){$(null);return}if(D.current[tt]){$(D.current[tt]);return}R(!0),$(null);try{const or=await(await fetch("/api/referral/validate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:tt})})).json(),_a={isValid:or.success&&((ct=or.data)==null?void 0:ct.valid),reward:(Ct=or.data)==null?void 0:Ct.reward,error:or.success?void 0:or.message};D.current[tt]=_a,$(_a)}catch(Wn){console.error("Error validating referral code:",Wn),Xn({title:"Network Error",description:"Could not validate referral code. Please try again.",variant:"destructive"})}finally{R(!1)}};p.useEffect(()=>{i&&kl(i)},[i]);const Lo=async xe=>{if(xe.replace(/\D/g,"").length!==10){E(null);return}ne(!0);try{const ct=await fetch(`/api/customers/check-phone/${xe}`);if(!ct.ok){ct.status===401&&(console.error("Customer check endpoint requires authentication - check publicPaths configuration"),Xn({title:"System Error",description:"Unable to verify customer status. Please continue with booking.",variant:"destructive"})),E(null),ne(!1);return}const Ct=await ct.json();Ct.success&&Ct.isReturning?(E(Ct),Ct.customer&&Ct.customer.name&&!S&&C(Ct.customer.name),Ct.customer&&Ct.customer.address&&!c&&d(Ct.customer.address),Ct.recentAppointment&&he.length===1&&!he[0].make&&!he[0].model&&ce([{year:Ct.recentAppointment.vehicleYear||"",make:Ct.recentAppointment.vehicleMake||"",model:Ct.recentAppointment.vehicleModel||"",color:Ct.recentAppointment.vehicleColor||"",conditions:[]}]),Xn({title:"Welcome back!",description:`Hi ${Ct.customer.name}! We've prefilled your information.`})):E(null)}catch(ct){console.error("Failed to check customer:",ct),E(null)}finally{ne(!1)}},pg=Cee(k,500);p.useEffect(()=>{pg&&Lo(pg)},[pg]);const Gue=xe=>{var ct;const tt=Js.find(Ct=>{var Wn;return Ct.id===xe.serviceId||Ct.name===((Wn=xe.service)==null?void 0:Wn.name)});tt&&(w(tt),l("addons")),ce([{year:xe.vehicleYear||"",make:xe.vehicleMake||"",model:xe.vehicleModel||"",color:xe.vehicleColor||"",conditions:[]}]),xe.address&&!c&&d(xe.address),Xn({title:"Booking prefilled!",description:`Ready to schedule your ${((ct=xe.service)==null?void 0:ct.name)||"service"}`})},Yue=async xe=>{if(xe.preventDefault(),!S.trim()||!k.trim()||!b||!rt){Xn({title:"Error",description:"Please fill in all required fields",variant:"destructive"});return}if(!oe){Xn({title:"SMS Consent Required",description:"You must consent to receive SMS messages to book an appointment. This is required by law.",variant:"destructive"});return}const tt=he.filter(ct=>!ct.make||!ct.model||!ct.year);if(tt.length>0){Xn({title:"Error",description:`Please provide make, model, and year for all vehicles (${tt.length} incomplete)`,variant:"destructive"});return}wi(!0);try{const ct=await fetch("/api/book-appointment",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:S,phone:k,email:A,address:c,isExtendedAreaRequest:u,latitude:h,longitude:g,addressNeedsReview:y,service:b.name,addOns:N,vehicles:he,notes:Se,time:rt,smsConsent:oe,referralCode:G!=null&&G.isValid?T:void 0})});if(!ct.ok)throw new Error("Failed to book appointment");const Ct=await ct.json();if(Ct.success){if(Y&&pe&&Ct.customerId)try{const or=new Date(rt);let _a=3;pe==="6months"&&(_a=6),pe==="12months"&&(_a=12);const Ml=new Date(or);Ml.setMonth(Ml.getMonth()+_a),await fetch("/api/recurring-services",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({customerId:Ct.customerId,serviceId:b==null?void 0:b.id,serviceName:b==null?void 0:b.name,frequency:pe,nextServiceDate:Ml.toISOString(),active:!0})}),Xn({title:"Recurring Service Set Up",description:`We'll remind you in ${pe==="3months"?"3 months":pe==="6months"?"6 months":"1 year"} for your next service!`})}catch(or){console.error("Failed to set up recurring service:",or)}Xn({title:"Success",description:"Your appointment has been scheduled!"});const Wn=Ie(zm(rt),"EEEE, MMMM d, yyyy 'at' h:mm a");t==null||t({name:S,phone:k,address:c,isExtendedAreaRequest:u,service:b.name,addOns:N,vehicles:he,notes:Se,time:rt,formattedTime:Wn})}else throw new Error(Ct.message||"Failed to book appointment")}catch(ct){console.error("Error booking appointment:",ct),Xn({title:"Error",description:"Failed to book your appointment. Please try again or contact us directly.",variant:"destructive"})}finally{wi(!1)}},Que=xe=>{try{return Ie(zm(xe),"EEEE, MMMM d, yyyy 'at' h:mm a")}catch(tt){return console.error("Error formatting time:",tt),xe}},Kue=(xe,tt=!1,ct,Ct)=>{d(xe),f(tt),m(ct),x(Ct),l(ct&&Ct?"mapConfirmation":"accessVerification")},Jue=(xe,tt,ct)=>{m(xe),x(tt),v(ct),l("accessVerification")},Zue=xe=>{de(xe),xe.notes&&J(tt=>{const ct=`Power/Water Access Notes: ${xe.notes}`;return tt?`${tt}

${ct}`:ct}),l("service")},Xue=()=>{l("address")},S9=xe=>{const tt=Js.find(Ct=>Ct.name===xe);if(!tt)return 0;const ct=tt.priceRange.match(/(\d+(\.\d+)?)/g);if(ct&&ct.length>0){const Ct=ct.map(Number);return Ct.length>1?(Ct[0]+Ct[1])/2:Ct[0]}return 0},C9=()=>{const xe={};return Eo.forEach(tt=>{const ct=tt.priceRange.match(/(\d+(\.\d+)?)/g);if(ct&&ct.length>0){const Ct=Number(ct[0]);xe[tt.name]=Ct||0}else xe[tt.name]=0}),xe},k9=()=>{const xe={"Excessive pet hair, sand (additional cost for interior cleaning)":50,"Major Stains / Grease / Mold etc.":75,"Urine / Vomit / Blood etc.":100,Other:25},tt={};return he.forEach((ct,Ct)=>{ct.conditions.forEach(Wn=>{Wn!=="None of the above"&&(tt[`Vehicle ${Ct+1} - ${Wn}`]=xe[Wn]||0)})}),tt},efe=()=>{let xe=S9((b==null?void 0:b.name)||"");const tt=C9();N.forEach(Ct=>{xe+=tt[Ct]||0});const ct=k9();return Object.values(ct).forEach(Ct=>{xe+=Ct}),xe},sS=[{id:"address",label:"Address",icon:zr},{id:"accessVerification",label:"Access",icon:na},{id:"service",label:"Service",icon:ln},{id:"addons",label:"Add-ons",icon:Yr},{id:"vehicle",label:"Vehicle",icon:Ys},{id:"date",label:"Date",icon:Dt},{id:"time",label:"Time",icon:Rt},{id:"details",label:"Confirm",icon:nn}],aS=sS.findIndex(xe=>xe.id===o),tfe=xe=>xe<aS?"complete":xe===aS?"active":"pending";return n.jsxs("div",{className:"w-full h-full flex flex-col bg-gradient-to-b from-gray-900 via-blue-950/10 to-black text-white relative overflow-hidden",children:[n.jsxs("div",{className:"absolute inset-0 z-0 overflow-hidden pointer-events-none",children:[n.jsx(q.div,{className:"absolute top-[10%] left-[15%] w-96 h-96 bg-blue-500/5 rounded-full filter blur-3xl",animate:{scale:[1,1.2,1],opacity:[.3,.5,.3]},transition:{duration:8,repeat:1/0,ease:"easeInOut"}}),n.jsx(q.div,{className:"absolute bottom-[20%] right-[10%] w-80 h-80 bg-blue-600/5 rounded-full filter blur-3xl",animate:{scale:[1,1.3,1],opacity:[.3,.5,.3]},transition:{duration:10,repeat:1/0,ease:"easeInOut",delay:1}})]}),n.jsx(q.div,{className:"p-6 pb-3 text-center border-b border-blue-400/10 flex-shrink-0 relative z-10",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},children:n.jsx("h2",{className:`text-xl md:text-2xl font-bold ${Ku}`,children:"Schedule an Appointment"})}),n.jsx("div",{className:"px-6 py-4 border-b border-blue-400/10 relative z-10",children:n.jsx("div",{className:"flex items-center justify-between max-w-4xl mx-auto",children:sS.map((xe,tt)=>{const ct=tfe(tt),Ct=xe.icon;return n.jsxs("div",{className:"flex items-center flex-1",children:[n.jsxs(q.div,{className:"flex flex-col items-center",initial:!1,animate:{scale:ct==="active"?1.1:1},transition:{duration:.2},children:[n.jsx(q.div,{className:`
                      w-10 h-10 rounded-full flex items-center justify-center text-sm font-semibold mb-1
                      transition-all duration-300
                      ${ct==="active"?TCe:""}
                      ${ct==="complete"?ACe:""}
                      ${ct==="pending"?ECe:""}
                    `,whileHover:{scale:1.05},children:ct==="complete"?n.jsx(nn,{className:"w-5 h-5"}):n.jsx(Ct,{className:"w-5 h-5"})}),n.jsx("span",{className:`text-xs hidden md:block ${ct==="active"?"text-blue-300 font-medium":"text-gray-500"}`,children:xe.label})]}),tt<sS.length-1&&n.jsx("div",{className:"flex-1 h-0.5 mx-2 bg-gray-700/30 relative",children:n.jsx(q.div,{className:"h-full bg-blue-500",initial:{width:"0%"},animate:{width:tt<aS?"100%":"0%"},transition:{duration:.3}})})]},xe.id)})})}),n.jsx(yCe,{open:vd,onOpenChange:Ir,onProceed:Nl,onReschedule:Sl,weatherRiskLevel:Fs.weatherRiskLevel,precipitationChance:Fs.precipitationChance,date:_e?Ie(_e,"MMMM d, yyyy"):"",selectedService:(b==null?void 0:b.name)||""}),n.jsx("div",{className:"flex-1 overflow-y-auto px-6 pb-6 relative z-10",children:n.jsxs($s,{mode:"wait",children:[o==="address"&&n.jsx(q.div,{variants:hc,initial:"enter",animate:"center",exit:"exit",transition:mc,children:n.jsx(KSe,{onNext:Kue,onBack:e||(()=>{})})},"address"),o==="mapConfirmation"&&h&&g&&n.jsx(q.div,{variants:hc,initial:"enter",animate:"center",exit:"exit",transition:mc,children:n.jsx(SCe,{address:c,latitude:h,longitude:g,onConfirm:Jue,onCancel:()=>l("address")})},"mapConfirmation"),o==="accessVerification"&&n.jsx(q.div,{variants:hc,initial:"enter",animate:"center",exit:"exit",transition:mc,children:n.jsx(xCe,{onConfirm:Zue,onBack:Xue,locationType:"house"})},"accessVerification"),o==="service"&&n.jsx(q.div,{variants:hc,initial:"enter",animate:"center",exit:"exit",transition:mc,className:"space-y-4",children:n.jsxs("div",{className:`${Wh} rounded-xl p-6`,children:[n.jsxs("h3",{className:`text-lg font-semibold mb-4 ${Ku}`,children:[n.jsx(ln,{className:"w-5 h-5 inline mr-2"}),"Select Your Service"]}),dc?n.jsxs("div",{className:"py-8 text-center",children:[n.jsx(q.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-8 h-8 border-2 border-blue-400 border-t-transparent rounded-full mx-auto"}),n.jsx("p",{className:"text-blue-200/70 mt-4",children:"Loading services..."})]}):Js.length>0?n.jsx("div",{className:"grid gap-3 max-h-[400px] overflow-y-auto pr-2",children:Js.map((xe,tt)=>n.jsxs(q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:tt*.05},whileHover:{scale:1.02,y:-2},whileTap:{scale:.98},className:`
                        relative rounded-lg border p-4 cursor-pointer transition-all duration-200
                        ${(b==null?void 0:b.name)===xe.name?"border-blue-400 bg-gradient-to-br from-blue-500/20 to-blue-600/10 shadow-lg shadow-blue-500/20":"border-blue-400/20 bg-gray-800/40 hover:bg-gray-800/60 hover:border-blue-400/40 hover:shadow-lg"}
                      `,onClick:()=>ni(xe),children:[(b==null?void 0:b.name)===xe.name&&n.jsx(q.div,{layoutId:"selected-service",className:"absolute inset-0 border-2 border-blue-400 rounded-lg",initial:!1,transition:{type:"spring",stiffness:300,damping:30}}),n.jsxs("div",{className:"flex flex-col",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("div",{className:"font-semibold text-blue-100 flex items-center",children:[n.jsx(ln,{className:"w-4 h-4 mr-2 text-blue-400"}),xe.name]}),n.jsx("div",{className:"text-blue-300 whitespace-nowrap font-bold bg-blue-500/10 px-3 py-1 rounded-full",children:xe.priceRange})]}),n.jsx("p",{className:"text-sm text-blue-200/70 mb-2",children:xe.description}),n.jsxs("div",{className:"flex items-center text-xs text-blue-300/60",children:[n.jsx(Rt,{className:"w-3 h-3 mr-1"}),n.jsx("span",{children:xe.duration})]})]})]},xe.name))}):n.jsxs("div",{className:"py-8 text-center",children:[n.jsx("p",{className:"text-blue-200/70 mb-4",children:"No services available"}),n.jsx(_,{variant:"outline",size:"sm",className:"border-blue-400/30 text-blue-200 hover:bg-blue-500/20",onClick:e,children:"Close"})]})]})},"service"),o==="addons"&&n.jsx(q.div,{variants:hc,initial:"enter",animate:"center",exit:"exit",transition:mc,className:"space-y-4",children:n.jsxs("div",{className:`${Wh} rounded-xl p-6`,children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsxs("div",{children:[n.jsxs("h3",{className:`text-lg font-semibold ${Ku}`,children:[n.jsx(Yr,{className:"w-5 h-5 inline mr-2"}),"Enhance Your Service"]}),n.jsxs("p",{className:"text-sm text-blue-200/60 mt-1",children:["Add optional upgrades to ",b==null?void 0:b.name]})]}),n.jsx(_,{variant:"ghost",size:"sm",className:"text-blue-200 hover:bg-blue-500/20",onClick:()=>l("service"),children:"Back"})]}),xd?n.jsxs("div",{className:"py-8 text-center",children:[n.jsx(q.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-8 h-8 border-2 border-blue-400 border-t-transparent rounded-full mx-auto"}),n.jsx("p",{className:"text-blue-200/70 mt-4",children:"Loading add-on options..."})]}):Eo.length>0?n.jsx("div",{className:"grid gap-3 max-h-[400px] overflow-y-auto pr-2",children:Eo.map((xe,tt)=>n.jsx(q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:tt*.05},whileHover:{scale:1.01},className:`
                        relative rounded-lg border p-4 cursor-pointer transition-all duration-200
                        ${N.includes(xe.name)?"border-blue-400 bg-gradient-to-br from-blue-500/20 to-blue-600/10 shadow-lg shadow-blue-500/20":xe.recommended?"border-amber-400/40 bg-gradient-to-br from-amber-500/10 to-amber-600/5":"border-blue-400/20 bg-gray-800/40 hover:bg-gray-800/60"}
                      `,onClick:()=>Cl(xe.name),children:n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{className:"flex-1 flex items-start",children:[n.jsx(as,{id:`addon-${xe.name}`,checked:N.includes(xe.name),onCheckedChange:()=>Cl(xe.name),className:"mt-1 border-blue-400/40"}),n.jsxs("div",{className:"ml-3 flex-1",children:[n.jsxs("label",{htmlFor:`addon-${xe.name}`,className:"font-semibold cursor-pointer text-blue-100 flex items-center",children:[xe.name,xe.recommended&&n.jsx(q.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2},children:n.jsx(ge,{className:"ml-2 text-xs bg-amber-500/30 text-amber-200 border-amber-400/50",children:" Recommended"})})]}),n.jsx("p",{className:"text-sm text-blue-200/70 mt-1",children:xe.description})]})]}),n.jsx("div",{className:"text-blue-300 font-bold whitespace-nowrap ml-3 bg-blue-500/10 px-3 py-1 rounded-full",children:xe.priceRange})]})},xe.name))}):n.jsx("div",{className:"py-8 text-center",children:n.jsx("p",{className:"text-blue-200/60",children:"No add-on services available for this service"})}),n.jsxs("div",{className:"flex justify-between items-center mt-6 pt-4 border-t border-blue-400/10",children:[n.jsxs("p",{className:"text-sm text-blue-300/70",children:[N.length," add-on",N.length!==1?"s":""," selected"]}),n.jsx(_,{type:"button",onClick:sn,className:`${vC} shadow-lg shadow-blue-500/30 transition-all hover:scale-105`,children:"Continue to Vehicle Information"})]})]})},"addons"),o==="vehicle"&&n.jsx(q.div,{variants:hc,initial:"enter",animate:"center",exit:"exit",transition:mc,className:"space-y-4",children:n.jsxs("div",{className:`${Wh} rounded-xl p-6 max-h-[calc(100vh-300px)] overflow-y-auto`,children:[n.jsxs("div",{className:"flex justify-between items-center mb-4 sticky top-0 bg-gray-900/90 backdrop-blur-sm pt-2 pb-2 z-10",children:[n.jsxs("div",{children:[n.jsxs("h3",{className:`text-lg font-semibold ${Ku}`,children:[n.jsx(Ys,{className:"w-5 h-5 inline mr-2"}),"Vehicle Information"]}),n.jsxs("p",{className:"text-sm text-blue-200/60 mt-1",children:["Tell us about your vehicle",he.length>1?"s":""]})]}),n.jsx(_,{variant:"ghost",size:"sm",className:"text-blue-200 hover:bg-blue-500/20",onClick:()=>l("addons"),children:"Back"})]}),he.length>1&&n.jsx("div",{className:"flex flex-wrap gap-2 mb-4 pb-2 border-b border-blue-400/20",children:he.map((xe,tt)=>n.jsxs("div",{className:"relative group",children:[n.jsx(_,{variant:Be===tt?"default":"outline",size:"sm",onClick:()=>le(tt),className:"pr-8",children:xe.make&&xe.model?`${xe.make} ${xe.model}`:`Vehicle ${tt+1}`}),he.length>1&&n.jsx(_,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-2 text-red-500 opacity-0 group-hover:opacity-100 transition-opacity",onClick:ct=>{ct.stopPropagation(),Xr(tt)},children:n.jsx(Jr,{className:"h-4 w-4"})})]},tt))}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(U,{htmlFor:"vehicleMake",className:"text-blue-100",children:"Make *"}),n.jsx(se,{id:"vehicleMake",value:Hn.make,onChange:xe=>oa("make",xe.target.value),placeholder:"e.g., Toyota, Honda",required:!0,className:"bg-gray-700/30 border-blue-400/30 text-blue-100 placeholder:text-blue-200/40"})]}),n.jsxs("div",{children:[n.jsx(U,{htmlFor:"vehicleModel",className:"text-blue-100",children:"Model *"}),n.jsx(se,{id:"vehicleModel",value:Hn.model,onChange:xe=>oa("model",xe.target.value),placeholder:"e.g., Camry, Accord",required:!0,className:"bg-gray-700/30 border-blue-400/30 text-blue-100 placeholder:text-blue-200/40"})]}),n.jsxs("div",{children:[n.jsx(U,{htmlFor:"vehicleYear",className:"text-blue-100",children:"Year *"}),n.jsx(se,{id:"vehicleYear",value:Hn.year,onChange:xe=>oa("year",xe.target.value),placeholder:"e.g., 2020",required:!0,className:"bg-gray-700/30 border-blue-400/30 text-blue-100 placeholder:text-blue-200/40"})]}),n.jsxs("div",{children:[n.jsx(U,{htmlFor:"vehicleColor",className:"text-blue-100",children:"Color (Optional)"}),n.jsx(se,{id:"vehicleColor",value:Hn.color,onChange:xe=>oa("color",xe.target.value),placeholder:"e.g., Blue",className:"bg-gray-700/30 border-blue-400/30 text-blue-100 placeholder:text-blue-200/40"})]}),n.jsxs("div",{className:"mt-4",children:[n.jsx(U,{className:"mb-2 block text-blue-100",children:"Vehicle Condition (select all that apply)"}),n.jsxs("div",{className:"grid gap-2 mt-2",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx(as,{id:`condition-pet-hair-sand-${Be}`,checked:Hn.conditions.includes("Pet hair, sand"),onCheckedChange:()=>Ma("Pet hair, sand"),className:"border-blue-400/40"}),n.jsx("label",{htmlFor:`condition-pet-hair-sand-${Be}`,className:"ml-2 text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 text-blue-100",children:"Excessive pet hair, sand (additional cost for interior cleaning)"})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx(as,{id:`condition-major-stains-${Be}`,checked:Hn.conditions.includes("Major Stains / Grease / Mold etc."),onCheckedChange:()=>Ma("Major Stains / Grease / Mold etc."),className:"border-blue-400/40"}),n.jsx("label",{htmlFor:`condition-major-stains-${Be}`,className:"ml-2 text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 text-blue-100",children:"Major Stains / Grease / Mold etc."})]}),Hn.conditions.includes("Major Stains / Grease / Mold etc.")&&n.jsxs("div",{className:"ml-6 mt-1",children:[n.jsx(U,{className:"text-xs text-blue-200/60",children:"Please describe the specific issue in detail"}),n.jsx(se,{placeholder:"Describe stains/grease/mold issue",value:$e,onChange:xe=>et(xe.target.value),className:"mt-1 h-8 text-sm bg-gray-700/30 border-blue-400/30 text-blue-100 placeholder:text-blue-200/40"})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx(as,{id:`condition-urine-vomit-${Be}`,checked:Hn.conditions.includes("Urine / Vomit / Blood etc."),onCheckedChange:()=>Ma("Urine / Vomit / Blood etc."),className:"border-blue-400/40"}),n.jsx("label",{htmlFor:`condition-urine-vomit-${Be}`,className:"ml-2 text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 text-blue-100",children:"Urine / Vomit / Blood etc."})]}),Hn.conditions.includes("Urine / Vomit / Blood etc.")&&n.jsxs("div",{className:"ml-6 mt-1",children:[n.jsx(U,{className:"text-xs text-blue-200/60",children:"Please describe the specific issue in detail"}),n.jsx(se,{placeholder:"Describe bodily fluid issue",value:$e,onChange:xe=>et(xe.target.value),className:"mt-1 h-8 text-sm bg-gray-700/30 border-blue-400/30 text-blue-100 placeholder:text-blue-200/40"})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx(as,{id:`condition-none-${Be}`,checked:Hn.conditions.includes("None of the above"),onCheckedChange:()=>Ma("None of the above"),className:"border-blue-400/40"}),n.jsx("label",{htmlFor:`condition-none-${Be}`,className:"ml-2 text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 text-blue-100",children:"None of the above"})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx(as,{id:`condition-other-${Be}`,checked:Hn.conditions.includes("Other"),onCheckedChange:()=>Ma("Other"),className:"border-blue-400/40"}),n.jsx("label",{htmlFor:`condition-other-${Be}`,className:"ml-2 text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 text-blue-100",children:"Other:"})]}),Hn.conditions.includes("Other")&&n.jsx("div",{className:"ml-6 mt-1",children:n.jsx(se,{placeholder:"Please specify",value:$e,onChange:xe=>et(xe.target.value),className:"mt-1 h-8 text-sm bg-gray-700/30 border-blue-400/30 text-blue-100 placeholder:text-blue-200/40"})})]})]})]}),n.jsx("div",{className:"mt-6 pt-4 border-t border-blue-400/10",children:n.jsxs(_,{type:"button",variant:"outline",onClick:jl,className:"w-full border-dashed border-blue-400/40 text-blue-200 hover:bg-blue-500/20 hover:border-blue-400 flex items-center justify-center",children:[n.jsx(Un,{className:"h-4 w-4 mr-2"}),"Add Another Vehicle"]})}),n.jsx("div",{className:"flex justify-end mt-6 pt-4 border-t border-blue-400/10",children:n.jsx(_,{type:"button",onClick:es,disabled:!Hn.make||!Hn.model||!Hn.year,className:`${vC} shadow-lg shadow-blue-500/30 transition-all hover:scale-105`,children:"Continue to Date Selection"})})]})},"vehicle"),o==="date"&&n.jsx(q.div,{variants:hc,initial:"enter",animate:"center",exit:"exit",transition:mc,className:"space-y-4",children:n.jsxs("div",{className:`${Wh} rounded-xl p-6`,children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsxs("div",{children:[n.jsxs("h3",{className:`text-lg font-semibold ${Ku}`,children:[n.jsx(Dt,{className:"w-5 h-5 inline mr-2"}),"Select Your Date"]}),n.jsx("p",{className:"text-sm text-blue-200/60 mt-1",children:"Choose your preferred appointment date"})]}),n.jsx(_,{variant:"ghost",size:"sm",className:"text-blue-200 hover:bg-blue-500/20",onClick:()=>l("vehicle"),children:"Back"})]}),jn?n.jsxs("div",{className:"py-8 text-center",children:[n.jsx(q.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-8 h-8 border-2 border-blue-400 border-t-transparent rounded-full mx-auto"}),n.jsx("p",{className:"text-blue-200/70 mt-4",children:"Loading available dates..."})]}):n.jsx("div",{className:"py-4 flex justify-center",children:n.jsx(oh,{mode:"single",selected:_e,onSelect:Ce,disabled:xe=>m4(xe,new Date)||qZ(xe)||!Fe.some(tt=>is(tt,xe)),className:"rounded-md border border-blue-400/30 p-2 bg-gray-800/40"})})]})},"date"),o==="time"&&n.jsx(q.div,{variants:hc,initial:"enter",animate:"center",exit:"exit",transition:mc,className:"space-y-4",children:n.jsxs("div",{className:`${Wh} rounded-xl p-6`,children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsxs("div",{children:[n.jsxs("h3",{className:`text-lg font-semibold ${Ku}`,children:[n.jsx(Rt,{className:"w-5 h-5 inline mr-2"}),"Select Your Time"]}),n.jsx("p",{className:"text-sm text-blue-200/60 mt-1",children:_e?`For ${Ie(_e,"EEEE, MMMM d, yyyy")}`:""})]}),n.jsx(_,{variant:"ghost",size:"sm",className:"text-blue-200 hover:bg-blue-500/20",onClick:()=>l("date"),children:"Back"})]}),jn?n.jsxs("div",{className:"py-8 text-center",children:[n.jsx(q.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-8 h-8 border-2 border-blue-400 border-t-transparent rounded-full mx-auto"}),n.jsx("p",{className:"text-blue-200/70 mt-4",children:"Loading available times..."})]}):Io().length>0?n.jsx("div",{className:"grid gap-3 max-h-[400px] overflow-y-auto pr-2",children:Io().map((xe,tt)=>n.jsx(q.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:tt*.05},whileHover:{scale:1.01,x:4},whileTap:{scale:.99},children:n.jsxs(_,{variant:"outline",className:"w-full justify-start h-auto py-3 px-4 text-left border-blue-400/30 text-blue-100 hover:bg-blue-500/20 hover:border-blue-400",onClick:()=>lt(xe),children:[n.jsx(Rt,{className:"w-4 h-4 mr-3 text-blue-400"}),Que(xe)]})},xe))}):n.jsx("div",{className:"py-8 text-center",children:n.jsxs("p",{className:"text-blue-200/70",children:["No available times found for ",b==null?void 0:b.name,"."]})})]})},"time"),o==="details"&&n.jsx(q.div,{variants:hc,initial:"enter",animate:"center",exit:"exit",transition:mc,className:"space-y-4",children:n.jsxs("form",{onSubmit:Yue,className:`${Wh} rounded-xl p-6 space-y-4`,children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsxs("div",{children:[n.jsxs("h3",{className:`text-lg font-semibold ${Ku}`,children:[n.jsx(nn,{className:"w-5 h-5 inline mr-2"}),"Confirm & Book"]}),n.jsx("p",{className:"text-sm text-blue-200/60 mt-1",children:"Final details to complete your booking"})]}),n.jsx(_,{variant:"ghost",size:"sm",className:"text-blue-200 hover:bg-blue-500/20",onClick:()=>l("time"),children:"Back"})]}),n.jsxs("div",{children:[n.jsx(U,{htmlFor:"name",className:"text-blue-100",children:"Full Name *"}),n.jsx(se,{id:"name",value:S,onChange:xe=>C(xe.target.value),placeholder:"Your full name",required:!0,className:"bg-gray-700/30 border-blue-400/30 text-blue-100 placeholder:text-blue-200/40"})]}),n.jsxs("div",{children:[n.jsx(U,{htmlFor:"phone",className:"text-blue-100",children:"Phone Number *"}),n.jsxs("div",{className:"relative",children:[n.jsx(se,{id:"phone",type:"tel",value:k,onChange:xe=>M(xe.target.value),placeholder:"Your phone number",required:!0,className:"bg-gray-700/30 border-blue-400/30 text-blue-100 placeholder:text-blue-200/40","data-testid":"input-phone"}),Z&&n.jsx(nt,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 animate-spin text-blue-400"}),(W==null?void 0:W.isReturning)&&!Z&&n.jsx(q.div,{initial:{scale:0},animate:{scale:1},className:"absolute right-3 top-1/2 -translate-y-1/2",children:n.jsxs(ge,{className:"bg-green-500/20 text-green-300 border-green-500/30 text-xs",children:[n.jsx(Mr,{className:"w-3 h-3 mr-1"}),"Returning"]})})]})]}),(W==null?void 0:W.isReturning)&&((M9=W.pastAppointments)==null?void 0:M9.length)>0&&n.jsx(q.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"mt-4",children:n.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-xl p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("h3",{className:"text-blue-100 font-semibold flex items-center gap-2 text-sm",children:[n.jsx(Kc,{className:"w-4 h-4"}),"Book Again"]}),n.jsxs(_,{type:"button",variant:"ghost",size:"sm",onClick:()=>B(!F),className:"text-blue-300 hover:text-blue-200 h-auto py-1 text-xs","data-testid":"button-toggle-book-again",children:[F?"Hide":"Show"," (",W.pastAppointments.length,")"]})]}),F&&n.jsx("div",{className:"space-y-2",children:W.pastAppointments.map(xe=>{var tt,ct;return n.jsx(q.button,{type:"button",onClick:()=>Gue(xe),className:"w-full text-left bg-white/5 hover:bg-white/10 border border-white/10 rounded-lg p-3 transition-all group",whileHover:{scale:1.02},whileTap:{scale:.98},"data-testid":`button-book-again-${xe.id}`,children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-blue-100 font-medium text-sm",children:((tt=xe.service)==null?void 0:tt.name)||"Service"}),n.jsxs("p",{className:"text-xs text-gray-400",children:[xe.vehicleYear," ",xe.vehicleMake," ",xe.vehicleModel]}),n.jsx("p",{className:"text-xs text-gray-500",children:Ie(new Date(xe.scheduledTime),"MMM d, yyyy")})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(ge,{className:"bg-blue-500/20 text-blue-300 text-xs",children:((ct=xe.service)==null?void 0:ct.priceRange)||"Contact"}),n.jsx(Jc,{className:"w-4 h-4 text-blue-400 group-hover:rotate-180 transition-transform duration-300"})]})]})},xe.id)})})]})}),n.jsxs("div",{children:[n.jsxs(U,{htmlFor:"referralCode",className:"text-blue-100",children:["Referral Code ",n.jsx("span",{className:"text-blue-300/60 text-sm font-normal",children:"(Optional)"})]}),n.jsx(se,{id:"referralCode",type:"text",value:T,onChange:xe=>I(xe.target.value.toUpperCase()),onBlur:()=>kl(T),placeholder:"Enter referral code",className:"bg-gray-700/30 border-blue-400/30 text-blue-100 placeholder:text-blue-200/40 uppercase","data-testid":"input-referral-code",disabled:L}),L&&n.jsx("p",{className:"text-sm text-blue-300/70 mt-1",children:"Validating code..."}),(G==null?void 0:G.error)&&n.jsx("p",{className:"text-sm text-red-400 mt-1",children:G.error}),(G==null?void 0:G.isValid)&&G.reward&&n.jsxs("div",{className:"mt-2 p-3 bg-green-500/10 border border-green-500/30 rounded-md",children:[n.jsxs("p",{className:"text-sm text-green-400 font-medium",children:[" Valid code! You'll receive: ",G.reward.description]}),G.reward.notes&&n.jsx("p",{className:"text-xs text-green-300/70 mt-1",children:G.reward.notes}),G.reward.expiryDays&&n.jsxs("p",{className:"text-xs text-green-300/70 mt-1",children:["Valid for ",G.reward.expiryDays," days after booking"]})]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsx("p",{className:"text-blue-300 text-sm",children:"We will never share your information with anyone for any reason."}),n.jsx(EA,{checked:oe,onCheckedChange:ye,required:!0,id:"sms-consent-booking"})]}),n.jsxs("div",{children:[n.jsx(U,{htmlFor:"notes",className:"text-blue-100",children:"Additional Notes"}),n.jsx("textarea",{id:"notes",value:Se,onChange:xe=>J(xe.target.value),placeholder:"Gate code, special instructions, issues or concerns?",className:"min-h-[100px] w-full rounded-md border border-blue-400/30 bg-gray-700/30 px-3 py-2 text-sm text-blue-100 placeholder:text-blue-200/40 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"})]}),n.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-xl p-4",children:[n.jsxs("h3",{className:"text-blue-100 font-semibold mb-3 flex items-center gap-2 text-sm",children:[n.jsx(Dt,{className:"w-4 h-4"}),"Set Up Recurring Service"]}),n.jsxs("div",{className:"flex items-center justify-between space-y-0 mb-3",children:[n.jsxs("div",{children:[n.jsx(U,{className:"text-blue-100 text-sm",children:"Enable Automatic Reminders"}),n.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Get reminded when it's time for your next detail"})]}),n.jsx(Vt,{checked:Y,onCheckedChange:me,"data-testid":"switch-recurring"})]}),Y&&n.jsxs(q.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},transition:{duration:.3},className:"mt-3",children:[n.jsx(U,{className:"text-blue-100 text-sm mb-2 block",children:"Reminder Frequency"}),n.jsxs(Pt,{value:pe,onValueChange:xe=>Me(xe),children:[n.jsx(kt,{className:"bg-gray-700/30 border-blue-400/30 text-blue-100","data-testid":"select-recurring-interval",children:n.jsx(Tt,{placeholder:"Choose frequency"})}),n.jsxs(Mt,{children:[n.jsx(ve,{value:"3months",children:"Every 3 months"}),n.jsx(ve,{value:"6months",children:"Every 6 months"}),n.jsx(ve,{value:"12months",children:"Yearly"})]})]}),n.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"We'll send you a reminder when it's time to book your next service"})]})]}),n.jsx(NCe,{selectedService:(b==null?void 0:b.name)||"",selectedAddOns:N,vehicles:he,basePriceEstimate:S9((b==null?void 0:b.name)||""),addOnPrices:C9(),conditionPrices:k9()}),n.jsx(jCe,{phoneNumber:k,selectedService:(b==null?void 0:b.name)||"",selectedAddOns:N,vehicleConditions:he.flatMap(xe=>xe.conditions||[]),estimatedPrice:efe(),pointsEarningRate:1}),n.jsx("div",{className:"pt-6 pb-2 border-t border-blue-400/10",children:n.jsx(q.div,{whileHover:{scale:1.02},whileTap:{scale:.98},children:n.jsx(_,{type:"submit",className:`w-full ${vC} text-white font-semibold shadow-lg shadow-blue-500/30 transition-all`,disabled:jn,children:jn?n.jsxs(n.Fragment,{children:[n.jsx(q.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full inline-block mr-2"}),"Booking..."]}):n.jsxs(n.Fragment,{children:[n.jsx(nn,{className:"w-4 h-4 inline mr-2"}),"Confirm Appointment"]})})})})]})},"details")]})})]})}const At=g4,pl=PA,ICe=x4,LCe=p1,kee=p.forwardRef(({className:e,...t},r)=>n.jsx(B0,{ref:r,className:Le("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));kee.displayName=B0.displayName;const _t=p.forwardRef(({className:e,children:t,...r},s)=>n.jsxs(ICe,{children:[n.jsx(kee,{}),n.jsxs(U0,{ref:s,className:Le("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg max-h-[85vh] overflow-y-auto",e),...r,children:[t,n.jsxs(p1,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[n.jsx(Jr,{className:"h-4 w-4"}),n.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));_t.displayName=U0.displayName;const $t=({className:e,...t})=>n.jsx("div",{className:Le("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});$t.displayName="DialogHeader";const Sn=({className:e,...t})=>n.jsx("div",{className:Le("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Sn.displayName="DialogFooter";const Et=p.forwardRef(({className:e,...t},r)=>n.jsx(h1,{ref:r,className:Le("text-lg font-semibold leading-none tracking-tight",e),...t}));Et.displayName=h1.displayName;const an=p.forwardRef(({className:e,...t},r)=>n.jsx(m1,{ref:r,className:Le("text-sm text-muted-foreground",e),...t}));an.displayName=m1.displayName;function pM(e){return[].concat(e)}function LA(e){return e.startsWith(":")}function Mee(e){return w4(e)&&(e==="*"||e.length>1&&":>~.+*".includes(e.slice(0,1))||Aee(e))}function _ee(e,t){return(w4(t)||typeof t=="number")&&!Tee(e)&&!LA(e)&&!Pee(e)}function Pee(e){return e.startsWith("@media")}function DCe(e){return e==="."}function Tee(e){return e==="--"}function w4(e){return e+""===e}function Aee(e){return w4(e)&&(e.startsWith("&")||LA(e))}function Lj(e,t=""){return e.filter(Boolean).join(t)}function Eee(e,t){let r=0;if(t.length===0)return r.toString();for(let s=0;s<t.length;s++){const a=t.charCodeAt(s);r=(r<<5)-r+a,r=r&r}return`${e??"cl"}_${r.toString(36)}`}function $Ce(e,t){return e==="content"?`"${t}"`:t}function OCe(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function c$(e,t){return`${e}:${t}`}function RCe(e){return e?`.${e}`:""}function FCe(e,t){return e?`${e}
${t}`:t}var Iee=class Lee{constructor(t,r,s,a){this.sheet=t,this.property=r,this.value=s,this.selector=a,this.property=r,this.value=s,this.joined=c$(r,s);const i=this.selector.preconditions.concat(this.selector.postconditions);this.hash=this.selector.hasConditions?this.selector.scopeClassName:Eee(this.sheet.name,this.joined),this.key=Lj([this.joined,i,this.hash])}toString(){let t=gM(this.selector.preconditions,{right:this.hash});return t=gM(this.selector.postconditions,{left:t}),`${t} {${Lee.genRule(this.property,this.value)}}`}static genRule(t,r){const s=OCe(t);return c$(s,$Ce(t,r))+";"}};function gM(e,{left:t="",right:r=""}={}){const s=e.reduce((a,i)=>LA(i)?a+i:Aee(i)?a+i.slice(1):Lj([a,i]," "),t);return Lj([s,RCe(r)]," ")}var zCe=class kw{constructor(t,r=null,{preconditions:s,postconditions:a}={}){this.sheet=t,this.preconditions=[],this.scopeClassName=null,this.scopeName=null,this.postconditions=[],this.preconditions=s?pM(s):[],this.postconditions=a?pM(a):[],this.setScope(r)}setScope(t){return t?(this.scopeClassName||(this.scopeName=t,this.scopeClassName=Eee(this.sheet.name,t+this.sheet.count)),this):this}get hasConditions(){return this.preconditions.length>0||this.postconditions.length>0}addScope(t){return new kw(this.sheet,t,{preconditions:this.preconditions,postconditions:this.postconditions})}addPrecondition(t){return new kw(this.sheet,this.scopeClassName,{postconditions:this.postconditions,preconditions:this.preconditions.concat(t)})}addPostcondition(t){return new kw(this.sheet,this.scopeClassName,{preconditions:this.preconditions,postconditions:this.postconditions.concat(t)})}createRule(t,r){return new Iee(this.sheet,t,r,this)}},BCe=class{constructor(t,r){this.name=t,this.rootNode=r,this.storedStyles={},this.storedClasses={},this.style="",this.count=0,this.id=`flairup-${t}`,this.styleTag=this.createStyleTag()}getStyle(){return this.style}append(t){this.style=FCe(this.style,t)}apply(){this.count++,this.styleTag&&(this.styleTag.innerHTML=this.style)}isApplied(){return!!this.styleTag}createStyleTag(){if(typeof document>"u"||this.isApplied()||this.rootNode===null)return this.styleTag;const t=document.createElement("style");return t.type="text/css",t.id=this.id,(this.rootNode??document.head).appendChild(t),t}addRule(t){const r=this.storedClasses[t.key];return w4(r)?r:(this.storedClasses[t.key]=t.hash,this.storedStyles[t.hash]=[t.property,t.value],this.append(t.toString()),t.hash)}};function DA(e,t){for(const r in e)t(r.trim(),e[r])}function kn(...e){const t=e.reduce((r,s)=>(s instanceof Set?r.push(...s):typeof s=="string"?r.push(s):Array.isArray(s)?r.push(kn(...s)):typeof s=="object"&&Object.entries(s).forEach(([a,i])=>{i&&r.push(a)}),r),[]);return Lj(t," ").trim()}function UCe(e,t){const r=new BCe(e,t);return{create:s,getStyle:r.getStyle.bind(r),isApplied:r.isApplied.bind(r)};function s(a){const i={};return Dee(r,a,new zCe(r)).forEach(([l,c,d])=>{j4(r,c,d).forEach(u=>{o(l,u)})}),r.apply(),i;function o(l,c){i[l]=i[l]??new Set,i[l].add(c)}}}function Dee(e,t,r){const s=[];return DA(t,(a,i)=>{if(Mee(a))return Dee(e,i,r.addPrecondition(a)).forEach(o=>s.push(o));s.push([a,t[a],r.addScope(a)])}),s}function j4(e,t,r){const s=new Set;return DA(t,(a,i)=>{let o=[];if(Mee(a))o=j4(e,i,r.addPostcondition(a));else if(DCe(a))o=pM(i);else if(Pee(a))o=HCe(e,i,a,r);else if(Tee(a))o=VCe(e,i,r);else if(_ee(a,i)){const l=r.createRule(a,i);e.addRule(l),s.add(l.hash)}return $ee(o,s)}),s}function $ee(e,t){return e.forEach(r=>t.add(r)),t}function VCe(e,t,r){const s=new Set,a=[];if(DA(t,(i,o)=>{if(_ee(i,o)){a.push(Iee.genRule(i,o));return}const l=j4(e,o??{},r);$ee(l,s)}),!r.scopeClassName)return s;if(a.length){const i=a.join(" ");e.append(`${gM(r.preconditions,{right:r.scopeClassName})} {${i}}`)}return s.add(r.scopeClassName),s}function HCe(e,t,r,s){e.append(r+" {");const a=j4(e,t,s);return e.append("}"),a}function Sr(){return Sr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Sr.apply(this,arguments)}function WCe(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,xM(e,t)}function xM(e,t){return xM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},xM(e,t)}function Oee(e,t){if(e==null)return{};var r={},s=Object.keys(e),a,i;for(i=0;i<s.length;i++)a=s[i],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function qCe(e,t){if(e){if(typeof e=="string")return d$(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return d$(e,t)}}function d$(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function GCe(e,t){var r=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r)return(r=r.call(e)).next.bind(r);if(Array.isArray(e)||(r=qCe(e))||t){r&&(e=r);var s=0;return function(){return s>=e.length?{done:!0}:{done:!1,value:e[s++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var $n;(function(e){e.hiddenOnSearch="epr-hidden-on-search",e.searchActive="epr-search-active",e.hidden="epr-hidden",e.visible="epr-visible",e.active="epr-active",e.emoji="epr-emoji",e.category="epr-emoji-category",e.label="epr-emoji-category-label",e.categoryContent="epr-emoji-category-content",e.emojiHasVariations="epr-emoji-has-variations",e.scrollBody="epr-body",e.emojiList="epr-emoji-list",e.external="__EmojiPicker__",e.emojiPicker="EmojiPickerReact",e.open="epr-open",e.vertical="epr-vertical",e.horizontal="epr-horizontal",e.variationPicker="epr-emoji-variation-picker",e.darkTheme="epr-dark-theme",e.autoTheme="epr-auto-theme"})($n||($n={}));function So(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.map(function(s){return"."+s}).join("")}var Er=UCe("epr",null),Mw={display:"none",opacity:"0",pointerEvents:"none",visibility:"hidden",overflow:"hidden"},$A=Er.create({hidden:Sr({".":$n.hidden},Mw)}),YCe=p.memo(function(){return p.createElement("style",{suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:Er.getStyle()}})}),Ph=Er.create({".epr-main":{":has(input:not(:placeholder-shown))":{categoryBtn:{":hover":{opacity:"1",backgroundPositionY:"var(--epr-category-navigation-button-size)"}},hiddenOnSearch:Sr({".":$n.hiddenOnSearch},Mw)},":has(input:placeholder-shown)":{visibleOnSearchOnly:Mw}},hiddenOnReactions:{transition:"all 0.5s ease-in-out"},".epr-reactions":{hiddenOnReactions:{height:"0px",width:"0px",opacity:"0",pointerEvents:"none",overflow:"hidden"}},".EmojiPickerReact:not(.epr-search-active)":{categoryBtn:{":hover":{opacity:"1",backgroundPositionY:"var(--epr-category-navigation-button-size)"},"&.epr-active":{opacity:"1",backgroundPositionY:"var(--epr-category-navigation-button-size)"}},visibleOnSearchOnly:Sr({".":"epr-visible-on-search-only"},Mw)}});function Su(e,t){var r,s;return{".epr-dark-theme":(r={},r[e]=t,r),".epr-auto-theme":(s={},s[e]={"@media (prefers-color-scheme: dark)":t},s)}}function Ree(e,t){var r,s,a=(r=e.customEmojis)!=null?r:[],i=(s=t.customEmojis)!=null?s:[];return e.open===t.open&&e.emojiVersion===t.emojiVersion&&e.reactionsDefaultOpen===t.reactionsDefaultOpen&&e.searchPlaceHolder===t.searchPlaceHolder&&e.searchPlaceholder===t.searchPlaceholder&&e.defaultSkinTone===t.defaultSkinTone&&e.skinTonesDisabled===t.skinTonesDisabled&&e.autoFocusSearch===t.autoFocusSearch&&e.emojiStyle===t.emojiStyle&&e.theme===t.theme&&e.suggestedEmojisMode===t.suggestedEmojisMode&&e.lazyLoadEmojis===t.lazyLoadEmojis&&e.className===t.className&&e.height===t.height&&e.width===t.width&&e.style===t.style&&e.searchDisabled===t.searchDisabled&&e.skinTonePickerLocation===t.skinTonePickerLocation&&a.length===i.length}var QCe=["1f44d","2764-fe0f","1f603","1f622","1f64f","1f44e","1f621"],Mx={};setTimeout(function(){S4.reduce(function(e,t){return Fee(t),e},Mx)});function Fee(e){var t=x1(e).flat().join("").toLowerCase().replace(/[^a-zA-Z\d]/g,"").split("");t.forEach(function(r){var s;Mx[r]=(s=Mx[r])!=null?s:{},Mx[r][va(e)]=e})}function u$(e,t){t===void 0&&(t=0);var r=p.useState(e),s=r[0],a=r[1],i=p.useRef(null);function o(l){return new Promise(function(c){var d;i.current&&clearTimeout(i.current),i.current=(d=window)==null?void 0:d.setTimeout(function(){a(l),c(l)},t)})}return[s,o]}function KCe(){var e=Jke();return function(t){return e.has(t)}}function zee(){var e=p.useRef({}),t=Kke();return p.useMemo(function(){var r=parseFloat(""+t);return!t||Number.isNaN(r)?e.current:S4.reduce(function(s,a){return ZCe(a,r)&&(s[va(a)]=!0),s},e.current)},[t])}function JCe(){var e=zee(),t=KCe();return function(s){var a=UA(va(s));return!!(e[a]||t(a))}}function ZCe(e,t){return jke(e)>t}function XCe(e){p.useEffect(function(){e(!0)},[e])}var Sy;(function(e){e.RECENT="recent",e.FREQUENT="frequent"})(Sy||(Sy={}));var Li;(function(e){e.NATIVE="native",e.APPLE="apple",e.TWITTER="twitter",e.GOOGLE="google",e.FACEBOOK="facebook"})(Li||(Li={}));var $p;(function(e){e.DARK="dark",e.LIGHT="light",e.AUTO="auto"})($p||($p={}));var Qo;(function(e){e.NEUTRAL="neutral",e.LIGHT="1f3fb",e.MEDIUM_LIGHT="1f3fc",e.MEDIUM="1f3fd",e.MEDIUM_DARK="1f3fe",e.DARK="1f3ff"})(Qo||(Qo={}));var Nn;(function(e){e.SUGGESTED="suggested",e.CUSTOM="custom",e.SMILEYS_PEOPLE="smileys_people",e.ANIMALS_NATURE="animals_nature",e.FOOD_DRINK="food_drink",e.TRAVEL_PLACES="travel_places",e.ACTIVITIES="activities",e.OBJECTS="objects",e.SYMBOLS="symbols",e.FLAGS="flags"})(Nn||(Nn={}));var Op;(function(e){e.SEARCH="SEARCH",e.PREVIEW="PREVIEW"})(Op||(Op={}));function eke(e){var t=e.children,r=zee(),s=Rke(),a=Qke(),i=p.useRef(Mx),o=p.useRef(!1),l=p.useRef(!1),c=p.useRef(r),d=u$(Date.now(),200),u=u$("",100),f=p.useState(!1),h=p.useState(s),m=p.useState(null),g=p.useState(new Set),x=p.useState(null),y=p.useState(a),v=p.useState(!1),b=v[0],w=v[1],N=p.useState([]);return XCe(w),p.createElement(Po.Provider,{value:{activeCategoryState:m,activeSkinTone:h,disallowClickRef:o,disallowMouseRef:l,disallowedEmojisRef:c,emojiVariationPickerState:x,emojisThatFailedToLoadState:g,filterRef:i,isPastInitialLoad:b,searchTerm:u,skinToneFanOpenState:f,suggestedUpdateState:d,reactionsModeState:y,visibleCategoriesState:N}},t)}var Po=p.createContext({activeCategoryState:[null,function(){}],activeSkinTone:[Qo.NEUTRAL,function(){}],disallowClickRef:{current:!1},disallowMouseRef:{current:!1},disallowedEmojisRef:{current:{}},emojiVariationPickerState:[null,function(){}],emojisThatFailedToLoadState:[new Set,function(){}],filterRef:{current:{}},isPastInitialLoad:!0,searchTerm:["",function(){return new Promise(function(){})}],skinToneFanOpenState:[!1,function(){}],suggestedUpdateState:[Date.now(),function(){}],reactionsModeState:[!1,function(){}],visibleCategoriesState:[[],function(){return[]}]});function OA(){var e=p.useContext(Po),t=e.filterRef;return t}function tke(){var e=p.useContext(Po),t=e.disallowClickRef;return t}function RA(){var e=p.useContext(Po),t=e.disallowMouseRef;return t}function Th(){var e=p.useContext(Po),t=e.reactionsModeState;return t}function N4(){var e=p.useContext(Po),t=e.searchTerm;return t}function FA(){var e=p.useContext(Po),t=e.activeSkinTone;return t}function Bee(){var e=p.useContext(Po),t=e.emojisThatFailedToLoadState;return t}function H0(){var e=p.useContext(Po),t=e.emojiVariationPickerState;return t}function g1(){var e=p.useContext(Po),t=e.skinToneFanOpenState;return t}function zA(){var e=p.useContext(Po),t=e.visibleCategoriesState;return t}function Uee(){var e=p.useContext(Po),t=e.suggestedUpdateState,r=t[0],s=t[1];return[r,function(){s(Date.now())}]}var Xi,nke=[Nn.SUGGESTED,Nn.CUSTOM,Nn.SMILEYS_PEOPLE,Nn.ANIMALS_NATURE,Nn.FOOD_DRINK,Nn.TRAVEL_PLACES,Nn.ACTIVITIES,Nn.OBJECTS,Nn.SYMBOLS,Nn.FLAGS],rke={name:"Recently Used",category:Nn.SUGGESTED},Vee=(Xi={},Xi[Nn.SUGGESTED]={category:Nn.SUGGESTED,name:"Frequently Used"},Xi[Nn.CUSTOM]={category:Nn.CUSTOM,name:"Custom Emojis"},Xi[Nn.SMILEYS_PEOPLE]={category:Nn.SMILEYS_PEOPLE,name:"Smileys & People"},Xi[Nn.ANIMALS_NATURE]={category:Nn.ANIMALS_NATURE,name:"Animals & Nature"},Xi[Nn.FOOD_DRINK]={category:Nn.FOOD_DRINK,name:"Food & Drink"},Xi[Nn.TRAVEL_PLACES]={category:Nn.TRAVEL_PLACES,name:"Travel & Places"},Xi[Nn.ACTIVITIES]={category:Nn.ACTIVITIES,name:"Activities"},Xi[Nn.OBJECTS]={category:Nn.OBJECTS,name:"Objects"},Xi[Nn.SYMBOLS]={category:Nn.SYMBOLS,name:"Symbols"},Xi[Nn.FLAGS]={category:Nn.FLAGS,name:"Flags"},Xi);function Hee(e){return nke.map(function(t){return Sr({},Vee[t],e&&e[t]&&e[t])})}function BA(e){return e.category}function Wee(e){return e.name}function ske(e,t){var r;e===void 0&&(e=[]),t===void 0&&(t={});var s={};t.suggestionMode===Sy.RECENT&&(s[Nn.SUGGESTED]=rke);var a=Hee(s);return(r=e)!=null&&r.length?e.map(function(i){return typeof i=="string"?f$(i,s[i]):Sr({},f$(i.category,s[i.category]),i)}):a}function f$(e,t){return t===void 0&&(t={}),Object.assign(Vee[e],t)}var ake="https://cdn.jsdelivr.net/npm/emoji-datasource-apple/img/apple/64/",ike="https://cdn.jsdelivr.net/npm/emoji-datasource-facebook/img/facebook/64/",oke="https://cdn.jsdelivr.net/npm/emoji-datasource-twitter/img/twitter/64/",lke="https://cdn.jsdelivr.net/npm/emoji-datasource-google/img/google/64/";function cke(e){switch(e){case Li.TWITTER:return oke;case Li.GOOGLE:return lke;case Li.FACEBOOK:return ike;case Li.APPLE:default:return ake}}var dke=[],uke=[{n:["grinning","grinning face"],u:"1f600",a:"1.0"},{n:["smiley","smiling face with open mouth"],u:"1f603",a:"0.6"},{n:["smile","smiling face with open mouth and smiling eyes"],u:"1f604",a:"0.6"},{n:["grin","grinning face with smiling eyes"],u:"1f601",a:"0.6"},{n:["laughing","satisfied","smiling face with open mouth and tightly-closed eyes"],u:"1f606",a:"0.6"},{n:["sweat smile","smiling face with open mouth and cold sweat"],u:"1f605",a:"0.6"},{n:["rolling on the floor laughing"],u:"1f923",a:"3.0"},{n:["joy","face with tears of joy"],u:"1f602",a:"0.6"},{n:["slightly smiling face"],u:"1f642",a:"1.0"},{n:["upside-down face","upside down face"],u:"1f643",a:"1.0"},{n:["melting face"],u:"1fae0",a:"14.0"},{n:["wink","winking face"],u:"1f609",a:"0.6"},{n:["blush","smiling face with smiling eyes"],u:"1f60a",a:"0.6"},{n:["innocent","smiling face with halo"],u:"1f607",a:"1.0"},{n:["smiling face with 3 hearts","smiling face with smiling eyes and three hearts"],u:"1f970",a:"11.0"},{n:["heart eyes","smiling face with heart-shaped eyes"],u:"1f60d",a:"0.6"},{n:["star-struck","grinning face with star eyes"],u:"1f929",a:"5.0"},{n:["kissing heart","face throwing a kiss"],u:"1f618",a:"0.6"},{n:["kissing","kissing face"],u:"1f617",a:"1.0"},{n:["relaxed","white smiling face"],u:"263a-fe0f",a:"0.6"},{n:["kissing closed eyes","kissing face with closed eyes"],u:"1f61a",a:"0.6"},{n:["kissing smiling eyes","kissing face with smiling eyes"],u:"1f619",a:"1.0"},{n:["smiling face with tear"],u:"1f972",a:"13.0"},{n:["yum","face savouring delicious food"],u:"1f60b",a:"0.6"},{n:["stuck out tongue","face with stuck-out tongue"],u:"1f61b",a:"1.0"},{n:["stuck out tongue winking eye","face with stuck-out tongue and winking eye"],u:"1f61c",a:"0.6"},{n:["zany face","grinning face with one large and one small eye"],u:"1f92a",a:"5.0"},{n:["stuck out tongue closed eyes","face with stuck-out tongue and tightly-closed eyes"],u:"1f61d",a:"0.6"},{n:["money-mouth face","money mouth face"],u:"1f911",a:"1.0"},{n:["hugging face"],u:"1f917",a:"1.0"},{n:["face with hand over mouth","smiling face with smiling eyes and hand covering mouth"],u:"1f92d",a:"5.0"},{n:["face with open eyes and hand over mouth"],u:"1fae2",a:"14.0"},{n:["face with peeking eye"],u:"1fae3",a:"14.0"},{n:["shushing face","face with finger covering closed lips"],u:"1f92b",a:"5.0"},{n:["thinking face"],u:"1f914",a:"1.0"},{n:["saluting face"],u:"1fae1",a:"14.0"},{n:["zipper-mouth face","zipper mouth face"],u:"1f910",a:"1.0"},{n:["face with raised eyebrow","face with one eyebrow raised"],u:"1f928",a:"5.0"},{n:["neutral face"],u:"1f610",a:"0.7"},{n:["expressionless","expressionless face"],u:"1f611",a:"1.0"},{n:["no mouth","face without mouth"],u:"1f636",a:"1.0"},{n:["dotted line face"],u:"1fae5",a:"14.0"},{n:["face in clouds"],u:"1f636-200d-1f32b-fe0f",a:"13.1"},{n:["smirk","smirking face"],u:"1f60f",a:"0.6"},{n:["unamused","unamused face"],u:"1f612",a:"0.6"},{n:["face with rolling eyes"],u:"1f644",a:"1.0"},{n:["grimacing","grimacing face"],u:"1f62c",a:"1.0"},{n:["face exhaling"],u:"1f62e-200d-1f4a8",a:"13.1"},{n:["lying face"],u:"1f925",a:"3.0"},{n:["shaking face"],u:"1fae8",a:"15.0"},{n:["head shaking horizontally"],u:"1f642-200d-2194-fe0f",a:"15.1"},{n:["head shaking vertically"],u:"1f642-200d-2195-fe0f",a:"15.1"},{n:["relieved","relieved face"],u:"1f60c",a:"0.6"},{n:["pensive","pensive face"],u:"1f614",a:"0.6"},{n:["sleepy","sleepy face"],u:"1f62a",a:"0.6"},{n:["drooling face"],u:"1f924",a:"3.0"},{n:["sleeping","sleeping face"],u:"1f634",a:"1.0"},{n:["mask","face with medical mask"],u:"1f637",a:"0.6"},{n:["face with thermometer"],u:"1f912",a:"1.0"},{n:["face with head-bandage","face with head bandage"],u:"1f915",a:"1.0"},{n:["nauseated face"],u:"1f922",a:"3.0"},{n:["face vomiting","face with open mouth vomiting"],u:"1f92e",a:"5.0"},{n:["sneezing face"],u:"1f927",a:"3.0"},{n:["hot face","overheated face"],u:"1f975",a:"11.0"},{n:["cold face","freezing face"],u:"1f976",a:"11.0"},{n:["woozy face","face with uneven eyes and wavy mouth"],u:"1f974",a:"11.0"},{n:["dizzy face"],u:"1f635",a:"0.6"},{n:["face with spiral eyes"],u:"1f635-200d-1f4ab",a:"13.1"},{n:["exploding head","shocked face with exploding head"],u:"1f92f",a:"5.0"},{n:["face with cowboy hat"],u:"1f920",a:"3.0"},{n:["partying face","face with party horn and party hat"],u:"1f973",a:"11.0"},{n:["disguised face"],u:"1f978",a:"13.0"},{n:["sunglasses","smiling face with sunglasses"],u:"1f60e",a:"1.0"},{n:["nerd face"],u:"1f913",a:"1.0"},{n:["face with monocle"],u:"1f9d0",a:"5.0"},{n:["confused","confused face"],u:"1f615",a:"1.0"},{n:["face with diagonal mouth"],u:"1fae4",a:"14.0"},{n:["worried","worried face"],u:"1f61f",a:"1.0"},{n:["slightly frowning face"],u:"1f641",a:"1.0"},{n:["frowning face","white frowning face"],u:"2639-fe0f",a:"0.7"},{n:["open mouth","face with open mouth"],u:"1f62e",a:"1.0"},{n:["hushed","hushed face"],u:"1f62f",a:"1.0"},{n:["astonished","astonished face"],u:"1f632",a:"0.6"},{n:["flushed","flushed face"],u:"1f633",a:"0.6"},{n:["pleading face","face with pleading eyes"],u:"1f97a",a:"11.0"},{n:["face holding back tears"],u:"1f979",a:"14.0"},{n:["frowning","frowning face with open mouth"],u:"1f626",a:"1.0"},{n:["anguished","anguished face"],u:"1f627",a:"1.0"},{n:["fearful","fearful face"],u:"1f628",a:"0.6"},{n:["cold sweat","face with open mouth and cold sweat"],u:"1f630",a:"0.6"},{n:["disappointed relieved","disappointed but relieved face"],u:"1f625",a:"0.6"},{n:["cry","crying face"],u:"1f622",a:"0.6"},{n:["sob","loudly crying face"],u:"1f62d",a:"0.6"},{n:["scream","face screaming in fear"],u:"1f631",a:"0.6"},{n:["confounded","confounded face"],u:"1f616",a:"0.6"},{n:["persevere","persevering face"],u:"1f623",a:"0.6"},{n:["disappointed","disappointed face"],u:"1f61e",a:"0.6"},{n:["sweat","face with cold sweat"],u:"1f613",a:"0.6"},{n:["weary","weary face"],u:"1f629",a:"0.6"},{n:["tired face"],u:"1f62b",a:"0.6"},{n:["yawning face"],u:"1f971",a:"12.0"},{n:["triumph","face with look of triumph"],u:"1f624",a:"0.6"},{n:["rage","pouting face"],u:"1f621",a:"0.6"},{n:["angry","angry face"],u:"1f620",a:"0.6"},{n:["face with symbols on mouth","serious face with symbols covering mouth"],u:"1f92c",a:"5.0"},{n:["smiling imp","smiling face with horns"],u:"1f608",a:"1.0"},{n:["imp"],u:"1f47f",a:"0.6"},{n:["skull"],u:"1f480",a:"0.6"},{n:["skull and crossbones"],u:"2620-fe0f",a:"1.0"},{n:["poop","shit","hankey","pile of poo"],u:"1f4a9",a:"0.6"},{n:["clown face"],u:"1f921",a:"3.0"},{n:["japanese ogre"],u:"1f479",a:"0.6"},{n:["japanese goblin"],u:"1f47a",a:"0.6"},{n:["ghost"],u:"1f47b",a:"0.6"},{n:["alien","extraterrestrial alien"],u:"1f47d",a:"0.6"},{n:["alien monster","space invader"],u:"1f47e",a:"0.6"},{n:["robot face"],u:"1f916",a:"1.0"},{n:["smiley cat","smiling cat face with open mouth"],u:"1f63a",a:"0.6"},{n:["smile cat","grinning cat face with smiling eyes"],u:"1f638",a:"0.6"},{n:["joy cat","cat face with tears of joy"],u:"1f639",a:"0.6"},{n:["heart eyes cat","smiling cat face with heart-shaped eyes"],u:"1f63b",a:"0.6"},{n:["smirk cat","cat face with wry smile"],u:"1f63c",a:"0.6"},{n:["kissing cat","kissing cat face with closed eyes"],u:"1f63d",a:"0.6"},{n:["scream cat","weary cat face"],u:"1f640",a:"0.6"},{n:["crying cat face"],u:"1f63f",a:"0.6"},{n:["pouting cat","pouting cat face"],u:"1f63e",a:"0.6"},{n:["see no evil","see-no-evil monkey"],u:"1f648",a:"0.6"},{n:["hear no evil","hear-no-evil monkey"],u:"1f649",a:"0.6"},{n:["speak no evil","speak-no-evil monkey"],u:"1f64a",a:"0.6"},{n:["love letter"],u:"1f48c",a:"0.6"},{n:["cupid","heart with arrow"],u:"1f498",a:"0.6"},{n:["gift heart","heart with ribbon"],u:"1f49d",a:"0.6"},{n:["sparkling heart"],u:"1f496",a:"0.6"},{n:["heartpulse","growing heart"],u:"1f497",a:"0.6"},{n:["heartbeat","beating heart"],u:"1f493",a:"0.6"},{n:["revolving hearts"],u:"1f49e",a:"0.6"},{n:["two hearts"],u:"1f495",a:"0.6"},{n:["heart decoration"],u:"1f49f",a:"0.6"},{n:["heart exclamation","heavy heart exclamation mark ornament"],u:"2763-fe0f",a:"1.0"},{n:["broken heart"],u:"1f494",a:"0.6"},{n:["heart on fire"],u:"2764-fe0f-200d-1f525",a:"13.1"},{n:["mending heart"],u:"2764-fe0f-200d-1fa79",a:"13.1"},{n:["heart","heavy black heart"],u:"2764-fe0f",a:"0.6"},{n:["pink heart"],u:"1fa77",a:"15.0"},{n:["orange heart"],u:"1f9e1",a:"5.0"},{n:["yellow heart"],u:"1f49b",a:"0.6"},{n:["green heart"],u:"1f49a",a:"0.6"},{n:["blue heart"],u:"1f499",a:"0.6"},{n:["light blue heart"],u:"1fa75",a:"15.0"},{n:["purple heart"],u:"1f49c",a:"0.6"},{n:["brown heart"],u:"1f90e",a:"12.0"},{n:["black heart"],u:"1f5a4",a:"3.0"},{n:["grey heart"],u:"1fa76",a:"15.0"},{n:["white heart"],u:"1f90d",a:"12.0"},{n:["kiss","kiss mark"],u:"1f48b",a:"0.6"},{n:["100","hundred points symbol"],u:"1f4af",a:"0.6"},{n:["anger","anger symbol"],u:"1f4a2",a:"0.6"},{n:["boom","collision","collision symbol"],u:"1f4a5",a:"0.6"},{n:["dizzy","dizzy symbol"],u:"1f4ab",a:"0.6"},{n:["sweat drops","splashing sweat symbol"],u:"1f4a6",a:"0.6"},{n:["dash","dash symbol"],u:"1f4a8",a:"0.6"},{n:["hole"],u:"1f573-fe0f",a:"0.7"},{n:["speech balloon"],u:"1f4ac",a:"0.6"},{n:["eye in speech bubble","eye-in-speech-bubble"],u:"1f441-fe0f-200d-1f5e8-fe0f",a:"2.0"},{n:["left speech bubble"],u:"1f5e8-fe0f",a:"2.0"},{n:["right anger bubble"],u:"1f5ef-fe0f",a:"0.7"},{n:["thought balloon"],u:"1f4ad",a:"1.0"},{n:["zzz","sleeping symbol"],u:"1f4a4",a:"0.6"},{n:["wave","waving hand sign"],u:"1f44b",v:["1f44b-1f3fb","1f44b-1f3fc","1f44b-1f3fd","1f44b-1f3fe","1f44b-1f3ff"],a:"0.6"},{n:["raised back of hand"],u:"1f91a",v:["1f91a-1f3fb","1f91a-1f3fc","1f91a-1f3fd","1f91a-1f3fe","1f91a-1f3ff"],a:"3.0"},{n:["hand with fingers splayed","raised hand with fingers splayed"],u:"1f590-fe0f",v:["1f590-1f3fb","1f590-1f3fc","1f590-1f3fd","1f590-1f3fe","1f590-1f3ff"],a:"0.7"},{n:["hand","raised hand"],u:"270b",v:["270b-1f3fb","270b-1f3fc","270b-1f3fd","270b-1f3fe","270b-1f3ff"],a:"0.6"},{n:["spock-hand","raised hand with part between middle and ring fingers"],u:"1f596",v:["1f596-1f3fb","1f596-1f3fc","1f596-1f3fd","1f596-1f3fe","1f596-1f3ff"],a:"1.0"},{n:["rightwards hand"],u:"1faf1",v:["1faf1-1f3fb","1faf1-1f3fc","1faf1-1f3fd","1faf1-1f3fe","1faf1-1f3ff"],a:"14.0"},{n:["leftwards hand"],u:"1faf2",v:["1faf2-1f3fb","1faf2-1f3fc","1faf2-1f3fd","1faf2-1f3fe","1faf2-1f3ff"],a:"14.0"},{n:["palm down hand"],u:"1faf3",v:["1faf3-1f3fb","1faf3-1f3fc","1faf3-1f3fd","1faf3-1f3fe","1faf3-1f3ff"],a:"14.0"},{n:["palm up hand"],u:"1faf4",v:["1faf4-1f3fb","1faf4-1f3fc","1faf4-1f3fd","1faf4-1f3fe","1faf4-1f3ff"],a:"14.0"},{n:["leftwards pushing hand"],u:"1faf7",v:["1faf7-1f3fb","1faf7-1f3fc","1faf7-1f3fd","1faf7-1f3fe","1faf7-1f3ff"],a:"15.0"},{n:["rightwards pushing hand"],u:"1faf8",v:["1faf8-1f3fb","1faf8-1f3fc","1faf8-1f3fd","1faf8-1f3fe","1faf8-1f3ff"],a:"15.0"},{n:["ok hand","ok hand sign"],u:"1f44c",v:["1f44c-1f3fb","1f44c-1f3fc","1f44c-1f3fd","1f44c-1f3fe","1f44c-1f3ff"],a:"0.6"},{n:["pinched fingers"],u:"1f90c",v:["1f90c-1f3fb","1f90c-1f3fc","1f90c-1f3fd","1f90c-1f3fe","1f90c-1f3ff"],a:"13.0"},{n:["pinching hand"],u:"1f90f",v:["1f90f-1f3fb","1f90f-1f3fc","1f90f-1f3fd","1f90f-1f3fe","1f90f-1f3ff"],a:"12.0"},{n:["v","victory hand"],u:"270c-fe0f",v:["270c-1f3fb","270c-1f3fc","270c-1f3fd","270c-1f3fe","270c-1f3ff"],a:"0.6"},{n:["crossed fingers","hand with index and middle fingers crossed"],u:"1f91e",v:["1f91e-1f3fb","1f91e-1f3fc","1f91e-1f3fd","1f91e-1f3fe","1f91e-1f3ff"],a:"3.0"},{n:["hand with index finger and thumb crossed"],u:"1faf0",v:["1faf0-1f3fb","1faf0-1f3fc","1faf0-1f3fd","1faf0-1f3fe","1faf0-1f3ff"],a:"14.0"},{n:["i love you hand sign"],u:"1f91f",v:["1f91f-1f3fb","1f91f-1f3fc","1f91f-1f3fd","1f91f-1f3fe","1f91f-1f3ff"],a:"5.0"},{n:["the horns","sign of the horns"],u:"1f918",v:["1f918-1f3fb","1f918-1f3fc","1f918-1f3fd","1f918-1f3fe","1f918-1f3ff"],a:"1.0"},{n:["call me hand"],u:"1f919",v:["1f919-1f3fb","1f919-1f3fc","1f919-1f3fd","1f919-1f3fe","1f919-1f3ff"],a:"3.0"},{n:["point left","white left pointing backhand index"],u:"1f448",v:["1f448-1f3fb","1f448-1f3fc","1f448-1f3fd","1f448-1f3fe","1f448-1f3ff"],a:"0.6"},{n:["point right","white right pointing backhand index"],u:"1f449",v:["1f449-1f3fb","1f449-1f3fc","1f449-1f3fd","1f449-1f3fe","1f449-1f3ff"],a:"0.6"},{n:["point up 2","white up pointing backhand index"],u:"1f446",v:["1f446-1f3fb","1f446-1f3fc","1f446-1f3fd","1f446-1f3fe","1f446-1f3ff"],a:"0.6"},{n:["middle finger","reversed hand with middle finger extended"],u:"1f595",v:["1f595-1f3fb","1f595-1f3fc","1f595-1f3fd","1f595-1f3fe","1f595-1f3ff"],a:"1.0"},{n:["point down","white down pointing backhand index"],u:"1f447",v:["1f447-1f3fb","1f447-1f3fc","1f447-1f3fd","1f447-1f3fe","1f447-1f3ff"],a:"0.6"},{n:["point up","white up pointing index"],u:"261d-fe0f",v:["261d-1f3fb","261d-1f3fc","261d-1f3fd","261d-1f3fe","261d-1f3ff"],a:"0.6"},{n:["index pointing at the viewer"],u:"1faf5",v:["1faf5-1f3fb","1faf5-1f3fc","1faf5-1f3fd","1faf5-1f3fe","1faf5-1f3ff"],a:"14.0"},{n:["+1","thumbsup","thumbs up sign"],u:"1f44d",v:["1f44d-1f3fb","1f44d-1f3fc","1f44d-1f3fd","1f44d-1f3fe","1f44d-1f3ff"],a:"0.6"},{n:["-1","thumbsdown","thumbs down sign"],u:"1f44e",v:["1f44e-1f3fb","1f44e-1f3fc","1f44e-1f3fd","1f44e-1f3fe","1f44e-1f3ff"],a:"0.6"},{n:["fist","raised fist"],u:"270a",v:["270a-1f3fb","270a-1f3fc","270a-1f3fd","270a-1f3fe","270a-1f3ff"],a:"0.6"},{n:["punch","facepunch","fisted hand sign"],u:"1f44a",v:["1f44a-1f3fb","1f44a-1f3fc","1f44a-1f3fd","1f44a-1f3fe","1f44a-1f3ff"],a:"0.6"},{n:["left-facing fist"],u:"1f91b",v:["1f91b-1f3fb","1f91b-1f3fc","1f91b-1f3fd","1f91b-1f3fe","1f91b-1f3ff"],a:"3.0"},{n:["right-facing fist"],u:"1f91c",v:["1f91c-1f3fb","1f91c-1f3fc","1f91c-1f3fd","1f91c-1f3fe","1f91c-1f3ff"],a:"3.0"},{n:["clap","clapping hands sign"],u:"1f44f",v:["1f44f-1f3fb","1f44f-1f3fc","1f44f-1f3fd","1f44f-1f3fe","1f44f-1f3ff"],a:"0.6"},{n:["raised hands","person raising both hands in celebration"],u:"1f64c",v:["1f64c-1f3fb","1f64c-1f3fc","1f64c-1f3fd","1f64c-1f3fe","1f64c-1f3ff"],a:"0.6"},{n:["heart hands"],u:"1faf6",v:["1faf6-1f3fb","1faf6-1f3fc","1faf6-1f3fd","1faf6-1f3fe","1faf6-1f3ff"],a:"14.0"},{n:["open hands","open hands sign"],u:"1f450",v:["1f450-1f3fb","1f450-1f3fc","1f450-1f3fd","1f450-1f3fe","1f450-1f3ff"],a:"0.6"},{n:["palms up together"],u:"1f932",v:["1f932-1f3fb","1f932-1f3fc","1f932-1f3fd","1f932-1f3fe","1f932-1f3ff"],a:"5.0"},{n:["handshake"],u:"1f91d",v:["1f91d-1f3fb","1f91d-1f3fc","1f91d-1f3fd","1f91d-1f3fe","1f91d-1f3ff","1faf1-1f3fb-200d-1faf2-1f3fc","1faf1-1f3fb-200d-1faf2-1f3fd","1faf1-1f3fb-200d-1faf2-1f3fe","1faf1-1f3fb-200d-1faf2-1f3ff","1faf1-1f3fc-200d-1faf2-1f3fb","1faf1-1f3fc-200d-1faf2-1f3fd","1faf1-1f3fc-200d-1faf2-1f3fe","1faf1-1f3fc-200d-1faf2-1f3ff","1faf1-1f3fd-200d-1faf2-1f3fb","1faf1-1f3fd-200d-1faf2-1f3fc","1faf1-1f3fd-200d-1faf2-1f3fe","1faf1-1f3fd-200d-1faf2-1f3ff","1faf1-1f3fe-200d-1faf2-1f3fb","1faf1-1f3fe-200d-1faf2-1f3fc","1faf1-1f3fe-200d-1faf2-1f3fd","1faf1-1f3fe-200d-1faf2-1f3ff","1faf1-1f3ff-200d-1faf2-1f3fb","1faf1-1f3ff-200d-1faf2-1f3fc","1faf1-1f3ff-200d-1faf2-1f3fd","1faf1-1f3ff-200d-1faf2-1f3fe"],a:"3.0"},{n:["pray","person with folded hands"],u:"1f64f",v:["1f64f-1f3fb","1f64f-1f3fc","1f64f-1f3fd","1f64f-1f3fe","1f64f-1f3ff"],a:"0.6"},{n:["writing hand"],u:"270d-fe0f",v:["270d-1f3fb","270d-1f3fc","270d-1f3fd","270d-1f3fe","270d-1f3ff"],a:"0.7"},{n:["nail care","nail polish"],u:"1f485",v:["1f485-1f3fb","1f485-1f3fc","1f485-1f3fd","1f485-1f3fe","1f485-1f3ff"],a:"0.6"},{n:["selfie"],u:"1f933",v:["1f933-1f3fb","1f933-1f3fc","1f933-1f3fd","1f933-1f3fe","1f933-1f3ff"],a:"3.0"},{n:["muscle","flexed biceps"],u:"1f4aa",v:["1f4aa-1f3fb","1f4aa-1f3fc","1f4aa-1f3fd","1f4aa-1f3fe","1f4aa-1f3ff"],a:"0.6"},{n:["mechanical arm"],u:"1f9be",a:"12.0"},{n:["mechanical leg"],u:"1f9bf",a:"12.0"},{n:["leg"],u:"1f9b5",v:["1f9b5-1f3fb","1f9b5-1f3fc","1f9b5-1f3fd","1f9b5-1f3fe","1f9b5-1f3ff"],a:"11.0"},{n:["foot"],u:"1f9b6",v:["1f9b6-1f3fb","1f9b6-1f3fc","1f9b6-1f3fd","1f9b6-1f3fe","1f9b6-1f3ff"],a:"11.0"},{n:["ear"],u:"1f442",v:["1f442-1f3fb","1f442-1f3fc","1f442-1f3fd","1f442-1f3fe","1f442-1f3ff"],a:"0.6"},{n:["ear with hearing aid"],u:"1f9bb",v:["1f9bb-1f3fb","1f9bb-1f3fc","1f9bb-1f3fd","1f9bb-1f3fe","1f9bb-1f3ff"],a:"12.0"},{n:["nose"],u:"1f443",v:["1f443-1f3fb","1f443-1f3fc","1f443-1f3fd","1f443-1f3fe","1f443-1f3ff"],a:"0.6"},{n:["brain"],u:"1f9e0",a:"5.0"},{n:["anatomical heart"],u:"1fac0",a:"13.0"},{n:["lungs"],u:"1fac1",a:"13.0"},{n:["tooth"],u:"1f9b7",a:"11.0"},{n:["bone"],u:"1f9b4",a:"11.0"},{n:["eyes"],u:"1f440",a:"0.6"},{n:["eye"],u:"1f441-fe0f",a:"0.7"},{n:["tongue"],u:"1f445",a:"0.6"},{n:["lips","mouth"],u:"1f444",a:"0.6"},{n:["biting lip"],u:"1fae6",a:"14.0"},{n:["baby"],u:"1f476",v:["1f476-1f3fb","1f476-1f3fc","1f476-1f3fd","1f476-1f3fe","1f476-1f3ff"],a:"0.6"},{n:["child"],u:"1f9d2",v:["1f9d2-1f3fb","1f9d2-1f3fc","1f9d2-1f3fd","1f9d2-1f3fe","1f9d2-1f3ff"],a:"5.0"},{n:["boy"],u:"1f466",v:["1f466-1f3fb","1f466-1f3fc","1f466-1f3fd","1f466-1f3fe","1f466-1f3ff"],a:"0.6"},{n:["girl"],u:"1f467",v:["1f467-1f3fb","1f467-1f3fc","1f467-1f3fd","1f467-1f3fe","1f467-1f3ff"],a:"0.6"},{n:["adult"],u:"1f9d1",v:["1f9d1-1f3fb","1f9d1-1f3fc","1f9d1-1f3fd","1f9d1-1f3fe","1f9d1-1f3ff"],a:"5.0"},{n:["person with blond hair"],u:"1f471",v:["1f471-1f3fb","1f471-1f3fc","1f471-1f3fd","1f471-1f3fe","1f471-1f3ff"],a:"0.6"},{n:["man"],u:"1f468",v:["1f468-1f3fb","1f468-1f3fc","1f468-1f3fd","1f468-1f3fe","1f468-1f3ff"],a:"0.6"},{n:["bearded person"],u:"1f9d4",v:["1f9d4-1f3fb","1f9d4-1f3fc","1f9d4-1f3fd","1f9d4-1f3fe","1f9d4-1f3ff"],a:"5.0"},{n:["man: beard","man with beard"],u:"1f9d4-200d-2642-fe0f",v:["1f9d4-1f3fb-200d-2642-fe0f","1f9d4-1f3fc-200d-2642-fe0f","1f9d4-1f3fd-200d-2642-fe0f","1f9d4-1f3fe-200d-2642-fe0f","1f9d4-1f3ff-200d-2642-fe0f"],a:"13.1"},{n:["woman: beard","woman with beard"],u:"1f9d4-200d-2640-fe0f",v:["1f9d4-1f3fb-200d-2640-fe0f","1f9d4-1f3fc-200d-2640-fe0f","1f9d4-1f3fd-200d-2640-fe0f","1f9d4-1f3fe-200d-2640-fe0f","1f9d4-1f3ff-200d-2640-fe0f"],a:"13.1"},{n:["man: red hair","red haired man"],u:"1f468-200d-1f9b0",v:["1f468-1f3fb-200d-1f9b0","1f468-1f3fc-200d-1f9b0","1f468-1f3fd-200d-1f9b0","1f468-1f3fe-200d-1f9b0","1f468-1f3ff-200d-1f9b0"],a:"11.0"},{n:["man: curly hair","curly haired man"],u:"1f468-200d-1f9b1",v:["1f468-1f3fb-200d-1f9b1","1f468-1f3fc-200d-1f9b1","1f468-1f3fd-200d-1f9b1","1f468-1f3fe-200d-1f9b1","1f468-1f3ff-200d-1f9b1"],a:"11.0"},{n:["man: white hair","white haired man"],u:"1f468-200d-1f9b3",v:["1f468-1f3fb-200d-1f9b3","1f468-1f3fc-200d-1f9b3","1f468-1f3fd-200d-1f9b3","1f468-1f3fe-200d-1f9b3","1f468-1f3ff-200d-1f9b3"],a:"11.0"},{n:["bald man","man: bald"],u:"1f468-200d-1f9b2",v:["1f468-1f3fb-200d-1f9b2","1f468-1f3fc-200d-1f9b2","1f468-1f3fd-200d-1f9b2","1f468-1f3fe-200d-1f9b2","1f468-1f3ff-200d-1f9b2"],a:"11.0"},{n:["woman"],u:"1f469",v:["1f469-1f3fb","1f469-1f3fc","1f469-1f3fd","1f469-1f3fe","1f469-1f3ff"],a:"0.6"},{n:["woman: red hair","red haired woman"],u:"1f469-200d-1f9b0",v:["1f469-1f3fb-200d-1f9b0","1f469-1f3fc-200d-1f9b0","1f469-1f3fd-200d-1f9b0","1f469-1f3fe-200d-1f9b0","1f469-1f3ff-200d-1f9b0"],a:"11.0"},{n:["person: red hair","red haired person"],u:"1f9d1-200d-1f9b0",v:["1f9d1-1f3fb-200d-1f9b0","1f9d1-1f3fc-200d-1f9b0","1f9d1-1f3fd-200d-1f9b0","1f9d1-1f3fe-200d-1f9b0","1f9d1-1f3ff-200d-1f9b0"],a:"12.1"},{n:["woman: curly hair","curly haired woman"],u:"1f469-200d-1f9b1",v:["1f469-1f3fb-200d-1f9b1","1f469-1f3fc-200d-1f9b1","1f469-1f3fd-200d-1f9b1","1f469-1f3fe-200d-1f9b1","1f469-1f3ff-200d-1f9b1"],a:"11.0"},{n:["person: curly hair","curly haired person"],u:"1f9d1-200d-1f9b1",v:["1f9d1-1f3fb-200d-1f9b1","1f9d1-1f3fc-200d-1f9b1","1f9d1-1f3fd-200d-1f9b1","1f9d1-1f3fe-200d-1f9b1","1f9d1-1f3ff-200d-1f9b1"],a:"12.1"},{n:["woman: white hair","white haired woman"],u:"1f469-200d-1f9b3",v:["1f469-1f3fb-200d-1f9b3","1f469-1f3fc-200d-1f9b3","1f469-1f3fd-200d-1f9b3","1f469-1f3fe-200d-1f9b3","1f469-1f3ff-200d-1f9b3"],a:"11.0"},{n:["person: white hair","white haired person"],u:"1f9d1-200d-1f9b3",v:["1f9d1-1f3fb-200d-1f9b3","1f9d1-1f3fc-200d-1f9b3","1f9d1-1f3fd-200d-1f9b3","1f9d1-1f3fe-200d-1f9b3","1f9d1-1f3ff-200d-1f9b3"],a:"12.1"},{n:["bald woman","woman: bald"],u:"1f469-200d-1f9b2",v:["1f469-1f3fb-200d-1f9b2","1f469-1f3fc-200d-1f9b2","1f469-1f3fd-200d-1f9b2","1f469-1f3fe-200d-1f9b2","1f469-1f3ff-200d-1f9b2"],a:"11.0"},{n:["bald person","person: bald"],u:"1f9d1-200d-1f9b2",v:["1f9d1-1f3fb-200d-1f9b2","1f9d1-1f3fc-200d-1f9b2","1f9d1-1f3fd-200d-1f9b2","1f9d1-1f3fe-200d-1f9b2","1f9d1-1f3ff-200d-1f9b2"],a:"12.1"},{n:["woman: blond hair","blond-haired-woman"],u:"1f471-200d-2640-fe0f",v:["1f471-1f3fb-200d-2640-fe0f","1f471-1f3fc-200d-2640-fe0f","1f471-1f3fd-200d-2640-fe0f","1f471-1f3fe-200d-2640-fe0f","1f471-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["man: blond hair","blond-haired-man"],u:"1f471-200d-2642-fe0f",v:["1f471-1f3fb-200d-2642-fe0f","1f471-1f3fc-200d-2642-fe0f","1f471-1f3fd-200d-2642-fe0f","1f471-1f3fe-200d-2642-fe0f","1f471-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["older adult"],u:"1f9d3",v:["1f9d3-1f3fb","1f9d3-1f3fc","1f9d3-1f3fd","1f9d3-1f3fe","1f9d3-1f3ff"],a:"5.0"},{n:["older man"],u:"1f474",v:["1f474-1f3fb","1f474-1f3fc","1f474-1f3fd","1f474-1f3fe","1f474-1f3ff"],a:"0.6"},{n:["older woman"],u:"1f475",v:["1f475-1f3fb","1f475-1f3fc","1f475-1f3fd","1f475-1f3fe","1f475-1f3ff"],a:"0.6"},{n:["person frowning"],u:"1f64d",v:["1f64d-1f3fb","1f64d-1f3fc","1f64d-1f3fd","1f64d-1f3fe","1f64d-1f3ff"],a:"0.6"},{n:["man frowning","man-frowning"],u:"1f64d-200d-2642-fe0f",v:["1f64d-1f3fb-200d-2642-fe0f","1f64d-1f3fc-200d-2642-fe0f","1f64d-1f3fd-200d-2642-fe0f","1f64d-1f3fe-200d-2642-fe0f","1f64d-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman frowning","woman-frowning"],u:"1f64d-200d-2640-fe0f",v:["1f64d-1f3fb-200d-2640-fe0f","1f64d-1f3fc-200d-2640-fe0f","1f64d-1f3fd-200d-2640-fe0f","1f64d-1f3fe-200d-2640-fe0f","1f64d-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["person with pouting face"],u:"1f64e",v:["1f64e-1f3fb","1f64e-1f3fc","1f64e-1f3fd","1f64e-1f3fe","1f64e-1f3ff"],a:"0.6"},{n:["man pouting","man-pouting"],u:"1f64e-200d-2642-fe0f",v:["1f64e-1f3fb-200d-2642-fe0f","1f64e-1f3fc-200d-2642-fe0f","1f64e-1f3fd-200d-2642-fe0f","1f64e-1f3fe-200d-2642-fe0f","1f64e-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman pouting","woman-pouting"],u:"1f64e-200d-2640-fe0f",v:["1f64e-1f3fb-200d-2640-fe0f","1f64e-1f3fc-200d-2640-fe0f","1f64e-1f3fd-200d-2640-fe0f","1f64e-1f3fe-200d-2640-fe0f","1f64e-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["no good","face with no good gesture"],u:"1f645",v:["1f645-1f3fb","1f645-1f3fc","1f645-1f3fd","1f645-1f3fe","1f645-1f3ff"],a:"0.6"},{n:["man gesturing no","man-gesturing-no"],u:"1f645-200d-2642-fe0f",v:["1f645-1f3fb-200d-2642-fe0f","1f645-1f3fc-200d-2642-fe0f","1f645-1f3fd-200d-2642-fe0f","1f645-1f3fe-200d-2642-fe0f","1f645-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman gesturing no","woman-gesturing-no"],u:"1f645-200d-2640-fe0f",v:["1f645-1f3fb-200d-2640-fe0f","1f645-1f3fc-200d-2640-fe0f","1f645-1f3fd-200d-2640-fe0f","1f645-1f3fe-200d-2640-fe0f","1f645-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["ok woman","face with ok gesture"],u:"1f646",v:["1f646-1f3fb","1f646-1f3fc","1f646-1f3fd","1f646-1f3fe","1f646-1f3ff"],a:"0.6"},{n:["man gesturing ok","man-gesturing-ok"],u:"1f646-200d-2642-fe0f",v:["1f646-1f3fb-200d-2642-fe0f","1f646-1f3fc-200d-2642-fe0f","1f646-1f3fd-200d-2642-fe0f","1f646-1f3fe-200d-2642-fe0f","1f646-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman gesturing ok","woman-gesturing-ok"],u:"1f646-200d-2640-fe0f",v:["1f646-1f3fb-200d-2640-fe0f","1f646-1f3fc-200d-2640-fe0f","1f646-1f3fd-200d-2640-fe0f","1f646-1f3fe-200d-2640-fe0f","1f646-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["information desk person"],u:"1f481",v:["1f481-1f3fb","1f481-1f3fc","1f481-1f3fd","1f481-1f3fe","1f481-1f3ff"],a:"0.6"},{n:["man tipping hand","man-tipping-hand"],u:"1f481-200d-2642-fe0f",v:["1f481-1f3fb-200d-2642-fe0f","1f481-1f3fc-200d-2642-fe0f","1f481-1f3fd-200d-2642-fe0f","1f481-1f3fe-200d-2642-fe0f","1f481-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman tipping hand","woman-tipping-hand"],u:"1f481-200d-2640-fe0f",v:["1f481-1f3fb-200d-2640-fe0f","1f481-1f3fc-200d-2640-fe0f","1f481-1f3fd-200d-2640-fe0f","1f481-1f3fe-200d-2640-fe0f","1f481-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["raising hand","happy person raising one hand"],u:"1f64b",v:["1f64b-1f3fb","1f64b-1f3fc","1f64b-1f3fd","1f64b-1f3fe","1f64b-1f3ff"],a:"0.6"},{n:["man raising hand","man-raising-hand"],u:"1f64b-200d-2642-fe0f",v:["1f64b-1f3fb-200d-2642-fe0f","1f64b-1f3fc-200d-2642-fe0f","1f64b-1f3fd-200d-2642-fe0f","1f64b-1f3fe-200d-2642-fe0f","1f64b-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman raising hand","woman-raising-hand"],u:"1f64b-200d-2640-fe0f",v:["1f64b-1f3fb-200d-2640-fe0f","1f64b-1f3fc-200d-2640-fe0f","1f64b-1f3fd-200d-2640-fe0f","1f64b-1f3fe-200d-2640-fe0f","1f64b-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["deaf person"],u:"1f9cf",v:["1f9cf-1f3fb","1f9cf-1f3fc","1f9cf-1f3fd","1f9cf-1f3fe","1f9cf-1f3ff"],a:"12.0"},{n:["deaf man"],u:"1f9cf-200d-2642-fe0f",v:["1f9cf-1f3fb-200d-2642-fe0f","1f9cf-1f3fc-200d-2642-fe0f","1f9cf-1f3fd-200d-2642-fe0f","1f9cf-1f3fe-200d-2642-fe0f","1f9cf-1f3ff-200d-2642-fe0f"],a:"12.0"},{n:["deaf woman"],u:"1f9cf-200d-2640-fe0f",v:["1f9cf-1f3fb-200d-2640-fe0f","1f9cf-1f3fc-200d-2640-fe0f","1f9cf-1f3fd-200d-2640-fe0f","1f9cf-1f3fe-200d-2640-fe0f","1f9cf-1f3ff-200d-2640-fe0f"],a:"12.0"},{n:["bow","person bowing deeply"],u:"1f647",v:["1f647-1f3fb","1f647-1f3fc","1f647-1f3fd","1f647-1f3fe","1f647-1f3ff"],a:"0.6"},{n:["man bowing","man-bowing"],u:"1f647-200d-2642-fe0f",v:["1f647-1f3fb-200d-2642-fe0f","1f647-1f3fc-200d-2642-fe0f","1f647-1f3fd-200d-2642-fe0f","1f647-1f3fe-200d-2642-fe0f","1f647-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman bowing","woman-bowing"],u:"1f647-200d-2640-fe0f",v:["1f647-1f3fb-200d-2640-fe0f","1f647-1f3fc-200d-2640-fe0f","1f647-1f3fd-200d-2640-fe0f","1f647-1f3fe-200d-2640-fe0f","1f647-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["face palm"],u:"1f926",v:["1f926-1f3fb","1f926-1f3fc","1f926-1f3fd","1f926-1f3fe","1f926-1f3ff"],a:"3.0"},{n:["man facepalming","man-facepalming"],u:"1f926-200d-2642-fe0f",v:["1f926-1f3fb-200d-2642-fe0f","1f926-1f3fc-200d-2642-fe0f","1f926-1f3fd-200d-2642-fe0f","1f926-1f3fe-200d-2642-fe0f","1f926-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman facepalming","woman-facepalming"],u:"1f926-200d-2640-fe0f",v:["1f926-1f3fb-200d-2640-fe0f","1f926-1f3fc-200d-2640-fe0f","1f926-1f3fd-200d-2640-fe0f","1f926-1f3fe-200d-2640-fe0f","1f926-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["shrug"],u:"1f937",v:["1f937-1f3fb","1f937-1f3fc","1f937-1f3fd","1f937-1f3fe","1f937-1f3ff"],a:"3.0"},{n:["man shrugging","man-shrugging"],u:"1f937-200d-2642-fe0f",v:["1f937-1f3fb-200d-2642-fe0f","1f937-1f3fc-200d-2642-fe0f","1f937-1f3fd-200d-2642-fe0f","1f937-1f3fe-200d-2642-fe0f","1f937-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman shrugging","woman-shrugging"],u:"1f937-200d-2640-fe0f",v:["1f937-1f3fb-200d-2640-fe0f","1f937-1f3fc-200d-2640-fe0f","1f937-1f3fd-200d-2640-fe0f","1f937-1f3fe-200d-2640-fe0f","1f937-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["health worker"],u:"1f9d1-200d-2695-fe0f",v:["1f9d1-1f3fb-200d-2695-fe0f","1f9d1-1f3fc-200d-2695-fe0f","1f9d1-1f3fd-200d-2695-fe0f","1f9d1-1f3fe-200d-2695-fe0f","1f9d1-1f3ff-200d-2695-fe0f"],a:"12.1"},{n:["male-doctor","man health worker"],u:"1f468-200d-2695-fe0f",v:["1f468-1f3fb-200d-2695-fe0f","1f468-1f3fc-200d-2695-fe0f","1f468-1f3fd-200d-2695-fe0f","1f468-1f3fe-200d-2695-fe0f","1f468-1f3ff-200d-2695-fe0f"],a:"4.0"},{n:["female-doctor","woman health worker"],u:"1f469-200d-2695-fe0f",v:["1f469-1f3fb-200d-2695-fe0f","1f469-1f3fc-200d-2695-fe0f","1f469-1f3fd-200d-2695-fe0f","1f469-1f3fe-200d-2695-fe0f","1f469-1f3ff-200d-2695-fe0f"],a:"4.0"},{n:["student"],u:"1f9d1-200d-1f393",v:["1f9d1-1f3fb-200d-1f393","1f9d1-1f3fc-200d-1f393","1f9d1-1f3fd-200d-1f393","1f9d1-1f3fe-200d-1f393","1f9d1-1f3ff-200d-1f393"],a:"12.1"},{n:["man student","male-student"],u:"1f468-200d-1f393",v:["1f468-1f3fb-200d-1f393","1f468-1f3fc-200d-1f393","1f468-1f3fd-200d-1f393","1f468-1f3fe-200d-1f393","1f468-1f3ff-200d-1f393"],a:"4.0"},{n:["woman student","female-student"],u:"1f469-200d-1f393",v:["1f469-1f3fb-200d-1f393","1f469-1f3fc-200d-1f393","1f469-1f3fd-200d-1f393","1f469-1f3fe-200d-1f393","1f469-1f3ff-200d-1f393"],a:"4.0"},{n:["teacher"],u:"1f9d1-200d-1f3eb",v:["1f9d1-1f3fb-200d-1f3eb","1f9d1-1f3fc-200d-1f3eb","1f9d1-1f3fd-200d-1f3eb","1f9d1-1f3fe-200d-1f3eb","1f9d1-1f3ff-200d-1f3eb"],a:"12.1"},{n:["man teacher","male-teacher"],u:"1f468-200d-1f3eb",v:["1f468-1f3fb-200d-1f3eb","1f468-1f3fc-200d-1f3eb","1f468-1f3fd-200d-1f3eb","1f468-1f3fe-200d-1f3eb","1f468-1f3ff-200d-1f3eb"],a:"4.0"},{n:["woman teacher","female-teacher"],u:"1f469-200d-1f3eb",v:["1f469-1f3fb-200d-1f3eb","1f469-1f3fc-200d-1f3eb","1f469-1f3fd-200d-1f3eb","1f469-1f3fe-200d-1f3eb","1f469-1f3ff-200d-1f3eb"],a:"4.0"},{n:["judge"],u:"1f9d1-200d-2696-fe0f",v:["1f9d1-1f3fb-200d-2696-fe0f","1f9d1-1f3fc-200d-2696-fe0f","1f9d1-1f3fd-200d-2696-fe0f","1f9d1-1f3fe-200d-2696-fe0f","1f9d1-1f3ff-200d-2696-fe0f"],a:"12.1"},{n:["man judge","male-judge"],u:"1f468-200d-2696-fe0f",v:["1f468-1f3fb-200d-2696-fe0f","1f468-1f3fc-200d-2696-fe0f","1f468-1f3fd-200d-2696-fe0f","1f468-1f3fe-200d-2696-fe0f","1f468-1f3ff-200d-2696-fe0f"],a:"4.0"},{n:["woman judge","female-judge"],u:"1f469-200d-2696-fe0f",v:["1f469-1f3fb-200d-2696-fe0f","1f469-1f3fc-200d-2696-fe0f","1f469-1f3fd-200d-2696-fe0f","1f469-1f3fe-200d-2696-fe0f","1f469-1f3ff-200d-2696-fe0f"],a:"4.0"},{n:["farmer"],u:"1f9d1-200d-1f33e",v:["1f9d1-1f3fb-200d-1f33e","1f9d1-1f3fc-200d-1f33e","1f9d1-1f3fd-200d-1f33e","1f9d1-1f3fe-200d-1f33e","1f9d1-1f3ff-200d-1f33e"],a:"12.1"},{n:["man farmer","male-farmer"],u:"1f468-200d-1f33e",v:["1f468-1f3fb-200d-1f33e","1f468-1f3fc-200d-1f33e","1f468-1f3fd-200d-1f33e","1f468-1f3fe-200d-1f33e","1f468-1f3ff-200d-1f33e"],a:"4.0"},{n:["woman farmer","female-farmer"],u:"1f469-200d-1f33e",v:["1f469-1f3fb-200d-1f33e","1f469-1f3fc-200d-1f33e","1f469-1f3fd-200d-1f33e","1f469-1f3fe-200d-1f33e","1f469-1f3ff-200d-1f33e"],a:"4.0"},{n:["cook"],u:"1f9d1-200d-1f373",v:["1f9d1-1f3fb-200d-1f373","1f9d1-1f3fc-200d-1f373","1f9d1-1f3fd-200d-1f373","1f9d1-1f3fe-200d-1f373","1f9d1-1f3ff-200d-1f373"],a:"12.1"},{n:["man cook","male-cook"],u:"1f468-200d-1f373",v:["1f468-1f3fb-200d-1f373","1f468-1f3fc-200d-1f373","1f468-1f3fd-200d-1f373","1f468-1f3fe-200d-1f373","1f468-1f3ff-200d-1f373"],a:"4.0"},{n:["woman cook","female-cook"],u:"1f469-200d-1f373",v:["1f469-1f3fb-200d-1f373","1f469-1f3fc-200d-1f373","1f469-1f3fd-200d-1f373","1f469-1f3fe-200d-1f373","1f469-1f3ff-200d-1f373"],a:"4.0"},{n:["mechanic"],u:"1f9d1-200d-1f527",v:["1f9d1-1f3fb-200d-1f527","1f9d1-1f3fc-200d-1f527","1f9d1-1f3fd-200d-1f527","1f9d1-1f3fe-200d-1f527","1f9d1-1f3ff-200d-1f527"],a:"12.1"},{n:["man mechanic","male-mechanic"],u:"1f468-200d-1f527",v:["1f468-1f3fb-200d-1f527","1f468-1f3fc-200d-1f527","1f468-1f3fd-200d-1f527","1f468-1f3fe-200d-1f527","1f468-1f3ff-200d-1f527"],a:"4.0"},{n:["woman mechanic","female-mechanic"],u:"1f469-200d-1f527",v:["1f469-1f3fb-200d-1f527","1f469-1f3fc-200d-1f527","1f469-1f3fd-200d-1f527","1f469-1f3fe-200d-1f527","1f469-1f3ff-200d-1f527"],a:"4.0"},{n:["factory worker"],u:"1f9d1-200d-1f3ed",v:["1f9d1-1f3fb-200d-1f3ed","1f9d1-1f3fc-200d-1f3ed","1f9d1-1f3fd-200d-1f3ed","1f9d1-1f3fe-200d-1f3ed","1f9d1-1f3ff-200d-1f3ed"],a:"12.1"},{n:["man factory worker","male-factory-worker"],u:"1f468-200d-1f3ed",v:["1f468-1f3fb-200d-1f3ed","1f468-1f3fc-200d-1f3ed","1f468-1f3fd-200d-1f3ed","1f468-1f3fe-200d-1f3ed","1f468-1f3ff-200d-1f3ed"],a:"4.0"},{n:["woman factory worker","female-factory-worker"],u:"1f469-200d-1f3ed",v:["1f469-1f3fb-200d-1f3ed","1f469-1f3fc-200d-1f3ed","1f469-1f3fd-200d-1f3ed","1f469-1f3fe-200d-1f3ed","1f469-1f3ff-200d-1f3ed"],a:"4.0"},{n:["office worker"],u:"1f9d1-200d-1f4bc",v:["1f9d1-1f3fb-200d-1f4bc","1f9d1-1f3fc-200d-1f4bc","1f9d1-1f3fd-200d-1f4bc","1f9d1-1f3fe-200d-1f4bc","1f9d1-1f3ff-200d-1f4bc"],a:"12.1"},{n:["man office worker","male-office-worker"],u:"1f468-200d-1f4bc",v:["1f468-1f3fb-200d-1f4bc","1f468-1f3fc-200d-1f4bc","1f468-1f3fd-200d-1f4bc","1f468-1f3fe-200d-1f4bc","1f468-1f3ff-200d-1f4bc"],a:"4.0"},{n:["woman office worker","female-office-worker"],u:"1f469-200d-1f4bc",v:["1f469-1f3fb-200d-1f4bc","1f469-1f3fc-200d-1f4bc","1f469-1f3fd-200d-1f4bc","1f469-1f3fe-200d-1f4bc","1f469-1f3ff-200d-1f4bc"],a:"4.0"},{n:["scientist"],u:"1f9d1-200d-1f52c",v:["1f9d1-1f3fb-200d-1f52c","1f9d1-1f3fc-200d-1f52c","1f9d1-1f3fd-200d-1f52c","1f9d1-1f3fe-200d-1f52c","1f9d1-1f3ff-200d-1f52c"],a:"12.1"},{n:["man scientist","male-scientist"],u:"1f468-200d-1f52c",v:["1f468-1f3fb-200d-1f52c","1f468-1f3fc-200d-1f52c","1f468-1f3fd-200d-1f52c","1f468-1f3fe-200d-1f52c","1f468-1f3ff-200d-1f52c"],a:"4.0"},{n:["woman scientist","female-scientist"],u:"1f469-200d-1f52c",v:["1f469-1f3fb-200d-1f52c","1f469-1f3fc-200d-1f52c","1f469-1f3fd-200d-1f52c","1f469-1f3fe-200d-1f52c","1f469-1f3ff-200d-1f52c"],a:"4.0"},{n:["technologist"],u:"1f9d1-200d-1f4bb",v:["1f9d1-1f3fb-200d-1f4bb","1f9d1-1f3fc-200d-1f4bb","1f9d1-1f3fd-200d-1f4bb","1f9d1-1f3fe-200d-1f4bb","1f9d1-1f3ff-200d-1f4bb"],a:"12.1"},{n:["man technologist","male-technologist"],u:"1f468-200d-1f4bb",v:["1f468-1f3fb-200d-1f4bb","1f468-1f3fc-200d-1f4bb","1f468-1f3fd-200d-1f4bb","1f468-1f3fe-200d-1f4bb","1f468-1f3ff-200d-1f4bb"],a:"4.0"},{n:["woman technologist","female-technologist"],u:"1f469-200d-1f4bb",v:["1f469-1f3fb-200d-1f4bb","1f469-1f3fc-200d-1f4bb","1f469-1f3fd-200d-1f4bb","1f469-1f3fe-200d-1f4bb","1f469-1f3ff-200d-1f4bb"],a:"4.0"},{n:["singer"],u:"1f9d1-200d-1f3a4",v:["1f9d1-1f3fb-200d-1f3a4","1f9d1-1f3fc-200d-1f3a4","1f9d1-1f3fd-200d-1f3a4","1f9d1-1f3fe-200d-1f3a4","1f9d1-1f3ff-200d-1f3a4"],a:"12.1"},{n:["man singer","male-singer"],u:"1f468-200d-1f3a4",v:["1f468-1f3fb-200d-1f3a4","1f468-1f3fc-200d-1f3a4","1f468-1f3fd-200d-1f3a4","1f468-1f3fe-200d-1f3a4","1f468-1f3ff-200d-1f3a4"],a:"4.0"},{n:["woman singer","female-singer"],u:"1f469-200d-1f3a4",v:["1f469-1f3fb-200d-1f3a4","1f469-1f3fc-200d-1f3a4","1f469-1f3fd-200d-1f3a4","1f469-1f3fe-200d-1f3a4","1f469-1f3ff-200d-1f3a4"],a:"4.0"},{n:["artist"],u:"1f9d1-200d-1f3a8",v:["1f9d1-1f3fb-200d-1f3a8","1f9d1-1f3fc-200d-1f3a8","1f9d1-1f3fd-200d-1f3a8","1f9d1-1f3fe-200d-1f3a8","1f9d1-1f3ff-200d-1f3a8"],a:"12.1"},{n:["man artist","male-artist"],u:"1f468-200d-1f3a8",v:["1f468-1f3fb-200d-1f3a8","1f468-1f3fc-200d-1f3a8","1f468-1f3fd-200d-1f3a8","1f468-1f3fe-200d-1f3a8","1f468-1f3ff-200d-1f3a8"],a:"4.0"},{n:["woman artist","female-artist"],u:"1f469-200d-1f3a8",v:["1f469-1f3fb-200d-1f3a8","1f469-1f3fc-200d-1f3a8","1f469-1f3fd-200d-1f3a8","1f469-1f3fe-200d-1f3a8","1f469-1f3ff-200d-1f3a8"],a:"4.0"},{n:["pilot"],u:"1f9d1-200d-2708-fe0f",v:["1f9d1-1f3fb-200d-2708-fe0f","1f9d1-1f3fc-200d-2708-fe0f","1f9d1-1f3fd-200d-2708-fe0f","1f9d1-1f3fe-200d-2708-fe0f","1f9d1-1f3ff-200d-2708-fe0f"],a:"12.1"},{n:["man pilot","male-pilot"],u:"1f468-200d-2708-fe0f",v:["1f468-1f3fb-200d-2708-fe0f","1f468-1f3fc-200d-2708-fe0f","1f468-1f3fd-200d-2708-fe0f","1f468-1f3fe-200d-2708-fe0f","1f468-1f3ff-200d-2708-fe0f"],a:"4.0"},{n:["woman pilot","female-pilot"],u:"1f469-200d-2708-fe0f",v:["1f469-1f3fb-200d-2708-fe0f","1f469-1f3fc-200d-2708-fe0f","1f469-1f3fd-200d-2708-fe0f","1f469-1f3fe-200d-2708-fe0f","1f469-1f3ff-200d-2708-fe0f"],a:"4.0"},{n:["astronaut"],u:"1f9d1-200d-1f680",v:["1f9d1-1f3fb-200d-1f680","1f9d1-1f3fc-200d-1f680","1f9d1-1f3fd-200d-1f680","1f9d1-1f3fe-200d-1f680","1f9d1-1f3ff-200d-1f680"],a:"12.1"},{n:["man astronaut","male-astronaut"],u:"1f468-200d-1f680",v:["1f468-1f3fb-200d-1f680","1f468-1f3fc-200d-1f680","1f468-1f3fd-200d-1f680","1f468-1f3fe-200d-1f680","1f468-1f3ff-200d-1f680"],a:"4.0"},{n:["woman astronaut","female-astronaut"],u:"1f469-200d-1f680",v:["1f469-1f3fb-200d-1f680","1f469-1f3fc-200d-1f680","1f469-1f3fd-200d-1f680","1f469-1f3fe-200d-1f680","1f469-1f3ff-200d-1f680"],a:"4.0"},{n:["firefighter"],u:"1f9d1-200d-1f692",v:["1f9d1-1f3fb-200d-1f692","1f9d1-1f3fc-200d-1f692","1f9d1-1f3fd-200d-1f692","1f9d1-1f3fe-200d-1f692","1f9d1-1f3ff-200d-1f692"],a:"12.1"},{n:["man firefighter","male-firefighter"],u:"1f468-200d-1f692",v:["1f468-1f3fb-200d-1f692","1f468-1f3fc-200d-1f692","1f468-1f3fd-200d-1f692","1f468-1f3fe-200d-1f692","1f468-1f3ff-200d-1f692"],a:"4.0"},{n:["woman firefighter","female-firefighter"],u:"1f469-200d-1f692",v:["1f469-1f3fb-200d-1f692","1f469-1f3fc-200d-1f692","1f469-1f3fd-200d-1f692","1f469-1f3fe-200d-1f692","1f469-1f3ff-200d-1f692"],a:"4.0"},{n:["cop","police officer"],u:"1f46e",v:["1f46e-1f3fb","1f46e-1f3fc","1f46e-1f3fd","1f46e-1f3fe","1f46e-1f3ff"],a:"0.6"},{n:["man police officer","male-police-officer"],u:"1f46e-200d-2642-fe0f",v:["1f46e-1f3fb-200d-2642-fe0f","1f46e-1f3fc-200d-2642-fe0f","1f46e-1f3fd-200d-2642-fe0f","1f46e-1f3fe-200d-2642-fe0f","1f46e-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman police officer","female-police-officer"],u:"1f46e-200d-2640-fe0f",v:["1f46e-1f3fb-200d-2640-fe0f","1f46e-1f3fc-200d-2640-fe0f","1f46e-1f3fd-200d-2640-fe0f","1f46e-1f3fe-200d-2640-fe0f","1f46e-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["detective","sleuth or spy"],u:"1f575-fe0f",v:["1f575-1f3fb","1f575-1f3fc","1f575-1f3fd","1f575-1f3fe","1f575-1f3ff"],a:"0.7"},{n:["man detective","male-detective"],u:"1f575-fe0f-200d-2642-fe0f",v:["1f575-1f3fb-200d-2642-fe0f","1f575-1f3fc-200d-2642-fe0f","1f575-1f3fd-200d-2642-fe0f","1f575-1f3fe-200d-2642-fe0f","1f575-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman detective","female-detective"],u:"1f575-fe0f-200d-2640-fe0f",v:["1f575-1f3fb-200d-2640-fe0f","1f575-1f3fc-200d-2640-fe0f","1f575-1f3fd-200d-2640-fe0f","1f575-1f3fe-200d-2640-fe0f","1f575-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["guardsman"],u:"1f482",v:["1f482-1f3fb","1f482-1f3fc","1f482-1f3fd","1f482-1f3fe","1f482-1f3ff"],a:"0.6"},{n:["man guard","male-guard"],u:"1f482-200d-2642-fe0f",v:["1f482-1f3fb-200d-2642-fe0f","1f482-1f3fc-200d-2642-fe0f","1f482-1f3fd-200d-2642-fe0f","1f482-1f3fe-200d-2642-fe0f","1f482-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman guard","female-guard"],u:"1f482-200d-2640-fe0f",v:["1f482-1f3fb-200d-2640-fe0f","1f482-1f3fc-200d-2640-fe0f","1f482-1f3fd-200d-2640-fe0f","1f482-1f3fe-200d-2640-fe0f","1f482-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["ninja"],u:"1f977",v:["1f977-1f3fb","1f977-1f3fc","1f977-1f3fd","1f977-1f3fe","1f977-1f3ff"],a:"13.0"},{n:["construction worker"],u:"1f477",v:["1f477-1f3fb","1f477-1f3fc","1f477-1f3fd","1f477-1f3fe","1f477-1f3ff"],a:"0.6"},{n:["man construction worker","male-construction-worker"],u:"1f477-200d-2642-fe0f",v:["1f477-1f3fb-200d-2642-fe0f","1f477-1f3fc-200d-2642-fe0f","1f477-1f3fd-200d-2642-fe0f","1f477-1f3fe-200d-2642-fe0f","1f477-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman construction worker","female-construction-worker"],u:"1f477-200d-2640-fe0f",v:["1f477-1f3fb-200d-2640-fe0f","1f477-1f3fc-200d-2640-fe0f","1f477-1f3fd-200d-2640-fe0f","1f477-1f3fe-200d-2640-fe0f","1f477-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["person with crown"],u:"1fac5",v:["1fac5-1f3fb","1fac5-1f3fc","1fac5-1f3fd","1fac5-1f3fe","1fac5-1f3ff"],a:"14.0"},{n:["prince"],u:"1f934",v:["1f934-1f3fb","1f934-1f3fc","1f934-1f3fd","1f934-1f3fe","1f934-1f3ff"],a:"3.0"},{n:["princess"],u:"1f478",v:["1f478-1f3fb","1f478-1f3fc","1f478-1f3fd","1f478-1f3fe","1f478-1f3ff"],a:"0.6"},{n:["man with turban"],u:"1f473",v:["1f473-1f3fb","1f473-1f3fc","1f473-1f3fd","1f473-1f3fe","1f473-1f3ff"],a:"0.6"},{n:["man wearing turban","man-wearing-turban"],u:"1f473-200d-2642-fe0f",v:["1f473-1f3fb-200d-2642-fe0f","1f473-1f3fc-200d-2642-fe0f","1f473-1f3fd-200d-2642-fe0f","1f473-1f3fe-200d-2642-fe0f","1f473-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman wearing turban","woman-wearing-turban"],u:"1f473-200d-2640-fe0f",v:["1f473-1f3fb-200d-2640-fe0f","1f473-1f3fc-200d-2640-fe0f","1f473-1f3fd-200d-2640-fe0f","1f473-1f3fe-200d-2640-fe0f","1f473-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["man with gua pi mao"],u:"1f472",v:["1f472-1f3fb","1f472-1f3fc","1f472-1f3fd","1f472-1f3fe","1f472-1f3ff"],a:"0.6"},{n:["person with headscarf"],u:"1f9d5",v:["1f9d5-1f3fb","1f9d5-1f3fc","1f9d5-1f3fd","1f9d5-1f3fe","1f9d5-1f3ff"],a:"5.0"},{n:["man in tuxedo","person in tuxedo"],u:"1f935",v:["1f935-1f3fb","1f935-1f3fc","1f935-1f3fd","1f935-1f3fe","1f935-1f3ff"],a:"3.0"},{n:["man in tuxedo"],u:"1f935-200d-2642-fe0f",v:["1f935-1f3fb-200d-2642-fe0f","1f935-1f3fc-200d-2642-fe0f","1f935-1f3fd-200d-2642-fe0f","1f935-1f3fe-200d-2642-fe0f","1f935-1f3ff-200d-2642-fe0f"],a:"13.0"},{n:["woman in tuxedo"],u:"1f935-200d-2640-fe0f",v:["1f935-1f3fb-200d-2640-fe0f","1f935-1f3fc-200d-2640-fe0f","1f935-1f3fd-200d-2640-fe0f","1f935-1f3fe-200d-2640-fe0f","1f935-1f3ff-200d-2640-fe0f"],a:"13.0"},{n:["bride with veil"],u:"1f470",v:["1f470-1f3fb","1f470-1f3fc","1f470-1f3fd","1f470-1f3fe","1f470-1f3ff"],a:"0.6"},{n:["man with veil"],u:"1f470-200d-2642-fe0f",v:["1f470-1f3fb-200d-2642-fe0f","1f470-1f3fc-200d-2642-fe0f","1f470-1f3fd-200d-2642-fe0f","1f470-1f3fe-200d-2642-fe0f","1f470-1f3ff-200d-2642-fe0f"],a:"13.0"},{n:["woman with veil"],u:"1f470-200d-2640-fe0f",v:["1f470-1f3fb-200d-2640-fe0f","1f470-1f3fc-200d-2640-fe0f","1f470-1f3fd-200d-2640-fe0f","1f470-1f3fe-200d-2640-fe0f","1f470-1f3ff-200d-2640-fe0f"],a:"13.0"},{n:["pregnant woman"],u:"1f930",v:["1f930-1f3fb","1f930-1f3fc","1f930-1f3fd","1f930-1f3fe","1f930-1f3ff"],a:"3.0"},{n:["pregnant man"],u:"1fac3",v:["1fac3-1f3fb","1fac3-1f3fc","1fac3-1f3fd","1fac3-1f3fe","1fac3-1f3ff"],a:"14.0"},{n:["pregnant person"],u:"1fac4",v:["1fac4-1f3fb","1fac4-1f3fc","1fac4-1f3fd","1fac4-1f3fe","1fac4-1f3ff"],a:"14.0"},{n:["breast-feeding"],u:"1f931",v:["1f931-1f3fb","1f931-1f3fc","1f931-1f3fd","1f931-1f3fe","1f931-1f3ff"],a:"5.0"},{n:["woman feeding baby"],u:"1f469-200d-1f37c",v:["1f469-1f3fb-200d-1f37c","1f469-1f3fc-200d-1f37c","1f469-1f3fd-200d-1f37c","1f469-1f3fe-200d-1f37c","1f469-1f3ff-200d-1f37c"],a:"13.0"},{n:["man feeding baby"],u:"1f468-200d-1f37c",v:["1f468-1f3fb-200d-1f37c","1f468-1f3fc-200d-1f37c","1f468-1f3fd-200d-1f37c","1f468-1f3fe-200d-1f37c","1f468-1f3ff-200d-1f37c"],a:"13.0"},{n:["person feeding baby"],u:"1f9d1-200d-1f37c",v:["1f9d1-1f3fb-200d-1f37c","1f9d1-1f3fc-200d-1f37c","1f9d1-1f3fd-200d-1f37c","1f9d1-1f3fe-200d-1f37c","1f9d1-1f3ff-200d-1f37c"],a:"13.0"},{n:["angel","baby angel"],u:"1f47c",v:["1f47c-1f3fb","1f47c-1f3fc","1f47c-1f3fd","1f47c-1f3fe","1f47c-1f3ff"],a:"0.6"},{n:["santa","father christmas"],u:"1f385",v:["1f385-1f3fb","1f385-1f3fc","1f385-1f3fd","1f385-1f3fe","1f385-1f3ff"],a:"0.6"},{n:["mrs claus","mother christmas"],u:"1f936",v:["1f936-1f3fb","1f936-1f3fc","1f936-1f3fd","1f936-1f3fe","1f936-1f3ff"],a:"3.0"},{n:["mx claus"],u:"1f9d1-200d-1f384",v:["1f9d1-1f3fb-200d-1f384","1f9d1-1f3fc-200d-1f384","1f9d1-1f3fd-200d-1f384","1f9d1-1f3fe-200d-1f384","1f9d1-1f3ff-200d-1f384"],a:"13.0"},{n:["superhero"],u:"1f9b8",v:["1f9b8-1f3fb","1f9b8-1f3fc","1f9b8-1f3fd","1f9b8-1f3fe","1f9b8-1f3ff"],a:"11.0"},{n:["man superhero","male superhero"],u:"1f9b8-200d-2642-fe0f",v:["1f9b8-1f3fb-200d-2642-fe0f","1f9b8-1f3fc-200d-2642-fe0f","1f9b8-1f3fd-200d-2642-fe0f","1f9b8-1f3fe-200d-2642-fe0f","1f9b8-1f3ff-200d-2642-fe0f"],a:"11.0"},{n:["woman superhero","female superhero"],u:"1f9b8-200d-2640-fe0f",v:["1f9b8-1f3fb-200d-2640-fe0f","1f9b8-1f3fc-200d-2640-fe0f","1f9b8-1f3fd-200d-2640-fe0f","1f9b8-1f3fe-200d-2640-fe0f","1f9b8-1f3ff-200d-2640-fe0f"],a:"11.0"},{n:["supervillain"],u:"1f9b9",v:["1f9b9-1f3fb","1f9b9-1f3fc","1f9b9-1f3fd","1f9b9-1f3fe","1f9b9-1f3ff"],a:"11.0"},{n:["man supervillain","male supervillain"],u:"1f9b9-200d-2642-fe0f",v:["1f9b9-1f3fb-200d-2642-fe0f","1f9b9-1f3fc-200d-2642-fe0f","1f9b9-1f3fd-200d-2642-fe0f","1f9b9-1f3fe-200d-2642-fe0f","1f9b9-1f3ff-200d-2642-fe0f"],a:"11.0"},{n:["woman supervillain","female supervillain"],u:"1f9b9-200d-2640-fe0f",v:["1f9b9-1f3fb-200d-2640-fe0f","1f9b9-1f3fc-200d-2640-fe0f","1f9b9-1f3fd-200d-2640-fe0f","1f9b9-1f3fe-200d-2640-fe0f","1f9b9-1f3ff-200d-2640-fe0f"],a:"11.0"},{n:["mage"],u:"1f9d9",v:["1f9d9-1f3fb","1f9d9-1f3fc","1f9d9-1f3fd","1f9d9-1f3fe","1f9d9-1f3ff"],a:"5.0"},{n:["man mage","male mage"],u:"1f9d9-200d-2642-fe0f",v:["1f9d9-1f3fb-200d-2642-fe0f","1f9d9-1f3fc-200d-2642-fe0f","1f9d9-1f3fd-200d-2642-fe0f","1f9d9-1f3fe-200d-2642-fe0f","1f9d9-1f3ff-200d-2642-fe0f"],a:"5.0"},{n:["woman mage","female mage"],u:"1f9d9-200d-2640-fe0f",v:["1f9d9-1f3fb-200d-2640-fe0f","1f9d9-1f3fc-200d-2640-fe0f","1f9d9-1f3fd-200d-2640-fe0f","1f9d9-1f3fe-200d-2640-fe0f","1f9d9-1f3ff-200d-2640-fe0f"],a:"5.0"},{n:["fairy"],u:"1f9da",v:["1f9da-1f3fb","1f9da-1f3fc","1f9da-1f3fd","1f9da-1f3fe","1f9da-1f3ff"],a:"5.0"},{n:["man fairy","male fairy"],u:"1f9da-200d-2642-fe0f",v:["1f9da-1f3fb-200d-2642-fe0f","1f9da-1f3fc-200d-2642-fe0f","1f9da-1f3fd-200d-2642-fe0f","1f9da-1f3fe-200d-2642-fe0f","1f9da-1f3ff-200d-2642-fe0f"],a:"5.0"},{n:["woman fairy","female fairy"],u:"1f9da-200d-2640-fe0f",v:["1f9da-1f3fb-200d-2640-fe0f","1f9da-1f3fc-200d-2640-fe0f","1f9da-1f3fd-200d-2640-fe0f","1f9da-1f3fe-200d-2640-fe0f","1f9da-1f3ff-200d-2640-fe0f"],a:"5.0"},{n:["vampire"],u:"1f9db",v:["1f9db-1f3fb","1f9db-1f3fc","1f9db-1f3fd","1f9db-1f3fe","1f9db-1f3ff"],a:"5.0"},{n:["man vampire","male vampire"],u:"1f9db-200d-2642-fe0f",v:["1f9db-1f3fb-200d-2642-fe0f","1f9db-1f3fc-200d-2642-fe0f","1f9db-1f3fd-200d-2642-fe0f","1f9db-1f3fe-200d-2642-fe0f","1f9db-1f3ff-200d-2642-fe0f"],a:"5.0"},{n:["woman vampire","female vampire"],u:"1f9db-200d-2640-fe0f",v:["1f9db-1f3fb-200d-2640-fe0f","1f9db-1f3fc-200d-2640-fe0f","1f9db-1f3fd-200d-2640-fe0f","1f9db-1f3fe-200d-2640-fe0f","1f9db-1f3ff-200d-2640-fe0f"],a:"5.0"},{n:["merperson"],u:"1f9dc",v:["1f9dc-1f3fb","1f9dc-1f3fc","1f9dc-1f3fd","1f9dc-1f3fe","1f9dc-1f3ff"],a:"5.0"},{n:["merman"],u:"1f9dc-200d-2642-fe0f",v:["1f9dc-1f3fb-200d-2642-fe0f","1f9dc-1f3fc-200d-2642-fe0f","1f9dc-1f3fd-200d-2642-fe0f","1f9dc-1f3fe-200d-2642-fe0f","1f9dc-1f3ff-200d-2642-fe0f"],a:"5.0"},{n:["mermaid"],u:"1f9dc-200d-2640-fe0f",v:["1f9dc-1f3fb-200d-2640-fe0f","1f9dc-1f3fc-200d-2640-fe0f","1f9dc-1f3fd-200d-2640-fe0f","1f9dc-1f3fe-200d-2640-fe0f","1f9dc-1f3ff-200d-2640-fe0f"],a:"5.0"},{n:["elf"],u:"1f9dd",v:["1f9dd-1f3fb","1f9dd-1f3fc","1f9dd-1f3fd","1f9dd-1f3fe","1f9dd-1f3ff"],a:"5.0"},{n:["man elf","male elf"],u:"1f9dd-200d-2642-fe0f",v:["1f9dd-1f3fb-200d-2642-fe0f","1f9dd-1f3fc-200d-2642-fe0f","1f9dd-1f3fd-200d-2642-fe0f","1f9dd-1f3fe-200d-2642-fe0f","1f9dd-1f3ff-200d-2642-fe0f"],a:"5.0"},{n:["woman elf","female elf"],u:"1f9dd-200d-2640-fe0f",v:["1f9dd-1f3fb-200d-2640-fe0f","1f9dd-1f3fc-200d-2640-fe0f","1f9dd-1f3fd-200d-2640-fe0f","1f9dd-1f3fe-200d-2640-fe0f","1f9dd-1f3ff-200d-2640-fe0f"],a:"5.0"},{n:["genie"],u:"1f9de",a:"5.0"},{n:["man genie","male genie"],u:"1f9de-200d-2642-fe0f",a:"5.0"},{n:["woman genie","female genie"],u:"1f9de-200d-2640-fe0f",a:"5.0"},{n:["zombie"],u:"1f9df",a:"5.0"},{n:["man zombie","male zombie"],u:"1f9df-200d-2642-fe0f",a:"5.0"},{n:["woman zombie","female zombie"],u:"1f9df-200d-2640-fe0f",a:"5.0"},{n:["troll"],u:"1f9cc",a:"14.0"},{n:["massage","face massage"],u:"1f486",v:["1f486-1f3fb","1f486-1f3fc","1f486-1f3fd","1f486-1f3fe","1f486-1f3ff"],a:"0.6"},{n:["man getting massage","man-getting-massage"],u:"1f486-200d-2642-fe0f",v:["1f486-1f3fb-200d-2642-fe0f","1f486-1f3fc-200d-2642-fe0f","1f486-1f3fd-200d-2642-fe0f","1f486-1f3fe-200d-2642-fe0f","1f486-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman getting massage","woman-getting-massage"],u:"1f486-200d-2640-fe0f",v:["1f486-1f3fb-200d-2640-fe0f","1f486-1f3fc-200d-2640-fe0f","1f486-1f3fd-200d-2640-fe0f","1f486-1f3fe-200d-2640-fe0f","1f486-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["haircut"],u:"1f487",v:["1f487-1f3fb","1f487-1f3fc","1f487-1f3fd","1f487-1f3fe","1f487-1f3ff"],a:"0.6"},{n:["man getting haircut","man-getting-haircut"],u:"1f487-200d-2642-fe0f",v:["1f487-1f3fb-200d-2642-fe0f","1f487-1f3fc-200d-2642-fe0f","1f487-1f3fd-200d-2642-fe0f","1f487-1f3fe-200d-2642-fe0f","1f487-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman getting haircut","woman-getting-haircut"],u:"1f487-200d-2640-fe0f",v:["1f487-1f3fb-200d-2640-fe0f","1f487-1f3fc-200d-2640-fe0f","1f487-1f3fd-200d-2640-fe0f","1f487-1f3fe-200d-2640-fe0f","1f487-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["walking","pedestrian"],u:"1f6b6",v:["1f6b6-1f3fb","1f6b6-1f3fc","1f6b6-1f3fd","1f6b6-1f3fe","1f6b6-1f3ff"],a:"0.6"},{n:["man walking","man-walking"],u:"1f6b6-200d-2642-fe0f",v:["1f6b6-1f3fb-200d-2642-fe0f","1f6b6-1f3fc-200d-2642-fe0f","1f6b6-1f3fd-200d-2642-fe0f","1f6b6-1f3fe-200d-2642-fe0f","1f6b6-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman walking","woman-walking"],u:"1f6b6-200d-2640-fe0f",v:["1f6b6-1f3fb-200d-2640-fe0f","1f6b6-1f3fc-200d-2640-fe0f","1f6b6-1f3fd-200d-2640-fe0f","1f6b6-1f3fe-200d-2640-fe0f","1f6b6-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["person walking facing right"],u:"1f6b6-200d-27a1-fe0f",v:["1f6b6-1f3fb-200d-27a1-fe0f","1f6b6-1f3fc-200d-27a1-fe0f","1f6b6-1f3fd-200d-27a1-fe0f","1f6b6-1f3fe-200d-27a1-fe0f","1f6b6-1f3ff-200d-27a1-fe0f"],a:"15.1"},{n:["woman walking facing right"],u:"1f6b6-200d-2640-fe0f-200d-27a1-fe0f",v:["1f6b6-1f3fb-200d-2640-fe0f-200d-27a1-fe0f","1f6b6-1f3fc-200d-2640-fe0f-200d-27a1-fe0f","1f6b6-1f3fd-200d-2640-fe0f-200d-27a1-fe0f","1f6b6-1f3fe-200d-2640-fe0f-200d-27a1-fe0f","1f6b6-1f3ff-200d-2640-fe0f-200d-27a1-fe0f"],a:"15.1"},{n:["man walking facing right"],u:"1f6b6-200d-2642-fe0f-200d-27a1-fe0f",v:["1f6b6-1f3fb-200d-2642-fe0f-200d-27a1-fe0f","1f6b6-1f3fc-200d-2642-fe0f-200d-27a1-fe0f","1f6b6-1f3fd-200d-2642-fe0f-200d-27a1-fe0f","1f6b6-1f3fe-200d-2642-fe0f-200d-27a1-fe0f","1f6b6-1f3ff-200d-2642-fe0f-200d-27a1-fe0f"],a:"15.1"},{n:["standing person"],u:"1f9cd",v:["1f9cd-1f3fb","1f9cd-1f3fc","1f9cd-1f3fd","1f9cd-1f3fe","1f9cd-1f3ff"],a:"12.0"},{n:["man standing"],u:"1f9cd-200d-2642-fe0f",v:["1f9cd-1f3fb-200d-2642-fe0f","1f9cd-1f3fc-200d-2642-fe0f","1f9cd-1f3fd-200d-2642-fe0f","1f9cd-1f3fe-200d-2642-fe0f","1f9cd-1f3ff-200d-2642-fe0f"],a:"12.0"},{n:["woman standing"],u:"1f9cd-200d-2640-fe0f",v:["1f9cd-1f3fb-200d-2640-fe0f","1f9cd-1f3fc-200d-2640-fe0f","1f9cd-1f3fd-200d-2640-fe0f","1f9cd-1f3fe-200d-2640-fe0f","1f9cd-1f3ff-200d-2640-fe0f"],a:"12.0"},{n:["kneeling person"],u:"1f9ce",v:["1f9ce-1f3fb","1f9ce-1f3fc","1f9ce-1f3fd","1f9ce-1f3fe","1f9ce-1f3ff"],a:"12.0"},{n:["man kneeling"],u:"1f9ce-200d-2642-fe0f",v:["1f9ce-1f3fb-200d-2642-fe0f","1f9ce-1f3fc-200d-2642-fe0f","1f9ce-1f3fd-200d-2642-fe0f","1f9ce-1f3fe-200d-2642-fe0f","1f9ce-1f3ff-200d-2642-fe0f"],a:"12.0"},{n:["woman kneeling"],u:"1f9ce-200d-2640-fe0f",v:["1f9ce-1f3fb-200d-2640-fe0f","1f9ce-1f3fc-200d-2640-fe0f","1f9ce-1f3fd-200d-2640-fe0f","1f9ce-1f3fe-200d-2640-fe0f","1f9ce-1f3ff-200d-2640-fe0f"],a:"12.0"},{n:["person kneeling facing right"],u:"1f9ce-200d-27a1-fe0f",v:["1f9ce-1f3fb-200d-27a1-fe0f","1f9ce-1f3fc-200d-27a1-fe0f","1f9ce-1f3fd-200d-27a1-fe0f","1f9ce-1f3fe-200d-27a1-fe0f","1f9ce-1f3ff-200d-27a1-fe0f"],a:"15.1"},{n:["woman kneeling facing right"],u:"1f9ce-200d-2640-fe0f-200d-27a1-fe0f",v:["1f9ce-1f3fb-200d-2640-fe0f-200d-27a1-fe0f","1f9ce-1f3fc-200d-2640-fe0f-200d-27a1-fe0f","1f9ce-1f3fd-200d-2640-fe0f-200d-27a1-fe0f","1f9ce-1f3fe-200d-2640-fe0f-200d-27a1-fe0f","1f9ce-1f3ff-200d-2640-fe0f-200d-27a1-fe0f"],a:"15.1"},{n:["man kneeling facing right"],u:"1f9ce-200d-2642-fe0f-200d-27a1-fe0f",v:["1f9ce-1f3fb-200d-2642-fe0f-200d-27a1-fe0f","1f9ce-1f3fc-200d-2642-fe0f-200d-27a1-fe0f","1f9ce-1f3fd-200d-2642-fe0f-200d-27a1-fe0f","1f9ce-1f3fe-200d-2642-fe0f-200d-27a1-fe0f","1f9ce-1f3ff-200d-2642-fe0f-200d-27a1-fe0f"],a:"15.1"},{n:["person with white cane","person with probing cane"],u:"1f9d1-200d-1f9af",v:["1f9d1-1f3fb-200d-1f9af","1f9d1-1f3fc-200d-1f9af","1f9d1-1f3fd-200d-1f9af","1f9d1-1f3fe-200d-1f9af","1f9d1-1f3ff-200d-1f9af"],a:"12.1"},{n:["person with white cane facing right"],u:"1f9d1-200d-1f9af-200d-27a1-fe0f",v:["1f9d1-1f3fb-200d-1f9af-200d-27a1-fe0f","1f9d1-1f3fc-200d-1f9af-200d-27a1-fe0f","1f9d1-1f3fd-200d-1f9af-200d-27a1-fe0f","1f9d1-1f3fe-200d-1f9af-200d-27a1-fe0f","1f9d1-1f3ff-200d-1f9af-200d-27a1-fe0f"],a:"15.1"},{n:["man with white cane","man with probing cane"],u:"1f468-200d-1f9af",v:["1f468-1f3fb-200d-1f9af","1f468-1f3fc-200d-1f9af","1f468-1f3fd-200d-1f9af","1f468-1f3fe-200d-1f9af","1f468-1f3ff-200d-1f9af"],a:"12.0"},{n:["man with white cane facing right"],u:"1f468-200d-1f9af-200d-27a1-fe0f",v:["1f468-1f3fb-200d-1f9af-200d-27a1-fe0f","1f468-1f3fc-200d-1f9af-200d-27a1-fe0f","1f468-1f3fd-200d-1f9af-200d-27a1-fe0f","1f468-1f3fe-200d-1f9af-200d-27a1-fe0f","1f468-1f3ff-200d-1f9af-200d-27a1-fe0f"],a:"15.1"},{n:["woman with white cane","woman with probing cane"],u:"1f469-200d-1f9af",v:["1f469-1f3fb-200d-1f9af","1f469-1f3fc-200d-1f9af","1f469-1f3fd-200d-1f9af","1f469-1f3fe-200d-1f9af","1f469-1f3ff-200d-1f9af"],a:"12.0"},{n:["woman with white cane facing right"],u:"1f469-200d-1f9af-200d-27a1-fe0f",v:["1f469-1f3fb-200d-1f9af-200d-27a1-fe0f","1f469-1f3fc-200d-1f9af-200d-27a1-fe0f","1f469-1f3fd-200d-1f9af-200d-27a1-fe0f","1f469-1f3fe-200d-1f9af-200d-27a1-fe0f","1f469-1f3ff-200d-1f9af-200d-27a1-fe0f"],a:"15.1"},{n:["person in motorized wheelchair"],u:"1f9d1-200d-1f9bc",v:["1f9d1-1f3fb-200d-1f9bc","1f9d1-1f3fc-200d-1f9bc","1f9d1-1f3fd-200d-1f9bc","1f9d1-1f3fe-200d-1f9bc","1f9d1-1f3ff-200d-1f9bc"],a:"12.1"},{n:["person in motorized wheelchair facing right"],u:"1f9d1-200d-1f9bc-200d-27a1-fe0f",v:["1f9d1-1f3fb-200d-1f9bc-200d-27a1-fe0f","1f9d1-1f3fc-200d-1f9bc-200d-27a1-fe0f","1f9d1-1f3fd-200d-1f9bc-200d-27a1-fe0f","1f9d1-1f3fe-200d-1f9bc-200d-27a1-fe0f","1f9d1-1f3ff-200d-1f9bc-200d-27a1-fe0f"],a:"15.1"},{n:["man in motorized wheelchair"],u:"1f468-200d-1f9bc",v:["1f468-1f3fb-200d-1f9bc","1f468-1f3fc-200d-1f9bc","1f468-1f3fd-200d-1f9bc","1f468-1f3fe-200d-1f9bc","1f468-1f3ff-200d-1f9bc"],a:"12.0"},{n:["man in motorized wheelchair facing right"],u:"1f468-200d-1f9bc-200d-27a1-fe0f",v:["1f468-1f3fb-200d-1f9bc-200d-27a1-fe0f","1f468-1f3fc-200d-1f9bc-200d-27a1-fe0f","1f468-1f3fd-200d-1f9bc-200d-27a1-fe0f","1f468-1f3fe-200d-1f9bc-200d-27a1-fe0f","1f468-1f3ff-200d-1f9bc-200d-27a1-fe0f"],a:"15.1"},{n:["woman in motorized wheelchair"],u:"1f469-200d-1f9bc",v:["1f469-1f3fb-200d-1f9bc","1f469-1f3fc-200d-1f9bc","1f469-1f3fd-200d-1f9bc","1f469-1f3fe-200d-1f9bc","1f469-1f3ff-200d-1f9bc"],a:"12.0"},{n:["woman in motorized wheelchair facing right"],u:"1f469-200d-1f9bc-200d-27a1-fe0f",v:["1f469-1f3fb-200d-1f9bc-200d-27a1-fe0f","1f469-1f3fc-200d-1f9bc-200d-27a1-fe0f","1f469-1f3fd-200d-1f9bc-200d-27a1-fe0f","1f469-1f3fe-200d-1f9bc-200d-27a1-fe0f","1f469-1f3ff-200d-1f9bc-200d-27a1-fe0f"],a:"15.1"},{n:["person in manual wheelchair"],u:"1f9d1-200d-1f9bd",v:["1f9d1-1f3fb-200d-1f9bd","1f9d1-1f3fc-200d-1f9bd","1f9d1-1f3fd-200d-1f9bd","1f9d1-1f3fe-200d-1f9bd","1f9d1-1f3ff-200d-1f9bd"],a:"12.1"},{n:["person in manual wheelchair facing right"],u:"1f9d1-200d-1f9bd-200d-27a1-fe0f",v:["1f9d1-1f3fb-200d-1f9bd-200d-27a1-fe0f","1f9d1-1f3fc-200d-1f9bd-200d-27a1-fe0f","1f9d1-1f3fd-200d-1f9bd-200d-27a1-fe0f","1f9d1-1f3fe-200d-1f9bd-200d-27a1-fe0f","1f9d1-1f3ff-200d-1f9bd-200d-27a1-fe0f"],a:"15.1"},{n:["man in manual wheelchair"],u:"1f468-200d-1f9bd",v:["1f468-1f3fb-200d-1f9bd","1f468-1f3fc-200d-1f9bd","1f468-1f3fd-200d-1f9bd","1f468-1f3fe-200d-1f9bd","1f468-1f3ff-200d-1f9bd"],a:"12.0"},{n:["man in manual wheelchair facing right"],u:"1f468-200d-1f9bd-200d-27a1-fe0f",v:["1f468-1f3fb-200d-1f9bd-200d-27a1-fe0f","1f468-1f3fc-200d-1f9bd-200d-27a1-fe0f","1f468-1f3fd-200d-1f9bd-200d-27a1-fe0f","1f468-1f3fe-200d-1f9bd-200d-27a1-fe0f","1f468-1f3ff-200d-1f9bd-200d-27a1-fe0f"],a:"15.1"},{n:["woman in manual wheelchair"],u:"1f469-200d-1f9bd",v:["1f469-1f3fb-200d-1f9bd","1f469-1f3fc-200d-1f9bd","1f469-1f3fd-200d-1f9bd","1f469-1f3fe-200d-1f9bd","1f469-1f3ff-200d-1f9bd"],a:"12.0"},{n:["woman in manual wheelchair facing right"],u:"1f469-200d-1f9bd-200d-27a1-fe0f",v:["1f469-1f3fb-200d-1f9bd-200d-27a1-fe0f","1f469-1f3fc-200d-1f9bd-200d-27a1-fe0f","1f469-1f3fd-200d-1f9bd-200d-27a1-fe0f","1f469-1f3fe-200d-1f9bd-200d-27a1-fe0f","1f469-1f3ff-200d-1f9bd-200d-27a1-fe0f"],a:"15.1"},{n:["runner","running"],u:"1f3c3",v:["1f3c3-1f3fb","1f3c3-1f3fc","1f3c3-1f3fd","1f3c3-1f3fe","1f3c3-1f3ff"],a:"0.6"},{n:["man running","man-running"],u:"1f3c3-200d-2642-fe0f",v:["1f3c3-1f3fb-200d-2642-fe0f","1f3c3-1f3fc-200d-2642-fe0f","1f3c3-1f3fd-200d-2642-fe0f","1f3c3-1f3fe-200d-2642-fe0f","1f3c3-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman running","woman-running"],u:"1f3c3-200d-2640-fe0f",v:["1f3c3-1f3fb-200d-2640-fe0f","1f3c3-1f3fc-200d-2640-fe0f","1f3c3-1f3fd-200d-2640-fe0f","1f3c3-1f3fe-200d-2640-fe0f","1f3c3-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["person running facing right"],u:"1f3c3-200d-27a1-fe0f",v:["1f3c3-1f3fb-200d-27a1-fe0f","1f3c3-1f3fc-200d-27a1-fe0f","1f3c3-1f3fd-200d-27a1-fe0f","1f3c3-1f3fe-200d-27a1-fe0f","1f3c3-1f3ff-200d-27a1-fe0f"],a:"15.1"},{n:["woman running facing right"],u:"1f3c3-200d-2640-fe0f-200d-27a1-fe0f",v:["1f3c3-1f3fb-200d-2640-fe0f-200d-27a1-fe0f","1f3c3-1f3fc-200d-2640-fe0f-200d-27a1-fe0f","1f3c3-1f3fd-200d-2640-fe0f-200d-27a1-fe0f","1f3c3-1f3fe-200d-2640-fe0f-200d-27a1-fe0f","1f3c3-1f3ff-200d-2640-fe0f-200d-27a1-fe0f"],a:"15.1"},{n:["man running facing right"],u:"1f3c3-200d-2642-fe0f-200d-27a1-fe0f",v:["1f3c3-1f3fb-200d-2642-fe0f-200d-27a1-fe0f","1f3c3-1f3fc-200d-2642-fe0f-200d-27a1-fe0f","1f3c3-1f3fd-200d-2642-fe0f-200d-27a1-fe0f","1f3c3-1f3fe-200d-2642-fe0f-200d-27a1-fe0f","1f3c3-1f3ff-200d-2642-fe0f-200d-27a1-fe0f"],a:"15.1"},{n:["dancer"],u:"1f483",v:["1f483-1f3fb","1f483-1f3fc","1f483-1f3fd","1f483-1f3fe","1f483-1f3ff"],a:"0.6"},{n:["man dancing"],u:"1f57a",v:["1f57a-1f3fb","1f57a-1f3fc","1f57a-1f3fd","1f57a-1f3fe","1f57a-1f3ff"],a:"3.0"},{n:["person in suit levitating","man in business suit levitating"],u:"1f574-fe0f",v:["1f574-1f3fb","1f574-1f3fc","1f574-1f3fd","1f574-1f3fe","1f574-1f3ff"],a:"0.7"},{n:["dancers","woman with bunny ears"],u:"1f46f",a:"0.6"},{n:["men with bunny ears","men-with-bunny-ears-partying","man-with-bunny-ears-partying"],u:"1f46f-200d-2642-fe0f",a:"4.0"},{n:["women with bunny ears","women-with-bunny-ears-partying","woman-with-bunny-ears-partying"],u:"1f46f-200d-2640-fe0f",a:"4.0"},{n:["person in steamy room"],u:"1f9d6",v:["1f9d6-1f3fb","1f9d6-1f3fc","1f9d6-1f3fd","1f9d6-1f3fe","1f9d6-1f3ff"],a:"5.0"},{n:["man in steamy room"],u:"1f9d6-200d-2642-fe0f",v:["1f9d6-1f3fb-200d-2642-fe0f","1f9d6-1f3fc-200d-2642-fe0f","1f9d6-1f3fd-200d-2642-fe0f","1f9d6-1f3fe-200d-2642-fe0f","1f9d6-1f3ff-200d-2642-fe0f"],a:"5.0"},{n:["woman in steamy room"],u:"1f9d6-200d-2640-fe0f",v:["1f9d6-1f3fb-200d-2640-fe0f","1f9d6-1f3fc-200d-2640-fe0f","1f9d6-1f3fd-200d-2640-fe0f","1f9d6-1f3fe-200d-2640-fe0f","1f9d6-1f3ff-200d-2640-fe0f"],a:"5.0"},{n:["person climbing"],u:"1f9d7",v:["1f9d7-1f3fb","1f9d7-1f3fc","1f9d7-1f3fd","1f9d7-1f3fe","1f9d7-1f3ff"],a:"5.0"},{n:["man climbing"],u:"1f9d7-200d-2642-fe0f",v:["1f9d7-1f3fb-200d-2642-fe0f","1f9d7-1f3fc-200d-2642-fe0f","1f9d7-1f3fd-200d-2642-fe0f","1f9d7-1f3fe-200d-2642-fe0f","1f9d7-1f3ff-200d-2642-fe0f"],a:"5.0"},{n:["woman climbing"],u:"1f9d7-200d-2640-fe0f",v:["1f9d7-1f3fb-200d-2640-fe0f","1f9d7-1f3fc-200d-2640-fe0f","1f9d7-1f3fd-200d-2640-fe0f","1f9d7-1f3fe-200d-2640-fe0f","1f9d7-1f3ff-200d-2640-fe0f"],a:"5.0"},{n:["fencer"],u:"1f93a",a:"3.0"},{n:["horse racing"],u:"1f3c7",v:["1f3c7-1f3fb","1f3c7-1f3fc","1f3c7-1f3fd","1f3c7-1f3fe","1f3c7-1f3ff"],a:"1.0"},{n:["skier"],u:"26f7-fe0f",a:"0.7"},{n:["snowboarder"],u:"1f3c2",v:["1f3c2-1f3fb","1f3c2-1f3fc","1f3c2-1f3fd","1f3c2-1f3fe","1f3c2-1f3ff"],a:"0.6"},{n:["golfer","person golfing"],u:"1f3cc-fe0f",v:["1f3cc-1f3fb","1f3cc-1f3fc","1f3cc-1f3fd","1f3cc-1f3fe","1f3cc-1f3ff"],a:"0.7"},{n:["man golfing","man-golfing"],u:"1f3cc-fe0f-200d-2642-fe0f",v:["1f3cc-1f3fb-200d-2642-fe0f","1f3cc-1f3fc-200d-2642-fe0f","1f3cc-1f3fd-200d-2642-fe0f","1f3cc-1f3fe-200d-2642-fe0f","1f3cc-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman golfing","woman-golfing"],u:"1f3cc-fe0f-200d-2640-fe0f",v:["1f3cc-1f3fb-200d-2640-fe0f","1f3cc-1f3fc-200d-2640-fe0f","1f3cc-1f3fd-200d-2640-fe0f","1f3cc-1f3fe-200d-2640-fe0f","1f3cc-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["surfer"],u:"1f3c4",v:["1f3c4-1f3fb","1f3c4-1f3fc","1f3c4-1f3fd","1f3c4-1f3fe","1f3c4-1f3ff"],a:"0.6"},{n:["man surfing","man-surfing"],u:"1f3c4-200d-2642-fe0f",v:["1f3c4-1f3fb-200d-2642-fe0f","1f3c4-1f3fc-200d-2642-fe0f","1f3c4-1f3fd-200d-2642-fe0f","1f3c4-1f3fe-200d-2642-fe0f","1f3c4-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman surfing","woman-surfing"],u:"1f3c4-200d-2640-fe0f",v:["1f3c4-1f3fb-200d-2640-fe0f","1f3c4-1f3fc-200d-2640-fe0f","1f3c4-1f3fd-200d-2640-fe0f","1f3c4-1f3fe-200d-2640-fe0f","1f3c4-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["rowboat"],u:"1f6a3",v:["1f6a3-1f3fb","1f6a3-1f3fc","1f6a3-1f3fd","1f6a3-1f3fe","1f6a3-1f3ff"],a:"1.0"},{n:["man rowing boat","man-rowing-boat"],u:"1f6a3-200d-2642-fe0f",v:["1f6a3-1f3fb-200d-2642-fe0f","1f6a3-1f3fc-200d-2642-fe0f","1f6a3-1f3fd-200d-2642-fe0f","1f6a3-1f3fe-200d-2642-fe0f","1f6a3-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman rowing boat","woman-rowing-boat"],u:"1f6a3-200d-2640-fe0f",v:["1f6a3-1f3fb-200d-2640-fe0f","1f6a3-1f3fc-200d-2640-fe0f","1f6a3-1f3fd-200d-2640-fe0f","1f6a3-1f3fe-200d-2640-fe0f","1f6a3-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["swimmer"],u:"1f3ca",v:["1f3ca-1f3fb","1f3ca-1f3fc","1f3ca-1f3fd","1f3ca-1f3fe","1f3ca-1f3ff"],a:"0.6"},{n:["man swimming","man-swimming"],u:"1f3ca-200d-2642-fe0f",v:["1f3ca-1f3fb-200d-2642-fe0f","1f3ca-1f3fc-200d-2642-fe0f","1f3ca-1f3fd-200d-2642-fe0f","1f3ca-1f3fe-200d-2642-fe0f","1f3ca-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman swimming","woman-swimming"],u:"1f3ca-200d-2640-fe0f",v:["1f3ca-1f3fb-200d-2640-fe0f","1f3ca-1f3fc-200d-2640-fe0f","1f3ca-1f3fd-200d-2640-fe0f","1f3ca-1f3fe-200d-2640-fe0f","1f3ca-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["person with ball","person bouncing ball"],u:"26f9-fe0f",v:["26f9-1f3fb","26f9-1f3fc","26f9-1f3fd","26f9-1f3fe","26f9-1f3ff"],a:"0.7"},{n:["man bouncing ball","man-bouncing-ball"],u:"26f9-fe0f-200d-2642-fe0f",v:["26f9-1f3fb-200d-2642-fe0f","26f9-1f3fc-200d-2642-fe0f","26f9-1f3fd-200d-2642-fe0f","26f9-1f3fe-200d-2642-fe0f","26f9-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman bouncing ball","woman-bouncing-ball"],u:"26f9-fe0f-200d-2640-fe0f",v:["26f9-1f3fb-200d-2640-fe0f","26f9-1f3fc-200d-2640-fe0f","26f9-1f3fd-200d-2640-fe0f","26f9-1f3fe-200d-2640-fe0f","26f9-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["weight lifter","person lifting weights"],u:"1f3cb-fe0f",v:["1f3cb-1f3fb","1f3cb-1f3fc","1f3cb-1f3fd","1f3cb-1f3fe","1f3cb-1f3ff"],a:"0.7"},{n:["man lifting weights","man-lifting-weights"],u:"1f3cb-fe0f-200d-2642-fe0f",v:["1f3cb-1f3fb-200d-2642-fe0f","1f3cb-1f3fc-200d-2642-fe0f","1f3cb-1f3fd-200d-2642-fe0f","1f3cb-1f3fe-200d-2642-fe0f","1f3cb-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman lifting weights","woman-lifting-weights"],u:"1f3cb-fe0f-200d-2640-fe0f",v:["1f3cb-1f3fb-200d-2640-fe0f","1f3cb-1f3fc-200d-2640-fe0f","1f3cb-1f3fd-200d-2640-fe0f","1f3cb-1f3fe-200d-2640-fe0f","1f3cb-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["bicyclist"],u:"1f6b4",v:["1f6b4-1f3fb","1f6b4-1f3fc","1f6b4-1f3fd","1f6b4-1f3fe","1f6b4-1f3ff"],a:"1.0"},{n:["man biking","man-biking"],u:"1f6b4-200d-2642-fe0f",v:["1f6b4-1f3fb-200d-2642-fe0f","1f6b4-1f3fc-200d-2642-fe0f","1f6b4-1f3fd-200d-2642-fe0f","1f6b4-1f3fe-200d-2642-fe0f","1f6b4-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman biking","woman-biking"],u:"1f6b4-200d-2640-fe0f",v:["1f6b4-1f3fb-200d-2640-fe0f","1f6b4-1f3fc-200d-2640-fe0f","1f6b4-1f3fd-200d-2640-fe0f","1f6b4-1f3fe-200d-2640-fe0f","1f6b4-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["mountain bicyclist"],u:"1f6b5",v:["1f6b5-1f3fb","1f6b5-1f3fc","1f6b5-1f3fd","1f6b5-1f3fe","1f6b5-1f3ff"],a:"1.0"},{n:["man mountain biking","man-mountain-biking"],u:"1f6b5-200d-2642-fe0f",v:["1f6b5-1f3fb-200d-2642-fe0f","1f6b5-1f3fc-200d-2642-fe0f","1f6b5-1f3fd-200d-2642-fe0f","1f6b5-1f3fe-200d-2642-fe0f","1f6b5-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman mountain biking","woman-mountain-biking"],u:"1f6b5-200d-2640-fe0f",v:["1f6b5-1f3fb-200d-2640-fe0f","1f6b5-1f3fc-200d-2640-fe0f","1f6b5-1f3fd-200d-2640-fe0f","1f6b5-1f3fe-200d-2640-fe0f","1f6b5-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["person doing cartwheel"],u:"1f938",v:["1f938-1f3fb","1f938-1f3fc","1f938-1f3fd","1f938-1f3fe","1f938-1f3ff"],a:"3.0"},{n:["man cartwheeling","man-cartwheeling"],u:"1f938-200d-2642-fe0f",v:["1f938-1f3fb-200d-2642-fe0f","1f938-1f3fc-200d-2642-fe0f","1f938-1f3fd-200d-2642-fe0f","1f938-1f3fe-200d-2642-fe0f","1f938-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman cartwheeling","woman-cartwheeling"],u:"1f938-200d-2640-fe0f",v:["1f938-1f3fb-200d-2640-fe0f","1f938-1f3fc-200d-2640-fe0f","1f938-1f3fd-200d-2640-fe0f","1f938-1f3fe-200d-2640-fe0f","1f938-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["wrestlers"],u:"1f93c",a:"3.0"},{n:["men wrestling","man-wrestling"],u:"1f93c-200d-2642-fe0f",a:"4.0"},{n:["women wrestling","woman-wrestling"],u:"1f93c-200d-2640-fe0f",a:"4.0"},{n:["water polo"],u:"1f93d",v:["1f93d-1f3fb","1f93d-1f3fc","1f93d-1f3fd","1f93d-1f3fe","1f93d-1f3ff"],a:"3.0"},{n:["man playing water polo","man-playing-water-polo"],u:"1f93d-200d-2642-fe0f",v:["1f93d-1f3fb-200d-2642-fe0f","1f93d-1f3fc-200d-2642-fe0f","1f93d-1f3fd-200d-2642-fe0f","1f93d-1f3fe-200d-2642-fe0f","1f93d-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman playing water polo","woman-playing-water-polo"],u:"1f93d-200d-2640-fe0f",v:["1f93d-1f3fb-200d-2640-fe0f","1f93d-1f3fc-200d-2640-fe0f","1f93d-1f3fd-200d-2640-fe0f","1f93d-1f3fe-200d-2640-fe0f","1f93d-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["handball"],u:"1f93e",v:["1f93e-1f3fb","1f93e-1f3fc","1f93e-1f3fd","1f93e-1f3fe","1f93e-1f3ff"],a:"3.0"},{n:["man playing handball","man-playing-handball"],u:"1f93e-200d-2642-fe0f",v:["1f93e-1f3fb-200d-2642-fe0f","1f93e-1f3fc-200d-2642-fe0f","1f93e-1f3fd-200d-2642-fe0f","1f93e-1f3fe-200d-2642-fe0f","1f93e-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman playing handball","woman-playing-handball"],u:"1f93e-200d-2640-fe0f",v:["1f93e-1f3fb-200d-2640-fe0f","1f93e-1f3fc-200d-2640-fe0f","1f93e-1f3fd-200d-2640-fe0f","1f93e-1f3fe-200d-2640-fe0f","1f93e-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["juggling"],u:"1f939",v:["1f939-1f3fb","1f939-1f3fc","1f939-1f3fd","1f939-1f3fe","1f939-1f3ff"],a:"3.0"},{n:["man juggling","man-juggling"],u:"1f939-200d-2642-fe0f",v:["1f939-1f3fb-200d-2642-fe0f","1f939-1f3fc-200d-2642-fe0f","1f939-1f3fd-200d-2642-fe0f","1f939-1f3fe-200d-2642-fe0f","1f939-1f3ff-200d-2642-fe0f"],a:"4.0"},{n:["woman juggling","woman-juggling"],u:"1f939-200d-2640-fe0f",v:["1f939-1f3fb-200d-2640-fe0f","1f939-1f3fc-200d-2640-fe0f","1f939-1f3fd-200d-2640-fe0f","1f939-1f3fe-200d-2640-fe0f","1f939-1f3ff-200d-2640-fe0f"],a:"4.0"},{n:["person in lotus position"],u:"1f9d8",v:["1f9d8-1f3fb","1f9d8-1f3fc","1f9d8-1f3fd","1f9d8-1f3fe","1f9d8-1f3ff"],a:"5.0"},{n:["man in lotus position"],u:"1f9d8-200d-2642-fe0f",v:["1f9d8-1f3fb-200d-2642-fe0f","1f9d8-1f3fc-200d-2642-fe0f","1f9d8-1f3fd-200d-2642-fe0f","1f9d8-1f3fe-200d-2642-fe0f","1f9d8-1f3ff-200d-2642-fe0f"],a:"5.0"},{n:["woman in lotus position"],u:"1f9d8-200d-2640-fe0f",v:["1f9d8-1f3fb-200d-2640-fe0f","1f9d8-1f3fc-200d-2640-fe0f","1f9d8-1f3fd-200d-2640-fe0f","1f9d8-1f3fe-200d-2640-fe0f","1f9d8-1f3ff-200d-2640-fe0f"],a:"5.0"},{n:["bath"],u:"1f6c0",v:["1f6c0-1f3fb","1f6c0-1f3fc","1f6c0-1f3fd","1f6c0-1f3fe","1f6c0-1f3ff"],a:"0.6"},{n:["sleeping accommodation"],u:"1f6cc",v:["1f6cc-1f3fb","1f6cc-1f3fc","1f6cc-1f3fd","1f6cc-1f3fe","1f6cc-1f3ff"],a:"1.0"},{n:["people holding hands"],u:"1f9d1-200d-1f91d-200d-1f9d1",v:["1f9d1-1f3fb-200d-1f91d-200d-1f9d1-1f3fb","1f9d1-1f3fb-200d-1f91d-200d-1f9d1-1f3fc","1f9d1-1f3fb-200d-1f91d-200d-1f9d1-1f3fd","1f9d1-1f3fb-200d-1f91d-200d-1f9d1-1f3fe","1f9d1-1f3fb-200d-1f91d-200d-1f9d1-1f3ff","1f9d1-1f3fc-200d-1f91d-200d-1f9d1-1f3fb","1f9d1-1f3fc-200d-1f91d-200d-1f9d1-1f3fc","1f9d1-1f3fc-200d-1f91d-200d-1f9d1-1f3fd","1f9d1-1f3fc-200d-1f91d-200d-1f9d1-1f3fe","1f9d1-1f3fc-200d-1f91d-200d-1f9d1-1f3ff","1f9d1-1f3fd-200d-1f91d-200d-1f9d1-1f3fb","1f9d1-1f3fd-200d-1f91d-200d-1f9d1-1f3fc","1f9d1-1f3fd-200d-1f91d-200d-1f9d1-1f3fd","1f9d1-1f3fd-200d-1f91d-200d-1f9d1-1f3fe","1f9d1-1f3fd-200d-1f91d-200d-1f9d1-1f3ff","1f9d1-1f3fe-200d-1f91d-200d-1f9d1-1f3fb","1f9d1-1f3fe-200d-1f91d-200d-1f9d1-1f3fc","1f9d1-1f3fe-200d-1f91d-200d-1f9d1-1f3fd","1f9d1-1f3fe-200d-1f91d-200d-1f9d1-1f3fe","1f9d1-1f3fe-200d-1f91d-200d-1f9d1-1f3ff","1f9d1-1f3ff-200d-1f91d-200d-1f9d1-1f3fb","1f9d1-1f3ff-200d-1f91d-200d-1f9d1-1f3fc","1f9d1-1f3ff-200d-1f91d-200d-1f9d1-1f3fd","1f9d1-1f3ff-200d-1f91d-200d-1f9d1-1f3fe","1f9d1-1f3ff-200d-1f91d-200d-1f9d1-1f3ff"],a:"12.0"},{n:["women holding hands","two women holding hands"],u:"1f46d",v:["1f46d-1f3fb","1f46d-1f3fc","1f46d-1f3fd","1f46d-1f3fe","1f46d-1f3ff","1f469-1f3fb-200d-1f91d-200d-1f469-1f3fc","1f469-1f3fb-200d-1f91d-200d-1f469-1f3fd","1f469-1f3fb-200d-1f91d-200d-1f469-1f3fe","1f469-1f3fb-200d-1f91d-200d-1f469-1f3ff","1f469-1f3fc-200d-1f91d-200d-1f469-1f3fb","1f469-1f3fc-200d-1f91d-200d-1f469-1f3fd","1f469-1f3fc-200d-1f91d-200d-1f469-1f3fe","1f469-1f3fc-200d-1f91d-200d-1f469-1f3ff","1f469-1f3fd-200d-1f91d-200d-1f469-1f3fb","1f469-1f3fd-200d-1f91d-200d-1f469-1f3fc","1f469-1f3fd-200d-1f91d-200d-1f469-1f3fe","1f469-1f3fd-200d-1f91d-200d-1f469-1f3ff","1f469-1f3fe-200d-1f91d-200d-1f469-1f3fb","1f469-1f3fe-200d-1f91d-200d-1f469-1f3fc","1f469-1f3fe-200d-1f91d-200d-1f469-1f3fd","1f469-1f3fe-200d-1f91d-200d-1f469-1f3ff","1f469-1f3ff-200d-1f91d-200d-1f469-1f3fb","1f469-1f3ff-200d-1f91d-200d-1f469-1f3fc","1f469-1f3ff-200d-1f91d-200d-1f469-1f3fd","1f469-1f3ff-200d-1f91d-200d-1f469-1f3fe"],a:"1.0"},{n:["couple","man and woman holding hands","woman and man holding hands"],u:"1f46b",v:["1f46b-1f3fb","1f46b-1f3fc","1f46b-1f3fd","1f46b-1f3fe","1f46b-1f3ff","1f469-1f3fb-200d-1f91d-200d-1f468-1f3fc","1f469-1f3fb-200d-1f91d-200d-1f468-1f3fd","1f469-1f3fb-200d-1f91d-200d-1f468-1f3fe","1f469-1f3fb-200d-1f91d-200d-1f468-1f3ff","1f469-1f3fc-200d-1f91d-200d-1f468-1f3fb","1f469-1f3fc-200d-1f91d-200d-1f468-1f3fd","1f469-1f3fc-200d-1f91d-200d-1f468-1f3fe","1f469-1f3fc-200d-1f91d-200d-1f468-1f3ff","1f469-1f3fd-200d-1f91d-200d-1f468-1f3fb","1f469-1f3fd-200d-1f91d-200d-1f468-1f3fc","1f469-1f3fd-200d-1f91d-200d-1f468-1f3fe","1f469-1f3fd-200d-1f91d-200d-1f468-1f3ff","1f469-1f3fe-200d-1f91d-200d-1f468-1f3fb","1f469-1f3fe-200d-1f91d-200d-1f468-1f3fc","1f469-1f3fe-200d-1f91d-200d-1f468-1f3fd","1f469-1f3fe-200d-1f91d-200d-1f468-1f3ff","1f469-1f3ff-200d-1f91d-200d-1f468-1f3fb","1f469-1f3ff-200d-1f91d-200d-1f468-1f3fc","1f469-1f3ff-200d-1f91d-200d-1f468-1f3fd","1f469-1f3ff-200d-1f91d-200d-1f468-1f3fe"],a:"0.6"},{n:["men holding hands","two men holding hands"],u:"1f46c",v:["1f46c-1f3fb","1f46c-1f3fc","1f46c-1f3fd","1f46c-1f3fe","1f46c-1f3ff","1f468-1f3fb-200d-1f91d-200d-1f468-1f3fc","1f468-1f3fb-200d-1f91d-200d-1f468-1f3fd","1f468-1f3fb-200d-1f91d-200d-1f468-1f3fe","1f468-1f3fb-200d-1f91d-200d-1f468-1f3ff","1f468-1f3fc-200d-1f91d-200d-1f468-1f3fb","1f468-1f3fc-200d-1f91d-200d-1f468-1f3fd","1f468-1f3fc-200d-1f91d-200d-1f468-1f3fe","1f468-1f3fc-200d-1f91d-200d-1f468-1f3ff","1f468-1f3fd-200d-1f91d-200d-1f468-1f3fb","1f468-1f3fd-200d-1f91d-200d-1f468-1f3fc","1f468-1f3fd-200d-1f91d-200d-1f468-1f3fe","1f468-1f3fd-200d-1f91d-200d-1f468-1f3ff","1f468-1f3fe-200d-1f91d-200d-1f468-1f3fb","1f468-1f3fe-200d-1f91d-200d-1f468-1f3fc","1f468-1f3fe-200d-1f91d-200d-1f468-1f3fd","1f468-1f3fe-200d-1f91d-200d-1f468-1f3ff","1f468-1f3ff-200d-1f91d-200d-1f468-1f3fb","1f468-1f3ff-200d-1f91d-200d-1f468-1f3fc","1f468-1f3ff-200d-1f91d-200d-1f468-1f3fd","1f468-1f3ff-200d-1f91d-200d-1f468-1f3fe"],a:"1.0"},{n:["kiss","couplekiss"],u:"1f48f",v:["1f48f-1f3fb","1f48f-1f3fc","1f48f-1f3fd","1f48f-1f3fe","1f48f-1f3ff","1f9d1-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3fc","1f9d1-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3fd","1f9d1-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3fe","1f9d1-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3ff","1f9d1-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3fb","1f9d1-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3fd","1f9d1-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3fe","1f9d1-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3ff","1f9d1-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3fb","1f9d1-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3fc","1f9d1-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3fe","1f9d1-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3ff","1f9d1-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3fb","1f9d1-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3fc","1f9d1-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3fd","1f9d1-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3ff","1f9d1-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3fb","1f9d1-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3fc","1f9d1-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3fd","1f9d1-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f9d1-1f3fe"],a:"0.6"},{n:["woman-kiss-man","kiss: woman, man"],u:"1f469-200d-2764-fe0f-200d-1f48b-200d-1f468",v:["1f469-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fb","1f469-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fc","1f469-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fd","1f469-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fe","1f469-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3ff","1f469-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fb","1f469-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fc","1f469-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fd","1f469-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fe","1f469-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3ff","1f469-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fb","1f469-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fc","1f469-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fd","1f469-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fe","1f469-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3ff","1f469-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fb","1f469-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fc","1f469-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fd","1f469-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fe","1f469-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3ff","1f469-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fb","1f469-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fc","1f469-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fd","1f469-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fe","1f469-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3ff"],a:"2.0"},{n:["man-kiss-man","kiss: man, man"],u:"1f468-200d-2764-fe0f-200d-1f48b-200d-1f468",v:["1f468-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fb","1f468-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fc","1f468-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fd","1f468-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fe","1f468-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3ff","1f468-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fb","1f468-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fc","1f468-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fd","1f468-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fe","1f468-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3ff","1f468-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fb","1f468-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fc","1f468-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fd","1f468-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fe","1f468-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3ff","1f468-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fb","1f468-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fc","1f468-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fd","1f468-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fe","1f468-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3ff","1f468-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fb","1f468-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fc","1f468-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fd","1f468-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3fe","1f468-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f468-1f3ff"],a:"2.0"},{n:["woman-kiss-woman","kiss: woman, woman"],u:"1f469-200d-2764-fe0f-200d-1f48b-200d-1f469",v:["1f469-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fb","1f469-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fc","1f469-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fd","1f469-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fe","1f469-1f3fb-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3ff","1f469-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fb","1f469-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fc","1f469-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fd","1f469-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fe","1f469-1f3fc-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3ff","1f469-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fb","1f469-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fc","1f469-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fd","1f469-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fe","1f469-1f3fd-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3ff","1f469-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fb","1f469-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fc","1f469-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fd","1f469-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fe","1f469-1f3fe-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3ff","1f469-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fb","1f469-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fc","1f469-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fd","1f469-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3fe","1f469-1f3ff-200d-2764-fe0f-200d-1f48b-200d-1f469-1f3ff"],a:"2.0"},{n:["couple with heart"],u:"1f491",v:["1f491-1f3fb","1f491-1f3fc","1f491-1f3fd","1f491-1f3fe","1f491-1f3ff","1f9d1-1f3fb-200d-2764-fe0f-200d-1f9d1-1f3fc","1f9d1-1f3fb-200d-2764-fe0f-200d-1f9d1-1f3fd","1f9d1-1f3fb-200d-2764-fe0f-200d-1f9d1-1f3fe","1f9d1-1f3fb-200d-2764-fe0f-200d-1f9d1-1f3ff","1f9d1-1f3fc-200d-2764-fe0f-200d-1f9d1-1f3fb","1f9d1-1f3fc-200d-2764-fe0f-200d-1f9d1-1f3fd","1f9d1-1f3fc-200d-2764-fe0f-200d-1f9d1-1f3fe","1f9d1-1f3fc-200d-2764-fe0f-200d-1f9d1-1f3ff","1f9d1-1f3fd-200d-2764-fe0f-200d-1f9d1-1f3fb","1f9d1-1f3fd-200d-2764-fe0f-200d-1f9d1-1f3fc","1f9d1-1f3fd-200d-2764-fe0f-200d-1f9d1-1f3fe","1f9d1-1f3fd-200d-2764-fe0f-200d-1f9d1-1f3ff","1f9d1-1f3fe-200d-2764-fe0f-200d-1f9d1-1f3fb","1f9d1-1f3fe-200d-2764-fe0f-200d-1f9d1-1f3fc","1f9d1-1f3fe-200d-2764-fe0f-200d-1f9d1-1f3fd","1f9d1-1f3fe-200d-2764-fe0f-200d-1f9d1-1f3ff","1f9d1-1f3ff-200d-2764-fe0f-200d-1f9d1-1f3fb","1f9d1-1f3ff-200d-2764-fe0f-200d-1f9d1-1f3fc","1f9d1-1f3ff-200d-2764-fe0f-200d-1f9d1-1f3fd","1f9d1-1f3ff-200d-2764-fe0f-200d-1f9d1-1f3fe"],a:"0.6"},{n:["woman-heart-man","couple with heart: woman, man"],u:"1f469-200d-2764-fe0f-200d-1f468",v:["1f469-1f3fb-200d-2764-fe0f-200d-1f468-1f3fb","1f469-1f3fb-200d-2764-fe0f-200d-1f468-1f3fc","1f469-1f3fb-200d-2764-fe0f-200d-1f468-1f3fd","1f469-1f3fb-200d-2764-fe0f-200d-1f468-1f3fe","1f469-1f3fb-200d-2764-fe0f-200d-1f468-1f3ff","1f469-1f3fc-200d-2764-fe0f-200d-1f468-1f3fb","1f469-1f3fc-200d-2764-fe0f-200d-1f468-1f3fc","1f469-1f3fc-200d-2764-fe0f-200d-1f468-1f3fd","1f469-1f3fc-200d-2764-fe0f-200d-1f468-1f3fe","1f469-1f3fc-200d-2764-fe0f-200d-1f468-1f3ff","1f469-1f3fd-200d-2764-fe0f-200d-1f468-1f3fb","1f469-1f3fd-200d-2764-fe0f-200d-1f468-1f3fc","1f469-1f3fd-200d-2764-fe0f-200d-1f468-1f3fd","1f469-1f3fd-200d-2764-fe0f-200d-1f468-1f3fe","1f469-1f3fd-200d-2764-fe0f-200d-1f468-1f3ff","1f469-1f3fe-200d-2764-fe0f-200d-1f468-1f3fb","1f469-1f3fe-200d-2764-fe0f-200d-1f468-1f3fc","1f469-1f3fe-200d-2764-fe0f-200d-1f468-1f3fd","1f469-1f3fe-200d-2764-fe0f-200d-1f468-1f3fe","1f469-1f3fe-200d-2764-fe0f-200d-1f468-1f3ff","1f469-1f3ff-200d-2764-fe0f-200d-1f468-1f3fb","1f469-1f3ff-200d-2764-fe0f-200d-1f468-1f3fc","1f469-1f3ff-200d-2764-fe0f-200d-1f468-1f3fd","1f469-1f3ff-200d-2764-fe0f-200d-1f468-1f3fe","1f469-1f3ff-200d-2764-fe0f-200d-1f468-1f3ff"],a:"2.0"},{n:["man-heart-man","couple with heart: man, man"],u:"1f468-200d-2764-fe0f-200d-1f468",v:["1f468-1f3fb-200d-2764-fe0f-200d-1f468-1f3fb","1f468-1f3fb-200d-2764-fe0f-200d-1f468-1f3fc","1f468-1f3fb-200d-2764-fe0f-200d-1f468-1f3fd","1f468-1f3fb-200d-2764-fe0f-200d-1f468-1f3fe","1f468-1f3fb-200d-2764-fe0f-200d-1f468-1f3ff","1f468-1f3fc-200d-2764-fe0f-200d-1f468-1f3fb","1f468-1f3fc-200d-2764-fe0f-200d-1f468-1f3fc","1f468-1f3fc-200d-2764-fe0f-200d-1f468-1f3fd","1f468-1f3fc-200d-2764-fe0f-200d-1f468-1f3fe","1f468-1f3fc-200d-2764-fe0f-200d-1f468-1f3ff","1f468-1f3fd-200d-2764-fe0f-200d-1f468-1f3fb","1f468-1f3fd-200d-2764-fe0f-200d-1f468-1f3fc","1f468-1f3fd-200d-2764-fe0f-200d-1f468-1f3fd","1f468-1f3fd-200d-2764-fe0f-200d-1f468-1f3fe","1f468-1f3fd-200d-2764-fe0f-200d-1f468-1f3ff","1f468-1f3fe-200d-2764-fe0f-200d-1f468-1f3fb","1f468-1f3fe-200d-2764-fe0f-200d-1f468-1f3fc","1f468-1f3fe-200d-2764-fe0f-200d-1f468-1f3fd","1f468-1f3fe-200d-2764-fe0f-200d-1f468-1f3fe","1f468-1f3fe-200d-2764-fe0f-200d-1f468-1f3ff","1f468-1f3ff-200d-2764-fe0f-200d-1f468-1f3fb","1f468-1f3ff-200d-2764-fe0f-200d-1f468-1f3fc","1f468-1f3ff-200d-2764-fe0f-200d-1f468-1f3fd","1f468-1f3ff-200d-2764-fe0f-200d-1f468-1f3fe","1f468-1f3ff-200d-2764-fe0f-200d-1f468-1f3ff"],a:"2.0"},{n:["woman-heart-woman","couple with heart: woman, woman"],u:"1f469-200d-2764-fe0f-200d-1f469",v:["1f469-1f3fb-200d-2764-fe0f-200d-1f469-1f3fb","1f469-1f3fb-200d-2764-fe0f-200d-1f469-1f3fc","1f469-1f3fb-200d-2764-fe0f-200d-1f469-1f3fd","1f469-1f3fb-200d-2764-fe0f-200d-1f469-1f3fe","1f469-1f3fb-200d-2764-fe0f-200d-1f469-1f3ff","1f469-1f3fc-200d-2764-fe0f-200d-1f469-1f3fb","1f469-1f3fc-200d-2764-fe0f-200d-1f469-1f3fc","1f469-1f3fc-200d-2764-fe0f-200d-1f469-1f3fd","1f469-1f3fc-200d-2764-fe0f-200d-1f469-1f3fe","1f469-1f3fc-200d-2764-fe0f-200d-1f469-1f3ff","1f469-1f3fd-200d-2764-fe0f-200d-1f469-1f3fb","1f469-1f3fd-200d-2764-fe0f-200d-1f469-1f3fc","1f469-1f3fd-200d-2764-fe0f-200d-1f469-1f3fd","1f469-1f3fd-200d-2764-fe0f-200d-1f469-1f3fe","1f469-1f3fd-200d-2764-fe0f-200d-1f469-1f3ff","1f469-1f3fe-200d-2764-fe0f-200d-1f469-1f3fb","1f469-1f3fe-200d-2764-fe0f-200d-1f469-1f3fc","1f469-1f3fe-200d-2764-fe0f-200d-1f469-1f3fd","1f469-1f3fe-200d-2764-fe0f-200d-1f469-1f3fe","1f469-1f3fe-200d-2764-fe0f-200d-1f469-1f3ff","1f469-1f3ff-200d-2764-fe0f-200d-1f469-1f3fb","1f469-1f3ff-200d-2764-fe0f-200d-1f469-1f3fc","1f469-1f3ff-200d-2764-fe0f-200d-1f469-1f3fd","1f469-1f3ff-200d-2764-fe0f-200d-1f469-1f3fe","1f469-1f3ff-200d-2764-fe0f-200d-1f469-1f3ff"],a:"2.0"},{n:["man-woman-boy","family: man, woman, boy"],u:"1f468-200d-1f469-200d-1f466",a:"2.0"},{n:["man-woman-girl","family: man, woman, girl"],u:"1f468-200d-1f469-200d-1f467",a:"2.0"},{n:["man-woman-girl-boy","family: man, woman, girl, boy"],u:"1f468-200d-1f469-200d-1f467-200d-1f466",a:"2.0"},{n:["man-woman-boy-boy","family: man, woman, boy, boy"],u:"1f468-200d-1f469-200d-1f466-200d-1f466",a:"2.0"},{n:["man-woman-girl-girl","family: man, woman, girl, girl"],u:"1f468-200d-1f469-200d-1f467-200d-1f467",a:"2.0"},{n:["man-man-boy","family: man, man, boy"],u:"1f468-200d-1f468-200d-1f466",a:"2.0"},{n:["man-man-girl","family: man, man, girl"],u:"1f468-200d-1f468-200d-1f467",a:"2.0"},{n:["man-man-girl-boy","family: man, man, girl, boy"],u:"1f468-200d-1f468-200d-1f467-200d-1f466",a:"2.0"},{n:["man-man-boy-boy","family: man, man, boy, boy"],u:"1f468-200d-1f468-200d-1f466-200d-1f466",a:"2.0"},{n:["man-man-girl-girl","family: man, man, girl, girl"],u:"1f468-200d-1f468-200d-1f467-200d-1f467",a:"2.0"},{n:["woman-woman-boy","family: woman, woman, boy"],u:"1f469-200d-1f469-200d-1f466",a:"2.0"},{n:["woman-woman-girl","family: woman, woman, girl"],u:"1f469-200d-1f469-200d-1f467",a:"2.0"},{n:["woman-woman-girl-boy","family: woman, woman, girl, boy"],u:"1f469-200d-1f469-200d-1f467-200d-1f466",a:"2.0"},{n:["woman-woman-boy-boy","family: woman, woman, boy, boy"],u:"1f469-200d-1f469-200d-1f466-200d-1f466",a:"2.0"},{n:["woman-woman-girl-girl","family: woman, woman, girl, girl"],u:"1f469-200d-1f469-200d-1f467-200d-1f467",a:"2.0"},{n:["man-boy","family: man, boy"],u:"1f468-200d-1f466",a:"4.0"},{n:["man-boy-boy","family: man, boy, boy"],u:"1f468-200d-1f466-200d-1f466",a:"4.0"},{n:["man-girl","family: man, girl"],u:"1f468-200d-1f467",a:"4.0"},{n:["man-girl-boy","family: man, girl, boy"],u:"1f468-200d-1f467-200d-1f466",a:"4.0"},{n:["man-girl-girl","family: man, girl, girl"],u:"1f468-200d-1f467-200d-1f467",a:"4.0"},{n:["woman-boy","family: woman, boy"],u:"1f469-200d-1f466",a:"4.0"},{n:["woman-boy-boy","family: woman, boy, boy"],u:"1f469-200d-1f466-200d-1f466",a:"4.0"},{n:["woman-girl","family: woman, girl"],u:"1f469-200d-1f467",a:"4.0"},{n:["woman-girl-boy","family: woman, girl, boy"],u:"1f469-200d-1f467-200d-1f466",a:"4.0"},{n:["woman-girl-girl","family: woman, girl, girl"],u:"1f469-200d-1f467-200d-1f467",a:"4.0"},{n:["speaking head","speaking head in silhouette"],u:"1f5e3-fe0f",a:"0.7"},{n:["bust in silhouette"],u:"1f464",a:"0.6"},{n:["busts in silhouette"],u:"1f465",a:"1.0"},{n:["people hugging"],u:"1fac2",a:"13.0"},{n:["family"],u:"1f46a",a:"0.6"},{n:["family adult adult child","family: adult, adult, child"],u:"1f9d1-200d-1f9d1-200d-1f9d2",a:"15.1"},{n:["family adult adult child child","family: adult, adult, child, child"],u:"1f9d1-200d-1f9d1-200d-1f9d2-200d-1f9d2",a:"15.1"},{n:["family adult child","family: adult, child"],u:"1f9d1-200d-1f9d2",a:"15.1"},{n:["family adult child child","family: adult, child, child"],u:"1f9d1-200d-1f9d2-200d-1f9d2",a:"15.1"},{n:["footprints"],u:"1f463",a:"0.6"}],fke=[{n:["monkey face"],u:"1f435",a:"0.6"},{n:["monkey"],u:"1f412",a:"0.6"},{n:["gorilla"],u:"1f98d",a:"3.0"},{n:["orangutan"],u:"1f9a7",a:"12.0"},{n:["dog","dog face"],u:"1f436",a:"0.6"},{n:["dog","dog2"],u:"1f415",a:"0.7"},{n:["guide dog"],u:"1f9ae",a:"12.0"},{n:["service dog"],u:"1f415-200d-1f9ba",a:"12.0"},{n:["poodle"],u:"1f429",a:"0.6"},{n:["wolf","wolf face"],u:"1f43a",a:"0.6"},{n:["fox face"],u:"1f98a",a:"3.0"},{n:["raccoon"],u:"1f99d",a:"11.0"},{n:["cat","cat face"],u:"1f431",a:"0.6"},{n:["cat","cat2"],u:"1f408",a:"0.7"},{n:["black cat"],u:"1f408-200d-2b1b",a:"13.0"},{n:["lion face"],u:"1f981",a:"1.0"},{n:["tiger","tiger face"],u:"1f42f",a:"0.6"},{n:["tiger","tiger2"],u:"1f405",a:"1.0"},{n:["leopard"],u:"1f406",a:"1.0"},{n:["horse","horse face"],u:"1f434",a:"0.6"},{n:["moose"],u:"1face",a:"15.0"},{n:["donkey"],u:"1facf",a:"15.0"},{n:["horse","racehorse"],u:"1f40e",a:"0.6"},{n:["unicorn face"],u:"1f984",a:"1.0"},{n:["zebra face"],u:"1f993",a:"5.0"},{n:["deer"],u:"1f98c",a:"3.0"},{n:["bison"],u:"1f9ac",a:"13.0"},{n:["cow","cow face"],u:"1f42e",a:"0.6"},{n:["ox"],u:"1f402",a:"1.0"},{n:["water buffalo"],u:"1f403",a:"1.0"},{n:["cow","cow2"],u:"1f404",a:"1.0"},{n:["pig","pig face"],u:"1f437",a:"0.6"},{n:["pig","pig2"],u:"1f416",a:"1.0"},{n:["boar"],u:"1f417",a:"0.6"},{n:["pig nose"],u:"1f43d",a:"0.6"},{n:["ram"],u:"1f40f",a:"1.0"},{n:["sheep"],u:"1f411",a:"0.6"},{n:["goat"],u:"1f410",a:"1.0"},{n:["dromedary camel"],u:"1f42a",a:"1.0"},{n:["camel","bactrian camel"],u:"1f42b",a:"0.6"},{n:["llama"],u:"1f999",a:"11.0"},{n:["giraffe face"],u:"1f992",a:"5.0"},{n:["elephant"],u:"1f418",a:"0.6"},{n:["mammoth"],u:"1f9a3",a:"13.0"},{n:["rhinoceros"],u:"1f98f",a:"3.0"},{n:["hippopotamus"],u:"1f99b",a:"11.0"},{n:["mouse","mouse face"],u:"1f42d",a:"0.6"},{n:["mouse","mouse2"],u:"1f401",a:"1.0"},{n:["rat"],u:"1f400",a:"1.0"},{n:["hamster","hamster face"],u:"1f439",a:"0.6"},{n:["rabbit","rabbit face"],u:"1f430",a:"0.6"},{n:["rabbit","rabbit2"],u:"1f407",a:"1.0"},{n:["chipmunk"],u:"1f43f-fe0f",a:"0.7"},{n:["beaver"],u:"1f9ab",a:"13.0"},{n:["hedgehog"],u:"1f994",a:"5.0"},{n:["bat"],u:"1f987",a:"3.0"},{n:["bear","bear face"],u:"1f43b",a:"0.6"},{n:["polar bear"],u:"1f43b-200d-2744-fe0f",a:"13.0"},{n:["koala"],u:"1f428",a:"0.6"},{n:["panda face"],u:"1f43c",a:"0.6"},{n:["sloth"],u:"1f9a5",a:"12.0"},{n:["otter"],u:"1f9a6",a:"12.0"},{n:["skunk"],u:"1f9a8",a:"12.0"},{n:["kangaroo"],u:"1f998",a:"11.0"},{n:["badger"],u:"1f9a1",a:"11.0"},{n:["feet","paw prints"],u:"1f43e",a:"0.6"},{n:["turkey"],u:"1f983",a:"1.0"},{n:["chicken"],u:"1f414",a:"0.6"},{n:["rooster"],u:"1f413",a:"1.0"},{n:["hatching chick"],u:"1f423",a:"0.6"},{n:["baby chick"],u:"1f424",a:"0.6"},{n:["hatched chick","front-facing baby chick"],u:"1f425",a:"0.6"},{n:["bird"],u:"1f426",a:"0.6"},{n:["penguin"],u:"1f427",a:"0.6"},{n:["dove","dove of peace"],u:"1f54a-fe0f",a:"0.7"},{n:["eagle"],u:"1f985",a:"3.0"},{n:["duck"],u:"1f986",a:"3.0"},{n:["swan"],u:"1f9a2",a:"11.0"},{n:["owl"],u:"1f989",a:"3.0"},{n:["dodo"],u:"1f9a4",a:"13.0"},{n:["feather"],u:"1fab6",a:"13.0"},{n:["flamingo"],u:"1f9a9",a:"12.0"},{n:["peacock"],u:"1f99a",a:"11.0"},{n:["parrot"],u:"1f99c",a:"11.0"},{n:["wing"],u:"1fabd",a:"15.0"},{n:["black bird"],u:"1f426-200d-2b1b",a:"15.0"},{n:["goose"],u:"1fabf",a:"15.0"},{n:["phoenix"],u:"1f426-200d-1f525",a:"15.1"},{n:["frog","frog face"],u:"1f438",a:"0.6"},{n:["crocodile"],u:"1f40a",a:"1.0"},{n:["turtle"],u:"1f422",a:"0.6"},{n:["lizard"],u:"1f98e",a:"3.0"},{n:["snake"],u:"1f40d",a:"0.6"},{n:["dragon face"],u:"1f432",a:"0.6"},{n:["dragon"],u:"1f409",a:"1.0"},{n:["sauropod"],u:"1f995",a:"5.0"},{n:["t-rex"],u:"1f996",a:"5.0"},{n:["whale","spouting whale"],u:"1f433",a:"0.6"},{n:["whale","whale2"],u:"1f40b",a:"1.0"},{n:["dolphin","flipper"],u:"1f42c",a:"0.6"},{n:["seal"],u:"1f9ad",a:"13.0"},{n:["fish"],u:"1f41f",a:"0.6"},{n:["tropical fish"],u:"1f420",a:"0.6"},{n:["blowfish"],u:"1f421",a:"0.6"},{n:["shark"],u:"1f988",a:"3.0"},{n:["octopus"],u:"1f419",a:"0.6"},{n:["shell","spiral shell"],u:"1f41a",a:"0.6"},{n:["coral"],u:"1fab8",a:"14.0"},{n:["jellyfish"],u:"1fabc",a:"15.0"},{n:["snail"],u:"1f40c",a:"0.6"},{n:["butterfly"],u:"1f98b",a:"3.0"},{n:["bug"],u:"1f41b",a:"0.6"},{n:["ant"],u:"1f41c",a:"0.6"},{n:["bee","honeybee"],u:"1f41d",a:"0.6"},{n:["beetle"],u:"1fab2",a:"13.0"},{n:["ladybug","lady beetle"],u:"1f41e",a:"0.6"},{n:["cricket"],u:"1f997",a:"5.0"},{n:["cockroach"],u:"1fab3",a:"13.0"},{n:["spider"],u:"1f577-fe0f",a:"0.7"},{n:["spider web"],u:"1f578-fe0f",a:"0.7"},{n:["scorpion"],u:"1f982",a:"1.0"},{n:["mosquito"],u:"1f99f",a:"11.0"},{n:["fly"],u:"1fab0",a:"13.0"},{n:["worm"],u:"1fab1",a:"13.0"},{n:["microbe"],u:"1f9a0",a:"11.0"},{n:["bouquet"],u:"1f490",a:"0.6"},{n:["cherry blossom"],u:"1f338",a:"0.6"},{n:["white flower"],u:"1f4ae",a:"0.6"},{n:["lotus"],u:"1fab7",a:"14.0"},{n:["rosette"],u:"1f3f5-fe0f",a:"0.7"},{n:["rose"],u:"1f339",a:"0.6"},{n:["wilted flower"],u:"1f940",a:"3.0"},{n:["hibiscus"],u:"1f33a",a:"0.6"},{n:["sunflower"],u:"1f33b",a:"0.6"},{n:["blossom"],u:"1f33c",a:"0.6"},{n:["tulip"],u:"1f337",a:"0.6"},{n:["hyacinth"],u:"1fabb",a:"15.0"},{n:["seedling"],u:"1f331",a:"0.6"},{n:["potted plant"],u:"1fab4",a:"13.0"},{n:["evergreen tree"],u:"1f332",a:"1.0"},{n:["deciduous tree"],u:"1f333",a:"1.0"},{n:["palm tree"],u:"1f334",a:"0.6"},{n:["cactus"],u:"1f335",a:"0.6"},{n:["ear of rice"],u:"1f33e",a:"0.6"},{n:["herb"],u:"1f33f",a:"0.6"},{n:["shamrock"],u:"2618-fe0f",a:"1.0"},{n:["four leaf clover"],u:"1f340",a:"0.6"},{n:["maple leaf"],u:"1f341",a:"0.6"},{n:["fallen leaf"],u:"1f342",a:"0.6"},{n:["leaves","leaf fluttering in wind"],u:"1f343",a:"0.6"},{n:["empty nest"],u:"1fab9",a:"14.0"},{n:["nest with eggs"],u:"1faba",a:"14.0"},{n:["mushroom"],u:"1f344",a:"0.6"}],hke=[{n:["grapes"],u:"1f347",a:"0.6"},{n:["melon"],u:"1f348",a:"0.6"},{n:["watermelon"],u:"1f349",a:"0.6"},{n:["tangerine"],u:"1f34a",a:"0.6"},{n:["lemon"],u:"1f34b",a:"1.0"},{n:["lime"],u:"1f34b-200d-1f7e9",a:"15.1"},{n:["banana"],u:"1f34c",a:"0.6"},{n:["pineapple"],u:"1f34d",a:"0.6"},{n:["mango"],u:"1f96d",a:"11.0"},{n:["apple","red apple"],u:"1f34e",a:"0.6"},{n:["green apple"],u:"1f34f",a:"0.6"},{n:["pear"],u:"1f350",a:"1.0"},{n:["peach"],u:"1f351",a:"0.6"},{n:["cherries"],u:"1f352",a:"0.6"},{n:["strawberry"],u:"1f353",a:"0.6"},{n:["blueberries"],u:"1fad0",a:"13.0"},{n:["kiwifruit"],u:"1f95d",a:"3.0"},{n:["tomato"],u:"1f345",a:"0.6"},{n:["olive"],u:"1fad2",a:"13.0"},{n:["coconut"],u:"1f965",a:"5.0"},{n:["avocado"],u:"1f951",a:"3.0"},{n:["eggplant","aubergine"],u:"1f346",a:"0.6"},{n:["potato"],u:"1f954",a:"3.0"},{n:["carrot"],u:"1f955",a:"3.0"},{n:["corn","ear of maize"],u:"1f33d",a:"0.6"},{n:["hot pepper"],u:"1f336-fe0f",a:"0.7"},{n:["bell pepper"],u:"1fad1",a:"13.0"},{n:["cucumber"],u:"1f952",a:"3.0"},{n:["leafy green"],u:"1f96c",a:"11.0"},{n:["broccoli"],u:"1f966",a:"5.0"},{n:["garlic"],u:"1f9c4",a:"12.0"},{n:["onion"],u:"1f9c5",a:"12.0"},{n:["peanuts"],u:"1f95c",a:"3.0"},{n:["beans"],u:"1fad8",a:"14.0"},{n:["chestnut"],u:"1f330",a:"0.6"},{n:["ginger root"],u:"1fada",a:"15.0"},{n:["pea pod"],u:"1fadb",a:"15.0"},{n:["brown mushroom"],u:"1f344-200d-1f7eb",a:"15.1"},{n:["bread"],u:"1f35e",a:"0.6"},{n:["croissant"],u:"1f950",a:"3.0"},{n:["baguette bread"],u:"1f956",a:"3.0"},{n:["flatbread"],u:"1fad3",a:"13.0"},{n:["pretzel"],u:"1f968",a:"5.0"},{n:["bagel"],u:"1f96f",a:"11.0"},{n:["pancakes"],u:"1f95e",a:"3.0"},{n:["waffle"],u:"1f9c7",a:"12.0"},{n:["cheese wedge"],u:"1f9c0",a:"1.0"},{n:["meat on bone"],u:"1f356",a:"0.6"},{n:["poultry leg"],u:"1f357",a:"0.6"},{n:["cut of meat"],u:"1f969",a:"5.0"},{n:["bacon"],u:"1f953",a:"3.0"},{n:["hamburger"],u:"1f354",a:"0.6"},{n:["fries","french fries"],u:"1f35f",a:"0.6"},{n:["pizza","slice of pizza"],u:"1f355",a:"0.6"},{n:["hotdog","hot dog"],u:"1f32d",a:"1.0"},{n:["sandwich"],u:"1f96a",a:"5.0"},{n:["taco"],u:"1f32e",a:"1.0"},{n:["burrito"],u:"1f32f",a:"1.0"},{n:["tamale"],u:"1fad4",a:"13.0"},{n:["stuffed flatbread"],u:"1f959",a:"3.0"},{n:["falafel"],u:"1f9c6",a:"12.0"},{n:["egg"],u:"1f95a",a:"3.0"},{n:["cooking","fried egg"],u:"1f373",a:"0.6"},{n:["shallow pan of food"],u:"1f958",a:"3.0"},{n:["stew","pot of food"],u:"1f372",a:"0.6"},{n:["fondue"],u:"1fad5",a:"13.0"},{n:["bowl with spoon"],u:"1f963",a:"5.0"},{n:["green salad"],u:"1f957",a:"3.0"},{n:["popcorn"],u:"1f37f",a:"1.0"},{n:["butter"],u:"1f9c8",a:"12.0"},{n:["salt","salt shaker"],u:"1f9c2",a:"11.0"},{n:["canned food"],u:"1f96b",a:"5.0"},{n:["bento","bento box"],u:"1f371",a:"0.6"},{n:["rice cracker"],u:"1f358",a:"0.6"},{n:["rice ball"],u:"1f359",a:"0.6"},{n:["rice","cooked rice"],u:"1f35a",a:"0.6"},{n:["curry","curry and rice"],u:"1f35b",a:"0.6"},{n:["ramen","steaming bowl"],u:"1f35c",a:"0.6"},{n:["spaghetti"],u:"1f35d",a:"0.6"},{n:["sweet potato","roasted sweet potato"],u:"1f360",a:"0.6"},{n:["oden"],u:"1f362",a:"0.6"},{n:["sushi"],u:"1f363",a:"0.6"},{n:["fried shrimp"],u:"1f364",a:"0.6"},{n:["fish cake","fish cake with swirl design"],u:"1f365",a:"0.6"},{n:["moon cake"],u:"1f96e",a:"11.0"},{n:["dango"],u:"1f361",a:"0.6"},{n:["dumpling"],u:"1f95f",a:"5.0"},{n:["fortune cookie"],u:"1f960",a:"5.0"},{n:["takeout box"],u:"1f961",a:"5.0"},{n:["crab"],u:"1f980",a:"1.0"},{n:["lobster"],u:"1f99e",a:"11.0"},{n:["shrimp"],u:"1f990",a:"3.0"},{n:["squid"],u:"1f991",a:"3.0"},{n:["oyster"],u:"1f9aa",a:"12.0"},{n:["icecream","soft ice cream"],u:"1f366",a:"0.6"},{n:["shaved ice"],u:"1f367",a:"0.6"},{n:["ice cream"],u:"1f368",a:"0.6"},{n:["doughnut"],u:"1f369",a:"0.6"},{n:["cookie"],u:"1f36a",a:"0.6"},{n:["birthday","birthday cake"],u:"1f382",a:"0.6"},{n:["cake","shortcake"],u:"1f370",a:"0.6"},{n:["cupcake"],u:"1f9c1",a:"11.0"},{n:["pie"],u:"1f967",a:"5.0"},{n:["chocolate bar"],u:"1f36b",a:"0.6"},{n:["candy"],u:"1f36c",a:"0.6"},{n:["lollipop"],u:"1f36d",a:"0.6"},{n:["custard"],u:"1f36e",a:"0.6"},{n:["honey pot"],u:"1f36f",a:"0.6"},{n:["baby bottle"],u:"1f37c",a:"1.0"},{n:["glass of milk"],u:"1f95b",a:"3.0"},{n:["coffee","hot beverage"],u:"2615",a:"0.6"},{n:["teapot"],u:"1fad6",a:"13.0"},{n:["tea","teacup without handle"],u:"1f375",a:"0.6"},{n:["sake","sake bottle and cup"],u:"1f376",a:"0.6"},{n:["champagne","bottle with popping cork"],u:"1f37e",a:"1.0"},{n:["wine glass"],u:"1f377",a:"0.6"},{n:["cocktail","cocktail glass"],u:"1f378",a:"0.6"},{n:["tropical drink"],u:"1f379",a:"0.6"},{n:["beer","beer mug"],u:"1f37a",a:"0.6"},{n:["beers","clinking beer mugs"],u:"1f37b",a:"0.6"},{n:["clinking glasses"],u:"1f942",a:"3.0"},{n:["tumbler glass"],u:"1f943",a:"3.0"},{n:["pouring liquid"],u:"1fad7",a:"14.0"},{n:["cup with straw"],u:"1f964",a:"5.0"},{n:["bubble tea"],u:"1f9cb",a:"13.0"},{n:["beverage box"],u:"1f9c3",a:"12.0"},{n:["mate drink"],u:"1f9c9",a:"12.0"},{n:["ice cube"],u:"1f9ca",a:"12.0"},{n:["chopsticks"],u:"1f962",a:"5.0"},{n:["knife fork plate","fork and knife with plate"],u:"1f37d-fe0f",a:"0.7"},{n:["fork and knife"],u:"1f374",a:"0.6"},{n:["spoon"],u:"1f944",a:"3.0"},{n:["hocho","knife"],u:"1f52a",a:"0.6"},{n:["jar"],u:"1fad9",a:"14.0"},{n:["amphora"],u:"1f3fa",a:"1.0"}],mke=[{n:["earth africa","earth globe europe-africa"],u:"1f30d",a:"0.7"},{n:["earth americas","earth globe americas"],u:"1f30e",a:"0.7"},{n:["earth asia","earth globe asia-australia"],u:"1f30f",a:"0.6"},{n:["globe with meridians"],u:"1f310",a:"1.0"},{n:["world map"],u:"1f5fa-fe0f",a:"0.7"},{n:["japan","silhouette of japan"],u:"1f5fe",a:"0.6"},{n:["compass"],u:"1f9ed",a:"11.0"},{n:["snow-capped mountain","snow capped mountain"],u:"1f3d4-fe0f",a:"0.7"},{n:["mountain"],u:"26f0-fe0f",a:"0.7"},{n:["volcano"],u:"1f30b",a:"0.6"},{n:["mount fuji"],u:"1f5fb",a:"0.6"},{n:["camping"],u:"1f3d5-fe0f",a:"0.7"},{n:["beach with umbrella"],u:"1f3d6-fe0f",a:"0.7"},{n:["desert"],u:"1f3dc-fe0f",a:"0.7"},{n:["desert island"],u:"1f3dd-fe0f",a:"0.7"},{n:["national park"],u:"1f3de-fe0f",a:"0.7"},{n:["stadium"],u:"1f3df-fe0f",a:"0.7"},{n:["classical building"],u:"1f3db-fe0f",a:"0.7"},{n:["building construction"],u:"1f3d7-fe0f",a:"0.7"},{n:["brick","bricks"],u:"1f9f1",a:"11.0"},{n:["rock"],u:"1faa8",a:"13.0"},{n:["wood"],u:"1fab5",a:"13.0"},{n:["hut"],u:"1f6d6",a:"13.0"},{n:["houses","house buildings"],u:"1f3d8-fe0f",a:"0.7"},{n:["derelict house","derelict house building"],u:"1f3da-fe0f",a:"0.7"},{n:["house","house building"],u:"1f3e0",a:"0.6"},{n:["house with garden"],u:"1f3e1",a:"0.6"},{n:["office","office building"],u:"1f3e2",a:"0.6"},{n:["post office","japanese post office"],u:"1f3e3",a:"0.6"},{n:["european post office"],u:"1f3e4",a:"1.0"},{n:["hospital"],u:"1f3e5",a:"0.6"},{n:["bank"],u:"1f3e6",a:"0.6"},{n:["hotel"],u:"1f3e8",a:"0.6"},{n:["love hotel"],u:"1f3e9",a:"0.6"},{n:["convenience store"],u:"1f3ea",a:"0.6"},{n:["school"],u:"1f3eb",a:"0.6"},{n:["department store"],u:"1f3ec",a:"0.6"},{n:["factory"],u:"1f3ed",a:"0.6"},{n:["japanese castle"],u:"1f3ef",a:"0.6"},{n:["european castle"],u:"1f3f0",a:"0.6"},{n:["wedding"],u:"1f492",a:"0.6"},{n:["tokyo tower"],u:"1f5fc",a:"0.6"},{n:["statue of liberty"],u:"1f5fd",a:"0.6"},{n:["church"],u:"26ea",a:"0.6"},{n:["mosque"],u:"1f54c",a:"1.0"},{n:["hindu temple"],u:"1f6d5",a:"12.0"},{n:["synagogue"],u:"1f54d",a:"1.0"},{n:["shinto shrine"],u:"26e9-fe0f",a:"0.7"},{n:["kaaba"],u:"1f54b",a:"1.0"},{n:["fountain"],u:"26f2",a:"0.6"},{n:["tent"],u:"26fa",a:"0.6"},{n:["foggy"],u:"1f301",a:"0.6"},{n:["night with stars"],u:"1f303",a:"0.6"},{n:["cityscape"],u:"1f3d9-fe0f",a:"0.7"},{n:["sunrise over mountains"],u:"1f304",a:"0.6"},{n:["sunrise"],u:"1f305",a:"0.6"},{n:["city sunset","cityscape at dusk"],u:"1f306",a:"0.6"},{n:["city sunrise","sunset over buildings"],u:"1f307",a:"0.6"},{n:["bridge at night"],u:"1f309",a:"0.6"},{n:["hotsprings","hot springs"],u:"2668-fe0f",a:"0.6"},{n:["carousel horse"],u:"1f3a0",a:"0.6"},{n:["playground slide"],u:"1f6dd",a:"14.0"},{n:["ferris wheel"],u:"1f3a1",a:"0.6"},{n:["roller coaster"],u:"1f3a2",a:"0.6"},{n:["barber","barber pole"],u:"1f488",a:"0.6"},{n:["circus tent"],u:"1f3aa",a:"0.6"},{n:["steam locomotive"],u:"1f682",a:"1.0"},{n:["railway car"],u:"1f683",a:"0.6"},{n:["high-speed train","bullettrain side"],u:"1f684",a:"0.6"},{n:["bullettrain front","high-speed train with bullet nose"],u:"1f685",a:"0.6"},{n:["train","train2"],u:"1f686",a:"1.0"},{n:["metro"],u:"1f687",a:"0.6"},{n:["light rail"],u:"1f688",a:"1.0"},{n:["station"],u:"1f689",a:"0.6"},{n:["tram"],u:"1f68a",a:"1.0"},{n:["monorail"],u:"1f69d",a:"1.0"},{n:["mountain railway"],u:"1f69e",a:"1.0"},{n:["train","tram car"],u:"1f68b",a:"1.0"},{n:["bus"],u:"1f68c",a:"0.6"},{n:["oncoming bus"],u:"1f68d",a:"0.7"},{n:["trolleybus"],u:"1f68e",a:"1.0"},{n:["minibus"],u:"1f690",a:"1.0"},{n:["ambulance"],u:"1f691",a:"0.6"},{n:["fire engine"],u:"1f692",a:"0.6"},{n:["police car"],u:"1f693",a:"0.6"},{n:["oncoming police car"],u:"1f694",a:"0.7"},{n:["taxi"],u:"1f695",a:"0.6"},{n:["oncoming taxi"],u:"1f696",a:"1.0"},{n:["car","red car","automobile"],u:"1f697",a:"0.6"},{n:["oncoming automobile"],u:"1f698",a:"0.7"},{n:["blue car","recreational vehicle"],u:"1f699",a:"0.6"},{n:["pickup truck"],u:"1f6fb",a:"13.0"},{n:["truck","delivery truck"],u:"1f69a",a:"0.6"},{n:["articulated lorry"],u:"1f69b",a:"1.0"},{n:["tractor"],u:"1f69c",a:"1.0"},{n:["racing car"],u:"1f3ce-fe0f",a:"0.7"},{n:["motorcycle","racing motorcycle"],u:"1f3cd-fe0f",a:"0.7"},{n:["motor scooter"],u:"1f6f5",a:"3.0"},{n:["manual wheelchair"],u:"1f9bd",a:"12.0"},{n:["motorized wheelchair"],u:"1f9bc",a:"12.0"},{n:["auto rickshaw"],u:"1f6fa",a:"12.0"},{n:["bike","bicycle"],u:"1f6b2",a:"0.6"},{n:["scooter"],u:"1f6f4",a:"3.0"},{n:["skateboard"],u:"1f6f9",a:"11.0"},{n:["roller skate"],u:"1f6fc",a:"13.0"},{n:["busstop","bus stop"],u:"1f68f",a:"0.6"},{n:["motorway"],u:"1f6e3-fe0f",a:"0.7"},{n:["railway track"],u:"1f6e4-fe0f",a:"0.7"},{n:["oil drum"],u:"1f6e2-fe0f",a:"0.7"},{n:["fuelpump","fuel pump"],u:"26fd",a:"0.6"},{n:["wheel"],u:"1f6de",a:"14.0"},{n:["rotating light","police cars revolving light"],u:"1f6a8",a:"0.6"},{n:["traffic light","horizontal traffic light"],u:"1f6a5",a:"0.6"},{n:["vertical traffic light"],u:"1f6a6",a:"1.0"},{n:["octagonal sign"],u:"1f6d1",a:"3.0"},{n:["construction","construction sign"],u:"1f6a7",a:"0.6"},{n:["anchor"],u:"2693",a:"0.6"},{n:["ring buoy"],u:"1f6df",a:"14.0"},{n:["boat","sailboat"],u:"26f5",a:"0.6"},{n:["canoe"],u:"1f6f6",a:"3.0"},{n:["speedboat"],u:"1f6a4",a:"0.6"},{n:["passenger ship"],u:"1f6f3-fe0f",a:"0.7"},{n:["ferry"],u:"26f4-fe0f",a:"0.7"},{n:["motor boat"],u:"1f6e5-fe0f",a:"0.7"},{n:["ship"],u:"1f6a2",a:"0.6"},{n:["airplane"],u:"2708-fe0f",a:"0.6"},{n:["small airplane"],u:"1f6e9-fe0f",a:"0.7"},{n:["airplane departure"],u:"1f6eb",a:"1.0"},{n:["airplane arriving"],u:"1f6ec",a:"1.0"},{n:["parachute"],u:"1fa82",a:"12.0"},{n:["seat"],u:"1f4ba",a:"0.6"},{n:["helicopter"],u:"1f681",a:"1.0"},{n:["suspension railway"],u:"1f69f",a:"1.0"},{n:["mountain cableway"],u:"1f6a0",a:"1.0"},{n:["aerial tramway"],u:"1f6a1",a:"1.0"},{n:["satellite"],u:"1f6f0-fe0f",a:"0.7"},{n:["rocket"],u:"1f680",a:"0.6"},{n:["flying saucer"],u:"1f6f8",a:"5.0"},{n:["bellhop bell"],u:"1f6ce-fe0f",a:"0.7"},{n:["luggage"],u:"1f9f3",a:"11.0"},{n:["hourglass"],u:"231b",a:"0.6"},{n:["hourglass flowing sand","hourglass with flowing sand"],u:"23f3",a:"0.6"},{n:["watch"],u:"231a",a:"0.6"},{n:["alarm clock"],u:"23f0",a:"0.6"},{n:["stopwatch"],u:"23f1-fe0f",a:"1.0"},{n:["timer clock"],u:"23f2-fe0f",a:"1.0"},{n:["mantelpiece clock"],u:"1f570-fe0f",a:"0.7"},{n:["clock12","clock face twelve oclock"],u:"1f55b",a:"0.6"},{n:["clock1230","clock face twelve-thirty"],u:"1f567",a:"0.7"},{n:["clock1","clock face one oclock"],u:"1f550",a:"0.6"},{n:["clock130","clock face one-thirty"],u:"1f55c",a:"0.7"},{n:["clock2","clock face two oclock"],u:"1f551",a:"0.6"},{n:["clock230","clock face two-thirty"],u:"1f55d",a:"0.7"},{n:["clock3","clock face three oclock"],u:"1f552",a:"0.6"},{n:["clock330","clock face three-thirty"],u:"1f55e",a:"0.7"},{n:["clock4","clock face four oclock"],u:"1f553",a:"0.6"},{n:["clock430","clock face four-thirty"],u:"1f55f",a:"0.7"},{n:["clock5","clock face five oclock"],u:"1f554",a:"0.6"},{n:["clock530","clock face five-thirty"],u:"1f560",a:"0.7"},{n:["clock6","clock face six oclock"],u:"1f555",a:"0.6"},{n:["clock630","clock face six-thirty"],u:"1f561",a:"0.7"},{n:["clock7","clock face seven oclock"],u:"1f556",a:"0.6"},{n:["clock730","clock face seven-thirty"],u:"1f562",a:"0.7"},{n:["clock8","clock face eight oclock"],u:"1f557",a:"0.6"},{n:["clock830","clock face eight-thirty"],u:"1f563",a:"0.7"},{n:["clock9","clock face nine oclock"],u:"1f558",a:"0.6"},{n:["clock930","clock face nine-thirty"],u:"1f564",a:"0.7"},{n:["clock10","clock face ten oclock"],u:"1f559",a:"0.6"},{n:["clock1030","clock face ten-thirty"],u:"1f565",a:"0.7"},{n:["clock11","clock face eleven oclock"],u:"1f55a",a:"0.6"},{n:["clock1130","clock face eleven-thirty"],u:"1f566",a:"0.7"},{n:["new moon","new moon symbol"],u:"1f311",a:"0.6"},{n:["waxing crescent moon","waxing crescent moon symbol"],u:"1f312",a:"1.0"},{n:["first quarter moon","first quarter moon symbol"],u:"1f313",a:"0.6"},{n:["moon","waxing gibbous moon","waxing gibbous moon symbol"],u:"1f314",a:"0.6"},{n:["full moon","full moon symbol"],u:"1f315",a:"0.6"},{n:["waning gibbous moon","waning gibbous moon symbol"],u:"1f316",a:"1.0"},{n:["last quarter moon","last quarter moon symbol"],u:"1f317",a:"1.0"},{n:["waning crescent moon","waning crescent moon symbol"],u:"1f318",a:"1.0"},{n:["crescent moon"],u:"1f319",a:"0.6"},{n:["new moon with face"],u:"1f31a",a:"1.0"},{n:["first quarter moon with face"],u:"1f31b",a:"0.6"},{n:["last quarter moon with face"],u:"1f31c",a:"0.7"},{n:["thermometer"],u:"1f321-fe0f",a:"0.7"},{n:["sunny","black sun with rays"],u:"2600-fe0f",a:"0.6"},{n:["full moon with face"],u:"1f31d",a:"1.0"},{n:["sun with face"],u:"1f31e",a:"1.0"},{n:["ringed planet"],u:"1fa90",a:"12.0"},{n:["star","white medium star"],u:"2b50",a:"0.6"},{n:["star2","glowing star"],u:"1f31f",a:"0.6"},{n:["stars","shooting star"],u:"1f320",a:"0.6"},{n:["milky way"],u:"1f30c",a:"0.6"},{n:["cloud"],u:"2601-fe0f",a:"0.6"},{n:["partly sunny","sun behind cloud"],u:"26c5",a:"0.6"},{n:["thunder cloud and rain","cloud with lightning and rain"],u:"26c8-fe0f",a:"0.7"},{n:["mostly sunny","sun small cloud","sun behind small cloud"],u:"1f324-fe0f",a:"0.7"},{n:["barely sunny","sun behind cloud","sun behind large cloud"],u:"1f325-fe0f",a:"0.7"},{n:["partly sunny rain","sun behind rain cloud"],u:"1f326-fe0f",a:"0.7"},{n:["rain cloud","cloud with rain"],u:"1f327-fe0f",a:"0.7"},{n:["snow cloud","cloud with snow"],u:"1f328-fe0f",a:"0.7"},{n:["lightning","lightning cloud","cloud with lightning"],u:"1f329-fe0f",a:"0.7"},{n:["tornado","tornado cloud"],u:"1f32a-fe0f",a:"0.7"},{n:["fog"],u:"1f32b-fe0f",a:"0.7"},{n:["wind face","wind blowing face"],u:"1f32c-fe0f",a:"0.7"},{n:["cyclone"],u:"1f300",a:"0.6"},{n:["rainbow"],u:"1f308",a:"0.6"},{n:["closed umbrella"],u:"1f302",a:"0.6"},{n:["umbrella"],u:"2602-fe0f",a:"0.7"},{n:["umbrella with rain drops"],u:"2614",a:"0.6"},{n:["umbrella on ground"],u:"26f1-fe0f",a:"0.7"},{n:["zap","high voltage sign"],u:"26a1",a:"0.6"},{n:["snowflake"],u:"2744-fe0f",a:"0.6"},{n:["snowman"],u:"2603-fe0f",a:"0.7"},{n:["snowman without snow"],u:"26c4",a:"0.6"},{n:["comet"],u:"2604-fe0f",a:"1.0"},{n:["fire"],u:"1f525",a:"0.6"},{n:["droplet"],u:"1f4a7",a:"0.6"},{n:["ocean","water wave"],u:"1f30a",a:"0.6"}],pke=[{n:["jack-o-lantern","jack o lantern"],u:"1f383",a:"0.6"},{n:["christmas tree"],u:"1f384",a:"0.6"},{n:["fireworks"],u:"1f386",a:"0.6"},{n:["sparkler","firework sparkler"],u:"1f387",a:"0.6"},{n:["firecracker"],u:"1f9e8",a:"11.0"},{n:["sparkles"],u:"2728",a:"0.6"},{n:["balloon"],u:"1f388",a:"0.6"},{n:["tada","party popper"],u:"1f389",a:"0.6"},{n:["confetti ball"],u:"1f38a",a:"0.6"},{n:["tanabata tree"],u:"1f38b",a:"0.6"},{n:["bamboo","pine decoration"],u:"1f38d",a:"0.6"},{n:["dolls","japanese dolls"],u:"1f38e",a:"0.6"},{n:["flags","carp streamer"],u:"1f38f",a:"0.6"},{n:["wind chime"],u:"1f390",a:"0.6"},{n:["rice scene","moon viewing ceremony"],u:"1f391",a:"0.6"},{n:["red envelope","red gift envelope"],u:"1f9e7",a:"11.0"},{n:["ribbon"],u:"1f380",a:"0.6"},{n:["gift","wrapped present"],u:"1f381",a:"0.6"},{n:["reminder ribbon"],u:"1f397-fe0f",a:"0.7"},{n:["admission tickets"],u:"1f39f-fe0f",a:"0.7"},{n:["ticket"],u:"1f3ab",a:"0.6"},{n:["medal","military medal"],u:"1f396-fe0f",a:"0.7"},{n:["trophy"],u:"1f3c6",a:"0.6"},{n:["sports medal"],u:"1f3c5",a:"1.0"},{n:["first place medal"],u:"1f947",a:"3.0"},{n:["second place medal"],u:"1f948",a:"3.0"},{n:["third place medal"],u:"1f949",a:"3.0"},{n:["soccer","soccer ball"],u:"26bd",a:"0.6"},{n:["baseball"],u:"26be",a:"0.6"},{n:["softball"],u:"1f94e",a:"11.0"},{n:["basketball","basketball and hoop"],u:"1f3c0",a:"0.6"},{n:["volleyball"],u:"1f3d0",a:"1.0"},{n:["football","american football"],u:"1f3c8",a:"0.6"},{n:["rugby football"],u:"1f3c9",a:"1.0"},{n:["tennis","tennis racquet and ball"],u:"1f3be",a:"0.6"},{n:["flying disc"],u:"1f94f",a:"11.0"},{n:["bowling"],u:"1f3b3",a:"0.6"},{n:["cricket bat and ball"],u:"1f3cf",a:"1.0"},{n:["field hockey stick and ball"],u:"1f3d1",a:"1.0"},{n:["ice hockey stick and puck"],u:"1f3d2",a:"1.0"},{n:["lacrosse","lacrosse stick and ball"],u:"1f94d",a:"11.0"},{n:["table tennis paddle and ball"],u:"1f3d3",a:"1.0"},{n:["badminton racquet and shuttlecock"],u:"1f3f8",a:"1.0"},{n:["boxing glove"],u:"1f94a",a:"3.0"},{n:["martial arts uniform"],u:"1f94b",a:"3.0"},{n:["goal net"],u:"1f945",a:"3.0"},{n:["golf","flag in hole"],u:"26f3",a:"0.6"},{n:["ice skate"],u:"26f8-fe0f",a:"0.7"},{n:["fishing pole and fish"],u:"1f3a3",a:"0.6"},{n:["diving mask"],u:"1f93f",a:"12.0"},{n:["running shirt with sash"],u:"1f3bd",a:"0.6"},{n:["ski","ski and ski boot"],u:"1f3bf",a:"0.6"},{n:["sled"],u:"1f6f7",a:"5.0"},{n:["curling stone"],u:"1f94c",a:"5.0"},{n:["dart","direct hit"],u:"1f3af",a:"0.6"},{n:["yo-yo"],u:"1fa80",a:"12.0"},{n:["kite"],u:"1fa81",a:"12.0"},{n:["gun","pistol"],u:"1f52b",a:"0.6"},{n:["8ball","billiards"],u:"1f3b1",a:"0.6"},{n:["crystal ball"],u:"1f52e",a:"0.6"},{n:["magic wand"],u:"1fa84",a:"13.0"},{n:["video game"],u:"1f3ae",a:"0.6"},{n:["joystick"],u:"1f579-fe0f",a:"0.7"},{n:["slot machine"],u:"1f3b0",a:"0.6"},{n:["game die"],u:"1f3b2",a:"0.6"},{n:["jigsaw","jigsaw puzzle piece"],u:"1f9e9",a:"11.0"},{n:["teddy bear"],u:"1f9f8",a:"11.0"},{n:["pinata"],u:"1fa85",a:"13.0"},{n:["mirror ball"],u:"1faa9",a:"14.0"},{n:["nesting dolls"],u:"1fa86",a:"13.0"},{n:["spades","black spade suit"],u:"2660-fe0f",a:"0.6"},{n:["hearts","black heart suit"],u:"2665-fe0f",a:"0.6"},{n:["diamonds","black diamond suit"],u:"2666-fe0f",a:"0.6"},{n:["clubs","black club suit"],u:"2663-fe0f",a:"0.6"},{n:["chess pawn"],u:"265f-fe0f",a:"11.0"},{n:["black joker","playing card black joker"],u:"1f0cf",a:"0.6"},{n:["mahjong","mahjong tile red dragon"],u:"1f004",a:"0.6"},{n:["flower playing cards"],u:"1f3b4",a:"0.6"},{n:["performing arts"],u:"1f3ad",a:"0.6"},{n:["framed picture","frame with picture"],u:"1f5bc-fe0f",a:"0.7"},{n:["art","artist palette"],u:"1f3a8",a:"0.6"},{n:["thread","spool of thread"],u:"1f9f5",a:"11.0"},{n:["sewing needle"],u:"1faa1",a:"13.0"},{n:["yarn","ball of yarn"],u:"1f9f6",a:"11.0"},{n:["knot"],u:"1faa2",a:"13.0"}],gke=[{n:["eyeglasses"],u:"1f453",a:"0.6"},{n:["sunglasses","dark sunglasses"],u:"1f576-fe0f",a:"0.7"},{n:["goggles"],u:"1f97d",a:"11.0"},{n:["lab coat"],u:"1f97c",a:"11.0"},{n:["safety vest"],u:"1f9ba",a:"12.0"},{n:["necktie"],u:"1f454",a:"0.6"},{n:["shirt","tshirt","t-shirt"],u:"1f455",a:"0.6"},{n:["jeans"],u:"1f456",a:"0.6"},{n:["scarf"],u:"1f9e3",a:"5.0"},{n:["gloves"],u:"1f9e4",a:"5.0"},{n:["coat"],u:"1f9e5",a:"5.0"},{n:["socks"],u:"1f9e6",a:"5.0"},{n:["dress"],u:"1f457",a:"0.6"},{n:["kimono"],u:"1f458",a:"0.6"},{n:["sari"],u:"1f97b",a:"12.0"},{n:["one-piece swimsuit"],u:"1fa71",a:"12.0"},{n:["briefs"],u:"1fa72",a:"12.0"},{n:["shorts"],u:"1fa73",a:"12.0"},{n:["bikini"],u:"1f459",a:"0.6"},{n:["womans clothes"],u:"1f45a",a:"0.6"},{n:["folding hand fan"],u:"1faad",a:"15.0"},{n:["purse"],u:"1f45b",a:"0.6"},{n:["handbag"],u:"1f45c",a:"0.6"},{n:["pouch"],u:"1f45d",a:"0.6"},{n:["shopping bags"],u:"1f6cd-fe0f",a:"0.7"},{n:["school satchel"],u:"1f392",a:"0.6"},{n:["thong sandal"],u:"1fa74",a:"13.0"},{n:["shoe","mans shoe"],u:"1f45e",a:"0.6"},{n:["athletic shoe"],u:"1f45f",a:"0.6"},{n:["hiking boot"],u:"1f97e",a:"11.0"},{n:["flat shoe","womans flat shoe"],u:"1f97f",a:"11.0"},{n:["high heel","high-heeled shoe"],u:"1f460",a:"0.6"},{n:["sandal","womans sandal"],u:"1f461",a:"0.6"},{n:["ballet shoes"],u:"1fa70",a:"12.0"},{n:["boot","womans boots"],u:"1f462",a:"0.6"},{n:["hair pick"],u:"1faae",a:"15.0"},{n:["crown"],u:"1f451",a:"0.6"},{n:["womans hat"],u:"1f452",a:"0.6"},{n:["tophat","top hat"],u:"1f3a9",a:"0.6"},{n:["mortar board","graduation cap"],u:"1f393",a:"0.6"},{n:["billed cap"],u:"1f9e2",a:"5.0"},{n:["military helmet"],u:"1fa96",a:"13.0"},{n:["rescue workers helmet","helmet with white cross"],u:"26d1-fe0f",a:"0.7"},{n:["prayer beads"],u:"1f4ff",a:"1.0"},{n:["lipstick"],u:"1f484",a:"0.6"},{n:["ring"],u:"1f48d",a:"0.6"},{n:["gem","gem stone"],u:"1f48e",a:"0.6"},{n:["mute","speaker with cancellation stroke"],u:"1f507",a:"1.0"},{n:["speaker"],u:"1f508",a:"0.7"},{n:["sound","speaker with one sound wave"],u:"1f509",a:"1.0"},{n:["loud sound","speaker with three sound waves"],u:"1f50a",a:"0.6"},{n:["loudspeaker","public address loudspeaker"],u:"1f4e2",a:"0.6"},{n:["mega","cheering megaphone"],u:"1f4e3",a:"0.6"},{n:["postal horn"],u:"1f4ef",a:"1.0"},{n:["bell"],u:"1f514",a:"0.6"},{n:["no bell","bell with cancellation stroke"],u:"1f515",a:"1.0"},{n:["musical score"],u:"1f3bc",a:"0.6"},{n:["musical note"],u:"1f3b5",a:"0.6"},{n:["notes","multiple musical notes"],u:"1f3b6",a:"0.6"},{n:["studio microphone"],u:"1f399-fe0f",a:"0.7"},{n:["level slider"],u:"1f39a-fe0f",a:"0.7"},{n:["control knobs"],u:"1f39b-fe0f",a:"0.7"},{n:["microphone"],u:"1f3a4",a:"0.6"},{n:["headphone","headphones"],u:"1f3a7",a:"0.6"},{n:["radio"],u:"1f4fb",a:"0.6"},{n:["saxophone"],u:"1f3b7",a:"0.6"},{n:["accordion"],u:"1fa97",a:"13.0"},{n:["guitar"],u:"1f3b8",a:"0.6"},{n:["musical keyboard"],u:"1f3b9",a:"0.6"},{n:["trumpet"],u:"1f3ba",a:"0.6"},{n:["violin"],u:"1f3bb",a:"0.6"},{n:["banjo"],u:"1fa95",a:"12.0"},{n:["drum with drumsticks"],u:"1f941",a:"3.0"},{n:["long drum"],u:"1fa98",a:"13.0"},{n:["maracas"],u:"1fa87",a:"15.0"},{n:["flute"],u:"1fa88",a:"15.0"},{n:["iphone","mobile phone"],u:"1f4f1",a:"0.6"},{n:["calling","mobile phone with rightwards arrow at left"],u:"1f4f2",a:"0.6"},{n:["phone","telephone","black telephone"],u:"260e-fe0f",a:"0.6"},{n:["telephone receiver"],u:"1f4de",a:"0.6"},{n:["pager"],u:"1f4df",a:"0.6"},{n:["fax","fax machine"],u:"1f4e0",a:"0.6"},{n:["battery"],u:"1f50b",a:"0.6"},{n:["low battery"],u:"1faab",a:"14.0"},{n:["electric plug"],u:"1f50c",a:"0.6"},{n:["computer","personal computer"],u:"1f4bb",a:"0.6"},{n:["desktop computer"],u:"1f5a5-fe0f",a:"0.7"},{n:["printer"],u:"1f5a8-fe0f",a:"0.7"},{n:["keyboard"],u:"2328-fe0f",a:"1.0"},{n:["computer mouse","three button mouse"],u:"1f5b1-fe0f",a:"0.7"},{n:["trackball"],u:"1f5b2-fe0f",a:"0.7"},{n:["minidisc"],u:"1f4bd",a:"0.6"},{n:["floppy disk"],u:"1f4be",a:"0.6"},{n:["cd","optical disc"],u:"1f4bf",a:"0.6"},{n:["dvd"],u:"1f4c0",a:"0.6"},{n:["abacus"],u:"1f9ee",a:"11.0"},{n:["movie camera"],u:"1f3a5",a:"0.6"},{n:["film frames"],u:"1f39e-fe0f",a:"0.7"},{n:["film projector"],u:"1f4fd-fe0f",a:"0.7"},{n:["clapper","clapper board"],u:"1f3ac",a:"0.6"},{n:["tv","television"],u:"1f4fa",a:"0.6"},{n:["camera"],u:"1f4f7",a:"0.6"},{n:["camera with flash"],u:"1f4f8",a:"1.0"},{n:["video camera"],u:"1f4f9",a:"0.6"},{n:["vhs","videocassette"],u:"1f4fc",a:"0.6"},{n:["mag","left-pointing magnifying glass"],u:"1f50d",a:"0.6"},{n:["mag right","right-pointing magnifying glass"],u:"1f50e",a:"0.6"},{n:["candle"],u:"1f56f-fe0f",a:"0.7"},{n:["bulb","electric light bulb"],u:"1f4a1",a:"0.6"},{n:["flashlight","electric torch"],u:"1f526",a:"0.6"},{n:["lantern","izakaya lantern"],u:"1f3ee",a:"0.6"},{n:["diya lamp"],u:"1fa94",a:"12.0"},{n:["notebook with decorative cover"],u:"1f4d4",a:"0.6"},{n:["closed book"],u:"1f4d5",a:"0.6"},{n:["book","open book"],u:"1f4d6",a:"0.6"},{n:["green book"],u:"1f4d7",a:"0.6"},{n:["blue book"],u:"1f4d8",a:"0.6"},{n:["orange book"],u:"1f4d9",a:"0.6"},{n:["books"],u:"1f4da",a:"0.6"},{n:["notebook"],u:"1f4d3",a:"0.6"},{n:["ledger"],u:"1f4d2",a:"0.6"},{n:["page with curl"],u:"1f4c3",a:"0.6"},{n:["scroll"],u:"1f4dc",a:"0.6"},{n:["page facing up"],u:"1f4c4",a:"0.6"},{n:["newspaper"],u:"1f4f0",a:"0.6"},{n:["rolled-up newspaper","rolled up newspaper"],u:"1f5de-fe0f",a:"0.7"},{n:["bookmark tabs"],u:"1f4d1",a:"0.6"},{n:["bookmark"],u:"1f516",a:"0.6"},{n:["label"],u:"1f3f7-fe0f",a:"0.7"},{n:["moneybag","money bag"],u:"1f4b0",a:"0.6"},{n:["coin"],u:"1fa99",a:"13.0"},{n:["yen","banknote with yen sign"],u:"1f4b4",a:"0.6"},{n:["dollar","banknote with dollar sign"],u:"1f4b5",a:"0.6"},{n:["euro","banknote with euro sign"],u:"1f4b6",a:"1.0"},{n:["pound","banknote with pound sign"],u:"1f4b7",a:"1.0"},{n:["money with wings"],u:"1f4b8",a:"0.6"},{n:["credit card"],u:"1f4b3",a:"0.6"},{n:["receipt"],u:"1f9fe",a:"11.0"},{n:["chart","chart with upwards trend and yen sign"],u:"1f4b9",a:"0.6"},{n:["email","envelope"],u:"2709-fe0f",a:"0.6"},{n:["e-mail","e-mail symbol"],u:"1f4e7",a:"0.6"},{n:["incoming envelope"],u:"1f4e8",a:"0.6"},{n:["envelope with arrow","envelope with downwards arrow above"],u:"1f4e9",a:"0.6"},{n:["outbox tray"],u:"1f4e4",a:"0.6"},{n:["inbox tray"],u:"1f4e5",a:"0.6"},{n:["package"],u:"1f4e6",a:"0.6"},{n:["mailbox","closed mailbox with raised flag"],u:"1f4eb",a:"0.6"},{n:["mailbox closed","closed mailbox with lowered flag"],u:"1f4ea",a:"0.6"},{n:["mailbox with mail","open mailbox with raised flag"],u:"1f4ec",a:"0.7"},{n:["mailbox with no mail","open mailbox with lowered flag"],u:"1f4ed",a:"0.7"},{n:["postbox"],u:"1f4ee",a:"0.6"},{n:["ballot box with ballot"],u:"1f5f3-fe0f",a:"0.7"},{n:["pencil","pencil2"],u:"270f-fe0f",a:"0.6"},{n:["black nib"],u:"2712-fe0f",a:"0.6"},{n:["fountain pen","lower left fountain pen"],u:"1f58b-fe0f",a:"0.7"},{n:["pen","lower left ballpoint pen"],u:"1f58a-fe0f",a:"0.7"},{n:["paintbrush","lower left paintbrush"],u:"1f58c-fe0f",a:"0.7"},{n:["crayon","lower left crayon"],u:"1f58d-fe0f",a:"0.7"},{n:["memo","pencil"],u:"1f4dd",a:"0.6"},{n:["briefcase"],u:"1f4bc",a:"0.6"},{n:["file folder"],u:"1f4c1",a:"0.6"},{n:["open file folder"],u:"1f4c2",a:"0.6"},{n:["card index dividers"],u:"1f5c2-fe0f",a:"0.7"},{n:["date","calendar"],u:"1f4c5",a:"0.6"},{n:["calendar","tear-off calendar"],u:"1f4c6",a:"0.6"},{n:["spiral notepad","spiral note pad"],u:"1f5d2-fe0f",a:"0.7"},{n:["spiral calendar","spiral calendar pad"],u:"1f5d3-fe0f",a:"0.7"},{n:["card index"],u:"1f4c7",a:"0.6"},{n:["chart with upwards trend"],u:"1f4c8",a:"0.6"},{n:["chart with downwards trend"],u:"1f4c9",a:"0.6"},{n:["bar chart"],u:"1f4ca",a:"0.6"},{n:["clipboard"],u:"1f4cb",a:"0.6"},{n:["pushpin"],u:"1f4cc",a:"0.6"},{n:["round pushpin"],u:"1f4cd",a:"0.6"},{n:["paperclip"],u:"1f4ce",a:"0.6"},{n:["linked paperclips"],u:"1f587-fe0f",a:"0.7"},{n:["straight ruler"],u:"1f4cf",a:"0.6"},{n:["triangular ruler"],u:"1f4d0",a:"0.6"},{n:["scissors","black scissors"],u:"2702-fe0f",a:"0.6"},{n:["card file box"],u:"1f5c3-fe0f",a:"0.7"},{n:["file cabinet"],u:"1f5c4-fe0f",a:"0.7"},{n:["wastebasket"],u:"1f5d1-fe0f",a:"0.7"},{n:["lock"],u:"1f512",a:"0.6"},{n:["unlock","open lock"],u:"1f513",a:"0.6"},{n:["lock with ink pen"],u:"1f50f",a:"0.6"},{n:["closed lock with key"],u:"1f510",a:"0.6"},{n:["key"],u:"1f511",a:"0.6"},{n:["old key"],u:"1f5dd-fe0f",a:"0.7"},{n:["hammer"],u:"1f528",a:"0.6"},{n:["axe"],u:"1fa93",a:"12.0"},{n:["pick"],u:"26cf-fe0f",a:"0.7"},{n:["hammer and pick"],u:"2692-fe0f",a:"1.0"},{n:["hammer and wrench"],u:"1f6e0-fe0f",a:"0.7"},{n:["dagger","dagger knife"],u:"1f5e1-fe0f",a:"0.7"},{n:["crossed swords"],u:"2694-fe0f",a:"1.0"},{n:["bomb"],u:"1f4a3",a:"0.6"},{n:["boomerang"],u:"1fa83",a:"13.0"},{n:["bow and arrow"],u:"1f3f9",a:"1.0"},{n:["shield"],u:"1f6e1-fe0f",a:"0.7"},{n:["carpentry saw"],u:"1fa9a",a:"13.0"},{n:["wrench"],u:"1f527",a:"0.6"},{n:["screwdriver"],u:"1fa9b",a:"13.0"},{n:["nut and bolt"],u:"1f529",a:"0.6"},{n:["gear"],u:"2699-fe0f",a:"1.0"},{n:["clamp","compression"],u:"1f5dc-fe0f",a:"0.7"},{n:["scales","balance scale"],u:"2696-fe0f",a:"1.0"},{n:["probing cane"],u:"1f9af",a:"12.0"},{n:["link","link symbol"],u:"1f517",a:"0.6"},{n:["broken chain"],u:"26d3-fe0f-200d-1f4a5",a:"15.1"},{n:["chains"],u:"26d3-fe0f",a:"0.7"},{n:["hook"],u:"1fa9d",a:"13.0"},{n:["toolbox"],u:"1f9f0",a:"11.0"},{n:["magnet"],u:"1f9f2",a:"11.0"},{n:["ladder"],u:"1fa9c",a:"13.0"},{n:["alembic"],u:"2697-fe0f",a:"1.0"},{n:["test tube"],u:"1f9ea",a:"11.0"},{n:["petri dish"],u:"1f9eb",a:"11.0"},{n:["dna","dna double helix"],u:"1f9ec",a:"11.0"},{n:["microscope"],u:"1f52c",a:"1.0"},{n:["telescope"],u:"1f52d",a:"1.0"},{n:["satellite antenna"],u:"1f4e1",a:"0.6"},{n:["syringe"],u:"1f489",a:"0.6"},{n:["drop of blood"],u:"1fa78",a:"12.0"},{n:["pill"],u:"1f48a",a:"0.6"},{n:["adhesive bandage"],u:"1fa79",a:"12.0"},{n:["crutch"],u:"1fa7c",a:"14.0"},{n:["stethoscope"],u:"1fa7a",a:"12.0"},{n:["x-ray"],u:"1fa7b",a:"14.0"},{n:["door"],u:"1f6aa",a:"0.6"},{n:["elevator"],u:"1f6d7",a:"13.0"},{n:["mirror"],u:"1fa9e",a:"13.0"},{n:["window"],u:"1fa9f",a:"13.0"},{n:["bed"],u:"1f6cf-fe0f",a:"0.7"},{n:["couch and lamp"],u:"1f6cb-fe0f",a:"0.7"},{n:["chair"],u:"1fa91",a:"12.0"},{n:["toilet"],u:"1f6bd",a:"0.6"},{n:["plunger"],u:"1faa0",a:"13.0"},{n:["shower"],u:"1f6bf",a:"1.0"},{n:["bathtub"],u:"1f6c1",a:"1.0"},{n:["mouse trap"],u:"1faa4",a:"13.0"},{n:["razor"],u:"1fa92",a:"12.0"},{n:["lotion bottle"],u:"1f9f4",a:"11.0"},{n:["safety pin"],u:"1f9f7",a:"11.0"},{n:["broom"],u:"1f9f9",a:"11.0"},{n:["basket"],u:"1f9fa",a:"11.0"},{n:["roll of paper"],u:"1f9fb",a:"11.0"},{n:["bucket"],u:"1faa3",a:"13.0"},{n:["soap","bar of soap"],u:"1f9fc",a:"11.0"},{n:["bubbles"],u:"1fae7",a:"14.0"},{n:["toothbrush"],u:"1faa5",a:"13.0"},{n:["sponge"],u:"1f9fd",a:"11.0"},{n:["fire extinguisher"],u:"1f9ef",a:"11.0"},{n:["shopping trolley"],u:"1f6d2",a:"3.0"},{n:["smoking","smoking symbol"],u:"1f6ac",a:"0.6"},{n:["coffin"],u:"26b0-fe0f",a:"1.0"},{n:["headstone"],u:"1faa6",a:"13.0"},{n:["funeral urn"],u:"26b1-fe0f",a:"1.0"},{n:["nazar amulet"],u:"1f9ff",a:"11.0"},{n:["hamsa"],u:"1faac",a:"14.0"},{n:["moyai"],u:"1f5ff",a:"0.6"},{n:["placard"],u:"1faa7",a:"13.0"},{n:["identification card"],u:"1faaa",a:"14.0"}],xke=[{n:["atm","automated teller machine"],u:"1f3e7",a:"0.6"},{n:["put litter in its place","put litter in its place symbol"],u:"1f6ae",a:"1.0"},{n:["potable water","potable water symbol"],u:"1f6b0",a:"1.0"},{n:["wheelchair","wheelchair symbol"],u:"267f",a:"0.6"},{n:["mens","mens symbol"],u:"1f6b9",a:"0.6"},{n:["womens","womens symbol"],u:"1f6ba",a:"0.6"},{n:["restroom"],u:"1f6bb",a:"0.6"},{n:["baby symbol"],u:"1f6bc",a:"0.6"},{n:["wc","water closet"],u:"1f6be",a:"0.6"},{n:["passport control"],u:"1f6c2",a:"1.0"},{n:["customs"],u:"1f6c3",a:"1.0"},{n:["baggage claim"],u:"1f6c4",a:"1.0"},{n:["left luggage"],u:"1f6c5",a:"1.0"},{n:["warning","warning sign"],u:"26a0-fe0f",a:"0.6"},{n:["children crossing"],u:"1f6b8",a:"1.0"},{n:["no entry"],u:"26d4",a:"0.6"},{n:["no entry sign"],u:"1f6ab",a:"0.6"},{n:["no bicycles"],u:"1f6b3",a:"1.0"},{n:["no smoking","no smoking symbol"],u:"1f6ad",a:"0.6"},{n:["do not litter","do not litter symbol"],u:"1f6af",a:"1.0"},{n:["non-potable water","non-potable water symbol"],u:"1f6b1",a:"1.0"},{n:["no pedestrians"],u:"1f6b7",a:"1.0"},{n:["no mobile phones"],u:"1f4f5",a:"1.0"},{n:["underage","no one under eighteen symbol"],u:"1f51e",a:"0.6"},{n:["radioactive","radioactive sign"],u:"2622-fe0f",a:"1.0"},{n:["biohazard","biohazard sign"],u:"2623-fe0f",a:"1.0"},{n:["arrow up","upwards black arrow"],u:"2b06-fe0f",a:"0.6"},{n:["north east arrow","arrow upper right"],u:"2197-fe0f",a:"0.6"},{n:["arrow right","black rightwards arrow"],u:"27a1-fe0f",a:"0.6"},{n:["south east arrow","arrow lower right"],u:"2198-fe0f",a:"0.6"},{n:["arrow down","downwards black arrow"],u:"2b07-fe0f",a:"0.6"},{n:["south west arrow","arrow lower left"],u:"2199-fe0f",a:"0.6"},{n:["arrow left","leftwards black arrow"],u:"2b05-fe0f",a:"0.6"},{n:["north west arrow","arrow upper left"],u:"2196-fe0f",a:"0.6"},{n:["up down arrow","arrow up down"],u:"2195-fe0f",a:"0.6"},{n:["left right arrow"],u:"2194-fe0f",a:"0.6"},{n:["leftwards arrow with hook"],u:"21a9-fe0f",a:"0.6"},{n:["arrow right hook","rightwards arrow with hook"],u:"21aa-fe0f",a:"0.6"},{n:["arrow heading up","arrow pointing rightwards then curving upwards"],u:"2934-fe0f",a:"0.6"},{n:["arrow heading down","arrow pointing rightwards then curving downwards"],u:"2935-fe0f",a:"0.6"},{n:["arrows clockwise","clockwise downwards and upwards open circle arrows"],u:"1f503",a:"0.6"},{n:["arrows counterclockwise","anticlockwise downwards and upwards open circle arrows"],u:"1f504",a:"1.0"},{n:["back","back with leftwards arrow above"],u:"1f519",a:"0.6"},{n:["end","end with leftwards arrow above"],u:"1f51a",a:"0.6"},{n:["on","on with exclamation mark with left right arrow above"],u:"1f51b",a:"0.6"},{n:["soon","soon with rightwards arrow above"],u:"1f51c",a:"0.6"},{n:["top","top with upwards arrow above"],u:"1f51d",a:"0.6"},{n:["place of worship"],u:"1f6d0",a:"1.0"},{n:["atom symbol"],u:"269b-fe0f",a:"1.0"},{n:["om","om symbol"],u:"1f549-fe0f",a:"0.7"},{n:["star of david"],u:"2721-fe0f",a:"0.7"},{n:["wheel of dharma"],u:"2638-fe0f",a:"0.7"},{n:["yin yang"],u:"262f-fe0f",a:"0.7"},{n:["latin cross"],u:"271d-fe0f",a:"0.7"},{n:["orthodox cross"],u:"2626-fe0f",a:"1.0"},{n:["star and crescent"],u:"262a-fe0f",a:"0.7"},{n:["peace symbol"],u:"262e-fe0f",a:"1.0"},{n:["menorah with nine branches"],u:"1f54e",a:"1.0"},{n:["six pointed star","six pointed star with middle dot"],u:"1f52f",a:"0.6"},{n:["khanda"],u:"1faaf",a:"15.0"},{n:["aries"],u:"2648",a:"0.6"},{n:["taurus"],u:"2649",a:"0.6"},{n:["gemini"],u:"264a",a:"0.6"},{n:["cancer"],u:"264b",a:"0.6"},{n:["leo"],u:"264c",a:"0.6"},{n:["virgo"],u:"264d",a:"0.6"},{n:["libra"],u:"264e",a:"0.6"},{n:["scorpius"],u:"264f",a:"0.6"},{n:["sagittarius"],u:"2650",a:"0.6"},{n:["capricorn"],u:"2651",a:"0.6"},{n:["aquarius"],u:"2652",a:"0.6"},{n:["pisces"],u:"2653",a:"0.6"},{n:["ophiuchus"],u:"26ce",a:"0.6"},{n:["twisted rightwards arrows"],u:"1f500",a:"1.0"},{n:["repeat","clockwise rightwards and leftwards open circle arrows"],u:"1f501",a:"1.0"},{n:["repeat one","clockwise rightwards and leftwards open circle arrows with circled one overlay"],u:"1f502",a:"1.0"},{n:["arrow forward","black right-pointing triangle"],u:"25b6-fe0f",a:"0.6"},{n:["fast forward","black right-pointing double triangle"],u:"23e9",a:"0.6"},{n:["next track button","black right pointing double triangle with vertical bar"],u:"23ed-fe0f",a:"0.7"},{n:["play or pause button","black right pointing triangle with double vertical bar"],u:"23ef-fe0f",a:"1.0"},{n:["arrow backward","black left-pointing triangle"],u:"25c0-fe0f",a:"0.6"},{n:["rewind","black left-pointing double triangle"],u:"23ea",a:"0.6"},{n:["last track button","black left pointing double triangle with vertical bar"],u:"23ee-fe0f",a:"0.7"},{n:["arrow up small","up-pointing small red triangle"],u:"1f53c",a:"0.6"},{n:["arrow double up","black up-pointing double triangle"],u:"23eb",a:"0.6"},{n:["arrow down small","down-pointing small red triangle"],u:"1f53d",a:"0.6"},{n:["arrow double down","black down-pointing double triangle"],u:"23ec",a:"0.6"},{n:["pause button","double vertical bar"],u:"23f8-fe0f",a:"0.7"},{n:["stop button","black square for stop"],u:"23f9-fe0f",a:"0.7"},{n:["record button","black circle for record"],u:"23fa-fe0f",a:"0.7"},{n:["eject","eject button"],u:"23cf-fe0f",a:"1.0"},{n:["cinema"],u:"1f3a6",a:"0.6"},{n:["low brightness","low brightness symbol"],u:"1f505",a:"1.0"},{n:["high brightness","high brightness symbol"],u:"1f506",a:"1.0"},{n:["signal strength","antenna with bars"],u:"1f4f6",a:"0.6"},{n:["wireless"],u:"1f6dc",a:"15.0"},{n:["vibration mode"],u:"1f4f3",a:"0.6"},{n:["mobile phone off"],u:"1f4f4",a:"0.6"},{n:["female sign"],u:"2640-fe0f",a:"4.0"},{n:["male sign"],u:"2642-fe0f",a:"4.0"},{n:["transgender symbol"],u:"26a7-fe0f",a:"13.0"},{n:["heavy multiplication x"],u:"2716-fe0f",a:"0.6"},{n:["heavy plus sign"],u:"2795",a:"0.6"},{n:["heavy minus sign"],u:"2796",a:"0.6"},{n:["heavy division sign"],u:"2797",a:"0.6"},{n:["heavy equals sign"],u:"1f7f0",a:"14.0"},{n:["infinity"],u:"267e-fe0f",a:"11.0"},{n:["bangbang","double exclamation mark"],u:"203c-fe0f",a:"0.6"},{n:["interrobang","exclamation question mark"],u:"2049-fe0f",a:"0.6"},{n:["question","black question mark ornament"],u:"2753",a:"0.6"},{n:["grey question","white question mark ornament"],u:"2754",a:"0.6"},{n:["grey exclamation","white exclamation mark ornament"],u:"2755",a:"0.6"},{n:["exclamation","heavy exclamation mark","heavy exclamation mark symbol"],u:"2757",a:"0.6"},{n:["wavy dash"],u:"3030-fe0f",a:"0.6"},{n:["currency exchange"],u:"1f4b1",a:"0.6"},{n:["heavy dollar sign"],u:"1f4b2",a:"0.6"},{n:["medical symbol","staff of aesculapius"],u:"2695-fe0f",a:"4.0"},{n:["recycle","black universal recycling symbol"],u:"267b-fe0f",a:"0.6"},{n:["fleur-de-lis","fleur de lis"],u:"269c-fe0f",a:"1.0"},{n:["trident","trident emblem"],u:"1f531",a:"0.6"},{n:["name badge"],u:"1f4db",a:"0.6"},{n:["beginner","japanese symbol for beginner"],u:"1f530",a:"0.6"},{n:["o","heavy large circle"],u:"2b55",a:"0.6"},{n:["white check mark","white heavy check mark"],u:"2705",a:"0.6"},{n:["ballot box with check"],u:"2611-fe0f",a:"0.6"},{n:["heavy check mark"],u:"2714-fe0f",a:"0.6"},{n:["x","cross mark"],u:"274c",a:"0.6"},{n:["negative squared cross mark"],u:"274e",a:"0.6"},{n:["curly loop"],u:"27b0",a:"0.6"},{n:["loop","double curly loop"],u:"27bf",a:"1.0"},{n:["part alternation mark"],u:"303d-fe0f",a:"0.6"},{n:["eight spoked asterisk"],u:"2733-fe0f",a:"0.6"},{n:["eight pointed black star"],u:"2734-fe0f",a:"0.6"},{n:["sparkle"],u:"2747-fe0f",a:"0.6"},{n:["copyright","copyright sign"],u:"00a9-fe0f",a:"0.6"},{n:["registered","registered sign"],u:"00ae-fe0f",a:"0.6"},{n:["tm","trade mark sign"],u:"2122-fe0f",a:"0.6"},{n:["hash","hash key"],u:"0023-fe0f-20e3",a:"0.6"},{n:["keycap: *","keycap star"],u:"002a-fe0f-20e3",a:"2.0"},{n:["zero","keycap 0"],u:"0030-fe0f-20e3",a:"0.6"},{n:["one","keycap 1"],u:"0031-fe0f-20e3",a:"0.6"},{n:["two","keycap 2"],u:"0032-fe0f-20e3",a:"0.6"},{n:["three","keycap 3"],u:"0033-fe0f-20e3",a:"0.6"},{n:["four","keycap 4"],u:"0034-fe0f-20e3",a:"0.6"},{n:["five","keycap 5"],u:"0035-fe0f-20e3",a:"0.6"},{n:["six","keycap 6"],u:"0036-fe0f-20e3",a:"0.6"},{n:["seven","keycap 7"],u:"0037-fe0f-20e3",a:"0.6"},{n:["eight","keycap 8"],u:"0038-fe0f-20e3",a:"0.6"},{n:["nine","keycap 9"],u:"0039-fe0f-20e3",a:"0.6"},{n:["keycap ten"],u:"1f51f",a:"0.6"},{n:["capital abcd","input symbol for latin capital letters"],u:"1f520",a:"0.6"},{n:["abcd","input symbol for latin small letters"],u:"1f521",a:"0.6"},{n:["1234","input symbol for numbers"],u:"1f522",a:"0.6"},{n:["symbols","input symbol for symbols"],u:"1f523",a:"0.6"},{n:["abc","input symbol for latin letters"],u:"1f524",a:"0.6"},{n:["a","negative squared latin capital letter a"],u:"1f170-fe0f",a:"0.6"},{n:["ab","negative squared ab"],u:"1f18e",a:"0.6"},{n:["b","negative squared latin capital letter b"],u:"1f171-fe0f",a:"0.6"},{n:["cl","squared cl"],u:"1f191",a:"0.6"},{n:["cool","squared cool"],u:"1f192",a:"0.6"},{n:["free","squared free"],u:"1f193",a:"0.6"},{n:["information source"],u:"2139-fe0f",a:"0.6"},{n:["id","squared id"],u:"1f194",a:"0.6"},{n:["m","circled latin capital letter m"],u:"24c2-fe0f",a:"0.6"},{n:["new","squared new"],u:"1f195",a:"0.6"},{n:["ng","squared ng"],u:"1f196",a:"0.6"},{n:["o2","negative squared latin capital letter o"],u:"1f17e-fe0f",a:"0.6"},{n:["ok","squared ok"],u:"1f197",a:"0.6"},{n:["parking","negative squared latin capital letter p"],u:"1f17f-fe0f",a:"0.6"},{n:["sos","squared sos"],u:"1f198",a:"0.6"},{n:["up","squared up with exclamation mark"],u:"1f199",a:"0.6"},{n:["vs","squared vs"],u:"1f19a",a:"0.6"},{n:["koko","squared katakana koko"],u:"1f201",a:"0.6"},{n:["sa","squared katakana sa"],u:"1f202-fe0f",a:"0.6"},{n:["u6708","squared cjk unified ideograph-6708"],u:"1f237-fe0f",a:"0.6"},{n:["u6709","squared cjk unified ideograph-6709"],u:"1f236",a:"0.6"},{n:["u6307","squared cjk unified ideograph-6307"],u:"1f22f",a:"0.6"},{n:["ideograph advantage","circled ideograph advantage"],u:"1f250",a:"0.6"},{n:["u5272","squared cjk unified ideograph-5272"],u:"1f239",a:"0.6"},{n:["u7121","squared cjk unified ideograph-7121"],u:"1f21a",a:"0.6"},{n:["u7981","squared cjk unified ideograph-7981"],u:"1f232",a:"0.6"},{n:["accept","circled ideograph accept"],u:"1f251",a:"0.6"},{n:["u7533","squared cjk unified ideograph-7533"],u:"1f238",a:"0.6"},{n:["u5408","squared cjk unified ideograph-5408"],u:"1f234",a:"0.6"},{n:["u7a7a","squared cjk unified ideograph-7a7a"],u:"1f233",a:"0.6"},{n:["congratulations","circled ideograph congratulation"],u:"3297-fe0f",a:"0.6"},{n:["secret","circled ideograph secret"],u:"3299-fe0f",a:"0.6"},{n:["u55b6","squared cjk unified ideograph-55b6"],u:"1f23a",a:"0.6"},{n:["u6e80","squared cjk unified ideograph-6e80"],u:"1f235",a:"0.6"},{n:["red circle","large red circle"],u:"1f534",a:"0.6"},{n:["large orange circle"],u:"1f7e0",a:"12.0"},{n:["large yellow circle"],u:"1f7e1",a:"12.0"},{n:["large green circle"],u:"1f7e2",a:"12.0"},{n:["large blue circle"],u:"1f535",a:"0.6"},{n:["large purple circle"],u:"1f7e3",a:"12.0"},{n:["large brown circle"],u:"1f7e4",a:"12.0"},{n:["black circle","medium black circle"],u:"26ab",a:"0.6"},{n:["white circle","medium white circle"],u:"26aa",a:"0.6"},{n:["large red square"],u:"1f7e5",a:"12.0"},{n:["large orange square"],u:"1f7e7",a:"12.0"},{n:["large yellow square"],u:"1f7e8",a:"12.0"},{n:["large green square"],u:"1f7e9",a:"12.0"},{n:["large blue square"],u:"1f7e6",a:"12.0"},{n:["large purple square"],u:"1f7ea",a:"12.0"},{n:["large brown square"],u:"1f7eb",a:"12.0"},{n:["black large square"],u:"2b1b",a:"0.6"},{n:["white large square"],u:"2b1c",a:"0.6"},{n:["black medium square"],u:"25fc-fe0f",a:"0.6"},{n:["white medium square"],u:"25fb-fe0f",a:"0.6"},{n:["black medium small square"],u:"25fe",a:"0.6"},{n:["white medium small square"],u:"25fd",a:"0.6"},{n:["black small square"],u:"25aa-fe0f",a:"0.6"},{n:["white small square"],u:"25ab-fe0f",a:"0.6"},{n:["large orange diamond"],u:"1f536",a:"0.6"},{n:["large blue diamond"],u:"1f537",a:"0.6"},{n:["small orange diamond"],u:"1f538",a:"0.6"},{n:["small blue diamond"],u:"1f539",a:"0.6"},{n:["small red triangle","up-pointing red triangle"],u:"1f53a",a:"0.6"},{n:["small red triangle down","down-pointing red triangle"],u:"1f53b",a:"0.6"},{n:["diamond shape with a dot inside"],u:"1f4a0",a:"0.6"},{n:["radio button"],u:"1f518",a:"0.6"},{n:["white square button"],u:"1f533",a:"0.6"},{n:["black square button"],u:"1f532",a:"0.6"}],yke=[{n:["chequered flag","checkered flag"],u:"1f3c1",a:"0.6"},{n:["triangular flag on post"],u:"1f6a9",a:"0.6"},{n:["crossed flags"],u:"1f38c",a:"0.6"},{n:["waving black flag"],u:"1f3f4",a:"1.0"},{n:["white flag","waving white flag"],u:"1f3f3-fe0f",a:"0.7"},{n:["rainbow flag","rainbow-flag"],u:"1f3f3-fe0f-200d-1f308",a:"4.0"},{n:["transgender flag"],u:"1f3f3-fe0f-200d-26a7-fe0f",a:"13.0"},{n:["pirate flag"],u:"1f3f4-200d-2620-fe0f",a:"11.0"},{n:["flag-ac","ascension island flag"],u:"1f1e6-1f1e8",a:"2.0"},{n:["flag-ad","andorra flag"],u:"1f1e6-1f1e9",a:"2.0"},{n:["flag-ae","united arab emirates flag"],u:"1f1e6-1f1ea",a:"2.0"},{n:["flag-af","afghanistan flag"],u:"1f1e6-1f1eb",a:"2.0"},{n:["flag-ag","antigua & barbuda flag"],u:"1f1e6-1f1ec",a:"2.0"},{n:["flag-ai","anguilla flag"],u:"1f1e6-1f1ee",a:"2.0"},{n:["flag-al","albania flag"],u:"1f1e6-1f1f1",a:"2.0"},{n:["flag-am","armenia flag"],u:"1f1e6-1f1f2",a:"2.0"},{n:["flag-ao","angola flag"],u:"1f1e6-1f1f4",a:"2.0"},{n:["flag-aq","antarctica flag"],u:"1f1e6-1f1f6",a:"2.0"},{n:["flag-ar","argentina flag"],u:"1f1e6-1f1f7",a:"2.0"},{n:["flag-as","american samoa flag"],u:"1f1e6-1f1f8",a:"2.0"},{n:["flag-at","austria flag"],u:"1f1e6-1f1f9",a:"2.0"},{n:["flag-au","australia flag"],u:"1f1e6-1f1fa",a:"2.0"},{n:["flag-aw","aruba flag"],u:"1f1e6-1f1fc",a:"2.0"},{n:["flag-ax","land islands flag"],u:"1f1e6-1f1fd",a:"2.0"},{n:["flag-az","azerbaijan flag"],u:"1f1e6-1f1ff",a:"2.0"},{n:["flag-ba","bosnia & herzegovina flag"],u:"1f1e7-1f1e6",a:"2.0"},{n:["flag-bb","barbados flag"],u:"1f1e7-1f1e7",a:"2.0"},{n:["flag-bd","bangladesh flag"],u:"1f1e7-1f1e9",a:"2.0"},{n:["flag-be","belgium flag"],u:"1f1e7-1f1ea",a:"2.0"},{n:["flag-bf","burkina faso flag"],u:"1f1e7-1f1eb",a:"2.0"},{n:["flag-bg","bulgaria flag"],u:"1f1e7-1f1ec",a:"2.0"},{n:["flag-bh","bahrain flag"],u:"1f1e7-1f1ed",a:"2.0"},{n:["flag-bi","burundi flag"],u:"1f1e7-1f1ee",a:"2.0"},{n:["flag-bj","benin flag"],u:"1f1e7-1f1ef",a:"2.0"},{n:["flag-bl","st. barthlemy flag"],u:"1f1e7-1f1f1",a:"2.0"},{n:["flag-bm","bermuda flag"],u:"1f1e7-1f1f2",a:"2.0"},{n:["flag-bn","brunei flag"],u:"1f1e7-1f1f3",a:"2.0"},{n:["flag-bo","bolivia flag"],u:"1f1e7-1f1f4",a:"2.0"},{n:["flag-bq","caribbean netherlands flag"],u:"1f1e7-1f1f6",a:"2.0"},{n:["flag-br","brazil flag"],u:"1f1e7-1f1f7",a:"2.0"},{n:["flag-bs","bahamas flag"],u:"1f1e7-1f1f8",a:"2.0"},{n:["flag-bt","bhutan flag"],u:"1f1e7-1f1f9",a:"2.0"},{n:["flag-bv","bouvet island flag"],u:"1f1e7-1f1fb",a:"2.0"},{n:["flag-bw","botswana flag"],u:"1f1e7-1f1fc",a:"2.0"},{n:["flag-by","belarus flag"],u:"1f1e7-1f1fe",a:"2.0"},{n:["flag-bz","belize flag"],u:"1f1e7-1f1ff",a:"2.0"},{n:["flag-ca","canada flag"],u:"1f1e8-1f1e6",a:"2.0"},{n:["flag-cc","cocos (keeling) islands flag"],u:"1f1e8-1f1e8",a:"2.0"},{n:["flag-cd","congo - kinshasa flag"],u:"1f1e8-1f1e9",a:"2.0"},{n:["flag-cf","central african republic flag"],u:"1f1e8-1f1eb",a:"2.0"},{n:["flag-cg","congo - brazzaville flag"],u:"1f1e8-1f1ec",a:"2.0"},{n:["flag-ch","switzerland flag"],u:"1f1e8-1f1ed",a:"2.0"},{n:["flag-ci","cte divoire flag"],u:"1f1e8-1f1ee",a:"2.0"},{n:["flag-ck","cook islands flag"],u:"1f1e8-1f1f0",a:"2.0"},{n:["flag-cl","chile flag"],u:"1f1e8-1f1f1",a:"2.0"},{n:["flag-cm","cameroon flag"],u:"1f1e8-1f1f2",a:"2.0"},{n:["cn","flag-cn","china flag"],u:"1f1e8-1f1f3",a:"0.6"},{n:["flag-co","colombia flag"],u:"1f1e8-1f1f4",a:"2.0"},{n:["flag-cp","clipperton island flag"],u:"1f1e8-1f1f5",a:"2.0"},{n:["flag-cr","costa rica flag"],u:"1f1e8-1f1f7",a:"2.0"},{n:["flag-cu","cuba flag"],u:"1f1e8-1f1fa",a:"2.0"},{n:["flag-cv","cape verde flag"],u:"1f1e8-1f1fb",a:"2.0"},{n:["flag-cw","curaao flag"],u:"1f1e8-1f1fc",a:"2.0"},{n:["flag-cx","christmas island flag"],u:"1f1e8-1f1fd",a:"2.0"},{n:["flag-cy","cyprus flag"],u:"1f1e8-1f1fe",a:"2.0"},{n:["flag-cz","czechia flag"],u:"1f1e8-1f1ff",a:"2.0"},{n:["de","flag-de","germany flag"],u:"1f1e9-1f1ea",a:"0.6"},{n:["flag-dg","diego garcia flag"],u:"1f1e9-1f1ec",a:"2.0"},{n:["flag-dj","djibouti flag"],u:"1f1e9-1f1ef",a:"2.0"},{n:["flag-dk","denmark flag"],u:"1f1e9-1f1f0",a:"2.0"},{n:["flag-dm","dominica flag"],u:"1f1e9-1f1f2",a:"2.0"},{n:["flag-do","dominican republic flag"],u:"1f1e9-1f1f4",a:"2.0"},{n:["flag-dz","algeria flag"],u:"1f1e9-1f1ff",a:"2.0"},{n:["flag-ea","ceuta & melilla flag"],u:"1f1ea-1f1e6",a:"2.0"},{n:["flag-ec","ecuador flag"],u:"1f1ea-1f1e8",a:"2.0"},{n:["flag-ee","estonia flag"],u:"1f1ea-1f1ea",a:"2.0"},{n:["flag-eg","egypt flag"],u:"1f1ea-1f1ec",a:"2.0"},{n:["flag-eh","western sahara flag"],u:"1f1ea-1f1ed",a:"2.0"},{n:["flag-er","eritrea flag"],u:"1f1ea-1f1f7",a:"2.0"},{n:["es","flag-es","spain flag"],u:"1f1ea-1f1f8",a:"0.6"},{n:["flag-et","ethiopia flag"],u:"1f1ea-1f1f9",a:"2.0"},{n:["flag-eu","european union flag"],u:"1f1ea-1f1fa",a:"2.0"},{n:["flag-fi","finland flag"],u:"1f1eb-1f1ee",a:"2.0"},{n:["flag-fj","fiji flag"],u:"1f1eb-1f1ef",a:"2.0"},{n:["flag-fk","falkland islands flag"],u:"1f1eb-1f1f0",a:"2.0"},{n:["flag-fm","micronesia flag"],u:"1f1eb-1f1f2",a:"2.0"},{n:["flag-fo","faroe islands flag"],u:"1f1eb-1f1f4",a:"2.0"},{n:["fr","flag-fr","france flag"],u:"1f1eb-1f1f7",a:"0.6"},{n:["flag-ga","gabon flag"],u:"1f1ec-1f1e6",a:"2.0"},{n:["gb","uk","flag-gb","united kingdom flag"],u:"1f1ec-1f1e7",a:"0.6"},{n:["flag-gd","grenada flag"],u:"1f1ec-1f1e9",a:"2.0"},{n:["flag-ge","georgia flag"],u:"1f1ec-1f1ea",a:"2.0"},{n:["flag-gf","french guiana flag"],u:"1f1ec-1f1eb",a:"2.0"},{n:["flag-gg","guernsey flag"],u:"1f1ec-1f1ec",a:"2.0"},{n:["flag-gh","ghana flag"],u:"1f1ec-1f1ed",a:"2.0"},{n:["flag-gi","gibraltar flag"],u:"1f1ec-1f1ee",a:"2.0"},{n:["flag-gl","greenland flag"],u:"1f1ec-1f1f1",a:"2.0"},{n:["flag-gm","gambia flag"],u:"1f1ec-1f1f2",a:"2.0"},{n:["flag-gn","guinea flag"],u:"1f1ec-1f1f3",a:"2.0"},{n:["flag-gp","guadeloupe flag"],u:"1f1ec-1f1f5",a:"2.0"},{n:["flag-gq","equatorial guinea flag"],u:"1f1ec-1f1f6",a:"2.0"},{n:["flag-gr","greece flag"],u:"1f1ec-1f1f7",a:"2.0"},{n:["flag-gs","south georgia & south sandwich islands flag"],u:"1f1ec-1f1f8",a:"2.0"},{n:["flag-gt","guatemala flag"],u:"1f1ec-1f1f9",a:"2.0"},{n:["flag-gu","guam flag"],u:"1f1ec-1f1fa",a:"2.0"},{n:["flag-gw","guinea-bissau flag"],u:"1f1ec-1f1fc",a:"2.0"},{n:["flag-gy","guyana flag"],u:"1f1ec-1f1fe",a:"2.0"},{n:["flag-hk","hong kong sar china flag"],u:"1f1ed-1f1f0",a:"2.0"},{n:["flag-hm","heard & mcdonald islands flag"],u:"1f1ed-1f1f2",a:"2.0"},{n:["flag-hn","honduras flag"],u:"1f1ed-1f1f3",a:"2.0"},{n:["flag-hr","croatia flag"],u:"1f1ed-1f1f7",a:"2.0"},{n:["flag-ht","haiti flag"],u:"1f1ed-1f1f9",a:"2.0"},{n:["flag-hu","hungary flag"],u:"1f1ed-1f1fa",a:"2.0"},{n:["flag-ic","canary islands flag"],u:"1f1ee-1f1e8",a:"2.0"},{n:["flag-id","indonesia flag"],u:"1f1ee-1f1e9",a:"2.0"},{n:["flag-ie","ireland flag"],u:"1f1ee-1f1ea",a:"2.0"},{n:["flag-il","israel flag"],u:"1f1ee-1f1f1",a:"2.0"},{n:["flag-im","isle of man flag"],u:"1f1ee-1f1f2",a:"2.0"},{n:["flag-in","india flag"],u:"1f1ee-1f1f3",a:"2.0"},{n:["flag-io","british indian ocean territory flag"],u:"1f1ee-1f1f4",a:"2.0"},{n:["flag-iq","iraq flag"],u:"1f1ee-1f1f6",a:"2.0"},{n:["flag-ir","iran flag"],u:"1f1ee-1f1f7",a:"2.0"},{n:["flag-is","iceland flag"],u:"1f1ee-1f1f8",a:"2.0"},{n:["it","flag-it","italy flag"],u:"1f1ee-1f1f9",a:"0.6"},{n:["flag-je","jersey flag"],u:"1f1ef-1f1ea",a:"2.0"},{n:["flag-jm","jamaica flag"],u:"1f1ef-1f1f2",a:"2.0"},{n:["flag-jo","jordan flag"],u:"1f1ef-1f1f4",a:"2.0"},{n:["jp","flag-jp","japan flag"],u:"1f1ef-1f1f5",a:"0.6"},{n:["flag-ke","kenya flag"],u:"1f1f0-1f1ea",a:"2.0"},{n:["flag-kg","kyrgyzstan flag"],u:"1f1f0-1f1ec",a:"2.0"},{n:["flag-kh","cambodia flag"],u:"1f1f0-1f1ed",a:"2.0"},{n:["flag-ki","kiribati flag"],u:"1f1f0-1f1ee",a:"2.0"},{n:["flag-km","comoros flag"],u:"1f1f0-1f1f2",a:"2.0"},{n:["flag-kn","st. kitts & nevis flag"],u:"1f1f0-1f1f3",a:"2.0"},{n:["flag-kp","north korea flag"],u:"1f1f0-1f1f5",a:"2.0"},{n:["kr","flag-kr","south korea flag"],u:"1f1f0-1f1f7",a:"0.6"},{n:["flag-kw","kuwait flag"],u:"1f1f0-1f1fc",a:"2.0"},{n:["flag-ky","cayman islands flag"],u:"1f1f0-1f1fe",a:"2.0"},{n:["flag-kz","kazakhstan flag"],u:"1f1f0-1f1ff",a:"2.0"},{n:["flag-la","laos flag"],u:"1f1f1-1f1e6",a:"2.0"},{n:["flag-lb","lebanon flag"],u:"1f1f1-1f1e7",a:"2.0"},{n:["flag-lc","st. lucia flag"],u:"1f1f1-1f1e8",a:"2.0"},{n:["flag-li","liechtenstein flag"],u:"1f1f1-1f1ee",a:"2.0"},{n:["flag-lk","sri lanka flag"],u:"1f1f1-1f1f0",a:"2.0"},{n:["flag-lr","liberia flag"],u:"1f1f1-1f1f7",a:"2.0"},{n:["flag-ls","lesotho flag"],u:"1f1f1-1f1f8",a:"2.0"},{n:["flag-lt","lithuania flag"],u:"1f1f1-1f1f9",a:"2.0"},{n:["flag-lu","luxembourg flag"],u:"1f1f1-1f1fa",a:"2.0"},{n:["flag-lv","latvia flag"],u:"1f1f1-1f1fb",a:"2.0"},{n:["flag-ly","libya flag"],u:"1f1f1-1f1fe",a:"2.0"},{n:["flag-ma","morocco flag"],u:"1f1f2-1f1e6",a:"2.0"},{n:["flag-mc","monaco flag"],u:"1f1f2-1f1e8",a:"2.0"},{n:["flag-md","moldova flag"],u:"1f1f2-1f1e9",a:"2.0"},{n:["flag-me","montenegro flag"],u:"1f1f2-1f1ea",a:"2.0"},{n:["flag-mf","st. martin flag"],u:"1f1f2-1f1eb",a:"2.0"},{n:["flag-mg","madagascar flag"],u:"1f1f2-1f1ec",a:"2.0"},{n:["flag-mh","marshall islands flag"],u:"1f1f2-1f1ed",a:"2.0"},{n:["flag-mk","north macedonia flag"],u:"1f1f2-1f1f0",a:"2.0"},{n:["flag-ml","mali flag"],u:"1f1f2-1f1f1",a:"2.0"},{n:["flag-mm","myanmar (burma) flag"],u:"1f1f2-1f1f2",a:"2.0"},{n:["flag-mn","mongolia flag"],u:"1f1f2-1f1f3",a:"2.0"},{n:["flag-mo","macao sar china flag"],u:"1f1f2-1f1f4",a:"2.0"},{n:["flag-mp","northern mariana islands flag"],u:"1f1f2-1f1f5",a:"2.0"},{n:["flag-mq","martinique flag"],u:"1f1f2-1f1f6",a:"2.0"},{n:["flag-mr","mauritania flag"],u:"1f1f2-1f1f7",a:"2.0"},{n:["flag-ms","montserrat flag"],u:"1f1f2-1f1f8",a:"2.0"},{n:["flag-mt","malta flag"],u:"1f1f2-1f1f9",a:"2.0"},{n:["flag-mu","mauritius flag"],u:"1f1f2-1f1fa",a:"2.0"},{n:["flag-mv","maldives flag"],u:"1f1f2-1f1fb",a:"2.0"},{n:["flag-mw","malawi flag"],u:"1f1f2-1f1fc",a:"2.0"},{n:["flag-mx","mexico flag"],u:"1f1f2-1f1fd",a:"2.0"},{n:["flag-my","malaysia flag"],u:"1f1f2-1f1fe",a:"2.0"},{n:["flag-mz","mozambique flag"],u:"1f1f2-1f1ff",a:"2.0"},{n:["flag-na","namibia flag"],u:"1f1f3-1f1e6",a:"2.0"},{n:["flag-nc","new caledonia flag"],u:"1f1f3-1f1e8",a:"2.0"},{n:["flag-ne","niger flag"],u:"1f1f3-1f1ea",a:"2.0"},{n:["flag-nf","norfolk island flag"],u:"1f1f3-1f1eb",a:"2.0"},{n:["flag-ng","nigeria flag"],u:"1f1f3-1f1ec",a:"2.0"},{n:["flag-ni","nicaragua flag"],u:"1f1f3-1f1ee",a:"2.0"},{n:["flag-nl","netherlands flag"],u:"1f1f3-1f1f1",a:"2.0"},{n:["flag-no","norway flag"],u:"1f1f3-1f1f4",a:"2.0"},{n:["flag-np","nepal flag"],u:"1f1f3-1f1f5",a:"2.0"},{n:["flag-nr","nauru flag"],u:"1f1f3-1f1f7",a:"2.0"},{n:["flag-nu","niue flag"],u:"1f1f3-1f1fa",a:"2.0"},{n:["flag-nz","new zealand flag"],u:"1f1f3-1f1ff",a:"2.0"},{n:["flag-om","oman flag"],u:"1f1f4-1f1f2",a:"2.0"},{n:["flag-pa","panama flag"],u:"1f1f5-1f1e6",a:"2.0"},{n:["flag-pe","peru flag"],u:"1f1f5-1f1ea",a:"2.0"},{n:["flag-pf","french polynesia flag"],u:"1f1f5-1f1eb",a:"2.0"},{n:["flag-pg","papua new guinea flag"],u:"1f1f5-1f1ec",a:"2.0"},{n:["flag-ph","philippines flag"],u:"1f1f5-1f1ed",a:"2.0"},{n:["flag-pk","pakistan flag"],u:"1f1f5-1f1f0",a:"2.0"},{n:["flag-pl","poland flag"],u:"1f1f5-1f1f1",a:"2.0"},{n:["flag-pm","st. pierre & miquelon flag"],u:"1f1f5-1f1f2",a:"2.0"},{n:["flag-pn","pitcairn islands flag"],u:"1f1f5-1f1f3",a:"2.0"},{n:["flag-pr","puerto rico flag"],u:"1f1f5-1f1f7",a:"2.0"},{n:["flag-ps","palestinian territories flag"],u:"1f1f5-1f1f8",a:"2.0"},{n:["flag-pt","portugal flag"],u:"1f1f5-1f1f9",a:"2.0"},{n:["flag-pw","palau flag"],u:"1f1f5-1f1fc",a:"2.0"},{n:["flag-py","paraguay flag"],u:"1f1f5-1f1fe",a:"2.0"},{n:["flag-qa","qatar flag"],u:"1f1f6-1f1e6",a:"2.0"},{n:["flag-re","runion flag"],u:"1f1f7-1f1ea",a:"2.0"},{n:["flag-ro","romania flag"],u:"1f1f7-1f1f4",a:"2.0"},{n:["flag-rs","serbia flag"],u:"1f1f7-1f1f8",a:"2.0"},{n:["ru","flag-ru","russia flag"],u:"1f1f7-1f1fa",a:"0.6"},{n:["flag-rw","rwanda flag"],u:"1f1f7-1f1fc",a:"2.0"},{n:["flag-sa","saudi arabia flag"],u:"1f1f8-1f1e6",a:"2.0"},{n:["flag-sb","solomon islands flag"],u:"1f1f8-1f1e7",a:"2.0"},{n:["flag-sc","seychelles flag"],u:"1f1f8-1f1e8",a:"2.0"},{n:["flag-sd","sudan flag"],u:"1f1f8-1f1e9",a:"2.0"},{n:["flag-se","sweden flag"],u:"1f1f8-1f1ea",a:"2.0"},{n:["flag-sg","singapore flag"],u:"1f1f8-1f1ec",a:"2.0"},{n:["flag-sh","st. helena flag"],u:"1f1f8-1f1ed",a:"2.0"},{n:["flag-si","slovenia flag"],u:"1f1f8-1f1ee",a:"2.0"},{n:["flag-sj","svalbard & jan mayen flag"],u:"1f1f8-1f1ef",a:"2.0"},{n:["flag-sk","slovakia flag"],u:"1f1f8-1f1f0",a:"2.0"},{n:["flag-sl","sierra leone flag"],u:"1f1f8-1f1f1",a:"2.0"},{n:["flag-sm","san marino flag"],u:"1f1f8-1f1f2",a:"2.0"},{n:["flag-sn","senegal flag"],u:"1f1f8-1f1f3",a:"2.0"},{n:["flag-so","somalia flag"],u:"1f1f8-1f1f4",a:"2.0"},{n:["flag-sr","suriname flag"],u:"1f1f8-1f1f7",a:"2.0"},{n:["flag-ss","south sudan flag"],u:"1f1f8-1f1f8",a:"2.0"},{n:["flag-st","so tom & prncipe flag"],u:"1f1f8-1f1f9",a:"2.0"},{n:["flag-sv","el salvador flag"],u:"1f1f8-1f1fb",a:"2.0"},{n:["flag-sx","sint maarten flag"],u:"1f1f8-1f1fd",a:"2.0"},{n:["flag-sy","syria flag"],u:"1f1f8-1f1fe",a:"2.0"},{n:["flag-sz","eswatini flag"],u:"1f1f8-1f1ff",a:"2.0"},{n:["flag-ta","tristan da cunha flag"],u:"1f1f9-1f1e6",a:"2.0"},{n:["flag-tc","turks & caicos islands flag"],u:"1f1f9-1f1e8",a:"2.0"},{n:["flag-td","chad flag"],u:"1f1f9-1f1e9",a:"2.0"},{n:["flag-tf","french southern territories flag"],u:"1f1f9-1f1eb",a:"2.0"},{n:["flag-tg","togo flag"],u:"1f1f9-1f1ec",a:"2.0"},{n:["flag-th","thailand flag"],u:"1f1f9-1f1ed",a:"2.0"},{n:["flag-tj","tajikistan flag"],u:"1f1f9-1f1ef",a:"2.0"},{n:["flag-tk","tokelau flag"],u:"1f1f9-1f1f0",a:"2.0"},{n:["flag-tl","timor-leste flag"],u:"1f1f9-1f1f1",a:"2.0"},{n:["flag-tm","turkmenistan flag"],u:"1f1f9-1f1f2",a:"2.0"},{n:["flag-tn","tunisia flag"],u:"1f1f9-1f1f3",a:"2.0"},{n:["flag-to","tonga flag"],u:"1f1f9-1f1f4",a:"2.0"},{n:["flag-tr","trkiye flag"],u:"1f1f9-1f1f7",a:"2.0"},{n:["flag-tt","trinidad & tobago flag"],u:"1f1f9-1f1f9",a:"2.0"},{n:["flag-tv","tuvalu flag"],u:"1f1f9-1f1fb",a:"2.0"},{n:["flag-tw","taiwan flag"],u:"1f1f9-1f1fc",a:"2.0"},{n:["flag-tz","tanzania flag"],u:"1f1f9-1f1ff",a:"2.0"},{n:["flag-ua","ukraine flag"],u:"1f1fa-1f1e6",a:"2.0"},{n:["flag-ug","uganda flag"],u:"1f1fa-1f1ec",a:"2.0"},{n:["flag-um","u.s. outlying islands flag"],u:"1f1fa-1f1f2",a:"2.0"},{n:["flag-un","united nations flag"],u:"1f1fa-1f1f3",a:"4.0"},{n:["us","flag-us","united states flag"],u:"1f1fa-1f1f8",a:"0.6"},{n:["flag-uy","uruguay flag"],u:"1f1fa-1f1fe",a:"2.0"},{n:["flag-uz","uzbekistan flag"],u:"1f1fa-1f1ff",a:"2.0"},{n:["flag-va","vatican city flag"],u:"1f1fb-1f1e6",a:"2.0"},{n:["flag-vc","st. vincent & grenadines flag"],u:"1f1fb-1f1e8",a:"2.0"},{n:["flag-ve","venezuela flag"],u:"1f1fb-1f1ea",a:"2.0"},{n:["flag-vg","british virgin islands flag"],u:"1f1fb-1f1ec",a:"2.0"},{n:["flag-vi","u.s. virgin islands flag"],u:"1f1fb-1f1ee",a:"2.0"},{n:["flag-vn","vietnam flag"],u:"1f1fb-1f1f3",a:"2.0"},{n:["flag-vu","vanuatu flag"],u:"1f1fb-1f1fa",a:"2.0"},{n:["flag-wf","wallis & futuna flag"],u:"1f1fc-1f1eb",a:"2.0"},{n:["flag-ws","samoa flag"],u:"1f1fc-1f1f8",a:"2.0"},{n:["flag-xk","kosovo flag"],u:"1f1fd-1f1f0",a:"2.0"},{n:["flag-ye","yemen flag"],u:"1f1fe-1f1ea",a:"2.0"},{n:["flag-yt","mayotte flag"],u:"1f1fe-1f1f9",a:"2.0"},{n:["flag-za","south africa flag"],u:"1f1ff-1f1e6",a:"2.0"},{n:["flag-zm","zambia flag"],u:"1f1ff-1f1f2",a:"2.0"},{n:["flag-zw","zimbabwe flag"],u:"1f1ff-1f1fc",a:"2.0"},{n:["england flag","flag-england"],u:"1f3f4-e0067-e0062-e0065-e006e-e0067-e007f",a:"5.0"},{n:["scotland flag","flag-scotland"],u:"1f3f4-e0067-e0062-e0073-e0063-e0074-e007f",a:"5.0"},{n:["wales flag","flag-wales"],u:"1f3f4-e0067-e0062-e0077-e006c-e0073-e007f",a:"5.0"}],Dj={custom:dke,smileys_people:uke,animals_nature:fke,food_drink:hke,travel_places:mke,activities:pke,objects:gke,symbols:xke,flags:yke},$j=[Qo.NEUTRAL,Qo.LIGHT,Qo.MEDIUM_LIGHT,Qo.MEDIUM,Qo.MEDIUM_DARK,Qo.DARK],vke=Object.entries(Qo).reduce(function(e,t){var r=t[0],s=t[1];return e[s]=r,e},{}),bke=$j.reduce(function(e,t){var r;return Object.assign(e,(r={},r[t]=t,r))},{}),po;(function(e){e.name="n",e.unified="u",e.variations="v",e.added_in="a",e.imgUrl="imgUrl"})(po||(po={}));var qee="epr_suggested";function Gee(e){try{var t,r,s;if(!((t=window)!=null&&t.localStorage))return[];var a=JSON.parse((r=(s=window)==null?void 0:s.localStorage.getItem(qee))!=null?r:"[]");return e===Sy.FREQUENT?a.sort(function(i,o){return o.count-i.count}):a}catch{return[]}}function wke(e,t){var r=Gee(),s=va(e,t),a=va(e),i=r.find(function(c){var d=c.unified;return d===s}),o;i?o=[i].concat(r.filter(function(c){return c!==i})):(i={unified:s,original:a,count:0},o=[i].concat(r)),i.count++,o.length=Math.min(o.length,14);try{var l;(l=window)==null||l.localStorage.setItem(qee,JSON.stringify(o))}catch{}}function x1(e){var t;return(t=e[po.name])!=null?t:[]}function jke(e){return parseFloat(e[po.added_in])}function yM(e){return e?x1(e)[0]:""}function UA(e){var t=e.split("-"),r=t.splice(1,1),s=r[0];return bke[s]?t.join("-"):e}function va(e,t){var r,s=e[po.unified];return!t||!W0(e)?s:(r=Ske(e,t))!=null?r:s}function Nke(){var e=Wke(),t=Uee(),r=t[0],s=Q.useMemo(function(){var a,i=(a=Gee(e))!=null?a:[];return i.map(function(o){return Rp(o.unified)}).filter(Boolean)},[r,e]);return function(i){var o;return i===Nn.SUGGESTED?s:(o=Dj[i])!=null?o:[]}}function Yee(e,t){return""+cke(t)+e+".png"}function y1(e){var t;return(t=e[po.variations])!=null?t:[]}function W0(e){return y1(e).length>0}function Ske(e,t){return t?y1(e).find(function(r){return r.includes(t)}):va(e)}function Rp(e){if(e){if(Um[e])return Um[e];var t=UA(e);return Um[t]}}var S4=Object.values(Dj).flat();function Cke(e){Dj[Nn.CUSTOM].length=0,e.forEach(function(t){var r=kke(t);Dj[Nn.CUSTOM].push(r),!Um[r[po.unified]]&&(S4.push(r),Um[r[po.unified]]=r,Fee(r))})}function kke(e){var t;return t={},t[po.name]=e.names.map(function(r){return r.toLowerCase()}),t[po.unified]=e.id.toLowerCase(),t[po.added_in]="0",t[po.imgUrl]=e.imgUrl,t}var Um={};setTimeout(function(){S4.reduce(function(e,t){return e[va(t)]=t,W0(t)&&y1(t).forEach(function(r){e[r]=t}),e},Um)});function Mke(e){var t=e.split("-"),r=t[1];return $j.includes(r)?r:null}var _ke=["2640-fe0f","2642-fe0f","2695-fe0f"],Oj="Search",Pke="No results found",Qee=" found. Use up and down arrow keys to navigate.",Tke="1 result"+Qee,Ake="%n results"+Qee;function h$(e){var t,r;e===void 0&&(e={});var s=Kee(),a=Object.assign(s.previewConfig,(t=e.previewConfig)!=null?t:{}),i=Object.assign(s,e),o=ske(e.categories,{suggestionMode:i.suggestedEmojisMode});i.hiddenEmojis.forEach(function(c){i.unicodeToHide.add(c)}),Cke((r=i.customEmojis)!=null?r:[]);var l=i.searchDisabled?Op.PREVIEW:i.skinTonePickerLocation;return Sr({},i,{categories:o,previewConfig:a,skinTonePickerLocation:l})}function Kee(){return{autoFocusSearch:!0,categories:Hee(),className:"",customEmojis:[],defaultSkinTone:Qo.NEUTRAL,emojiStyle:Li.APPLE,emojiVersion:null,getEmojiUrl:Yee,height:450,lazyLoadEmojis:!1,previewConfig:Sr({},Eke),searchDisabled:!1,searchPlaceHolder:Oj,searchPlaceholder:Oj,skinTonePickerLocation:Op.SEARCH,skinTonesDisabled:!1,style:{},suggestedEmojisMode:Sy.FREQUENT,theme:$p.LIGHT,unicodeToHide:new Set(_ke),width:350,reactionsDefaultOpen:!1,reactions:QCe,open:!0,allowExpandReactions:!0,hiddenEmojis:[]}}var Eke={defaultEmoji:"1f60a",defaultCaption:"What's your mood?",showPreview:!0},Ike=["children"],Jee=p.createContext(Kee());function Lke(e){var t=e.children,r=Oee(e,Ike),s=Dke(r);return p.createElement(Jee.Provider,{value:s},t)}function Dke(e){var t,r=p.useState(function(){return h$(e)}),s=r[0],a=r[1];return p.useEffect(function(){Ree(s,e)||a(h$(e))},[(t=e.customEmojis)==null?void 0:t.length,e.open,e.emojiVersion,e.reactionsDefaultOpen,e.searchPlaceHolder,e.searchPlaceholder,e.defaultSkinTone,e.skinTonesDisabled,e.autoFocusSearch,e.emojiStyle,e.theme,e.suggestedEmojisMode,e.lazyLoadEmojis,e.className,e.height,e.width,e.searchDisabled,e.skinTonePickerLocation,e.allowExpandReactions]),s}function Zr(){return p.useContext(Jee)}var Zee=Q.createContext({});function Xee(){var e=Q.useContext(Zee);return e}function $ke(e){var t=Q.useRef({onEmojiClick:e.onEmojiClick||Sb,onReactionClick:e.onReactionClick||e.onEmojiClick,onSkinToneChange:e.onSkinToneChange||Sb});return Q.useEffect(function(){t.current.onEmojiClick=e.onEmojiClick||Sb,t.current.onReactionClick=e.onReactionClick||e.onEmojiClick},[e.onEmojiClick,e.onReactionClick]),Q.useEffect(function(){t.current.onSkinToneChange=e.onSkinToneChange||Sb},[e.onSkinToneChange]),t}function Sb(){}var Cy;(function(e){e.REACTIONS="reactions",e.PICKER="picker"})(Cy||(Cy={}));function Oke(){var e,t=Zr(),r=t.searchPlaceHolder,s=t.searchPlaceholder;return(e=[r,s].find(function(a){return a!==Oj}))!=null?e:Oj}function Rke(){var e=Zr(),t=e.defaultSkinTone;return t}function ete(){var e=Zr(),t=e.allowExpandReactions;return t}function tte(){var e=Zr(),t=e.skinTonesDisabled;return t}function q0(){var e=Zr(),t=e.emojiStyle;return t}function Fke(){var e=Zr(),t=e.autoFocusSearch;return t}function nte(){var e=Zr(),t=e.categories;return t}function zke(){var e=Zr(),t=e.customEmojis;return t}function Bke(){var e=Zr(),t=e.open;return t}function Uke(e){var t=Xee(),r=t.current,s=Th(),a=s[1],i=r.onEmojiClick||function(){},o=r.onReactionClick;return e===Cy.REACTIONS&&o?function(){for(var l=arguments.length,c=new Array(l),d=0;d<l;d++)c[d]=arguments[d];return o.apply(void 0,c.concat([{collapseToReactions:function(){a(function(f){return f})}}]))}:function(){for(var l=arguments.length,c=new Array(l),d=0;d<l;d++)c[d]=arguments[d];i.apply(void 0,c.concat([{collapseToReactions:function(){a(!0)}}]))}}function Vke(){var e=Xee(),t=e.current;return t.onSkinToneChange||function(){}}function rte(){var e=Zr(),t=e.previewConfig;return t}function Hke(){var e=Zr(),t=e.theme;return t}function Wke(){var e=Zr(),t=e.suggestedEmojisMode;return t}function qke(){var e=Zr(),t=e.lazyLoadEmojis;return t}function Gke(){var e=Zr(),t=e.className;return t}function Yke(){var e=Zr(),t=e.height,r=e.width,s=e.style;return Sr({height:m$(t),width:m$(r)},s)}function Qke(){var e=Zr(),t=e.reactionsDefaultOpen;return t}function Kke(){var e=Zr(),t=e.emojiVersion;return t}function ste(){var e=Zr(),t=e.searchDisabled;return t}function ate(){var e=Zr(),t=e.skinTonePickerLocation;return t}function Jke(){var e=Zr(),t=e.unicodeToHide;return t}function Zke(){var e=Zr(),t=e.reactions;return t}function G0(){var e=Zr(),t=e.getEmojiUrl;return t}function m$(e){return typeof e=="number"?e+"px":e}function Xke(e){var t=e>0,r=e>1;return t?r?Ake.replace("%n",e.toString()):Tke:Pke}function C4(){var e=N4(),t=e[0];return!!t}function Yi(e){e&&requestAnimationFrame(function(){e.focus()})}function ite(e){if(e){var t=e.previousElementSibling;Yi(t)}}function ote(e){if(e){var t=e.nextElementSibling;Yi(t)}}function lte(e){if(e){var t=e.firstElementChild;Yi(t)}}function ky(){return document.activeElement}function e6e(e){var t=e.children,r=p.useRef(null),s=p.useRef(null),a=p.useRef(null),i=p.useRef(null),o=p.useRef(null),l=p.useRef(null),c=p.useRef(null),d=p.useRef(null),u=p.useRef(null);return p.createElement(cte.Provider,{value:{AnchoredEmojiRef:s,BodyRef:a,EmojiListRef:i,CategoryNavigationRef:c,PickerMainRef:r,SearchInputRef:o,SkinTonePickerRef:l,VariationPickerRef:d,ReactionsRef:u}},t)}var cte=p.createContext({AnchoredEmojiRef:p.createRef(),BodyRef:p.createRef(),CategoryNavigationRef:p.createRef(),EmojiListRef:p.createRef(),PickerMainRef:p.createRef(),SearchInputRef:p.createRef(),SkinTonePickerRef:p.createRef(),VariationPickerRef:p.createRef(),ReactionsRef:p.createRef()});function ud(){return p.useContext(cte)}function dte(){return ud().EmojiListRef}function Y0(){return ud().PickerMainRef}function k4(){return ud().AnchoredEmojiRef}function ute(){var e=k4();return function(t){t===null&&e.current!==null&&Yi(e.current),e.current=t}}function Qi(){return ud().BodyRef}function t6e(){return ud().ReactionsRef}function Ru(){return ud().SearchInputRef}function VA(){return ud().SkinTonePickerRef}function HA(){return ud().CategoryNavigationRef}function n6e(){return ud().VariationPickerRef}function fte(e,t){t===void 0&&(t=0);var r=Cte(e);r&&requestAnimationFrame(function(){r.scrollTop=t})}function r6e(e,t){var r=Cte(e);r&&requestAnimationFrame(function(){r.scrollTop=r.scrollTop+t})}function s6e(){var e=Qi();return p.useCallback(function(t){requestAnimationFrame(function(){e.current&&(e.current.scrollTop=t)})},[e])}function M4(e){if(!(!e||!V6e(e))&&!e.closest(So($n.variationPicker))){var t=Mte(e),r=kte(e);r6e(t,-(QA(Fu(e))-r))}}function _4(e){var t=XA(e);Yi(t),M4(t)}function a6e(e){var t=XA(e);Yi(t),t==null||t.click()}function i6e(e){Yi(Ate(e))}function o6e(e){if(e){var t=Ete(e);if(!t)return _4(T4(e));Yi(t),M4(t)}}function l6e(e){if(e){var t=ZA(e);if(!t)return i6e(P4(e));Yi(t),M4(t)}}function c6e(e,t){if(e){var r=u6e(e);if(!r)return t();Yi(r),M4(r)}}function d6e(e){if(e){var t=f6e(e);return Yi(t)}}function u6e(e){if(!e)return null;var t=Ite(e),r=Fu(t),s=jte(t,e),a=Fp(r),i=a.indexOf(e),o=i%s;if(i===-1)return null;if(a[i-s])return a[i-s];var l=P4(r);if(!l)return null;var c=Fp(l),d=c.length%s-1;if(o>d)return c.at(-1);for(var u=c.length-1;u>=0;u--)if(u%s===o)return c[u];return c.at(-1)}function f6e(e){var t;if(!e)return null;var r=Ite(e),s=Fu(r),a=jte(r,e),i=Fp(s),o=i.indexOf(e);if(o===-1)return null;var l=a-o%a-1,c=o+l+1;if(i[c]){for(var d=o+a;d%a>=0;d--)if(i[d])return i[d]}var u=o%a,f=T4(s),h=Fp(f);return h[u]?h[u]:(t=h.at(0))!=null?t:null}function Ah(){var e=H0(),t=e[0],r=e[1],s=g1(),a=s[0],i=s[1],o=p.useCallback(function(){t&&r(null),a&&i(!1)},[t,a,r,i]);return o}function hte(){var e=H0(),t=e[0],r=g1(),s=r[0];return function(){return!!t||s}}function h6e(){var e=RA();return function(){e.current=!0}}function mte(){var e=RA();return function(){e.current=!1}}function pte(){var e=RA();return function(){return e.current}}function m6e(){var e=Qi(),t=mte(),r=pte();p.useEffect(function(){var s=e.current;s==null||s.addEventListener("mousemove",a,{passive:!0});function a(){r()&&t()}return function(){s==null||s.removeEventListener("mousemove",a)}},[e,t,r])}function Eh(){var e=Ru();return p.useCallback(function(){Yi(e.current)},[e])}function p6e(){var e=VA();return p.useCallback(function(){e.current&&lte(e.current)},[e])}function gte(){var e=HA();return p.useCallback(function(){e.current&&lte(e.current)},[e])}function g6e(){var e=OA();return function t(r){if(typeof r=="function")return t(r(e.current));e.current=r}}function xte(){var e=WA(),t=Ru(),r=Eh();return function(){t.current&&(t.current.value=""),e(""),r()}}function x6e(){var e=Ru(),t=WA();return function(s){e.current?(e.current.value=""+e.current.value+s,t(p$(e.current.value))):t(p$(s))}}function y6e(){var e=Ru(),t=OA(),r=g6e(),s=WA(),a=N4(),i=a[0],o=S6e(t.current,i);return{onChange:l,searchTerm:i,SearchInputRef:e,statusSearchResults:o};function l(c){var d=t.current,u=c.toLowerCase();if(d!=null&&d[u]||u.length<=1)return s(u);var f=N6e(u,d);if(!f)return s(u);r(function(h){var m;return Object.assign(h,(m={},m[u]=v6e(f,u),m))}),s(u)}}function WA(){var e=N4(),t=e[1],r=Y0();return function(a){requestAnimationFrame(function(){t(a&&(a==null?void 0:a.toLowerCase())).then(function(){fte(r.current,0)})})}}function v6e(e,t){var r={};for(var s in e){var a=e[s];b6e(a,t)&&(r[s]=a)}return r}function b6e(e,t){return x1(e).some(function(r){return r.includes(t)})}function w6e(){var e=OA(),t=e.current,r=N4(),s=r[0];return function(a){return j6e(a,t,s)}}function j6e(e,t,r){var s;return!t||!r?!1:!((s=t[r])!=null&&s[e])}function N6e(e,t){if(!t)return null;if(t[e])return t[e];var r=Object.keys(t).sort(function(s,a){return a.length-s.length}).find(function(s){return e.includes(s)});return r?t[r]:null}function p$(e){return!e||typeof e!="string"?"":e.trim().toLowerCase()}function S6e(e,t){var r;if(!(e!=null&&e[t]))return"";var s=((r=Object.entries(e==null?void 0:e[t]))==null?void 0:r.length)||0;return Xke(s)}function yte(){var e=ute(),t=H0(),r=t[1];return function(a){var i=YA(a),o=i[0];o&&(e(a),r(o))}}function qA(){var e=ate();return e===Op.SEARCH}function vte(){var e=ate();return e===Op.PREVIEW}var xs;(function(e){e.ArrowDown="ArrowDown",e.ArrowUp="ArrowUp",e.ArrowLeft="ArrowLeft",e.ArrowRight="ArrowRight",e.Escape="Escape",e.Enter="Enter",e.Space=" "})(xs||(xs={}));function C6e(){k6e(),M6e(),_6e(),P6e(),T6e()}function k6e(){var e=Y0(),t=xte(),r=s6e(),s=Ru(),a=Eh(),i=hte(),o=h6e(),l=Ah(),c=p.useMemo(function(){return function(u){var f=u.key;switch(o(),f){case xs.Escape:if(u.preventDefault(),i()){l();return}t(),r(0),a();break}}},[r,t,l,a,i,o]);p.useEffect(function(){var d=e.current;if(d)return d.addEventListener("keydown",c),function(){d.removeEventListener("keydown",c)}},[e,s,r,c])}function M6e(){var e=p6e(),t=Y0(),r=Qi(),s=Ru(),a=g1(),i=a[1],o=bte(),l=qA(),c=p.useMemo(function(){return function(u){var f=u.key;switch(f){case xs.ArrowRight:if(!l)return;u.preventDefault(),i(!0),e();break;case xs.ArrowDown:u.preventDefault(),o();break;case xs.Enter:u.preventDefault(),a6e(r.current);break}}},[e,o,i,r,l]);p.useEffect(function(){var d=s.current;if(d)return d.addEventListener("keydown",c),function(){d.removeEventListener("keydown",c)}},[t,s,c])}function _6e(){var e=VA(),t=Eh(),r=Ru(),s=bte(),a=g1(),i=a[0],o=a[1],l=vte(),c=qA(),d=GA(),u=p.useMemo(function(){return function(h){var m=h.key;if(c)switch(m){case xs.ArrowLeft:if(h.preventDefault(),!i)return t();g$(t);break;case xs.ArrowRight:if(h.preventDefault(),!i)return t();x$();break;case xs.ArrowDown:h.preventDefault(),i&&o(!1),s();break;default:d(h);break}if(l)switch(m){case xs.ArrowUp:if(h.preventDefault(),!i)return t();g$(t);break;case xs.ArrowDown:if(h.preventDefault(),!i)return t();x$();break;default:d(h);break}}},[i,t,o,s,d,l,c]);p.useEffect(function(){var f=e.current;if(f)return f.addEventListener("keydown",u),function(){f.removeEventListener("keydown",u)}},[e,r,i,u])}function P6e(){var e=Eh(),t=HA(),r=Qi(),s=GA(),a=p.useMemo(function(){return function(o){var l=o.key;switch(l){case xs.ArrowUp:o.preventDefault(),e();break;case xs.ArrowRight:o.preventDefault(),ote(ky());break;case xs.ArrowLeft:o.preventDefault(),ite(ky());break;case xs.ArrowDown:o.preventDefault(),_4(r.current);break;default:s(o);break}}},[r,e,s]);p.useEffect(function(){var i=t.current;if(i)return i.addEventListener("keydown",a),function(){i.removeEventListener("keydown",a)}},[t,r,a])}function T6e(){var e=Qi(),t=A6e(),r=yte(),s=hte(),a=Ah(),i=GA(),o=p.useMemo(function(){return function(c){var d=c.key,u=al(ky());switch(d){case xs.ArrowRight:c.preventDefault(),o6e(u);break;case xs.ArrowLeft:c.preventDefault(),l6e(u);break;case xs.ArrowDown:if(c.preventDefault(),s()){a();break}d6e(u);break;case xs.ArrowUp:if(c.preventDefault(),s()){a();break}c6e(u,t);break;case xs.Space:c.preventDefault(),r(c.target);break;default:i(c);break}}},[t,i,r,s,a]);p.useEffect(function(){var l=e.current;if(l)return l.addEventListener("keydown",o),function(){l.removeEventListener("keydown",o)}},[e,o])}function bte(){var e=gte(),t=C4(),r=Qi();return p.useCallback(function(){return t?_4(r.current):e()},[r,e,t])}function A6e(){var e=Eh(),t=gte(),r=C4();return p.useCallback(function(){return r?e():t()},[e,r,t])}function g$(e){var t=ky();t&&(z6e(t)||e(),ote(t))}function x$(){var e=ky();e&&ite(e)}function GA(){var e=x6e(),t=Eh(),r=ste(),s=Ah();return function(i){var o=i.key;E6e(i)||r||o.match(/(^[a-zA-Z0-9]$){1}/)&&(i.preventDefault(),s(),t(),e(o))}}function E6e(e){var t=e.metaKey,r=e.ctrlKey,s=e.altKey;return t||r||s}function I6e(e,t,r,s,a,i,o,l){if(e&&t!==Li.NATIVE){var c=va(e);vM.has(c)||!i||!o||setTimeout(function(){var d=a+i.top,u=r+s,f=d>=u&&d<u+o.emojiSize*2;f&&wte(l,e,t)})}}function wte(e,t,r){if(t){var s=va(t);vM.has(s)||(vM.add(s),y1(t).concat(s).forEach(function(a){var i=e(a,r);L6e(i)}))}}var vM=new Set;function L6e(e){var t=new Image;t.src=e}function D6e(){var e=Qi(),t=q0(),r=G0();p.useEffect(function(){if(t===Li.NATIVE)return;var s=e.current;return s==null||s.addEventListener("focusin",a),function(){s==null||s.removeEventListener("focusin",a)};function a(i){var o=al(i.target);if(o){var l=YA(o),c=l[0];c&&W0(c)&&wte(r,c,t)}}},[e,t,r])}var $6e=["width","height"],bM=40;function O6e(e){var t=e.children;return p.createElement(eke,null,p.createElement(R6e,null,t))}function R6e(e){var t,r=e.children,s=Th(),a=s[0],i=Hke(),o=C4(),l=Y0(),c=Gke(),d=Yke();C6e(),D6e();var u=d||{},f=u.width,h=u.height,m=Oee(u,$6e);return p.createElement("aside",{className:kn(Eg.main,Eg.baseVariables,i===$p.DARK&&Eg.darkTheme,i===$p.AUTO&&Eg.autoThemeDark,(t={},t[$n.searchActive]=o,t),a&&Eg.reactionsMenu,c),ref:l,style:Sr({},m,!a&&{height:h,width:f})},r)}var y$={"--epr-emoji-variation-picker-bg-color":"var(--epr-dark-emoji-variation-picker-bg-color)","--epr-hover-bg-color-reduced-opacity":"var(--epr-dark-hover-bg-color-reduced-opacity)","--epr-highlight-color":"var(--epr-dark-highlight-color)","--epr-text-color":"var(--epr-dark-text-color)","--epr-hover-bg-color":"var(--epr-dark-hover-bg-color)","--epr-focus-bg-color":"var(--epr-dark-focus-bg-color)","--epr-search-input-bg-color":"var(--epr-dark-search-input-bg-color)","--epr-category-label-bg-color":"var(--epr-dark-category-label-bg-color)","--epr-picker-border-color":"var(--epr-dark-picker-border-color)","--epr-bg-color":"var(--epr-dark-bg-color)","--epr-reactions-bg-color":"var(--epr-dark-reactions-bg-color)","--epr-search-input-bg-color-active":"var(--epr-dark-search-input-bg-color-active)","--epr-emoji-variation-indicator-color":"var(--epr-dark-emoji-variation-indicator-color)","--epr-category-icon-active-color":"var(--epr-dark-category-icon-active-color)","--epr-skin-tone-picker-menu-color":"var(--epr-dark-skin-tone-picker-menu-color)","--epr-skin-tone-outer-border-color":"var(--epr-dark-skin-tone-outer-border-color)","--epr-skin-tone-inner-border-color":"var(--epr-dark-skin-tone-inner-border-color)"},Eg=Er.create({main:{".":["epr-main",$n.emojiPicker],position:"relative",display:"flex",flexDirection:"column",borderWidth:"1px",borderStyle:"solid",borderRadius:"var(--epr-picker-border-radius)",borderColor:"var(--epr-picker-border-color)",backgroundColor:"var(--epr-bg-color)",overflow:"hidden",transition:"height 0.3s ease-in-out, background-color 0.1s ease-in-out","*":{boxSizing:"border-box",fontFamily:"sans-serif"}},baseVariables:{"--":{"--epr-highlight-color":"#007aeb","--epr-hover-bg-color":"#e5f0fa","--epr-hover-bg-color-reduced-opacity":"#e5f0fa80","--epr-focus-bg-color":"#e0f0ff","--epr-text-color":"#858585","--epr-search-input-bg-color":"#f6f6f6","--epr-picker-border-color":"#e7e7e7","--epr-bg-color":"#fff","--epr-reactions-bg-color":"#ffffff90","--epr-category-icon-active-color":"#6aa8de","--epr-skin-tone-picker-menu-color":"#ffffff95","--epr-skin-tone-outer-border-color":"#555555","--epr-skin-tone-inner-border-color":"var(--epr-bg-color)","--epr-horizontal-padding":"10px","--epr-picker-border-radius":"8px","--epr-header-padding":"15px var(--epr-horizontal-padding)","--epr-active-skin-tone-indicator-border-color":"var(--epr-highlight-color)","--epr-active-skin-hover-color":"var(--epr-hover-bg-color)","--epr-search-input-bg-color-active":"var(--epr-search-input-bg-color)","--epr-search-input-padding":"0 30px","--epr-search-input-border-radius":"8px","--epr-search-input-height":"40px","--epr-search-input-text-color":"var(--epr-text-color)","--epr-search-input-placeholder-color":"var(--epr-text-color)","--epr-search-bar-inner-padding":"var(--epr-horizontal-padding)","--epr-search-border-color":"var(--epr-search-input-bg-color)","--epr-search-border-color-active":"var(--epr-highlight-color)","--epr-category-navigation-button-size":"30px","--epr-emoji-variation-picker-height":"45px","--epr-emoji-variation-picker-bg-color":"var(--epr-bg-color)","--epr-preview-height":"70px","--epr-preview-text-size":"14px","--epr-preview-text-padding":"0 var(--epr-horizontal-padding)","--epr-preview-border-color":"var(--epr-picker-border-color)","--epr-preview-text-color":"var(--epr-text-color)","--epr-category-padding":"0 var(--epr-horizontal-padding)","--epr-category-label-bg-color":"#ffffffe6","--epr-category-label-text-color":"var(--epr-text-color)","--epr-category-label-padding":"0 var(--epr-horizontal-padding)","--epr-category-label-height":bM+"px","--epr-emoji-size":"30px","--epr-emoji-padding":"5px","--epr-emoji-fullsize":"calc(var(--epr-emoji-size) + var(--epr-emoji-padding) * 2)","--epr-emoji-hover-color":"var(--epr-hover-bg-color)","--epr-emoji-variation-indicator-color":"var(--epr-picker-border-color)","--epr-emoji-variation-indicator-color-hover":"var(--epr-text-color)","--epr-header-overlay-z-index":"3","--epr-emoji-variations-indictator-z-index":"1","--epr-category-label-z-index":"2","--epr-skin-variation-picker-z-index":"5","--epr-preview-z-index":"6","--epr-dark":"#000","--epr-dark-emoji-variation-picker-bg-color":"var(--epr-dark)","--epr-dark-highlight-color":"#c0c0c0","--epr-dark-text-color":"var(--epr-highlight-color)","--epr-dark-hover-bg-color":"#363636f6","--epr-dark-hover-bg-color-reduced-opacity":"#36363680","--epr-dark-focus-bg-color":"#474747","--epr-dark-search-input-bg-color":"#333333","--epr-dark-category-label-bg-color":"#222222e6","--epr-dark-picker-border-color":"#151617","--epr-dark-bg-color":"#222222","--epr-dark-reactions-bg-color":"#22222290","--epr-dark-search-input-bg-color-active":"var(--epr-dark)","--epr-dark-emoji-variation-indicator-color":"#444","--epr-dark-category-icon-active-color":"#3271b7","--epr-dark-skin-tone-picker-menu-color":"#22222295","--epr-dark-skin-tone-outer-border-color":"var(--epr-dark-picker-border-color)","--epr-dark-skin-tone-inner-border-color":"#00000000"}},autoThemeDark:{".":$n.autoTheme,"@media (prefers-color-scheme: dark)":{"--":y$}},darkTheme:{".":$n.darkTheme,"--":y$},reactionsMenu:{".":"epr-reactions",height:"50px",display:"inline-flex",backgroundColor:"var(--epr-reactions-bg-color)",backdropFilter:"blur(8px)","--":{"--epr-picker-border-radius":"50px"}}});function jte(e,t){if(!e||!t)return 0;var r=e.getBoundingClientRect().width,s=t.getBoundingClientRect().width;return Math.floor(r/s)}function F6e(e,t,r){if(!e||!t.length)return null;var s=e.getBoundingClientRect().top,a=e.getBoundingClientRect().bottom,i=s+Nte(e),o=t.find(function(l){var c=l.getBoundingClientRect().top,d=l.getBoundingClientRect().bottom,u=l.clientHeight*r,f=c+u,h=d-u;return f<i?!1:f>=s&&f<=a||h>=s&&h<=a});return o||null}function z6e(e){return!!e.nextElementSibling}function Nte(e){if(!e)return bM;var t=e.querySelector(So($n.label));if(t){var r=t.getBoundingClientRect().height;if(r>0)return r}return bM}var My="button"+So($n.emoji),B6e=[My,So($n.visible),":not("+So($n.hidden)+")"].join("");function al(e){var t;return(t=e==null?void 0:e.closest(My))!=null?t:null}function YA(e){var t=_te(e),r=KA(e);if(!t)return[];var s=Rp(r??t);return s?[s,r]:[]}function U6e(e){var t;return!!(e!=null&&e.matches(My)||!(e==null||(t=e.parentElement)==null)&&t.matches(My))}function v$(e){var t;return(t=e==null?void 0:e.clientHeight)!=null?t:0}function Ste(e){if(!e)return 0;var t=al(e),r=Fu(t),s=QA(r);return b$(t)+b$(r)+s}function QA(e){var t,r;if(!e)return 0;var s=e.querySelector(So($n.categoryContent));return((t=e==null?void 0:e.clientHeight)!=null?t:0)-((r=s==null?void 0:s.clientHeight)!=null?r:0)}function V6e(e){return e?kte(e)<QA(Fu(e)):!1}function Cte(e){return e?e.matches(So($n.scrollBody))?e:e.querySelector(So($n.scrollBody)):null}function kte(e){var t,r;return e?Ste(e)-((t=(r=Mte(e))==null?void 0:r.scrollTop)!=null?t:0):0}function Mte(e){var t;return e&&(t=e.closest(So($n.scrollBody)))!=null?t:null}function H6e(e){var t=al(e),r=Fu(t);return w$(t)+w$(r)}function b$(e){var t;return(t=e==null?void 0:e.offsetTop)!=null?t:0}function w$(e){var t;return(t=e==null?void 0:e.offsetLeft)!=null?t:0}function KA(e){var t;return(t=W6e(al(e),"unified"))!=null?t:null}function _te(e){var t=KA(e);return t?UA(t):null}function Pte(e){return e?{unified:KA(e),originalUnified:_te(e)}:{unified:null,originalUnified:null}}function W6e(e,t){var r;return(r=q6e(e)[t])!=null?r:null}function q6e(e){var t;return(t=e==null?void 0:e.dataset)!=null?t:{}}function JA(e){return e.classList.contains($n.visible)}function Tte(e){return e?e.classList.contains($n.hidden):!0}function Fp(e){return e?Array.from(e.querySelectorAll(B6e)):[]}function Ate(e){if(!e)return null;var t=Fp(e),r=t.slice(-1),s=r[0];return s?JA(s)?s:ZA(s):null}function Ete(e){var t=e.nextElementSibling;return t?JA(t)?t:Ete(t):XA(T4(e))}function ZA(e){var t=e.previousElementSibling;return t?JA(t)?t:ZA(t):Ate(P4(e))}function XA(e){if(!e)return null;var t=Fp(e);return F6e(e,t,.1)}function P4(e){var t=Fu(e);if(!t)return null;var r=t.previousElementSibling;return r?Tte(r)?P4(r):r:null}function T4(e){var t=Fu(e);if(!t)return null;var r=t.nextElementSibling;return r?Tte(r)?T4(r):r:null}function Fu(e){return e?e.closest(So($n.category)):null}function Ite(e){return e?e.closest(So($n.categoryContent)):null}function Lte(e){return e.split("-").map(function(t){return String.fromCodePoint(parseInt(t,16))}).join("")}function G6e(e){return e.category===Nn.CUSTOM}function Dte(e){return e.imgUrl!==void 0}function $te(e,t){var r=p.useRef(),s=yte(),a=tke(),i=H0(),o=i[1],l=Ah(),c=FA(),d=c[0],u=Uke(t),f=Uee(),h=f[1],m=G0(),g=q0(),x=p.useCallback(function(w){if(!a.current){l();var N=j$(w),j=N[0],S=N[1];if(!(!j||!S)){var C=Mke(S)||d;h(),wke(j,C),u(Y6e(j,C,g,m),w)}}},[d,l,a,u,h,m,g]),y=p.useCallback(function(w){var N;r.current&&clearTimeout(r.current);var j=j$(w),S=j[0];!S||!W0(S)||(r.current=(N=window)==null?void 0:N.setTimeout(function(){a.current=!0,r.current=void 0,l(),s(w.target),o(S)},500))},[a,l,s,o]),v=p.useCallback(function(){r.current?(clearTimeout(r.current),r.current=void 0):a.current&&requestAnimationFrame(function(){a.current=!1})},[a]);p.useEffect(function(){if(e.current){var b=e.current;return b.addEventListener("click",x,{passive:!0}),b.addEventListener("mousedown",y,{passive:!0}),b.addEventListener("mouseup",v,{passive:!0}),function(){b==null||b.removeEventListener("click",x),b==null||b.removeEventListener("mousedown",y),b==null||b.removeEventListener("mouseup",v)}}},[e,x,y,v])}function j$(e){var t=e==null?void 0:e.target;return U6e(t)?YA(t):[]}function Y6e(e,t,r,s){var a=x1(e);if(Dte(e)){var i=va(e);return{activeSkinTone:t,emoji:i,getImageUrl:function(){return e.imgUrl},imageUrl:e.imgUrl,isCustom:!0,names:a,unified:i,unifiedWithoutSkinTone:i}}var o=va(e,t);return{activeSkinTone:t,emoji:Lte(o),getImageUrl:function(c){return c===void 0&&(c=r??Li.APPLE),s(o,c)},imageUrl:s(o,r??Li.APPLE),isCustom:!1,names:a,unified:o,unifiedWithoutSkinTone:va(e)}}function v1(e){return p.createElement("button",Object.assign({type:"button"},e,{className:kn(Q6e.button,e.className)}),e.children)}var Q6e=Er.create({button:{".":"epr-btn",cursor:"pointer",border:"0",background:"none",outline:"none"}});function K6e(e){var t,r=e.emojiNames,s=e.unified,a=e.hidden,i=e.hiddenOnSearch,o=e.showVariations,l=o===void 0?!0:o,c=e.hasVariations,d=e.children,u=e.className,f=e.noBackground,h=f===void 0?!1:f,m=e.style;return p.createElement(v1,{className:kn(bC.emoji,a&&$A.hidden,i&&Ph.hiddenOnSearch,(t={},t[$n.visible]=!a&&!i,t),!!(c&&l)&&bC.hasVariations,h&&bC.noBackground,u),"data-unified":s,"aria-label":J6e(r),"data-full-name":r,style:m},d)}function J6e(e){var t;return e[0].match("flag-")&&(t=e[1])!=null?t:e[0]}var bC=Er.create({emoji:{".":$n.emoji,position:"relative",width:"var(--epr-emoji-fullsize)",height:"var(--epr-emoji-fullsize)",boxSizing:"border-box",display:"flex",alignItems:"center",justifyContent:"center",maxWidth:"var(--epr-emoji-fullsize)",maxHeight:"var(--epr-emoji-fullsize)",borderRadius:"8px",overflow:"hidden",transition:"background-color 0.2s",":hover":{backgroundColor:"var(--epr-emoji-hover-color)"},":focus":{backgroundColor:"var(--epr-focus-bg-color)"}},noBackground:{background:"none",":hover":{backgroundColor:"transparent",background:"none"},":focus":{backgroundColor:"transparent",background:"none"}},hasVariations:{".":$n.emojiHasVariations,":after":{content:"",display:"block",width:"0",height:"0",right:"0px",bottom:"1px",position:"absolute",borderLeft:"4px solid transparent",borderRight:"4px solid transparent",transform:"rotate(135deg)",borderBottom:"4px solid var(--epr-emoji-variation-indicator-color)",zIndex:"var(--epr-emoji-variations-indictator-z-index)"},":hover:after":{borderBottom:"4px solid var(--epr-emoji-variation-indicator-color-hover)"}}}),Rj=Er.create({external:{".":$n.external,fontSize:"0"},common:{alignSelf:"center",justifySelf:"center",display:"block"}});function N$(e){var t=e.emojiName,r=e.style,s=e.lazyLoad,a=s===void 0?!1:s,i=e.imgUrl,o=e.onError,l=e.className;return p.createElement("img",{src:i,alt:t,className:kn(Z6e.emojiImag,Rj.external,Rj.common,l),loading:a?"lazy":"eager",onError:o,style:r})}var Z6e=Er.create({emojiImag:{".":"epr-emoji-img",maxWidth:"var(--epr-emoji-fullsize)",maxHeight:"var(--epr-emoji-fullsize)",minWidth:"var(--epr-emoji-fullsize)",minHeight:"var(--epr-emoji-fullsize)",padding:"var(--epr-emoji-padding)"}});function X6e(e){var t=e.unified,r=e.style,s=e.className;return p.createElement("span",{className:kn(eMe.nativeEmoji,Rj.common,Rj.external,s),"data-unified":t,style:r},Lte(t))}var eMe=Er.create({nativeEmoji:{".":"epr-emoji-native",fontFamily:'"Segoe UI Emoji", "Segoe UI Symbol", "Segoe UI", "Apple Color Emoji", "Twemoji Mozilla", "Noto Color Emoji", "EmojiOne Color", "Android Emoji"!important',position:"relative",lineHeight:"100%",fontSize:"var(--epr-emoji-size)",textAlign:"center",alignSelf:"center",justifySelf:"center",letterSpacing:"0",padding:"var(--epr-emoji-padding)"}});function wM(e){var t=e.emoji,r=e.unified,s=e.emojiStyle,a=e.size,i=e.lazyLoad,o=e.getEmojiUrl,l=o===void 0?Yee:o,c=e.className,d=Bee(),u=d[1],f={};a&&(f.width=f.height=f.fontSize=a+"px");var h=t||Rp(r);if(!h)return null;if(Dte(h))return p.createElement(N$,{style:f,emojiName:r,emojiStyle:Li.NATIVE,lazyLoad:i,imgUrl:h.imgUrl,onError:m,className:c});return p.createElement(p.Fragment,null,s===Li.NATIVE?p.createElement(X6e,{unified:r,style:f,className:c}):p.createElement(N$,{style:f,emojiName:yM(h),emojiStyle:s,lazyLoad:i,imgUrl:l(r,s),onError:m,className:c}));function m(){u(function(g){return new Set(g).add(r)})}}function eE(e){var t=e.emoji,r=e.unified,s=e.hidden,a=e.hiddenOnSearch,i=e.emojiStyle,o=e.showVariations,l=o===void 0?!0:o,c=e.size,d=e.lazyLoad,u=e.getEmojiUrl,f=e.className,h=e.noBackground,m=h===void 0?!1:h,g=e.style,x=W0(t);return p.createElement(K6e,{hasVariations:x,showVariations:l,hidden:s,hiddenOnSearch:a,emojiNames:x1(t),unified:r,noBackground:m,style:g},p.createElement(wM,{unified:r,emoji:t,size:c,emojiStyle:i,lazyLoad:d,getEmojiUrl:u,className:f}))}var tMe="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDI4LjEuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjgwcHgiIHZpZXdCb3g9IjAgMCAyMCA4MCIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMjAgODAiIHhtbDpzcGFjZT0icHJlc2VydmUiPgo8cGF0aCBmaWxsPSIjODY4Njg2IiBkPSJNNS43LDEwLjRjMCwwLjEsMC4xLDAuMywwLjIsMC40QzYsMTAuOSw2LjEsMTEsNi4zLDExaDMuNHYzLjRjMCwwLjEsMC4xLDAuMywwLjIsMC40CgljMC4xLDAuMSwwLjIsMC4yLDAuNCwwLjJjMC4zLDAsMC41LTAuMiwwLjUtMC41di0zLjRoMy40YzAuMywwLDAuNS0wLjIsMC41LTAuNXMtMC4yLTAuNS0wLjUtMC41aC0zLjRWNi43YzAtMC4zLTAuMi0wLjUtMC41LTAuNQoJQzkuOCw2LDkuNiw2LjIsOS42LDYuNXYzLjRINi4yQzUuOSw5LjksNS43LDEwLjEsNS43LDEwLjRMNS43LDEwLjR6Ii8+CjxwYXRoIGZpbGw9IiMzMzcxQjciIGQ9Ik01LjcsMzAuNGMwLDAuMSwwLjEsMC4zLDAuMiwwLjRTNi4xLDMxLDYuMywzMWgzLjR2My40YzAsMC4xLDAuMSwwLjMsMC4yLDAuNGMwLjEsMC4xLDAuMiwwLjIsMC40LDAuMgoJYzAuMywwLDAuNS0wLjIsMC41LTAuNXYtMy40aDMuNGMwLjMsMCwwLjUtMC4yLDAuNS0wLjVzLTAuMi0wLjUtMC41LTAuNWgtMy40di0zLjRjMC0wLjMtMC4yLTAuNS0wLjUtMC41cy0wLjUsMC4yLTAuNSwwLjV2My40SDYuMgoJQzUuOSwyOS45LDUuNywzMC4xLDUuNywzMC40TDUuNywzMC40eiIvPgo8cGF0aCBmaWxsPSIjQzBDMEJGIiBkPSJNNS43LDUwLjRjMCwwLjEsMC4xLDAuMywwLjIsMC40QzYsNTAuOSw2LjEsNTEsNi4zLDUxaDMuNHYzLjRjMCwwLjEsMC4xLDAuMywwLjIsMC40CgljMC4xLDAuMSwwLjIsMC4yLDAuNCwwLjJjMC4zLDAsMC41LTAuMiwwLjUtMC41di0zLjRoMy40YzAuMywwLDAuNS0wLjIsMC41LTAuNXMtMC4yLTAuNS0wLjUtMC41aC0zLjR2LTMuNGMwLTAuMy0wLjItMC41LTAuNS0wLjUKCXMtMC41LDAuMi0wLjUsMC41djMuNEg2LjJDNS45LDQ5LjksNS43LDUwLjEsNS43LDUwLjRMNS43LDUwLjR6Ii8+CjxwYXRoIGZpbGw9IiM2QUE5REQiIGQ9Ik01LjcsNzAuNGMwLDAuMSwwLjEsMC4zLDAuMiwwLjRTNi4xLDcxLDYuMyw3MWgzLjR2My40YzAsMC4xLDAuMSwwLjMsMC4yLDAuNGMwLjEsMC4xLDAuMiwwLjIsMC40LDAuMgoJYzAuMywwLDAuNS0wLjIsMC41LTAuNXYtMy40aDMuNGMwLjMsMCwwLjUtMC4yLDAuNS0wLjVzLTAuMi0wLjUtMC41LTAuNWgtMy40di0zLjRjMC0wLjMtMC4yLTAuNS0wLjUtMC41cy0wLjUsMC4yLTAuNSwwLjV2My40SDYuNAoJQzUuOSw2OS45LDUuNyw3MC4xLDUuNyw3MC40TDUuNyw3MC40eiIvPgo8L3N2Zz4=";function nMe(){var e=Th(),t=e[1];return p.createElement(v1,{"aria-label":"Show all Emojis",title:"Show all Emojis",tabIndex:0,className:kn(rMe.plusSign),onClick:function(){return t(!1)}})}var rMe=Er.create(Sr({plusSign:{fontSize:"20px",padding:"17px",color:"var(--epr-text-color)",borderRadius:"50%",textAlign:"center",lineHeight:"100%",width:"20px",height:"20px",display:"flex",justifyContent:"center",alignItems:"center",transition:"background-color 0.2s ease-in-out",":after":{content:"",minWidth:"20px",minHeight:"20px",backgroundImage:"url("+tMe+")",backgroundColor:"transparent",backgroundRepeat:"no-repeat",backgroundSize:"20px",backgroundPositionY:"0"},":hover":{color:"var(--epr-highlight-color)",backgroundColor:"var(--epr-hover-bg-color-reduced-opacity)",":after":{backgroundPositionY:"-20px"}},":focus":{color:"var(--epr-highlight-color)",backgroundColor:"var(--epr-hover-bg-color-reduced-opacity)",":after":{backgroundPositionY:"-40px"}}}},Su("plusSign",{":after":{backgroundPositionY:"-40px"},":hover:after":{backgroundPositionY:"-60px"}})));function sMe(){var e=Th(),t=e[0],r=t6e(),s=Zke();$te(r,Cy.REACTIONS);var a=q0(),i=ete(),o=G0();return t?p.createElement("ul",{className:kn(S$.list,!t&&$A.hidden),ref:r},s.map(function(l){return p.createElement("li",{key:l},p.createElement(eE,{emoji:Rp(l),emojiStyle:a,unified:l,showVariations:!1,className:kn(S$.emojiButton),noBackground:!0,getEmojiUrl:o}))}),i?p.createElement("li",null,p.createElement(nMe,null)):null):null}var S$=Er.create({list:{listStyle:"none",margin:"0",padding:"0 5px",display:"flex",justifyContent:"space-between",alignItems:"center",height:"100%"},emojiButton:{":hover":{transform:"scale(1.2)"},":focus":{transform:"scale(1.2)"},":active":{transform:"scale(1.1)"},transition:"transform 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.5)"}});function aMe(e){var t=Ah(),r=p.useState(0),s=r[0],a=r[1];return p.useEffect(function(){var i=e.current;if(!i)return;i.addEventListener("scroll",o,{passive:!0});function o(){var l;a((l=i==null?void 0:i.scrollTop)!=null?l:0),t()}return function(){i==null||i.removeEventListener("scroll",o)}},[e,t]),s}function iMe(e){var t=e.scrollTop,r=e.clientHeight,s=e.topOffset,a=e.style,i=e.dimensions;if(!a||!i)return!1;var o=s+a.top,l=o+i.emojiSize,c=l+i.emojiSize*2>=t&&o<=t+r+i.emojiSize;return!c}function oMe(e,t){return e?{top:Math.floor(t/e.emojisPerRow)*e.emojiSize,left:t%e.emojisPerRow*e.emojiSize}:void 0}var lMe=32;function cMe(e){var t=dte(),r=Th(),s=r[0],a=Y0(),i=p.useRef(),o=zA(),l=o[0],c=p.useState(),d=c[0],u=c[1],f=p.useCallback(function(){var h,m=t.current;if(m){var g=m.querySelector(My),x=g==null?void 0:g.clientHeight,y=(h=x??i.current)!=null?h:lMe;i.current=y;var v=m.clientWidth;if(!(v===0||y===0)){var b=Math.max(1,Math.floor(v/y)),w=Math.ceil(e/b),N=w*y;u({categoryHeight:N,emojisPerRow:b,emojiSize:y})}}},[t,e]);return p.useEffect(function(){f()},[e,s,f,l.length]),p.useEffect(function(){var h=a.current;if(h){var m=function(x){var y=x,v=y.propertyName;(v==="width"||v==="max-width"||v==="min-width"||v==="height"||v==="max-height"||v==="min-height")&&(typeof queueMicrotask=="function"?queueMicrotask(function(){return f()}):requestAnimationFrame(function(){return f()}))};return h.addEventListener("transitionend",m,{passive:!0}),function(){h.removeEventListener("transitionend",m)}}},[a,f]),d}function dMe(){var e=Bee(),t=e[0],r=w6e();return function(s){var a=va(s),i=t.has(a),o=r(a);return{failedToLoad:i,filteredOut:o,hidden:i||o}}}function uMe(e){var t=e.categoryEmojis,r=e.topOffset,s=e.onHeightReady,a=e.scrollTop,i=e.isCategoryVisible,o=dMe(),l=qke(),c=q0(),d=FA(),u=d[0],f=JCe(),h=G0(),m=!tte(),g=Qi(),x=0,y=t.filter(function(w){var N=f(w),j=o(w),S=j.failedToLoad,C=j.filteredOut,k=j.hidden;return!S&&!C&&!k&&!N}),v=cMe(y.length);p.useEffect(function(){v&&s(v.categoryHeight)},[v,s,y.length]);var b=y.reduce(function(w,N,j){var S,C,k=va(N,u),M=oMe(v,j);if(v&&g.current&&iMe({scrollTop:a,clientHeight:(S=(C=g.current)==null?void 0:C.clientHeight)!=null?S:0,topOffset:r,style:M,dimensions:v})){var A,P;return x++,I6e(N,c,a,(A=(P=g.current)==null?void 0:P.clientHeight)!=null?A:0,r,M,v,h),w}return i?(w.push(p.createElement(eE,{showVariations:m,key:k,emoji:N,unified:k,emojiStyle:c,lazyLoad:l,getEmojiUrl:h,style:Sr({},M,{position:"absolute"})})),w):(x++,w)},[]);return{virtualizedCounter:x,emojis:b,dimensions:v}}function fMe(e){var t=e.categoryConfig,r=e.children,s=e.hidden,a=e.hiddenOnSearch,i=e.height,o=BA(t),l=Wee(t);return p.createElement("li",{className:kn(wC.category,s&&$A.hidden,a&&Ph.hiddenOnSearch),"data-name":o,"aria-label":l},p.createElement("h2",{className:kn(wC.label)},l),p.createElement("div",{className:kn(wC.categoryContent),style:{height:i}},r))}var wC=Er.create({category:{".":$n.category,position:"relative"},categoryContent:{".":$n.categoryContent,display:"grid",gridGap:"0",gridTemplateColumns:"repeat(auto-fill, var(--epr-emoji-fullsize))",justifyContent:"space-between",margin:"var(--epr-category-padding)",position:"relative"},label:{".":$n.label,alignItems:"center",backdropFilter:"blur(3px)",backgroundColor:"var(--epr-category-label-bg-color)",color:"var(--epr-category-label-text-color)",display:"flex",fontSize:"16px",fontWeight:"bold",height:"var(--epr-category-label-height)",margin:"0",padding:"var(--epr-category-label-padding)",position:"sticky",textTransform:"capitalize",top:"0",width:"100%",zIndex:"var(--epr-category-label-z-index)"}});function hMe(e){var t=e.scrollTop,r=nte(),s=p.useState({}),a=s[0],i=s[1],o=dte(),l=Nke(),c=Nte(o.current),d=0;return p.createElement("ul",{className:kn(pMe.emojiList),ref:o},r.map(function(u){var f=BA(u),h=d,m=a[f];return m&&(d+=m+c),p.createElement(p.Suspense,{key:f},p.createElement(mMe,{categoryEmojis:l(f),categoryConfig:u,topOffset:h,onHeightReady:function(x){a[f]!==x&&i(function(y){var v;return Sr({},y,(v={},v[f]=x,v))})},scrollTop:t}))}))}function mMe(e){var t=e.categoryEmojis,r=e.categoryConfig,s=e.topOffset,a=e.onHeightReady,i=e.scrollTop,o=zA(),l=o[0],c=uMe({categoryEmojis:t,topOffset:s,onHeightReady:a,scrollTop:i,isCategoryVisible:l.includes(r.category)}),d=c.virtualizedCounter,u=c.emojis,f=c.dimensions;return p.createElement(fMe,{categoryConfig:r,height:f==null?void 0:f.categoryHeight,hidden:!u.length&&d===0},u)}var pMe=Er.create({emojiList:{".":$n.emojiList,listStyle:"none",margin:"0",padding:"0"}}),gMe="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDI2LjMuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiIHdpZHRoPSI1MHB4IgoJIGhlaWdodD0iMTVweCIgdmlld0JveD0iMCAwIDUwIDE1IiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCA1MCAxNSIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxnIGlkPSJMYXllcl8xIj4KPC9nPgo8ZyBpZD0iTGF5ZXJfMiI+Cgk8cGF0aCBmaWxsPSIjRkZGRkZGIiBzdHJva2U9IiNFOEU3RTciIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgZD0iTTEuODYtMC40M2w5LjgzLDExLjUzYzAuNTksMC42OSwxLjU2LDAuNjksMi4xNCwwbDkuODMtMTEuNTMiLz4KCTxwYXRoIGZpbGw9IiMwMTAyMDIiIHN0cm9rZT0iIzE1MTYxNyIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBkPSJNMjYuODYtMC40M2w5LjgzLDExLjUzYzAuNTksMC42OSwxLjU2LDAuNjksMi4xNCwwbDkuODMtMTEuNTMiLz4KPC9nPgo8L3N2Zz4=",Vm;(function(e){e[e.Up=0]="Up",e[e.Down=1]="Down"})(Vm||(Vm={}));function xMe(){var e=k4(),t=n6e(),r=H0(),s=r[0],a=q0(),i=vMe(t),o=i.getTop,l=i.getMenuDirection,c=ute(),d=yMe(t),u=G0(),f=al(e.current),h=!!(s&&f&&W0(s)&&f.classList.contains($n.emojiHasVariations));p.useEffect(function(){h&&_4(t.current)},[t,h,e]);var m,g;return!h&&e.current?c(null):(m=o(),g=d()),p.createElement("div",{ref:t,className:kn(Cb.variationPicker,l()===Vm.Down&&Cb.pointingUp,h&&Cb.visible),style:{top:m}},h&&s?[va(s)].concat(y1(s)).slice(0,6).map(function(x){return p.createElement(eE,{key:x,emoji:s,unified:x,emojiStyle:a,showVariations:!1,getEmojiUrl:u})}):null,p.createElement("div",{className:kn(Cb.pointer),style:g}))}function yMe(e){var t=k4();return function(){var s={};if(!e.current)return s;if(t.current){var a=al(t.current),i=H6e(a);if(!a)return s;s.left=i+(a==null?void 0:a.clientWidth)/2}return s}}function vMe(e){var t=k4(),r=Qi(),s=Vm.Up;return{getMenuDirection:a,getTop:i};function a(){return s}function i(){s=Vm.Up;var o=0;if(!e.current)return 0;var l=v$(e.current);if(t.current){var c,d=r.current,u=al(t.current),f=v$(u);o=Ste(u);var h=(c=d==null?void 0:d.scrollTop)!=null?c:0;h>o-l&&(s=Vm.Down,o+=f+l)}return o-l}}var Cb=Er.create(Sr({variationPicker:{".":$n.variationPicker,position:"absolute",right:"15px",left:"15px",padding:"5px",boxShadow:"0px 2px 5px rgba(0, 0, 0, 0.2)",borderRadius:"3px",display:"flex",alignItems:"center",justifyContent:"space-around",opacity:"0",visibility:"hidden",pointerEvents:"none",top:"-100%",border:"1px solid var(--epr-picker-border-color)",height:"var(--epr-emoji-variation-picker-height)",zIndex:"var(--epr-skin-variation-picker-z-index)",background:"var(--epr-emoji-variation-picker-bg-color)",transform:"scale(0.9)",transition:"transform 0.1s ease-out, opacity 0.2s ease-out"},visible:{opacity:"1",visibility:"visible",pointerEvents:"all",transform:"scale(1)"},pointingUp:{".":"pointing-up",transformOrigin:"center 0%",transform:"scale(0.9)"},".pointing-up":{pointer:{top:"0",transform:"rotate(180deg) translateY(100%) translateX(18px)"}},pointer:{".":"epr-emoji-pointer",content:"",position:"absolute",width:"25px",height:"15px",backgroundRepeat:"no-repeat",backgroundPosition:"0 0",backgroundSize:"50px 15px",top:"100%",transform:"translateX(-18px)",backgroundImage:"url("+gMe+")"}},Su("pointer",{backgroundPosition:"-25px 0"})));function bMe(){var e=Qi(),t=aMe(e);return $te(e,Cy.PICKER),m6e(),p.createElement("div",{className:kn(wMe.body,Ph.hiddenOnReactions),ref:e},p.createElement(xMe,null),p.createElement(hMe,{scrollTop:t}))}var wMe=Er.create({body:{".":$n.scrollBody,flex:"1",overflowY:"scroll",overflowX:"hidden",position:"relative"}});function jMe(e,t){if(!e||!t)return 0;var r=e.getBoundingClientRect(),s=t.getBoundingClientRect();return s.height-(r.y-s.y)}function NMe(e,t){var r=Qi(),s=pte(),a=mte();p.useEffect(function(){if(!e)return;var i=r.current;i==null||i.addEventListener("keydown",c,{passive:!0}),i==null||i.addEventListener("mouseover",d,!0),i==null||i.addEventListener("focus",o,!0),i==null||i.addEventListener("mouseout",l,{passive:!0}),i==null||i.addEventListener("blur",l,!0);function o(u){var f=al(u.target);if(!f)return l();var h=Pte(f),m=h.unified,g=h.originalUnified;if(!m||!g)return l();t({unified:m,originalUnified:g})}function l(u){if(u){var f=u.relatedTarget;if(!al(f))return t(null)}t(null)}function c(u){u.key==="Escape"&&t(null)}function d(u){if(!s()){var f=al(u.target);if(f){var h=jMe(f,i),m=f.getBoundingClientRect().height;if(h<m)return SMe(f,t);Yi(f)}}}return function(){i==null||i.removeEventListener("mouseover",d),i==null||i.removeEventListener("mouseout",l),i==null||i.removeEventListener("focus",o,!0),i==null||i.removeEventListener("blur",l,!0),i==null||i.removeEventListener("keydown",c)}},[r,e,t,s,a])}function SMe(e,t){var r,s=Pte(e),a=s.unified,i=s.originalUnified;!a||!i||((r=document.activeElement)==null||r.blur==null||r.blur(),t({unified:a,originalUnified:i}))}var kb,_y;(function(e){e.ROW="FlexRow",e.COLUMN="FlexColumn"})(_y||(_y={}));function Ote(e){var t=e.children,r=e.className,s=e.style,a=s===void 0?{}:s,i=e.direction,o=i===void 0?_y.ROW:i;return p.createElement("div",{style:Sr({},a),className:kn(C$.flex,r,C$[o])},t)}var C$=Er.create((kb={flex:{display:"flex"}},kb[_y.ROW]={flexDirection:"row"},kb[_y.COLUMN]={flexDirection:"column"},kb));function CMe(e){var t=e.className,r=e.style,s=r===void 0?{}:r;return p.createElement("div",{style:Sr({flex:1},s),className:kn(t)})}function kMe(e){var t=e.children,r=e.className,s=e.style;return p.createElement("div",{style:Sr({},s,{position:"absolute"}),className:r},t)}function A4(e){var t=e.children,r=e.className,s=e.style;return p.createElement("div",{style:Sr({},s,{position:"relative"}),className:r},t)}function MMe(e){var t=e.isOpen,r=e.onClick,s=e.isActive,a=e.skinToneVariation,i=e.style;return p.createElement(v1,{style:i,onClick:r,className:kn("epr-tone-"+a,jC.tone,!t&&jC.closedTone,s&&jC.active),"aria-pressed":s,"aria-label":"Skin tone "+vke[a]})}var jC=Er.create({closedTone:{opacity:"0",zIndex:"0"},active:{".":"epr-active",zIndex:"1",opacity:"1"},tone:{".":"epr-tone",width:"var(--epr-skin-tone-size)",display:"block",cursor:"pointer",borderRadius:"4px",height:"var(--epr-skin-tone-size)",position:"absolute",right:"0",transition:"transform 0.3s ease-in-out, opacity 0.35s ease-in-out",zIndex:"0",border:"1px solid var(--epr-skin-tone-outer-border-color)",boxShadow:"inset 0px 0px 0 1px var(--epr-skin-tone-inner-border-color)",":hover":{boxShadow:"0 0 0 3px var(--epr-active-skin-hover-color), inset 0px 0px 0 1px var(--epr-skin-tone-inner-border-color)"},":focus":{boxShadow:"0 0 0 3px var(--epr-focus-bg-color)"},"&.epr-tone-neutral":{backgroundColor:"#ffd225"},"&.epr-tone-1f3fb":{backgroundColor:"#ffdfbd"},"&.epr-tone-1f3fc":{backgroundColor:"#e9c197"},"&.epr-tone-1f3fd":{backgroundColor:"#c88e62"},"&.epr-tone-1f3fe":{backgroundColor:"#a86637"},"&.epr-tone-1f3ff":{backgroundColor:"#60463a"}}}),ax=28;function _Me(){return p.createElement(A4,{style:{height:ax}},p.createElement(kMe,{style:{bottom:0,right:0}},p.createElement(Rte,{direction:Py.VERTICAL})))}function Rte(e){var t=e.direction,r=t===void 0?Py.HORIZONTAL:t,s=VA(),a=tte(),i=g1(),o=i[0],l=i[1],c=FA(),d=c[0],u=c[1],f=Vke(),h=Ah(),m=Eh();if(a)return null;var g=ax*$j.length+"px",x=o?g:ax+"px",y=r===Py.VERTICAL;return p.createElement(A4,{className:kn(Ig.skinTones,y&&Ig.vertical,o&&Ig.open,y&&o&&Ig.verticalShadow),style:y?{flexBasis:x,height:x}:{flexBasis:x}},p.createElement("div",{className:kn(Ig.select),ref:s},$j.map(function(v,b){var w=v===d;return p.createElement(MMe,{key:v,skinToneVariation:v,isOpen:o,style:{transform:kn(y?"translateY(-"+b*(o?ax:0)+"px)":"translateX(-"+b*(o?ax:0)+"px)",o&&w&&"scale(1.3)")},isActive:w,onClick:function(){o?(u(v),f(v),m()):l(!0),h()}})})))}var Py;(function(e){e.VERTICAL="epr-vertical",e.HORIZONTAL="epr-horizontal"})(Py||(Py={}));var Ig=Er.create({skinTones:{".":"epr-skin-tones","--":{"--epr-skin-tone-size":"15px"},display:"flex",alignItems:"center",justifyContent:"flex-end",transition:"all 0.3s ease-in-out",padding:"10px 0"},vertical:{padding:"9px",alignItems:"flex-end",flexDirection:"column",borderRadius:"6px",border:"1px solid var(--epr-bg-color)"},verticalShadow:{boxShadow:"0px 0 7px var(--epr-picker-border-color)"},open:{backdropFilter:"blur(5px)",background:"var(--epr-skin-tone-picker-menu-color)",".epr-active":{border:"1px solid var(--epr-active-skin-tone-indicator-border-color)"}},select:{".":"epr-skin-tone-select",position:"relative",width:"var(--epr-skin-tone-size)",height:"var(--epr-skin-tone-size)"}});function PMe(){var e=rte(),t=vte(),r=Th(),s=r[0];return e.showPreview?p.createElement(Ote,{className:kn(_x.preview,Ph.hiddenOnReactions,s&&_x.hideOnReactions)},p.createElement(TMe,null),p.createElement(CMe,null),t?p.createElement(_Me,null):null):null}function TMe(){var e,t=rte(),r=p.useState(null),s=r[0],a=r[1],i=q0(),o=H0(),l=o[0],c=G0();NMe(t.showPreview,a);var d=Rp((e=s==null?void 0:s.unified)!=null?e:s==null?void 0:s.originalUnified),u=d!=null&&s!=null;return p.createElement(f,null);function f(){var h=l??Rp(t.defaultEmoji);if(!h)return null;var m=l?yM(l):t.defaultCaption;return p.createElement(p.Fragment,null,p.createElement("div",null,u?p.createElement(wM,{unified:s==null?void 0:s.unified,emoji:d,emojiStyle:i,size:45,getEmojiUrl:c,className:kn(_x.emoji)}):h?p.createElement(wM,{unified:va(h),emoji:h,emojiStyle:i,size:45,getEmojiUrl:c,className:kn(_x.emoji)}):null),p.createElement("div",{className:kn(_x.label)},u?yM(d):m))}}var _x=Er.create({preview:{alignItems:"center",borderTop:"1px solid var(--epr-preview-border-color)",height:"var(--epr-preview-height)",padding:"0 var(--epr-horizontal-padding)",position:"relative",zIndex:"var(--epr-preview-z-index)"},label:{color:"var(--epr-preview-text-color)",fontSize:"var(--epr-preview-text-size)",padding:"var(--epr-preview-text-padding)",textTransform:"capitalize"},emoji:{padding:"0"},hideOnReactions:{opacity:"0",transition:"opacity 0.5s ease-in-out"}});function AMe(e){var t;return(t=e==null?void 0:e.getAttribute("data-name"))!=null?t:null}function EMe(e){var t=e.setActiveCategory,r=e.setVisibleCategories,s=Qi();p.useEffect(function(){var a=new Map,i=s.current,o=new IntersectionObserver(function(l){if(i){for(var c=GCe(l),d;!(d=c()).done;){var u=d.value,f=AMe(u.target);f&&a.set(f,u.intersectionRatio)}var h=Array.from(a);r(h.filter(function(w){var N=w[1];return N>0}).map(function(w){var N=w[0];return N}));var m=h[h.length-1];if(m[1]==1)return t(m[0]);for(var g=0,x=h;g<x.length;g++){var y=x[g],v=y[0],b=y[1];if(b){t(v);break}}}},{threshold:[0,1]});i==null||i.querySelectorAll(So($n.category)).forEach(function(l){o.observe(l)})},[s,t,r])}function IMe(){var e=Qi(),t=Y0();return function(s){var a;if(e.current){var i=(a=e.current)==null?void 0:a.querySelector('[data-name="'+s+'"]');if(i){var o=i.offsetTop||0;fte(t.current,o)}}}}function LMe(){var e=zke();return e?e.length===0:!1}var DMe="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDI2LjMuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHdpZHRoPSIyMDBweCIgaGVpZ2h0PSI4MHB4IiB2aWV3Qm94PSIwIDAgMjAwIDgwIiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCAyMDAgODAiIHhtbDpzcGFjZT0icHJlc2VydmUiPgo8ZyBpZD0iTGF5ZXJfMTEiPgoJPGc+CgkJPHBhdGggZmlsbD0iIzMzNzFCNyIgc3Ryb2tlPSIjMzM3MUI3IiBzdHJva2Utd2lkdGg9IjAuMSIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBkPSJNMTIuOCwyOS41YzAuNiwwLDEuMS0wLjUsMS4xLTEuMQoJCQljMC0wLjYtMC41LTEuMi0xLjEtMS4yYy0wLjYsMC0xLjIsMC41LTEuMiwxLjJDMTEuNiwyOSwxMi4yLDI5LjUsMTIuOCwyOS41eiBNMTIuOCwyOGMwLjIsMCwwLjQsMC4yLDAuNCwwLjQKCQkJYzAsMC4yLTAuMiwwLjQtMC40LDAuNGMtMC4yLDAtMC40LTAuMi0wLjQtMC40QzEyLjQsMjguMSwxMi42LDI4LDEyLjgsMjh6Ii8+CgkJPHBhdGggZmlsbD0iIzMzNzFCNyIgc3Ryb2tlPSIjMzM3MUI3IiBzdHJva2Utd2lkdGg9IjAuMSIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBkPSJNMTAsMjNjLTMuOCwwLTcsMy4xLTcsN2MwLDMuOCwzLjEsNyw3LDcKCQkJczctMy4xLDctN0MxNywyNi4yLDEzLjgsMjMsMTAsMjN6IE0xMCwzNi4yYy0zLjQsMC02LjItMi44LTYuMi02LjJjMC0zLjQsMi44LTYuMiw2LjItNi4yczYuMiwyLjgsNi4yLDYuMgoJCQlDMTYuMiwzMy40LDEzLjQsMzYuMiwxMCwzNi4yeiIvPgoJCTxwYXRoIGZpbGw9IiMzMzcxQjciIHN0cm9rZT0iIzMzNzFCNyIgc3Ryb2tlLXdpZHRoPSIwLjEiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgZD0iTTE0LjYsMzEuMmMtMC4xLTAuMS0wLjItMC4yLTAuMy0wLjJINS43CgkJCWMtMC4xLDAtMC4yLDAuMS0wLjMsMC4yYy0wLjEsMC4xLTAuMSwwLjIsMCwwLjRjMC43LDIsMi41LDMuMyw0LjYsMy4zczMuOS0xLjMsNC42LTMuM0MxNC43LDMxLjUsMTQuNywzMS4zLDE0LjYsMzEuMnogTTEwLDM0LjEKCQkJYy0xLjYsMC0zLTAuOS0zLjctMi4yaDcuM0MxMywzMy4yLDExLjYsMzQuMSwxMCwzNC4xeiIvPgoJCTxwYXRoIGZpbGw9IiMzMzcxQjciIHN0cm9rZT0iIzMzNzFCNyIgc3Ryb2tlLXdpZHRoPSIwLjEiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgZD0iTTcuMiwyOS41YzAuNiwwLDEuMi0wLjUsMS4yLTEuMQoJCQljMC0wLjYtMC41LTEuMi0xLjItMS4yYy0wLjYsMC0xLjEsMC41LTEuMSwxLjJDNi4xLDI5LDYuNiwyOS41LDcuMiwyOS41eiBNNy4yLDI4YzAuMiwwLDAuNCwwLjIsMC40LDAuNGMwLDAuMi0wLjIsMC40LTAuNCwwLjQKCQkJYy0wLjIsMC0wLjQtMC4yLTAuNC0wLjRDNi44LDI4LjEsNywyOCw3LjIsMjh6Ii8+Cgk8L2c+Cgk8Zz4KCQk8Zz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMzM3MUI3IiBkPSJNNjQuMSwzMy40bDIuMywwYzAuMiwwLDAuNCwwLjIsMC40LDAuNHYyLjFjMCwwLjItMC4yLDAuNC0wLjQsMC40aC0yLjMKCQkJCWMtMC4yLDAtMC40LTAuMi0wLjQtMC40di0yLjFDNjMuNywzMy42LDYzLjgsMzMuNCw2NC4xLDMzLjR6Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzMzNzFCNyIgZD0iTTczLjUsMzMuNWgyLjRjMC4yLDAsMC40LDAuMiwwLjQsMC40djJjMCwwLjItMC4yLDAuNC0wLjQsMC40aC0yLjQKCQkJCWMtMC4yLDAtMC40LTAuMi0wLjQtMC40bDAtMkM3My4xLDMzLjYsNzMuMywzMy41LDczLjUsMzMuNXoiLz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMzM3MUI3IiBkPSJNNjMuNywyOC40aDEyLjZ2NUg2My43VjI4LjR6Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzMzNzFCNyIgZD0iTTY1LjUsMjMuNmg4LjljMSwwLDEuOSwwLjgsMS45LDEuOXYzLjFINjMuN3YtMy4xQzYzLjcsMjQuNSw2NC41LDIzLjYsNjUuNSwyMy42eiIvPgoJCQk8ZWxsaXBzZSBmaWxsPSIjMzM3MUI3IiBjeD0iNjYuMiIgY3k9IjMwLjkiIHJ4PSIwLjkiIHJ5PSIxIi8+CgkJCTxlbGxpcHNlIGZpbGw9IiMzMzcxQjciIGN4PSI3My44IiBjeT0iMzAuOSIgcng9IjAuOSIgcnk9IjEiLz4KCQk8L2c+Cgk8L2c+Cgk8Zz4KCQk8Zz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMzM3MUI3IiBkPSJNOTYuNCwzMGMwLDMuNi0yLjksNi41LTYuNCw2LjVzLTYuNC0yLjktNi40LTYuNXMyLjktNi41LDYuNC02LjVTOTYuNCwyNi40LDk2LjQsMzB6Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzMzNzFCNyIgZD0iTTk2LjMsMjguNmMwLDAsMCwwLjEsMCwwLjFjLTAuOSwwLjEtMi45LDAuMS00LjYtMS4xYy0xLjEtMC44LTItMS43LTIuNi0yLjUKCQkJCWMtMC4zLTAuNC0wLjYtMC44LTAuNy0xYy0wLjEtMC4xLTAuMS0wLjEtMC4xLTAuMmMwLjUtMC4xLDEuMi0wLjIsMi0wLjFjMS4yLDAsMi41LDAuMywzLjUsMS4xYzEsMC44LDEuNywxLjgsMi4xLDIuOAoJCQkJQzk2LjEsMjcuOSw5Ni4yLDI4LjMsOTYuMywyOC42eiIvPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMzMzcxQjciIGQ9Ik04NCwzMi4yYzAsMCwwLTAuMSwwLTAuMWMwLjktMC4yLDIuOS0wLjQsNC43LDAuNmMxLjEsMC43LDEuOSwxLjUsMi40LDIuMwoJCQkJYzAuNCwwLjUsMC42LDEsMC43LDEuM2MtMC40LDAuMS0xLDAuMi0xLjcsMC4zYy0xLDAtMi4xLTAuMS0zLjItMC44cy0xLjktMS42LTIuNC0yLjVDODQuMiwzMi44LDg0LjEsMzIuNSw4NCwzMi4yeiIvPgoJCTwvZz4KCTwvZz4KCTxnPgoJCTxnPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMzMzcxQjciIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgZD0iTTExNi4zLDI2LjhsLTEuNCwybC0wLjgtMC44bC0wLjYtMC42bDAsMC45bC0wLjEsOC4yaC02LjgKCQkJCWwtMC4xLTguMmwwLTAuOWwtMC42LDAuNmwtMC44LDAuOGwtMS40LTJsMi42LTIuOWMwLjEtMC4xLDAuMi0wLjEsMC4zLTAuMWgxLjNsMC40LDAuN2MwLjcsMS4zLDIuNiwxLjMsMy4zLTAuMWwwLjMtMC42aDEuMgoJCQkJYzAuMSwwLDAuMiwwLDAuMywwLjFsMC4zLTAuM2wtMC4zLDAuM0wxMTYuMywyNi44eiIvPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMzMzcxQjciIGQ9Ik0xMTAuMSwyNy43aDJ2MC45YzAsMC40LTAuNCwwLjctMSwwLjdjLTAuNiwwLTEtMC4zLTEtMC43TDExMC4xLDI3LjdMMTEwLjEsMjcuN3oiLz4KCQk8L2c+Cgk8L2c+Cgk8Zz4KCQk8Zz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMzM3MUI3IiBkPSJNMTI2LjgsMzQuM2MwLDEuMi0xLDIuMi0yLjIsMi4ycy0yLjItMS0yLjItMi4yczEtMi4yLDIuMi0yLjJTMTI2LjgsMzMuMSwxMjYuOCwzNC4zeiIvPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMzMzcxQjciIGQ9Ik0xMzcuNiwzNC4zYzAsMS4yLTEsMi4yLTIuMiwyLjJjLTEuMiwwLTIuMi0xLTIuMi0yLjJzMS0yLjIsMi4yLTIuMgoJCQkJQzEzNi42LDMyLjEsMTM3LjYsMzMuMSwxMzcuNiwzNC4zeiIvPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMzMzcxQjciIGQ9Ik0xMjYuOCwyNC40djkuOSIvPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMzMzcxQjciIGQ9Ik0xMzcuNywyNC40djkuOSIvPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMzMzcxQjciIGQ9Ik0xMjYuOCwyMy41aDEwLjh2Mi43aC0xMC44QzEyNi44LDI2LjIsMTI2LjgsMjMuNSwxMjYuOCwyMy41eiIvPgoJCTwvZz4KCTwvZz4KCTxnPgoJCTxnPgoJCQk8cGF0aCBmaWxsPSIjMzM3MUI3IiBkPSJNMTcwLjgsMjMuMUwxNzAuOCwyMy4xYy0wLjMsMC0wLjUsMC0wLjgsMGMtMi4xLDAtNCwxLTUuMywyLjVsLTAuMSwwbC0wLjEtMC4xbC0xLTEuMmwtMC4zLDMuNGwzLjQsMC4zCgkJCQlsLTEuMS0xLjNsLTAuMS0wLjFsMC4xLTAuMWMxLjEtMS41LDMtMi4zLDUtMi4xbDAsMGMzLjIsMC4zLDUuNSwzLjEsNS4yLDYuM2MtMC4zLDMtMy4xLDUuMy02LjEsNS4xYy0zLjEtMC4yLTUuNC0yLjktNS4zLTYKCQkJCWwtMS4zLTAuMWMtMC4yLDMuOCwyLjYsNy4xLDYuMyw3LjRjMy45LDAuMyw3LjMtMi42LDcuNi02LjVDMTc3LjIsMjYuOCwxNzQuNCwyMy41LDE3MC44LDIzLjF6Ii8+CgkJCTxwYXRoIGZpbGw9IiMzMzcxQjciIGQ9Ik0xNzAuMywyNy40YzAtMC4zLTAuMy0wLjYtMC42LTAuNnMtMC42LDAuMy0wLjYsMC42djMuMmMwLDAuMiwwLjEsMC4zLDAuMiwwLjRjMC4xLDAuMSwwLjMsMC4yLDAuNCwwLjIKCQkJCWgyLjRjMC40LDAsMC42LTAuMywwLjYtMC42YzAtMC40LTAuMy0wLjYtMC42LTAuNmgtMS42aC0wLjJ2LTAuMkwxNzAuMywyNy40TDE3MC4zLDI3LjR6Ii8+CgkJPC9nPgoJPC9nPgoJPGc+CgkJPGc+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzMzNzFCNyIgZD0iTTE4Ni4yLDIzLjRoNy43YzEuNSwwLDIuNywxLjIsMi43LDIuN3Y3LjdjMCwxLjUtMS4yLDIuNy0yLjcsMi43aC03LjcKCQkJCWMtMS41LDAtMi43LTEuMi0yLjctMi43di03LjdDMTgzLjQsMjQuNiwxODQuNywyMy40LDE4Ni4yLDIzLjR6Ii8+CgkJCTxlbGxpcHNlIGZpbGw9IiMzMzcxQjciIGN4PSIxODYiIGN5PSIyOC45IiByeD0iMC43IiByeT0iMC43Ii8+CgkJCTxlbGxpcHNlIGZpbGw9IiMzMzcxQjciIGN4PSIxOTQiIGN5PSIyNi43IiByeD0iMC43IiByeT0iMC43Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzMzNzFCNyIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNMTg2LDMzLjNsMC40LTAuM2MwLjQtMC4zLDEtMC4zLDEuNS0wLjFsMSwwLjQKCQkJCWMwLjUsMC4yLDEsMC4yLDEuNS0wLjFsMC44LTAuNWMwLjQtMC4zLDEtMC4zLDEuNS0wLjFsMS44LDAuOCIvPgoJCTwvZz4KCTwvZz4KCTxwYXRoIGZpbGw9IiMzMzcxQjciIHN0cm9rZT0iIzMzNzFCNyIgc3Ryb2tlLXdpZHRoPSIwLjI1IiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIGQ9Ik0xNTYsMjQuM2MtMC4yLTAuMS0wLjQtMC4xLTAuNSwwCgkJYzAsMC0wLjIsMC4xLTAuOSwwLjJjLTAuNywwLTIuNC0wLjEtMy44LTAuNmMtMC44LTAuMy0xLjctMC41LTIuNS0wLjVjLTAuMiwwLTAuNCwwLTAuNSwwYy0xLjMsMC0yLjUsMC4zLTMuNiwxCgkJYy0wLjIsMC4xLTAuMiwwLjItMC4yLDAuNHYxMS42YzAsMC4zLDAuMSwwLjUsMC4zLDAuNWMwLjYsMCwwLjUtMC40LDAuNS0wLjZ2LTUuN2MwLjctMC4zLDMuMi0xLjEsNS44LTAuMQoJCWMxLjYsMC42LDMuNSwwLjcsNC4zLDAuN2MwLjgsMCwxLjMtMC4zLDEuMy0wLjNjMC4yLTAuMSwwLjMtMC4yLDAuMy0wLjR2LTUuN0MxNTYuMiwyNC42LDE1Ni4xLDI0LjQsMTU2LDI0LjN6IE0xNTUuNiwzMC4yCgkJYy0wLjEsMC0wLjcsMC4xLTEsMC4xYy0wLjcsMC0yLjQtMC4xLTMuOC0wLjZjLTIuNS0xLTUtMC41LTYuMi0wLjF2LTQuOWMwLjktMC41LDIuMi0wLjcsMy4yLTAuN2MwLjEsMCwwLjMsMCwwLjQsMAoJCWMwLjcsMCwxLjUsMC4yLDIuMiwwLjRjMS42LDAuNiwzLjUsMC43LDQuMywwLjdjMC4yLDAsMC44LDAsMS0wLjFWMzAuMnoiLz4KCTxnPgoJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzMzNzFCNyIgZD0iTTQ4LjEsMjMuNWgzLjdjMi41LDAsNC41LDIsNC41LDQuNWMwLDAuNS0wLjQsMC45LTAuOSwwLjlINDQuNWMtMC41LDAtMC45LTAuNC0wLjktMC45CgkJCUM0My42LDI1LjUsNDUuNiwyMy41LDQ4LjEsMjMuNXoiLz4KCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMzMzcxQjciIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgZD0iTTQzLjUsMjguOGMtMC4yLDAuMS0wLjUsMS4yLDAsMS41YzEuNCwxLDguNSwwLjgsMTEuMywwLjYKCQkJYzAuOC0wLjEsMS42LTAuNCwxLjctMS4yYzAtMC4zLTAuMS0wLjYtMC42LTAuOSIvPgoJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzMzNzFCNyIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNNDMuNSwzMC42TDQzLjMsMzFjLTAuMiwwLjUsMC4yLDEsMC43LDAuOWMwLjMtMC4xLDAuNSwwLDAuNywwLjMKCQkJbDAuMSwwLjJjMC4zLDAuNSwxLDAuNiwxLjUsMC4ybDAsMGMwLjMtMC4yLDAuNy0wLjMsMS0wLjJsMC44LDAuM2MwLjQsMC4yLDAuOCwwLjEsMS4yLDBsMC41LTAuMmMwLjQtMC4yLDAuOS0wLjIsMS4zLDBsMC41LDAuMgoJCQljMC40LDAuMiwwLjgsMC4yLDEuMiwwbDAuMi0wLjFjMC4zLTAuMiwwLjgtMC4yLDEuMSwwLjFsMC4yLDAuMmMwLjMsMC4zLDAuOCwwLjIsMS0wLjJsMC4xLTAuMmMwLjEtMC4yLDAtMC4zLDAuMi0wLjMKCQkJYzAuNSwwLDEuMi0wLjMsMS4xLTAuN2wtMC40LTEuMSIvPgoJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzMzNzFCNyIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNNDMuNSwzMi4yYy0wLjEsMC4yLTAuMywwLjgsMCwxLjFjMC4zLDAuNCwzLDEuMSw2LjQsMS4xCgkJCWMyLjIsMCw0LjYtMC4zLDYtMC42YzAuNS0wLjEsMC45LTAuNSwwLjgtMC45YzAtMC4yLTAuMi0wLjUtMC40LTAuNyIvPgoJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzMzNzFCNyIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNNDMuNSwzMy4zYzAsMC41LDAuNiwyLjMsMS4zLDIuN2MxLjgsMC44LDUuNywwLjcsOC4xLDAuNQoJCQljMS4zLTAuMSwyLjUtMC43LDMuMi0xLjhjMC4zLTAuNSwwLjUtMSwwLjUtMS40Ii8+CgkJPGVsbGlwc2UgZmlsbD0iIzMzNzFCNyIgY3g9IjUxLjYiIGN5PSIyNi41IiByeD0iMC4zIiByeT0iMC40Ii8+CgkJPGVsbGlwc2UgZmlsbD0iIzMzNzFCNyIgY3g9IjUzIiBjeT0iMjUiIHJ4PSIwLjMiIHJ5PSIwLjQiLz4KCQk8ZWxsaXBzZSBmaWxsPSIjMzM3MUI3IiBjeD0iNTMiIGN5PSIyNy4yIiByeD0iMC4zIiByeT0iMC40Ii8+CgkJPGVsbGlwc2UgZmlsbD0iIzMzNzFCNyIgY3g9IjU0LjMiIGN5PSIyNi41IiByeD0iMC4zIiByeT0iMC40Ii8+CgkJPGVsbGlwc2UgZmlsbD0iIzMzNzFCNyIgY3g9IjUwLjkiIGN5PSIyNSIgcng9IjAuMyIgcnk9IjAuNCIvPgoJPC9nPgoJPGc+CgkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMzM3MUI3IiBkPSJNMjQuMiwzMXYtNy42YzAuMSwwLjEsMC44LDAuOSwyLjgsMy4xYzIuNS0xLjYsNS42LTAuNyw2LjksMGwyLjQtMy4xdjcuMQoJCQljMCwxLjItMC4xLDIuNS0wLjksMy40Yy0xLDEuMi0yLjcsMi41LTUuMywyLjVjLTIuOSwwLTQuNS0xLjUtNS4zLTIuOUMyNC4yLDMyLjksMjQuMiwzMiwyNC4yLDMxeiIvPgoJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzMzNzFCNyIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNMjEuMiwzMGw1LjQsMS4yIi8+CgkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMzM3MUI3IiBzdHJva2UtbGluZWNhcD0icm91bmQiIGQ9Ik0yMS4yLDM0LjFsNS40LTEuMiIvPgoJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzMzNzFCNyIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNMzguOCwzMGwtNS40LDEuMiIvPgoJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzMzNzFCNyIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNMzguOCwzNC4xbC01LjQtMS4yIi8+CgkJPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGZpbGw9IiMzMzcxQjciIGQ9Ik0yOS41LDMyLjRMMjksMzEuN2MtMC4yLTAuMywwLTAuNiwwLjMtMC42aDEuNAoJCQljMC4zLDAsMC41LDAuNCwwLjMsMC42bC0wLjcsMWwwLDBjLTAuNywxLjItMi42LDEuMS0zLjEtMC4zbC0wLjEtMC4yYy0wLjEtMC4yLDAtMC40LDAuMi0wLjVzMC40LDAsMC41LDAuMmwwLjEsMC4yCgkJCUMyOC4zLDMyLjgsMjkuMSwzMi45LDI5LjUsMzIuNHoiLz4KCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiMzMzcxQjciIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgZD0iTTMyLjQsMzIuMWwtMC4xLDAuMmMtMC40LDEtMS44LDEuMS0yLjMsMC4yIi8+CgkJPGVsbGlwc2UgZmlsbD0iIzMzNzFCNyIgY3g9IjI3LjYiIGN5PSIyOS43IiByeD0iMC43IiByeT0iMC43Ii8+CgkJPGVsbGlwc2UgZmlsbD0iIzMzNzFCNyIgY3g9IjMyLjQiIGN5PSIyOS43IiByeD0iMC43IiByeT0iMC43Ii8+Cgk8L2c+Cgk8Zz4KCQk8cGF0aCBmaWxsPSIjQzBDMEJGIiBzdHJva2U9IiNDMEMwQkYiIHN0cm9rZS13aWR0aD0iMC4xIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIGQ9Ik0xMi44LDQ5LjVjMC42LDAsMS4xLTAuNSwxLjEtMS4xCgkJCWMwLTAuNi0wLjUtMS4yLTEuMS0xLjJjLTAuNiwwLTEuMiwwLjUtMS4yLDEuMkMxMS42LDQ5LDEyLjIsNDkuNSwxMi44LDQ5LjV6IE0xMi44LDQ4YzAuMiwwLDAuNCwwLjIsMC40LDAuNAoJCQljMCwwLjItMC4yLDAuNC0wLjQsMC40Yy0wLjIsMC0wLjQtMC4yLTAuNC0wLjRDMTIuNCw0OC4xLDEyLjYsNDgsMTIuOCw0OHoiLz4KCQk8cGF0aCBmaWxsPSIjQzBDMEJGIiBzdHJva2U9IiNDMEMwQkYiIHN0cm9rZS13aWR0aD0iMC4xIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIGQ9Ik0xNC42LDUxLjJjLTAuMS0wLjEtMC4yLTAuMi0wLjMtMC4ySDUuNwoJCQljLTAuMSwwLTAuMiwwLjEtMC4zLDAuMmMtMC4xLDAuMS0wLjEsMC4yLDAsMC40YzAuNywyLDIuNSwzLjMsNC42LDMuM3MzLjktMS4zLDQuNi0zLjNDMTQuNyw1MS41LDE0LjcsNTEuMywxNC42LDUxLjJ6IE0xMCw1NC4xCgkJCWMtMS42LDAtMy0wLjktMy43LTIuMmg3LjNDMTMsNTMuMiwxMS42LDU0LjEsMTAsNTQuMXoiLz4KCQk8cGF0aCBmaWxsPSIjQzBDMEJGIiBzdHJva2U9IiNDMEMwQkYiIHN0cm9rZS13aWR0aD0iMC4xIiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIGQ9Ik03LjIsNDkuNWMwLjYsMCwxLjItMC41LDEuMi0xLjEKCQkJYzAtMC42LTAuNS0xLjItMS4yLTEuMmMtMC42LDAtMS4xLDAuNS0xLjEsMS4yQzYuMSw0OSw2LjYsNDkuNSw3LjIsNDkuNXogTTcuMiw0OGMwLjIsMCwwLjQsMC4yLDAuNCwwLjRjMCwwLjItMC4yLDAuNC0wLjQsMC40CgkJCWMtMC4yLDAtMC40LTAuMi0wLjQtMC40QzYuOCw0OC4xLDcsNDgsNy4yLDQ4eiIvPgoJCTxwYXRoIGZpbGw9IiNDMEMwQkYiIHN0cm9rZT0iI0MwQzBCRiIgc3Ryb2tlLXdpZHRoPSIwLjEiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgZD0iTTEwLDQzYy0zLjgsMC03LDMuMS03LDdjMCwzLjgsMy4xLDcsNyw3CgkJCXM3LTMuMSw3LTdDMTcsNDYuMiwxMy44LDQzLDEwLDQzeiBNMTAsNTYuMmMtMy40LDAtNi4yLTIuOC02LjItNi4yYzAtMy40LDIuOC02LjIsNi4yLTYuMnM2LjIsMi44LDYuMiw2LjIKCQkJQzE2LjIsNTMuNCwxMy40LDU2LjIsMTAsNTYuMnoiLz4KCTwvZz4KCTxnPgoJCTxnPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiNDMEMwQkYiIGQ9Ik02NC4xLDUzLjRsMi4zLDBjMC4yLDAsMC40LDAuMiwwLjQsMC40djIuMWMwLDAuMi0wLjIsMC40LTAuNCwwLjRoLTIuMwoJCQkJYy0wLjIsMC0wLjQtMC4yLTAuNC0wLjR2LTIuMUM2My43LDUzLjYsNjMuOCw1My40LDY0LjEsNTMuNHoiLz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjQzBDMEJGIiBkPSJNNzMuNSw1My41aDIuNGMwLjIsMCwwLjQsMC4yLDAuNCwwLjR2MmMwLDAuMi0wLjIsMC40LTAuNCwwLjRoLTIuNAoJCQkJYy0wLjIsMC0wLjQtMC4yLTAuNC0wLjRsMC0yQzczLjEsNTMuNiw3My4zLDUzLjUsNzMuNSw1My41eiIvPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiNDMEMwQkYiIGQ9Ik02My43LDQ4LjRoMTIuNnY1SDYzLjdWNDguNHoiLz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjQzBDMEJGIiBkPSJNNjUuNSw0My42aDguOWMxLDAsMS45LDAuOCwxLjksMS45djMuMUg2My43di0zLjFDNjMuNyw0NC41LDY0LjUsNDMuNiw2NS41LDQzLjZ6Ii8+CgkJCTxlbGxpcHNlIGZpbGw9IiNDMEMwQkYiIGN4PSI2Ni4yIiBjeT0iNTAuOSIgcng9IjAuOSIgcnk9IjEiLz4KCQkJPGVsbGlwc2UgZmlsbD0iI0MwQzBCRiIgY3g9IjczLjgiIGN5PSI1MC45IiByeD0iMC45IiByeT0iMSIvPgoJCTwvZz4KCTwvZz4KCTxnPgoJCTxnPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiNDMEMwQkYiIGQ9Ik05Ni40LDUwYzAsMy42LTIuOSw2LjUtNi40LDYuNXMtNi40LTIuOS02LjQtNi41czIuOS02LjUsNi40LTYuNVM5Ni40LDQ2LjQsOTYuNCw1MHoiLz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjQzBDMEJGIiBkPSJNOTYuMyw0OC42YzAsMCwwLDAuMSwwLDAuMWMtMC45LDAuMS0yLjksMC4xLTQuNi0xLjJjLTEuMS0wLjgtMi0xLjctMi42LTIuNQoJCQkJYy0wLjMtMC40LTAuNi0wLjgtMC43LTFjLTAuMS0wLjEtMC4xLTAuMi0wLjEtMC4yYzAuNS0wLjEsMS4yLTAuMiwyLTAuMmMxLjIsMCwyLjUsMC4zLDMuNSwxLjFjMSwwLjgsMS43LDEuOCwyLjEsMi44CgkJCQlDOTYuMSw0Ny45LDk2LjIsNDguMyw5Ni4zLDQ4LjZ6Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iI0MwQzBCRiIgZD0iTTg0LDUyLjJjMCwwLDAtMC4xLDAtMC4xYzAuOS0wLjIsMi45LTAuNCw0LjcsMC42YzEuMSwwLjcsMS45LDEuNSwyLjQsMi4zCgkJCQljMC40LDAuNSwwLjYsMSwwLjcsMS4zYy0wLjQsMC4xLTEsMC4yLTEuNywwLjNjLTEsMC0yLjEtMC4xLTMuMi0wLjhzLTEuOS0xLjYtMi40LTIuNUM4NC4yLDUyLjgsODQuMSw1Mi41LDg0LDUyLjJ6Ii8+CgkJPC9nPgoJPC9nPgoJPGc+CgkJPGc+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iI0MwQzBCRiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNMTE2LjMsNDYuOGwtMS40LDJsLTAuOC0wLjhsLTAuNi0wLjdsMCwwLjlsLTAuMSw4LjJoLTYuOAoJCQkJbC0wLjEtOC4ybDAtMC45bC0wLjYsMC43bC0wLjgsMC44bC0xLjQtMmwyLjYtMi45YzAuMS0wLjEsMC4yLTAuMSwwLjMtMC4xaDEuM2wwLjQsMC43YzAuNywxLjMsMi42LDEuMywzLjMtMC4xbDAuMy0wLjZoMS4yCgkJCQljMC4xLDAsMC4yLDAsMC4zLDAuMWwwLjMtMC4zbC0wLjMsMC4zTDExNi4zLDQ2Ljh6Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iI0MwQzBCRiIgZD0iTTExMC4xLDQ3LjdoMnYwLjljMCwwLjQtMC40LDAuNy0xLDAuN2MtMC42LDAtMS0wLjMtMS0wLjdMMTEwLjEsNDcuN0wxMTAuMSw0Ny43eiIvPgoJCTwvZz4KCTwvZz4KCTxnPgoJCTxnPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiNDMEMwQkYiIGQ9Ik0xMjYuOCw1NC4zYzAsMS4yLTEsMi4yLTIuMiwyLjJzLTIuMi0xLTIuMi0yLjJzMS0yLjIsMi4yLTIuMlMxMjYuOCw1My4xLDEyNi44LDU0LjN6Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iI0MwQzBCRiIgZD0iTTEzNy42LDU0LjNjMCwxLjItMSwyLjItMi4yLDIuMmMtMS4yLDAtMi4yLTEtMi4yLTIuMnMxLTIuMiwyLjItMi4yCgkJCQlDMTM2LjYsNTIuMSwxMzcuNiw1My4xLDEzNy42LDU0LjN6Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iI0MwQzBCRiIgZD0iTTEyNi44LDQ0LjR2OS45Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iI0MwQzBCRiIgZD0iTTEzNy43LDQ0LjR2OS45Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iI0MwQzBCRiIgZD0iTTEyNi44LDQzLjVoMTAuOHYyLjdoLTEwLjhDMTI2LjgsNDYuMiwxMjYuOCw0My41LDEyNi44LDQzLjV6Ii8+CgkJPC9nPgoJPC9nPgoJPGc+CgkJPGc+CgkJCTxwYXRoIGZpbGw9IiNDMEMwQkYiIGQ9Ik0xNzAuOCw0My4xTDE3MC44LDQzLjFjLTAuMywwLTAuNSwwLTAuOCwwYy0yLjEsMC00LDEtNS4zLDIuNWwtMC4xLDBsLTAuMS0wLjFsLTEtMS4ybC0wLjMsMy40bDMuNCwwLjMKCQkJCWwtMS4xLTEuM2wtMC4xLTAuMWwwLjEtMC4xYzEuMS0xLjUsMy0yLjMsNS0yLjFsMCwwYzMuMiwwLjMsNS41LDMuMSw1LjIsNi4zYy0wLjMsMy0zLjEsNS4zLTYuMSw1LjFjLTMuMS0wLjItNS40LTIuOS01LjMtNgoJCQkJbC0xLjMtMC4xYy0wLjIsMy44LDIuNiw3LjEsNi4zLDcuNGMzLjksMC4zLDcuMy0yLjYsNy42LTYuNUMxNzcuMiw0Ni44LDE3NC40LDQzLjUsMTcwLjgsNDMuMXoiLz4KCQkJPHBhdGggZmlsbD0iI0MwQzBCRiIgZD0iTTE3MC4zLDQ3LjRjMC0wLjMtMC4zLTAuNi0wLjYtMC42cy0wLjYsMC4zLTAuNiwwLjZ2My4yYzAsMC4yLDAuMSwwLjMsMC4yLDAuNGMwLjEsMC4xLDAuMywwLjIsMC40LDAuMgoJCQkJaDIuNGMwLjQsMCwwLjYtMC4zLDAuNi0wLjZjMC0wLjMtMC4zLTAuNi0wLjYtMC42aC0xLjZoLTAuMnYtMC4yTDE3MC4zLDQ3LjRMMTcwLjMsNDcuNHoiLz4KCQk8L2c+Cgk8L2c+Cgk8Zz4KCQk8Zz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjQzBDMEJGIiBkPSJNMTg2LjIsNDMuNGg3LjdjMS41LDAsMi43LDEuMiwyLjcsMi43djcuN2MwLDEuNS0xLjIsMi43LTIuNywyLjdoLTcuNwoJCQkJYy0xLjUsMC0yLjctMS4yLTIuNy0yLjd2LTcuN0MxODMuNCw0NC43LDE4NC43LDQzLjQsMTg2LjIsNDMuNHoiLz4KCQkJPGVsbGlwc2UgZmlsbD0iI0MwQzBCRiIgY3g9IjE4NiIgY3k9IjQ4LjkiIHJ4PSIwLjciIHJ5PSIwLjciLz4KCQkJPGVsbGlwc2UgZmlsbD0iI0MwQzBCRiIgY3g9IjE5NCIgY3k9IjQ2LjciIHJ4PSIwLjciIHJ5PSIwLjciLz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjQzBDMEJGIiBzdHJva2UtbGluZWNhcD0icm91bmQiIGQ9Ik0xODYsNTMuM2wwLjQtMC4zYzAuNC0wLjMsMS0wLjMsMS41LTAuMWwxLDAuNAoJCQkJYzAuNSwwLjIsMSwwLjIsMS41LTAuMWwwLjgtMC41YzAuNC0wLjMsMS0wLjMsMS41LTAuMWwxLjgsMC44Ii8+CgkJPC9nPgoJPC9nPgoJPHBhdGggZmlsbD0iI0MwQzBCRiIgc3Ryb2tlPSIjQzBDMEJGIiBzdHJva2Utd2lkdGg9IjAuMjUiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgZD0iTTE1Niw0NC4zYy0wLjItMC4xLTAuNC0wLjEtMC41LDAKCQljMCwwLTAuMiwwLjEtMC45LDAuMmMtMC43LDAtMi40LTAuMS0zLjgtMC42Yy0wLjgtMC4zLTEuNy0wLjUtMi41LTAuNWMtMC4yLDAtMC40LDAtMC41LDBjLTEuMywwLTIuNSwwLjMtMy42LDEKCQljLTAuMiwwLjEtMC4yLDAuMi0wLjIsMC40djExLjZjMCwwLjMsMC4xLDAuNSwwLjMsMC41YzAuNiwwLDAuNS0wLjQsMC41LTAuNnYtNS43YzAuNy0wLjMsMy4yLTEuMSw1LjgtMC4xCgkJYzEuNiwwLjYsMy41LDAuNyw0LjMsMC43YzAuOCwwLDEuMy0wLjMsMS4zLTAuM2MwLjItMC4xLDAuMy0wLjIsMC4zLTAuNHYtNS43QzE1Ni4yLDQ0LjYsMTU2LjEsNDQuNCwxNTYsNDQuM3ogTTE1NS42LDUwLjIKCQljLTAuMSwwLTAuNywwLjEtMSwwLjFjLTAuNywwLTIuNC0wLjEtMy44LTAuNmMtMi41LTEtNS0wLjUtNi4yLTAuMXYtNC45YzAuOS0wLjUsMi4yLTAuNywzLjItMC43YzAuMSwwLDAuMywwLDAuNCwwCgkJYzAuNywwLDEuNSwwLjIsMi4yLDAuNGMxLjYsMC42LDMuNSwwLjcsNC4zLDAuN2MwLjIsMCwwLjgsMCwxLTAuMVY1MC4yeiIvPgoJPGc+CgkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjQzBDMEJGIiBkPSJNNDguMSw0My41aDMuN2MyLjUsMCw0LjUsMiw0LjUsNC41YzAsMC41LTAuNCwwLjktMC45LDAuOUg0NC41Yy0wLjUsMC0wLjktMC40LTAuOS0wLjkKCQkJQzQzLjYsNDUuNSw0NS42LDQzLjUsNDguMSw0My41eiIvPgoJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iI0MwQzBCRiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNNDMuNSw0OC44Yy0wLjIsMC4xLTAuNSwxLjIsMCwxLjVjMS40LDEsOC41LDAuOCwxMS4zLDAuNgoJCQljMC44LTAuMSwxLjYtMC40LDEuNy0xLjJjMC0wLjMtMC4xLTAuNi0wLjYtMC45Ii8+CgkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjQzBDMEJGIiBzdHJva2UtbGluZWNhcD0icm91bmQiIGQ9Ik00My41LDUwLjZMNDMuMyw1MWMtMC4yLDAuNSwwLjIsMSwwLjcsMC45YzAuMy0wLjEsMC41LDAsMC43LDAuMwoJCQlsMC4xLDAuMmMwLjMsMC41LDEsMC42LDEuNSwwLjJsMCwwYzAuMy0wLjIsMC43LTAuMywxLTAuMmwwLjgsMC4zYzAuNCwwLjIsMC44LDAuMSwxLjIsMGwwLjUtMC4yYzAuNC0wLjIsMC45LTAuMiwxLjMsMGwwLjUsMC4yCgkJCWMwLjQsMC4yLDAuOCwwLjIsMS4yLDBsMC4yLTAuMWMwLjMtMC4yLDAuOC0wLjIsMS4xLDAuMWwwLjIsMC4yYzAuMywwLjMsMC44LDAuMiwxLTAuMmwwLjEtMC4yYzAuMS0wLjIsMC0wLjMsMC4yLTAuMwoJCQljMC41LDAsMS4yLTAuMywxLjEtMC43bC0wLjQtMS4xIi8+CgkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjQzBDMEJGIiBzdHJva2UtbGluZWNhcD0icm91bmQiIGQ9Ik00My41LDUyLjJjLTAuMSwwLjItMC4zLDAuOCwwLDEuMWMwLjMsMC40LDMsMS4xLDYuNCwxLjEKCQkJYzIuMiwwLDQuNi0wLjMsNi0wLjZjMC41LTAuMSwwLjktMC41LDAuOC0wLjljMC0wLjItMC4yLTAuNS0wLjQtMC43Ii8+CgkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjQzBDMEJGIiBzdHJva2UtbGluZWNhcD0icm91bmQiIGQ9Ik00My41LDUzLjNjMCwwLjUsMC42LDIuMywxLjMsMi43YzEuOCwwLjgsNS43LDAuNyw4LjEsMC41CgkJCWMxLjMtMC4xLDIuNS0wLjcsMy4yLTEuOGMwLjMtMC41LDAuNS0xLDAuNS0xLjQiLz4KCQk8ZWxsaXBzZSBmaWxsPSIjQzBDMEJGIiBjeD0iNTEuNiIgY3k9IjQ2LjUiIHJ4PSIwLjMiIHJ5PSIwLjQiLz4KCQk8ZWxsaXBzZSBmaWxsPSIjQzBDMEJGIiBjeD0iNTMiIGN5PSI0NSIgcng9IjAuMyIgcnk9IjAuNCIvPgoJCTxlbGxpcHNlIGZpbGw9IiNDMEMwQkYiIGN4PSI1MyIgY3k9IjQ3LjIiIHJ4PSIwLjMiIHJ5PSIwLjQiLz4KCQk8ZWxsaXBzZSBmaWxsPSIjQzBDMEJGIiBjeD0iNTQuMyIgY3k9IjQ2LjUiIHJ4PSIwLjMiIHJ5PSIwLjQiLz4KCQk8ZWxsaXBzZSBmaWxsPSIjQzBDMEJGIiBjeD0iNTAuOSIgY3k9IjQ1IiByeD0iMC4zIiByeT0iMC40Ii8+Cgk8L2c+Cgk8Zz4KCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiNDMEMwQkYiIGQ9Ik0yNC4yLDUxdi03LjZjMC4xLDAuMSwwLjgsMC45LDIuOCwzLjFjMi41LTEuNyw1LjYtMC43LDYuOSwwbDIuNC0zLjF2Ny4xCgkJCWMwLDEuMi0wLjEsMi41LTAuOSwzLjRjLTEsMS4yLTIuNywyLjUtNS4zLDIuNWMtMi45LDAtNC41LTEuNS01LjMtMi45QzI0LjIsNTIuOSwyNC4yLDUyLDI0LjIsNTF6Ii8+CgkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjQzBDMEJGIiBzdHJva2UtbGluZWNhcD0icm91bmQiIGQ9Ik0yMS4yLDUwbDUuNCwxLjIiLz4KCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiNDMEMwQkYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgZD0iTTIxLjIsNTQuMWw1LjQtMS4yIi8+CgkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjQzBDMEJGIiBzdHJva2UtbGluZWNhcD0icm91bmQiIGQ9Ik0zOC44LDUwbC01LjQsMS4yIi8+CgkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjQzBDMEJGIiBzdHJva2UtbGluZWNhcD0icm91bmQiIGQ9Ik0zOC44LDU0LjFsLTUuNC0xLjIiLz4KCQk8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZmlsbD0iI0MwQzBCRiIgZD0iTTI5LjUsNTIuNEwyOSw1MS43Yy0wLjItMC4zLDAtMC42LDAuMy0wLjZoMS40CgkJCWMwLjMsMCwwLjUsMC40LDAuMywwLjZsLTAuNywxbDAsMGMtMC43LDEuMi0yLjYsMS4xLTMuMS0wLjNsLTAuMS0wLjJjLTAuMS0wLjIsMC0wLjQsMC4yLTAuNXMwLjQsMCwwLjUsMC4ybDAuMSwwLjIKCQkJQzI4LjMsNTIuOCwyOS4xLDUyLjksMjkuNSw1Mi40eiIvPgoJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iI0MwQzBCRiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNMzIuNCw1Mi4xbC0wLjEsMC4yYy0wLjQsMS0xLjgsMS4xLTIuMywwLjIiLz4KCQk8ZWxsaXBzZSBmaWxsPSIjQzBDMEJGIiBjeD0iMjcuNiIgY3k9IjQ5LjciIHJ4PSIwLjciIHJ5PSIwLjciLz4KCQk8ZWxsaXBzZSBmaWxsPSIjQzBDMEJGIiBjeD0iMzIuNCIgY3k9IjQ5LjciIHJ4PSIwLjciIHJ5PSIwLjciLz4KCTwvZz4KCTxnPgoJCTxwYXRoIGZpbGw9IiM2QUE5REQiIHN0cm9rZT0iIzZBQTlERCIgc3Ryb2tlLXdpZHRoPSIwLjEiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgZD0iTTE0LjYsNzEuMmMtMC4xLTAuMS0wLjItMC4yLTAuMy0wLjJINS43CgkJCWMtMC4xLDAtMC4yLDAuMS0wLjMsMC4yYy0wLjEsMC4xLTAuMSwwLjIsMCwwLjRjMC43LDIsMi41LDMuMyw0LjYsMy4zczMuOS0xLjMsNC42LTMuM0MxNC43LDcxLjUsMTQuNyw3MS4zLDE0LjYsNzEuMnogTTEwLDc0LjEKCQkJYy0xLjYsMC0zLTAuOS0zLjctMi4yaDcuM0MxMyw3My4yLDExLjYsNzQuMSwxMCw3NC4xeiIvPgoJCTxwYXRoIGZpbGw9IiM2QUE5REQiIHN0cm9rZT0iIzZBQTlERCIgc3Ryb2tlLXdpZHRoPSIwLjEiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgZD0iTTEyLjgsNjkuNWMwLjYsMCwxLjEtMC41LDEuMS0xLjEKCQkJYzAtMC42LTAuNS0xLjItMS4xLTEuMmMtMC42LDAtMS4yLDAuNS0xLjIsMS4yQzExLjYsNjksMTIuMiw2OS41LDEyLjgsNjkuNXogTTEyLjgsNjhjMC4yLDAsMC40LDAuMiwwLjQsMC40CgkJCWMwLDAuMi0wLjIsMC40LTAuNCwwLjRjLTAuMiwwLTAuNC0wLjItMC40LTAuNEMxMi40LDY4LjEsMTIuNiw2OCwxMi44LDY4eiIvPgoJCTxwYXRoIGZpbGw9IiM2QUE5REQiIHN0cm9rZT0iIzZBQTlERCIgc3Ryb2tlLXdpZHRoPSIwLjEiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgZD0iTTcuMiw2OS41YzAuNiwwLDEuMi0wLjUsMS4yLTEuMQoJCQljMC0wLjYtMC41LTEuMi0xLjItMS4yYy0wLjYsMC0xLjEsMC41LTEuMSwxLjJDNi4xLDY5LDYuNiw2OS41LDcuMiw2OS41eiBNNy4yLDY4YzAuMiwwLDAuNCwwLjIsMC40LDAuNGMwLDAuMi0wLjIsMC40LTAuNCwwLjQKCQkJYy0wLjIsMC0wLjQtMC4yLTAuNC0wLjRDNi44LDY4LjEsNyw2OCw3LjIsNjh6Ii8+CgkJPHBhdGggZmlsbD0iIzZBQTlERCIgc3Ryb2tlPSIjNkFBOUREIiBzdHJva2Utd2lkdGg9IjAuMSIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBkPSJNMTAsNjNjLTMuOCwwLTcsMy4xLTcsN2MwLDMuOCwzLjEsNyw3LDcKCQkJczctMy4xLDctN0MxNyw2Ni4yLDEzLjgsNjMsMTAsNjN6IE0xMCw3Ni4yYy0zLjQsMC02LjItMi44LTYuMi02LjJjMC0zLjQsMi44LTYuMiw2LjItNi4yczYuMiwyLjgsNi4yLDYuMgoJCQlDMTYuMiw3My40LDEzLjQsNzYuMiwxMCw3Ni4yeiIvPgoJPC9nPgoJPGc+CgkJPGc+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzZBQTlERCIgZD0iTTY0LjEsNzMuNGwyLjMsMGMwLjIsMCwwLjQsMC4yLDAuNCwwLjR2Mi4xYzAsMC4yLTAuMiwwLjQtMC40LDAuNGgtMi4zCgkJCQljLTAuMiwwLTAuNC0wLjItMC40LTAuNHYtMi4xQzYzLjcsNzMuNiw2My44LDczLjQsNjQuMSw3My40eiIvPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiM2QUE5REQiIGQ9Ik03My41LDczLjVoMi40YzAuMiwwLDAuNCwwLjIsMC40LDAuNHYyLjFjMCwwLjItMC4yLDAuNC0wLjQsMC40aC0yLjQKCQkJCWMtMC4yLDAtMC40LTAuMi0wLjQtMC40bDAtMi4xQzczLjEsNzMuNiw3My4zLDczLjUsNzMuNSw3My41eiIvPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiM2QUE5REQiIGQ9Ik02My43LDY4LjRoMTIuNnY1SDYzLjdWNjguNHoiLz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNkFBOUREIiBkPSJNNjUuNSw2My42aDguOWMxLDAsMS45LDAuOCwxLjksMS45djMuMUg2My43di0zLjFDNjMuNyw2NC41LDY0LjUsNjMuNiw2NS41LDYzLjZ6Ii8+CgkJCTxlbGxpcHNlIGZpbGw9IiM2QUE5REQiIGN4PSI2Ni4yIiBjeT0iNzAuOSIgcng9IjAuOSIgcnk9IjAuOSIvPgoJCQk8ZWxsaXBzZSBmaWxsPSIjNkFBOUREIiBjeD0iNzMuOCIgY3k9IjcwLjkiIHJ4PSIwLjkiIHJ5PSIwLjkiLz4KCQk8L2c+Cgk8L2c+Cgk8Zz4KCQk8Zz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNkFBOUREIiBkPSJNOTYuNCw3MGMwLDMuNi0yLjksNi41LTYuNCw2LjVzLTYuNC0yLjktNi40LTYuNXMyLjktNi41LDYuNC02LjVTOTYuNCw2Ni40LDk2LjQsNzB6Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzZBQTlERCIgZD0iTTk2LjMsNjguNmMwLDAsMCwwLjEsMCwwLjFjLTAuOSwwLjEtMi45LDAuMS00LjYtMS4yYy0xLjEtMC44LTItMS43LTIuNi0yLjUKCQkJCWMtMC4zLTAuNC0wLjYtMC44LTAuNy0xLjFjLTAuMS0wLjEtMC4xLTAuMi0wLjEtMC4yYzAuNS0wLjEsMS4yLTAuMiwyLTAuMmMxLjIsMCwyLjUsMC4zLDMuNSwxLjFjMSwwLjgsMS43LDEuOCwyLjEsMi44CgkJCQlDOTYuMSw2Ny45LDk2LjIsNjguMyw5Ni4zLDY4LjZ6Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzZBQTlERCIgZD0iTTg0LDcyLjJjMCwwLDAtMC4xLDAtMC4xYzAuOS0wLjIsMi45LTAuNCw0LjcsMC42YzEuMSwwLjcsMS45LDEuNSwyLjQsMi4zCgkJCQljMC40LDAuNSwwLjYsMSwwLjcsMS4zYy0wLjQsMC4xLTEsMC4yLTEuNywwLjNjLTEsMC0yLjEtMC4xLTMuMi0wLjhzLTEuOS0xLjYtMi40LTIuNUM4NC4yLDcyLjgsODQuMSw3Mi40LDg0LDcyLjJ6Ii8+CgkJPC9nPgoJPC9nPgoJPGc+CgkJPGc+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzZBQTlERCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNMTE2LjMsNjYuOGwtMS40LDJsLTAuOC0wLjhsLTAuNi0wLjdsMCwwLjlsLTAuMSw4LjJoLTYuOAoJCQkJbC0wLjEtOC4ybDAtMC45bC0wLjYsMC43bC0wLjgsMC44bC0xLjQtMmwyLjYtMi45YzAuMS0wLjEsMC4yLTAuMSwwLjMtMC4xaDEuM2wwLjQsMC43YzAuNywxLjMsMi42LDEuMywzLjMtMC4xbDAuMy0wLjZoMS4yCgkJCQljMC4xLDAsMC4yLDAsMC4zLDAuMWwwLjMtMC4zbC0wLjMsMC4zTDExNi4zLDY2Ljh6Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzZBQTlERCIgZD0iTTExMC4xLDY3LjdoMnYwLjljMCwwLjQtMC40LDAuNy0xLDAuN2MtMC42LDAtMS0wLjMtMS0wLjdMMTEwLjEsNjcuN0wxMTAuMSw2Ny43eiIvPgoJCTwvZz4KCTwvZz4KCTxnPgoJCTxnPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiM2QUE5REQiIGQ9Ik0xMjYuOCw3NC4zYzAsMS4yLTEsMi4yLTIuMiwyLjJzLTIuMi0xLTIuMi0yLjJzMS0yLjIsMi4yLTIuMlMxMjYuOCw3My4xLDEyNi44LDc0LjN6Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzZBQTlERCIgZD0iTTEzNy42LDc0LjNjMCwxLjItMSwyLjItMi4yLDIuMmMtMS4yLDAtMi4yLTEtMi4yLTIuMnMxLTIuMiwyLjItMi4yCgkJCQlDMTM2LjYsNzIuMSwxMzcuNiw3My4xLDEzNy42LDc0LjN6Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzZBQTlERCIgZD0iTTEyNi44LDY0LjR2OS45Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzZBQTlERCIgZD0iTTEzNy43LDY0LjR2OS45Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzZBQTlERCIgZD0iTTEyNi44LDYzLjVoMTAuOHYyLjdoLTEwLjhDMTI2LjgsNjYuMiwxMjYuOCw2My41LDEyNi44LDYzLjV6Ii8+CgkJPC9nPgoJPC9nPgoJPGc+CgkJPGc+CgkJCTxwYXRoIGZpbGw9IiM2QUE5REQiIGQ9Ik0xNzAuOCw2My4xTDE3MC44LDYzLjFjLTAuMywwLTAuNSwwLTAuOCwwYy0yLjEsMC00LDEtNS4zLDIuNWwtMC4xLDBsLTAuMS0wLjFsLTEtMS4ybC0wLjMsMy40bDMuNCwwLjMKCQkJCWwtMS4xLTEuM2wtMC4xLTAuMWwwLjEtMC4xYzEuMS0xLjQsMy0yLjMsNS0yLjFsMCwwYzMuMiwwLjMsNS41LDMuMSw1LjIsNi4zYy0wLjMsMy0zLjEsNS4zLTYuMSw1LjFjLTMuMS0wLjItNS40LTIuOS01LjMtNgoJCQkJbC0xLjMtMC4xYy0wLjIsMy44LDIuNiw3LjEsNi4zLDcuNGMzLjksMC4zLDcuMy0yLjYsNy42LTYuNUMxNzcuMiw2Ni44LDE3NC40LDYzLjUsMTcwLjgsNjMuMXoiLz4KCQkJPHBhdGggZmlsbD0iIzZBQTlERCIgZD0iTTE3MC4zLDY3LjRjMC0wLjMtMC4zLTAuNi0wLjYtMC42cy0wLjYsMC4zLTAuNiwwLjZ2My4yYzAsMC4yLDAuMSwwLjMsMC4yLDAuNGMwLjEsMC4xLDAuMywwLjIsMC40LDAuMgoJCQkJaDIuNGMwLjQsMCwwLjYtMC4zLDAuNi0wLjZTMTcyLjQsNzAsMTcyLDcwaC0xLjZoLTAuMnYtMC4yTDE3MC4zLDY3LjRMMTcwLjMsNjcuNHoiLz4KCQk8L2c+Cgk8L2c+Cgk8Zz4KCQk8Zz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNkFBOUREIiBkPSJNMTg2LjIsNjMuNGg3LjdjMS41LDAsMi43LDEuMiwyLjcsMi43djcuN2MwLDEuNS0xLjIsMi43LTIuNywyLjdoLTcuNwoJCQkJYy0xLjUsMC0yLjctMS4yLTIuNy0yLjd2LTcuN0MxODMuNCw2NC43LDE4NC43LDYzLjQsMTg2LjIsNjMuNHoiLz4KCQkJPGVsbGlwc2UgZmlsbD0iIzZBQTlERCIgY3g9IjE4NiIgY3k9IjY4LjkiIHJ4PSIwLjciIHJ5PSIwLjciLz4KCQkJPGVsbGlwc2UgZmlsbD0iIzZBQTlERCIgY3g9IjE5NCIgY3k9IjY2LjciIHJ4PSIwLjciIHJ5PSIwLjciLz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNkFBOUREIiBzdHJva2UtbGluZWNhcD0icm91bmQiIGQ9Ik0xODYsNzMuM2wwLjQtMC4zYzAuNC0wLjMsMS0wLjMsMS41LTAuMWwxLDAuNAoJCQkJYzAuNSwwLjIsMSwwLjIsMS41LTAuMWwwLjgtMC41YzAuNC0wLjMsMS0wLjMsMS41LTAuMWwxLjgsMC44Ii8+CgkJPC9nPgoJPC9nPgoJPHBhdGggZmlsbD0iIzZBQTlERCIgc3Ryb2tlPSIjNkFBOUREIiBzdHJva2Utd2lkdGg9IjAuMjUiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgZD0iTTE1Niw2NC4zYy0wLjItMC4xLTAuNC0wLjEtMC41LDAKCQljMCwwLTAuMiwwLjEtMC45LDAuMmMtMC43LDAtMi40LTAuMS0zLjgtMC42Yy0wLjgtMC4zLTEuNy0wLjUtMi41LTAuNWMtMC4yLDAtMC40LDAtMC41LDBjLTEuMywwLTIuNSwwLjMtMy42LDEKCQljLTAuMiwwLjEtMC4yLDAuMi0wLjIsMC40djExLjZjMCwwLjMsMC4xLDAuNSwwLjMsMC41YzAuNiwwLDAuNS0wLjQsMC41LTAuNnYtNS43YzAuNy0wLjMsMy4yLTEuMSw1LjgtMC4xCgkJYzEuNiwwLjYsMy41LDAuNyw0LjMsMC43YzAuOCwwLDEuMy0wLjMsMS4zLTAuM2MwLjItMC4xLDAuMy0wLjIsMC4zLTAuNHYtNS43QzE1Ni4yLDY0LjYsMTU2LjEsNjQuNCwxNTYsNjQuM3ogTTE1NS42LDcwLjIKCQljLTAuMSwwLTAuNywwLjEtMSwwLjFjLTAuNywwLTIuNC0wLjEtMy44LTAuNmMtMi41LTEtNS0wLjUtNi4yLTAuMXYtNC45YzAuOS0wLjUsMi4yLTAuNywzLjItMC43YzAuMSwwLDAuMywwLDAuNCwwCgkJYzAuNywwLDEuNSwwLjIsMi4yLDAuNGMxLjYsMC42LDMuNSwwLjcsNC4zLDAuN2MwLjIsMCwwLjgsMCwxLTAuMVY3MC4yeiIvPgoJPGc+CgkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNkFBOUREIiBkPSJNNDguMSw2My41aDMuN2MyLjUsMCw0LjUsMiw0LjUsNC41YzAsMC41LTAuNCwwLjktMC45LDAuOUg0NC41Yy0wLjUsMC0wLjktMC40LTAuOS0wLjkKCQkJQzQzLjYsNjUuNSw0NS42LDYzLjUsNDguMSw2My41eiIvPgoJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzZBQTlERCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNNDMuNSw2OC44Yy0wLjIsMC4xLTAuNSwxLjIsMCwxLjVjMS40LDAuOSw4LjUsMC44LDExLjMsMC42CgkJCWMwLjgtMC4xLDEuNi0wLjQsMS43LTEuMmMwLTAuMy0wLjEtMC42LTAuNi0wLjkiLz4KCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiM2QUE5REQiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgZD0iTTQzLjUsNzAuNkw0My4zLDcxYy0wLjIsMC41LDAuMiwxLDAuNywwLjljMC4zLTAuMSwwLjUsMC4xLDAuNywwLjMKCQkJbDAuMSwwLjJjMC4zLDAuNSwxLDAuNiwxLjUsMC4ybDAsMGMwLjMtMC4yLDAuNy0wLjMsMS0wLjJsMC44LDAuM2MwLjQsMC4yLDAuOCwwLjEsMS4yLDBsMC41LTAuMmMwLjQtMC4yLDAuOS0wLjIsMS4zLDBsMC41LDAuMgoJCQljMC40LDAuMiwwLjgsMC4yLDEuMi0wLjFsMC4yLTAuMWMwLjMtMC4yLDAuOC0wLjIsMS4xLDAuMWwwLjIsMC4yYzAuMywwLjMsMC44LDAuMiwxLTAuMmwwLjEtMC4yYzAuMS0wLjIsMC0wLjMsMC4yLTAuMwoJCQljMC41LDAsMS4yLTAuMywxLjEtMC43bC0wLjQtMS4xIi8+CgkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNkFBOUREIiBzdHJva2UtbGluZWNhcD0icm91bmQiIGQ9Ik00My41LDcyLjJjLTAuMSwwLjItMC4zLDAuOCwwLDEuMWMwLjMsMC40LDMsMS4xLDYuNCwxLjEKCQkJYzIuMiwwLDQuNi0wLjMsNi0wLjZjMC41LTAuMSwwLjktMC40LDAuOC0wLjljMC0wLjItMC4yLTAuNS0wLjQtMC43Ii8+CgkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNkFBOUREIiBzdHJva2UtbGluZWNhcD0icm91bmQiIGQ9Ik00My41LDczLjNjMCwwLjUsMC42LDIuMywxLjMsMi43YzEuOCwwLjgsNS43LDAuNyw4LjEsMC41CgkJCWMxLjMtMC4xLDIuNS0wLjcsMy4yLTEuOGMwLjMtMC41LDAuNS0xLDAuNS0xLjQiLz4KCQk8ZWxsaXBzZSBmaWxsPSIjNkFBOUREIiBjeD0iNTEuNiIgY3k9IjY2LjUiIHJ4PSIwLjMiIHJ5PSIwLjQiLz4KCQk8ZWxsaXBzZSBmaWxsPSIjNkFBOUREIiBjeD0iNTMiIGN5PSI2NSIgcng9IjAuMyIgcnk9IjAuNCIvPgoJCTxlbGxpcHNlIGZpbGw9IiM2QUE5REQiIGN4PSI1MyIgY3k9IjY3LjIiIHJ4PSIwLjMiIHJ5PSIwLjQiLz4KCQk8ZWxsaXBzZSBmaWxsPSIjNkFBOUREIiBjeD0iNTQuMyIgY3k9IjY2LjUiIHJ4PSIwLjMiIHJ5PSIwLjQiLz4KCQk8ZWxsaXBzZSBmaWxsPSIjNkFBOUREIiBjeD0iNTAuOSIgY3k9IjY1IiByeD0iMC4zIiByeT0iMC40Ii8+Cgk8L2c+Cgk8Zz4KCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiM2QUE5REQiIGQ9Ik0yNC4yLDcxdi03LjZjMC4xLDAuMSwwLjgsMC45LDIuOCwzLjFjMi41LTEuNyw1LjYtMC43LDYuOSwwbDIuNC0zLjF2Ny4xCgkJCWMwLDEuMi0wLjEsMi41LTAuOSwzLjRjLTEsMS4yLTIuNywyLjUtNS4zLDIuNWMtMi45LDAtNC41LTEuNS01LjMtMi45QzI0LjIsNzIuOSwyNC4yLDcyLDI0LjIsNzF6Ii8+CgkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjNkFBOUREIiBzdHJva2UtbGluZWNhcD0icm91bmQiIGQ9Ik0yMS4yLDcwLjFsNS40LDEuMiIvPgoJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzZBQTlERCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNMjEuMiw3NC4xbDUuNC0xLjIiLz4KCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiM2QUE5REQiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgZD0iTTM4LjgsNzAuMWwtNS40LDEuMiIvPgoJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzZBQTlERCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNMzguOCw3NC4xbC01LjQtMS4yIi8+CgkJPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGZpbGw9IiM2QUE5REQiIGQ9Ik0yOS41LDcyLjRMMjksNzEuN2MtMC4yLTAuMywwLTAuNiwwLjMtMC42aDEuNAoJCQljMC4zLDAsMC41LDAuNCwwLjMsMC42bC0wLjcsMWwwLDBjLTAuNywxLjItMi42LDEuMS0zLjEtMC4zbC0wLjEtMC4yYy0wLjEtMC4yLDAtMC40LDAuMi0wLjVjMC4yLTAuMSwwLjQsMCwwLjUsMC4ybDAuMSwwLjIKCQkJQzI4LjMsNzIuOCwyOS4xLDcyLjksMjkuNSw3Mi40eiIvPgoJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzZBQTlERCIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNMzIuNCw3Mi4xbC0wLjEsMC4yYy0wLjQsMS0xLjgsMS4xLTIuMywwLjIiLz4KCQk8ZWxsaXBzZSBmaWxsPSIjNkFBOUREIiBjeD0iMjcuNiIgY3k9IjY5LjciIHJ4PSIwLjciIHJ5PSIwLjciLz4KCQk8ZWxsaXBzZSBmaWxsPSIjNkFBOUREIiBjeD0iMzIuNCIgY3k9IjY5LjciIHJ4PSIwLjciIHJ5PSIwLjciLz4KCTwvZz4KPC9nPgo8Zz4KCTxwYXRoIGZpbGw9IiM4Njg2ODYiIHN0cm9rZT0iIzg2ODY4NiIgc3Ryb2tlLXdpZHRoPSIwLjEiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgZD0iTTEyLjgsOS41YzAuNiwwLDEuMS0wLjUsMS4xLTEuMgoJCWMwLTAuNi0wLjUtMS4xLTEuMS0xLjFjLTAuNiwwLTEuMiwwLjUtMS4yLDEuMVMxMi4yLDkuNSwxMi44LDkuNXogTTEyLjgsNy45YzAuMiwwLDAuNCwwLjIsMC40LDAuNGMwLDAuMi0wLjIsMC40LTAuNCwwLjQKCQljLTAuMiwwLTAuNC0wLjItMC40LTAuNEMxMi40LDguMSwxMi42LDcuOSwxMi44LDcuOXoiLz4KCTxwYXRoIGZpbGw9IiM4Njg2ODYiIHN0cm9rZT0iIzg2ODY4NiIgc3Ryb2tlLXdpZHRoPSIwLjEiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgZD0iTTcuMiw5LjVjMC42LDAsMS4yLTAuNSwxLjItMS4yCgkJYzAtMC42LTAuNS0xLjEtMS4yLTEuMWMtMC42LDAtMS4xLDAuNS0xLjEsMS4xUzYuNiw5LjUsNy4yLDkuNXogTTcuMiw3LjljMC4yLDAsMC40LDAuMiwwLjQsMC40YzAsMC4yLTAuMiwwLjQtMC40LDAuNAoJCUM3LDguNyw2LjgsOC41LDYuOCw4LjNDNi44LDguMSw3LDcuOSw3LjIsNy45eiIvPgoJPHBhdGggZmlsbD0iIzg2ODY4NiIgc3Ryb2tlPSIjODY4Njg2IiBzdHJva2Utd2lkdGg9IjAuMSIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBkPSJNMTQuNiwxMS4yYy0wLjEtMC4xLTAuMi0wLjItMC4zLTAuMkg1LjcKCQljLTAuMSwwLTAuMiwwLjEtMC4zLDAuMmMtMC4xLDAuMS0wLjEsMC4yLDAsMC40YzAuNywyLDIuNSwzLjMsNC42LDMuM3MzLjktMS4zLDQuNi0zLjNDMTQuNywxMS40LDE0LjcsMTEuMywxNC42LDExLjJ6IE0xMCwxNC4xCgkJYy0xLjYsMC0zLTAuOS0zLjctMi4yaDcuM0MxMywxMy4yLDExLjYsMTQuMSwxMCwxNC4xeiIvPgoJPHBhdGggZmlsbD0iIzg2ODY4NiIgc3Ryb2tlPSIjODY4Njg2IiBzdHJva2Utd2lkdGg9IjAuMSIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBkPSJNMTAsM2MtMy44LDAtNywzLjEtNyw3czMuMSw3LDcsN3M3LTMuMSw3LTcKCQlTMTMuOCwzLDEwLDN6IE0xMCwxNi4yYy0zLjQsMC02LjItMi44LTYuMi02LjJTNi42LDMuOCwxMCwzLjhzNi4yLDIuOCw2LjIsNi4yUzEzLjQsMTYuMiwxMCwxNi4yeiIvPgo8L2c+CjxnIGlkPSJDYXJfMDAwMDAwMTg5MzUzOTUwODU0MTM0MTM3NTAwMDAwMDA4MjUyNzM4Nzc4NDI3NzU3MTVfIj4KCTxnPgoJCTxnPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiM4Njg2ODYiIGQ9Ik02NC4xLDEzLjRsMi4zLDBjMC4yLDAsMC40LDAuMiwwLjQsMC40djIuMWMwLDAuMi0wLjIsMC40LTAuNCwwLjRoLTIuMwoJCQkJYy0wLjIsMC0wLjQtMC4yLTAuNC0wLjR2LTIuMUM2My43LDEzLjYsNjMuOCwxMy40LDY0LjEsMTMuNHoiLz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjODY4Njg2IiBkPSJNNzMuNSwxMy40aDIuNGMwLjIsMCwwLjQsMC4yLDAuNCwwLjR2Mi4xYzAsMC4yLTAuMiwwLjQtMC40LDAuNGgtMi40CgkJCQljLTAuMiwwLTAuNC0wLjItMC40LTAuNGwwLTIuMUM3My4xLDEzLjYsNzMuMywxMy40LDczLjUsMTMuNHoiLz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjODY4Njg2IiBkPSJNNjMuNyw4LjRoMTIuNnY1SDYzLjdWOC40eiIvPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiM4Njg2ODYiIGQ9Ik02NS41LDMuNmg4LjljMSwwLDEuOSwwLjgsMS45LDEuOXYzLjFINjMuN1Y1LjVDNjMuNyw0LjQsNjQuNSwzLjYsNjUuNSwzLjZ6Ii8+CgkJCTxlbGxpcHNlIGZpbGw9IiM4Njg2ODYiIGN4PSI2Ni4yIiBjeT0iMTAuOSIgcng9IjAuOSIgcnk9IjAuOSIvPgoJCQk8ZWxsaXBzZSBmaWxsPSIjODY4Njg2IiBjeD0iNzMuOCIgY3k9IjEwLjkiIHJ4PSIwLjkiIHJ5PSIwLjkiLz4KCQk8L2c+Cgk8L2c+CjwvZz4KPGcgaWQ9IkFjdGl2aXRpZXMiPgoJPGc+CgkJPGc+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzg2ODY4NiIgZD0iTTk2LjQsMTBjMCwzLjYtMi45LDYuNS02LjQsNi41cy02LjQtMi45LTYuNC02LjVzMi45LTYuNSw2LjQtNi41Uzk2LjQsNi40LDk2LjQsMTB6Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzg2ODY4NiIgZD0iTTk2LjMsOC42YzAsMCwwLDAuMSwwLDAuMWMtMC45LDAuMS0yLjksMC4xLTQuNi0xLjJjLTEuMS0wLjgtMi0xLjctMi42LTIuNQoJCQkJYy0wLjMtMC40LTAuNi0wLjgtMC43LTEuMWMtMC4xLTAuMS0wLjEtMC4yLTAuMS0wLjJjMC41LTAuMSwxLjItMC4yLDItMC4yYzEuMiwwLDIuNSwwLjMsMy41LDEuMWMxLDAuOCwxLjcsMS44LDIuMSwyLjgKCQkJCUM5Ni4xLDcuOSw5Ni4yLDguMyw5Ni4zLDguNnoiLz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjODY4Njg2IiBkPSJNODQsMTIuMWMwLDAsMC0wLjEsMC0wLjFjMC45LTAuMiwyLjktMC40LDQuNywwLjZjMS4xLDAuNiwxLjksMS41LDIuNCwyLjMKCQkJCWMwLjQsMC41LDAuNiwxLDAuNywxLjNjLTAuNCwwLjEtMSwwLjItMS43LDAuM2MtMSwwLTIuMS0wLjEtMy4yLTAuOGMtMS4xLTAuNi0xLjktMS42LTIuNC0yLjVDODQuMiwxMi44LDg0LjEsMTIuNCw4NCwxMi4xeiIvPgoJCTwvZz4KCTwvZz4KPC9nPgo8ZyBpZD0iT2JqZWN0c18wMDAwMDA2NDMxMjM3MTczOTEzMDMxNTI1MDAwMDAxMDIyNTg4OTAzMjIyODYzMjk3NV8iPgoJPGc+CgkJPGc+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzg2ODY4NiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNMTE2LjMsNi44bC0xLjQsMkwxMTQuMSw4bC0wLjYtMC43bDAsMC45bC0wLjEsOC4yaC02LjhsLTAuMS04LjIKCQkJCWwwLTAuOUwxMDUuOSw4bC0wLjgsMC44bC0xLjQtMmwyLjYtMi45YzAuMS0wLjEsMC4yLTAuMSwwLjMtMC4xaDEuM2wwLjQsMC43YzAuNywxLjMsMi42LDEuMywzLjMtMC4xbDAuMy0wLjZoMS4yCgkJCQljMC4xLDAsMC4yLDAsMC4zLDAuMWwwLjMtMC4zbC0wLjMsMC4zTDExNi4zLDYuOHoiLz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjODY4Njg2IiBkPSJNMTEwLjEsNy43aDJ2MC45YzAsMC40LTAuNCwwLjctMSwwLjdjLTAuNiwwLTEtMC4zLTEtMC43TDExMC4xLDcuN0wxMTAuMSw3Ljd6Ii8+CgkJPC9nPgoJPC9nPgo8L2c+CjxnIGlkPSJTeW1ib2xzXzAwMDAwMDk2NzQ2OTA3ODY5OTI5OTIxMTgwMDAwMDA2NDg0ODEyODMwMjgyNTgyNDE2XyI+Cgk8Zz4KCQk8Zz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjODY4Njg2IiBkPSJNMTI2LjgsMTQuM2MwLDEuMi0xLDIuMi0yLjIsMi4ycy0yLjItMS0yLjItMi4yczEtMi4yLDIuMi0yLjJTMTI2LjgsMTMuMSwxMjYuOCwxNC4zeiIvPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiM4Njg2ODYiIGQ9Ik0xMzcuNiwxNC4zYzAsMS4yLTEsMi4yLTIuMiwyLjJjLTEuMiwwLTIuMi0xLTIuMi0yLjJzMS0yLjIsMi4yLTIuMgoJCQkJQzEzNi42LDEyLjEsMTM3LjYsMTMuMSwxMzcuNiwxNC4zeiIvPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiM4Njg2ODYiIGQ9Ik0xMjYuOCw0LjR2OS45Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzg2ODY4NiIgZD0iTTEzNy43LDQuNHY5LjkiLz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjODY4Njg2IiBkPSJNMTI2LjgsMy41aDEwLjh2Mi43aC0xMC44QzEyNi44LDYuMiwxMjYuOCwzLjUsMTI2LjgsMy41eiIvPgoJCTwvZz4KCTwvZz4KPC9nPgo8ZyBpZD0iUmVjZW50cyI+Cgk8Zz4KCQk8Zz4KCQkJPHBhdGggZmlsbD0iIzg2ODY4NiIgZD0iTTE3MC44LDMuMUwxNzAuOCwzLjFjLTAuMywwLTAuNSwwLTAuOCwwYy0yLjEsMC00LDEtNS4zLDIuNWwtMC4xLDBsLTAuMS0wLjFsLTEtMS4ybC0wLjMsMy40bDMuNCwwLjMKCQkJCWwtMS4xLTEuM2wtMC4xLTAuMWwwLjEtMC4xYzEuMS0xLjQsMy0yLjMsNS0yLjFsMCwwYzMuMiwwLjMsNS41LDMuMSw1LjIsNi4zYy0wLjMsMy0zLjEsNS4zLTYuMSw1LjFjLTMuMS0wLjItNS40LTIuOS01LjMtNgoJCQkJTDE2Myw5LjVjLTAuMiwzLjgsMi42LDcuMSw2LjMsNy40YzMuOSwwLjQsNy4zLTIuNiw3LjYtNi41QzE3Ny4yLDYuOCwxNzQuNCwzLjUsMTcwLjgsMy4xeiIvPgoJCQk8cGF0aCBmaWxsPSIjODY4Njg2IiBkPSJNMTcwLjMsNy40YzAtMC4zLTAuMy0wLjYtMC42LTAuNlMxNjksNy4xLDE2OSw3LjR2My4yYzAsMC4yLDAuMSwwLjMsMC4yLDAuNGMwLjEsMC4xLDAuMywwLjIsMC40LDAuMgoJCQkJaDIuNGMwLjQsMCwwLjYtMC4zLDAuNi0wLjZzLTAuMy0wLjYtMC42LTAuNmgtMS42aC0wLjJWOS44TDE3MC4zLDcuNEwxNzAuMyw3LjR6Ii8+CgkJPC9nPgoJPC9nPgo8L2c+CjxnIGlkPSJDdXN0b21fMDAwMDAxODEwODcyMjk0MzQzMDIzMzY3ODAwMDAwMDUxNTIyNzc5NDU5NDA2NzQ0ODhfIj4KCTxnPgoJCTxnPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiM4Njg2ODYiIGQ9Ik0xODYuMiwzLjRoNy43YzEuNSwwLDIuNywxLjIsMi43LDIuN3Y3LjdjMCwxLjUtMS4yLDIuNy0yLjcsMi43aC03LjcKCQkJCWMtMS41LDAtMi43LTEuMi0yLjctMi43VjYuMUMxODMuNCw0LjYsMTg0LjcsMy40LDE4Ni4yLDMuNHoiLz4KCQkJPGVsbGlwc2UgZmlsbD0iIzg2ODY4NiIgY3g9IjE4NiIgY3k9IjguOSIgcng9IjAuNyIgcnk9IjAuNyIvPgoJCQk8ZWxsaXBzZSBmaWxsPSIjODY4Njg2IiBjeD0iMTk0IiBjeT0iNi43IiByeD0iMC43IiByeT0iMC43Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzg2ODY4NiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNMTg2LDEzLjNsMC40LTAuM2MwLjQtMC4zLDEtMC4zLDEuNS0wLjFsMSwwLjQKCQkJCWMwLjUsMC4yLDEsMC4yLDEuNS0wLjFsMC44LTAuNWMwLjQtMC4zLDEtMC4zLDEuNS0wLjFsMS44LDAuOCIvPgoJCTwvZz4KCTwvZz4KPC9nPgo8cGF0aCBmaWxsPSIjODY4Njg2IiBzdHJva2U9IiM4Njg2ODYiIHN0cm9rZS13aWR0aD0iMC4yNSIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBkPSJNMTU2LDQuM2MtMC4yLTAuMS0wLjQtMC4xLTAuNSwwCgljMCwwLTAuMiwwLjEtMC45LDAuMWMtMC43LDAtMi40LTAuMS0zLjgtMC42Yy0wLjgtMC4zLTEuNy0wLjUtMi41LTAuNWMtMC4yLDAtMC40LDAtMC41LDBjLTEuMywwLTIuNSwwLjMtMy42LDEKCWMtMC4yLDAuMS0wLjIsMC4yLTAuMiwwLjR2MTEuNmMwLDAuMywwLjEsMC41LDAuMywwLjVjMC42LDAsMC41LTAuNCwwLjUtMC42di01LjdjMC43LTAuMywzLjItMS4xLDUuOC0wLjFjMS42LDAuNiwzLjUsMC43LDQuMywwLjcKCWMwLjgsMCwxLjMtMC4zLDEuMy0wLjNjMC4yLTAuMSwwLjMtMC4yLDAuMy0wLjRWNC43QzE1Ni4yLDQuNSwxNTYuMSw0LjQsMTU2LDQuM3ogTTE1NS42LDEwLjJjLTAuMSwwLTAuNywwLjEtMSwwLjEKCWMtMC43LDAtMi40LTAuMS0zLjgtMC42Yy0yLjUtMS01LTAuNS02LjItMC4xVjQuN2MwLjktMC41LDIuMi0wLjcsMy4yLTAuN2MwLjEsMCwwLjMsMCwwLjQsMGMwLjcsMCwxLjUsMC4yLDIuMiwwLjQKCWMxLjYsMC42LDMuNSwwLjcsNC4zLDAuN2MwLjIsMCwwLjgsMCwxLTAuMVYxMC4yeiIvPgo8ZyBpZD0iRm9vZCI+Cgk8ZyBpZD0iTGF5ZXJfMTIiPgoJCTxnPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiM4Njg2ODYiIGQ9Ik00OC4xLDMuNWgzLjdjMi41LDAsNC41LDIsNC41LDQuNWMwLDAuNS0wLjQsMC45LTAuOSwwLjlINDQuNWMtMC41LDAtMC45LTAuNC0wLjktMC45CgkJCQlDNDMuNiw1LjUsNDUuNiwzLjUsNDguMSwzLjV6Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzg2ODY4NiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNNDMuNSw4LjdjLTAuMiwwLjEtMC41LDEuMiwwLDEuNWMxLjQsMC45LDguNSwwLjgsMTEuMywwLjYKCQkJCWMwLjgtMC4xLDEuNi0wLjQsMS43LTEuMmMwLTAuMy0wLjEtMC42LTAuNi0wLjkiLz4KCQkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjODY4Njg2IiBzdHJva2UtbGluZWNhcD0icm91bmQiIGQ9Ik00My41LDEwLjZMNDMuMywxMWMtMC4yLDAuNSwwLjIsMSwwLjcsMC45CgkJCQljMC4zLTAuMSwwLjUsMC4xLDAuNywwLjNsMC4xLDAuMmMwLjMsMC41LDEsMC42LDEuNSwwLjJsMCwwYzAuMy0wLjIsMC43LTAuMywxLTAuMmwwLjgsMC4zYzAuNCwwLjEsMC44LDAuMSwxLjIsMGwwLjUtMC4yCgkJCQljMC40LTAuMiwwLjktMC4yLDEuMywwbDAuNSwwLjJjMC40LDAuMiwwLjgsMC4xLDEuMi0wLjFsMC4yLTAuMWMwLjMtMC4yLDAuOC0wLjEsMS4xLDAuMWwwLjIsMC4yYzAuMywwLjMsMC44LDAuMiwxLTAuMmwwLjEtMC4yCgkJCQljMC4xLTAuMiwwLTAuMywwLjItMC40YzAuNSwwLDEuMi0wLjMsMS4xLTAuN2wtMC40LTEuMSIvPgoJCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiM4Njg2ODYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgZD0iTTQzLjUsMTIuMWMtMC4xLDAuMi0wLjMsMC44LDAsMS4xYzAuMywwLjQsMywxLjEsNi40LDEuMQoJCQkJYzIuMiwwLDQuNi0wLjMsNi0wLjZjMC41LTAuMSwwLjktMC40LDAuOC0wLjljMC0wLjItMC4yLTAuNS0wLjQtMC43Ii8+CgkJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzg2ODY4NiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNNDMuNSwxMy4zYzAsMC41LDAuNiwyLjQsMS4zLDIuNmMxLjgsMC44LDUuNywwLjcsOC4xLDAuNQoJCQkJYzEuMy0wLjEsMi41LTAuNywzLjItMS44YzAuMy0wLjUsMC41LTEsMC41LTEuNCIvPgoJCQk8ZWxsaXBzZSBmaWxsPSIjODY4Njg2IiBjeD0iNTEuNiIgY3k9IjYuNSIgcng9IjAuMyIgcnk9IjAuNCIvPgoJCQk8ZWxsaXBzZSBmaWxsPSIjODY4Njg2IiBjeD0iNTMiIGN5PSI0LjkiIHJ4PSIwLjMiIHJ5PSIwLjQiLz4KCQkJPGVsbGlwc2UgZmlsbD0iIzg2ODY4NiIgY3g9IjUzIiBjeT0iNy4yIiByeD0iMC4zIiByeT0iMC40Ii8+CgkJCTxlbGxpcHNlIGZpbGw9IiM4Njg2ODYiIGN4PSI1NC4zIiBjeT0iNi41IiByeD0iMC4zIiByeT0iMC40Ii8+CgkJCTxlbGxpcHNlIGZpbGw9IiM4Njg2ODYiIGN4PSI1MC45IiBjeT0iNC45IiByeD0iMC4zIiByeT0iMC40Ii8+CgkJPC9nPgoJPC9nPgo8L2c+CjxnIGlkPSJBbmltYWxzIj4KCTxnPgoJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzg2ODY4NiIgZD0iTTI0LjIsMTFWMy41YzAuMSwwLjEsMC44LDAuOSwyLjgsMy4xYzIuNS0xLjcsNS42LTAuNyw2LjksMGwyLjQtMy4xdjcuMQoJCQljMCwxLjItMC4xLDIuNS0wLjksMy40Yy0xLDEuMi0yLjcsMi41LTUuMywyLjVjLTIuOSwwLTQuNS0xLjUtNS4zLTIuOUMyNC4yLDEyLjksMjQuMiwxMS45LDI0LjIsMTF6Ii8+CgkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjODY4Njg2IiBzdHJva2UtbGluZWNhcD0icm91bmQiIGQ9Ik0yMS4yLDEwbDUuNCwxLjIiLz4KCQk8cGF0aCBmaWxsPSJub25lIiBzdHJva2U9IiM4Njg2ODYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgZD0iTTIxLjIsMTQuMWw1LjQtMS4yIi8+CgkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjODY4Njg2IiBzdHJva2UtbGluZWNhcD0icm91bmQiIGQ9Ik0zOC44LDEwbC01LjQsMS4yIi8+CgkJPHBhdGggZmlsbD0ibm9uZSIgc3Ryb2tlPSIjODY4Njg2IiBzdHJva2UtbGluZWNhcD0icm91bmQiIGQ9Ik0zOC44LDE0LjFsLTUuNC0xLjIiLz4KCQk8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZmlsbD0iIzg2ODY4NiIgZD0iTTI5LjUsMTIuNEwyOSwxMS43Yy0wLjItMC4zLDAtMC42LDAuMy0wLjZoMS40CgkJCWMwLjMsMCwwLjUsMC40LDAuMywwLjZsLTAuNywxbDAsMGMtMC43LDEuMi0yLjYsMS4xLTMuMS0wLjNsLTAuMS0wLjJjLTAuMS0wLjIsMC0wLjQsMC4yLTAuNXMwLjQsMCwwLjUsMC4ybDAuMSwwLjIKCQkJQzI4LjMsMTIuNywyOS4xLDEyLjksMjkuNSwxMi40eiIvPgoJCTxwYXRoIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzg2ODY4NiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBkPSJNMzIuNCwxMi4xbC0wLjEsMC4yYy0wLjQsMS0xLjgsMS4xLTIuMywwLjIiLz4KCQk8ZWxsaXBzZSBmaWxsPSIjODY4Njg2IiBjeD0iMjcuNiIgY3k9IjkuNyIgcng9IjAuNyIgcnk9IjAuNyIvPgoJCTxlbGxpcHNlIGZpbGw9IiM4Njg2ODYiIGN4PSIzMi40IiBjeT0iOS43IiByeD0iMC43IiByeT0iMC43Ii8+Cgk8L2c+CjwvZz4KPC9zdmc+";function $Me(e){var t,r=e.isActiveCategory,s=e.category,a=e.allowNavigation,i=e.categoryConfig,o=e.onClick;return p.createElement(v1,{tabIndex:a?0:-1,className:kn(RMe.catBtn,Ph.categoryBtn,"epr-icn-"+s,(t={},t[$n.active]=r,t)),onClick:o,"aria-label":Wee(i),"aria-selected":r,role:"tab","aria-controls":"epr-category-nav-id"})}var k$={backgroundPositionY:"calc(var(--epr-category-navigation-button-size) * 3)"},OMe={backgroundPositionY:"calc(var(--epr-category-navigation-button-size) * 2)"},M$={":not(.epr-search-active)":{catBtn:{":hover":k$,"&.epr-active":k$}}},RMe=Er.create(Sr({catBtn:{".":"epr-cat-btn",display:"inline-block",transition:"opacity 0.2s ease-in-out",position:"relative",height:"var(--epr-category-navigation-button-size)",width:"var(--epr-category-navigation-button-size)",backgroundSize:"calc(var(--epr-category-navigation-button-size) * 10)",outline:"none",backgroundPosition:"0 0",backgroundImage:"url("+DMe+")",":focus:before":{content:"",position:"absolute",top:"-2px",left:"-2px",right:"-2px",bottom:"-2px",border:"2px solid var(--epr-category-icon-active-color)",borderRadius:"50%"},"&.epr-icn-suggested":{backgroundPositionX:"calc(var(--epr-category-navigation-button-size) * -8)"},"&.epr-icn-custom":{backgroundPositionX:"calc(var(--epr-category-navigation-button-size) * -9)"},"&.epr-icn-activities":{backgroundPositionX:"calc(var(--epr-category-navigation-button-size) * -4)"},"&.epr-icn-animals_nature":{backgroundPositionX:"calc(var(--epr-category-navigation-button-size) * -1)"},"&.epr-icn-flags":{backgroundPositionX:"calc(var(--epr-category-navigation-button-size) * -7)"},"&.epr-icn-food_drink":{backgroundPositionX:"calc(var(--epr-category-navigation-button-size) * -2)"},"&.epr-icn-objects":{backgroundPositionX:"calc(var(--epr-category-navigation-button-size) * -5)"},"&.epr-icn-smileys_people":{backgroundPositionX:"0px"},"&.epr-icn-symbols":{backgroundPositionX:"calc(var(--epr-category-navigation-button-size) * -6)"},"&.epr-icn-travel_places":{backgroundPositionX:"calc(var(--epr-category-navigation-button-size) * -3)"}}},Su("catBtn",OMe),{".epr-dark-theme":Sr({},M$),".epr-auto-theme":Sr({},M$)}));function FMe(){var e=p.useState(null),t=e[0],r=e[1],s=zA(),a=s[1],i=IMe();EMe({setActiveCategory:r,setVisibleCategories:a});var o=C4(),l=nte(),c=HA(),d=LMe();return p.createElement("div",{className:kn(zMe.nav),role:"tablist","aria-label":"Category navigation",id:"epr-category-nav-id",ref:c},l.map(function(u){var f=BA(u),h=f===t;if(G6e(u)&&d)return null;var m=!o&&!h;return p.createElement($Me,{key:f,category:f,isActiveCategory:h,allowNavigation:m,categoryConfig:u,onClick:function(){i(f),setTimeout(function(){r(f)},10)}})}))}var zMe=Er.create({nav:{".":"epr-category-nav",display:"flex",flexDirection:"row",justifyContent:"space-around",padding:"var(--epr-header-padding)"},".epr-search-active":{nav:{opacity:"0.3",cursor:"default",pointerEvents:"none"}},".epr-main:has(input:not(:placeholder-shown))":{nav:{opacity:"0.3",cursor:"default",pointerEvents:"none"}}}),Fte="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDI2LjMuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjgwcHgiIHZpZXdCb3g9IjAgMCAyMCA4MCIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMjAgODAiIHhtbDpzcGFjZT0icHJlc2VydmUiPgo8cGF0aCBmaWxsPSIjODY4Njg2IiBkPSJNNi45OCwxMy41OWMwLjEsMC4xLDAuMjQsMC4xNSwwLjM3LDAuMTVzMC4yNy0wLjA1LDAuMzctMC4xNWwyLjQyLTIuNDJsMi40MywyLjQzCgljMC4xLDAuMSwwLjI0LDAuMTUsMC4zNywwLjE1YzAuMTQsMCwwLjI3LTAuMDUsMC4zNy0wLjE1YzAuMjEtMC4yMSwwLjIxLTAuNTQsMC0wLjc1bC0yLjQzLTIuNDNMMTMuMzIsOAoJYzAuMjEtMC4yMSwwLjIxLTAuNTQsMC0wLjc1Yy0wLjIxLTAuMjEtMC41NC0wLjIxLTAuNzUsMGwtMi40MiwyLjQyTDcuNzQsNy4yN2MtMC4yMS0wLjIxLTAuNTQtMC4yMS0wLjc1LDAKCWMtMC4yMSwwLjIxLTAuMjEsMC41NCwwLDAuNzVsMi40MSwyLjQxbC0yLjQyLDIuNDJDNi43NywxMy4wNSw2Ljc3LDEzLjM5LDYuOTgsMTMuNTlMNi45OCwxMy41OXoiLz4KPHBhdGggZmlsbD0iIzg2ODY4NiIgZD0iTTEwLjE1LDE4LjQzYzQuNDEsMCw4LTMuNTksOC04YzAtNC40MS0zLjU5LTgtOC04Yy00LjQxLDAtOCwzLjU5LTgsOEMyLjE1LDE0Ljg0LDUuNzQsMTguNDMsMTAuMTUsMTguNDN6CgkgTTEwLjE1LDMuNDljMy44MywwLDYuOTQsMy4xMSw2Ljk0LDYuOTRjMCwzLjgzLTMuMTEsNi45NC02Ljk0LDYuOTRjLTMuODMsMC02Ljk0LTMuMTEtNi45NC02Ljk0QzMuMjEsNi42LDYuMzMsMy40OSwxMC4xNSwzLjQ5CglMMTAuMTUsMy40OXoiLz4KPHBhdGggZmlsbD0iIzMzNzFCNyIgZD0iTTYuOTgsMzMuNTljMC4xLDAuMSwwLjI0LDAuMTUsMC4zNywwLjE1czAuMjctMC4wNSwwLjM3LTAuMTVsMi40Mi0yLjQybDIuNDMsMi40MwoJYzAuMSwwLjEsMC4yNCwwLjE1LDAuMzcsMC4xNWMwLjE0LDAsMC4yNy0wLjA1LDAuMzctMC4xNWMwLjIxLTAuMjEsMC4yMS0wLjU0LDAtMC43NWwtMi40My0yLjQzTDEzLjMyLDI4CgljMC4yMS0wLjIxLDAuMjEtMC41NCwwLTAuNzVjLTAuMjEtMC4yMS0wLjU0LTAuMjEtMC43NSwwbC0yLjQyLDIuNDJsLTIuNDEtMi40MWMtMC4yMS0wLjIxLTAuNTQtMC4yMS0wLjc1LDAKCWMtMC4yMSwwLjIxLTAuMjEsMC41NCwwLDAuNzVsMi40MSwyLjQxbC0yLjQyLDIuNDJDNi43NywzMy4wNSw2Ljc3LDMzLjM5LDYuOTgsMzMuNTlMNi45OCwzMy41OXoiLz4KPHBhdGggZmlsbD0iIzMzNzFCNyIgZD0iTTEwLjE1LDM4LjQzYzQuNDEsMCw4LTMuNTksOC04YzAtNC40MS0zLjU5LTgtOC04Yy00LjQxLDAtOCwzLjU5LTgsOEMyLjE1LDM0Ljg0LDUuNzQsMzguNDMsMTAuMTUsMzguNDN6CgkgTTEwLjE1LDIzLjQ5YzMuODMsMCw2Ljk0LDMuMTEsNi45NCw2Ljk0YzAsMy44My0zLjExLDYuOTQtNi45NCw2Ljk0Yy0zLjgzLDAtNi45NC0zLjExLTYuOTQtNi45NAoJQzMuMjEsMjYuNiw2LjMzLDIzLjQ5LDEwLjE1LDIzLjQ5TDEwLjE1LDIzLjQ5eiIvPgo8cGF0aCBmaWxsPSIjQzBDMEJGIiBkPSJNNi45OCw1My41OWMwLjEsMC4xLDAuMjQsMC4xNSwwLjM3LDAuMTVzMC4yNy0wLjA1LDAuMzctMC4xNWwyLjQyLTIuNDJsMi40MywyLjQzCgljMC4xLDAuMSwwLjI0LDAuMTUsMC4zNywwLjE1YzAuMTQsMCwwLjI3LTAuMDUsMC4zNy0wLjE1YzAuMjEtMC4yMSwwLjIxLTAuNTQsMC0wLjc1bC0yLjQzLTIuNDNMMTMuMzIsNDgKCWMwLjIxLTAuMjEsMC4yMS0wLjU0LDAtMC43NWMtMC4yMS0wLjIxLTAuNTQtMC4yMS0wLjc1LDBsLTIuNDIsMi40MmwtMi40MS0yLjQxYy0wLjIxLTAuMjEtMC41NC0wLjIxLTAuNzUsMAoJYy0wLjIxLDAuMjEtMC4yMSwwLjU0LDAsMC43NWwyLjQxLDIuNDFsLTIuNDIsMi40MkM2Ljc3LDUzLjA1LDYuNzcsNTMuMzksNi45OCw1My41OUw2Ljk4LDUzLjU5eiIvPgo8cGF0aCBmaWxsPSIjQzBDMEJGIiBkPSJNMTAuMTUsNTguNDNjNC40MSwwLDgtMy41OSw4LThjMC00LjQxLTMuNTktOC04LThjLTQuNDEsMC04LDMuNTktOCw4QzIuMTUsNTQuODQsNS43NCw1OC40MywxMC4xNSw1OC40M3oKCSBNMTAuMTUsNDMuNDljMy44MywwLDYuOTQsMy4xMSw2Ljk0LDYuOTRjMCwzLjgzLTMuMTEsNi45NC02Ljk0LDYuOTRjLTMuODMsMC02Ljk0LTMuMTEtNi45NC02Ljk0CglDMy4yMSw0Ni42LDYuMzMsNDMuNDksMTAuMTUsNDMuNDlMMTAuMTUsNDMuNDl6Ii8+CjxwYXRoIGZpbGw9IiM2QUE5REQiIGQ9Ik02Ljk4LDczLjU5YzAuMSwwLjEsMC4yNCwwLjE1LDAuMzcsMC4xNXMwLjI3LTAuMDUsMC4zNy0wLjE1bDIuNDItMi40MmwyLjQzLDIuNDMKCWMwLjEsMC4xLDAuMjQsMC4xNSwwLjM3LDAuMTVjMC4xNCwwLDAuMjctMC4wNSwwLjM3LTAuMTVjMC4yMS0wLjIxLDAuMjEtMC41NCwwLTAuNzVsLTIuNDMtMi40M0wxMy4zMiw2OAoJYzAuMjEtMC4yMSwwLjIxLTAuNTQsMC0wLjc1Yy0wLjIxLTAuMjEtMC41NC0wLjIxLTAuNzUsMGwtMi40MiwyLjQybC0yLjQxLTIuNDFjLTAuMjEtMC4yMS0wLjU0LTAuMjEtMC43NSwwCgljLTAuMjEsMC4yMS0wLjIxLDAuNTQsMCwwLjc1bDIuNDEsMi40MWwtMi40MiwyLjQyQzYuNzcsNzMuMDUsNi43Nyw3My4zOSw2Ljk4LDczLjU5TDYuOTgsNzMuNTl6Ii8+CjxwYXRoIGZpbGw9IiM2QUE5REQiIGQ9Ik0xMC4xNSw3OC40M2M0LjQxLDAsOC0zLjU5LDgtOGMwLTQuNDEtMy41OS04LTgtOGMtNC40MSwwLTgsMy41OS04LDhDMi4xNSw3NC44NCw1Ljc0LDc4LjQzLDEwLjE1LDc4LjQzegoJIE0xMC4xNSw2My40OWMzLjgzLDAsNi45NCwzLjExLDYuOTQsNi45NGMwLDMuODMtMy4xMSw2Ljk0LTYuOTQsNi45NGMtMy44MywwLTYuOTQtMy4xMS02Ljk0LTYuOTQKCUMzLjIxLDY2LjYsNi4zMyw2My40OSwxMC4xNSw2My40OUwxMC4xNSw2My40OXoiLz4KPC9zdmc+";function BMe(){var e=xte();return p.createElement(v1,{className:kn(_$.btnClearSearch,Ph.visibleOnSearchOnly),onClick:e,"aria-label":"Clear",title:"Clear"},p.createElement("div",{className:kn(_$.icnClearnSearch)}))}var UMe={":hover":{"> .epr-icn-clear-search":{backgroundPositionY:"-60px"}}},_$=Er.create(Sr({btnClearSearch:{".":"epr-btn-clear-search",position:"absolute",right:"var(--epr-search-bar-inner-padding)",height:"30px",width:"30px",display:"flex",alignItems:"center",justifyContent:"center",top:"50%",transform:"translateY(-50%)",padding:"0",borderRadius:"50%",":hover":{background:"var(--epr-hover-bg-color)"},":focus":{background:"var(--epr-hover-bg-color)"}},icnClearnSearch:{".":"epr-icn-clear-search",backgroundColor:"transparent",backgroundRepeat:"no-repeat",backgroundSize:"20px",height:"20px",width:"20px",backgroundImage:"url("+Fte+")",":hover":{backgroundPositionY:"-20px"},":focus":{backgroundPositionY:"-20px"}}},Su("icnClearnSearch",{backgroundPositionY:"-40px"}),Su("btnClearSearch",UMe))),VMe="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDI2LjMuMSwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjQwcHgiIHZpZXdCb3g9IjAgMCAyMCA0MCIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMjAgNDAiIHhtbDpzcGFjZT0icHJlc2VydmUiPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZmlsbD0iIzg2ODY4NiIgZD0iTTEyLDguODFjMCwyLjA4LTEuNjgsMy43Ni0zLjc2LDMuNzZjLTIuMDgsMC0zLjc2LTEuNjgtMy43Ni0zLjc2CgljMC0yLjA4LDEuNjgtMy43NiwzLjc2LTMuNzZDMTAuMzIsNS4wNSwxMiw2LjczLDEyLDguODF6IE0xMS4yMywxMi43MmMtMC44MywwLjY0LTEuODcsMS4wMS0yLjk5LDEuMDFjLTIuNzIsMC00LjkyLTIuMi00LjkyLTQuOTIKCWMwLTIuNzIsMi4yLTQuOTIsNC45Mi00LjkyYzIuNzIsMCw0LjkyLDIuMiw0LjkyLDQuOTJjMCwxLjEzLTAuMzgsMi4xNi0xLjAxLDIuOTlsMy45NCwzLjkzYzAuMjUsMC4yNSwwLjI1LDAuNjYsMCwwLjkyCgljLTAuMjUsMC4yNS0wLjY2LDAuMjUtMC45MiwwTDExLjIzLDEyLjcyeiIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZmlsbD0iI0MwQzBCRiIgZD0iTTEyLDI4LjgxYzAsMi4wOC0xLjY4LDMuNzYtMy43NiwzLjc2Yy0yLjA4LDAtMy43Ni0xLjY4LTMuNzYtMy43NgoJYzAtMi4wOCwxLjY4LTMuNzYsMy43Ni0zLjc2QzEwLjMyLDI1LjA1LDEyLDI2LjczLDEyLDI4LjgxeiBNMTEuMjMsMzIuNzJjLTAuODMsMC42NC0xLjg3LDEuMDEtMi45OSwxLjAxCgljLTIuNzIsMC00LjkyLTIuMi00LjkyLTQuOTJjMC0yLjcyLDIuMi00LjkyLDQuOTItNC45MmMyLjcyLDAsNC45MiwyLjIsNC45Miw0LjkyYzAsMS4xMy0wLjM4LDIuMTYtMS4wMSwyLjk5bDMuOTQsMy45MwoJYzAuMjUsMC4yNSwwLjI1LDAuNjYsMCwwLjkyYy0wLjI1LDAuMjUtMC42NiwwLjI1LTAuOTIsMEwxMS4yMywzMi43MnoiLz4KPC9zdmc+";function HMe(){return p.createElement("div",{className:kn(WMe.icnSearch)})}var WMe=Er.create(Sr({icnSearch:{".":"epr-icn-search",content:"",position:"absolute",top:"50%",left:"var(--epr-search-bar-inner-padding)",transform:"translateY(-50%)",width:"20px",height:"20px",backgroundRepeat:"no-repeat",backgroundPosition:"0 0",backgroundSize:"20px",backgroundImage:"url("+VMe+")"}},Su("icnSearch",{backgroundPositionY:"-20px"})));function qMe(){var e=ste(),t=qA();return e?null:p.createElement(Ote,{className:kn(_w.overlay)},p.createElement(GMe,null),t?p.createElement(Rte,null):null)}function GMe(){var e=Ah(),t=Ru(),r=Oke(),s=Fke(),a=y6e(),i=a.statusSearchResults,o=a.searchTerm,l=a.onChange,c=t==null?void 0:t.current,d=c==null?void 0:c.value;return p.createElement(A4,{className:kn(_w.searchContainer)},p.createElement("input",{autoFocus:s,"aria-label":"Type to search for an emoji",onFocus:e,className:kn(_w.search),type:"text","aria-controls":"epr-search-id",placeholder:r,onChange:function(f){var h,m;l((h=f==null||(m=f.target)==null?void 0:m.value)!=null?h:d)},ref:t}),o?p.createElement("div",{role:"status",className:kn("epr-status-search-results",_w.visuallyHidden),"aria-live":"polite",id:"epr-search-id","aria-atomic":"true"},i):null,p.createElement(HMe,null),p.createElement(BMe,null))}var _w=Er.create(Sr({overlay:{padding:"var(--epr-header-padding)",zIndex:"var(--epr-header-overlay-z-index)"},searchContainer:{".":"epr-search-container",flex:"1",display:"block",minWidth:"0"},visuallyHidden:{clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:"1px",overflow:"hidden",position:"absolute",whiteSpace:"nowrap",width:"1px"},search:{outline:"none",transition:"all 0.2s ease-in-out",color:"var(--epr-search-input-text-color)",borderRadius:"var(--epr-search-input-border-radius)",padding:"var(--epr-search-input-padding)",height:"var(--epr-search-input-height)",backgroundColor:"var(--epr-search-input-bg-color)",border:"1px solid var(--epr-search-border-color)",width:"100%",":focus":{backgroundColor:"var(--epr-search-input-bg-color-active)",border:"1px solid var(--epr-search-border-color-active)"},"::placeholder":{color:"var(--epr-search-input-placeholder-color)"}},btnClearSearch:{".":"epr-btn-clear-search",position:"absolute",right:"var(--epr-search-bar-inner-padding)",height:"30px",width:"30px",display:"flex",alignItems:"center",justifyContent:"center",top:"50%",transform:"translateY(-50%)",padding:"0",borderRadius:"50%",":hover":{background:"var(--epr-hover-bg-color)"},":focus":{background:"var(--epr-hover-bg-color)"}},icnClearnSearch:{".":"epr-icn-clear-search",backgroundColor:"transparent",backgroundRepeat:"no-repeat",backgroundSize:"20px",height:"20px",width:"20px",backgroundImage:"url("+Fte+")",":hover":{backgroundPositionY:"-20px"},":focus":{backgroundPositionY:"-20px"}}},Su("icnClearnSearch",{backgroundPositionY:"-40px"}),Su("btnClearSearch",{":hover > .epr-icn-clear-search":{backgroundPositionY:"-60px"}})));function YMe(){return p.createElement(A4,{className:kn("epr-header",Ph.hiddenOnReactions)},p.createElement(qMe,null),p.createElement(FMe,null))}function QMe(e){return p.createElement(e6e,null,p.createElement(YCe,null),p.createElement(Lke,Object.assign({},e),p.createElement(KMe,null)))}function KMe(){var e=Th(),t=e[0],r=ete(),s=p.useState(!t),a=s[0],i=s[1],o=Bke();return p.useEffect(function(){t&&!r||a||i(!0)},[a,r,t]),o?p.createElement(O6e,null,p.createElement(sMe,null),p.createElement(JMe,{renderAll:a})):null}function JMe(e){var t=e.renderAll;return t?p.createElement(p.Fragment,null,p.createElement(YMe,null),p.createElement(bMe,null),p.createElement(PMe,null)):null}var ZMe=p.memo(QMe,Ree),XMe=function(e){WCe(t,e);function t(s){var a;return a=e.call(this,s)||this,a.state={hasError:!1},a}t.getDerivedStateFromError=function(){return{hasError:!0}};var r=t.prototype;return r.componentDidCatch=function(a,i){console.error("Emoji Picker React failed to render:",a,i)},r.render=function(){return this.state.hasError?null:this.props.children},t}(p.Component);function e_e(e){var t=$ke({onEmojiClick:e.onEmojiClick,onReactionClick:e.onReactionClick,onSkinToneChange:e.onSkinToneChange});return p.createElement(XMe,null,p.createElement(Zee.Provider,{value:t},p.createElement(ZMe,Object.assign({},e))))}const t_e=[{text:" Services & Pricing",icon:Ar},{text:" Book Appointment",icon:Dt},{text:" Business Hours",icon:Rt},{text:" Service Area",icon:zr},{text:" Vehicle Types",icon:Ys}];function n_e(){const{toast:e}=Ee(),[t,r]=p.useState(!1),[s,a]=p.useState(""),[i,o]=p.useState(!1),[l,c]=p.useState(!1),[d,u]=p.useState(!1),[f,h]=p.useState(!1),m=p.useRef(null),g=p.useRef(null),x=p.useRef(null),y={phone:"",name:""},[v,b]=p.useState(()=>{if(typeof window>"u")return[{id:"welcome",text:"Hey, I'm the Clean Machine Assistant! Want to check our services, book an appointment, or ask a question? I can handle it all right here.",sender:"bot",timestamp:new Date}];const C=localStorage.getItem("chatMessages");if(C)try{return JSON.parse(C,(k,M)=>k==="timestamp"&&M?new Date(M):M)}catch(k){console.error("Failed to parse saved messages:",k)}return[{id:"welcome",text:"Hey, I'm the Clean Machine Assistant! Want to check our services, book an appointment, or ask a question? I can handle it all right here.",sender:"bot",timestamp:new Date}]});p.useEffect(()=>{r(!0);const C=()=>{h(window.innerWidth>=768)};return C(),window.addEventListener("resize",C),()=>window.removeEventListener("resize",C)},[]),p.useEffect(()=>{try{localStorage.setItem("chatMessages",JSON.stringify(v))}catch(C){console.error("Failed to save messages to localStorage:",C)}},[v]),p.useEffect(()=>{const C=k=>{m.current&&!m.current.contains(k.target)&&o(!1)};return i&&document.addEventListener("mousedown",C),()=>{document.removeEventListener("mousedown",C)}},[i]),p.useEffect(()=>{var C;(C=x.current)==null||C.scrollIntoView({behavior:"smooth"})},[v,l]),p.useEffect(()=>{var C;(C=g.current)==null||C.focus()},[]);const w=async C=>{const k=C||s;if(!k.trim())return;const M={id:Date.now().toString(),text:k,sender:"user",timestamp:new Date};if(b(A=>[...A,M]),a(""),c(!0),k.toLowerCase().includes("book")||k.toLowerCase().includes("appointment")||k.toLowerCase().includes("schedule")){setTimeout(()=>{const A={id:Date.now().toString()+"-bot",text:"I'd be happy to help you book an appointment! Let me open our scheduling system for you.",sender:"bot",timestamp:new Date,actionButton:{text:"Open Scheduler",action:()=>u(!0)}};b(P=>[...P,A]),c(!1),u(!0)},1e3);return}try{const A=await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:k,channel:"web",customerPhone:y.phone||void 0,customerName:y.name||void 0})});if(!A.ok)throw new Error("Failed to send message");const P=await A.json(),T={id:Date.now().toString()+"-bot",text:P.response||"I'm here to help! Feel free to ask about our services, pricing, or book an appointment.",sender:"bot",timestamp:new Date};b(I=>[...I,T])}catch(A){console.error("Error sending message:",A);const P={id:Date.now().toString()+"-error",text:"I apologize, but I'm having trouble connecting right now. Please try again or call us directly at (918) 856-5304.",sender:"bot",timestamp:new Date};b(T=>[...T,P])}finally{c(!1)}},N=C=>{const k=C.replace(/^[^\s]+ /,"");w(k)},j=C=>C.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}),S=C=>{var k;a(M=>M+C.emoji),o(!1),(k=g.current)==null||k.focus()};return n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 via-blue-950/10 to-black text-white",children:[n.jsxs("div",{className:"absolute inset-0 z-0 overflow-hidden",children:[n.jsx("div",{className:"absolute top-[30%] left-[15%] w-96 h-96 bg-blue-500/10 rounded-full filter blur-3xl animate-pulse"}),n.jsx("div",{className:"absolute bottom-[20%] right-[10%] w-80 h-80 bg-blue-600/10 rounded-full filter blur-3xl animate-pulse"})]}),n.jsx("header",{className:"relative z-20 border-b border-blue-800/30 bg-gray-900/50 backdrop-blur-sm sticky top-0",children:n.jsx("div",{className:"max-w-4xl mx-auto px-4 py-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx(_,{variant:"ghost",asChild:!0,className:"text-blue-400 hover:text-blue-300 hover:bg-blue-950/50","data-testid":"button-back-home",children:n.jsxs(St,{href:"/",children:[n.jsx(pi,{className:"h-4 w-4 mr-2"}),"Back to Home"]})}),n.jsx("div",{className:"hidden sm:block",children:n.jsx("h1",{className:"text-xl font-semibold bg-clip-text text-transparent bg-gradient-to-r from-blue-200 to-blue-400",children:"Clean Machine Assistant"})})]}),n.jsx("div",{className:"flex items-center gap-2",children:n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),n.jsx("span",{className:"text-sm text-blue-300",children:"Online"})]})})]})})}),n.jsx("main",{className:"relative z-10 max-w-4xl mx-auto px-4 py-6",children:n.jsxs(q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"bg-gradient-to-b from-gray-900/80 to-blue-950/30 backdrop-blur-md rounded-2xl shadow-2xl border border-blue-800/30 overflow-hidden",style:{height:"calc(100vh - 180px)"},children:[n.jsxs(ia,{className:"h-full p-6 pb-32",children:[t?n.jsx($s,{initial:!1,children:v.map(C=>n.jsx(q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:`mb-4 flex ${C.sender==="user"?"justify-end":"justify-start"}`,children:n.jsxs("div",{className:`flex items-start gap-3 max-w-[80%] ${C.sender==="user"?"flex-row-reverse":""}`,children:[n.jsx("div",{className:`flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center ${C.sender==="user"?"bg-blue-600":"bg-gradient-to-br from-blue-500 to-blue-700"}`,children:C.sender==="user"?n.jsx(Fn,{className:"h-4 w-4 text-white"}):n.jsx(yo,{className:"h-4 w-4 text-white"})}),n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsx("div",{className:`px-4 py-3 rounded-2xl ${C.sender==="user"?"bg-blue-600 text-white rounded-tr-sm":"bg-gray-800/70 backdrop-blur-sm border border-gray-700/50 text-blue-100 rounded-tl-sm"}`,children:n.jsx("p",{className:"text-sm leading-relaxed whitespace-pre-wrap",children:C.text})}),C.actionButton&&n.jsxs(_,{size:"sm",onClick:C.actionButton.action,className:"mt-2 bg-blue-600 hover:bg-blue-700","data-testid":"button-action-scheduler",children:[n.jsx(Dt,{className:"h-3 w-3 mr-1"}),C.actionButton.text]}),n.jsx("span",{className:"text-xs text-blue-400/60 px-1",children:j(C.timestamp)})]})]})},C.id))}):v.map(C=>n.jsx("div",{className:`mb-4 flex ${C.sender==="user"?"justify-end":"justify-start"}`,children:n.jsxs("div",{className:`flex items-start gap-3 max-w-[80%] ${C.sender==="user"?"flex-row-reverse":""}`,children:[n.jsx("div",{className:`flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center ${C.sender==="user"?"bg-blue-600":"bg-gradient-to-br from-blue-500 to-blue-700"}`,children:C.sender==="user"?n.jsx(Fn,{className:"h-4 w-4 text-white"}):n.jsx(yo,{className:"h-4 w-4 text-white"})}),n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsx("div",{className:`px-4 py-3 rounded-2xl ${C.sender==="user"?"bg-blue-600 text-white rounded-tr-sm":"bg-gray-800/70 backdrop-blur-sm border border-gray-700/50 text-blue-100 rounded-tl-sm"}`,children:n.jsx("p",{className:"text-sm leading-relaxed whitespace-pre-wrap",children:C.text})}),n.jsx("span",{className:"text-xs text-blue-400/60 px-1",children:j(C.timestamp)})]})]})},C.id)),t&&n.jsx($s,{children:l&&n.jsxs(q.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"flex items-center gap-3 mb-4",children:[n.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-blue-500 to-blue-700 flex items-center justify-center",children:n.jsx(yo,{className:"h-4 w-4 text-white"})}),n.jsx("div",{className:"bg-gray-800/70 backdrop-blur-sm border border-gray-700/50 px-4 py-3 rounded-2xl rounded-tl-sm",children:n.jsxs("div",{className:"flex gap-1",children:[n.jsx(q.div,{animate:{y:[0,-5,0]},transition:{duration:.6,repeat:1/0,delay:0},className:"w-2 h-2 bg-blue-400 rounded-full"}),n.jsx(q.div,{animate:{y:[0,-5,0]},transition:{duration:.6,repeat:1/0,delay:.1},className:"w-2 h-2 bg-blue-400 rounded-full"}),n.jsx(q.div,{animate:{y:[0,-5,0]},transition:{duration:.6,repeat:1/0,delay:.2},className:"w-2 h-2 bg-blue-400 rounded-full"})]})})]})}),n.jsx("div",{ref:x})]}),n.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-gray-900 to-transparent p-4",children:[n.jsx("div",{className:"mb-3 flex gap-2 overflow-x-auto pb-2 scrollbar-hide",children:t_e.map((C,k)=>n.jsxs(q.button,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:k*.1},onClick:()=>N(C.text),className:"flex-shrink-0 px-3 py-1.5 bg-blue-600/20 hover:bg-blue-600/30 border border-blue-500/30 rounded-full text-xs text-blue-300 transition-all duration-200 hover:scale-105","data-testid":`suggestion-chip-${k}`,children:[n.jsx(C.icon,{className:"h-3 w-3 inline mr-1"}),C.text.replace(/^[^\s]+ /,"")]},k))}),n.jsxs("div",{className:"flex gap-2 relative",children:[f&&i&&n.jsx("div",{ref:m,className:"absolute bottom-full mb-2 left-0 z-50","data-testid":"emoji-picker-container",children:n.jsx(e_e,{onEmojiClick:S,theme:$p.DARK,width:350,height:450,searchPlaceHolder:"Search emojis...",previewConfig:{showPreview:!1}})}),n.jsxs("div",{className:"flex-1 relative",children:[n.jsx(se,{ref:g,value:s,onChange:C=>a(C.target.value),onKeyPress:C=>C.key==="Enter"&&w(),placeholder:"Type your message...",className:"w-full bg-gray-800/70 backdrop-blur-sm border-blue-500/30 text-white placeholder-blue-300/50 pr-12",disabled:l,"data-testid":"input-chat-message"}),n.jsx(ln,{className:"absolute right-3 top-1/2 -translate-y-1/2 h-4 w-4 text-blue-400/50"})]}),f&&n.jsx(_,{onClick:()=>o(!i),disabled:l,variant:"outline",className:"bg-gray-800/70 backdrop-blur-sm border-blue-500/30 hover:bg-blue-600/20 text-blue-300 hover:text-blue-200 transition-all duration-200","data-testid":"button-emoji-picker",children:n.jsx(pQ,{className:"h-5 w-5"})}),n.jsx(_,{onClick:()=>w(),disabled:!s.trim()||l,className:"bg-blue-600 hover:bg-blue-700 transition-all duration-200","data-testid":"button-send-message",children:l?n.jsx(nt,{className:"h-5 w-5 animate-spin"}):n.jsx(Vi,{className:"h-5 w-5"})})]})]})]})}),n.jsx(At,{open:d,onOpenChange:u,children:n.jsxs(_t,{className:"max-w-4xl max-h-[90vh] overflow-y-auto bg-gray-900 border-blue-800/30",children:[n.jsx($t,{children:n.jsx(Et,{className:"text-blue-100",children:"Book Your Appointment"})}),n.jsx(b4,{onClose:()=>u(!1),onSuccess:()=>{u(!1),e({title:"Appointment Booked!",description:"Your appointment has been successfully scheduled. We'll send you a confirmation shortly."});const C={id:Date.now().toString()+"-confirm",text:" Great! Your appointment has been successfully booked. You'll receive a confirmation via text/email shortly. Looking forward to making your vehicle shine!",sender:"bot",timestamp:new Date};b(k=>[...k,C])}})]})})]})}function r_e(){const[e,t]=zt(),[r,s]=p.useState(""),[a,i]=p.useState(null),[o,l]=p.useState(!1),[c,d]=p.useState(null),[u,f]=p.useState(""),{toast:h}=Ee();p.useEffect(()=>{const y=new URLSearchParams(window.location.search),v=y.get("address");v&&s(decodeURIComponent(v));const b=y.get("phone");b&&f(b)},[]);const m=()=>{if(!r){h({title:"Missing Address",description:"Please enter a destination address",variant:"destructive"});return}const y=`https://maps.google.com/maps?daddr=${encodeURIComponent(r)}`;window.open(y,"_blank")},g=async()=>{if(!r){h({title:"Missing Address",description:"Please enter a destination address",variant:"destructive"});return}if(!u){h({title:"Missing Phone Number",description:"Please enter the customer's phone number",variant:"destructive"});return}l(!0),d(null);try{const y=await x(),{latitude:v,longitude:b}=y.coords,w=await fetch("/api/calculate-travel-time",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({origin:`${v},${b}`,destination:r,customerPhone:u})});if(!w.ok)throw new Error("Failed to calculate travel time");const N=await w.json();if(N.success)i(N.durationMinutes),h({title:"Notification Sent",description:`Customer notified. Estimated arrival: ${N.durationMinutes}-${N.durationMinutes+10} minutes`});else throw new Error(N.error||"Unknown error")}catch(y){console.error("Error:",y),d(y.message||"An error occurred"),h({title:"Error",description:y.message||"Failed to calculate travel time and send notification",variant:"destructive"})}finally{l(!1)}},x=()=>new Promise((y,v)=>{if(!navigator.geolocation){v(new Error("Geolocation is not supported by your browser"));return}navigator.geolocation.getCurrentPosition(y,v,{enableHighAccuracy:!0,timeout:5e3,maximumAge:0})});return n.jsx("div",{className:"container mx-auto py-8 px-4",children:n.jsxs(O,{className:"w-full max-w-md mx-auto",children:[n.jsx(ee,{className:"bg-gradient-to-r from-blue-600 to-blue-500 text-white",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs(_,{variant:"ghost",size:"sm",onClick:()=>t("/dashboard"),className:"text-white hover:bg-blue-700 -ml-2",children:[n.jsx(pi,{className:"h-4 w-4 mr-2"}),"Back"]}),n.jsx(te,{className:"text-xl font-bold",children:"Service Navigation"}),n.jsx("div",{className:"w-16"})]})}),n.jsxs(H,{className:"p-6 space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(U,{htmlFor:"address",children:"Destination Address"}),n.jsx(se,{id:"address",value:r,onChange:y=>s(y.target.value),placeholder:"Enter destination address",className:"w-full"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(U,{htmlFor:"phone",children:"Customer Phone"}),n.jsx(se,{id:"phone",value:u,onChange:y=>f(y.target.value),placeholder:"Enter customer phone number",className:"w-full"})]}),n.jsxs("div",{className:"pt-4 space-y-4",children:[n.jsx(_,{className:"w-full bg-blue-600 hover:bg-blue-700",onClick:m,children:"Open in Maps"}),n.jsx(Ot,{className:"my-4"}),n.jsx(_,{className:"w-full bg-green-600 hover:bg-green-700",onClick:g,disabled:o,children:o?"Calculating...":"Notify Customer I'm On The Way"}),a!==null&&n.jsxs("div",{className:"text-center mt-4 p-4 bg-blue-50 rounded-md",children:[n.jsxs("p",{className:"font-medium",children:["Estimated travel time: ",a," minutes"]}),n.jsxs("p",{className:"text-sm text-gray-600",children:["Customer was notified of ",a,"-",a+10," minute arrival window"]})]}),c&&n.jsx("div",{className:"text-center mt-4 p-4 bg-red-50 text-red-600 rounded-md",children:c})]})]})]})})}const tE=g4,zte=PA,s_e=x4,Bte=p.forwardRef(({className:e,...t},r)=>n.jsx(B0,{className:Le("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:r}));Bte.displayName=B0.displayName;const a_e=P0("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),E4=p.forwardRef(({side:e="right",className:t,children:r,...s},a)=>n.jsxs(s_e,{children:[n.jsx(Bte,{}),n.jsxs(U0,{ref:a,className:Le(a_e({side:e}),t),...s,children:[r,n.jsxs(p1,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[n.jsx(Jr,{className:"h-4 w-4"}),n.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));E4.displayName=U0.displayName;const Ute=({className:e,...t})=>n.jsx("div",{className:Le("flex flex-col space-y-2 text-center sm:text-left",e),...t});Ute.displayName="SheetHeader";const Vte=p.forwardRef(({className:e,...t},r)=>n.jsx(h1,{ref:r,className:Le("text-lg font-semibold text-foreground",e),...t}));Vte.displayName=h1.displayName;const i_e=p.forwardRef(({className:e,...t},r)=>n.jsx(m1,{ref:r,className:Le("text-sm text-muted-foreground",e),...t}));i_e.displayName=m1.displayName;function td(e){return Array.isArray?Array.isArray(e):qte(e)==="[object Array]"}function o_e(e){if(typeof e=="string")return e;let t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function l_e(e){return e==null?"":o_e(e)}function Ol(e){return typeof e=="string"}function Hte(e){return typeof e=="number"}function c_e(e){return e===!0||e===!1||d_e(e)&&qte(e)=="[object Boolean]"}function Wte(e){return typeof e=="object"}function d_e(e){return Wte(e)&&e!==null}function Ti(e){return e!=null}function NC(e){return!e.trim().length}function qte(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const u_e="Incorrect 'index' type",f_e=e=>`Invalid value for key ${e}`,h_e=e=>`Pattern length exceeds max of ${e}.`,m_e=e=>`Missing ${e} property in key`,p_e=e=>`Property 'weight' in key '${e}' must be a positive integer`,P$=Object.prototype.hasOwnProperty;class g_e{constructor(t){this._keys=[],this._keyMap={};let r=0;t.forEach(s=>{let a=Gte(s);this._keys.push(a),this._keyMap[a.id]=a,r+=a.weight}),this._keys.forEach(s=>{s.weight/=r})}get(t){return this._keyMap[t]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function Gte(e){let t=null,r=null,s=null,a=1,i=null;if(Ol(e)||td(e))s=e,t=T$(e),r=jM(e);else{if(!P$.call(e,"name"))throw new Error(m_e("name"));const o=e.name;if(s=o,P$.call(e,"weight")&&(a=e.weight,a<=0))throw new Error(p_e(o));t=T$(o),r=jM(o),i=e.getFn}return{path:t,id:r,weight:a,src:s,getFn:i}}function T$(e){return td(e)?e:e.split(".")}function jM(e){return td(e)?e.join("."):e}function x_e(e,t){let r=[],s=!1;const a=(i,o,l)=>{if(Ti(i))if(!o[l])r.push(i);else{let c=o[l];const d=i[c];if(!Ti(d))return;if(l===o.length-1&&(Ol(d)||Hte(d)||c_e(d)))r.push(l_e(d));else if(td(d)){s=!0;for(let u=0,f=d.length;u<f;u+=1)a(d[u],o,l+1)}else o.length&&a(d,o,l+1)}};return a(e,Ol(t)?t.split("."):t,0),s?r:r[0]}const y_e={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},v_e={isCaseSensitive:!1,ignoreDiacritics:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1},b_e={location:0,threshold:.6,distance:100},w_e={useExtendedSearch:!1,getFn:x_e,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var Jt={...v_e,...y_e,...b_e,...w_e};const j_e=/[^ ]+/g;function N_e(e=1,t=3){const r=new Map,s=Math.pow(10,t);return{get(a){const i=a.match(j_e).length;if(r.has(i))return r.get(i);const o=1/Math.pow(i,.5*e),l=parseFloat(Math.round(o*s)/s);return r.set(i,l),l},clear(){r.clear()}}}class nE{constructor({getFn:t=Jt.getFn,fieldNormWeight:r=Jt.fieldNormWeight}={}){this.norm=N_e(r,3),this.getFn=t,this.isCreated=!1,this.setIndexRecords()}setSources(t=[]){this.docs=t}setIndexRecords(t=[]){this.records=t}setKeys(t=[]){this.keys=t,this._keysMap={},t.forEach((r,s)=>{this._keysMap[r.id]=s})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,Ol(this.docs[0])?this.docs.forEach((t,r)=>{this._addString(t,r)}):this.docs.forEach((t,r)=>{this._addObject(t,r)}),this.norm.clear())}add(t){const r=this.size();Ol(t)?this._addString(t,r):this._addObject(t,r)}removeAt(t){this.records.splice(t,1);for(let r=t,s=this.size();r<s;r+=1)this.records[r].i-=1}getValueForItemAtKeyId(t,r){return t[this._keysMap[r]]}size(){return this.records.length}_addString(t,r){if(!Ti(t)||NC(t))return;let s={v:t,i:r,n:this.norm.get(t)};this.records.push(s)}_addObject(t,r){let s={i:r,$:{}};this.keys.forEach((a,i)=>{let o=a.getFn?a.getFn(t):this.getFn(t,a.path);if(Ti(o)){if(td(o)){let l=[];const c=[{nestedArrIndex:-1,value:o}];for(;c.length;){const{nestedArrIndex:d,value:u}=c.pop();if(Ti(u))if(Ol(u)&&!NC(u)){let f={v:u,i:d,n:this.norm.get(u)};l.push(f)}else td(u)&&u.forEach((f,h)=>{c.push({nestedArrIndex:h,value:f})})}s.$[i]=l}else if(Ol(o)&&!NC(o)){let l={v:o,n:this.norm.get(o)};s.$[i]=l}}}),this.records.push(s)}toJSON(){return{keys:this.keys,records:this.records}}}function Yte(e,t,{getFn:r=Jt.getFn,fieldNormWeight:s=Jt.fieldNormWeight}={}){const a=new nE({getFn:r,fieldNormWeight:s});return a.setKeys(e.map(Gte)),a.setSources(t),a.create(),a}function S_e(e,{getFn:t=Jt.getFn,fieldNormWeight:r=Jt.fieldNormWeight}={}){const{keys:s,records:a}=e,i=new nE({getFn:t,fieldNormWeight:r});return i.setKeys(s),i.setIndexRecords(a),i}function Mb(e,{errors:t=0,currentLocation:r=0,expectedLocation:s=0,distance:a=Jt.distance,ignoreLocation:i=Jt.ignoreLocation}={}){const o=t/e.length;if(i)return o;const l=Math.abs(s-r);return a?o+l/a:l?1:o}function C_e(e=[],t=Jt.minMatchCharLength){let r=[],s=-1,a=-1,i=0;for(let o=e.length;i<o;i+=1){let l=e[i];l&&s===-1?s=i:!l&&s!==-1&&(a=i-1,a-s+1>=t&&r.push([s,a]),s=-1)}return e[i-1]&&i-s>=t&&r.push([s,i-1]),r}const df=32;function k_e(e,t,r,{location:s=Jt.location,distance:a=Jt.distance,threshold:i=Jt.threshold,findAllMatches:o=Jt.findAllMatches,minMatchCharLength:l=Jt.minMatchCharLength,includeMatches:c=Jt.includeMatches,ignoreLocation:d=Jt.ignoreLocation}={}){if(t.length>df)throw new Error(h_e(df));const u=t.length,f=e.length,h=Math.max(0,Math.min(s,f));let m=i,g=h;const x=l>1||c,y=x?Array(f):[];let v;for(;(v=e.indexOf(t,g))>-1;){let C=Mb(t,{currentLocation:v,expectedLocation:h,distance:a,ignoreLocation:d});if(m=Math.min(C,m),g=v+u,x){let k=0;for(;k<u;)y[v+k]=1,k+=1}}g=-1;let b=[],w=1,N=u+f;const j=1<<u-1;for(let C=0;C<u;C+=1){let k=0,M=N;for(;k<M;)Mb(t,{errors:C,currentLocation:h+M,expectedLocation:h,distance:a,ignoreLocation:d})<=m?k=M:N=M,M=Math.floor((N-k)/2+k);N=M;let A=Math.max(1,h-M+1),P=o?f:Math.min(h+M,f)+u,T=Array(P+2);T[P+1]=(1<<C)-1;for(let L=P;L>=A;L-=1){let R=L-1,G=r[e.charAt(R)];if(x&&(y[R]=+!!G),T[L]=(T[L+1]<<1|1)&G,C&&(T[L]|=(b[L+1]|b[L])<<1|1|b[L+1]),T[L]&j&&(w=Mb(t,{errors:C,currentLocation:R,expectedLocation:h,distance:a,ignoreLocation:d}),w<=m)){if(m=w,g=R,g<=h)break;A=Math.max(1,2*h-g)}}if(Mb(t,{errors:C+1,currentLocation:h,expectedLocation:h,distance:a,ignoreLocation:d})>m)break;b=T}const S={isMatch:g>=0,score:Math.max(.001,w)};if(x){const C=C_e(y,l);C.length?c&&(S.indices=C):S.isMatch=!1}return S}function M_e(e){let t={};for(let r=0,s=e.length;r<s;r+=1){const a=e.charAt(r);t[a]=(t[a]||0)|1<<s-r-1}return t}const Fj=String.prototype.normalize?e=>e.normalize("NFD").replace(/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/g,""):e=>e;class Qte{constructor(t,{location:r=Jt.location,threshold:s=Jt.threshold,distance:a=Jt.distance,includeMatches:i=Jt.includeMatches,findAllMatches:o=Jt.findAllMatches,minMatchCharLength:l=Jt.minMatchCharLength,isCaseSensitive:c=Jt.isCaseSensitive,ignoreDiacritics:d=Jt.ignoreDiacritics,ignoreLocation:u=Jt.ignoreLocation}={}){if(this.options={location:r,threshold:s,distance:a,includeMatches:i,findAllMatches:o,minMatchCharLength:l,isCaseSensitive:c,ignoreDiacritics:d,ignoreLocation:u},t=c?t:t.toLowerCase(),t=d?Fj(t):t,this.pattern=t,this.chunks=[],!this.pattern.length)return;const f=(m,g)=>{this.chunks.push({pattern:m,alphabet:M_e(m),startIndex:g})},h=this.pattern.length;if(h>df){let m=0;const g=h%df,x=h-g;for(;m<x;)f(this.pattern.substr(m,df),m),m+=df;if(g){const y=h-df;f(this.pattern.substr(y),y)}}else f(this.pattern,0)}searchIn(t){const{isCaseSensitive:r,ignoreDiacritics:s,includeMatches:a}=this.options;if(t=r?t:t.toLowerCase(),t=s?Fj(t):t,this.pattern===t){let x={isMatch:!0,score:0};return a&&(x.indices=[[0,t.length-1]]),x}const{location:i,distance:o,threshold:l,findAllMatches:c,minMatchCharLength:d,ignoreLocation:u}=this.options;let f=[],h=0,m=!1;this.chunks.forEach(({pattern:x,alphabet:y,startIndex:v})=>{const{isMatch:b,score:w,indices:N}=k_e(t,x,y,{location:i+v,distance:o,threshold:l,findAllMatches:c,minMatchCharLength:d,includeMatches:a,ignoreLocation:u});b&&(m=!0),h+=w,b&&N&&(f=[...f,...N])});let g={isMatch:m,score:m?h/this.chunks.length:1};return m&&a&&(g.indices=f),g}}class zu{constructor(t){this.pattern=t}static isMultiMatch(t){return A$(t,this.multiRegex)}static isSingleMatch(t){return A$(t,this.singleRegex)}search(){}}function A$(e,t){const r=e.match(t);return r?r[1]:null}class __e extends zu{constructor(t){super(t)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(t){const r=t===this.pattern;return{isMatch:r,score:r?0:1,indices:[0,this.pattern.length-1]}}}class P_e extends zu{constructor(t){super(t)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(t){const s=t.indexOf(this.pattern)===-1;return{isMatch:s,score:s?0:1,indices:[0,t.length-1]}}}class T_e extends zu{constructor(t){super(t)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(t){const r=t.startsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,this.pattern.length-1]}}}class A_e extends zu{constructor(t){super(t)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(t){const r=!t.startsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,t.length-1]}}}class E_e extends zu{constructor(t){super(t)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(t){const r=t.endsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[t.length-this.pattern.length,t.length-1]}}}class I_e extends zu{constructor(t){super(t)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(t){const r=!t.endsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,t.length-1]}}}class Kte extends zu{constructor(t,{location:r=Jt.location,threshold:s=Jt.threshold,distance:a=Jt.distance,includeMatches:i=Jt.includeMatches,findAllMatches:o=Jt.findAllMatches,minMatchCharLength:l=Jt.minMatchCharLength,isCaseSensitive:c=Jt.isCaseSensitive,ignoreDiacritics:d=Jt.ignoreDiacritics,ignoreLocation:u=Jt.ignoreLocation}={}){super(t),this._bitapSearch=new Qte(t,{location:r,threshold:s,distance:a,includeMatches:i,findAllMatches:o,minMatchCharLength:l,isCaseSensitive:c,ignoreDiacritics:d,ignoreLocation:u})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(t){return this._bitapSearch.searchIn(t)}}class Jte extends zu{constructor(t){super(t)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(t){let r=0,s;const a=[],i=this.pattern.length;for(;(s=t.indexOf(this.pattern,r))>-1;)r=s+i,a.push([s,r-1]);const o=!!a.length;return{isMatch:o,score:o?0:1,indices:a}}}const NM=[__e,Jte,T_e,A_e,I_e,E_e,P_e,Kte],E$=NM.length,L_e=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,D_e="|";function $_e(e,t={}){return e.split(D_e).map(r=>{let s=r.trim().split(L_e).filter(i=>i&&!!i.trim()),a=[];for(let i=0,o=s.length;i<o;i+=1){const l=s[i];let c=!1,d=-1;for(;!c&&++d<E$;){const u=NM[d];let f=u.isMultiMatch(l);f&&(a.push(new u(f,t)),c=!0)}if(!c)for(d=-1;++d<E$;){const u=NM[d];let f=u.isSingleMatch(l);if(f){a.push(new u(f,t));break}}}return a})}const O_e=new Set([Kte.type,Jte.type]);class R_e{constructor(t,{isCaseSensitive:r=Jt.isCaseSensitive,ignoreDiacritics:s=Jt.ignoreDiacritics,includeMatches:a=Jt.includeMatches,minMatchCharLength:i=Jt.minMatchCharLength,ignoreLocation:o=Jt.ignoreLocation,findAllMatches:l=Jt.findAllMatches,location:c=Jt.location,threshold:d=Jt.threshold,distance:u=Jt.distance}={}){this.query=null,this.options={isCaseSensitive:r,ignoreDiacritics:s,includeMatches:a,minMatchCharLength:i,findAllMatches:l,ignoreLocation:o,location:c,threshold:d,distance:u},t=r?t:t.toLowerCase(),t=s?Fj(t):t,this.pattern=t,this.query=$_e(this.pattern,this.options)}static condition(t,r){return r.useExtendedSearch}searchIn(t){const r=this.query;if(!r)return{isMatch:!1,score:1};const{includeMatches:s,isCaseSensitive:a,ignoreDiacritics:i}=this.options;t=a?t:t.toLowerCase(),t=i?Fj(t):t;let o=0,l=[],c=0;for(let d=0,u=r.length;d<u;d+=1){const f=r[d];l.length=0,o=0;for(let h=0,m=f.length;h<m;h+=1){const g=f[h],{isMatch:x,indices:y,score:v}=g.search(t);if(x){if(o+=1,c+=v,s){const b=g.constructor.type;O_e.has(b)?l=[...l,...y]:l.push(y)}}else{c=0,o=0,l.length=0;break}}if(o){let h={isMatch:!0,score:c/o};return s&&(h.indices=l),h}}return{isMatch:!1,score:1}}}const SM=[];function F_e(...e){SM.push(...e)}function CM(e,t){for(let r=0,s=SM.length;r<s;r+=1){let a=SM[r];if(a.condition(e,t))return new a(e,t)}return new Qte(e,t)}const zj={AND:"$and",OR:"$or"},kM={PATH:"$path",PATTERN:"$val"},MM=e=>!!(e[zj.AND]||e[zj.OR]),z_e=e=>!!e[kM.PATH],B_e=e=>!td(e)&&Wte(e)&&!MM(e),I$=e=>({[zj.AND]:Object.keys(e).map(t=>({[t]:e[t]}))});function Zte(e,t,{auto:r=!0}={}){const s=a=>{let i=Object.keys(a);const o=z_e(a);if(!o&&i.length>1&&!MM(a))return s(I$(a));if(B_e(a)){const c=o?a[kM.PATH]:i[0],d=o?a[kM.PATTERN]:a[c];if(!Ol(d))throw new Error(f_e(c));const u={keyId:jM(c),pattern:d};return r&&(u.searcher=CM(d,t)),u}let l={children:[],operator:i[0]};return i.forEach(c=>{const d=a[c];td(d)&&d.forEach(u=>{l.children.push(s(u))})}),l};return MM(e)||(e=I$(e)),s(e)}function U_e(e,{ignoreFieldNorm:t=Jt.ignoreFieldNorm}){e.forEach(r=>{let s=1;r.matches.forEach(({key:a,norm:i,score:o})=>{const l=a?a.weight:null;s*=Math.pow(o===0&&l?Number.EPSILON:o,(l||1)*(t?1:i))}),r.score=s})}function V_e(e,t){const r=e.matches;t.matches=[],Ti(r)&&r.forEach(s=>{if(!Ti(s.indices)||!s.indices.length)return;const{indices:a,value:i}=s;let o={indices:a,value:i};s.key&&(o.key=s.key.src),s.idx>-1&&(o.refIndex=s.idx),t.matches.push(o)})}function H_e(e,t){t.score=e.score}function W_e(e,t,{includeMatches:r=Jt.includeMatches,includeScore:s=Jt.includeScore}={}){const a=[];return r&&a.push(V_e),s&&a.push(H_e),e.map(i=>{const{idx:o}=i,l={item:t[o],refIndex:o};return a.length&&a.forEach(c=>{c(i,l)}),l})}class Q0{constructor(t,r={},s){this.options={...Jt,...r},this.options.useExtendedSearch,this._keyStore=new g_e(this.options.keys),this.setCollection(t,s)}setCollection(t,r){if(this._docs=t,r&&!(r instanceof nE))throw new Error(u_e);this._myIndex=r||Yte(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(t){Ti(t)&&(this._docs.push(t),this._myIndex.add(t))}remove(t=()=>!1){const r=[];for(let s=0,a=this._docs.length;s<a;s+=1){const i=this._docs[s];t(i,s)&&(this.removeAt(s),s-=1,a-=1,r.push(i))}return r}removeAt(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:r=-1}={}){const{includeMatches:s,includeScore:a,shouldSort:i,sortFn:o,ignoreFieldNorm:l}=this.options;let c=Ol(t)?Ol(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return U_e(c,{ignoreFieldNorm:l}),i&&c.sort(o),Hte(r)&&r>-1&&(c=c.slice(0,r)),W_e(c,this._docs,{includeMatches:s,includeScore:a})}_searchStringList(t){const r=CM(t,this.options),{records:s}=this._myIndex,a=[];return s.forEach(({v:i,i:o,n:l})=>{if(!Ti(i))return;const{isMatch:c,score:d,indices:u}=r.searchIn(i);c&&a.push({item:i,idx:o,matches:[{score:d,value:i,norm:l,indices:u}]})}),a}_searchLogical(t){const r=Zte(t,this.options),s=(l,c,d)=>{if(!l.children){const{keyId:f,searcher:h}=l,m=this._findMatches({key:this._keyStore.get(f),value:this._myIndex.getValueForItemAtKeyId(c,f),searcher:h});return m&&m.length?[{idx:d,item:c,matches:m}]:[]}const u=[];for(let f=0,h=l.children.length;f<h;f+=1){const m=l.children[f],g=s(m,c,d);if(g.length)u.push(...g);else if(l.operator===zj.AND)return[]}return u},a=this._myIndex.records,i={},o=[];return a.forEach(({$:l,i:c})=>{if(Ti(l)){let d=s(r,l,c);d.length&&(i[c]||(i[c]={idx:c,item:l,matches:[]},o.push(i[c])),d.forEach(({matches:u})=>{i[c].matches.push(...u)}))}}),o}_searchObjectList(t){const r=CM(t,this.options),{keys:s,records:a}=this._myIndex,i=[];return a.forEach(({$:o,i:l})=>{if(!Ti(o))return;let c=[];s.forEach((d,u)=>{c.push(...this._findMatches({key:d,value:o[u],searcher:r}))}),c.length&&i.push({idx:l,item:o,matches:c})}),i}_findMatches({key:t,value:r,searcher:s}){if(!Ti(r))return[];let a=[];if(td(r))r.forEach(({v:i,i:o,n:l})=>{if(!Ti(i))return;const{isMatch:c,score:d,indices:u}=s.searchIn(i);c&&a.push({score:d,key:t,value:i,idx:o,norm:l,indices:u})});else{const{v:i,n:o}=r,{isMatch:l,score:c,indices:d}=s.searchIn(i);l&&a.push({score:c,key:t,value:i,norm:o,indices:d})}return a}}Q0.version="7.1.0";Q0.createIndex=Yte;Q0.parseIndex=S_e;Q0.config=Jt;Q0.parseQuery=Zte;F_e(R_e);const q_e=[{id:"dashboard",name:"Dashboard",description:"Overview of appointments, metrics, and quick actions",path:"/dashboard",category:"page",keywords:["home","overview","main","stats","metrics"]},{id:"messages",name:"Messages",description:"View and manage customer messages and conversations",path:"/messages",category:"page",keywords:["chat","conversations","sms","text","messaging","inbox"]},{id:"phone",name:"Phone",description:"Make calls, view call history, and manage voicemails",path:"/phone",category:"page",keywords:["call","voice","dialer","voicemail","calling"]},{id:"schedule",name:"Schedule",description:"View and manage appointments calendar",path:"/schedule",category:"page",keywords:["calendar","appointments","booking","dates","timeline"]},{id:"monitor",name:"Monitor Dashboard",description:"Real-time monitoring of system status and alerts",path:"/monitor",category:"page",keywords:["monitoring","alerts","status","system","health"]},{id:"analytics",name:"Analytics",description:"View business analytics and performance metrics",path:"/analytics",category:"page",keywords:["reports","stats","metrics","performance","insights","data"]},{id:"customer-database",name:"Customer Database",description:"Manage customer information and contact details",path:"/customer-database",category:"page",keywords:["customers","contacts","clients","database","crm"]},{id:"gallery",name:"Gallery",description:"View and manage service photos",path:"/gallery",category:"page",keywords:["photos","images","pictures","portfolio","showcase"]},{id:"reviews",name:"Reviews",description:"View customer reviews and ratings",path:"/reviews",category:"page",keywords:["ratings","feedback","testimonials","google reviews"]},{id:"live-conversations",name:"Live Conversations",description:"Monitor and manage active customer conversations",path:"/live-conversations",category:"page",keywords:["chat","active","real-time","support","messaging"]},{id:"conversation-insights",name:"Conversation Insights",description:"View conversation analytics and AI insights",path:"/conversation-insights",category:"page",keywords:["ai","analytics","insights","conversation analytics","chat insights"]},{id:"sms-monitoring",name:"SMS Monitoring",description:"Monitor SMS delivery status and compliance",path:"/sms-monitoring",category:"page",keywords:["sms","text","monitoring","delivery","messages"]},{id:"call-metrics",name:"Call Metrics",description:"View phone call analytics and statistics",path:"/call-metrics",category:"page",keywords:["calls","phone","analytics","stats","metrics"]},{id:"damage-assessment",name:"Damage Assessment",description:"Document and assess vehicle damage",path:"/damage-assessment",category:"page",keywords:["damage","inspection","assessment","vehicle"]},{id:"user-management",name:"User Management",description:"Manage user accounts and permissions",path:"/user-management",category:"page",keywords:["users","accounts","permissions","roles","access"]},{id:"admin-employees",name:"Employee Management",description:"Manage employee accounts and schedules",path:"/admin/employees",category:"page",keywords:["employees","staff","team","workers","technicians"]},{id:"admin-quote-requests",name:"Quote Requests",description:"View and manage customer quote requests",path:"/admin/quote-requests",category:"page",keywords:["quotes","estimates","requests","pricing"]},{id:"banner-management",name:"Banner Management",description:"Create and manage promotional banners",path:"/banner-management",category:"page",keywords:["banners","promotions","announcements","marketing"]},{id:"technician",name:"Technician Portal",description:"Technician workspace for job management",path:"/technician",category:"page",keywords:["tech","technician","jobs","workspace","field"]},{id:"referrals-page",name:"Referrals",description:"Manage referral program and track referrals",path:"/referrals",category:"page",keywords:["referral","referrals","rewards","program"]},{id:"settings-services",name:"Services & Add-ons",description:"Configure services, pricing, and add-on options",path:"/settings/operations/services",category:"setting",section:"Operations",keywords:["services","pricing","add-ons","packages","offerings"]},{id:"settings-recurring",name:"Recurring Services",description:"Manage subscription and recurring service plans",path:"/settings/operations/recurring",category:"setting",section:"Operations",keywords:["recurring","subscriptions","memberships","plans","repeat"]},{id:"settings-phone",name:"Phone & Voice",description:"Configure phone system and voice settings",path:"/settings/operations/phone-settings",category:"setting",section:"Operations",keywords:["phone","voice","calling","twilio","voicemail"]},{id:"settings-customer-management",name:"Customer Database",description:"Manage customer information and settings",path:"/settings/customers/customer-management",category:"setting",section:"Customer Management",keywords:["customers","database","contacts","crm"]},{id:"settings-loyalty",name:"Loyalty Program",description:"Configure loyalty points and rewards",path:"/settings/customers/loyalty",category:"setting",section:"Customer Management",keywords:["loyalty","points","rewards","program","perks"]},{id:"settings-referrals",name:"Referral Program",description:"Configure referral rewards and tracking",path:"/settings/customers/referrals",category:"setting",section:"Customer Management",keywords:["referral","referrals","rewards","program","tracking"]},{id:"settings-gallery",name:"Gallery Photos",description:"Manage gallery photos and portfolio images",path:"/settings/customers/gallery",category:"setting",section:"Customer Management",keywords:["gallery","photos","images","portfolio"]},{id:"settings-notifications",name:"Notifications",description:"Configure notification preferences and settings",path:"/settings/communications/notifications",category:"setting",section:"Communications",keywords:["notifications","alerts","settings","preferences"]},{id:"settings-sms-templates",name:"SMS Templates",description:"Manage SMS message templates",path:"/settings/communications/sms-templates",category:"setting",section:"Communications",keywords:["sms","templates","messages","text"]},{id:"settings-email-templates",name:"Email Templates",description:"Manage email message templates",path:"/settings/communications/email-templates",category:"setting",section:"Communications",keywords:["email","templates","messages"]},{id:"settings-email-campaigns",name:"Email Campaigns",description:"Create and manage email marketing campaigns",path:"/settings/communications/email-campaigns",category:"setting",section:"Communications",keywords:["email","campaigns","marketing","newsletters"]},{id:"settings-upsell",name:"Upsell Offers",description:"Configure upsell and cross-sell offers",path:"/settings/communications/upsell",category:"setting",section:"Communications",keywords:["upsell","cross-sell","offers","promotions"]},{id:"settings-cancellation",name:"Cancellation Feedback",description:"Configure cancellation feedback collection",path:"/settings/communications/cancellation",category:"setting",section:"Communications",keywords:["cancellation","feedback","surveys"]},{id:"settings-business-settings",name:"Business Settings",description:"Configure business information and hours",path:"/settings/business/business-settings",category:"setting",section:"Business",keywords:["business","info","hours","location","company"]},{id:"settings-agent-settings",name:"Agent Settings",description:"Configure AI agent behavior and responses",path:"/settings/business/agent-settings",category:"setting",section:"Business",keywords:["ai","agent","chatbot","automation"]},{id:"settings-subscriptions",name:"Subscription Plans",description:"Manage subscription plans and billing",path:"/settings/business/subscriptions",category:"setting",section:"Business",keywords:["subscriptions","plans","billing","pricing"]},{id:"action-view-messages",name:"View Messages",description:"Open the messages inbox to view customer conversations",path:"/messages",category:"action",keywords:["open messages","check messages","inbox","conversations"]},{id:"action-make-call",name:"Make a Call",description:"Open the phone dialer to make a call",path:"/phone",category:"action",keywords:["call customer","phone call","dial","calling"]},{id:"action-check-schedule",name:"Check Schedule",description:"View today's appointments and schedule",path:"/schedule",category:"action",keywords:["view schedule","appointments today","calendar"]},{id:"action-manage-customers",name:"Manage Customers",description:"Access customer database and information",path:"/customer-database",category:"action",keywords:["find customer","customer info","lookup"]},{id:"action-view-analytics",name:"View Analytics",description:"Check business performance and metrics",path:"/analytics",category:"action",keywords:["check stats","reports","performance","metrics"]},{id:"action-configure-services",name:"Configure Services",description:"Update services and pricing",path:"/settings/operations/services",category:"action",keywords:["edit services","update pricing","change prices"]},{id:"action-setup-loyalty",name:"Setup Loyalty Program",description:"Configure loyalty points and rewards",path:"/settings/customers/loyalty",category:"action",keywords:["loyalty setup","rewards program","points"]},{id:"action-setup-referrals",name:"Setup Referral Program",description:"Configure referral rewards and settings",path:"/settings/customers/referrals",category:"action",keywords:["referral setup","referral program","configure referrals"]},{id:"action-manage-templates",name:"Manage SMS Templates",description:"Edit SMS message templates",path:"/settings/communications/sms-templates",category:"action",keywords:["edit templates","sms messages","message templates"]},{id:"action-business-info",name:"Update Business Info",description:"Edit business information and hours",path:"/settings/business/business-settings",category:"action",keywords:["business hours","company info","location"]}],_b="search_history",G_e=5,Y_e=new Q0(q_e,{keys:[{name:"name",weight:2},{name:"description",weight:1.5},{name:"keywords",weight:1},{name:"section",weight:.5}],threshold:.4,includeScore:!0,minMatchCharLength:2});function SC(){const[e,t]=p.useState(""),[r,s]=p.useState([]),[a,i]=p.useState([]),[o,l]=p.useState(!1),[c,d]=p.useState(!1),[u,f]=p.useState([]),[h,m]=p.useState(!1),[g,x]=p.useState(0),[,y]=zt();Ee();const v=p.useRef(null),b=p.useRef(),w=p.useRef([]);p.useEffect(()=>{const D=localStorage.getItem(_b);if(D)try{f(JSON.parse(D))}catch(W){console.error("Failed to parse search history:",W)}},[]);const N=D=>{if(!D.trim())return;const W=[D,...u.filter(E=>E!==D)].slice(0,G_e);f(W),localStorage.setItem(_b,JSON.stringify(W))},j=(D,W)=>{W.stopPropagation();const E=u.filter(F=>F!==D);f(E),localStorage.setItem(_b,JSON.stringify(E))},S=D=>{D.stopPropagation(),f([]),localStorage.removeItem(_b)};p.useEffect(()=>{function D(W){v.current&&!v.current.contains(W.target)&&(d(!1),m(!1),t(""),s([]),i([]),x(0))}return document.addEventListener("mousedown",D),()=>document.removeEventListener("mousedown",D)},[]),p.useEffect(()=>{var D;w.current[g]&&((D=w.current[g])==null||D.scrollIntoView({block:"nearest",behavior:"smooth"}))},[g]),p.useEffect(()=>{if(e.trim().length===0){s([]),i([]),d(!1),x(0);return}const W=Y_e.search(e).slice(0,10).map(E=>E.item);if(s(W),d(!0),m(!1),x(0),W.length<3&&e.trim().length>3)return b.current&&clearTimeout(b.current),b.current=setTimeout(async()=>{l(!0);try{const F=await(await Ne("POST","/api/search/help",{query:e})).json();i(F.results||[])}catch(E){console.error("AI search error:",E)}finally{l(!1)}},500),()=>{b.current&&clearTimeout(b.current)};i([]),l(!1)},[e]);const C=[...r],k=new Set(r.map(D=>D.path)),M=a.filter(D=>!k.has(D.path)).map(D=>({id:`ai-${D.path}`,name:D.name,description:D.description,path:D.path,category:"action",keywords:[]}));C.push(...M);const A=C.reduce((D,W,E)=>(D[W.category]||(D[W.category]=[]),D[W.category].push({...W,globalIndex:E}),D),{}),P=["page","setting","action"],T={page:"Pages",setting:"Settings",action:"Actions"},I={page:sge,setting:ja,action:na},L=D=>{N(e),y(D),t(""),s([]),i([]),d(!1),m(!1),x(0)},R=D=>{t(D),m(!1)},G=()=>{e.trim().length===0&&u.length>0&&(m(!0),d(!1))},$=D=>{if(!c||C.length===0){D.key==="Escape"&&(D.preventDefault(),d(!1),m(!1),t(""),s([]),i([]),x(0));return}switch(D.key){case"ArrowDown":D.preventDefault(),x(W=>Math.min(W+1,C.length-1));break;case"ArrowUp":D.preventDefault(),x(W=>Math.max(W-1,0));break;case"Enter":D.preventDefault(),C[g]&&L(C[g].path);break;case"Escape":D.preventDefault(),d(!1),m(!1),t(""),s([]),i([]),x(0);break}};return n.jsxs("div",{ref:v,className:"relative w-full max-w-md",children:[n.jsxs("div",{className:"relative",children:[n.jsx(Ga,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),n.jsx(se,{type:"text",placeholder:"Search pages, settings, actions...",value:e,onChange:D=>t(D.target.value),onFocus:G,onKeyDown:$,className:"pl-9 pr-10","data-testid":"input-ai-search"}),o&&n.jsx(nt,{className:"absolute right-3 top-1/2 -translate-y-1/2 h-4 w-4 animate-spin text-muted-foreground"})]}),h&&u.length>0&&n.jsx(O,{className:"absolute top-full mt-2 w-full z-50 shadow-lg max-h-96 overflow-auto bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700",children:n.jsxs("div",{className:"p-2",children:[n.jsxs("div",{className:"flex items-center justify-between px-3 py-2 text-xs font-semibold text-gray-500 dark:text-gray-400 border-b border-gray-200 dark:border-gray-700",children:[n.jsx("span",{children:"Recent searches"}),n.jsx("button",{onClick:S,className:"text-blue-600 dark:text-blue-400 hover:underline","data-testid":"button-clear-history",children:"Clear all"})]}),u.map((D,W)=>n.jsxs("button",{onClick:()=>R(D),className:"w-full text-left p-3 rounded-md hover:bg-blue-50 dark:hover:bg-gray-700 transition-colors flex items-center justify-between group","data-testid":`search-history-${W}`,children:[n.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[n.jsx(Rt,{className:"h-4 w-4 text-gray-400 dark:text-gray-500"}),n.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-200",children:D})]}),n.jsx("button",{onClick:E=>j(D,E),className:"opacity-0 group-hover:opacity-100 transition-opacity p-1 hover:bg-gray-200 dark:hover:bg-gray-600 rounded","data-testid":`button-remove-history-${W}`,children:n.jsx(Jr,{className:"h-3 w-3 text-gray-500 dark:text-gray-400"})})]},W))]})}),c&&C.length>0&&n.jsx(O,{className:"absolute top-full mt-2 w-full z-50 shadow-lg max-h-96 overflow-auto bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700",children:n.jsxs("div",{className:"p-2",children:[P.map(D=>{const W=A[D];if(!W||W.length===0)return null;const E=I[D];return n.jsxs("div",{className:"mb-2 last:mb-0",children:[n.jsxs("div",{className:"px-3 py-2 text-xs font-semibold uppercase text-muted-foreground flex items-center gap-2",children:[n.jsx(E,{className:"h-3 w-3"}),T[D]]}),W.map(F=>n.jsx("button",{ref:B=>{w.current[F.globalIndex]=B},onClick:()=>L(F.path),className:`w-full text-left p-3 rounded-md transition-all flex items-start gap-3 group border-b border-gray-100 dark:border-gray-700 last:border-0 ${g===F.globalIndex?"bg-blue-100 dark:bg-blue-900/30 ring-2 ring-blue-500 dark:ring-blue-400":"hover:bg-blue-50 dark:hover:bg-gray-700"}`,"data-testid":`search-result-${F.globalIndex}`,children:n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"font-semibold text-base flex items-center gap-2 text-gray-900 dark:text-white",children:[F.name,F.section&&n.jsxs("span",{className:"text-xs font-normal text-muted-foreground",children:[" ",F.section]}),n.jsx(Gc,{className:`h-4 w-4 flex-shrink-0 transition-opacity ${g===F.globalIndex?"opacity-100":"opacity-0 group-hover:opacity-100"} text-blue-600 dark:text-blue-400`})]}),n.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1.5 leading-relaxed whitespace-normal break-words line-clamp-2",children:F.description})]})},F.id))]},D)}),o&&n.jsxs("div",{className:"px-3 py-2 text-xs text-muted-foreground flex items-center gap-2",children:[n.jsx(nt,{className:"h-3 w-3 animate-spin"}),"Searching for more results..."]})]})}),c&&!o&&e.trim().length>0&&C.length===0&&n.jsx(O,{className:"absolute top-full mt-2 w-full z-50 shadow-lg bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700",children:n.jsxs("div",{className:"p-4 text-center",children:[n.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:['No results found for "',e,'"']}),n.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:"Try different keywords or check spelling"})]})}),e.trim().length===0&&!h&&c&&n.jsx(O,{className:"absolute top-full mt-2 w-full z-50 shadow-lg bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700",children:n.jsx("div",{className:"p-4 text-sm text-muted-foreground",children:"Start typing to search pages, settings, and actions..."})})]})}function Q_e(){var i;const{toast:e}=Ee(),[,t]=zt(),{data:r}=be({queryKey:["/api/auth/context"],refetchOnWindowFocus:!0,refetchInterval:3e4}),s=je({mutationFn:async()=>await Ne("/api/admin/impersonate/stop",{method:"POST",headers:{"Content-Type":"application/json"}}),onSuccess:()=>{ze.invalidateQueries({queryKey:["/api/auth/context"]}),e({title:"Impersonation Ended",description:"You are now viewing the app as yourself"}),t("/admin/tenants")},onError:o=>{e({title:"Error",description:o.message||"Failed to exit impersonation",variant:"destructive"})}}),a=()=>{s.mutate()};return(i=r==null?void 0:r.impersonation)!=null&&i.isActive?n.jsx("div",{className:"fixed top-0 left-0 right-0 z-50 bg-gradient-to-r from-amber-500 to-orange-500 dark:from-amber-600 dark:to-orange-600 text-white shadow-lg border-b-4 border-amber-700 dark:border-amber-800","data-testid":"impersonation-banner",children:n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[n.jsxs("div",{className:"flex items-center justify-between py-3",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("div",{className:"flex items-center gap-2 bg-white/20 backdrop-blur-sm px-3 py-1.5 rounded-lg",children:[n.jsx(Wt,{className:"w-5 h-5"}),n.jsx("span",{className:"font-semibold text-sm uppercase tracking-wide",children:"Impersonation Active"})]}),n.jsxs("div",{className:"hidden sm:flex items-center gap-2",children:[n.jsx(mj,{className:"w-4 h-4"}),n.jsxs("span",{className:"text-sm font-medium",children:["Viewing as: ",n.jsx("strong",{children:r.impersonation.tenantName})]}),n.jsxs("span",{className:"text-xs opacity-80",children:["(",r.impersonation.tenantId,")"]})]})]}),n.jsxs(_,{onClick:a,disabled:s.isPending,variant:"secondary",size:"sm",className:"bg-white hover:bg-gray-100 text-orange-600 font-semibold shadow-md","data-testid":"button-exit-impersonation",children:[n.jsx(lQ,{className:"w-4 h-4 mr-2"}),"Exit Impersonation"]})]}),n.jsx("div",{className:"sm:hidden pb-2",children:n.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[n.jsx(mj,{className:"w-4 h-4"}),n.jsxs("span",{className:"font-medium",children:["Viewing as: ",n.jsx("strong",{children:r.impersonation.tenantName})]})]})})]})}):null}const L$=[{id:"separator-dashboard",label:"",icon:D6,path:"",separator:!0,sectionHeader:"Dashboard"},{id:"dashboard",label:"Dashboard",icon:D6,path:"/dashboard"},{id:"separator-communications",label:"",icon:on,path:"",separator:!0,sectionHeader:"Communications"},{id:"messages",label:"Messages",icon:on,path:"/messages"},{id:"escalations",label:"Escalations",icon:Wt,path:"/escalations"},{id:"phone",label:"Phone",icon:bt,path:"/phone"},{id:"separator-customers",label:"",icon:br,path:"",separator:!0,sectionHeader:"Customer Management"},{id:"customers",label:"Customer Database",icon:br,path:"/customer-database"},{id:"service-history",label:"Service History",icon:Kc,path:"/service-history"},{id:"rewards",label:"Rewards",icon:jr,path:"/rewards"},{id:"separator-scheduling",label:"",icon:Dt,path:"",separator:!0,sectionHeader:"Scheduling & Operations"},{id:"schedule",label:"Scheduling",icon:Dt,path:"/admin/scheduling"},{id:"technician",label:"Technician Hub",icon:nh,path:"/technician"},{id:"damage-assessment",label:"Damage Assessment",icon:mu,path:"/damage-assessment"},{id:"separator-marketing",label:"",icon:au,path:"",separator:!0,sectionHeader:"Marketing & Content"},{id:"website-design",label:"Website Design",icon:au,path:"/admin/homepage-editor"},{id:"gallery-management",label:"Gallery Management",icon:$i,path:"/admin/gallery-management"},{id:"gallery-public",label:"Gallery Showcase",icon:oQ,path:"/gallery",badge:"Public"},{id:"banner-management",label:"Banner Management",icon:J0e,path:"/admin/banner-management"},{id:"referrals",label:"Referral Management",icon:jr,path:"/referrals"},{id:"separator-analytics",label:"",icon:ya,path:"",separator:!0,sectionHeader:"Reports & Analytics"},{id:"analytics",label:"Analytics",icon:ya,path:"/analytics"},{id:"call-metrics",label:"Call Metrics",icon:F0e,path:"/call-metrics"},{id:"separator-finance",label:"",icon:Ar,path:"",separator:!0,sectionHeader:"Finance"},{id:"billing",label:"Billing",icon:Ar,path:"/billing"},{id:"usage-dashboard",label:"Usage Dashboard",icon:Zv,path:"/admin/usage-dashboard"},{id:"separator-multi-tenant",label:"",icon:Of,path:"",separator:!0,sectionHeader:"Multi-Tenant Management"},{id:"concierge-setup",label:"Concierge Setup",icon:ln,path:"/admin/concierge-setup",badge:"Owner"},{id:"tenants",label:"Tenant Management",icon:Of,path:"/admin/tenants",badge:"Owner"},{id:"phone-config",label:"Phone & IVR Config",icon:bt,path:"/admin/phone-config",badge:"Owner"},{id:"theme-gallery",label:"Theme Gallery",icon:au,path:"/admin/theme-gallery"},{id:"separator-workforce",label:"",icon:Np,path:"",separator:!0,sectionHeader:"Workforce Management"},{id:"employees",label:"Employees",icon:Np,path:"/admin/employees"},{id:"quote-requests",label:"Quote Requests",icon:q0e,path:"/admin/quote-requests"},{id:"applications",label:"Job Applications",icon:Nc,path:"/admin/applications"},{id:"pto-management",label:"PTO Management",icon:lD,path:"/admin/pto"},{id:"separator-tech-portal",label:"",icon:nh,path:"",separator:!0,sectionHeader:"Technician Portal"},{id:"tech-schedule",label:"My Schedule",icon:hu,path:"/tech/schedule"},{id:"tech-pto",label:"Request PTO",icon:lD,path:"/tech/pto"},{id:"tech-open-shifts",label:"Open Shifts",icon:Dt,path:"/tech/open-shifts"},{id:"tech-shift-trades",label:"Shift Trades",icon:br,path:"/tech/shift-trades"},{id:"separator-admin",label:"",icon:ja,path:"",separator:!0,sectionHeader:"Settings & Administration"},{id:"settings",label:"Settings",icon:ja,path:"/settings"},{id:"business-settings",label:"Business Settings",icon:Of,path:"/business-settings"},{id:"user-management",label:"User Management",icon:yge,path:"/user-management"},{id:"security",label:"Security",icon:zn,path:"/security-settings"},{id:"notifications-settings",label:"Notifications",icon:Yc,path:"/notifications-settings"},{id:"phone-settings",label:"Phone Settings",icon:bt,path:"/phone-settings"},{id:"facebook-settings",label:"Facebook Settings",icon:Z0e,path:"/facebook-settings"},{id:"quick-replies",label:"Quick Replies",icon:wa,path:"/quick-replies"},{id:"reminders",label:"Reminders",icon:Rt,path:"/reminders"}];function xn({children:e,title:t,showSearch:r=!0,pageActions:s,sidebarActions:a}){const[i,o]=p.useState(!1),[l,c]=zt(),{isDark:d,toggleTheme:u}=EQ(),{data:f}=be({queryKey:["/api/auth/context"],refetchOnWindowFocus:!0,refetchInterval:3e4}),h=x=>{c(x),o(!1)},m=x=>x==="/dashboard"?l==="/"||l==="/dashboard":l.startsWith(x),g=(x=!1)=>{var w;const y=["concierge-setup","tenants","phone-config"],b=((w=f==null?void 0:f.impersonation)==null?void 0:w.isActive)||!1?L$.filter(N=>!y.includes(N.id)):L$;return n.jsx("nav",{className:"space-y-1","data-tour-id":"sidebar-nav",children:b.map(N=>{if(N.separator)return n.jsxs("div",{className:"my-3",children:[N.sectionHeader&&n.jsx("p",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider px-3 mb-2",children:N.sectionHeader}),n.jsx(Ot,{className:"my-1"})]},N.id);const j=m(N.path),S=N.icon;return n.jsxs(_,{variant:j?"default":"ghost",className:`w-full justify-start ${j?"bg-blue-600 text-white hover:bg-blue-700":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800"}`,onClick:()=>h(N.path),"data-testid":`nav-${N.id}`,"data-tour-id":`nav-${N.id}`,children:[n.jsx(S,{className:"h-4 w-4 mr-2"}),n.jsx("span",{className:"truncate",children:N.label}),N.badge&&n.jsx(ge,{variant:"secondary",className:"ml-auto text-xs",children:N.badge})]},N.id)})})};return n.jsxs("div",{className:"flex h-screen overflow-hidden bg-gray-50 dark:bg-gray-950",children:[n.jsxs("aside",{className:"hidden lg:flex lg:w-64 bg-white dark:bg-gray-900 border-r border-gray-200 dark:border-gray-800 flex-col shadow-sm",children:[n.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-800",children:[n.jsx("h2",{className:"font-semibold text-lg text-gray-900 dark:text-white",children:"Clean Machine"}),n.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Business Dashboard"})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto py-4 px-2",children:[n.jsx("div",{className:"px-2 mb-4",children:n.jsx(SC,{})}),a&&n.jsxs("div",{className:"mb-4 px-2",children:[a,n.jsx(Ot,{className:"mt-4"})]}),g()]}),n.jsxs("div",{className:"p-4 border-t border-gray-200 dark:border-gray-800 text-xs text-gray-500 dark:text-gray-400",children:[n.jsx("p",{children:" 2025 Clean Machine"}),n.jsx("p",{className:"text-gray-400 dark:text-gray-500",children:"v1.0.0"})]})]}),n.jsx(tE,{open:i,onOpenChange:o,children:n.jsxs(E4,{side:"left",className:"w-64 p-0 bg-white dark:bg-gray-900 flex flex-col",children:[n.jsx(Ute,{className:"p-4 border-b border-gray-200 dark:border-gray-800",children:n.jsx(Vte,{className:"text-gray-900 dark:text-white",children:"Clean Machine"})}),n.jsxs("div",{className:"flex-1 overflow-y-auto py-4 px-2",children:[n.jsx("div",{className:"px-2 mb-4",children:n.jsx(SC,{})}),a&&n.jsxs("div",{className:"mb-4 px-2",children:[a,n.jsx(Ot,{className:"mt-4"})]}),g(!0)]}),n.jsxs("div",{className:"p-4 border-t border-gray-200 dark:border-gray-800 text-xs text-gray-500 dark:text-gray-400",children:[n.jsx("p",{children:" 2025 Clean Machine"}),n.jsx("p",{className:"text-gray-400 dark:text-gray-500",children:"v1.0.0"})]})]})}),n.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[n.jsx(Q_e,{}),n.jsx("header",{className:"flex-shrink-0 border-b border-gray-200 dark:border-gray-800 bg-white dark:bg-gray-900 shadow-sm",children:n.jsxs("div",{className:"flex items-center gap-1 sm:gap-3 p-2 sm:p-4 min-h-14",children:[n.jsx(_,{variant:"ghost",size:"icon",className:"lg:hidden flex-shrink-0 h-10 w-10",onClick:()=>o(!0),"data-testid":"button-hamburger-menu",children:n.jsx(Kv,{className:"h-5 w-5"})}),t&&n.jsx("h1",{className:"text-base sm:text-xl font-semibold text-gray-900 dark:text-white truncate flex-shrink",children:t}),r&&n.jsx("div",{className:"flex-1 max-w-md hidden sm:block","data-tour-id":"ai-help-search",children:n.jsx(SC,{})}),n.jsx("div",{className:"flex-1"}),s&&n.jsx("div",{className:"flex items-center gap-1 sm:gap-2 flex-shrink-0",children:s}),n.jsx(_,{variant:"ghost",size:"icon",onClick:u,className:"text-gray-700 dark:text-gray-300 flex-shrink-0 h-10 w-10","data-testid":"button-theme-toggle",children:d?n.jsx(hge,{className:"h-5 w-5"}):n.jsx(X0e,{className:"h-5 w-5"})})]})}),n.jsx("main",{className:"flex-1 overflow-auto bg-gray-50 dark:bg-gray-950",children:e})]})]})}const hs=p.forwardRef(({className:e,...t},r)=>n.jsx("div",{className:"relative w-full overflow-auto",children:n.jsx("table",{ref:r,className:Le("w-full caption-bottom text-sm",e),...t})}));hs.displayName="Table";const ms=p.forwardRef(({className:e,...t},r)=>n.jsx("thead",{ref:r,className:Le("[&_tr]:border-b",e),...t}));ms.displayName="TableHeader";const ps=p.forwardRef(({className:e,...t},r)=>n.jsx("tbody",{ref:r,className:Le("[&_tr:last-child]:border-0",e),...t}));ps.displayName="TableBody";const K_e=p.forwardRef(({className:e,...t},r)=>n.jsx("tfoot",{ref:r,className:Le("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}));K_e.displayName="TableFooter";const vn=p.forwardRef(({className:e,...t},r)=>n.jsx("tr",{ref:r,className:Le("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));vn.displayName="TableRow";const Ve=p.forwardRef(({className:e,...t},r)=>n.jsx("th",{ref:r,className:Le("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));Ve.displayName="TableHead";const Ue=p.forwardRef(({className:e,...t},r)=>n.jsx("td",{ref:r,className:Le("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));Ue.displayName="TableCell";const Xte=p.forwardRef(({className:e,...t},r)=>n.jsx("caption",{ref:r,className:Le("mt-4 text-sm text-muted-foreground",e),...t}));Xte.displayName="TableCaption";function J_e(){const[e,t]=zt(),[r,s]=p.useState(""),[a,i]=p.useState(null),[o,l]=p.useState(!1),[c,d]=p.useState(null),{toast:u}=Ee();p.useEffect(()=>{const y=new URLSearchParams(window.location.search).get("phone");y&&(s(y),f(y))},[]);const f=async x=>{if(x){l(!0),d(null);try{const y=await fetch(`/api/customer-info?phone=${encodeURIComponent(x)}`);if(!y.ok)throw new Error("Failed to fetch customer information");const v=await y.json();if(v.success)i(v.customerInfo);else throw new Error(v.error||"No customer found with this phone number")}catch(y){console.error("Error fetching customer info:",y),d(y.message||"An error occurred"),u({title:"Error",description:y.message||"Failed to load customer information",variant:"destructive"})}finally{l(!1)}}},h=x=>{x.preventDefault(),f(r)},m=()=>{a!=null&&a.address?t(`/directions?address=${encodeURIComponent(a.address)}&phone=${encodeURIComponent(a.phone)}`):u({title:"Missing Address",description:"No address available for this customer",variant:"destructive"})},g=x=>{try{return Ie(new Date(x),"MM/dd/yyyy hh:mm a")}catch{return x}};return n.jsx(xn,{title:"Service History",children:n.jsx("div",{className:"p-6",children:n.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[n.jsxs(O,{className:"mb-8",children:[n.jsx(ee,{className:"bg-gradient-to-r from-blue-600 to-blue-500 text-white",children:n.jsx(te,{className:"text-xl",children:"Find Customer"})}),n.jsx(H,{className:"p-6",children:n.jsx("form",{onSubmit:h,className:"space-y-4",children:n.jsxs("div",{className:"flex items-end gap-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx(U,{htmlFor:"phone",children:"Phone Number"}),n.jsx(se,{id:"phone",value:r,onChange:x=>s(x.target.value),placeholder:"Enter customer phone number",className:"w-full"})]}),n.jsx(_,{type:"submit",disabled:o,className:"bg-blue-600 hover:bg-blue-700",children:o?"Loading...":"Search"})]})})})]}),c&&n.jsx("div",{className:"text-center mt-4 p-4 bg-red-50 text-red-600 rounded-md",children:c}),a&&n.jsxs(O,{children:[n.jsx(ee,{className:"bg-gradient-to-r from-blue-600 to-blue-500 text-white",children:n.jsx(te,{className:"text-xl",children:"Customer Information"})}),n.jsxs(H,{className:"p-6 space-y-6",children:[n.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-medium text-gray-500",children:"Name"}),n.jsx("p",{className:"text-lg",children:a.name||"Not provided"})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-medium text-gray-500",children:"Phone"}),n.jsx("p",{className:"text-lg",children:a.phone})]}),a.email&&n.jsxs("div",{children:[n.jsx("h3",{className:"font-medium text-gray-500",children:"Email"}),n.jsx("p",{className:"text-lg",children:a.email})]}),a.address&&n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("h3",{className:"font-medium text-gray-500",children:"Address"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("p",{className:"text-lg cursor-pointer text-blue-600 hover:text-blue-800 underline",onClick:()=>window.open(`https://maps.google.com/?q=${encodeURIComponent(a.address)}`,"_blank"),children:a.address}),n.jsx(_,{variant:"outline",size:"sm",onClick:m,className:"ml-2",children:"Navigate"})]})]}),a.vehicleInfo&&n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("h3",{className:"font-medium text-gray-500",children:"Vehicle"}),n.jsx("p",{className:"text-lg",children:a.vehicleInfo})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("h3",{className:"font-medium text-gray-500",children:"Last Interaction"}),n.jsx("p",{children:g(a.lastInteraction)})]}),n.jsxs("div",{className:"md:col-span-2 flex gap-3 pt-4",children:[n.jsx(_,{onClick:()=>window.open(`/business-chat?phone=${encodeURIComponent(a.phone)}`,"_blank"),className:"bg-blue-600 hover:bg-blue-700",children:" Message Customer"}),n.jsx(_,{variant:"outline",onClick:()=>window.open(`/schedule?phone=${encodeURIComponent(a.phone)}`,"_blank"),children:" Schedule Service"})]})]}),n.jsx(Ot,{}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Service History"}),a.serviceHistory&&a.serviceHistory.length>0?n.jsxs(hs,{children:[n.jsx(ms,{children:n.jsxs(vn,{children:[n.jsx(Ve,{children:"Date"}),n.jsx(Ve,{children:"Service"}),n.jsx(Ve,{children:"Notes"})]})}),n.jsx(ps,{children:a.serviceHistory.map((x,y)=>n.jsxs(vn,{children:[n.jsx(Ue,{children:g(x.date)}),n.jsx(Ue,{children:x.service}),n.jsx(Ue,{children:x.notes||"-"})]},y))})]}):n.jsx("p",{className:"text-gray-500 text-center py-4",children:"No service history available"})]})]})]})]})})})}const un=p.forwardRef(({className:e,...t},r)=>n.jsx("textarea",{className:Le("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base text-foreground ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...t}));un.displayName="Textarea";function Lt({className:e,...t}){return n.jsx("div",{className:Le("animate-pulse rounded-md bg-muted",e),...t})}function Z_e({customerPhone:e,customerName:t="",onClose:r}){const[s,a]=p.useState([]),[i,o]=p.useState(""),[l,c]=p.useState(!1),[d,u]=p.useState(!0),f=p.useRef(null),{toast:h}=Ee();p.useEffect(()=>{m()},[e]),p.useEffect(()=>{var v;(v=f.current)==null||v.scrollIntoView({behavior:"smooth"})},[s]);const m=async()=>{try{const v=await fetch(`/api/chat/history?phone=${encodeURIComponent(e)}`);if(v.ok){const b=await v.json();b.success&&b.messages&&a(b.messages.map(w=>({...w,timestamp:new Date(w.timestamp)})))}}catch(v){console.error("Error loading conversation history:",v)}finally{u(!1)}},g=async()=>{if(!i.trim())return;const v=Date.now().toString(),b={id:v,text:i.trim(),sender:"business",timestamp:new Date,status:"sending"};a(w=>[...w,b]),o(""),c(!0);try{const N=await(await fetch("/api/chat/send-business-message",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({customerPhone:e,message:b.text,messageId:v})})).json();if(N.success)a(j=>j.map(S=>S.id===v?{...S,status:"sent"}:S)),h({title:"Message Sent",description:`Your message was sent to ${t||e}`});else throw new Error(N.error||"Failed to send message")}catch(w){console.error("Error sending message:",w),a(N=>N.map(j=>j.id===v?{...j,status:"failed"}:j)),h({title:"Failed to Send",description:"Message could not be sent. Please try again.",variant:"destructive"})}finally{c(!1)}},x=v=>{v.key==="Enter"&&!v.shiftKey&&(v.preventDefault(),g())},y=v=>v.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return n.jsxs(O,{className:"h-full flex flex-col max-w-2xl mx-auto",children:[n.jsx(ee,{className:"bg-gradient-to-r from-blue-600 to-blue-500 text-white p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(on,{className:"h-6 w-6"}),n.jsxs("div",{children:[n.jsxs(te,{className:"text-lg font-bold",children:["Chat with ",t||"Customer"]}),n.jsx("p",{className:"text-blue-100 text-sm",children:e})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(_,{variant:"ghost",size:"icon",className:"text-white hover:bg-blue-700",onClick:()=>window.open(`tel:${e}`,"_self"),children:n.jsx(bt,{className:"h-4 w-4"})}),r&&n.jsx(_,{variant:"ghost",size:"icon",className:"text-white hover:bg-blue-700",onClick:r,children:n.jsx(Jr,{className:"h-4 w-4"})})]})]})}),n.jsxs(H,{className:"flex-1 flex flex-col p-0",children:[n.jsx(ia,{className:"flex-1 p-4",children:d?n.jsx("div",{className:"flex items-center justify-center h-32",children:n.jsx("div",{className:"text-gray-500",children:"Loading conversation..."})}):s.length===0?n.jsx("div",{className:"flex items-center justify-center h-32",children:n.jsxs("div",{className:"text-center text-gray-500",children:[n.jsx(on,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),n.jsxs("p",{children:["Start a conversation with ",t||"your customer"]})]})}):n.jsxs("div",{className:"space-y-4",children:[n.jsx($s,{children:s.map(v=>n.jsx(q.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:`flex ${v.sender==="business"?"justify-end":"justify-start"}`,children:n.jsxs("div",{className:`max-w-[80%] rounded-lg p-3 ${v.sender==="business"?"bg-blue-600 text-white":"bg-gray-100 text-gray-900"}`,children:[n.jsx("p",{className:"text-sm",children:v.text}),n.jsxs("div",{className:`flex items-center justify-between mt-1 text-xs ${v.sender==="business"?"text-blue-100":"text-gray-500"}`,children:[n.jsx("span",{children:y(v.timestamp)}),v.sender==="business"&&v.status&&n.jsx("span",{className:`ml-2 ${v.status==="sent"?"text-green-200":v.status==="failed"?"text-red-200":"text-blue-200"}`,children:v.status==="sent"?"":v.status==="failed"?"":""})]})]})},v.id))}),n.jsx("div",{ref:f})]})}),n.jsx(Ot,{}),n.jsxs("div",{className:"p-4 bg-gray-50",children:[n.jsxs("div",{className:"flex gap-2",children:[n.jsx(un,{value:i,onChange:v=>o(v.target.value),onKeyPress:x,placeholder:"Type your message...",className:"resize-none min-h-[60px] max-h-[120px]",disabled:l}),n.jsx(_,{onClick:g,disabled:!i.trim()||l,className:"bg-blue-600 hover:bg-blue-700 self-end",children:n.jsx(Vi,{className:"h-4 w-4"})})]}),n.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Press Enter to send, Shift+Enter for new line"})]})]})]})}function X_e({appointments:e,appointmentCounts:t}){return n.jsx(O,{className:"backdrop-blur-xl bg-white/10 dark:bg-white/5 border border-white/20 text-white shadow-xl",children:n.jsx(H,{className:"py-4",children:n.jsxs(q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-3 sm:gap-4",children:[n.jsxs(q.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.5,delay:.1},className:"text-center px-1",children:[n.jsx("div",{className:"text-2xl sm:text-3xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-cyan-300",children:Object.values(t).reduce((r,s)=>r+s,0)}),n.jsx("div",{className:"text-xs text-blue-100 line-clamp-2",children:"Total This Month"})]}),n.jsxs(q.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.5,delay:.15},className:"text-center px-1",children:[n.jsx("div",{className:"text-2xl sm:text-3xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-purple-400 to-pink-300",children:Object.keys(t).length}),n.jsx("div",{className:"text-xs text-blue-100 line-clamp-2",children:"Busy Days"})]}),n.jsxs(q.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.5,delay:.2},className:"text-center px-1",children:[n.jsx("div",{className:"text-2xl sm:text-3xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-cyan-400 to-blue-300",children:Math.max(...Object.values(t),0)}),n.jsx("div",{className:"text-xs text-blue-100 line-clamp-2",children:"Peak Daily"})]}),n.jsxs(q.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.5,delay:.25},className:"text-center px-1",children:[n.jsx("div",{className:"text-2xl sm:text-3xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-green-400 to-emerald-300",children:e.length}),n.jsx("div",{className:"text-xs text-blue-100 line-clamp-2",children:"Today"})]}),n.jsxs(q.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.5,delay:.3},className:"text-center px-1",children:[n.jsxs("div",{className:"text-2xl sm:text-3xl font-bold truncate bg-clip-text text-transparent bg-gradient-to-r from-yellow-400 to-orange-300",children:["$",e.reduce((r,s)=>{const a=s.price&&parseInt(s.price.replace(/\D/g,""))||150;return r+a},0).toLocaleString()]}),n.jsx("div",{className:"text-xs text-blue-100 line-clamp-2",children:"Today's Revenue"})]}),n.jsxs(q.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.5,delay:.35},className:"text-center px-1",children:[n.jsx("div",{className:"text-2xl sm:text-3xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-pink-400 to-rose-300",children:e.filter(r=>r.status!=="completed"&&r.status!=="cancelled").length}),n.jsx("div",{className:"text-xs text-blue-100 line-clamp-2",children:"Uncompleted"})]})]})})})}var[I4]=ws("Tooltip",[R0]),L4=R0(),ene="TooltipProvider",e5e=700,_M="tooltip.open",[t5e,rE]=I4(ene),tne=e=>{const{__scopeTooltip:t,delayDuration:r=e5e,skipDelayDuration:s=300,disableHoverableContent:a=!1,children:i}=e,o=p.useRef(!0),l=p.useRef(!1),c=p.useRef(0);return p.useEffect(()=>{const d=c.current;return()=>window.clearTimeout(d)},[]),n.jsx(t5e,{scope:t,isOpenDelayedRef:o,delayDuration:r,onOpen:p.useCallback(()=>{window.clearTimeout(c.current),o.current=!1},[]),onClose:p.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.current=!0,s)},[s]),isPointerInTransitRef:l,onPointerInTransitChange:p.useCallback(d=>{l.current=d},[]),disableHoverableContent:a,children:i})};tne.displayName=ene;var D4="Tooltip",[n5e,$4]=I4(D4),nne=e=>{const{__scopeTooltip:t,children:r,open:s,defaultOpen:a=!1,onOpenChange:i,disableHoverableContent:o,delayDuration:l}=e,c=rE(D4,e.__scopeTooltip),d=L4(t),[u,f]=p.useState(null),h=Gs(),m=p.useRef(0),g=o??c.disableHoverableContent,x=l??c.delayDuration,y=p.useRef(!1),[v=!1,b]=qa({prop:s,defaultProp:a,onChange:C=>{C?(c.onOpen(),document.dispatchEvent(new CustomEvent(_M))):c.onClose(),i==null||i(C)}}),w=p.useMemo(()=>v?y.current?"delayed-open":"instant-open":"closed",[v]),N=p.useCallback(()=>{window.clearTimeout(m.current),m.current=0,y.current=!1,b(!0)},[b]),j=p.useCallback(()=>{window.clearTimeout(m.current),m.current=0,b(!1)},[b]),S=p.useCallback(()=>{window.clearTimeout(m.current),m.current=window.setTimeout(()=>{y.current=!0,b(!0),m.current=0},x)},[x,b]);return p.useEffect(()=>()=>{m.current&&(window.clearTimeout(m.current),m.current=0)},[]),n.jsx(iA,{...d,children:n.jsx(n5e,{scope:t,contentId:h,open:v,stateAttribute:w,trigger:u,onTriggerChange:f,onTriggerEnter:p.useCallback(()=>{c.isOpenDelayedRef.current?S():N()},[c.isOpenDelayedRef,S,N]),onTriggerLeave:p.useCallback(()=>{g?j():(window.clearTimeout(m.current),m.current=0)},[j,g]),onOpen:N,onClose:j,disableHoverableContent:g,children:r})})};nne.displayName=D4;var PM="TooltipTrigger",rne=p.forwardRef((e,t)=>{const{__scopeTooltip:r,...s}=e,a=$4(PM,r),i=rE(PM,r),o=L4(r),l=p.useRef(null),c=rn(t,l,a.onTriggerChange),d=p.useRef(!1),u=p.useRef(!1),f=p.useCallback(()=>d.current=!1,[]);return p.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),n.jsx(i4,{asChild:!0,...o,children:n.jsx(ht.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...s,ref:c,onPointerMove:ut(e.onPointerMove,h=>{h.pointerType!=="touch"&&!u.current&&!i.isPointerInTransitRef.current&&(a.onTriggerEnter(),u.current=!0)}),onPointerLeave:ut(e.onPointerLeave,()=>{a.onTriggerLeave(),u.current=!1}),onPointerDown:ut(e.onPointerDown,()=>{a.open&&a.onClose(),d.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:ut(e.onFocus,()=>{d.current||a.onOpen()}),onBlur:ut(e.onBlur,a.onClose),onClick:ut(e.onClick,a.onClose)})})});rne.displayName=PM;var r5e="TooltipPortal",[mxt,s5e]=I4(r5e,{forceMount:void 0}),zp="TooltipContent",sne=p.forwardRef((e,t)=>{const r=s5e(zp,e.__scopeTooltip),{forceMount:s=r.forceMount,side:a="top",...i}=e,o=$4(zp,e.__scopeTooltip);return n.jsx(Sa,{present:s||o.open,children:o.disableHoverableContent?n.jsx(ane,{side:a,...i,ref:t}):n.jsx(a5e,{side:a,...i,ref:t})})}),a5e=p.forwardRef((e,t)=>{const r=$4(zp,e.__scopeTooltip),s=rE(zp,e.__scopeTooltip),a=p.useRef(null),i=rn(t,a),[o,l]=p.useState(null),{trigger:c,onClose:d}=r,u=a.current,{onPointerInTransitChange:f}=s,h=p.useCallback(()=>{l(null),f(!1)},[f]),m=p.useCallback((g,x)=>{const y=g.currentTarget,v={x:g.clientX,y:g.clientY},b=d5e(v,y.getBoundingClientRect()),w=u5e(v,b),N=f5e(x.getBoundingClientRect()),j=m5e([...w,...N]);l(j),f(!0)},[f]);return p.useEffect(()=>()=>h(),[h]),p.useEffect(()=>{if(c&&u){const g=y=>m(y,u),x=y=>m(y,c);return c.addEventListener("pointerleave",g),u.addEventListener("pointerleave",x),()=>{c.removeEventListener("pointerleave",g),u.removeEventListener("pointerleave",x)}}},[c,u,m,h]),p.useEffect(()=>{if(o){const g=x=>{const y=x.target,v={x:x.clientX,y:x.clientY},b=(c==null?void 0:c.contains(y))||(u==null?void 0:u.contains(y)),w=!h5e(v,o);b?h():w&&(h(),d())};return document.addEventListener("pointermove",g),()=>document.removeEventListener("pointermove",g)}},[c,u,o,d,h]),n.jsx(ane,{...e,ref:i})}),[i5e,o5e]=I4(D4,{isInside:!1}),l5e=PY("TooltipContent"),ane=p.forwardRef((e,t)=>{const{__scopeTooltip:r,children:s,"aria-label":a,onEscapeKeyDown:i,onPointerDownOutside:o,...l}=e,c=$4(zp,r),d=L4(r),{onClose:u}=c;return p.useEffect(()=>(document.addEventListener(_M,u),()=>document.removeEventListener(_M,u)),[u]),p.useEffect(()=>{if(c.trigger){const f=h=>{const m=h.target;m!=null&&m.contains(c.trigger)&&u()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[c.trigger,u]),n.jsx(_0,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:f=>f.preventDefault(),onDismiss:u,children:n.jsxs(oA,{"data-state":c.stateAttribute,...d,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[n.jsx(l5e,{children:s}),n.jsx(i5e,{scope:r,isInside:!0,children:n.jsx(h0e,{id:c.contentId,role:"tooltip",children:a||s})})]})})});sne.displayName=zp;var ine="TooltipArrow",c5e=p.forwardRef((e,t)=>{const{__scopeTooltip:r,...s}=e,a=L4(r);return o5e(ine,r).isInside?null:n.jsx(lA,{...a,...s,ref:t})});c5e.displayName=ine;function d5e(e,t){const r=Math.abs(t.top-e.y),s=Math.abs(t.bottom-e.y),a=Math.abs(t.right-e.x),i=Math.abs(t.left-e.x);switch(Math.min(r,s,a,i)){case i:return"left";case a:return"right";case r:return"top";case s:return"bottom";default:throw new Error("unreachable")}}function u5e(e,t,r=5){const s=[];switch(t){case"top":s.push({x:e.x-r,y:e.y+r},{x:e.x+r,y:e.y+r});break;case"bottom":s.push({x:e.x-r,y:e.y-r},{x:e.x+r,y:e.y-r});break;case"left":s.push({x:e.x+r,y:e.y-r},{x:e.x+r,y:e.y+r});break;case"right":s.push({x:e.x-r,y:e.y-r},{x:e.x-r,y:e.y+r});break}return s}function f5e(e){const{top:t,right:r,bottom:s,left:a}=e;return[{x:a,y:t},{x:r,y:t},{x:r,y:s},{x:a,y:s}]}function h5e(e,t){const{x:r,y:s}=e;let a=!1;for(let i=0,o=t.length-1;i<t.length;o=i++){const l=t[i].x,c=t[i].y,d=t[o].x,u=t[o].y;c>s!=u>s&&r<(d-l)*(s-c)/(u-c)+l&&(a=!a)}return a}function m5e(e){const t=e.slice();return t.sort((r,s)=>r.x<s.x?-1:r.x>s.x?1:r.y<s.y?-1:r.y>s.y?1:0),p5e(t)}function p5e(e){if(e.length<=1)return e.slice();const t=[];for(let s=0;s<e.length;s++){const a=e[s];for(;t.length>=2;){const i=t[t.length-1],o=t[t.length-2];if((i.x-o.x)*(a.y-o.y)>=(i.y-o.y)*(a.x-o.x))t.pop();else break}t.push(a)}t.pop();const r=[];for(let s=e.length-1;s>=0;s--){const a=e[s];for(;r.length>=2;){const i=r[r.length-1],o=r[r.length-2];if((i.x-o.x)*(a.y-o.y)>=(i.y-o.y)*(a.x-o.x))r.pop();else break}r.push(a)}return r.pop(),t.length===1&&r.length===1&&t[0].x===r[0].x&&t[0].y===r[0].y?t:t.concat(r)}var g5e=tne,x5e=nne,y5e=rne,one=sne;const Bj=g5e,Uj=x5e,Vj=y5e,Ty=p.forwardRef(({className:e,sideOffset:t=4,...r},s)=>n.jsx(one,{ref:s,sideOffset:t,className:Le("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",e),...r}));Ty.displayName=one.displayName;function v5e({todayDate:e,currentMonth:t,appointmentCounts:r,weatherData:s,onDateChange:a,onMonthChange:i}){const{toast:o}=Ee(),l=cs(),[c,d]=p.useState(!1),[u,f]=p.useState({customerName:"",phone:"",service:"",scheduledTime:"",address:""}),{data:h}=be({queryKey:["/api/services"]}),m=(h==null?void 0:h.services)||[],g=je({mutationFn:async y=>await Ne("POST","/api/appointments/create-manual",y),onSuccess:()=>{o({title:"Appointment created",description:"The appointment has been created successfully."}),d(!1),f({customerName:"",phone:"",service:"",scheduledTime:"",address:""}),l.invalidateQueries({queryKey:["/api/dashboard/today"]}),l.invalidateQueries({queryKey:["/api/dashboard/appointment-counts"]})},onError:y=>{o({title:"Error creating appointment",description:y.message||"Failed to create appointment",variant:"destructive"})}}),x=()=>{if(!u.customerName||!u.customerName.trim()){o({title:"Customer name required",description:"Please enter a customer name",variant:"destructive"});return}if(!u.phone||!u.phone.trim()){o({title:"Phone number required",description:"Please enter a phone number",variant:"destructive"});return}if(!u.service||u.service==="0"||u.service===""){o({title:"Service required",description:"Please select a service",variant:"destructive"});return}if(!u.scheduledTime||u.scheduledTime.trim()===""){o({title:"Date & time required",description:"Please select a date and time",variant:"destructive"});return}if(!u.address||!u.address.trim()){o({title:"Address required",description:"Please enter a service address",variant:"destructive"});return}g.mutate(u)};return n.jsxs(n.Fragment,{children:[n.jsx(q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},children:n.jsxs(O,{className:"rounded-xl backdrop-blur-xl bg-white/10 dark:bg-white/5 border border-white/20 shadow-xl overflow-hidden","data-testid":"calendar-card",children:[n.jsx(ee,{className:"bg-gradient-to-r from-blue-600/80 to-purple-600/80 backdrop-blur-md text-white pb-6 border-b border-white/20",children:n.jsxs(te,{className:"flex items-center justify-between text-2xl",children:[n.jsx("div",{className:"flex items-center gap-3",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(_,{size:"sm",variant:"ghost",className:"h-9 w-9 p-0 bg-white/10 hover:bg-white/20 text-white transition-all",onClick:()=>{const y=new Date(t);y.setMonth(y.getMonth()-1),i(y)},"data-testid":"button-prev-month","aria-label":"Previous month",children:n.jsx(Lu,{className:"h-5 w-5"})}),n.jsxs("div",{className:"px-2",children:[n.jsx("div",{className:"text-2xl font-bold",children:Ie(t,"MMMM yyyy")}),n.jsxs("div",{className:"text-sm text-blue-100 font-normal",children:[r&&Object.values(r).reduce((y,v)=>y+v,0)," appointments this month"]})]}),n.jsx(_,{size:"sm",variant:"ghost",className:"h-9 w-9 p-0 bg-white/10 hover:bg-white/20 text-white transition-all",onClick:()=>{const y=new Date(t);y.setMonth(y.getMonth()+1),i(y)},"data-testid":"button-next-month","aria-label":"Next month",children:n.jsx(vl,{className:"h-5 w-5"})})]})}),n.jsxs("div",{className:"flex gap-1 sm:gap-2",children:[n.jsxs(_,{size:"sm",variant:"secondary",className:"bg-green-500/80 hover:bg-green-600/80 text-white border-green-400/20 backdrop-blur-sm transition-all h-9 px-3 font-medium",onClick:()=>d(!0),"data-testid":"button-create-appointment",children:[n.jsx(Un,{className:"h-4 w-4 mr-1"}),"New"]}),n.jsx(Bj,{children:n.jsxs(Uj,{delayDuration:200,children:[n.jsx(Vj,{asChild:!0,children:n.jsx("button",{className:"hidden sm:flex p-2 rounded-lg bg-white/20 hover:bg-white/30 backdrop-blur-sm transition-all","data-testid":"button-calendar-legend",children:n.jsx(rQ,{className:"h-4 w-4 text-white"})})}),n.jsx(Ty,{side:"left",className:"max-w-sm p-4 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 shadow-xl",children:n.jsxs("div",{className:"space-y-3",children:[n.jsx("div",{className:"font-semibold text-sm border-b pb-2 dark:border-gray-600",children:" Calendar Legend"}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("div",{className:"text-xs font-medium text-gray-700 dark:text-gray-300",children:"Appointment Indicators:"}),n.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[n.jsx("div",{className:"w-6 h-6 rounded-full bg-red-500 text-white flex items-center justify-center font-bold text-[10px]",children:"3"}),n.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Number of appointments"})]}),n.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[n.jsxs("div",{className:"flex gap-0.5",children:[n.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-blue-500"}),n.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-blue-500"}),n.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-blue-500"})]}),n.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Quick visual count (max 3 dots)"})]})]}),n.jsx("div",{className:"text-[10px] text-gray-500 dark:text-gray-500 border-t pt-2 dark:border-gray-600",children:" Tip: Hover over any date to see details before clicking!"})]})})]})}),n.jsxs(_,{size:"sm",variant:"secondary",className:"bg-white/20 hover:bg-white/30 text-white border-white/20 backdrop-blur-sm transition-all h-9 px-2 sm:px-3",onClick:()=>a(new Date),"data-testid":"button-today",children:[n.jsx(Rt,{className:"h-4 w-4 sm:mr-2"}),n.jsx("span",{className:"hidden sm:inline",children:"Today"})]}),n.jsx(_,{size:"sm",variant:"secondary",className:"bg-white/20 hover:bg-white/30 text-white border-white/20 backdrop-blur-sm transition-all h-9 w-9 p-0",onClick:async()=>{o({title:"Checking Weather",description:"Analyzing weather conditions for upcoming appointments..."})},"data-testid":"button-weather",children:n.jsx(ex,{className:"h-4 w-4"})})]})]})}),n.jsxs(H,{className:"p-8 backdrop-blur-sm",children:[n.jsx("style",{children:`
                .modern-calendar .rdp {
                  --rdp-cell-size: 70px;
                  --rdp-accent-color: #3b82f6;
                }
                .modern-calendar .rdp-months { width: 100%; }
                .modern-calendar .rdp-month { width: 100%; }
                .modern-calendar .rdp-table { width: 100%; max-width: 100%; }
                .modern-calendar .rdp-head_cell {
                  color: #6b7280;
                  font-weight: 600;
                  font-size: 0.875rem;
                  padding: 8px 0;
                  text-transform: uppercase;
                  letter-spacing: 0.05em;
                }
                .modern-calendar .rdp-cell { padding: 2px; }
                .modern-calendar .rdp-day {
                  width: 70px;
                  height: 70px;
                  font-size: 16px;
                  font-weight: 500;
                  border-radius: 12px;
                  position: relative;
                  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
                  cursor: pointer;
                }
                .modern-calendar .rdp-day:hover:not(.rdp-day_selected):not(.rdp-day_disabled) {
                  background: linear-gradient(135deg, #dbeafe 0%, #e0e7ff 100%);
                  transform: translateY(-2px);
                  box-shadow: 0 4px 12px rgba(59, 130, 246, 0.2);
                }
                .modern-calendar .rdp-day_selected {
                  background: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%) !important;
                  color: white !important;
                  box-shadow: 0 8px 20px rgba(59, 130, 246, 0.4);
                  transform: scale(1.05);
                }
                .modern-calendar .rdp-day_today:not(.rdp-day_selected) {
                  background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%);
                  color: #1e40af;
                  font-weight: 700;
                  border: 2px solid #3b82f6;
                }
                .modern-calendar .rdp-day_disabled { opacity: 0.3; cursor: not-allowed; }
                .modern-calendar .rdp-button { width: 100%; height: 100%; }
                .modern-calendar .rdp-nav_button {
                  width: 40px;
                  height: 40px;
                  border-radius: 10px;
                  background: linear-gradient(135deg, #f3f4f6 0%, #e5e7eb 100%);
                  transition: all 0.2s;
                }
                .modern-calendar .rdp-nav_button:hover {
                  background: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%);
                  color: white;
                  transform: scale(1.1);
                }
                .modern-calendar .rdp-caption { display: none; }
                .modern-calendar .rdp-nav { display: none; }
                .appointment-badge {
                  position: absolute;
                  top: 6px;
                  right: 6px;
                  min-width: 22px;
                  height: 22px;
                  padding: 0 6px;
                  background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
                  color: white;
                  font-size: 11px;
                  font-weight: 700;
                  border-radius: 11px;
                  display: flex;
                  align-items: center;
                  justify-content: center;
                  box-shadow: 0 2px 8px rgba(239, 68, 68, 0.4);
                  animation: pulse-badge 2s infinite;
                }
                @keyframes pulse-badge {
                  0%, 100% { transform: scale(1); }
                  50% { transform: scale(1.1); }
                }
                .appointment-dots {
                  position: absolute;
                  bottom: 6px;
                  left: 50%;
                  transform: translateX(-50%);
                  display: flex;
                  gap: 3px;
                  align-items: center;
                }
                .appointment-dot {
                  width: 8px;
                  height: 8px;
                  border-radius: 50%;
                  animation: dot-bounce 1.4s infinite ease-in-out;
                }
                .appointment-dot:nth-child(1) {
                  background: linear-gradient(135deg, #60a5fa 0%, #3b82f6 100%);
                  animation-delay: -0.32s;
                }
                .appointment-dot:nth-child(2) {
                  background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
                  animation-delay: -0.16s;
                }
                .appointment-dot:nth-child(3) {
                  background: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%);
                }
                @keyframes dot-bounce {
                  0%, 80%, 100% { transform: scale(0.8); opacity: 0.7; }
                  40% { transform: scale(1.2); opacity: 1; }
                }
                .day-content {
                  position: relative;
                  width: 100%;
                  height: 100%;
                  display: flex;
                  align-items: center;
                  justify-content: center;
                }
              `}),n.jsx("div",{className:"modern-calendar",children:n.jsx(oh,{mode:"single",selected:e,month:t,onMonthChange:i,onSelect:y=>{y&&a(y)},className:"w-full",classNames:{months:"w-full",month:"w-full",table:"w-full border-collapse",head_row:"flex w-full",head_cell:"flex-1 text-center",row:"flex w-full mt-1",cell:"flex-1 text-center p-0",day:"w-full h-full",nav_button_previous:"absolute left-2 z-10",nav_button_next:"absolute right-2 z-10",caption:"flex justify-center pt-1 relative items-center text-xl font-bold text-gray-800 dark:text-gray-100 mb-4 min-h-[40px]"},components:{DayContent:({date:y})=>{const v=y.toISOString().split("T")[0],b=r[v]||0,w=s[v],N=n.jsxs("div",{className:"day-content",children:[n.jsx("span",{className:"relative z-10",children:y.getDate()}),b>0&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"appointment-badge","data-testid":`badge-appointment-${v}`,children:b}),n.jsxs("div",{className:"appointment-dots",children:[Array.from({length:Math.min(b,3)}).map((j,S)=>n.jsx("div",{className:"appointment-dot"},S)),b>3&&n.jsxs("span",{className:"text-xs font-bold text-blue-600 dark:text-blue-400 ml-1",children:["+",b-3]})]})]}),w&&w.icon&&n.jsx("div",{className:"absolute top-1 left-1 text-lg",style:{zIndex:5},children:w.icon})]});return b>0||w?n.jsx(Bj,{children:n.jsxs(Uj,{delayDuration:200,children:[n.jsx(Vj,{asChild:!0,children:N}),n.jsx(Ty,{side:"top",className:"max-w-xs p-3 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 shadow-xl",children:n.jsxs("div",{className:"space-y-2",children:[n.jsx("div",{className:"font-semibold text-sm border-b pb-1 dark:border-gray-600",children:Ie(y,"EEE, MMM d")}),b>0&&n.jsxs("div",{className:"text-xs",children:[n.jsxs("div",{className:"font-medium text-blue-600 dark:text-blue-400 mb-1",children:[" ",b," Appointment",b>1?"s":""]}),n.jsx("div",{className:"text-gray-600 dark:text-gray-400",children:"Click to view details"})]}),w&&n.jsxs("div",{className:"text-xs border-t pt-2 dark:border-gray-600",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-2xl",children:w.icon}),n.jsxs("div",{className:"text-right",children:[n.jsxs("div",{className:"font-medium",children:[w.high,"F / ",w.low,"F"]}),n.jsx("div",{className:"text-gray-500 dark:text-gray-400",children:w.description})]})]}),w.rainChance>20&&n.jsxs("div",{className:"mt-1 text-blue-600 dark:text-blue-400",children:[" ",w.rainChance,"% chance of rain"]})]})]})})]})}):N}}})})]})]})}),n.jsx(At,{open:c,onOpenChange:d,children:n.jsxs(_t,{className:"sm:max-w-[500px]",children:[n.jsxs($t,{children:[n.jsxs(Et,{className:"flex items-center gap-2",children:[n.jsx(Un,{className:"h-5 w-5 text-green-600"}),"Create New Appointment"]}),n.jsx(an,{children:"Manually create a new appointment for a customer."})]}),n.jsxs("div",{className:"space-y-4 py-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(U,{htmlFor:"customer-name",children:"Customer Name *"}),n.jsx(se,{id:"customer-name",placeholder:"John Doe",value:u.customerName,onChange:y=>f({...u,customerName:y.target.value}),"data-testid":"input-customer-name"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(U,{htmlFor:"customer-phone",children:"Phone Number *"}),n.jsx(se,{id:"customer-phone",placeholder:"+1 (555) 123-4567",value:u.phone,onChange:y=>f({...u,phone:y.target.value}),"data-testid":"input-customer-phone"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(U,{htmlFor:"service",children:"Service *"}),n.jsxs(Pt,{value:u.service,onValueChange:y=>f({...u,service:y}),children:[n.jsx(kt,{id:"service","data-testid":"select-service",children:n.jsx(Tt,{placeholder:"Select a service"})}),n.jsx(Mt,{children:m.map(y=>n.jsxs(ve,{value:y.id.toString(),children:[y.name," (",y.priceRange,")"]},y.id))})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(U,{htmlFor:"scheduled-time",children:"Date & Time *"}),n.jsx(se,{id:"scheduled-time",type:"datetime-local",value:u.scheduledTime,onChange:y=>f({...u,scheduledTime:y.target.value}),"data-testid":"input-scheduled-time"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(U,{htmlFor:"address",children:"Address *"}),n.jsx(se,{id:"address",placeholder:"123 Main St, City, State 12345",value:u.address,onChange:y=>f({...u,address:y.target.value}),"data-testid":"input-address"})]})]}),n.jsxs(Sn,{children:[n.jsx(_,{variant:"outline",onClick:()=>d(!1),"data-testid":"button-cancel-create",children:"Cancel"}),n.jsx(_,{onClick:x,disabled:g.isPending,className:"bg-green-600 hover:bg-green-700","data-testid":"button-confirm-create",children:g.isPending?"Creating...":"Create Appointment"})]})]})})]})}function b5e({appointments:e,todayDate:t,onCall:r,onChat:s,onNavigate:a,onViewHistory:i,onSendInvoice:o}){const l=c=>{try{return Ie(new Date(c),"MMM d, yyyy h:mm a")}catch{return c}};return n.jsx(q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.3},children:n.jsxs(O,{className:"backdrop-blur-xl bg-white/10 dark:bg-white/5 border border-white/20 text-gray-800 dark:text-gray-100 shadow-xl",children:[n.jsx(ee,{children:n.jsxs(te,{className:"flex items-center",children:[n.jsx(Ql,{className:"mr-2 h-5 w-5 text-cyan-400"}),n.jsxs("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-cyan-300",children:[Ie(t,"MMM d, yyyy")===Ie(new Date,"MMM d, yyyy")?"Today's Schedule":`Schedule for ${Ie(t,"MMM d, yyyy")}`," (",e.length,")"]})]})}),n.jsx(H,{children:e.length>0?n.jsx("div",{className:"space-y-4",children:e.map((c,d)=>{const u=["from-purple-500 to-pink-500","from-blue-500 to-cyan-500","from-green-500 to-emerald-500","from-orange-500 to-yellow-500","from-pink-500 to-rose-500"],f=u[d%u.length];return n.jsx(q.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.4,delay:d*.1},children:n.jsxs(O,{className:"backdrop-blur-xl bg-white/5 border border-white/20 hover:bg-white/10 transition-all duration-300 relative overflow-hidden group",children:[n.jsx("div",{className:`absolute top-0 left-0 w-1 h-full bg-gradient-to-b ${f}`}),n.jsx(ee,{className:"pb-2",children:n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{children:[n.jsx(te,{className:"text-lg bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-cyan-300",children:c.customerName}),n.jsx(ke,{className:"text-gray-300",children:c.service})]}),n.jsx(ge,{variant:"outline",className:"font-mono backdrop-blur-md bg-white/10 border-white/20 text-cyan-300",children:l(c.time).split(",")[1]})]})}),n.jsxs(H,{className:"pb-2 space-y-2",children:[n.jsxs("div",{className:"flex items-center text-sm text-gray-300",children:[n.jsx(Ys,{className:"mr-2 h-4 w-4 text-cyan-400"}),c.vehicleInfo||"Vehicle info not available"]}),n.jsxs("div",{className:"flex items-center text-sm text-gray-300",children:[n.jsx(O6,{className:"mr-2 h-4 w-4 text-blue-400"}),c.address]}),n.jsxs("div",{className:"flex items-center text-sm text-gray-300",children:[n.jsx(bt,{className:"mr-2 h-4 w-4 text-purple-400"}),c.phone]})]}),n.jsxs(sl,{className:"flex justify-between pt-2 flex-wrap gap-2",children:[n.jsx(_,{variant:"outline",size:"sm",className:"backdrop-blur-md bg-white/5 border-white/20 hover:bg-white/10 text-white",onClick:()=>i(c.phone),children:"History"}),n.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.jsxs(_,{variant:"outline",size:"sm",className:"backdrop-blur-md bg-white/5 border-white/20 hover:bg-white/10 text-white",onClick:()=>r(c.phone),children:[n.jsx(bt,{className:"h-4 w-4 mr-2"}),"Call"]}),n.jsxs(_,{variant:"outline",size:"sm",className:"backdrop-blur-md bg-white/5 border-white/20 hover:bg-white/10 text-white",onClick:()=>s(c.phone,c.customerName),children:[n.jsx(on,{className:"h-4 w-4 mr-2"}),"Chat"]}),n.jsxs(_,{variant:"default",size:"sm",className:"backdrop-blur-md bg-gradient-to-r from-blue-500/80 to-cyan-500/80 hover:from-blue-600/80 hover:to-cyan-600/80 border-white/20 text-white",onClick:()=>a(c.address,c.phone),children:[n.jsx(O6,{className:"h-4 w-4 mr-2"}),"Navigate"]}),n.jsxs(_,{variant:"outline",size:"sm",className:"backdrop-blur-md bg-green-500/20 border-green-400/30 text-green-300 hover:bg-green-500/30",onClick:()=>o(c),children:[n.jsx(bs,{className:"h-4 w-4 mr-2"}),"Invoice"]})]})]})]})},c.id)})}):n.jsxs("div",{className:"text-center py-8 text-gray-300",children:[n.jsx(ln,{className:"h-12 w-12 mx-auto mb-3 text-cyan-400/50"}),n.jsx("p",{className:"text-lg",children:"No appointments scheduled for this date"}),n.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Select a different date to view appointments"})]})})]})})}function w5e({appointments:e,todayDate:t}){return n.jsx(q.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.6,delay:.4},children:n.jsxs(O,{className:"backdrop-blur-xl bg-white/10 dark:bg-white/5 border border-white/20 shadow-xl",children:[n.jsx(ee,{children:n.jsxs(te,{className:"flex items-center",children:[n.jsx(Qr,{className:"mr-2 h-5 w-5 text-yellow-400"}),n.jsxs("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-purple-400 to-pink-300",children:[Ie(t,"MMM d")," Insights"]})]})}),n.jsx(H,{className:"space-y-3",children:e.length>0?n.jsxs(n.Fragment,{children:[n.jsxs(q.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.4,delay:.5},className:"flex items-center justify-between p-3 backdrop-blur-md bg-white/5 border border-white/20 rounded-lg",children:[n.jsx("span",{className:"text-sm text-gray-300",children:"Appointments:"}),n.jsx(ge,{className:"backdrop-blur-md bg-gradient-to-r from-purple-500 to-pink-500 border-0",children:e.length})]}),n.jsxs(q.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.4,delay:.6},className:"flex items-center justify-between p-3 backdrop-blur-md bg-white/5 border border-white/20 rounded-lg",children:[n.jsx("span",{className:"text-sm text-gray-300",children:"Popular Service:"}),n.jsx(ge,{variant:"outline",className:"border-purple-400/50 text-purple-300 backdrop-blur-md bg-white/5",children:(()=>{const r=e.reduce((a,i)=>(a[i.service]=(a[i.service]||0)+1,a),{}),s=Object.entries(r).sort((a,i)=>i[1]-a[1])[0];return s?s[0]:"N/A"})()})]}),n.jsxs(q.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.4,delay:.7},className:"flex items-center justify-between p-3 backdrop-blur-md bg-white/5 border border-white/20 rounded-lg",children:[n.jsx("span",{className:"text-sm text-gray-300",children:"Revenue:"}),n.jsxs("span",{className:"text-lg font-bold bg-clip-text text-transparent bg-gradient-to-r from-green-400 to-emerald-300",children:["$",e.reduce((s,a)=>{const i=a.price&&parseInt(a.price.replace(/\D/g,""))||150;return s+i},0).toLocaleString()]})]})]}):n.jsxs("div",{className:"text-center py-4 text-gray-300",children:[n.jsx(ln,{className:"h-8 w-8 mx-auto mb-2 text-purple-400/50"}),n.jsx("p",{children:"No appointments for this date"}),n.jsx("p",{className:"text-sm mt-1 text-gray-400",children:"Select a different date to view insights"})]})})]})})}function j5e(){const[,e]=zt();return n.jsx(q.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.6,delay:.5},children:n.jsxs(O,{className:"backdrop-blur-xl bg-white/10 dark:bg-white/5 border border-white/20 shadow-xl",children:[n.jsx(ee,{children:n.jsxs(te,{className:"flex items-center",children:[n.jsx(ln,{className:"mr-2 h-5 w-5 text-cyan-400"}),n.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-cyan-300",children:"Quick Actions"})]})}),n.jsxs(H,{className:"space-y-2",children:[n.jsxs(_,{className:"w-full justify-start backdrop-blur-md bg-gradient-to-r from-blue-500/80 to-cyan-500/80 hover:from-blue-600/80 hover:to-cyan-600/80 border-white/20 text-white transition-all duration-300",onClick:()=>e("/service-history"),children:[n.jsx(Fn,{className:"mr-2 h-4 w-4"}),"Customer Service History"]}),n.jsxs(_,{className:"w-full justify-start backdrop-blur-md bg-gradient-to-r from-purple-500/80 to-pink-500/80 hover:from-purple-600/80 hover:to-pink-600/80 border-white/20 text-white transition-all duration-300",onClick:()=>e("/user-management"),children:[n.jsx(br,{className:"mr-2 h-4 w-4"}),"User Management"]})]})]})})}var sE="Collapsible",[N5e,lne]=ws(sE),[S5e,aE]=N5e(sE),cne=p.forwardRef((e,t)=>{const{__scopeCollapsible:r,open:s,defaultOpen:a,disabled:i,onOpenChange:o,...l}=e,[c=!1,d]=qa({prop:s,defaultProp:a,onChange:o});return n.jsx(S5e,{scope:r,disabled:i,contentId:Gs(),open:c,onOpenToggle:p.useCallback(()=>d(u=>!u),[d]),children:n.jsx(ht.div,{"data-state":cE(c),"data-disabled":i?"":void 0,...l,ref:t})})});cne.displayName=sE;var dne="CollapsibleTrigger",iE=p.forwardRef((e,t)=>{const{__scopeCollapsible:r,...s}=e,a=aE(dne,r);return n.jsx(ht.button,{type:"button","aria-controls":a.contentId,"aria-expanded":a.open||!1,"data-state":cE(a.open),"data-disabled":a.disabled?"":void 0,disabled:a.disabled,...s,ref:t,onClick:ut(e.onClick,a.onOpenToggle)})});iE.displayName=dne;var oE="CollapsibleContent",lE=p.forwardRef((e,t)=>{const{forceMount:r,...s}=e,a=aE(oE,e.__scopeCollapsible);return n.jsx(Sa,{present:r||a.open,children:({present:i})=>n.jsx(C5e,{...s,ref:t,present:i})})});lE.displayName=oE;var C5e=p.forwardRef((e,t)=>{const{__scopeCollapsible:r,present:s,children:a,...i}=e,o=aE(oE,r),[l,c]=p.useState(s),d=p.useRef(null),u=rn(t,d),f=p.useRef(0),h=f.current,m=p.useRef(0),g=m.current,x=o.open||l,y=p.useRef(x),v=p.useRef(void 0);return p.useEffect(()=>{const b=requestAnimationFrame(()=>y.current=!1);return()=>cancelAnimationFrame(b)},[]),ls(()=>{const b=d.current;if(b){v.current=v.current||{transitionDuration:b.style.transitionDuration,animationName:b.style.animationName},b.style.transitionDuration="0s",b.style.animationName="none";const w=b.getBoundingClientRect();f.current=w.height,m.current=w.width,y.current||(b.style.transitionDuration=v.current.transitionDuration,b.style.animationName=v.current.animationName),c(s)}},[o.open,s]),n.jsx(ht.div,{"data-state":cE(o.open),"data-disabled":o.disabled?"":void 0,id:o.contentId,hidden:!x,...i,ref:u,style:{"--radix-collapsible-content-height":h?`${h}px`:void 0,"--radix-collapsible-content-width":g?`${g}px`:void 0,...e.style},children:x&&a})});function cE(e){return e?"open":"closed"}var une=cne,k5e=iE,M5e=lE;const b1=une,w1=iE,j1=lE;function _5e(){const{toast:e}=Ee(),[t,r]=p.useState(null),{data:s,isLoading:a}=be({queryKey:["/api/tech-deposits/pending"]}),i=je({mutationFn:async d=>await Ne(`/api/tech-deposits/${d}/mark-deposited`,{method:"POST"}),onSuccess:(d,u)=>{e({title:"Deposit Confirmed",description:d.message||"Deposit has been marked as deposited"}),ze.invalidateQueries({queryKey:["/api/tech-deposits/pending"]}),ze.invalidateQueries({queryKey:["/api/tech-deposits/history"]})},onError:d=>{e({title:"Error",description:d.message||"Failed to mark deposit as deposited",variant:"destructive"})}}),o=(s==null?void 0:s.data)||[],l=o.reduce((d,u)=>d+u.totalAmount,0),c=o.reduce((d,u)=>d+u.invoiceCount,0);return n.jsxs(O,{children:[n.jsx(ee,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs(te,{className:"flex items-center gap-2",children:[n.jsx(Ar,{className:"h-5 w-5 text-green-600"}),"Pending Cash Deposits"]}),c>0&&n.jsxs(ge,{variant:"default",className:"bg-green-600",children:[c," ",c===1?"payment":"payments"]})]})}),n.jsx(H,{children:a?n.jsx("div",{className:"flex items-center justify-center py-8","data-testid":"loader-pending-deposits",children:n.jsx(nt,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):o.length===0?n.jsxs("div",{className:"text-center py-8","data-testid":"empty-pending-deposits",children:[n.jsx(Ar,{className:"h-12 w-12 text-muted-foreground mx-auto mb-3 opacity-20"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"No pending deposits"}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Cash and check payments will appear here"})]}):n.jsxs("div",{className:"space-y-3",children:[n.jsx("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-950/20 dark:to-emerald-950/20 p-4 rounded-lg border border-green-200 dark:border-green-800",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300",children:"Total Pending"}),n.jsxs("span",{className:"text-2xl font-bold text-green-700 dark:text-green-400","data-testid":"text-total-pending",children:["$",l.toFixed(2)]})]})}),o.map(d=>n.jsx(b1,{open:t===d.technicianId,onOpenChange:u=>r(u?d.technicianId:null),children:n.jsxs("div",{className:"border rounded-lg p-4 bg-card hover:bg-accent/5 transition-colors",children:[n.jsx("div",{className:"flex items-center justify-between mb-2",children:n.jsxs(w1,{className:"flex items-center gap-2 flex-1","data-testid":`button-expand-tech-${d.technicianId}`,children:[t===d.technicianId?n.jsx(Ui,{className:"h-4 w-4 text-muted-foreground"}):n.jsx(vl,{className:"h-4 w-4 text-muted-foreground"}),n.jsxs("div",{className:"text-left flex-1",children:[n.jsx("p",{className:"font-semibold text-sm","data-testid":`text-tech-name-${d.technicianId}`,children:d.technicianName}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:[d.invoiceCount," ",d.invoiceCount===1?"payment":"payments"]})]})]})}),n.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-3",children:[n.jsxs("div",{className:"bg-background p-2 rounded border",children:[n.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[n.jsx(Zv,{className:"h-3 w-3 text-green-600"}),n.jsx("span",{className:"text-xs text-muted-foreground",children:"Cash"})]}),n.jsxs("p",{className:"text-sm font-semibold","data-testid":`text-cash-${d.technicianId}`,children:["$",d.totalCash.toFixed(2)]})]}),n.jsxs("div",{className:"bg-background p-2 rounded border",children:[n.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[n.jsx(bs,{className:"h-3 w-3 text-blue-600"}),n.jsx("span",{className:"text-xs text-muted-foreground",children:"Check"})]}),n.jsxs("p",{className:"text-sm font-semibold","data-testid":`text-check-${d.technicianId}`,children:["$",d.totalCheck.toFixed(2)]})]}),n.jsxs("div",{className:"bg-background p-2 rounded border",children:[n.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[n.jsx(Ar,{className:"h-3 w-3 text-purple-600"}),n.jsx("span",{className:"text-xs text-muted-foreground",children:"Total"})]}),n.jsxs("p",{className:"text-sm font-bold text-purple-700 dark:text-purple-400","data-testid":`text-total-${d.technicianId}`,children:["$",d.totalAmount.toFixed(2)]})]})]}),n.jsx(j1,{className:"mt-3 space-y-2",children:d.deposits.map(u=>n.jsxs("div",{className:"bg-muted/30 p-3 rounded-lg border space-y-2","data-testid":`deposit-card-${u.id}`,children:[n.jsxs("div",{className:"flex items-center justify-between text-xs",children:[n.jsx("span",{className:"text-muted-foreground",children:new Date(u.depositDate).toLocaleDateString()}),n.jsx(ge,{variant:"outline",className:"text-xs",children:u.status})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("span",{className:"text-sm font-medium",children:["$",u.totalAmount]}),n.jsx(_,{size:"sm",variant:"default",onClick:()=>i.mutate(u.id),disabled:i.isPending,"data-testid":`button-mark-deposited-${u.id}`,children:i.isPending?n.jsxs(n.Fragment,{children:[n.jsx(nt,{className:"h-3 w-3 mr-1 animate-spin"}),"Confirming..."]}):n.jsxs(n.Fragment,{children:[n.jsx(bn,{className:"h-3 w-3 mr-1"}),"Mark Deposited"]})})]})]},u.id))}),d.deposits.length===1&&n.jsx(_,{size:"sm",variant:"default",className:"w-full mt-2",onClick:()=>i.mutate(d.deposits[0].id),disabled:i.isPending,"data-testid":`button-quick-mark-${d.technicianId}`,children:i.isPending?n.jsxs(n.Fragment,{children:[n.jsx(nt,{className:"h-4 w-4 mr-2 animate-spin"}),"Confirming..."]}):n.jsxs(n.Fragment,{children:[n.jsx(bn,{className:"h-4 w-4 mr-2"}),"Confirm Deposit"]})})]})},d.technicianId))]})})]})}function P5e(){const{data:e,isLoading:t}=be({queryKey:["/api/tech-deposits/history"]}),r=(e==null?void 0:e.data)||[],s=a=>{switch(a){case"deposited":return"default";case"pending":return"secondary";default:return"outline"}};return n.jsxs(O,{children:[n.jsx(ee,{children:n.jsxs(te,{className:"flex items-center gap-2",children:[n.jsx(Kc,{className:"h-5 w-5 text-blue-600"}),"Recent Deposits",n.jsx("span",{className:"text-sm font-normal text-muted-foreground ml-1",children:"(Last 7 days)"})]})}),n.jsxs(H,{children:[t?n.jsx("div",{className:"flex items-center justify-center py-8","data-testid":"loader-deposit-history",children:n.jsx(nt,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):r.length===0?n.jsxs("div",{className:"text-center py-8","data-testid":"empty-deposit-history",children:[n.jsx(Kc,{className:"h-12 w-12 text-muted-foreground mx-auto mb-3 opacity-20"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"No deposits in the last 7 days"})]}):n.jsx("div",{className:"rounded-md border",children:n.jsxs(hs,{children:[n.jsx(ms,{children:n.jsxs(vn,{children:[n.jsx(Ve,{children:"Date"}),n.jsx(Ve,{children:"Technician"}),n.jsx(Ve,{className:"text-right",children:"Cash"}),n.jsx(Ve,{className:"text-right",children:"Check"}),n.jsx(Ve,{className:"text-right",children:"Total"}),n.jsx(Ve,{className:"text-center",children:"Status"})]})}),n.jsx(ps,{children:r.map(a=>n.jsxs(vn,{"data-testid":`row-deposit-${a.id}`,children:[n.jsx(Ue,{className:"font-medium",children:Ie(new Date(a.depositDate),"MMM d, yyyy")}),n.jsx(Ue,{"data-testid":`text-tech-${a.id}`,children:a.technicianName}),n.jsxs(Ue,{className:"text-right","data-testid":`text-cash-${a.id}`,children:["$",parseFloat(a.cashAmount||"0").toFixed(2)]}),n.jsxs(Ue,{className:"text-right","data-testid":`text-check-${a.id}`,children:["$",parseFloat(a.checkAmount||"0").toFixed(2)]}),n.jsxs(Ue,{className:"text-right font-semibold","data-testid":`text-total-${a.id}`,children:["$",parseFloat(a.totalAmount||"0").toFixed(2)]}),n.jsx(Ue,{className:"text-center",children:n.jsx(ge,{variant:s(a.status),"data-testid":`badge-status-${a.id}`,children:a.status==="deposited"?" Deposited":"Pending"})})]},a.id))})]})}),r.length>0&&n.jsxs("div",{className:"mt-4 text-center text-sm text-muted-foreground",children:["Showing ",r.length," ",r.length===1?"deposit":"deposits"]})]})]})}function dE(){const{isInstallable:e,promptInstall:t}=lT(),[r,s]=p.useState(!1);return!e||r?null:n.jsx("div",{className:"fixed bottom-4 left-1/2 -translate-x-1/2 z-50 w-full max-w-md px-4 animate-in slide-in-from-bottom",children:n.jsx(O,{className:"bg-gradient-to-r from-blue-600 to-cyan-600 text-white border-0 shadow-2xl",children:n.jsxs("div",{className:"p-4 flex items-center gap-4",children:[n.jsx("div",{className:"flex-shrink-0 p-3 bg-white/20 rounded-xl backdrop-blur-sm",children:n.jsx(Qc,{className:"h-6 w-6"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-semibold text-sm mb-1",children:"Install Clean Machine"}),n.jsx("p",{className:"text-xs text-blue-50",children:"Get quick access from your home screen"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(_,{size:"sm",variant:"ghost",className:"text-white hover:bg-white/20 h-8 w-8 p-0",onClick:()=>s(!0),"data-testid":"button-dismiss-install",children:n.jsx(Jr,{className:"h-4 w-4"})}),n.jsx(_,{size:"sm",variant:"secondary",className:"bg-white text-blue-600 hover:bg-blue-50 font-medium",onClick:t,"data-testid":"button-install-app",children:"Install"})]})]})})})}function T5e(){const{isOnline:e}=lT();return e?null:n.jsx("div",{className:"fixed top-0 left-0 right-0 z-50 animate-in slide-in-from-top",children:n.jsxs("div",{className:"bg-orange-500 text-white py-2 px-4 text-center flex items-center justify-center gap-2 text-sm font-medium",children:[n.jsx(jge,{className:"h-4 w-4"}),n.jsx("span",{children:"You're offline. Changes will sync when connection is restored."})]})})}const D$="servicepro:dashboardTourSeen";function A5e(e){const{initialHasSeenTour:t=!1,userId:r}=e,[s,a]=p.useState(t),[i,o]=p.useState(!1);p.useEffect(()=>{if(t){a(!0);return}(typeof window<"u"?window.localStorage.getItem(D$):null)==="true"&&a(!0)},[t]),p.useEffect(()=>{},[s]);const l=p.useCallback(async()=>{a(!0),o(!1),typeof window<"u"&&window.localStorage.setItem(D$,"true");try{await fetch("/api/users/dashboard-tour/complete",{method:"POST",headers:{"Content-Type":"application/json"}})}catch(c){console.error("Failed to mark dashboard tour completed",c)}},[r]);return{hasSeenTour:s,shouldShowTour:i,setShouldShowTour:o,markTourCompleted:l}}function E5e({steps:e,isOpen:t,onClose:r,onFinish:s}){const[a,i]=p.useState(0),[o,l]=p.useState(null);if(p.useLayoutEffect(()=>{if(!t)return;const m=e[a];if(!m)return;const g=document.querySelector(`[data-tour-id="${m.targetId}"]`);if(g){const x=g.getBoundingClientRect();l({top:x.top,left:x.left,width:x.width,height:x.height}),g.scrollIntoView({behavior:"smooth",block:"center"})}else l(null)},[t,a,e]),p.useEffect(()=>{if(!t)return;const m=g=>{g.key==="Escape"&&r()};return window.addEventListener("keydown",m),()=>window.removeEventListener("keydown",m)},[t,r]),!t||e.length===0)return null;const c=e[a];if(!c)return null;const d=()=>{a===e.length-1?s():i(m=>m+1)},u=()=>{a>0&&i(m=>m-1)},f=()=>{r()},h=n.jsxs("div",{className:"fixed inset-0 z-[9999] bg-black/60",style:{pointerEvents:"none"},children:[o&&n.jsx("div",{className:"fixed rounded-lg pointer-events-none ring-4 ring-white ring-offset-0 shadow-2xl",style:{top:o.top-8,left:o.left-8,width:o.width+16,height:o.height+16}}),n.jsxs("div",{className:"fixed max-w-sm p-6 rounded-xl bg-white dark:bg-gray-900 shadow-2xl border-2 border-gray-200 dark:border-gray-700",style:{top:((o==null?void 0:o.top)??80)+((o==null?void 0:o.height)??0)+20,left:(o==null?void 0:o.left)??24,pointerEvents:"auto"},children:[n.jsx("div",{className:"font-semibold text-lg mb-2 text-gray-900 dark:text-white",children:c.title}),n.jsx("div",{className:"text-sm mb-4 text-gray-700 dark:text-gray-300 leading-relaxed",children:c.body}),n.jsxs("div",{className:"flex justify-between items-center gap-3",children:[n.jsx(_,{variant:"ghost",size:"sm",onClick:f,className:"text-gray-600 dark:text-gray-400","data-testid":"button-skip-tour",children:"Skip tour"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(_,{variant:"outline",size:"sm",onClick:u,disabled:a===0,className:a===0?"opacity-40 cursor-not-allowed":"","data-testid":"button-tour-back",children:"Back"}),n.jsx(_,{size:"sm",onClick:d,className:"font-semibold","data-testid":"button-tour-next",children:a===e.length-1?"Finish":"Next"})]})]}),n.jsxs("div",{className:"mt-3 text-xs text-gray-500 dark:text-gray-400 text-center",children:["Step ",a+1," of ",e.length]})]})]});return ZG.createPortal(h,document.body)}const I5e=[{id:"welcome",targetId:"main-dashboard-root",title:"Welcome in ",body:"Hey there! Just wanna show you around real quick so you know where everything's at. We'll keep it short and simple."},{id:"nav",targetId:"sidebar-nav",title:"Your main hub",body:"This is your main navigation. You'll bounce between messages, your schedule, and setup from right here. If you ever feel lost, start here."},{id:"messages",targetId:"nav-messages",title:"Customer messages",body:"All your customer texts and conversations live in this inbox. This is where the magic happensbooking jobs, answering questions, and keeping folks happy."},{id:"schedule",targetId:"nav-scheduling",title:"Your schedule",body:"Here's your calendarwhat's booked, what's open, and what's coming up. This is where you keep your days from turning into total chaos."},{id:"settings",targetId:"nav-settings",title:"Setup & services",body:"This is where you tweak your services, pricing, and automations. We've got smart defaults to get you rolling, and you can fine-tune anytime."},{id:"help",targetId:"ai-help-search",title:"Need a hand?",body:"Anytime you're not sure what to do next, use this search. Ask about setup, pricing, automationsyou name it. It's here so you don't have to figure everything out alone."},{id:"wrapup",targetId:"main-dashboard-root",title:"You're all set ",body:"That's the quick tour. You're ready to click around and make it yours. If you ever want to see this again, just askwe've got your back!"}];function L5e(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return p.useMemo(()=>s=>{t.forEach(a=>a(s))},t)}const O4=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function K0(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function uE(e){return"nodeType"in e}function yi(e){var t,r;return e?K0(e)?e:uE(e)&&(t=(r=e.ownerDocument)==null?void 0:r.defaultView)!=null?t:window:window}function fE(e){const{Document:t}=yi(e);return e instanceof t}function N1(e){return K0(e)?!1:e instanceof yi(e).HTMLElement}function fne(e){return e instanceof yi(e).SVGElement}function J0(e){return e?K0(e)?e.document:uE(e)?fE(e)?e:N1(e)||fne(e)?e.ownerDocument:document:document:document}const Zl=O4?p.useLayoutEffect:p.useEffect;function hE(e){const t=p.useRef(e);return Zl(()=>{t.current=e}),p.useCallback(function(){for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return t.current==null?void 0:t.current(...s)},[])}function D5e(){const e=p.useRef(null),t=p.useCallback((s,a)=>{e.current=setInterval(s,a)},[]),r=p.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,r]}function Ay(e,t){t===void 0&&(t=[e]);const r=p.useRef(e);return Zl(()=>{r.current!==e&&(r.current=e)},t),r}function S1(e,t){const r=p.useRef();return p.useMemo(()=>{const s=e(r.current);return r.current=s,s},[...t])}function Hj(e){const t=hE(e),r=p.useRef(null),s=p.useCallback(a=>{a!==r.current&&(t==null||t(a,r.current)),r.current=a},[]);return[r,s]}function TM(e){const t=p.useRef();return p.useEffect(()=>{t.current=e},[e]),t.current}let CC={};function C1(e,t){return p.useMemo(()=>{if(t)return t;const r=CC[e]==null?0:CC[e]+1;return CC[e]=r,e+"-"+r},[e,t])}function hne(e){return function(t){for(var r=arguments.length,s=new Array(r>1?r-1:0),a=1;a<r;a++)s[a-1]=arguments[a];return s.reduce((i,o)=>{const l=Object.entries(o);for(const[c,d]of l){const u=i[c];u!=null&&(i[c]=u+e*d)}return i},{...t})}}const Hm=hne(1),Ey=hne(-1);function $5e(e){return"clientX"in e&&"clientY"in e}function mE(e){if(!e)return!1;const{KeyboardEvent:t}=yi(e.target);return t&&e instanceof t}function O5e(e){if(!e)return!1;const{TouchEvent:t}=yi(e.target);return t&&e instanceof t}function AM(e){if(O5e(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:r}=e.touches[0];return{x:t,y:r}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:r}=e.changedTouches[0];return{x:t,y:r}}}return $5e(e)?{x:e.clientX,y:e.clientY}:null}const Iy=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:r}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(r?Math.round(r):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:r}=e;return"scaleX("+t+") scaleY("+r+")"}},Transform:{toString(e){if(e)return[Iy.Translate.toString(e),Iy.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:r,easing:s}=e;return t+" "+r+"ms "+s}}}),$$="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function R5e(e){return e.matches($$)?e:e.querySelector($$)}const F5e={display:"none"};function z5e(e){let{id:t,value:r}=e;return Q.createElement("div",{id:t,style:F5e},r)}function B5e(e){let{id:t,announcement:r,ariaLiveType:s="assertive"}=e;const a={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Q.createElement("div",{id:t,style:a,role:"status","aria-live":s,"aria-atomic":!0},r)}function U5e(){const[e,t]=p.useState("");return{announce:p.useCallback(s=>{s!=null&&t(s)},[]),announcement:e}}const mne=p.createContext(null);function V5e(e){const t=p.useContext(mne);p.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function H5e(){const[e]=p.useState(()=>new Set),t=p.useCallback(s=>(e.add(s),()=>e.delete(s)),[e]);return[p.useCallback(s=>{let{type:a,event:i}=s;e.forEach(o=>{var l;return(l=o[a])==null?void 0:l.call(o,i)})},[e]),t]}const W5e={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},q5e={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:r}=e;return r?"Draggable item "+t.id+" was moved over droppable area "+r.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:r}=e;return r?"Draggable item "+t.id+" was dropped over droppable area "+r.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function G5e(e){let{announcements:t=q5e,container:r,hiddenTextDescribedById:s,screenReaderInstructions:a=W5e}=e;const{announce:i,announcement:o}=U5e(),l=C1("DndLiveRegion"),[c,d]=p.useState(!1);if(p.useEffect(()=>{d(!0)},[]),V5e(p.useMemo(()=>({onDragStart(f){let{active:h}=f;i(t.onDragStart({active:h}))},onDragMove(f){let{active:h,over:m}=f;t.onDragMove&&i(t.onDragMove({active:h,over:m}))},onDragOver(f){let{active:h,over:m}=f;i(t.onDragOver({active:h,over:m}))},onDragEnd(f){let{active:h,over:m}=f;i(t.onDragEnd({active:h,over:m}))},onDragCancel(f){let{active:h,over:m}=f;i(t.onDragCancel({active:h,over:m}))}}),[i,t])),!c)return null;const u=Q.createElement(Q.Fragment,null,Q.createElement(z5e,{id:s,value:a.draggable}),Q.createElement(B5e,{id:l,announcement:o}));return r?ho.createPortal(u,r):u}var Ps;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(Ps||(Ps={}));function Wj(){}function O$(e,t){return p.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function Y5e(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return p.useMemo(()=>[...t].filter(s=>s!=null),[...t])}const gl=Object.freeze({x:0,y:0});function pne(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function gne(e,t){let{data:{value:r}}=e,{data:{value:s}}=t;return r-s}function Q5e(e,t){let{data:{value:r}}=e,{data:{value:s}}=t;return s-r}function R$(e){let{left:t,top:r,height:s,width:a}=e;return[{x:t,y:r},{x:t+a,y:r},{x:t,y:r+s},{x:t+a,y:r+s}]}function xne(e,t){if(!e||e.length===0)return null;const[r]=e;return r[t]}function F$(e,t,r){return t===void 0&&(t=e.left),r===void 0&&(r=e.top),{x:t+e.width*.5,y:r+e.height*.5}}const K5e=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:s}=e;const a=F$(t,t.left,t.top),i=[];for(const o of s){const{id:l}=o,c=r.get(l);if(c){const d=pne(F$(c),a);i.push({id:l,data:{droppableContainer:o,value:d}})}}return i.sort(gne)},J5e=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:s}=e;const a=R$(t),i=[];for(const o of s){const{id:l}=o,c=r.get(l);if(c){const d=R$(c),u=a.reduce((h,m,g)=>h+pne(d[g],m),0),f=Number((u/4).toFixed(4));i.push({id:l,data:{droppableContainer:o,value:f}})}}return i.sort(gne)};function Z5e(e,t){const r=Math.max(t.top,e.top),s=Math.max(t.left,e.left),a=Math.min(t.left+t.width,e.left+e.width),i=Math.min(t.top+t.height,e.top+e.height),o=a-s,l=i-r;if(s<a&&r<i){const c=t.width*t.height,d=e.width*e.height,u=o*l,f=u/(c+d-u);return Number(f.toFixed(4))}return 0}const X5e=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:s}=e;const a=[];for(const i of s){const{id:o}=i,l=r.get(o);if(l){const c=Z5e(l,t);c>0&&a.push({id:o,data:{droppableContainer:i,value:c}})}}return a.sort(Q5e)};function ePe(e,t,r){return{...e,scaleX:t&&r?t.width/r.width:1,scaleY:t&&r?t.height/r.height:1}}function yne(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:gl}function tPe(e){return function(r){for(var s=arguments.length,a=new Array(s>1?s-1:0),i=1;i<s;i++)a[i-1]=arguments[i];return a.reduce((o,l)=>({...o,top:o.top+e*l.y,bottom:o.bottom+e*l.y,left:o.left+e*l.x,right:o.right+e*l.x}),{...r})}}const nPe=tPe(1);function rPe(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function sPe(e,t,r){const s=rPe(t);if(!s)return e;const{scaleX:a,scaleY:i,x:o,y:l}=s,c=e.left-o-(1-a)*parseFloat(r),d=e.top-l-(1-i)*parseFloat(r.slice(r.indexOf(" ")+1)),u=a?e.width/a:e.width,f=i?e.height/i:e.height;return{width:u,height:f,top:d,right:c+u,bottom:d+f,left:c}}const aPe={ignoreTransform:!1};function Z0(e,t){t===void 0&&(t=aPe);let r=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:d,transformOrigin:u}=yi(e).getComputedStyle(e);d&&(r=sPe(r,d,u))}const{top:s,left:a,width:i,height:o,bottom:l,right:c}=r;return{top:s,left:a,width:i,height:o,bottom:l,right:c}}function z$(e){return Z0(e,{ignoreTransform:!0})}function iPe(e){const t=e.innerWidth,r=e.innerHeight;return{top:0,left:0,right:t,bottom:r,width:t,height:r}}function oPe(e,t){return t===void 0&&(t=yi(e).getComputedStyle(e)),t.position==="fixed"}function lPe(e,t){t===void 0&&(t=yi(e).getComputedStyle(e));const r=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(a=>{const i=t[a];return typeof i=="string"?r.test(i):!1})}function R4(e,t){const r=[];function s(a){if(t!=null&&r.length>=t||!a)return r;if(fE(a)&&a.scrollingElement!=null&&!r.includes(a.scrollingElement))return r.push(a.scrollingElement),r;if(!N1(a)||fne(a)||r.includes(a))return r;const i=yi(e).getComputedStyle(a);return a!==e&&lPe(a,i)&&r.push(a),oPe(a,i)?r:s(a.parentNode)}return e?s(e):r}function vne(e){const[t]=R4(e,1);return t??null}function kC(e){return!O4||!e?null:K0(e)?e:uE(e)?fE(e)||e===J0(e).scrollingElement?window:N1(e)?e:null:null}function bne(e){return K0(e)?e.scrollX:e.scrollLeft}function wne(e){return K0(e)?e.scrollY:e.scrollTop}function EM(e){return{x:bne(e),y:wne(e)}}var Us;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(Us||(Us={}));function jne(e){return!O4||!e?!1:e===document.scrollingElement}function Nne(e){const t={x:0,y:0},r=jne(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},s={x:e.scrollWidth-r.width,y:e.scrollHeight-r.height},a=e.scrollTop<=t.y,i=e.scrollLeft<=t.x,o=e.scrollTop>=s.y,l=e.scrollLeft>=s.x;return{isTop:a,isLeft:i,isBottom:o,isRight:l,maxScroll:s,minScroll:t}}const cPe={x:.2,y:.2};function dPe(e,t,r,s,a){let{top:i,left:o,right:l,bottom:c}=r;s===void 0&&(s=10),a===void 0&&(a=cPe);const{isTop:d,isBottom:u,isLeft:f,isRight:h}=Nne(e),m={x:0,y:0},g={x:0,y:0},x={height:t.height*a.y,width:t.width*a.x};return!d&&i<=t.top+x.height?(m.y=Us.Backward,g.y=s*Math.abs((t.top+x.height-i)/x.height)):!u&&c>=t.bottom-x.height&&(m.y=Us.Forward,g.y=s*Math.abs((t.bottom-x.height-c)/x.height)),!h&&l>=t.right-x.width?(m.x=Us.Forward,g.x=s*Math.abs((t.right-x.width-l)/x.width)):!f&&o<=t.left+x.width&&(m.x=Us.Backward,g.x=s*Math.abs((t.left+x.width-o)/x.width)),{direction:m,speed:g}}function uPe(e){if(e===document.scrollingElement){const{innerWidth:i,innerHeight:o}=window;return{top:0,left:0,right:i,bottom:o,width:i,height:o}}const{top:t,left:r,right:s,bottom:a}=e.getBoundingClientRect();return{top:t,left:r,right:s,bottom:a,width:e.clientWidth,height:e.clientHeight}}function Sne(e){return e.reduce((t,r)=>Hm(t,EM(r)),gl)}function fPe(e){return e.reduce((t,r)=>t+bne(r),0)}function hPe(e){return e.reduce((t,r)=>t+wne(r),0)}function mPe(e,t){if(t===void 0&&(t=Z0),!e)return;const{top:r,left:s,bottom:a,right:i}=t(e);vne(e)&&(a<=0||i<=0||r>=window.innerHeight||s>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const pPe=[["x",["left","right"],fPe],["y",["top","bottom"],hPe]];class pE{constructor(t,r){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const s=R4(r),a=Sne(s);this.rect={...t},this.width=t.width,this.height=t.height;for(const[i,o,l]of pPe)for(const c of o)Object.defineProperty(this,c,{get:()=>{const d=l(s),u=a[i]-d;return this.rect[c]+u},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Px{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(r=>{var s;return(s=this.target)==null?void 0:s.removeEventListener(...r)})},this.target=t}add(t,r,s){var a;(a=this.target)==null||a.addEventListener(t,r,s),this.listeners.push([t,r,s])}}function gPe(e){const{EventTarget:t}=yi(e);return e instanceof t?e:J0(e)}function MC(e,t){const r=Math.abs(e.x),s=Math.abs(e.y);return typeof t=="number"?Math.sqrt(r**2+s**2)>t:"x"in t&&"y"in t?r>t.x&&s>t.y:"x"in t?r>t.x:"y"in t?s>t.y:!1}var io;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(io||(io={}));function B$(e){e.preventDefault()}function xPe(e){e.stopPropagation()}var _n;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(_n||(_n={}));const Cne={start:[_n.Space,_n.Enter],cancel:[_n.Esc],end:[_n.Space,_n.Enter,_n.Tab]},yPe=(e,t)=>{let{currentCoordinates:r}=t;switch(e.code){case _n.Right:return{...r,x:r.x+25};case _n.Left:return{...r,x:r.x-25};case _n.Down:return{...r,y:r.y+25};case _n.Up:return{...r,y:r.y-25}}};class gE{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:r}}=t;this.props=t,this.listeners=new Px(J0(r)),this.windowListeners=new Px(yi(r)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(io.Resize,this.handleCancel),this.windowListeners.add(io.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(io.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:r}=this.props,s=t.node.current;s&&mPe(s),r(gl)}handleKeyDown(t){if(mE(t)){const{active:r,context:s,options:a}=this.props,{keyboardCodes:i=Cne,coordinateGetter:o=yPe,scrollBehavior:l="smooth"}=a,{code:c}=t;if(i.end.includes(c)){this.handleEnd(t);return}if(i.cancel.includes(c)){this.handleCancel(t);return}const{collisionRect:d}=s.current,u=d?{x:d.left,y:d.top}:gl;this.referenceCoordinates||(this.referenceCoordinates=u);const f=o(t,{active:r,context:s.current,currentCoordinates:u});if(f){const h=Ey(f,u),m={x:0,y:0},{scrollableAncestors:g}=s.current;for(const x of g){const y=t.code,{isTop:v,isRight:b,isLeft:w,isBottom:N,maxScroll:j,minScroll:S}=Nne(x),C=uPe(x),k={x:Math.min(y===_n.Right?C.right-C.width/2:C.right,Math.max(y===_n.Right?C.left:C.left+C.width/2,f.x)),y:Math.min(y===_n.Down?C.bottom-C.height/2:C.bottom,Math.max(y===_n.Down?C.top:C.top+C.height/2,f.y))},M=y===_n.Right&&!b||y===_n.Left&&!w,A=y===_n.Down&&!N||y===_n.Up&&!v;if(M&&k.x!==f.x){const P=x.scrollLeft+h.x,T=y===_n.Right&&P<=j.x||y===_n.Left&&P>=S.x;if(T&&!h.y){x.scrollTo({left:P,behavior:l});return}T?m.x=x.scrollLeft-P:m.x=y===_n.Right?x.scrollLeft-j.x:x.scrollLeft-S.x,m.x&&x.scrollBy({left:-m.x,behavior:l});break}else if(A&&k.y!==f.y){const P=x.scrollTop+h.y,T=y===_n.Down&&P<=j.y||y===_n.Up&&P>=S.y;if(T&&!h.x){x.scrollTo({top:P,behavior:l});return}T?m.y=x.scrollTop-P:m.y=y===_n.Down?x.scrollTop-j.y:x.scrollTop-S.y,m.y&&x.scrollBy({top:-m.y,behavior:l});break}}this.handleMove(t,Hm(Ey(f,this.referenceCoordinates),m))}}}handleMove(t,r){const{onMove:s}=this.props;t.preventDefault(),s(r)}handleEnd(t){const{onEnd:r}=this.props;t.preventDefault(),this.detach(),r()}handleCancel(t){const{onCancel:r}=this.props;t.preventDefault(),this.detach(),r()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}gE.activators=[{eventName:"onKeyDown",handler:(e,t,r)=>{let{keyboardCodes:s=Cne,onActivation:a}=t,{active:i}=r;const{code:o}=e.nativeEvent;if(s.start.includes(o)){const l=i.activatorNode.current;return l&&e.target!==l?!1:(e.preventDefault(),a==null||a({event:e.nativeEvent}),!0)}return!1}}];function U$(e){return!!(e&&"distance"in e)}function V$(e){return!!(e&&"delay"in e)}class xE{constructor(t,r,s){var a;s===void 0&&(s=gPe(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=r;const{event:i}=t,{target:o}=i;this.props=t,this.events=r,this.document=J0(o),this.documentListeners=new Px(this.document),this.listeners=new Px(s),this.windowListeners=new Px(yi(o)),this.initialCoordinates=(a=AM(i))!=null?a:gl,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:r,bypassActivationConstraint:s}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(io.Resize,this.handleCancel),this.windowListeners.add(io.DragStart,B$),this.windowListeners.add(io.VisibilityChange,this.handleCancel),this.windowListeners.add(io.ContextMenu,B$),this.documentListeners.add(io.Keydown,this.handleKeydown),r){if(s!=null&&s({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(V$(r)){this.timeoutId=setTimeout(this.handleStart,r.delay),this.handlePending(r);return}if(U$(r)){this.handlePending(r);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,r){const{active:s,onPending:a}=this.props;a(s,t,this.initialCoordinates,r)}handleStart(){const{initialCoordinates:t}=this,{onStart:r}=this.props;t&&(this.activated=!0,this.documentListeners.add(io.Click,xPe,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(io.SelectionChange,this.removeTextSelection),r(t))}handleMove(t){var r;const{activated:s,initialCoordinates:a,props:i}=this,{onMove:o,options:{activationConstraint:l}}=i;if(!a)return;const c=(r=AM(t))!=null?r:gl,d=Ey(a,c);if(!s&&l){if(U$(l)){if(l.tolerance!=null&&MC(d,l.tolerance))return this.handleCancel();if(MC(d,l.distance))return this.handleStart()}if(V$(l)&&MC(d,l.tolerance))return this.handleCancel();this.handlePending(l,d);return}t.cancelable&&t.preventDefault(),o(c)}handleEnd(){const{onAbort:t,onEnd:r}=this.props;this.detach(),this.activated||t(this.props.active),r()}handleCancel(){const{onAbort:t,onCancel:r}=this.props;this.detach(),this.activated||t(this.props.active),r()}handleKeydown(t){t.code===_n.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const vPe={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class yE extends xE{constructor(t){const{event:r}=t,s=J0(r.target);super(t,vPe,s)}}yE.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:s}=t;return!r.isPrimary||r.button!==0?!1:(s==null||s({event:r}),!0)}}];const bPe={move:{name:"mousemove"},end:{name:"mouseup"}};var IM;(function(e){e[e.RightClick=2]="RightClick"})(IM||(IM={}));class wPe extends xE{constructor(t){super(t,bPe,J0(t.event.target))}}wPe.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:s}=t;return r.button===IM.RightClick?!1:(s==null||s({event:r}),!0)}}];const _C={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class jPe extends xE{constructor(t){super(t,_C)}static setup(){return window.addEventListener(_C.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(_C.move.name,t)};function t(){}}}jPe.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:s}=t;const{touches:a}=r;return a.length>1?!1:(s==null||s({event:r}),!0)}}];var Tx;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(Tx||(Tx={}));var qj;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(qj||(qj={}));function NPe(e){let{acceleration:t,activator:r=Tx.Pointer,canScroll:s,draggingRect:a,enabled:i,interval:o=5,order:l=qj.TreeOrder,pointerCoordinates:c,scrollableAncestors:d,scrollableAncestorRects:u,delta:f,threshold:h}=e;const m=CPe({delta:f,disabled:!i}),[g,x]=D5e(),y=p.useRef({x:0,y:0}),v=p.useRef({x:0,y:0}),b=p.useMemo(()=>{switch(r){case Tx.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case Tx.DraggableRect:return a}},[r,a,c]),w=p.useRef(null),N=p.useCallback(()=>{const S=w.current;if(!S)return;const C=y.current.x*v.current.x,k=y.current.y*v.current.y;S.scrollBy(C,k)},[]),j=p.useMemo(()=>l===qj.TreeOrder?[...d].reverse():d,[l,d]);p.useEffect(()=>{if(!i||!d.length||!b){x();return}for(const S of j){if((s==null?void 0:s(S))===!1)continue;const C=d.indexOf(S),k=u[C];if(!k)continue;const{direction:M,speed:A}=dPe(S,k,b,t,h);for(const P of["x","y"])m[P][M[P]]||(A[P]=0,M[P]=0);if(A.x>0||A.y>0){x(),w.current=S,g(N,o),y.current=A,v.current=M;return}}y.current={x:0,y:0},v.current={x:0,y:0},x()},[t,N,s,x,i,o,JSON.stringify(b),JSON.stringify(m),g,d,j,u,JSON.stringify(h)])}const SPe={x:{[Us.Backward]:!1,[Us.Forward]:!1},y:{[Us.Backward]:!1,[Us.Forward]:!1}};function CPe(e){let{delta:t,disabled:r}=e;const s=TM(t);return S1(a=>{if(r||!s||!a)return SPe;const i={x:Math.sign(t.x-s.x),y:Math.sign(t.y-s.y)};return{x:{[Us.Backward]:a.x[Us.Backward]||i.x===-1,[Us.Forward]:a.x[Us.Forward]||i.x===1},y:{[Us.Backward]:a.y[Us.Backward]||i.y===-1,[Us.Forward]:a.y[Us.Forward]||i.y===1}}},[r,t,s])}function kPe(e,t){const r=t!=null?e.get(t):void 0,s=r?r.node.current:null;return S1(a=>{var i;return t==null?null:(i=s??a)!=null?i:null},[s,t])}function MPe(e,t){return p.useMemo(()=>e.reduce((r,s)=>{const{sensor:a}=s,i=a.activators.map(o=>({eventName:o.eventName,handler:t(o.handler,s)}));return[...r,...i]},[]),[e,t])}var Ly;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(Ly||(Ly={}));var LM;(function(e){e.Optimized="optimized"})(LM||(LM={}));const H$=new Map;function _Pe(e,t){let{dragging:r,dependencies:s,config:a}=t;const[i,o]=p.useState(null),{frequency:l,measure:c,strategy:d}=a,u=p.useRef(e),f=y(),h=Ay(f),m=p.useCallback(function(v){v===void 0&&(v=[]),!h.current&&o(b=>b===null?v:b.concat(v.filter(w=>!b.includes(w))))},[h]),g=p.useRef(null),x=S1(v=>{if(f&&!r)return H$;if(!v||v===H$||u.current!==e||i!=null){const b=new Map;for(let w of e){if(!w)continue;if(i&&i.length>0&&!i.includes(w.id)&&w.rect.current){b.set(w.id,w.rect.current);continue}const N=w.node.current,j=N?new pE(c(N),N):null;w.rect.current=j,j&&b.set(w.id,j)}return b}return v},[e,i,r,f,c]);return p.useEffect(()=>{u.current=e},[e]),p.useEffect(()=>{f||m()},[r,f]),p.useEffect(()=>{i&&i.length>0&&o(null)},[JSON.stringify(i)]),p.useEffect(()=>{f||typeof l!="number"||g.current!==null||(g.current=setTimeout(()=>{m(),g.current=null},l))},[l,f,m,...s]),{droppableRects:x,measureDroppableContainers:m,measuringScheduled:i!=null};function y(){switch(d){case Ly.Always:return!1;case Ly.BeforeDragging:return r;default:return!r}}}function kne(e,t){return S1(r=>e?r||(typeof t=="function"?t(e):e):null,[t,e])}function PPe(e,t){return kne(e,t)}function TPe(e){let{callback:t,disabled:r}=e;const s=hE(t),a=p.useMemo(()=>{if(r||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:i}=window;return new i(s)},[s,r]);return p.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function F4(e){let{callback:t,disabled:r}=e;const s=hE(t),a=p.useMemo(()=>{if(r||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:i}=window;return new i(s)},[r]);return p.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function APe(e){return new pE(Z0(e),e)}function W$(e,t,r){t===void 0&&(t=APe);const[s,a]=p.useState(null);function i(){a(c=>{if(!e)return null;if(e.isConnected===!1){var d;return(d=c??r)!=null?d:null}const u=t(e);return JSON.stringify(c)===JSON.stringify(u)?c:u})}const o=TPe({callback(c){if(e)for(const d of c){const{type:u,target:f}=d;if(u==="childList"&&f instanceof HTMLElement&&f.contains(e)){i();break}}}}),l=F4({callback:i});return Zl(()=>{i(),e?(l==null||l.observe(e),o==null||o.observe(document.body,{childList:!0,subtree:!0})):(l==null||l.disconnect(),o==null||o.disconnect())},[e]),s}function EPe(e){const t=kne(e);return yne(e,t)}const q$=[];function IPe(e){const t=p.useRef(e),r=S1(s=>e?s&&s!==q$&&e&&t.current&&e.parentNode===t.current.parentNode?s:R4(e):q$,[e]);return p.useEffect(()=>{t.current=e},[e]),r}function LPe(e){const[t,r]=p.useState(null),s=p.useRef(e),a=p.useCallback(i=>{const o=kC(i.target);o&&r(l=>l?(l.set(o,EM(o)),new Map(l)):null)},[]);return p.useEffect(()=>{const i=s.current;if(e!==i){o(i);const l=e.map(c=>{const d=kC(c);return d?(d.addEventListener("scroll",a,{passive:!0}),[d,EM(d)]):null}).filter(c=>c!=null);r(l.length?new Map(l):null),s.current=e}return()=>{o(e),o(i)};function o(l){l.forEach(c=>{const d=kC(c);d==null||d.removeEventListener("scroll",a)})}},[a,e]),p.useMemo(()=>e.length?t?Array.from(t.values()).reduce((i,o)=>Hm(i,o),gl):Sne(e):gl,[e,t])}function G$(e,t){t===void 0&&(t=[]);const r=p.useRef(null);return p.useEffect(()=>{r.current=null},t),p.useEffect(()=>{const s=e!==gl;s&&!r.current&&(r.current=e),!s&&r.current&&(r.current=null)},[e]),r.current?Ey(e,r.current):gl}function DPe(e){p.useEffect(()=>{if(!O4)return;const t=e.map(r=>{let{sensor:s}=r;return s.setup==null?void 0:s.setup()});return()=>{for(const r of t)r==null||r()}},e.map(t=>{let{sensor:r}=t;return r}))}function $Pe(e,t){return p.useMemo(()=>e.reduce((r,s)=>{let{eventName:a,handler:i}=s;return r[a]=o=>{i(o,t)},r},{}),[e,t])}function Mne(e){return p.useMemo(()=>e?iPe(e):null,[e])}const Y$=[];function OPe(e,t){t===void 0&&(t=Z0);const[r]=e,s=Mne(r?yi(r):null),[a,i]=p.useState(Y$);function o(){i(()=>e.length?e.map(c=>jne(c)?s:new pE(t(c),c)):Y$)}const l=F4({callback:o});return Zl(()=>{l==null||l.disconnect(),o(),e.forEach(c=>l==null?void 0:l.observe(c))},[e]),a}function RPe(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return N1(t)?t:e}function FPe(e){let{measure:t}=e;const[r,s]=p.useState(null),a=p.useCallback(d=>{for(const{target:u}of d)if(N1(u)){s(f=>{const h=t(u);return f?{...f,width:h.width,height:h.height}:h});break}},[t]),i=F4({callback:a}),o=p.useCallback(d=>{const u=RPe(d);i==null||i.disconnect(),u&&(i==null||i.observe(u)),s(u?t(u):null)},[t,i]),[l,c]=Hj(o);return p.useMemo(()=>({nodeRef:l,rect:r,setRef:c}),[r,l,c])}const zPe=[{sensor:yE,options:{}},{sensor:gE,options:{}}],BPe={current:{}},Pw={draggable:{measure:z$},droppable:{measure:z$,strategy:Ly.WhileDragging,frequency:LM.Optimized},dragOverlay:{measure:Z0}};class Ax extends Map{get(t){var r;return t!=null&&(r=super.get(t))!=null?r:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:r}=t;return!r})}getNodeFor(t){var r,s;return(r=(s=this.get(t))==null?void 0:s.node.current)!=null?r:void 0}}const UPe={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Ax,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Wj},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Pw,measureDroppableContainers:Wj,windowRect:null,measuringScheduled:!1},VPe={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Wj,draggableNodes:new Map,over:null,measureDroppableContainers:Wj},z4=p.createContext(VPe),_ne=p.createContext(UPe);function HPe(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Ax}}}function WPe(e,t){switch(t.type){case Ps.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case Ps.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case Ps.DragEnd:case Ps.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Ps.RegisterDroppable:{const{element:r}=t,{id:s}=r,a=new Ax(e.droppable.containers);return a.set(s,r),{...e,droppable:{...e.droppable,containers:a}}}case Ps.SetDroppableDisabled:{const{id:r,key:s,disabled:a}=t,i=e.droppable.containers.get(r);if(!i||s!==i.key)return e;const o=new Ax(e.droppable.containers);return o.set(r,{...i,disabled:a}),{...e,droppable:{...e.droppable,containers:o}}}case Ps.UnregisterDroppable:{const{id:r,key:s}=t,a=e.droppable.containers.get(r);if(!a||s!==a.key)return e;const i=new Ax(e.droppable.containers);return i.delete(r),{...e,droppable:{...e.droppable,containers:i}}}default:return e}}function qPe(e){let{disabled:t}=e;const{active:r,activatorEvent:s,draggableNodes:a}=p.useContext(z4),i=TM(s),o=TM(r==null?void 0:r.id);return p.useEffect(()=>{if(!t&&!s&&i&&o!=null){if(!mE(i)||document.activeElement===i.target)return;const l=a.get(o);if(!l)return;const{activatorNode:c,node:d}=l;if(!c.current&&!d.current)return;requestAnimationFrame(()=>{for(const u of[c.current,d.current]){if(!u)continue;const f=R5e(u);if(f){f.focus();break}}})}},[s,t,a,o,i]),null}function GPe(e,t){let{transform:r,...s}=t;return e!=null&&e.length?e.reduce((a,i)=>i({transform:a,...s}),r):r}function YPe(e){return p.useMemo(()=>({draggable:{...Pw.draggable,...e==null?void 0:e.draggable},droppable:{...Pw.droppable,...e==null?void 0:e.droppable},dragOverlay:{...Pw.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function QPe(e){let{activeNode:t,measure:r,initialRect:s,config:a=!0}=e;const i=p.useRef(!1),{x:o,y:l}=typeof a=="boolean"?{x:a,y:a}:a;Zl(()=>{if(!o&&!l||!t){i.current=!1;return}if(i.current||!s)return;const d=t==null?void 0:t.node.current;if(!d||d.isConnected===!1)return;const u=r(d),f=yne(u,s);if(o||(f.x=0),l||(f.y=0),i.current=!0,Math.abs(f.x)>0||Math.abs(f.y)>0){const h=vne(d);h&&h.scrollBy({top:f.y,left:f.x})}},[t,o,l,s,r])}const Pne=p.createContext({...gl,scaleX:1,scaleY:1});var Td;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(Td||(Td={}));const KPe=p.memo(function(t){var r,s,a,i;let{id:o,accessibility:l,autoScroll:c=!0,children:d,sensors:u=zPe,collisionDetection:f=X5e,measuring:h,modifiers:m,...g}=t;const x=p.useReducer(WPe,void 0,HPe),[y,v]=x,[b,w]=H5e(),[N,j]=p.useState(Td.Uninitialized),S=N===Td.Initialized,{draggable:{active:C,nodes:k,translate:M},droppable:{containers:A}}=y,P=C!=null?k.get(C):null,T=p.useRef({initial:null,translated:null}),I=p.useMemo(()=>{var Ir;return C!=null?{id:C,data:(Ir=P==null?void 0:P.data)!=null?Ir:BPe,rect:T}:null},[C,P]),L=p.useRef(null),[R,G]=p.useState(null),[$,D]=p.useState(null),W=Ay(g,Object.values(g)),E=C1("DndDescribedBy",o),F=p.useMemo(()=>A.getEnabled(),[A]),B=YPe(h),{droppableRects:Z,measureDroppableContainers:ne,measuringScheduled:Y}=_Pe(F,{dragging:S,dependencies:[M.x,M.y],config:B.droppable}),me=kPe(k,C),pe=p.useMemo(()=>$?AM($):null,[$]),Me=vd(),re=PPe(me,B.draggable.measure);QPe({activeNode:C!=null?k.get(C):null,config:Me.layoutShiftCompensation,initialRect:re,measure:B.draggable.measure});const de=W$(me,B.draggable.measure,re),he=W$(me?me.parentElement:null),ce=p.useRef({activatorEvent:null,active:null,activeNode:me,collisionRect:null,collisions:null,droppableRects:Z,draggableNodes:k,draggingNode:null,draggingNodeRect:null,droppableContainers:A,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Be=A.getNodeFor((r=ce.current.over)==null?void 0:r.id),le=FPe({measure:B.dragOverlay.measure}),$e=(s=le.nodeRef.current)!=null?s:me,et=S?(a=le.rect)!=null?a:de:null,_e=!!(le.nodeRef.current&&le.rect),ot=EPe(_e?null:de),rt=Mne($e?yi($e):null),z=IPe(S?Be??me:null),Se=OPe(z),J=GPe(m,{transform:{x:M.x-ot.x,y:M.y-ot.y,scaleX:1,scaleY:1},activatorEvent:$,active:I,activeNodeRect:de,containerNodeRect:he,draggingNodeRect:et,over:ce.current.over,overlayNodeRect:le.rect,scrollableAncestors:z,scrollableAncestorRects:Se,windowRect:rt}),oe=pe?Hm(pe,M):null,ye=LPe(z),Re=G$(ye),He=G$(ye,[de]),Fe=Hm(J,Re),st=et?nPe(et,J):null,Bt=I&&st?f({active:I,collisionRect:st,droppableRects:Z,droppableContainers:F,pointerCoordinates:oe}):null,En=xne(Bt,"id"),[jn,wi]=p.useState(null),Js=_e?J:Hm(J,He),cc=ePe(Js,(i=jn==null?void 0:jn.rect)!=null?i:null,de),Eo=p.useRef(null),Rs=p.useCallback((Ir,Fs)=>{let{sensor:Zs,options:Xn}=Fs;if(L.current==null)return;const Hn=k.get(L.current);if(!Hn)return;const Ns=Ir.nativeEvent,ti=new Zs({active:L.current,activeNode:Hn,event:Ns,options:Xn,context:ce,onAbort(Xr){if(!k.get(Xr))return;const{onDragAbort:ni}=W.current,ka={id:Xr};ni==null||ni(ka),b({type:"onDragAbort",event:ka})},onPending(Xr,oa,ni,ka){if(!k.get(Xr))return;const{onDragPending:Sl}=W.current,Ce={id:Xr,constraint:oa,initialCoordinates:ni,offset:ka};Sl==null||Sl(Ce),b({type:"onDragPending",event:Ce})},onStart(Xr){const oa=L.current;if(oa==null)return;const ni=k.get(oa);if(!ni)return;const{onDragStart:ka}=W.current,Nl={activatorEvent:Ns,active:{id:oa,data:ni.data,rect:T}};ho.unstable_batchedUpdates(()=>{ka==null||ka(Nl),j(Td.Initializing),v({type:Ps.DragStart,initialCoordinates:Xr,active:oa}),b({type:"onDragStart",event:Nl}),G(Eo.current),D(Ns)})},onMove(Xr){v({type:Ps.DragMove,coordinates:Xr})},onEnd:jl(Ps.DragEnd),onCancel:jl(Ps.DragCancel)});Eo.current=ti;function jl(Xr){return async function(){const{active:ni,collisions:ka,over:Nl,scrollAdjustedTranslate:Sl}=ce.current;let Ce=null;if(ni&&Sl){const{cancelDrop:lt}=W.current;Ce={activatorEvent:Ns,active:ni,collisions:ka,delta:Sl,over:Nl},Xr===Ps.DragEnd&&typeof lt=="function"&&await Promise.resolve(lt(Ce))&&(Xr=Ps.DragCancel)}L.current=null,ho.unstable_batchedUpdates(()=>{v({type:Xr}),j(Td.Uninitialized),wi(null),G(null),D(null),Eo.current=null;const lt=Xr===Ps.DragEnd?"onDragEnd":"onDragCancel";if(Ce){const sn=W.current[lt];sn==null||sn(Ce),b({type:lt,event:Ce})}})}}},[k]),dc=p.useCallback((Ir,Fs)=>(Zs,Xn)=>{const Hn=Zs.nativeEvent,Ns=k.get(Xn);if(L.current!==null||!Ns||Hn.dndKit||Hn.defaultPrevented)return;const ti={active:Ns};Ir(Zs,Fs.options,ti)===!0&&(Hn.dndKit={capturedBy:Fs.sensor},L.current=Xn,Rs(Zs,Fs))},[k,Rs]),Ji=MPe(u,dc);DPe(u),Zl(()=>{de&&N===Td.Initializing&&j(Td.Initialized)},[de,N]),p.useEffect(()=>{const{onDragMove:Ir}=W.current,{active:Fs,activatorEvent:Zs,collisions:Xn,over:Hn}=ce.current;if(!Fs||!Zs)return;const Ns={active:Fs,activatorEvent:Zs,collisions:Xn,delta:{x:Fe.x,y:Fe.y},over:Hn};ho.unstable_batchedUpdates(()=>{Ir==null||Ir(Ns),b({type:"onDragMove",event:Ns})})},[Fe.x,Fe.y]),p.useEffect(()=>{const{active:Ir,activatorEvent:Fs,collisions:Zs,droppableContainers:Xn,scrollAdjustedTranslate:Hn}=ce.current;if(!Ir||L.current==null||!Fs||!Hn)return;const{onDragOver:Ns}=W.current,ti=Xn.get(En),jl=ti&&ti.rect.current?{id:ti.id,rect:ti.rect.current,data:ti.data,disabled:ti.disabled}:null,Xr={active:Ir,activatorEvent:Fs,collisions:Zs,delta:{x:Hn.x,y:Hn.y},over:jl};ho.unstable_batchedUpdates(()=>{wi(jl),Ns==null||Ns(Xr),b({type:"onDragOver",event:Xr})})},[En]),Zl(()=>{ce.current={activatorEvent:$,active:I,activeNode:me,collisionRect:st,collisions:Bt,droppableRects:Z,draggableNodes:k,draggingNode:$e,draggingNodeRect:et,droppableContainers:A,over:jn,scrollableAncestors:z,scrollAdjustedTranslate:Fe},T.current={initial:et,translated:st}},[I,me,Bt,st,k,$e,et,Z,A,jn,z,Fe]),NPe({...Me,delta:M,draggingRect:st,pointerCoordinates:oe,scrollableAncestors:z,scrollableAncestorRects:Se});const xd=p.useMemo(()=>({active:I,activeNode:me,activeNodeRect:de,activatorEvent:$,collisions:Bt,containerNodeRect:he,dragOverlay:le,draggableNodes:k,droppableContainers:A,droppableRects:Z,over:jn,measureDroppableContainers:ne,scrollableAncestors:z,scrollableAncestorRects:Se,measuringConfiguration:B,measuringScheduled:Y,windowRect:rt}),[I,me,de,$,Bt,he,le,k,A,Z,jn,ne,z,Se,B,Y,rt]),yd=p.useMemo(()=>({activatorEvent:$,activators:Ji,active:I,activeNodeRect:de,ariaDescribedById:{draggable:E},dispatch:v,draggableNodes:k,over:jn,measureDroppableContainers:ne}),[$,Ji,I,de,v,E,k,jn,ne]);return Q.createElement(mne.Provider,{value:w},Q.createElement(z4.Provider,{value:yd},Q.createElement(_ne.Provider,{value:xd},Q.createElement(Pne.Provider,{value:cc},d)),Q.createElement(qPe,{disabled:(l==null?void 0:l.restoreFocus)===!1})),Q.createElement(G5e,{...l,hiddenTextDescribedById:E}));function vd(){const Ir=(R==null?void 0:R.autoScrollEnabled)===!1,Fs=typeof c=="object"?c.enabled===!1:c===!1,Zs=S&&!Ir&&!Fs;return typeof c=="object"?{...c,enabled:Zs}:{enabled:Zs}}}),JPe=p.createContext(null),Q$="button",ZPe="Draggable";function XPe(e){let{id:t,data:r,disabled:s=!1,attributes:a}=e;const i=C1(ZPe),{activators:o,activatorEvent:l,active:c,activeNodeRect:d,ariaDescribedById:u,draggableNodes:f,over:h}=p.useContext(z4),{role:m=Q$,roleDescription:g="draggable",tabIndex:x=0}=a??{},y=(c==null?void 0:c.id)===t,v=p.useContext(y?Pne:JPe),[b,w]=Hj(),[N,j]=Hj(),S=$Pe(o,t),C=Ay(r);Zl(()=>(f.set(t,{id:t,key:i,node:b,activatorNode:N,data:C}),()=>{const M=f.get(t);M&&M.key===i&&f.delete(t)}),[f,t]);const k=p.useMemo(()=>({role:m,tabIndex:x,"aria-disabled":s,"aria-pressed":y&&m===Q$?!0:void 0,"aria-roledescription":g,"aria-describedby":u.draggable}),[s,m,x,y,g,u.draggable]);return{active:c,activatorEvent:l,activeNodeRect:d,attributes:k,isDragging:y,listeners:s?void 0:S,node:b,over:h,setNodeRef:w,setActivatorNodeRef:j,transform:v}}function eTe(){return p.useContext(_ne)}const tTe="Droppable",nTe={timeout:25};function rTe(e){let{data:t,disabled:r=!1,id:s,resizeObserverConfig:a}=e;const i=C1(tTe),{active:o,dispatch:l,over:c,measureDroppableContainers:d}=p.useContext(z4),u=p.useRef({disabled:r}),f=p.useRef(!1),h=p.useRef(null),m=p.useRef(null),{disabled:g,updateMeasurementsFor:x,timeout:y}={...nTe,...a},v=Ay(x??s),b=p.useCallback(()=>{if(!f.current){f.current=!0;return}m.current!=null&&clearTimeout(m.current),m.current=setTimeout(()=>{d(Array.isArray(v.current)?v.current:[v.current]),m.current=null},y)},[y]),w=F4({callback:b,disabled:g||!o}),N=p.useCallback((k,M)=>{w&&(M&&(w.unobserve(M),f.current=!1),k&&w.observe(k))},[w]),[j,S]=Hj(N),C=Ay(t);return p.useEffect(()=>{!w||!j.current||(w.disconnect(),f.current=!1,w.observe(j.current))},[j,w]),p.useEffect(()=>(l({type:Ps.RegisterDroppable,element:{id:s,key:i,disabled:r,node:j,rect:h,data:C}}),()=>l({type:Ps.UnregisterDroppable,key:i,id:s})),[s]),p.useEffect(()=>{r!==u.current.disabled&&(l({type:Ps.SetDroppableDisabled,id:s,key:i,disabled:r}),u.current.disabled=r)},[s,i,r,l]),{active:o,rect:h,isOver:(c==null?void 0:c.id)===s,node:j,over:c,setNodeRef:S}}function vE(e,t,r){const s=e.slice();return s.splice(r<0?s.length+r:r,0,s.splice(t,1)[0]),s}function sTe(e,t){return e.reduce((r,s,a)=>{const i=t.get(s);return i&&(r[a]=i),r},Array(e.length))}function Pb(e){return e!==null&&e>=0}function aTe(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function iTe(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const Tne=e=>{let{rects:t,activeIndex:r,overIndex:s,index:a}=e;const i=vE(t,s,r),o=t[a],l=i[a];return!l||!o?null:{x:l.left-o.left,y:l.top-o.top,scaleX:l.width/o.width,scaleY:l.height/o.height}},Tb={scaleX:1,scaleY:1},oTe=e=>{var t;let{activeIndex:r,activeNodeRect:s,index:a,rects:i,overIndex:o}=e;const l=(t=i[r])!=null?t:s;if(!l)return null;if(a===r){const d=i[o];return d?{x:0,y:r<o?d.top+d.height-(l.top+l.height):d.top-l.top,...Tb}:null}const c=lTe(i,a,r);return a>r&&a<=o?{x:0,y:-l.height-c,...Tb}:a<r&&a>=o?{x:0,y:l.height+c,...Tb}:{x:0,y:0,...Tb}};function lTe(e,t,r){const s=e[t],a=e[t-1],i=e[t+1];return s?r<t?a?s.top-(a.top+a.height):i?i.top-(s.top+s.height):0:i?i.top-(s.top+s.height):a?s.top-(a.top+a.height):0:0}const Ane="Sortable",Ene=Q.createContext({activeIndex:-1,containerId:Ane,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Tne,disabled:{draggable:!1,droppable:!1}});function cTe(e){let{children:t,id:r,items:s,strategy:a=Tne,disabled:i=!1}=e;const{active:o,dragOverlay:l,droppableRects:c,over:d,measureDroppableContainers:u}=eTe(),f=C1(Ane,r),h=l.rect!==null,m=p.useMemo(()=>s.map(S=>typeof S=="object"&&"id"in S?S.id:S),[s]),g=o!=null,x=o?m.indexOf(o.id):-1,y=d?m.indexOf(d.id):-1,v=p.useRef(m),b=!aTe(m,v.current),w=y!==-1&&x===-1||b,N=iTe(i);Zl(()=>{b&&g&&u(m)},[b,m,g,u]),p.useEffect(()=>{v.current=m},[m]);const j=p.useMemo(()=>({activeIndex:x,containerId:f,disabled:N,disableTransforms:w,items:m,overIndex:y,useDragOverlay:h,sortedRects:sTe(m,c),strategy:a}),[x,f,N.draggable,N.droppable,w,m,y,c,h,a]);return Q.createElement(Ene.Provider,{value:j},t)}const dTe=e=>{let{id:t,items:r,activeIndex:s,overIndex:a}=e;return vE(r,s,a).indexOf(t)},uTe=e=>{let{containerId:t,isSorting:r,wasDragging:s,index:a,items:i,newIndex:o,previousItems:l,previousContainerId:c,transition:d}=e;return!d||!s||l!==i&&a===o?!1:r?!0:o!==a&&t===c},fTe={duration:200,easing:"ease"},Ine="transform",hTe=Iy.Transition.toString({property:Ine,duration:0,easing:"linear"}),mTe={roleDescription:"sortable"};function pTe(e){let{disabled:t,index:r,node:s,rect:a}=e;const[i,o]=p.useState(null),l=p.useRef(r);return Zl(()=>{if(!t&&r!==l.current&&s.current){const c=a.current;if(c){const d=Z0(s.current,{ignoreTransform:!0}),u={x:c.left-d.left,y:c.top-d.top,scaleX:c.width/d.width,scaleY:c.height/d.height};(u.x||u.y)&&o(u)}}r!==l.current&&(l.current=r)},[t,r,s,a]),p.useEffect(()=>{i&&o(null)},[i]),i}function gTe(e){let{animateLayoutChanges:t=uTe,attributes:r,disabled:s,data:a,getNewIndex:i=dTe,id:o,strategy:l,resizeObserverConfig:c,transition:d=fTe}=e;const{items:u,containerId:f,activeIndex:h,disabled:m,disableTransforms:g,sortedRects:x,overIndex:y,useDragOverlay:v,strategy:b}=p.useContext(Ene),w=xTe(s,m),N=u.indexOf(o),j=p.useMemo(()=>({sortable:{containerId:f,index:N,items:u},...a}),[f,a,N,u]),S=p.useMemo(()=>u.slice(u.indexOf(o)),[u,o]),{rect:C,node:k,isOver:M,setNodeRef:A}=rTe({id:o,data:j,disabled:w.droppable,resizeObserverConfig:{updateMeasurementsFor:S,...c}}),{active:P,activatorEvent:T,activeNodeRect:I,attributes:L,setNodeRef:R,listeners:G,isDragging:$,over:D,setActivatorNodeRef:W,transform:E}=XPe({id:o,data:j,attributes:{...mTe,...r},disabled:w.draggable}),F=L5e(A,R),B=!!P,Z=B&&!g&&Pb(h)&&Pb(y),ne=!v&&$,Y=ne&&Z?E:null,pe=Z?Y??(l??b)({rects:x,activeNodeRect:I,activeIndex:h,overIndex:y,index:N}):null,Me=Pb(h)&&Pb(y)?i({id:o,items:u,activeIndex:h,overIndex:y}):N,re=P==null?void 0:P.id,de=p.useRef({activeId:re,items:u,newIndex:Me,containerId:f}),he=u!==de.current.items,ce=t({active:P,containerId:f,isDragging:$,isSorting:B,id:o,index:N,items:u,newIndex:de.current.newIndex,previousItems:de.current.items,previousContainerId:de.current.containerId,transition:d,wasDragging:de.current.activeId!=null}),Be=pTe({disabled:!ce,index:N,node:k,rect:C});return p.useEffect(()=>{B&&de.current.newIndex!==Me&&(de.current.newIndex=Me),f!==de.current.containerId&&(de.current.containerId=f),u!==de.current.items&&(de.current.items=u)},[B,Me,f,u]),p.useEffect(()=>{if(re===de.current.activeId)return;if(re!=null&&de.current.activeId==null){de.current.activeId=re;return}const $e=setTimeout(()=>{de.current.activeId=re},50);return()=>clearTimeout($e)},[re]),{active:P,activeIndex:h,attributes:L,data:j,rect:C,index:N,newIndex:Me,items:u,isOver:M,isSorting:B,isDragging:$,listeners:G,node:k,overIndex:y,over:D,setNodeRef:F,setActivatorNodeRef:W,setDroppableNodeRef:A,setDraggableNodeRef:R,transform:Be??pe,transition:le()};function le(){if(Be||he&&de.current.newIndex===N)return hTe;if(!(ne&&!mE(T)||!d)&&(B||ce))return Iy.Transition.toString({...d,property:Ine})}}function xTe(e,t){var r,s;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(r=e==null?void 0:e.draggable)!=null?r:t.draggable,droppable:(s=e==null?void 0:e.droppable)!=null?s:t.droppable}}function Gj(e){if(!e)return!1;const t=e.data.current;return!!(t&&"sortable"in t&&typeof t.sortable=="object"&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable)}const yTe=[_n.Down,_n.Right,_n.Up,_n.Left],vTe=(e,t)=>{let{context:{active:r,collisionRect:s,droppableRects:a,droppableContainers:i,over:o,scrollableAncestors:l}}=t;if(yTe.includes(e.code)){if(e.preventDefault(),!r||!s)return;const c=[];i.getEnabled().forEach(f=>{if(!f||f!=null&&f.disabled)return;const h=a.get(f.id);if(h)switch(e.code){case _n.Down:s.top<h.top&&c.push(f);break;case _n.Up:s.top>h.top&&c.push(f);break;case _n.Left:s.left>h.left&&c.push(f);break;case _n.Right:s.left<h.left&&c.push(f);break}});const d=J5e({collisionRect:s,droppableRects:a,droppableContainers:c});let u=xne(d,"id");if(u===(o==null?void 0:o.id)&&d.length>1&&(u=d[1].id),u!=null){const f=i.get(r.id),h=i.get(u),m=h?a.get(h.id):null,g=h==null?void 0:h.node.current;if(g&&m&&f&&h){const y=R4(g).some((S,C)=>l[C]!==S),v=Lne(f,h),b=bTe(f,h),w=y||!v?{x:0,y:0}:{x:b?s.width-m.width:0,y:b?s.height-m.height:0},N={x:m.left,y:m.top};return w.x&&w.y?N:Ey(N,w)}}}};function Lne(e,t){return!Gj(e)||!Gj(t)?!1:e.data.current.sortable.containerId===t.data.current.sortable.containerId}function bTe(e,t){return!Gj(e)||!Gj(t)||!Lne(e,t)?!1:e.data.current.sortable.index<t.data.current.sortable.index}function wTe({id:e,children:t,isEditMode:r}){const{attributes:s,listeners:a,setNodeRef:i,transform:o,transition:l,isDragging:c}=gTe({id:e,disabled:!r}),d={transform:Iy.Transform.toString(o),transition:l,opacity:c?.5:1};return n.jsxs("div",{ref:i,style:d,className:"relative group",children:[r&&n.jsx("div",{...s,...a,className:"absolute -left-10 top-1/2 -translate-y-1/2 cursor-grab active:cursor-grabbing z-10 opacity-0 group-hover:opacity-100 transition-opacity bg-blue-500/20 backdrop-blur-sm rounded p-2 border border-blue-400/50","data-testid":`drag-handle-${e}`,children:n.jsx(iQ,{className:"h-5 w-5 text-blue-400"})}),t]})}function jTe({widgets:e,onReorder:t,isEditMode:r,children:s}){const[a,i]=p.useState(e),o=Y5e(O$(yE,{activationConstraint:{distance:8}}),O$(gE,{coordinateGetter:vTe}));p.useEffect(()=>{i(e)},[e]);const l=d=>{const{active:u,over:f}=d;if(f&&u.id!==f.id){const h=a.findIndex(x=>x.id===u.id),m=a.findIndex(x=>x.id===f.id),g=vE(a,h,m).map((x,y)=>({...x,order:y}));i(g),t(g)}},c=a.filter(d=>d.visible).sort((d,u)=>d.order-u.order);return n.jsx(KPe,{sensors:o,collisionDetection:K5e,onDragEnd:l,children:n.jsx(cTe,{items:c.map(d=>d.id),strategy:oTe,children:n.jsxs("div",{className:"space-y-6 relative","data-testid":"dashboard-grid",children:[r&&n.jsx(q.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-blue-500/20 backdrop-blur-sm border border-blue-400/50 rounded-lg p-4 mb-4","data-testid":"edit-mode-banner",children:n.jsxs("p",{className:"text-blue-100 text-sm",children:[n.jsx("strong",{children:"Edit Mode:"}),' Drag the grip icons to rearrange your widgets. Click "Done" when finished.']})}),c.map(d=>n.jsx(wTe,{id:d.id,isEditMode:r,children:s(d)},d.id))]})})})}const DM=[{id:"monthly-stats",position:{x:0,y:0},size:{width:12,height:1},visible:!0,order:0},{id:"calendar",position:{x:0,y:1},size:{width:8,height:6},visible:!0,order:1},{id:"daily-insights",position:{x:8,y:1},size:{width:4,height:3},visible:!0,order:2},{id:"quick-actions",position:{x:8,y:4},size:{width:4,height:3},visible:!0,order:3},{id:"schedule",position:{x:0,y:7},size:{width:8,height:4},visible:!0,order:4},{id:"cash-collections",position:{x:8,y:7},size:{width:4,height:2},visible:!0,order:5},{id:"deposit-history",position:{x:8,y:9},size:{width:4,height:2},visible:!0,order:6}];function NTe(e,t=DM){if(!e||e.length===0)return t;const r=new Map(e.map(a=>[a.id,a])),s=[];return t.forEach(a=>{const i=r.get(a.id);i?s.push(i):s.push(a)}),s}function Dne(){const[e,t]=zt(),{toast:r}=Ee(),{data:s}=be({queryKey:["/api/users/me"]}),a=s==null?void 0:s.user,[i,o]=p.useState(!1),[l,c]=p.useState(DM),{data:d}=be({queryKey:["/api/dashboard/layout"]}),u=je({mutationFn:async _e=>await Ne("POST","/api/dashboard/layout",{layout:_e,layoutVersion:1}),onSuccess:()=>{r({title:"Layout saved",description:"Your dashboard layout has been saved successfully."}),ze.invalidateQueries({queryKey:["/api/dashboard/layout"]})},onError:_e=>{r({title:"Error saving layout",description:_e.message||"Failed to save dashboard layout",variant:"destructive"})}});p.useEffect(()=>{var _e;if(d!=null&&d.layout){const ot=NTe((_e=d.layout.layout)==null?void 0:_e.widgets,DM);c(ot)}},[d]);const{shouldShowTour:f,setShouldShowTour:h,markTourCompleted:m}=A5e({initialHasSeenTour:(a==null?void 0:a.hasSeenDashboardTour)??!1,userId:a==null?void 0:a.id}),[g,x]=p.useState(new Date),[y,v]=p.useState(new Date),{data:b,isLoading:w}=be({queryKey:["/api/dashboard/today",g.toISOString()],queryFn:async()=>await(await fetch(`/api/dashboard/today?date=${g.toISOString()}`)).json()}),{data:N,isLoading:j}=be({queryKey:["/api/dashboard/appointment-counts",y.getFullYear(),y.getMonth()+1],queryFn:async()=>{const _e=y.getFullYear(),ot=y.getMonth()+1;return await(await fetch(`/api/dashboard/appointment-counts?year=${_e}&month=${ot}`)).json()}}),{data:S,isLoading:C}=be({queryKey:["/api/dashboard/weather"],queryFn:async()=>await(await fetch("/api/dashboard/weather?days=14")).json()}),k=w||j||C,M=(b==null?void 0:b.appointments)||[],A=(N==null?void 0:N.counts)||{},P=(S==null?void 0:S.weather)||{},[T,I]=p.useState(!1),[L,R]=p.useState(null),[G,$]=p.useState(!1),[D,W]=p.useState(!1),[E,F]=p.useState(null),[B]=p.useState({taxRate:0,taxEnabled:!1,autoFillEmail:!0}),Z={customers:"/customer-database",messages:"/messages",gallery:"/gallery",analytics:"/analytics",technician:"/technician",security:"/security-settings",settings:"/settings",notifications:"/settings",agent:"/settings","business-settings":"/settings",upsell:"/settings",loyalty:"/settings","recurring-services":"/settings","cancellation-feedback":"/settings","email-campaigns":"/settings",subscriptions:"/settings"};p.useEffect(()=>{if(typeof window<"u"){const ot=new URLSearchParams(window.location.search).get("tab");ot&&Z[ot]&&t(Z[ot])}},[e]);const ne=(_e,ot)=>{t(`/directions?address=${encodeURIComponent(_e)}&phone=${encodeURIComponent(ot)}`)},Y=_e=>{t(`/service-history?phone=${encodeURIComponent(_e)}`)},me=_e=>{window.open(`tel:${_e}`)},pe=(_e,ot)=>{F({phone:_e,name:ot}),W(!0)},Me=async _e=>{let ot="";if(B.autoFillEmail)try{const oe=await fetch(`/api/enhanced/customers/${encodeURIComponent(_e.phone)}`);if(oe.ok){const ye=await oe.json();ye.success&&ye.customer&&ye.customer.email&&(ot=ye.customer.email)}}catch(oe){console.error("Error fetching customer email:",oe)}const z=(oe=>{if(!oe)return 150;const ye=oe.match(/\$?(\d+)/);return ye&&ye[1]?parseFloat(ye[1]):150})(_e.price),Se=B.taxEnabled?Math.round(z*B.taxRate*100)/100:0,J=z+Se;R({customerName:_e.customerName,customerEmail:ot,phone:_e.phone,address:_e.address,vehicleInfo:_e.vehicleInfo||"",serviceDate:new Date().toLocaleDateString(),items:[{service:_e.service,price:z,quantity:1}],subtotal:z,tax:Se,total:J,notes:"Thank you for choosing Clean Machine Auto Detail!",includeReviewLink:!0}),$(!1),I(!0)},re=()=>{const ot=B.taxEnabled?Math.round(150*B.taxRate*100)/100:0,rt=150+ot;R({customerName:"",customerEmail:"",phone:"",address:"",vehicleInfo:"",serviceDate:new Date().toLocaleDateString(),items:[{service:"Service",price:150,quantity:1}],subtotal:150,tax:ot,total:rt,notes:"Thank you for choosing Clean Machine Auto Detail!",includeReviewLink:!0}),$(!0),I(!0)},de=()=>L?L.customerName.trim()?L.phone.trim()?L.phone.replace(/\D/g,"").length<10?(r({title:"Invalid Phone",description:"Please enter a valid phone number (at least 10 digits)",variant:"destructive"}),!1):!L.items[0].service||L.items[0].service==="Service"?(r({title:"Missing Information",description:"Service description is required",variant:"destructive"}),!1):L.total<=0?(r({title:"Invalid Amount",description:"Invoice amount must be greater than $0",variant:"destructive"}),!1):!0:(r({title:"Missing Information",description:"Phone number is required",variant:"destructive"}),!1):(r({title:"Missing Information",description:"Customer name is required",variant:"destructive"}),!1):!1,he=_e=>{x(_e)},ce=_e=>{c(_e)},Be=()=>{const _e={widgets:l};u.mutate(_e),o(!1)},le=()=>{i?Be():o(!0)},$e=n.jsxs(n.Fragment,{children:[a&&(a.role==="owner"||a.role==="manager")&&n.jsxs(_,{size:"sm",onClick:re,"data-testid":"button-create-manual-invoice",className:"bg-green-600 hover:bg-green-700 text-white",children:[n.jsx(Un,{className:"h-4 w-4 mr-2"}),"Walk-in Invoice"]}),n.jsxs(_,{size:"sm",variant:"ghost",onClick:()=>t("/"),"data-testid":"button-home",children:[n.jsx(D6,{className:"h-4 w-4 mr-2"}),"Home"]})]}),et=n.jsx(_,{size:"sm",variant:i?"default":"ghost",onClick:le,"data-testid":"button-toggle-edit-mode",className:`w-full justify-start ${i?"bg-blue-600 hover:bg-blue-700 text-white":""}`,children:i?n.jsxs(n.Fragment,{children:[n.jsx(fr,{className:"h-4 w-4 mr-2"}),"Save Layout"]}):n.jsxs(n.Fragment,{children:[n.jsx(ige,{className:"h-4 w-4 mr-2"}),"Customize Dashboard"]})});return n.jsxs(n.Fragment,{children:[n.jsx(T5e,{}),n.jsx(dE,{}),n.jsx(xn,{title:"Dashboard",pageActions:$e,sidebarActions:et,children:n.jsx("div",{"data-tour-id":"main-dashboard-root",children:k?n.jsxs("div",{className:"space-y-4 p-6",children:[n.jsx(O,{className:"backdrop-blur-xl bg-white/10 dark:bg-white/5 border border-white/20 shadow-xl",children:n.jsx("div",{className:"py-4 px-6",children:n.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-3 sm:gap-4",children:[...Array(6)].map((_e,ot)=>n.jsxs("div",{className:"text-center space-y-2",children:[n.jsx(Lt,{className:"h-8 w-16 mx-auto bg-white/20"}),n.jsx(Lt,{className:"h-3 w-20 mx-auto bg-white/20"})]},ot))})})}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[n.jsx(Lt,{className:"h-[500px] rounded-xl bg-white/10"}),n.jsx(Lt,{className:"h-[300px] rounded-xl bg-white/10"})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx(Lt,{className:"h-[250px] rounded-xl bg-white/10"}),n.jsx(Lt,{className:"h-[250px] rounded-xl bg-white/10"})]})]})]}):n.jsx(jTe,{widgets:l,onReorder:ce,isEditMode:i,children:_e=>_e.id==="monthly-stats"?n.jsx(X_e,{appointments:M,appointmentCounts:A}):_e.id==="calendar"?n.jsx(v5e,{todayDate:g,currentMonth:y,appointmentCounts:A,weatherData:P,onDateChange:he,onMonthChange:v}):_e.id==="schedule"?n.jsx(b5e,{appointments:M,todayDate:g,onCall:me,onChat:pe,onNavigate:ne,onViewHistory:Y,onSendInvoice:Me}):_e.id==="daily-insights"?n.jsx(w5e,{appointments:M,todayDate:g}):_e.id==="quick-actions"?n.jsx(j5e,{}):_e.id==="cash-collections"&&a&&(a.role==="owner"||a.role==="manager")?n.jsx(_5e,{}):_e.id==="deposit-history"&&a&&(a.role==="owner"||a.role==="manager")?n.jsx(P5e,{}):null})})}),n.jsx(At,{open:T,onOpenChange:I,children:n.jsxs(_t,{className:"max-w-3xl max-h-[85vh] overflow-y-auto bg-white dark:bg-gray-900",children:[n.jsxs($t,{children:[n.jsx(Et,{className:"text-2xl text-blue-800 dark:text-blue-200",children:G?"Create Walk-in Invoice":"Send Invoice & Thank You Message"}),n.jsx(an,{className:"text-blue-600 dark:text-blue-400",children:G?"Enter customer information and service details for walk-in customer":"Send an invoice and thank you message to your customer via SMS and email"})]}),L&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsxs(U,{htmlFor:"customerName",className:"text-blue-700 dark:text-blue-300",children:["Customer Name ",G&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(se,{id:"customerName","data-testid":"input-manual-customer-name",value:L.customerName,onChange:_e=>R({...L,customerName:_e.target.value}),className:"border-blue-200",placeholder:G?"John Doe":""})]}),n.jsxs("div",{children:[n.jsxs(U,{htmlFor:"phone",className:"text-blue-700 dark:text-blue-300",children:["Phone ",G&&n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(se,{id:"phone","data-testid":"input-manual-customer-phone",value:L.phone,onChange:_e=>R({...L,phone:_e.target.value}),className:"border-blue-200",placeholder:G?"555-0100":""})]})]}),n.jsxs("div",{children:[n.jsx(U,{htmlFor:"email",className:"text-blue-700 dark:text-blue-300",children:"Email (Optional)"}),n.jsx(se,{id:"email","data-testid":"input-manual-customer-email",type:"email",value:L.customerEmail,onChange:_e=>R({...L,customerEmail:_e.target.value}),placeholder:"customer@email.com",className:"border-blue-200"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(U,{className:"text-blue-700 dark:text-blue-300",children:"Service Details"}),G?n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsxs(U,{htmlFor:"serviceName",className:"text-sm",children:["Service Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(se,{id:"serviceName","data-testid":"input-manual-service-name",value:L.items[0].service,onChange:_e=>{const ot=[...L.items];ot[0].service=_e.target.value,R({...L,items:ot})},placeholder:"Full Detail, Interior Clean, etc.",className:"border-blue-200"})]}),n.jsxs("div",{children:[n.jsxs(U,{htmlFor:"servicePrice",className:"text-sm",children:["Amount ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("div",{className:"relative",children:[n.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:"$"}),n.jsx(se,{id:"servicePrice","data-testid":"input-manual-service-amount",type:"number",step:"0.01",min:"0",value:L.items[0].price,onChange:_e=>{const ot=parseFloat(_e.target.value)||0,rt=B.taxEnabled?Math.round(ot*B.taxRate*100)/100:0,z=ot+rt,Se=[...L.items];Se[0].price=ot,R({...L,items:Se,subtotal:ot,tax:rt,total:z})},placeholder:"150.00",className:"border-blue-200 pl-7"})]})]}),n.jsx(O,{className:"p-4 bg-blue-50/50 dark:bg-gray-800",children:n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{children:"Subtotal:"}),n.jsxs("span",{children:["$",L.subtotal.toFixed(2)]})]}),L.tax>0&&n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{children:"Tax:"}),n.jsxs("span",{children:["$",L.tax.toFixed(2)]})]}),n.jsxs("div",{className:"flex justify-between font-bold text-lg pt-2 border-t border-blue-200 dark:border-gray-700",children:[n.jsx("span",{children:"Total:"}),n.jsxs("span",{children:["$",L.total.toFixed(2)]})]})]})})]}):n.jsx(O,{className:"p-4 bg-blue-50/50 dark:bg-gray-800",children:n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"font-medium",children:L.items[0].service}),n.jsxs("span",{children:["$",L.items[0].price.toFixed(2)]})]}),n.jsxs("div",{className:"border-t border-blue-200 dark:border-gray-700 pt-2",children:[n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{children:"Subtotal:"}),n.jsxs("span",{children:["$",L.subtotal.toFixed(2)]})]}),L.tax>0&&n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{children:"Tax:"}),n.jsxs("span",{children:["$",L.tax.toFixed(2)]})]}),n.jsxs("div",{className:"flex justify-between font-bold text-lg mt-2 pt-2 border-t border-blue-200 dark:border-gray-700",children:[n.jsx("span",{children:"Total:"}),n.jsxs("span",{children:["$",L.total.toFixed(2)]})]})]})]})})]}),n.jsxs("div",{children:[n.jsx(U,{htmlFor:"notes",className:"text-blue-700 dark:text-blue-300",children:"Thank You Note"}),n.jsx(un,{id:"notes",value:L.notes,onChange:_e=>R({...L,notes:_e.target.value}),className:"w-full rounded-md border border-blue-200 bg-white px-3 py-2 text-sm",placeholder:"Add a thank you note or special instructions..."})]}),n.jsxs("div",{className:"space-y-2 pt-2 border-t border-gray-200 dark:border-gray-700",children:[n.jsx("h3",{className:"text-md font-semibold text-blue-800 dark:text-blue-200",children:"Preview Message"}),n.jsx(O,{className:"bg-blue-50/70 p-4 border-blue-200",children:n.jsxs("p",{className:"text-gray-800",children:['"Thank you ',L.customerName," for choosing Clean Machine Auto Detail for your ",L.items[0].service.toLowerCase(),"! Your total is $",L.total.toFixed(2),". ",L.notes,'"',L.includeReviewLink&&n.jsx("span",{children:" We'd appreciate it if you could leave us a review here: [Google Review Link]"})]})})]})]}),n.jsxs(Sn,{children:[n.jsx(_,{variant:"outline",onClick:()=>I(!1),className:"border-blue-300 dark:border-gray-600 text-blue-700 dark:text-blue-300 hover:bg-blue-100",children:"Cancel"}),n.jsxs(_,{onClick:async()=>{if(!L||G&&!de())return;const _e=["SMS"];L.customerEmail.trim()!==""&&_e.push("email");try{const ot=Math.floor(L.total),rt=await fetch("/api/invoice/award-loyalty-points",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({customerPhone:L.phone,invoiceId:Date.now(),amount:L.total,customerName:L.customerName})}),z=await rt.json();(!rt.ok||!z.success)&&(console.error("Loyalty points award failed:",z),r({title:"Points Award Failed",description:z.message||"Could not award loyalty points. Check Google Sheets setup.",variant:"destructive"}));const Se=await fetch("/api/dashboard/send-invoice",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({customerPhone:L.phone,customerEmail:L.customerEmail,customerName:L.customerName,amount:L.total,service:L.items[0].service,notes:L.notes})}),J=await Se.json();if(Se.ok&&J.success){const oe=z.success?` ${ot} loyalty points awarded!`:" (Note: Loyalty points could not be awarded)";r({title:"Invoice Sent!",description:`${G?"Walk-in invoice":"Thank you message and invoice"} sent to ${L.customerName} via ${_e.join(" and ")}.${oe}`})}else r({title:"Send Failed",description:J.message||"Failed to send invoice",variant:"destructive"})}catch(ot){r({title:"Error",description:"Failed to send invoice. Please try again.",variant:"destructive"}),console.error("Error sending invoice:",ot)}I(!1)},className:"bg-green-600 hover:bg-green-700",disabled:!L,"data-testid":"button-send-invoice",children:[n.jsx(Cr,{className:"mr-2 h-4 w-4"}),G?"Send Walk-in Invoice":"Send Invoice & Thank You"]})]})]})}),n.jsx(At,{open:D,onOpenChange:W,children:n.jsx(_t,{className:"max-w-4xl h-[80vh] p-0",children:E&&n.jsx(Z_e,{customerPhone:E.phone,customerName:E.name,onClose:()=>W(!1)})})}),n.jsx(E5e,{steps:I5e,isOpen:f,onClose:()=>h(!1),onFinish:m})]})}var bE="Tabs",[STe]=ws(bE,[v4]),$ne=v4(),[CTe,wE]=STe(bE),One=p.forwardRef((e,t)=>{const{__scopeTabs:r,value:s,onValueChange:a,defaultValue:i,orientation:o="horizontal",dir:l,activationMode:c="automatic",...d}=e,u=Ch(l),[f,h]=qa({prop:s,onChange:a,defaultProp:i});return n.jsx(CTe,{scope:r,baseId:Gs(),value:f,onValueChange:h,orientation:o,dir:u,activationMode:c,children:n.jsx(ht.div,{dir:u,"data-orientation":o,...d,ref:t})})});One.displayName=bE;var Rne="TabsList",Fne=p.forwardRef((e,t)=>{const{__scopeTabs:r,loop:s=!0,...a}=e,i=wE(Rne,r),o=$ne(r);return n.jsx(ree,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:s,children:n.jsx(ht.div,{role:"tablist","aria-orientation":i.orientation,...a,ref:t})})});Fne.displayName=Rne;var zne="TabsTrigger",Bne=p.forwardRef((e,t)=>{const{__scopeTabs:r,value:s,disabled:a=!1,...i}=e,o=wE(zne,r),l=$ne(r),c=Hne(o.baseId,s),d=Wne(o.baseId,s),u=s===o.value;return n.jsx(see,{asChild:!0,...l,focusable:!a,active:u,children:n.jsx(ht.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":d,"data-state":u?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:c,...i,ref:t,onMouseDown:ut(e.onMouseDown,f=>{!a&&f.button===0&&f.ctrlKey===!1?o.onValueChange(s):f.preventDefault()}),onKeyDown:ut(e.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&o.onValueChange(s)}),onFocus:ut(e.onFocus,()=>{const f=o.activationMode!=="manual";!u&&!a&&f&&o.onValueChange(s)})})})});Bne.displayName=zne;var Une="TabsContent",Vne=p.forwardRef((e,t)=>{const{__scopeTabs:r,value:s,forceMount:a,children:i,...o}=e,l=wE(Une,r),c=Hne(l.baseId,s),d=Wne(l.baseId,s),u=s===l.value,f=p.useRef(u);return p.useEffect(()=>{const h=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(h)},[]),n.jsx(Sa,{present:a||u,children:({present:h})=>n.jsx(ht.div,{"data-state":u?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!h,id:d,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:f.current?"0s":void 0},children:h&&i})})});Vne.displayName=Une;function Hne(e,t){return`${e}-trigger-${t}`}function Wne(e,t){return`${e}-content-${t}`}var kTe=One,qne=Fne,Gne=Bne,Yne=Vne;const js=kTe,ds=p.forwardRef(({className:e,...t},r)=>n.jsx(qne,{ref:r,className:Le("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));ds.displayName=qne.displayName;const dt=p.forwardRef(({className:e,...t},r)=>n.jsx(Gne,{ref:r,className:Le("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));dt.displayName=Gne.displayName;const pt=p.forwardRef(({className:e,...t},r)=>n.jsx(Yne,{ref:r,className:Le("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));pt.displayName=Yne.displayName;const MTe=()=>{var x,y;const[e,t]=p.useState(""),[r,s]=p.useState("all"),[a,i]=p.useState(null),o=Cee(e,500),{toast:l}=Ee(),c=be({queryKey:["/api/customers"],queryFn:async()=>{const v=await fetch("/api/customers?limit=50");if(!v.ok)throw new Error("Failed to fetch customers");return(await v.json()).customers},enabled:!o}),d=be({queryKey:["/api/customers/search",o,r],queryFn:async()=>{const v=await fetch(`/api/customers/search?query=${encodeURIComponent(o)}&field=${r}`);if(!v.ok)throw new Error("Failed to search customers");return(await v.json()).results},enabled:o.length>0}),u=be({queryKey:["/api/customers",a==null?void 0:a.phone],queryFn:async()=>{if(!(a!=null&&a.phone))throw new Error("No customer selected");const v=await fetch(`/api/customers/${encodeURIComponent(a.phone)}`);if(!v.ok)throw new Error("Failed to fetch customer details");const b=await v.json();return{customer:b.customer,serviceHistory:b.serviceHistory}},enabled:!!a}),f=o?d.data||[]:c.data||[],h=o?d.isLoading:c.isLoading,m=v=>{i(v)},g=v=>{t(v.target.value)};return n.jsxs("div",{className:"container mx-auto py-6",children:[n.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Customer Database"}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[n.jsx("div",{className:"lg:col-span-1",children:n.jsxs(O,{children:[n.jsxs(ee,{children:[n.jsx(te,{children:"Search Customers"}),n.jsx(ke,{children:"Find customers by name, phone, email, or vehicle details"})]}),n.jsx(H,{children:n.jsxs("div",{className:"flex flex-col space-y-4",children:[n.jsxs("div",{className:"flex space-x-2",children:[n.jsx(se,{placeholder:"Search customers...",value:e,onChange:g,className:"flex-1"}),n.jsxs(Pt,{value:r,onValueChange:s,children:[n.jsx(kt,{className:"w-[180px]",children:n.jsx(Tt,{placeholder:"Search in..."})}),n.jsxs(Mt,{children:[n.jsx(ve,{value:"all",children:"All Fields"}),n.jsx(ve,{value:"name",children:"Name"}),n.jsx(ve,{value:"phone",children:"Phone"}),n.jsx(ve,{value:"email",children:"Email"}),n.jsx(ve,{value:"vehicle",children:"Vehicle"}),n.jsx(ve,{value:"address",children:"Address"}),n.jsx(ve,{value:"service",children:"Service"})]})]})]}),n.jsxs("div",{className:"border rounded-md",children:[n.jsxs("div",{className:"p-3 bg-muted font-medium",children:["Results (",h?"...":f.length,")"]}),n.jsx("div",{className:"max-h-[400px] overflow-y-auto",children:h?n.jsx("div",{className:"p-4 space-y-3",children:[1,2,3].map(v=>n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx(Lt,{className:"h-12 w-12 rounded-full"}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(Lt,{className:"h-4 w-[200px]"}),n.jsx(Lt,{className:"h-4 w-[160px]"})]})]},v))}):f.length===0?n.jsx("div",{className:"p-4 text-center text-muted-foreground",children:o?"No customers found matching your search.":"No customers in database."}):n.jsx("div",{className:"divide-y",children:f.map(v=>n.jsxs("div",{className:`p-3 cursor-pointer hover:bg-muted transition-colors ${(a==null?void 0:a.phone)===v.phone?"bg-muted":""}`,onClick:()=>m(v),children:[n.jsx("div",{className:"font-medium",children:v.name||"Unnamed Customer"}),n.jsxs("div",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[n.jsx(bt,{className:"h-3 w-3"}),v.phone||"No phone"]}),v.vehicleInfo&&n.jsxs("div",{className:"text-sm text-muted-foreground flex items-center gap-1 mt-1",children:[n.jsx(Ys,{className:"h-3 w-3"}),v.vehicleInfo]})]},v.id||v.phone))})})]})]})})]})}),n.jsx("div",{className:"lg:col-span-2",children:a?n.jsxs(O,{children:[n.jsx(ee,{children:n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{children:[n.jsx(te,{children:a.name||"Unnamed Customer"}),n.jsxs(ke,{children:["Customer ID: ",a.id||"N/A"]})]}),n.jsx("div",{className:"flex gap-2",children:n.jsxs(_,{variant:"outline",size:"sm",onClick:()=>{a.phone&&(navigator.clipboard.writeText(a.phone),l({title:"Phone copied to clipboard",description:a.phone}))},children:[n.jsx(bt,{className:"h-4 w-4 mr-2"}),"Copy Phone"]})})]})}),n.jsx(H,{children:n.jsxs(js,{defaultValue:"details",children:[n.jsxs(ds,{className:"mb-4",children:[n.jsx(dt,{value:"details",children:"Customer Details"}),n.jsx(dt,{value:"history",children:"Service History"}),a.photoFolder&&n.jsx(dt,{value:"photos",children:"Photos"})]}),n.jsxs(pt,{value:"details",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx("div",{className:"font-medium",children:"Contact Information"}),n.jsxs("div",{className:"grid grid-cols-[20px_1fr] gap-2 items-center",children:[n.jsx(bt,{className:"h-4 w-4"}),n.jsx("div",{children:a.phone||"No phone"})]}),n.jsxs("div",{className:"grid grid-cols-[20px_1fr] gap-2 items-center",children:[n.jsx(Cr,{className:"h-4 w-4"}),n.jsx("div",{children:a.email||"No email"})]}),n.jsxs("div",{className:"grid grid-cols-[20px_1fr] gap-2 items-start",children:[n.jsx(zr,{className:"h-4 w-4 mt-1"}),n.jsx("div",{children:a.address||"No address"})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("div",{className:"font-medium",children:"Vehicle Information"}),n.jsxs("div",{className:"grid grid-cols-[20px_1fr] gap-2 items-center",children:[n.jsx(Ys,{className:"h-4 w-4"}),n.jsx("div",{children:a.vehicleInfo||"No vehicle information"})]}),n.jsx("div",{className:"mt-4 font-medium",children:"Condition Notes"}),n.jsx("div",{className:"bg-muted p-2 rounded-md",children:a.vehicleCondition||"No condition notes"})]})]}),n.jsxs("div",{className:"mt-6",children:[n.jsx("div",{className:"font-medium mb-2",children:"Service Preferences"}),n.jsxs("div",{className:"bg-muted p-3 rounded-md",children:[n.jsxs("div",{className:"mb-2",children:[n.jsx("span",{className:"font-medium",children:"Selected Services:"})," ",a.selectedServices||"None"]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"Add-on Services:"})," ",a.selectedAddOns||"None"]})]})]}),a.notes&&n.jsxs("div",{className:"mt-6",children:[n.jsx("div",{className:"font-medium mb-2",children:"Notes"}),n.jsx("div",{className:"bg-muted p-3 rounded-md whitespace-pre-line",children:a.notes})]})]}),n.jsx(pt,{value:"history",children:u.isLoading?n.jsxs("div",{className:"space-y-4",children:[n.jsx(Lt,{className:"h-8 w-full"}),n.jsx(Lt,{className:"h-24 w-full"}),n.jsx(Lt,{className:"h-24 w-full"})]}):(x=u.data)!=null&&x.serviceHistory.length?n.jsxs(hs,{children:[n.jsx(ms,{children:n.jsxs(vn,{children:[n.jsx(Ve,{children:"Date"}),n.jsx(Ve,{children:"Service"}),n.jsx(Ve,{children:"Vehicle"})]})}),n.jsx(ps,{children:(y=u.data)==null?void 0:y.serviceHistory.map((v,b)=>n.jsxs(vn,{children:[n.jsx(Ue,{children:v.date||"Unknown date"}),n.jsx(Ue,{children:v.service}),n.jsx(Ue,{children:v.vehicle})]},b))})]}):n.jsxs("div",{className:"text-center p-6 text-muted-foreground",children:[n.jsx(Kc,{className:"mx-auto h-12 w-12 mb-3 opacity-30"}),n.jsx("div",{className:"text-lg font-medium mb-1",children:"No Service History"}),n.jsx("p",{children:"This customer hasn't had any services recorded yet."})]})}),a.photoFolder&&n.jsx(pt,{value:"photos",children:a.photoFolder?n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("div",{className:"font-medium",children:"Customer Photos"}),n.jsx(_,{variant:"outline",size:"sm",onClick:()=>{window.open(a.photoFolder,"_blank")},children:"Open Folder"})]}),n.jsxs("div",{className:"bg-muted p-4 rounded-md text-center",children:[n.jsx("div",{className:"mb-2",children:"Photos are stored in Google Drive"}),n.jsx(_,{onClick:()=>{window.open(a.photoFolder,"_blank")},children:"View Photos in Google Drive"})]})]}):n.jsx("div",{className:"text-center p-6 text-muted-foreground",children:"No photos available for this customer."})})]})}),n.jsx(sl,{className:"flex justify-between",children:n.jsxs("div",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[n.jsx(Dt,{className:"h-4 w-4"}),"Last contact: ",a.lastContact||"Unknown"]})})]}):n.jsx(O,{className:"h-full flex items-center justify-center p-6",children:n.jsxs("div",{className:"text-center text-muted-foreground",children:[n.jsx("div",{className:"text-lg font-medium mb-2",children:"No Customer Selected"}),n.jsx("p",{children:"Select a customer from the list to view their details and service history."})]})})})]})]})},_Te=()=>{var f,h,m,g,x;const{toast:e}=Ee(),[t,r]=p.useState(6),[s,a]=p.useState(!1),i=be({queryKey:["/api/customers/stats"],queryFn:async()=>{try{const y=await fetch("/api/customers");if(!y.ok)throw new Error("Failed to fetch customer data");const b=(await y.json()).customers||[];return{totalCustomers:b.length,repeatCustomers:b.filter(w=>{var N;return((N=w.serviceHistory)==null?void 0:N.length)>1}).length,vehicleTypes:c(b),servicePreferences:d(b),customersByMonth:u(b)}}catch(y){return console.error("Error fetching customer stats:",y),{totalCustomers:0,repeatCustomers:0,vehicleTypes:{},servicePreferences:{},customersByMonth:{}}}}}),o=je({mutationFn:async y=>{const v=await Ne("POST","/api/photos/cleanup",{thresholdMonths:y});if(!v.ok)throw new Error("Failed to clean up photos");return await v.json()},onSuccess:y=>{e({title:"Photo Cleanup Complete",description:`Processed ${y.processedPhotos} photos, deleted ${y.deletedCount} older than ${t} months.`,variant:y.success?"default":"destructive"}),a(!1)},onError:y=>{e({title:"Photo Cleanup Failed",description:y.message,variant:"destructive"})}}),l=()=>{o.mutate(t)};function c(y){const v={};return y.forEach(b=>{if(!b.vehicleInfo)return;const w=b.vehicleInfo.toLowerCase();w.includes("suv")?v.SUV=(v.SUV||0)+1:w.includes("truck")?v.Truck=(v.Truck||0)+1:w.includes("sedan")?v.Sedan=(v.Sedan||0)+1:w.includes("coupe")?v.Coupe=(v.Coupe||0)+1:v.Other=(v.Other||0)+1}),v}function d(y){const v={};return y.forEach(b=>{if(!b.selectedServices)return;const w=b.selectedServices.toLowerCase();w.includes("full detail")?v["Full Detail"]=(v["Full Detail"]||0)+1:w.includes("interior")?v["Interior Only"]=(v["Interior Only"]||0)+1:w.includes("exterior")?v["Exterior Only"]=(v["Exterior Only"]||0)+1:w.includes("express")?v["Express Wash"]=(v["Express Wash"]||0)+1:v["Other Services"]=(v["Other Services"]||0)+1}),v}function u(y){const v={},b=new Date().getFullYear();return["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].forEach(w=>{v[w]=0}),y.forEach(w=>{if(w.lastContact)try{const N=new Date(w.lastContact);if(N.getFullYear()===b){const j=N.toLocaleString("default",{month:"short"});v[j]=(v[j]||0)+1}}catch{}}),v}return n.jsx(xn,{title:"Customer Database",children:n.jsx("div",{className:"p-6",children:n.jsxs(js,{defaultValue:"search",children:[n.jsxs(ds,{className:"mb-6",children:[n.jsxs(dt,{value:"search",className:"flex items-center",children:[n.jsx(br,{className:"mr-2 h-4 w-4"}),"Customer Search"]}),n.jsxs(dt,{value:"dashboard",className:"flex items-center",children:[n.jsx(nQ,{className:"mr-2 h-4 w-4"}),"Dashboard"]})]}),n.jsx(pt,{value:"search",children:n.jsx(MTe,{})}),n.jsxs(pt,{value:"dashboard",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[n.jsxs(O,{children:[n.jsx(ee,{className:"pb-2",children:n.jsx(te,{className:"text-sm font-medium",children:"Total Customers"})}),n.jsxs(H,{children:[n.jsx("div",{className:"text-3xl font-bold",children:i.isLoading?n.jsx(nt,{className:"h-6 w-6 animate-spin"}):((f=i.data)==null?void 0:f.totalCustomers)||0}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Lifetime customer count"})]})]}),n.jsxs(O,{children:[n.jsx(ee,{className:"pb-2",children:n.jsx(te,{className:"text-sm font-medium",children:"Repeat Customers"})}),n.jsxs(H,{children:[n.jsx("div",{className:"text-3xl font-bold",children:i.isLoading?n.jsx(nt,{className:"h-6 w-6 animate-spin"}):((h=i.data)==null?void 0:h.repeatCustomers)||0}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Customers with multiple services"})]})]}),n.jsxs(O,{children:[n.jsx(ee,{className:"pb-2",children:n.jsx(te,{className:"text-sm font-medium",children:"Most Common Vehicle"})}),n.jsxs(H,{children:[n.jsxs("div",{className:"text-3xl font-bold flex items-center",children:[i.isLoading?n.jsx(nt,{className:"h-6 w-6 animate-spin"}):K$(((m=i.data)==null?void 0:m.vehicleTypes)||{})||"N/A",n.jsx(Ys,{className:"ml-2 h-6 w-6 text-muted-foreground"})]}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Most frequently serviced type"})]})]}),n.jsxs(O,{children:[n.jsx(ee,{className:"pb-2",children:n.jsx(te,{className:"text-sm font-medium",children:"Popular Service"})}),n.jsxs(H,{children:[n.jsx("div",{className:"text-3xl font-bold",children:i.isLoading?n.jsx(nt,{className:"h-6 w-6 animate-spin"}):K$(((g=i.data)==null?void 0:g.servicePreferences)||{})||"N/A"}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Most requested service"})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[n.jsxs(O,{className:"lg:col-span-2",children:[n.jsxs(ee,{children:[n.jsx(te,{children:"Customer Activity"}),n.jsx(ke,{children:"Monthly customer activity for the current year"})]}),n.jsx(H,{children:i.isLoading?n.jsx("div",{className:"h-[300px] flex items-center justify-center",children:n.jsx(nt,{className:"h-8 w-8 animate-spin"})}):n.jsx("div",{className:"h-[300px] flex items-end justify-between",children:Object.entries(((x=i.data)==null?void 0:x.customersByMonth)||{}).map(([y,v])=>{var b;return n.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[n.jsx("div",{className:"w-12 bg-primary rounded-t-md",style:{height:`${Math.max(20,v/(Math.max(...Object.values(((b=i.data)==null?void 0:b.customersByMonth)||{}))||1)*250)}px`}}),n.jsx("span",{className:"text-xs font-medium",children:y}),n.jsx("span",{className:"text-xs text-muted-foreground",children:v})]},y)})})})]}),n.jsxs(O,{children:[n.jsxs(ee,{children:[n.jsx(te,{children:"Photo Management"}),n.jsx(ke,{children:"Manage customer photos stored in Google Drive"})]}),n.jsxs(H,{className:"space-y-4",children:[n.jsx("p",{className:"text-sm",children:"Customer photos older than 6 months can be automatically cleaned up to save storage space."}),n.jsx("div",{className:"rounded-md bg-muted p-4",children:n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx(Rt,{className:"h-6 w-6 text-muted-foreground"}),n.jsxs("div",{children:[n.jsx("h4",{className:"text-sm font-semibold",children:"Scheduled Cleanup"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Photos are automatically cleaned up every 7 days"})]})]})})]}),n.jsx(sl,{children:n.jsxs(At,{open:s,onOpenChange:a,children:[n.jsx(pl,{asChild:!0,children:n.jsxs(_,{variant:"outline",className:"w-full",onClick:()=>a(!0),children:[n.jsx(Nr,{className:"mr-2 h-4 w-4"}),"Run Manual Cleanup"]})}),n.jsxs(_t,{className:"sm:max-w-[425px]",children:[n.jsxs($t,{children:[n.jsx(Et,{children:"Clean Up Old Photos"}),n.jsx(an,{children:"This will permanently delete customer photos older than the specified number of months."})]}),n.jsxs("div",{className:"space-y-4 py-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(U,{htmlFor:"months",children:"Age threshold (months)"}),n.jsx(se,{id:"months",type:"number",value:t,onChange:y=>r(parseInt(y.target.value)||6),min:1,max:24}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:["Photos older than ",t," months will be deleted"]})]}),n.jsx("div",{className:"rounded-md bg-amber-50 p-3 text-amber-800 text-sm",children:n.jsxs("div",{className:"flex items-start",children:[n.jsx(Wt,{className:"h-4 w-4 mr-2 mt-0.5"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:"Warning"}),n.jsx("p",{className:"text-xs mt-1",children:"This action cannot be undone. Deleted photos cannot be recovered."})]})]})})]}),n.jsxs(Sn,{children:[n.jsx(_,{variant:"outline",onClick:()=>a(!1),children:"Cancel"}),n.jsx(_,{variant:"destructive",onClick:l,disabled:o.isPending,children:o.isPending?n.jsxs(n.Fragment,{children:[n.jsx(nt,{className:"mr-2 h-4 w-4 animate-spin"}),"Cleaning..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Nr,{className:"mr-2 h-4 w-4"}),"Delete Old Photos"]})})]})]})]})})]})]})]})]})})})};function K$(e){return Object.keys(e).length===0?"":Object.entries(e).sort((t,r)=>r[1]-t[1])[0][0]}const PTe="/assets/Clean_Machine_logo_blue_0f30335d-DtQM-4u9.png",TTe="/assets/Clean_Machine_badge_circular_ff904963-XOweAtvh.png",ATe="/assets/Clean_Machine_shield_hexagonal_89fc94d0-CwjOB914.png";function ETe(){const{toast:e}=Ee(),[t,r]=p.useState(!1),[s,a]=p.useState(null),{data:i,isLoading:o}=be({queryKey:["/api/admin/services"]}),{data:l,isLoading:c}=be({queryKey:["/api/service-limits"]}),d=je({mutationFn:async g=>await Ne("POST","/api/service-limits",g),onSuccess:()=>{ze.invalidateQueries({queryKey:["/api/service-limits"]}),e({title:"Success",description:"Service limit created successfully"}),r(!1)},onError:g=>{e({title:"Error",description:g.message||"Failed to create service limit",variant:"destructive"})}}),u=je({mutationFn:async({id:g,...x})=>await Ne("PUT",`/api/service-limits/${g}`,x),onSuccess:()=>{ze.invalidateQueries({queryKey:["/api/service-limits"]}),e({title:"Success",description:"Service limit updated successfully"}),a(null)},onError:g=>{e({title:"Error",description:g.message||"Failed to update service limit",variant:"destructive"})}}),f=je({mutationFn:async g=>await Ne("DELETE",`/api/service-limits/${g}`),onSuccess:()=>{ze.invalidateQueries({queryKey:["/api/service-limits"]}),e({title:"Success",description:"Service limit removed successfully"})},onError:g=>{e({title:"Error",description:g.message||"Failed to remove service limit",variant:"destructive"})}}),h=(i==null?void 0:i.services)||[],m=(l==null?void 0:l.limits)||[];return n.jsxs(O,{children:[n.jsx(ee,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(te,{children:n.jsxs("div",{className:"flex items-center",children:[n.jsx(xQ,{className:"mr-2 h-5 w-5"}),"Daily Service Limits"]})}),n.jsx(ke,{children:"Manage maximum daily capacity for each service type to prevent overbooking"})]}),n.jsxs(_,{onClick:()=>r(!0),"data-testid":"button-add-limit",children:[n.jsx(Un,{className:"mr-2 h-4 w-4"}),"Add Limit"]})]})}),n.jsxs(H,{className:"space-y-4",children:[c||o?n.jsx("div",{className:"text-center py-8 text-gray-500",children:"Loading service limits..."}):m.length===0?n.jsx("div",{className:"text-center py-8 text-gray-500",children:'No service limits configured. Click "Add Limit" to set daily capacity caps.'}):n.jsx("div",{className:"space-y-3",children:m.map(g=>n.jsx("div",{className:`p-4 rounded-lg border ${g.isActive?"border-blue-200 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 bg-gray-50 dark:bg-gray-800"}`,"data-testid":`limit-${g.id}`,children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("h4",{className:"font-medium",children:g.serviceName}),g.isActive?n.jsx("span",{className:"px-2 py-0.5 text-xs bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-100 rounded-full",children:"Active"}):n.jsx("span",{className:"px-2 py-0.5 text-xs bg-gray-200 text-gray-600 dark:bg-gray-700 dark:text-gray-300 rounded-full",children:"Inactive"})]}),n.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:["Maximum ",g.dailyLimit," appointment",g.dailyLimit!==1?"s":""," per day"]}),(g.effectiveFrom||g.effectiveTo)&&n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[g.effectiveFrom&&`From ${new Date(g.effectiveFrom).toLocaleDateString()}`,g.effectiveFrom&&g.effectiveTo&&"  ",g.effectiveTo&&`Until ${new Date(g.effectiveTo).toLocaleDateString()}`]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(_,{variant:"outline",size:"sm",onClick:()=>a(g),"data-testid":`button-edit-limit-${g.id}`,children:"Edit"}),n.jsx(_,{variant:"destructive",size:"sm",onClick:()=>g.id&&f.mutate(g.id),"data-testid":`button-delete-limit-${g.id}`,children:n.jsx(Nr,{className:"h-4 w-4"})})]})]})},g.id))}),(t||s)&&n.jsx(ITe,{limit:s,services:h,onClose:()=>{r(!1),a(null)},onSubmit:g=>{s!=null&&s.id?u.mutate({...g,id:s.id}):d.mutate(g)}})]})]})}function ITe({limit:e,services:t,onClose:r,onSubmit:s}){const[a,i]=p.useState((e==null?void 0:e.serviceId)||0),[o,l]=p.useState((e==null?void 0:e.dailyLimit)||1),[c,d]=p.useState((e==null?void 0:e.effectiveFrom)||""),[u,f]=p.useState((e==null?void 0:e.effectiveTo)||""),[h,m]=p.useState((e==null?void 0:e.isActive)??!0),g=x=>{x.preventDefault(),a&&s({serviceId:a,dailyLimit:o,effectiveFrom:c||void 0,effectiveTo:u||void 0,isActive:h})};return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:r,children:n.jsxs("div",{className:"bg-white dark:bg-gray-900 p-6 rounded-lg shadow-lg max-w-md w-full mx-4",onClick:x=>x.stopPropagation(),children:[n.jsxs("h3",{className:"text-lg font-semibold mb-4",children:[e?"Edit":"Add"," Service Limit"]}),n.jsxs("form",{onSubmit:g,className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(U,{htmlFor:"service",children:"Service"}),n.jsxs(Pt,{value:a.toString(),onValueChange:x=>i(parseInt(x)),disabled:!!e,children:[n.jsx(kt,{"data-testid":"select-service",children:n.jsx(Tt,{placeholder:"Select a service"})}),n.jsx(Mt,{children:t.map(x=>n.jsx(ve,{value:x.id.toString(),children:x.name},x.id))})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(U,{htmlFor:"dailyLimit",children:"Daily Limit"}),n.jsx(se,{id:"dailyLimit",type:"number",min:"1",max:"50",value:o,onChange:x=>l(parseInt(x.target.value)||1),required:!0,"data-testid":"input-daily-limit"}),n.jsx("p",{className:"text-xs text-gray-500",children:"Maximum bookings allowed per day for this service"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(U,{htmlFor:"effectiveFrom",children:"Effective From (Optional)"}),n.jsx(se,{id:"effectiveFrom",type:"date",value:c,onChange:x=>d(x.target.value),"data-testid":"input-effective-from"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(U,{htmlFor:"effectiveTo",children:"Effective To (Optional)"}),n.jsx(se,{id:"effectiveTo",type:"date",value:u,onChange:x=>f(x.target.value),"data-testid":"input-effective-to"})]})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"space-y-1",children:[n.jsx(U,{htmlFor:"isActive",children:"Active"}),n.jsx("p",{className:"text-xs text-gray-500",children:"Enable this limit immediately"})]}),n.jsx(Vt,{id:"isActive",checked:h,onCheckedChange:m,"data-testid":"switch-is-active"})]}),n.jsxs("div",{className:"flex gap-2 justify-end pt-4",children:[n.jsx(_,{type:"button",variant:"outline",onClick:r,"data-testid":"button-cancel-limit",children:"Cancel"}),n.jsxs(_,{type:"submit",disabled:!a,"data-testid":"button-save-limit",children:[e?"Update":"Create"," Limit"]})]})]})]})})}function LTe(){var T;const{toast:e}=Ee(),{data:t,isLoading:r}=be({queryKey:["/api/maintenance/settings"]}),s=t==null?void 0:t.settings,a="Thanks for your message! Our automated system is currently offline. You'll receive a personal response shortly.",i="We're currently performing maintenance. Please check back soon or contact us directly.",o=(s==null?void 0:s.smsFallbackPhone)||"",l=(s==null?void 0:s.smsFallbackAutoReply)||a,d=o&&o.trim()!==""&&((s==null?void 0:s.smsFallbackEnabled)??!1),[u,f]=p.useState((s==null?void 0:s.maintenanceMode)??!1),[h,m]=p.useState((s==null?void 0:s.maintenanceMessage)||i),[g,x]=p.useState((s==null?void 0:s.backupEmail)||""),[y,v]=p.useState((s==null?void 0:s.alertPhone)||""),[b,w]=p.useState((s==null?void 0:s.autoFailoverThreshold)??5),[N,j]=p.useState(o),[S,C]=p.useState(l),[k,M]=p.useState(d);p.useEffect(()=>{s&&(f(s.maintenanceMode),m(s.maintenanceMessage),x(s.backupEmail||""),v(s.alertPhone||""),w(s.autoFailoverThreshold))},[s]),p.useEffect(()=>{j(o),C(l),M(d)},[o,l,d]),p.useEffect(()=>{(!N||N.trim()==="")&&M(!1)},[N]);const A=je({mutationFn:async I=>await Ne("PUT","/api/maintenance/settings",I),onSuccess:()=>{ze.invalidateQueries({queryKey:["/api/maintenance/settings"]}),e({title:"Success",description:"Maintenance settings updated successfully"})},onError:I=>{e({title:"Error",description:I.message||"Failed to update maintenance settings",variant:"destructive"})}}),P=()=>{A.mutate({maintenanceMode:u,maintenanceMessage:h,backupEmail:g||null,alertPhone:y||null,autoFailoverThreshold:b,smsFallbackEnabled:k,smsFallbackPhone:N||null,smsFallbackAutoReply:S||null})};return n.jsxs(O,{children:[n.jsxs(ee,{children:[n.jsx(te,{children:n.jsxs("div",{className:"flex items-center",children:[n.jsx(zn,{className:"mr-2 h-5 w-5"}),"Maintenance & Failover Controls"]})}),n.jsx(ke,{children:"Configure system maintenance mode and automated failover protection"})]}),n.jsx(H,{className:"space-y-6",children:r?n.jsx("div",{className:"text-center py-8 text-gray-500",children:"Loading maintenance settings..."}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"p-4 rounded-lg border border-orange-200 bg-orange-50 dark:bg-orange-900/20",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("div",{className:"space-y-1",children:[n.jsx(U,{htmlFor:"maintenanceMode",className:"text-base font-semibold",children:"Maintenance Mode"}),n.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Enable to temporarily disable public bookings and display maintenance message"})]}),n.jsx(Vt,{id:"maintenanceMode",checked:u,onCheckedChange:f,"data-testid":"switch-maintenance-mode"})]}),((T=t==null?void 0:t.settings)==null?void 0:T.lastFailoverAt)&&n.jsxs("p",{className:"text-xs text-orange-600 dark:text-orange-400 mt-2",children:["Last failover: ",new Date(t.settings.lastFailoverAt).toLocaleString()]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(U,{htmlFor:"maintenanceMessage",children:"Maintenance Message"}),n.jsx(un,{id:"maintenanceMessage",value:h,onChange:I=>m(I.target.value),placeholder:"Enter the message to display during maintenance",rows:3,"data-testid":"textarea-maintenance-message"}),n.jsx("p",{className:"text-xs text-gray-500",children:"This message will be shown to users when maintenance mode is active"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(U,{htmlFor:"backupEmail",children:"Backup Email (Optional)"}),n.jsx(se,{id:"backupEmail",type:"email",value:g,onChange:I=>x(I.target.value),placeholder:"backup@example.com","data-testid":"input-backup-email"}),n.jsx("p",{className:"text-xs text-gray-500",children:"All booking requests will be forwarded to this email during system failures"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(U,{htmlFor:"alertPhone",children:"Alert Phone Number (Optional)"}),n.jsx(se,{id:"alertPhone",type:"tel",value:y,onChange:I=>v(I.target.value),placeholder:"+1 (918) 555-0123","data-testid":"input-alert-phone"}),n.jsx("p",{className:"text-xs text-gray-500",children:"SMS alerts will be sent to this number for critical system failures"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(U,{htmlFor:"autoFailoverThreshold",children:"Auto-Failover Threshold"}),n.jsx(se,{id:"autoFailoverThreshold",type:"number",min:"1",max:"20",value:b,onChange:I=>w(parseInt(I.target.value)||5),"data-testid":"input-auto-failover-threshold"}),n.jsx("p",{className:"text-xs text-gray-500",children:"Number of consecutive failures before triggering automatic failover (recommended: 3-10)"})]}),n.jsxs("div",{className:"p-4 rounded-lg border border-purple-200 bg-purple-50 dark:bg-purple-900/20 space-y-4",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[n.jsx(on,{className:"h-5 w-5 text-purple-600 dark:text-purple-400"}),n.jsx("h3",{className:"font-semibold text-purple-900 dark:text-purple-100",children:"SMS Fallback System"})]}),n.jsx("p",{className:"text-sm text-purple-700 dark:text-purple-300 mb-4",children:"Configure backup SMS handling when the main system is offline"}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(U,{htmlFor:"smsFallbackPhone",children:"Fallback Phone Number"}),n.jsx(se,{id:"smsFallbackPhone",type:"tel",placeholder:"+1 918-555-0100",value:N,onChange:I=>j(I.target.value),"data-testid":"input-sms-fallback-phone"}),n.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Phone number to forward messages to (e.g., business owner's personal phone)"})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"space-y-1",children:[n.jsx(U,{htmlFor:"smsFallbackEnabled",className:"text-sm font-medium",children:"Enable SMS Fallback"}),n.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Forward customer messages when the main system is down"})]}),n.jsx(Vt,{id:"smsFallbackEnabled",checked:k,onCheckedChange:M,disabled:!N||N.trim()==="","data-testid":"switch-sms-fallback-enabled"})]}),(!N||N.trim()==="")&&n.jsxs("div",{className:"p-3 rounded-md bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800",children:[n.jsx("p",{className:"text-xs text-amber-700 dark:text-amber-300 font-medium",children:" Please enter a fallback phone number before enabling SMS fallback"}),n.jsx("p",{className:"text-xs text-amber-600 dark:text-amber-400 mt-1",children:"Without a phone number, customer messages will be silently dropped when the system is offline."})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(U,{htmlFor:"smsFallbackAutoReply",children:"Customer Auto-Reply Message"}),n.jsx(un,{id:"smsFallbackAutoReply",rows:3,placeholder:"Thanks for your message! Our automated system is currently offline. You'll receive a personal response shortly.",value:S,onChange:I=>C(I.target.value),maxLength:160,disabled:!k,"data-testid":"textarea-sms-fallback-auto-reply"}),n.jsxs("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:[(S==null?void 0:S.length)||0,"/160 characters (SMS limit)"]})]})]}),n.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg border border-blue-200 dark:border-blue-800",children:[n.jsx("h4",{className:"font-medium text-blue-900 dark:text-blue-100 mb-2",children:"How Failover Protection Works:"}),n.jsxs("ul",{className:"text-sm text-blue-800 dark:text-blue-200 space-y-1 list-disc list-inside",children:[n.jsx("li",{children:"System monitors for consecutive booking/API failures"}),n.jsx("li",{children:"When threshold is reached, maintenance mode activates automatically"}),n.jsx("li",{children:"Backup email receives all booking requests during downtime"}),n.jsx("li",{children:"SMS alerts notify you of critical issues immediately"}),n.jsx("li",{children:"You can manually disable maintenance mode once issues are resolved"})]})]})]})}),n.jsx(sl,{children:n.jsxs(_,{onClick:P,disabled:A.isPending||r,className:"ml-auto","data-testid":"button-save-maintenance",children:[n.jsx(fr,{className:"mr-2 h-4 w-4"}),A.isPending?"Saving...":"Save Settings"]})})]})}function Qne(){zt();const{toast:e}=Ee(),[t,r]=p.useState({startHour:9,startMinute:0,endHour:15,endMinute:0,lunchHour:12,lunchMinute:0,daysOfWeek:[1,2,3,4,5]}),[s,a]=p.useState("regular"),[i,o]=p.useState({startHour:8,startMinute:0,endHour:18,endMinute:0}),[l,c]=p.useState({startHour:10,startMinute:0,endHour:17,endMinute:0}),[d,u]=p.useState(!1),[f,h]=p.useState(!0),[m,g]=p.useState(!1),[x,y]=p.useState(24),[v,b]=p.useState(26),[w,N]=p.useState(!0),[j,S]=p.useState(15),[C,k]=p.useState(""),M=Array.from({length:24},($,D)=>D),A=[0,15,30,45],P=[{value:0,label:"Sunday"},{value:1,label:"Monday"},{value:2,label:"Tuesday"},{value:3,label:"Wednesday"},{value:4,label:"Thursday"},{value:5,label:"Friday"},{value:6,label:"Saturday"}],T=($,D,W,E,F)=>{const B=$*60+D,Z=W*60+E;return B>=Z?(e({title:"Invalid Hours",description:`${F} start time must be before end time.`,variant:"destructive"}),!1):!0},I=async()=>{if(s==="regular"){if(!T(t.startHour,t.startMinute,t.endHour,t.endMinute,"Regular hours"))return}else if(s==="summer"){if(!T(i.startHour,i.startMinute,i.endHour,i.endMinute,"Summer hours"))return}else if(s==="winter"&&!T(l.startHour,l.startMinute,l.endHour,l.endMinute,"Winter hours"))return;g(!0);try{const D=await(await fetch("/api/business-settings",{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({startHour:t.startHour,startMinute:t.startMinute,endHour:t.endHour,endMinute:t.endMinute,lunchHour:t.lunchHour,lunchMinute:t.lunchMinute,daysOfWeek:t.daysOfWeek,activeScheduleType:s,summerStartHour:i.startHour,summerStartMinute:i.startMinute,summerEndHour:i.endHour,summerEndMinute:i.endMinute,winterStartHour:l.startHour,winterStartMinute:l.startMinute,winterEndHour:l.endHour,winterEndMinute:l.endMinute,enableLunchBreak:w,allowWeekendBookings:d,halfHourIncrements:f,minimumNoticeHours:x,maxDriveTimeMinutes:v,etaPadding:j,googlePlaceId:C})})).json();if(!D.success)throw new Error(D.error||"Failed to save settings");e({title:"Settings Saved",description:"Your business hours and settings have been updated."})}catch($){console.error("Error saving business hours:",$),e({title:"Error",description:"Failed to save business settings. Please try again.",variant:"destructive"})}finally{g(!1)}};p.useEffect(()=>{(async()=>{try{const W=await(await fetch("/api/business-settings",{credentials:"include"})).json();if(W.success&&W.settings){const E=W.settings;r({startHour:E.startHour,startMinute:E.startMinute,endHour:E.endHour,endMinute:E.endMinute,lunchHour:E.lunchHour,lunchMinute:E.lunchMinute,daysOfWeek:E.daysOfWeek}),N(E.enableLunchBreak),u(E.allowWeekendBookings),h(E.halfHourIncrements),y(E.minimumNoticeHours),b(E.maxDriveTimeMinutes||26),S(E.etaPadding||15),k(E.googlePlaceId||""),a(E.activeScheduleType||"regular"),o({startHour:E.summerStartHour||8,startMinute:E.summerStartMinute||0,endHour:E.summerEndHour||18,endMinute:E.summerEndMinute||0}),c({startHour:E.winterStartHour||10,startMinute:E.winterStartMinute||0,endHour:E.winterEndHour||17,endMinute:E.winterEndMinute||0})}}catch(D){console.error("Error loading business settings:",D)}})()},[]);const L=($,D)=>{const W=$%12===0?12:$%12,E=$<12?"AM":"PM";return`${W}:${D.toString().padStart(2,"0")} ${E}`},R=$=>{t.daysOfWeek.includes($)?r({...t,daysOfWeek:t.daysOfWeek.filter(D=>D!==$)}):r({...t,daysOfWeek:[...t.daysOfWeek,$].sort()})},G=async $=>{g(!0);try{const W=await(await fetch("/api/business-settings/switch-schedule",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({scheduleType:$})})).json();if(W.success&&W.settings)a($),r({...t,startHour:W.settings.startHour,startMinute:W.settings.startMinute,endHour:W.settings.endHour,endMinute:W.settings.endMinute}),e({title:"Success",description:`Switched to ${$} schedule`});else throw new Error(W.message||"Failed to switch schedule")}catch(D){e({title:"Error",description:D.message||"Failed to switch schedule",variant:"destructive"})}finally{g(!1)}};return n.jsx(xn,{title:"Business Settings",children:n.jsx("div",{className:"p-6",children:n.jsxs(js,{defaultValue:"hours",children:[n.jsxs(ds,{className:"flex flex-wrap justify-start gap-1 h-auto p-1 bg-muted",children:[n.jsxs(dt,{value:"hours",className:"flex items-center whitespace-nowrap",children:[n.jsx(Rt,{className:"mr-2 h-4 w-4"}),"Business Hours"]}),n.jsxs(dt,{value:"booking",className:"flex items-center whitespace-nowrap",children:[n.jsx(Dt,{className:"mr-2 h-4 w-4"}),"Booking Settings"]}),n.jsxs(dt,{value:"limits",className:"flex items-center whitespace-nowrap",children:[n.jsx(xQ,{className:"mr-2 h-4 w-4"}),"Service Limits"]}),n.jsxs(dt,{value:"google",className:"flex items-center whitespace-nowrap",children:[n.jsx($6,{className:"mr-2 h-4 w-4"}),"Google Integration"]}),n.jsxs(dt,{value:"branding",className:"flex items-center whitespace-nowrap",children:[n.jsx(ja,{className:"mr-2 h-4 w-4"}),"Branding"]}),n.jsxs(dt,{value:"notifications",className:"flex items-center whitespace-nowrap",children:[n.jsx(zn,{className:"mr-2 h-4 w-4"}),"Maintenance"]})]}),n.jsx(pt,{value:"hours",className:"space-y-4",children:n.jsxs(O,{children:[n.jsxs(ee,{children:[n.jsx(te,{children:n.jsxs("div",{className:"flex items-center",children:[n.jsx(Rt,{className:"mr-2 h-5 w-5"}),"Business Hours"]})}),n.jsx(ke,{children:"Set your business hours and availability for appointments"})]}),n.jsxs(H,{className:"space-y-6",children:[n.jsxs("div",{className:"space-y-3 border-b pb-6",children:[n.jsx(U,{children:"Schedule Type"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Quick switch between Regular, Summer (early start), and Winter (late start) schedules"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(_,{type:"button",variant:s==="regular"?"default":"outline",onClick:()=>G("regular"),disabled:m,"data-testid":"button-schedule-regular",className:"flex-1",children:[s==="regular"&&" ","Regular"]}),n.jsxs(_,{type:"button",variant:s==="summer"?"default":"outline",onClick:()=>G("summer"),disabled:m,"data-testid":"button-schedule-summer",className:"flex-1",children:[s==="summer"&&" ","Summer (",L(i.startHour,i.startMinute)," - ",L(i.endHour,i.endMinute),")"]}),n.jsxs(_,{type:"button",variant:s==="winter"?"default":"outline",onClick:()=>G("winter"),disabled:m,"data-testid":"button-schedule-winter",className:"flex-1",children:[s==="winter"&&" ","Winter (",L(l.startHour,l.startMinute)," - ",L(l.endHour,l.endMinute),")"]})]}),s!=="regular"&&n.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-md p-3",children:n.jsxs("p",{className:"text-sm text-blue-900 dark:text-blue-100",children:[n.jsx("strong",{children:"Active:"})," ",s.charAt(0).toUpperCase()+s.slice(1)," schedule is currently in use. Changes below will update the ",s," preset."]})})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(U,{children:"Working Days"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:P.map($=>n.jsx(_,{type:"button",variant:t.daysOfWeek.includes($.value)?"default":"outline",className:"capitalize",onClick:()=>R($.value),children:$.label.slice(0,3)},$.value))})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-1",children:[n.jsx(U,{htmlFor:"startTime",children:"Opening Time"}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsxs(Pt,{value:t.startHour.toString(),onValueChange:$=>r({...t,startHour:parseInt($)}),children:[n.jsx(kt,{className:"w-full",children:n.jsx(Tt,{placeholder:"Hour"})}),n.jsx(Mt,{children:M.map($=>n.jsx(ve,{value:$.toString(),children:$===0?"12 AM":$===12?"12 PM":$<12?`${$} AM`:`${$-12} PM`},$))})]}),n.jsxs(Pt,{value:t.startMinute.toString(),onValueChange:$=>r({...t,startMinute:parseInt($)}),children:[n.jsx(kt,{className:"w-full",children:n.jsx(Tt,{placeholder:"Minute"})}),n.jsx(Mt,{children:A.map($=>n.jsx(ve,{value:$.toString(),children:$.toString().padStart(2,"0")},$))})]})]})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsx(U,{htmlFor:"endTime",children:"Closing Time"}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsxs(Pt,{value:t.endHour.toString(),onValueChange:$=>r({...t,endHour:parseInt($)}),children:[n.jsx(kt,{className:"w-full",children:n.jsx(Tt,{placeholder:"Hour"})}),n.jsx(Mt,{children:M.map($=>n.jsx(ve,{value:$.toString(),children:$===0?"12 AM":$===12?"12 PM":$<12?`${$} AM`:`${$-12} PM`},$))})]}),n.jsxs(Pt,{value:t.endMinute.toString(),onValueChange:$=>r({...t,endMinute:parseInt($)}),children:[n.jsx(kt,{className:"w-full",children:n.jsx(Tt,{placeholder:"Minute"})}),n.jsx(Mt,{children:A.map($=>n.jsx(ve,{value:$.toString(),children:$.toString().padStart(2,"0")},$))})]})]})]})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"space-y-1",children:[n.jsx(U,{htmlFor:"enableLunchBreak",children:"Enable Lunch Break"}),n.jsx("p",{className:"text-sm text-gray-500",children:"Block appointments during lunch hour"})]}),n.jsx(Vt,{id:"enableLunchBreak",checked:w,onCheckedChange:N,"data-testid":"switch-enable-lunch-break"})]}),w&&n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:n.jsxs("div",{className:"space-y-1",children:[n.jsx(U,{htmlFor:"lunchTime",children:"Lunch Time (Not bookable)"}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsxs(Pt,{value:t.lunchHour.toString(),onValueChange:$=>r({...t,lunchHour:parseInt($)}),children:[n.jsx(kt,{className:"w-full",children:n.jsx(Tt,{placeholder:"Hour"})}),n.jsx(Mt,{children:M.map($=>n.jsx(ve,{value:$.toString(),children:$===0?"12 AM":$===12?"12 PM":$<12?`${$} AM`:`${$-12} PM`},$))})]}),n.jsxs(Pt,{value:t.lunchMinute.toString(),onValueChange:$=>r({...t,lunchMinute:parseInt($)}),children:[n.jsx(kt,{className:"w-full",children:n.jsx(Tt,{placeholder:"Minute"})}),n.jsx(Mt,{children:A.map($=>n.jsx(ve,{value:$.toString(),children:$.toString().padStart(2,"0")},$))})]})]})]})}),n.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[n.jsx("h3",{className:"font-medium mb-2",children:"Business Hours Summary"}),n.jsxs("p",{children:["Working days: ",t.daysOfWeek.map($=>{var D;return(D=P.find(W=>W.value===$))==null?void 0:D.label.slice(0,3)}).join(", ")]}),n.jsxs("p",{children:["Hours: ",L(t.startHour,t.startMinute)," to ",L(t.endHour,t.endMinute)]}),w&&n.jsxs("p",{children:["Lunch break: ",L(t.lunchHour,t.lunchMinute)," (1 hour)"]}),!w&&n.jsx("p",{children:"Lunch break: Disabled - appointments available all day"})]})]}),n.jsx(sl,{children:n.jsx(_,{onClick:I,disabled:m,className:"ml-auto",children:m?"Saving...":"Save Business Hours"})})]})}),n.jsx(pt,{value:"booking",className:"space-y-4",children:n.jsxs(O,{children:[n.jsxs(ee,{children:[n.jsx(te,{children:n.jsxs("div",{className:"flex items-center",children:[n.jsx(Dt,{className:"mr-2 h-5 w-5"}),"Appointment Settings"]})}),n.jsx(ke,{children:"Configure how customers can book appointments"})]}),n.jsxs(H,{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"space-y-1",children:[n.jsx(U,{htmlFor:"allowWeekendBookings",children:"Allow Weekend Bookings"}),n.jsx("p",{className:"text-sm text-gray-500",children:"For emergency services only"})]}),n.jsx(Vt,{id:"allowWeekendBookings",checked:d,onCheckedChange:u})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"space-y-1",children:[n.jsx(U,{htmlFor:"halfHourIncrements",children:"Half-hour Booking Increments"}),n.jsx("p",{className:"text-sm text-gray-500",children:"Allow 30-minute booking slots"})]}),n.jsx(Vt,{id:"halfHourIncrements",checked:f,onCheckedChange:h})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(U,{htmlFor:"minimumNoticeHours",children:"Minimum Notice Period (hours)"}),n.jsx(se,{id:"minimumNoticeHours",type:"number",min:"0",max:"168",value:x,onChange:$=>y(parseInt($.target.value)||0),placeholder:"Enter hours (e.g., 24)","data-testid":"input-minimum-notice-hours"}),n.jsx("p",{className:"text-sm text-gray-500",children:"Minimum hours before customers can book. Examples: 0 (no minimum), 2, 24, 48"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(U,{htmlFor:"maxDriveTimeMinutes",children:"Maximum Service Area Drive Time (minutes)"}),n.jsx(se,{id:"maxDriveTimeMinutes",type:"number",min:"1",max:"120",value:v,onChange:$=>b(parseInt($.target.value)||26),placeholder:"Enter minutes (e.g., 26)","data-testid":"input-max-drive-time"}),n.jsx("p",{className:"text-sm text-gray-500",children:"Maximum drive time from your Tulsa base. Customers outside this area will be offered extended-area booking. Examples: 15, 26, 30, 45"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(U,{children:"Maximum Future Booking"}),n.jsxs(Pt,{defaultValue:"30",children:[n.jsx(kt,{children:n.jsx(Tt,{placeholder:"Select days"})}),n.jsxs(Mt,{children:[n.jsx(ve,{value:"7",children:"1 week"}),n.jsx(ve,{value:"14",children:"2 weeks"}),n.jsx(ve,{value:"30",children:"1 month"}),n.jsx(ve,{value:"90",children:"3 months"})]})]}),n.jsx("p",{className:"text-sm text-gray-500",children:"How far in advance customers can book appointments"})]})]}),n.jsx(sl,{children:n.jsxs(_,{onClick:I,disabled:m,className:"ml-auto",children:[n.jsx(fr,{className:"mr-2 h-4 w-4"}),m?"Saving...":"Save Settings"]})})]})}),n.jsx(pt,{value:"limits",className:"space-y-4",children:n.jsx(ETe,{})}),n.jsx(pt,{value:"google",className:"space-y-4",children:n.jsxs(O,{children:[n.jsxs(ee,{children:[n.jsx(te,{children:n.jsxs("div",{className:"flex items-center",children:[n.jsx($6,{className:"mr-2 h-5 w-5"}),"Google Business Integration"]})}),n.jsx(ke,{children:"Connect your Google Business Profile to sync photos and reviews"})]}),n.jsxs(H,{className:"space-y-6",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(U,{htmlFor:"googlePlaceId",children:"Google Place ID"}),n.jsx(se,{id:"googlePlaceId",value:C,onChange:$=>k($.target.value),placeholder:"ChIJ...","data-testid":"input-google-place-id"}),n.jsx("p",{className:"text-sm text-gray-500",children:'Your Google Business Profile Place ID (e.g., "ChIJVX4B3d2TtocRCjnc7bJevHw")'})]}),n.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg border border-blue-200 dark:border-blue-800",children:[n.jsx("h4",{className:"font-medium text-blue-900 dark:text-blue-100 mb-2",children:"How to find your Google Place ID:"}),n.jsxs("ol",{className:"text-sm text-blue-800 dark:text-blue-200 space-y-1 list-decimal list-inside",children:[n.jsxs("li",{children:["Go to ",n.jsx("a",{href:"https://www.google.com/maps",target:"_blank",rel:"noopener noreferrer",className:"underline",children:"Google Maps"})]}),n.jsx("li",{children:'Search for "Clean Machine Tulsa" (or your business name)'}),n.jsx("li",{children:'Look at the URL - it will contain your Place ID after "!1s"'}),n.jsxs("li",{children:["Or use Google's ",n.jsx("a",{href:"https://developers.google.com/maps/documentation/places/web-service/place-id",target:"_blank",rel:"noopener noreferrer",className:"underline",children:"Place ID Finder"})]})]})]}),n.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/20 p-4 rounded-lg border border-amber-200 dark:border-amber-800",children:n.jsxs("p",{className:"text-sm text-amber-800 dark:text-amber-200",children:[n.jsx("strong",{children:"Note:"})," This Place ID is used to automatically sync your Google Business Profile photos and reviews. Make sure you enter the correct ID for your business."]})})]}),n.jsx(sl,{children:n.jsxs(_,{onClick:I,disabled:m,className:"ml-auto","data-testid":"button-save-google-place-id",children:[n.jsx(fr,{className:"mr-2 h-4 w-4"}),m?"Saving...":"Save Settings"]})})]})}),n.jsx(pt,{value:"branding",className:"space-y-4",children:n.jsxs(O,{children:[n.jsxs(ee,{children:[n.jsx(te,{children:n.jsxs("div",{className:"flex items-center",children:[n.jsx($i,{className:"mr-2 h-5 w-5"}),"Logo Options"]})}),n.jsx(ke,{children:"AI-generated logo options for your business"})]}),n.jsxs(H,{children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"space-y-3",children:[n.jsx("div",{className:"aspect-square bg-white rounded-lg border-2 border-gray-200 p-6 flex items-center justify-center",children:n.jsx("img",{src:PTe,alt:"Clean Machine Blue Logo",className:"max-w-full max-h-full object-contain"})}),n.jsxs("div",{className:"text-center",children:[n.jsx("h3",{className:"font-semibold text-lg",children:"Blue Logo"}),n.jsx("p",{className:"text-sm text-gray-500",children:"Minimalist professional design"})]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsx("div",{className:"aspect-square bg-white rounded-lg border-2 border-gray-200 p-6 flex items-center justify-center",children:n.jsx("img",{src:TTe,alt:"Clean Machine Circular Badge",className:"max-w-full max-h-full object-contain"})}),n.jsxs("div",{className:"text-center",children:[n.jsx("h3",{className:"font-semibold text-lg",children:"Circular Badge"}),n.jsx("p",{className:"text-sm text-gray-500",children:"Modern badge design (current PWA icon)"})]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsx("div",{className:"aspect-square bg-white rounded-lg border-2 border-gray-200 p-6 flex items-center justify-center",children:n.jsx("img",{src:ATe,alt:"Clean Machine Hexagonal Shield",className:"max-w-full max-h-full object-contain"})}),n.jsxs("div",{className:"text-center",children:[n.jsx("h3",{className:"font-semibold text-lg",children:"Hexagonal Shield"}),n.jsx("p",{className:"text-sm text-gray-500",children:"Professional emblem style"})]})]})]}),n.jsx("div",{className:"mt-6 bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg border border-blue-200 dark:border-blue-800",children:n.jsxs("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:[n.jsx("strong",{children:"Note:"})," These logos are AI-generated and ready to use. The circular badge is currently being used as your PWA app icon. You can download any of these images for use in marketing materials, social media, or other branding needs."]})})]})]})}),n.jsx(pt,{value:"notifications",className:"space-y-4",children:n.jsx(LTe,{})})]})})})}var k1=e=>e.type==="checkbox",bf=e=>e instanceof Date,$a=e=>e==null;const Kne=e=>typeof e=="object";var os=e=>!$a(e)&&!Array.isArray(e)&&Kne(e)&&!bf(e),Jne=e=>os(e)&&e.target?k1(e.target)?e.target.checked:e.target.value:e,DTe=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,Zne=(e,t)=>e.has(DTe(t)),$Te=e=>{const t=e.constructor&&e.constructor.prototype;return os(t)&&t.hasOwnProperty("isPrototypeOf")},jE=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Xs(e){let t;const r=Array.isArray(e),s=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else if(!(jE&&(e instanceof Blob||s))&&(r||os(e)))if(t=r?[]:{},!r&&!$Te(e))t=e;else for(const a in e)e.hasOwnProperty(a)&&(t[a]=Xs(e[a]));else return e;return t}var B4=e=>Array.isArray(e)?e.filter(Boolean):[],rs=e=>e===void 0,ft=(e,t,r)=>{if(!t||!os(e))return r;const s=B4(t.split(/[,[\].]+?/)).reduce((a,i)=>$a(a)?a:a[i],e);return rs(s)||s===e?rs(e[t])?r:e[t]:s},_i=e=>typeof e=="boolean",NE=e=>/^\w*$/.test(e),Xne=e=>B4(e.replace(/["|']|\]/g,"").split(/\.|\[/)),Yn=(e,t,r)=>{let s=-1;const a=NE(t)?[t]:Xne(t),i=a.length,o=i-1;for(;++s<i;){const l=a[s];let c=r;if(s!==o){const d=e[l];c=os(d)||Array.isArray(d)?d:isNaN(+a[s+1])?{}:[]}if(l==="__proto__"||l==="constructor"||l==="prototype")return;e[l]=c,e=e[l]}};const Yj={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Ko={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},pc={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},ere=Q.createContext(null),U4=()=>Q.useContext(ere),OTe=e=>{const{children:t,...r}=e;return Q.createElement(ere.Provider,{value:r},t)};var tre=(e,t,r,s=!0)=>{const a={defaultValues:t._defaultValues};for(const i in e)Object.defineProperty(a,i,{get:()=>{const o=i;return t._proxyFormState[o]!==Ko.all&&(t._proxyFormState[o]=!s||Ko.all),r&&(r[o]=!0),e[o]}});return a};function RTe(e){const t=U4(),{control:r=t.control,disabled:s,name:a,exact:i}=e||{},[o,l]=Q.useState(r._formState),c=Q.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1}),d=Q.useRef(a);return d.current=a,Q.useEffect(()=>r._subscribe({name:d.current,formState:c.current,exact:i,callback:u=>{!s&&l({...r._formState,...u})}}),[r,s,i]),Q.useEffect(()=>{c.current.isValid&&r._setValid(!0)},[r]),Q.useMemo(()=>tre(o,r,c.current,!1),[o,r])}var Rl=e=>typeof e=="string",nre=(e,t,r,s,a)=>Rl(e)?(s&&t.watch.add(e),ft(r,e,a)):Array.isArray(e)?e.map(i=>(s&&t.watch.add(i),ft(r,i))):(s&&(t.watchAll=!0),r);function FTe(e){const t=U4(),{control:r=t.control,name:s,defaultValue:a,disabled:i,exact:o}=e||{},l=Q.useRef(s),c=Q.useRef(a);l.current=s,Q.useEffect(()=>r._subscribe({name:l.current,formState:{values:!0},exact:o,callback:f=>!i&&u(nre(l.current,r._names,f.values||r._formValues,!1,c.current))}),[r,i,o]);const[d,u]=Q.useState(r._getWatch(s,a));return Q.useEffect(()=>r._removeUnmounted()),d}function zTe(e){const t=U4(),{name:r,disabled:s,control:a=t.control,shouldUnregister:i}=e,o=Zne(a._names.array,r),l=FTe({control:a,name:r,defaultValue:ft(a._formValues,r,ft(a._defaultValues,r,e.defaultValue)),exact:!0}),c=RTe({control:a,name:r,exact:!0}),d=Q.useRef(e),u=Q.useRef(a.register(r,{...e.rules,value:l,..._i(e.disabled)?{disabled:e.disabled}:{}})),f=Q.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!ft(c.errors,r)},isDirty:{enumerable:!0,get:()=>!!ft(c.dirtyFields,r)},isTouched:{enumerable:!0,get:()=>!!ft(c.touchedFields,r)},isValidating:{enumerable:!0,get:()=>!!ft(c.validatingFields,r)},error:{enumerable:!0,get:()=>ft(c.errors,r)}}),[c,r]),h=Q.useCallback(y=>u.current.onChange({target:{value:Jne(y),name:r},type:Yj.CHANGE}),[r]),m=Q.useCallback(()=>u.current.onBlur({target:{value:ft(a._formValues,r),name:r},type:Yj.BLUR}),[r,a._formValues]),g=Q.useCallback(y=>{const v=ft(a._fields,r);v&&y&&(v._f.ref={focus:()=>y.focus(),select:()=>y.select(),setCustomValidity:b=>y.setCustomValidity(b),reportValidity:()=>y.reportValidity()})},[a._fields,r]),x=Q.useMemo(()=>({name:r,value:l,..._i(s)||c.disabled?{disabled:c.disabled||s}:{},onChange:h,onBlur:m,ref:g}),[r,s,c.disabled,h,m,g,l]);return Q.useEffect(()=>{const y=a._options.shouldUnregister||i;a.register(r,{...d.current.rules,..._i(d.current.disabled)?{disabled:d.current.disabled}:{}});const v=(b,w)=>{const N=ft(a._fields,b);N&&N._f&&(N._f.mount=w)};if(v(r,!0),y){const b=Xs(ft(a._options.defaultValues,r));Yn(a._defaultValues,r,b),rs(ft(a._formValues,r))&&Yn(a._formValues,r,b)}return!o&&a.register(r),()=>{(o?y&&!a._state.action:y)?a.unregister(r):v(r,!1)}},[r,a,o,i]),Q.useEffect(()=>{a._setDisabledField({disabled:s,name:r})},[s,r,a]),Q.useMemo(()=>({field:x,formState:c,fieldState:f}),[x,c,f])}const BTe=e=>e.render(zTe(e));var rre=(e,t,r,s,a)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[s]:a||!0}}:{},Ex=e=>Array.isArray(e)?e:[e],J$=()=>{let e=[];return{get observers(){return e},next:a=>{for(const i of e)i.next&&i.next(a)},subscribe:a=>(e.push(a),{unsubscribe:()=>{e=e.filter(i=>i!==a)}}),unsubscribe:()=>{e=[]}}},$M=e=>$a(e)||!Kne(e);function Ld(e,t){if($M(e)||$M(t))return e===t;if(bf(e)&&bf(t))return e.getTime()===t.getTime();const r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;for(const a of r){const i=e[a];if(!s.includes(a))return!1;if(a!=="ref"){const o=t[a];if(bf(i)&&bf(o)||os(i)&&os(o)||Array.isArray(i)&&Array.isArray(o)?!Ld(i,o):i!==o)return!1}}return!0}var Ia=e=>os(e)&&!Object.keys(e).length,SE=e=>e.type==="file",Jo=e=>typeof e=="function",Qj=e=>{if(!jE)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},sre=e=>e.type==="select-multiple",CE=e=>e.type==="radio",UTe=e=>CE(e)||k1(e),PC=e=>Qj(e)&&e.isConnected;function VTe(e,t){const r=t.slice(0,-1).length;let s=0;for(;s<r;)e=rs(e)?s++:e[t[s++]];return e}function HTe(e){for(const t in e)if(e.hasOwnProperty(t)&&!rs(e[t]))return!1;return!0}function Cs(e,t){const r=Array.isArray(t)?t:NE(t)?[t]:Xne(t),s=r.length===1?e:VTe(e,r),a=r.length-1,i=r[a];return s&&delete s[i],a!==0&&(os(s)&&Ia(s)||Array.isArray(s)&&HTe(s))&&Cs(e,r.slice(0,-1)),e}var are=e=>{for(const t in e)if(Jo(e[t]))return!0;return!1};function Kj(e,t={}){const r=Array.isArray(e);if(os(e)||r)for(const s in e)Array.isArray(e[s])||os(e[s])&&!are(e[s])?(t[s]=Array.isArray(e[s])?[]:{},Kj(e[s],t[s])):$a(e[s])||(t[s]=!0);return t}function ire(e,t,r){const s=Array.isArray(e);if(os(e)||s)for(const a in e)Array.isArray(e[a])||os(e[a])&&!are(e[a])?rs(t)||$M(r[a])?r[a]=Array.isArray(e[a])?Kj(e[a],[]):{...Kj(e[a])}:ire(e[a],$a(t)?{}:t[a],r[a]):r[a]=!Ld(e[a],t[a]);return r}var Lg=(e,t)=>ire(e,t,Kj(t));const Z$={value:!1,isValid:!1},X$={value:!0,isValid:!0};var ore=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!rs(e[0].attributes.value)?rs(e[0].value)||e[0].value===""?X$:{value:e[0].value,isValid:!0}:X$:Z$}return Z$},lre=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:s})=>rs(e)?e:t?e===""?NaN:e&&+e:r&&Rl(e)?new Date(e):s?s(e):e;const eO={isValid:!1,value:null};var cre=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,eO):eO;function tO(e){const t=e.ref;return SE(t)?t.files:CE(t)?cre(e.refs).value:sre(t)?[...t.selectedOptions].map(({value:r})=>r):k1(t)?ore(e.refs).value:lre(rs(t.value)?e.ref.value:t.value,e)}var WTe=(e,t,r,s)=>{const a={};for(const i of e){const o=ft(t,i);o&&Yn(a,i,o._f)}return{criteriaMode:r,names:[...e],fields:a,shouldUseNativeValidation:s}},Jj=e=>e instanceof RegExp,Dg=e=>rs(e)?e:Jj(e)?e.source:os(e)?Jj(e.value)?e.value.source:e.value:e,nO=e=>({isOnSubmit:!e||e===Ko.onSubmit,isOnBlur:e===Ko.onBlur,isOnChange:e===Ko.onChange,isOnAll:e===Ko.all,isOnTouch:e===Ko.onTouched});const rO="AsyncFunction";var qTe=e=>!!e&&!!e.validate&&!!(Jo(e.validate)&&e.validate.constructor.name===rO||os(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===rO)),GTe=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),sO=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(s=>e.startsWith(s)&&/^\.\w+/.test(e.slice(s.length))));const Ix=(e,t,r,s)=>{for(const a of r||Object.keys(e)){const i=ft(e,a);if(i){const{_f:o,...l}=i;if(o){if(o.refs&&o.refs[0]&&t(o.refs[0],a)&&!s)return!0;if(o.ref&&t(o.ref,o.name)&&!s)return!0;if(Ix(l,t))break}else if(os(l)&&Ix(l,t))break}}};function aO(e,t,r){const s=ft(e,r);if(s||NE(r))return{error:s,name:r};const a=r.split(".");for(;a.length;){const i=a.join("."),o=ft(t,i),l=ft(e,i);if(o&&!Array.isArray(o)&&r!==i)return{name:r};if(l&&l.type)return{name:i,error:l};a.pop()}return{name:r}}var YTe=(e,t,r,s)=>{r(e);const{name:a,...i}=e;return Ia(i)||Object.keys(i).length>=Object.keys(t).length||Object.keys(i).find(o=>t[o]===(!s||Ko.all))},QTe=(e,t,r)=>!e||!t||e===t||Ex(e).some(s=>s&&(r?s===t:s.startsWith(t)||t.startsWith(s))),KTe=(e,t,r,s,a)=>a.isOnAll?!1:!r&&a.isOnTouch?!(t||e):(r?s.isOnBlur:a.isOnBlur)?!e:(r?s.isOnChange:a.isOnChange)?e:!0,JTe=(e,t)=>!B4(ft(e,t)).length&&Cs(e,t),ZTe=(e,t,r)=>{const s=Ex(ft(e,r));return Yn(s,"root",t[r]),Yn(e,r,s),e},Tw=e=>Rl(e);function iO(e,t,r="validate"){if(Tw(e)||Array.isArray(e)&&e.every(Tw)||_i(e)&&!e)return{type:r,message:Tw(e)?e:"",ref:t}}var qh=e=>os(e)&&!Jj(e)?e:{value:e,message:""},oO=async(e,t,r,s,a,i)=>{const{ref:o,refs:l,required:c,maxLength:d,minLength:u,min:f,max:h,pattern:m,validate:g,name:x,valueAsNumber:y,mount:v}=e._f,b=ft(r,x);if(!v||t.has(x))return{};const w=l?l[0]:o,N=T=>{a&&w.reportValidity&&(w.setCustomValidity(_i(T)?"":T||""),w.reportValidity())},j={},S=CE(o),C=k1(o),k=S||C,M=(y||SE(o))&&rs(o.value)&&rs(b)||Qj(o)&&o.value===""||b===""||Array.isArray(b)&&!b.length,A=rre.bind(null,x,s,j),P=(T,I,L,R=pc.maxLength,G=pc.minLength)=>{const $=T?I:L;j[x]={type:T?R:G,message:$,ref:o,...A(T?R:G,$)}};if(i?!Array.isArray(b)||!b.length:c&&(!k&&(M||$a(b))||_i(b)&&!b||C&&!ore(l).isValid||S&&!cre(l).isValid)){const{value:T,message:I}=Tw(c)?{value:!!c,message:c}:qh(c);if(T&&(j[x]={type:pc.required,message:I,ref:w,...A(pc.required,I)},!s))return N(I),j}if(!M&&(!$a(f)||!$a(h))){let T,I;const L=qh(h),R=qh(f);if(!$a(b)&&!isNaN(b)){const G=o.valueAsNumber||b&&+b;$a(L.value)||(T=G>L.value),$a(R.value)||(I=G<R.value)}else{const G=o.valueAsDate||new Date(b),$=E=>new Date(new Date().toDateString()+" "+E),D=o.type=="time",W=o.type=="week";Rl(L.value)&&b&&(T=D?$(b)>$(L.value):W?b>L.value:G>new Date(L.value)),Rl(R.value)&&b&&(I=D?$(b)<$(R.value):W?b<R.value:G<new Date(R.value))}if((T||I)&&(P(!!T,L.message,R.message,pc.max,pc.min),!s))return N(j[x].message),j}if((d||u)&&!M&&(Rl(b)||i&&Array.isArray(b))){const T=qh(d),I=qh(u),L=!$a(T.value)&&b.length>+T.value,R=!$a(I.value)&&b.length<+I.value;if((L||R)&&(P(L,T.message,I.message),!s))return N(j[x].message),j}if(m&&!M&&Rl(b)){const{value:T,message:I}=qh(m);if(Jj(T)&&!b.match(T)&&(j[x]={type:pc.pattern,message:I,ref:o,...A(pc.pattern,I)},!s))return N(I),j}if(g){if(Jo(g)){const T=await g(b,r),I=iO(T,w);if(I&&(j[x]={...I,...A(pc.validate,I.message)},!s))return N(I.message),j}else if(os(g)){let T={};for(const I in g){if(!Ia(T)&&!s)break;const L=iO(await g[I](b,r),w,I);L&&(T={...L,...A(I,L.message)},N(L.message),s&&(j[x]=T))}if(!Ia(T)&&(j[x]={ref:w,...T},!s))return j}}return N(!0),j};const XTe={mode:Ko.onSubmit,reValidateMode:Ko.onChange,shouldFocusError:!0};function eAe(e={}){let t={...XTe,...e},r={submitCount:0,isDirty:!1,isLoading:Jo(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1};const s={};let a=os(t.defaultValues)||os(t.values)?Xs(t.values||t.defaultValues)||{}:{},i=t.shouldUnregister?{}:Xs(a),o={action:!1,mount:!1,watch:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,d=0;const u={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let f={...u};const h={array:J$(),state:J$()},m=nO(t.mode),g=nO(t.reValidateMode),x=t.criteriaMode===Ko.all,y=J=>oe=>{clearTimeout(d),d=setTimeout(J,oe)},v=async J=>{if(!t.disabled&&(u.isValid||f.isValid||J)){const oe=t.resolver?Ia((await M()).errors):await P(s,!0);oe!==r.isValid&&h.state.next({isValid:oe})}},b=(J,oe)=>{!t.disabled&&(u.isValidating||u.validatingFields||f.isValidating||f.validatingFields)&&((J||Array.from(l.mount)).forEach(ye=>{ye&&(oe?Yn(r.validatingFields,ye,oe):Cs(r.validatingFields,ye))}),h.state.next({validatingFields:r.validatingFields,isValidating:!Ia(r.validatingFields)}))},w=(J,oe=[],ye,Re,He=!0,Fe=!0)=>{if(Re&&ye&&!t.disabled){if(o.action=!0,Fe&&Array.isArray(ft(s,J))){const st=ye(ft(s,J),Re.argA,Re.argB);He&&Yn(s,J,st)}if(Fe&&Array.isArray(ft(r.errors,J))){const st=ye(ft(r.errors,J),Re.argA,Re.argB);He&&Yn(r.errors,J,st),JTe(r.errors,J)}if((u.touchedFields||f.touchedFields)&&Fe&&Array.isArray(ft(r.touchedFields,J))){const st=ye(ft(r.touchedFields,J),Re.argA,Re.argB);He&&Yn(r.touchedFields,J,st)}(u.dirtyFields||f.dirtyFields)&&(r.dirtyFields=Lg(a,i)),h.state.next({name:J,isDirty:I(J,oe),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else Yn(i,J,oe)},N=(J,oe)=>{Yn(r.errors,J,oe),h.state.next({errors:r.errors})},j=J=>{r.errors=J,h.state.next({errors:r.errors,isValid:!1})},S=(J,oe,ye,Re)=>{const He=ft(s,J);if(He){const Fe=ft(i,J,rs(ye)?ft(a,J):ye);rs(Fe)||Re&&Re.defaultChecked||oe?Yn(i,J,oe?Fe:tO(He._f)):G(J,Fe),o.mount&&v()}},C=(J,oe,ye,Re,He)=>{let Fe=!1,st=!1;const Bt={name:J};if(!t.disabled){if(!ye||Re){(u.isDirty||f.isDirty)&&(st=r.isDirty,r.isDirty=Bt.isDirty=I(),Fe=st!==Bt.isDirty);const En=Ld(ft(a,J),oe);st=!!ft(r.dirtyFields,J),En?Cs(r.dirtyFields,J):Yn(r.dirtyFields,J,!0),Bt.dirtyFields=r.dirtyFields,Fe=Fe||(u.dirtyFields||f.dirtyFields)&&st!==!En}if(ye){const En=ft(r.touchedFields,J);En||(Yn(r.touchedFields,J,ye),Bt.touchedFields=r.touchedFields,Fe=Fe||(u.touchedFields||f.touchedFields)&&En!==ye)}Fe&&He&&h.state.next(Bt)}return Fe?Bt:{}},k=(J,oe,ye,Re)=>{const He=ft(r.errors,J),Fe=(u.isValid||f.isValid)&&_i(oe)&&r.isValid!==oe;if(t.delayError&&ye?(c=y(()=>N(J,ye)),c(t.delayError)):(clearTimeout(d),c=null,ye?Yn(r.errors,J,ye):Cs(r.errors,J)),(ye?!Ld(He,ye):He)||!Ia(Re)||Fe){const st={...Re,...Fe&&_i(oe)?{isValid:oe}:{},errors:r.errors,name:J};r={...r,...st},h.state.next(st)}},M=async J=>{b(J,!0);const oe=await t.resolver(i,t.context,WTe(J||l.mount,s,t.criteriaMode,t.shouldUseNativeValidation));return b(J),oe},A=async J=>{const{errors:oe}=await M(J);if(J)for(const ye of J){const Re=ft(oe,ye);Re?Yn(r.errors,ye,Re):Cs(r.errors,ye)}else r.errors=oe;return oe},P=async(J,oe,ye={valid:!0})=>{for(const Re in J){const He=J[Re];if(He){const{_f:Fe,...st}=He;if(Fe){const Bt=l.array.has(Fe.name),En=He._f&&qTe(He._f);En&&u.validatingFields&&b([Re],!0);const jn=await oO(He,l.disabled,i,x,t.shouldUseNativeValidation&&!oe,Bt);if(En&&u.validatingFields&&b([Re]),jn[Fe.name]&&(ye.valid=!1,oe))break;!oe&&(ft(jn,Fe.name)?Bt?ZTe(r.errors,jn,Fe.name):Yn(r.errors,Fe.name,jn[Fe.name]):Cs(r.errors,Fe.name))}!Ia(st)&&await P(st,oe,ye)}}return ye.valid},T=()=>{for(const J of l.unMount){const oe=ft(s,J);oe&&(oe._f.refs?oe._f.refs.every(ye=>!PC(ye)):!PC(oe._f.ref))&&re(J)}l.unMount=new Set},I=(J,oe)=>!t.disabled&&(J&&oe&&Yn(i,J,oe),!Ld(B(),a)),L=(J,oe,ye)=>nre(J,l,{...o.mount?i:rs(oe)?a:Rl(J)?{[J]:oe}:oe},ye,oe),R=J=>B4(ft(o.mount?i:a,J,t.shouldUnregister?ft(a,J,[]):[])),G=(J,oe,ye={})=>{const Re=ft(s,J);let He=oe;if(Re){const Fe=Re._f;Fe&&(!Fe.disabled&&Yn(i,J,lre(oe,Fe)),He=Qj(Fe.ref)&&$a(oe)?"":oe,sre(Fe.ref)?[...Fe.ref.options].forEach(st=>st.selected=He.includes(st.value)):Fe.refs?k1(Fe.ref)?Fe.refs.length>1?Fe.refs.forEach(st=>(!st.defaultChecked||!st.disabled)&&(st.checked=Array.isArray(He)?!!He.find(Bt=>Bt===st.value):He===st.value)):Fe.refs[0]&&(Fe.refs[0].checked=!!He):Fe.refs.forEach(st=>st.checked=st.value===He):SE(Fe.ref)?Fe.ref.value="":(Fe.ref.value=He,Fe.ref.type||h.state.next({name:J,values:Xs(i)})))}(ye.shouldDirty||ye.shouldTouch)&&C(J,He,ye.shouldTouch,ye.shouldDirty,!0),ye.shouldValidate&&F(J)},$=(J,oe,ye)=>{for(const Re in oe){const He=oe[Re],Fe=`${J}.${Re}`,st=ft(s,Fe);(l.array.has(J)||os(He)||st&&!st._f)&&!bf(He)?$(Fe,He,ye):G(Fe,He,ye)}},D=(J,oe,ye={})=>{const Re=ft(s,J),He=l.array.has(J),Fe=Xs(oe);Yn(i,J,Fe),He?(h.array.next({name:J,values:Xs(i)}),(u.isDirty||u.dirtyFields||f.isDirty||f.dirtyFields)&&ye.shouldDirty&&h.state.next({name:J,dirtyFields:Lg(a,i),isDirty:I(J,Fe)})):Re&&!Re._f&&!$a(Fe)?$(J,Fe,ye):G(J,Fe,ye),sO(J,l)&&h.state.next({...r}),h.state.next({name:o.mount?J:void 0,values:Xs(i)})},W=async J=>{o.mount=!0;const oe=J.target;let ye=oe.name,Re=!0;const He=ft(s,ye),Fe=st=>{Re=Number.isNaN(st)||bf(st)&&isNaN(st.getTime())||Ld(st,ft(i,ye,st))};if(He){let st,Bt;const En=oe.type?tO(He._f):Jne(J),jn=J.type===Yj.BLUR||J.type===Yj.FOCUS_OUT,wi=!GTe(He._f)&&!t.resolver&&!ft(r.errors,ye)&&!He._f.deps||KTe(jn,ft(r.touchedFields,ye),r.isSubmitted,g,m),Js=sO(ye,l,jn);Yn(i,ye,En),jn?(He._f.onBlur&&He._f.onBlur(J),c&&c(0)):He._f.onChange&&He._f.onChange(J);const cc=C(ye,En,jn),Eo=!Ia(cc)||Js;if(!jn&&h.state.next({name:ye,type:J.type,values:Xs(i)}),wi)return(u.isValid||f.isValid)&&(t.mode==="onBlur"?jn&&v():jn||v()),Eo&&h.state.next({name:ye,...Js?{}:cc});if(!jn&&Js&&h.state.next({...r}),t.resolver){const{errors:Rs}=await M([ye]);if(Fe(En),Re){const dc=aO(r.errors,s,ye),Ji=aO(Rs,s,dc.name||ye);st=Ji.error,ye=Ji.name,Bt=Ia(Rs)}}else b([ye],!0),st=(await oO(He,l.disabled,i,x,t.shouldUseNativeValidation))[ye],b([ye]),Fe(En),Re&&(st?Bt=!1:(u.isValid||f.isValid)&&(Bt=await P(s,!0)));Re&&(He._f.deps&&F(He._f.deps),k(ye,Bt,st,cc))}},E=(J,oe)=>{if(ft(r.errors,oe)&&J.focus)return J.focus(),1},F=async(J,oe={})=>{let ye,Re;const He=Ex(J);if(t.resolver){const Fe=await A(rs(J)?J:He);ye=Ia(Fe),Re=J?!He.some(st=>ft(Fe,st)):ye}else J?(Re=(await Promise.all(He.map(async Fe=>{const st=ft(s,Fe);return await P(st&&st._f?{[Fe]:st}:st)}))).every(Boolean),!(!Re&&!r.isValid)&&v()):Re=ye=await P(s);return h.state.next({...!Rl(J)||(u.isValid||f.isValid)&&ye!==r.isValid?{}:{name:J},...t.resolver||!J?{isValid:ye}:{},errors:r.errors}),oe.shouldFocus&&!Re&&Ix(s,E,J?He:l.mount),Re},B=J=>{const oe={...o.mount?i:a};return rs(J)?oe:Rl(J)?ft(oe,J):J.map(ye=>ft(oe,ye))},Z=(J,oe)=>({invalid:!!ft((oe||r).errors,J),isDirty:!!ft((oe||r).dirtyFields,J),error:ft((oe||r).errors,J),isValidating:!!ft(r.validatingFields,J),isTouched:!!ft((oe||r).touchedFields,J)}),ne=J=>{J&&Ex(J).forEach(oe=>Cs(r.errors,oe)),h.state.next({errors:J?r.errors:{}})},Y=(J,oe,ye)=>{const Re=(ft(s,J,{_f:{}})._f||{}).ref,He=ft(r.errors,J)||{},{ref:Fe,message:st,type:Bt,...En}=He;Yn(r.errors,J,{...En,...oe,ref:Re}),h.state.next({name:J,errors:r.errors,isValid:!1}),ye&&ye.shouldFocus&&Re&&Re.focus&&Re.focus()},me=(J,oe)=>Jo(J)?h.state.subscribe({next:ye=>J(L(void 0,oe),ye)}):L(J,oe,!0),pe=J=>h.state.subscribe({next:oe=>{QTe(J.name,oe.name,J.exact)&&YTe(oe,J.formState||u,rt,J.reRenderRoot)&&J.callback({values:{...i},...r,...oe})}}).unsubscribe,Me=J=>(o.mount=!0,f={...f,...J.formState},pe({...J,formState:f})),re=(J,oe={})=>{for(const ye of J?Ex(J):l.mount)l.mount.delete(ye),l.array.delete(ye),oe.keepValue||(Cs(s,ye),Cs(i,ye)),!oe.keepError&&Cs(r.errors,ye),!oe.keepDirty&&Cs(r.dirtyFields,ye),!oe.keepTouched&&Cs(r.touchedFields,ye),!oe.keepIsValidating&&Cs(r.validatingFields,ye),!t.shouldUnregister&&!oe.keepDefaultValue&&Cs(a,ye);h.state.next({values:Xs(i)}),h.state.next({...r,...oe.keepDirty?{isDirty:I()}:{}}),!oe.keepIsValid&&v()},de=({disabled:J,name:oe})=>{(_i(J)&&o.mount||J||l.disabled.has(oe))&&(J?l.disabled.add(oe):l.disabled.delete(oe))},he=(J,oe={})=>{let ye=ft(s,J);const Re=_i(oe.disabled)||_i(t.disabled);return Yn(s,J,{...ye||{},_f:{...ye&&ye._f?ye._f:{ref:{name:J}},name:J,mount:!0,...oe}}),l.mount.add(J),ye?de({disabled:_i(oe.disabled)?oe.disabled:t.disabled,name:J}):S(J,!0,oe.value),{...Re?{disabled:oe.disabled||t.disabled}:{},...t.progressive?{required:!!oe.required,min:Dg(oe.min),max:Dg(oe.max),minLength:Dg(oe.minLength),maxLength:Dg(oe.maxLength),pattern:Dg(oe.pattern)}:{},name:J,onChange:W,onBlur:W,ref:He=>{if(He){he(J,oe),ye=ft(s,J);const Fe=rs(He.value)&&He.querySelectorAll&&He.querySelectorAll("input,select,textarea")[0]||He,st=UTe(Fe),Bt=ye._f.refs||[];if(st?Bt.find(En=>En===Fe):Fe===ye._f.ref)return;Yn(s,J,{_f:{...ye._f,...st?{refs:[...Bt.filter(PC),Fe,...Array.isArray(ft(a,J))?[{}]:[]],ref:{type:Fe.type,name:J}}:{ref:Fe}}}),S(J,!1,void 0,Fe)}else ye=ft(s,J,{}),ye._f&&(ye._f.mount=!1),(t.shouldUnregister||oe.shouldUnregister)&&!(Zne(l.array,J)&&o.action)&&l.unMount.add(J)}}},ce=()=>t.shouldFocusError&&Ix(s,E,l.mount),Be=J=>{_i(J)&&(h.state.next({disabled:J}),Ix(s,(oe,ye)=>{const Re=ft(s,ye);Re&&(oe.disabled=Re._f.disabled||J,Array.isArray(Re._f.refs)&&Re._f.refs.forEach(He=>{He.disabled=Re._f.disabled||J}))},0,!1))},le=(J,oe)=>async ye=>{let Re;ye&&(ye.preventDefault&&ye.preventDefault(),ye.persist&&ye.persist());let He=Xs(i);if(h.state.next({isSubmitting:!0}),t.resolver){const{errors:Fe,values:st}=await M();r.errors=Fe,He=st}else await P(s);if(l.disabled.size)for(const Fe of l.disabled)Yn(He,Fe,void 0);if(Cs(r.errors,"root"),Ia(r.errors)){h.state.next({errors:{}});try{await J(He,ye)}catch(Fe){Re=Fe}}else oe&&await oe({...r.errors},ye),ce(),setTimeout(ce);if(h.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Ia(r.errors)&&!Re,submitCount:r.submitCount+1,errors:r.errors}),Re)throw Re},$e=(J,oe={})=>{ft(s,J)&&(rs(oe.defaultValue)?D(J,Xs(ft(a,J))):(D(J,oe.defaultValue),Yn(a,J,Xs(oe.defaultValue))),oe.keepTouched||Cs(r.touchedFields,J),oe.keepDirty||(Cs(r.dirtyFields,J),r.isDirty=oe.defaultValue?I(J,Xs(ft(a,J))):I()),oe.keepError||(Cs(r.errors,J),u.isValid&&v()),h.state.next({...r}))},et=(J,oe={})=>{const ye=J?Xs(J):a,Re=Xs(ye),He=Ia(J),Fe=He?a:Re;if(oe.keepDefaultValues||(a=ye),!oe.keepValues){if(oe.keepDirtyValues){const st=new Set([...l.mount,...Object.keys(Lg(a,i))]);for(const Bt of Array.from(st))ft(r.dirtyFields,Bt)?Yn(Fe,Bt,ft(i,Bt)):D(Bt,ft(Fe,Bt))}else{if(jE&&rs(J))for(const st of l.mount){const Bt=ft(s,st);if(Bt&&Bt._f){const En=Array.isArray(Bt._f.refs)?Bt._f.refs[0]:Bt._f.ref;if(Qj(En)){const jn=En.closest("form");if(jn){jn.reset();break}}}}for(const st of l.mount)D(st,ft(Fe,st))}i=Xs(Fe),h.array.next({values:{...Fe}}),h.state.next({values:{...Fe}})}l={mount:oe.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!u.isValid||!!oe.keepIsValid||!!oe.keepDirtyValues,o.watch=!!t.shouldUnregister,h.state.next({submitCount:oe.keepSubmitCount?r.submitCount:0,isDirty:He?!1:oe.keepDirty?r.isDirty:!!(oe.keepDefaultValues&&!Ld(J,a)),isSubmitted:oe.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:He?{}:oe.keepDirtyValues?oe.keepDefaultValues&&i?Lg(a,i):r.dirtyFields:oe.keepDefaultValues&&J?Lg(a,J):oe.keepDirty?r.dirtyFields:{},touchedFields:oe.keepTouched?r.touchedFields:{},errors:oe.keepErrors?r.errors:{},isSubmitSuccessful:oe.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1})},_e=(J,oe)=>et(Jo(J)?J(i):J,oe),ot=(J,oe={})=>{const ye=ft(s,J),Re=ye&&ye._f;if(Re){const He=Re.refs?Re.refs[0]:Re.ref;He.focus&&(He.focus(),oe.shouldSelect&&Jo(He.select)&&He.select())}},rt=J=>{r={...r,...J}},Se={control:{register:he,unregister:re,getFieldState:Z,handleSubmit:le,setError:Y,_subscribe:pe,_runSchema:M,_getWatch:L,_getDirty:I,_setValid:v,_setFieldArray:w,_setDisabledField:de,_setErrors:j,_getFieldArray:R,_reset:et,_resetDefaultValues:()=>Jo(t.defaultValues)&&t.defaultValues().then(J=>{_e(J,t.resetOptions),h.state.next({isLoading:!1})}),_removeUnmounted:T,_disableForm:Be,_subjects:h,_proxyFormState:u,get _fields(){return s},get _formValues(){return i},get _state(){return o},set _state(J){o=J},get _defaultValues(){return a},get _names(){return l},set _names(J){l=J},get _formState(){return r},get _options(){return t},set _options(J){t={...t,...J}}},subscribe:Me,trigger:F,register:he,handleSubmit:le,watch:me,setValue:D,getValues:B,reset:_e,resetField:$e,clearErrors:ne,unregister:re,setError:Y,setFocus:ot,getFieldState:Z};return{...Se,formControl:Se}}function fi(e={}){const t=Q.useRef(void 0),r=Q.useRef(void 0),[s,a]=Q.useState({isDirty:!1,isValidating:!1,isLoading:Jo(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,defaultValues:Jo(e.defaultValues)?void 0:e.defaultValues});t.current||(t.current={...e.formControl?e.formControl:eAe(e),formState:s},e.formControl&&e.defaultValues&&!Jo(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions));const i=t.current.control;return i._options=e,Q.useLayoutEffect(()=>i._subscribe({formState:i._proxyFormState,callback:()=>a({...i._formState}),reRenderRoot:!0}),[i]),Q.useEffect(()=>i._disableForm(e.disabled),[i,e.disabled]),Q.useEffect(()=>{if(i._proxyFormState.isDirty){const o=i._getDirty();o!==s.isDirty&&i._subjects.state.next({isDirty:o})}},[i,s.isDirty]),Q.useEffect(()=>{e.values&&!Ld(e.values,r.current)?(i._reset(e.values,i._options.resetOptions),r.current=e.values,a(o=>({...o}))):i._resetDefaultValues()},[e.values,i]),Q.useEffect(()=>{e.errors&&!Ia(e.errors)&&i._setErrors(e.errors)},[e.errors,i]),Q.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),Q.useEffect(()=>{e.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[e.shouldUnregister,i]),t.current.formState=tre(s,i),t.current}const lO=(e,t,r)=>{if(e&&"reportValidity"in e){const s=ft(r,t);e.setCustomValidity(s&&s.message||""),e.reportValidity()}},dre=(e,t)=>{for(const r in t.fields){const s=t.fields[r];s&&s.ref&&"reportValidity"in s.ref?lO(s.ref,r,e):s.refs&&s.refs.forEach(a=>lO(a,r,e))}},tAe=(e,t)=>{t.shouldUseNativeValidation&&dre(e,t);const r={};for(const s in e){const a=ft(t.fields,s),i=Object.assign(e[s]||{},{ref:a&&a.ref});if(nAe(t.names||Object.keys(e),s)){const o=Object.assign({},ft(r,s));Yn(o,"root",i),Yn(r,s,o)}else Yn(r,s,i)}return r},nAe=(e,t)=>e.some(r=>r.startsWith(t+"."));var rAe=function(e,t){for(var r={};e.length;){var s=e[0],a=s.code,i=s.message,o=s.path.join(".");if(!r[o])if("unionErrors"in s){var l=s.unionErrors[0].errors[0];r[o]={message:l.message,type:l.code}}else r[o]={message:i,type:a};if("unionErrors"in s&&s.unionErrors.forEach(function(u){return u.errors.forEach(function(f){return e.push(f)})}),t){var c=r[o].types,d=c&&c[s.code];r[o]=rre(o,t,r,a,d?[].concat(d,s.message):s.message)}e.shift()}return r},hi=function(e,t,r){return r===void 0&&(r={}),function(s,a,i){try{return Promise.resolve(function(o,l){try{var c=Promise.resolve(e[r.mode==="sync"?"parse":"parseAsync"](s,t)).then(function(d){return i.shouldUseNativeValidation&&dre({},i),{errors:{},values:r.raw?s:d}})}catch(d){return l(d)}return c&&c.then?c.then(void 0,l):c}(0,function(o){if(function(l){return Array.isArray(l==null?void 0:l.errors)}(o))return{values:{},errors:tAe(rAe(o.errors,!i.shouldUseNativeValidation&&i.criteriaMode==="all"),i)};throw o}))}catch(o){return Promise.reject(o)}}};const De=Symbol.for("drizzle:entityKind");function fs(e,t){if(!e||typeof e!="object")return!1;if(e instanceof t)return!0;if(!Object.prototype.hasOwnProperty.call(t,De))throw new Error(`Class "${t.name??"<unknown>"}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`);let r=Object.getPrototypeOf(e).constructor;if(r)for(;r;){if(De in r&&r[De]===t[De])return!0;r=Object.getPrototypeOf(r)}return!1}var YB;YB=De;class Bp{constructor(t,r){ue(this,"name");ue(this,"keyAsName");ue(this,"primary");ue(this,"notNull");ue(this,"default");ue(this,"defaultFn");ue(this,"onUpdateFn");ue(this,"hasDefault");ue(this,"isUnique");ue(this,"uniqueName");ue(this,"uniqueType");ue(this,"dataType");ue(this,"columnType");ue(this,"enumValues");ue(this,"generated");ue(this,"generatedIdentity");ue(this,"config");this.table=t,this.config=r,this.name=r.name,this.keyAsName=r.keyAsName,this.notNull=r.notNull,this.default=r.default,this.defaultFn=r.defaultFn,this.onUpdateFn=r.onUpdateFn,this.hasDefault=r.hasDefault,this.primary=r.primaryKey,this.isUnique=r.isUnique,this.uniqueName=r.uniqueName,this.uniqueType=r.uniqueType,this.dataType=r.dataType,this.columnType=r.columnType,this.generated=r.generated,this.generatedIdentity=r.generatedIdentity}mapFromDriverValue(t){return t}mapToDriverValue(t){return t}shouldDisableInsert(){return this.config.generated!==void 0&&this.config.generated.type!=="byDefault"}}ue(Bp,YB,"Column");var QB;QB=De;class ure{constructor(t,r,s){ue(this,"config");ue(this,"$default",this.$defaultFn);ue(this,"$onUpdate",this.$onUpdateFn);this.config={name:t,keyAsName:t==="",notNull:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,uniqueType:void 0,dataType:r,columnType:s,generated:void 0}}$type(){return this}notNull(){return this.config.notNull=!0,this}default(t){return this.config.default=t,this.config.hasDefault=!0,this}$defaultFn(t){return this.config.defaultFn=t,this.config.hasDefault=!0,this}$onUpdateFn(t){return this.config.onUpdateFn=t,this.config.hasDefault=!0,this}primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}setName(t){this.config.name===""&&(this.config.name=t)}}ue(ure,QB,"ColumnBuilder");const Wm=Symbol.for("drizzle:Name");var KB;KB=De;class kE{constructor(t,r){ue(this,"reference");ue(this,"_onUpdate","no action");ue(this,"_onDelete","no action");this.reference=()=>{const{name:s,columns:a,foreignColumns:i}=t();return{name:s,columns:a,foreignTable:i[0].table,foreignColumns:i}},r&&(this._onUpdate=r.onUpdate,this._onDelete=r.onDelete)}onUpdate(t){return this._onUpdate=t===void 0?"no action":t,this}onDelete(t){return this._onDelete=t===void 0?"no action":t,this}build(t){return new fre(t,this)}}ue(kE,KB,"PgForeignKeyBuilder");var JB;JB=De;class fre{constructor(t,r){ue(this,"reference");ue(this,"onUpdate");ue(this,"onDelete");this.table=t,this.reference=r.reference,this.onUpdate=r._onUpdate,this.onDelete=r._onDelete}getName(){const{name:t,columns:r,foreignColumns:s}=this.reference(),a=r.map(l=>l.name),i=s.map(l=>l.name),o=[this.table[Wm],...a,s[0].table[Wm],...i];return t??`${o.join("_")}_fk`}}ue(fre,JB,"PgForeignKey");function sAe(e){function t(){const{name:r,columns:s,foreignColumns:a}=e;return{name:r,columns:s,foreignColumns:a}}return new kE(t)}function aAe(e,...t){return e(...t)}function iAe(e,t){return`${e[Wm]}_${t.join("_")}_unique`}function cO(e,t,r){for(let s=t;s<e.length;s++){const a=e[s];if(a==="\\"){s++;continue}if(a==='"')return[e.slice(t,s).replace(/\\/g,""),s+1];if(!r&&(a===","||a==="}"))return[e.slice(t,s).replace(/\\/g,""),s]}return[e.slice(t).replace(/\\/g,""),e.length]}function hre(e,t=0){const r=[];let s=t,a=!1;for(;s<e.length;){const i=e[s];if(i===","){(a||s===t)&&r.push(""),a=!0,s++;continue}if(a=!1,i==="\\"){s+=2;continue}if(i==='"'){const[c,d]=cO(e,s+1,!0);r.push(c),s=d;continue}if(i==="}")return[r,s+1];if(i==="{"){const[c,d]=hre(e,s+1);r.push(c),s=d;continue}const[o,l]=cO(e,s,!1);r.push(o),s=l}return[r,s]}function oAe(e){const[t]=hre(e,1);return t}function mre(e){return`{${e.map(t=>Array.isArray(t)?mre(t):typeof t=="string"?`"${t.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`:`${t}`).join(",")}}`}var ZB,XB;class An extends(XB=ure,ZB=De,XB){constructor(){super(...arguments);ue(this,"foreignKeyConfigs",[])}array(r){return new gre(this.config.name,this,r)}references(r,s={}){return this.foreignKeyConfigs.push({ref:r,actions:s}),this}unique(r,s){return this.config.isUnique=!0,this.config.uniqueName=r,this.config.uniqueType=s==null?void 0:s.nulls,this}generatedAlwaysAs(r){return this.config.generated={as:r,type:"always",mode:"stored"},this}buildForeignKeys(r,s){return this.foreignKeyConfigs.map(({ref:a,actions:i})=>aAe((o,l)=>{const c=new kE(()=>{const d=o();return{columns:[r],foreignColumns:[d]}});return l.onUpdate&&c.onUpdate(l.onUpdate),l.onDelete&&c.onDelete(l.onDelete),c.build(s)},a,i))}buildExtraConfigColumn(r){return new pre(r,this.config)}}ue(An,ZB,"PgColumnBuilder");var eU,tU;class fn extends(tU=Bp,eU=De,tU){constructor(t,r){r.uniqueName||(r.uniqueName=iAe(t,[r.name])),super(t,r),this.table=t}}ue(fn,eU,"PgColumn");var nU,rU;class pre extends(rU=fn,nU=De,rU){constructor(){super(...arguments);ue(this,"indexConfig",{order:this.config.order??"asc",nulls:this.config.nulls??"last",opClass:this.config.opClass});ue(this,"defaultConfig",{order:"asc",nulls:"last",opClass:void 0})}getSQLType(){return this.getSQLType()}asc(){return this.indexConfig.order="asc",this}desc(){return this.indexConfig.order="desc",this}nullsFirst(){return this.indexConfig.nulls="first",this}nullsLast(){return this.indexConfig.nulls="last",this}op(r){return this.indexConfig.opClass=r,this}}ue(pre,nU,"ExtraConfigColumn");var sU;sU=De;class Aw{constructor(t,r,s,a){ue(this,"name");ue(this,"keyAsName");ue(this,"type");ue(this,"indexConfig");this.name=t,this.keyAsName=r,this.type=s,this.indexConfig=a}}ue(Aw,sU,"IndexedColumn");var aU,iU;class gre extends(iU=An,aU=De,iU){constructor(t,r,s){super(t,"array","PgArray"),this.config.baseBuilder=r,this.config.size=s}build(t){const r=this.config.baseBuilder.build(t);return new OM(t,this.config,r)}}ue(gre,aU,"PgArrayBuilder");var oU,lU;const kN=class kN extends(lU=fn,oU=De,lU){constructor(r,s,a,i){super(r,s);ue(this,"size");this.baseColumn=a,this.range=i,this.size=s.size}getSQLType(){return`${this.baseColumn.getSQLType()}[${typeof this.size=="number"?this.size:""}]`}mapFromDriverValue(r){return typeof r=="string"&&(r=oAe(r)),r.map(s=>this.baseColumn.mapFromDriverValue(s))}mapToDriverValue(r,s=!1){const a=r.map(i=>i===null?null:fs(this.baseColumn,kN)?this.baseColumn.mapToDriverValue(i,!0):this.baseColumn.mapToDriverValue(i));return s?a:mre(a)}};ue(kN,oU,"PgArray");let OM=kN;const RM=Symbol.for("drizzle:isPgEnum");function lAe(e){return!!e&&typeof e=="function"&&RM in e&&e[RM]===!0}var cU,dU;class xre extends(dU=An,cU=De,dU){constructor(t,r){super(t,"string","PgEnumColumn"),this.config.enum=r}build(t){return new yre(t,this.config)}}ue(xre,cU,"PgEnumColumnBuilder");var uU,fU;class yre extends(fU=fn,uU=De,fU){constructor(r,s){super(r,s);ue(this,"enum",this.config.enum);ue(this,"enumValues",this.config.enum.enumValues);this.enum=s.enum}getSQLType(){return this.enum.enumName}}ue(yre,uU,"PgEnumColumn");function ME(e,t){return cAe(e,t,void 0)}function cAe(e,t,r){const s=Object.assign(a=>new xre(a??"",s),{enumName:e,enumValues:t,schema:r,[RM]:!0});return s}var hU;hU=De;class _E{constructor(t,r,s,a=!1){this._={brand:"Subquery",sql:t,selectedFields:r,alias:s,isWith:a}}}ue(_E,hU,"Subquery");const dAe={startActiveSpan(e,t){return t()}},qm=Symbol.for("drizzle:ViewBaseConfig"),TC=Symbol.for("drizzle:Schema"),dO=Symbol.for("drizzle:Columns"),uO=Symbol.for("drizzle:ExtraConfigColumns"),AC=Symbol.for("drizzle:OriginalName"),EC=Symbol.for("drizzle:BaseName"),Zj=Symbol.for("drizzle:IsAlias"),fO=Symbol.for("drizzle:ExtraConfigBuilder"),vre=Symbol.for("drizzle:IsDrizzleTable");var mU,pU,gU,xU,yU,vU,bU,wU,jU,NU;NU=De,jU=Wm,wU=AC,bU=TC,vU=dO,yU=uO,xU=EC,gU=Zj,pU=vre,mU=fO;class za{constructor(t,r,s){ue(this,jU);ue(this,wU);ue(this,bU);ue(this,vU);ue(this,yU);ue(this,xU);ue(this,gU,!1);ue(this,pU,!0);ue(this,mU);this[Wm]=this[AC]=t,this[TC]=r,this[EC]=s}}ue(za,NU,"Table"),ue(za,"Symbol",{Name:Wm,Schema:TC,OriginalName:AC,Columns:dO,ExtraConfigColumns:uO,BaseName:EC,IsAlias:Zj,ExtraConfigBuilder:fO});function bre(e){return typeof e=="object"&&e!==null&&vre in e}function uAe(e){return e!=null&&typeof e.getSQL=="function"}function fAe(e){var r;const t={sql:"",params:[]};for(const s of e)t.sql+=s.sql,t.params.push(...s.params),(r=s.typings)!=null&&r.length&&(t.typings||(t.typings=[]),t.typings.push(...s.typings));return t}var SU;SU=De;class ao{constructor(t){ue(this,"value");this.value=Array.isArray(t)?t:[t]}getSQL(){return new Kr([this])}}ue(ao,SU,"StringChunk");var CU;CU=De;const mf=class mf{constructor(t){ue(this,"decoder",wre);ue(this,"shouldInlineParams",!1);this.queryChunks=t}append(t){return this.queryChunks.push(...t.queryChunks),this}toQuery(t){return dAe.startActiveSpan("drizzle.buildSQL",r=>{const s=this.buildQueryFromSourceParams(this.queryChunks,t);return r==null||r.setAttributes({"drizzle.query.text":s.sql,"drizzle.query.params":JSON.stringify(s.params)}),s})}buildQueryFromSourceParams(t,r){const s=Object.assign({},r,{inlineParams:r.inlineParams||this.shouldInlineParams,paramStartIndex:r.paramStartIndex||{value:0}}),{casing:a,escapeName:i,escapeParam:o,prepareTyping:l,inlineParams:c,paramStartIndex:d}=s;return fAe(t.map(u=>{var f;if(fs(u,ao))return{sql:u.value.join(""),params:[]};if(fs(u,Xj))return{sql:i(u.value),params:[]};if(u===void 0)return{sql:"",params:[]};if(Array.isArray(u)){const h=[new ao("(")];for(const[m,g]of u.entries())h.push(g),m<u.length-1&&h.push(new ao(", "));return h.push(new ao(")")),this.buildQueryFromSourceParams(h,s)}if(fs(u,mf))return this.buildQueryFromSourceParams(u.queryChunks,{...s,inlineParams:c||u.shouldInlineParams});if(fs(u,za)){const h=u[za.Symbol.Schema],m=u[za.Symbol.Name];return{sql:h===void 0||u[Zj]?i(m):i(h)+"."+i(m),params:[]}}if(fs(u,Bp)){const h=a.getColumnCasing(u);if(r.invokeSource==="indexes")return{sql:i(h),params:[]};const m=u.table[za.Symbol.Schema];return{sql:u.table[Zj]||m===void 0?i(u.table[za.Symbol.Name])+"."+i(h):i(m)+"."+i(u.table[za.Symbol.Name])+"."+i(h),params:[]}}if(fs(u,Sre)){const h=u[qm].schema,m=u[qm].name;return{sql:h===void 0||u[qm].isAlias?i(m):i(h)+"."+i(m),params:[]}}if(fs(u,PE)){if(fs(u.value,t2))return{sql:o(d.value++,u),params:[u],typings:["none"]};const h=u.value===null?null:u.encoder.mapToDriverValue(u.value);if(fs(h,mf))return this.buildQueryFromSourceParams([h],s);if(c)return{sql:this.mapInlineParam(h,s),params:[]};let m=["none"];return l&&(m=[l(u.encoder)]),{sql:o(d.value++,h),params:[h],typings:m}}return fs(u,t2)?{sql:o(d.value++,u),params:[u],typings:["none"]}:fs(u,mf.Aliased)&&u.fieldAlias!==void 0?{sql:i(u.fieldAlias),params:[]}:fs(u,_E)?u._.isWith?{sql:i(u._.alias),params:[]}:this.buildQueryFromSourceParams([new ao("("),u._.sql,new ao(") "),new Xj(u._.alias)],s):lAe(u)?u.schema?{sql:i(u.schema)+"."+i(u.enumName),params:[]}:{sql:i(u.enumName),params:[]}:uAe(u)?(f=u.shouldOmitSQLParens)!=null&&f.call(u)?this.buildQueryFromSourceParams([u.getSQL()],s):this.buildQueryFromSourceParams([new ao("("),u.getSQL(),new ao(")")],s):c?{sql:this.mapInlineParam(u,s),params:[]}:{sql:o(d.value++,u),params:[u],typings:["none"]}}))}mapInlineParam(t,{escapeString:r}){if(t===null)return"null";if(typeof t=="number"||typeof t=="boolean")return t.toString();if(typeof t=="string")return r(t);if(typeof t=="object"){const s=t.toString();return r(s==="[object Object]"?JSON.stringify(t):s)}throw new Error("Unexpected param value: "+t)}getSQL(){return this}as(t){return t===void 0?this:new mf.Aliased(this,t)}mapWith(t){return this.decoder=typeof t=="function"?{mapFromDriverValue:t}:t,this}inlineParams(){return this.shouldInlineParams=!0,this}if(t){return t?this:void 0}};ue(mf,CU,"SQL");let Kr=mf;var kU;kU=De;class Xj{constructor(t){ue(this,"brand");this.value=t}getSQL(){return new Kr([this])}}ue(Xj,kU,"Name");const wre={mapFromDriverValue:e=>e},jre={mapToDriverValue:e=>e};({...wre,...jre});var MU;MU=De;class PE{constructor(t,r=jre){ue(this,"brand");this.value=t,this.encoder=r}getSQL(){return new Kr([this])}}ue(PE,MU,"Param");function e2(e,...t){const r=[];(t.length>0||e.length>0&&e[0]!=="")&&r.push(new ao(e[0]));for(const[s,a]of t.entries())r.push(a,new ao(e[s+1]));return new Kr(r)}(e=>{function t(){return new Kr([])}e.empty=t;function r(c){return new Kr(c)}e.fromList=r;function s(c){return new Kr([new ao(c)])}e.raw=s;function a(c,d){const u=[];for(const[f,h]of c.entries())f>0&&d!==void 0&&u.push(d),u.push(h);return new Kr(u)}e.join=a;function i(c){return new Xj(c)}e.identifier=i;function o(c){return new t2(c)}e.placeholder=o;function l(c,d){return new PE(c,d)}e.param=l})(e2||(e2={}));(e=>{var r;r=De;const s=class s{constructor(i,o){ue(this,"isSelectionField",!1);this.sql=i,this.fieldAlias=o}getSQL(){return this.sql}clone(){return new s(this.sql,this.fieldAlias)}};ue(s,r,"SQL.Aliased");let t=s;e.Aliased=t})(Kr||(Kr={}));var _U;_U=De;class t2{constructor(t){this.name=t}getSQL(){return new Kr([this])}}ue(t2,_U,"Placeholder");const Nre=Symbol.for("drizzle:IsDrizzleView");var PU,TU,AU;AU=De,TU=qm,PU=Nre;class Sre{constructor({name:t,schema:r,selectedFields:s,query:a}){ue(this,TU);ue(this,PU,!0);this[qm]={name:t,originalName:t,schema:r,selectedFields:s,query:a,isExisting:!a,isAlias:!1}}getSQL(){return new Kr([this])}}ue(Sre,AU,"View");function hAe(e){return typeof e=="object"&&e!==null&&Nre in e}Bp.prototype.getSQL=function(){return new Kr([this])};za.prototype.getSQL=function(){return new Kr([this])};_E.prototype.getSQL=function(){return new Kr([this])};function mAe(e){return e[za.Symbol.Columns]}function pAe(e){return e[qm].selectedFields}function Qs(e,t){return{name:typeof e=="string"&&e.length>0?e:"",config:typeof e=="object"?e:t}}var EU,IU;class M1 extends(IU=An,EU=De,IU){generatedAlwaysAsIdentity(t){if(t){const{name:r,...s}=t;this.config.generatedIdentity={type:"always",sequenceName:r,sequenceOptions:s}}else this.config.generatedIdentity={type:"always"};return this.config.hasDefault=!0,this.config.notNull=!0,this}generatedByDefaultAsIdentity(t){if(t){const{name:r,...s}=t;this.config.generatedIdentity={type:"byDefault",sequenceName:r,sequenceOptions:s}}else this.config.generatedIdentity={type:"byDefault"};return this.config.hasDefault=!0,this.config.notNull=!0,this}}ue(M1,EU,"PgIntColumnBaseBuilder");var LU,DU;class Cre extends(DU=M1,LU=De,DU){constructor(t){super(t,"number","PgBigInt53")}build(t){return new kre(t,this.config)}}ue(Cre,LU,"PgBigInt53Builder");var $U,OU;class kre extends(OU=fn,$U=De,OU){getSQLType(){return"bigint"}mapFromDriverValue(t){return typeof t=="number"?t:Number(t)}}ue(kre,$U,"PgBigInt53");var RU,FU;class Mre extends(FU=M1,RU=De,FU){constructor(t){super(t,"bigint","PgBigInt64")}build(t){return new _re(t,this.config)}}ue(Mre,RU,"PgBigInt64Builder");var zU,BU;class _re extends(BU=fn,zU=De,BU){getSQLType(){return"bigint"}mapFromDriverValue(t){return BigInt(t)}}ue(_re,zU,"PgBigInt64");function gAe(e,t){const{name:r,config:s}=Qs(e,t);return s.mode==="number"?new Cre(r):new Mre(r)}var UU,VU;class Pre extends(VU=An,UU=De,VU){constructor(t){super(t,"number","PgBigSerial53"),this.config.hasDefault=!0,this.config.notNull=!0}build(t){return new Tre(t,this.config)}}ue(Pre,UU,"PgBigSerial53Builder");var HU,WU;class Tre extends(WU=fn,HU=De,WU){getSQLType(){return"bigserial"}mapFromDriverValue(t){return typeof t=="number"?t:Number(t)}}ue(Tre,HU,"PgBigSerial53");var qU,GU;class Are extends(GU=An,qU=De,GU){constructor(t){super(t,"bigint","PgBigSerial64"),this.config.hasDefault=!0}build(t){return new Ere(t,this.config)}}ue(Are,qU,"PgBigSerial64Builder");var YU,QU;class Ere extends(QU=fn,YU=De,QU){getSQLType(){return"bigserial"}mapFromDriverValue(t){return BigInt(t)}}ue(Ere,YU,"PgBigSerial64");function xAe(e,t){const{name:r,config:s}=Qs(e,t);return s.mode==="number"?new Pre(r):new Are(r)}var KU,JU;class Ire extends(JU=An,KU=De,JU){constructor(t){super(t,"boolean","PgBoolean")}build(t){return new Lre(t,this.config)}}ue(Ire,KU,"PgBooleanBuilder");var ZU,XU;class Lre extends(XU=fn,ZU=De,XU){getSQLType(){return"boolean"}}ue(Lre,ZU,"PgBoolean");function Oe(e){return new Ire(e??"")}var eV,tV;class Dre extends(tV=An,eV=De,tV){constructor(t,r){super(t,"string","PgChar"),this.config.length=r.length,this.config.enumValues=r.enum}build(t){return new $re(t,this.config)}}ue(Dre,eV,"PgCharBuilder");var nV,rV;class $re extends(rV=fn,nV=De,rV){constructor(){super(...arguments);ue(this,"length",this.config.length);ue(this,"enumValues",this.config.enumValues)}getSQLType(){return this.length===void 0?"char":`char(${this.length})`}}ue($re,nV,"PgChar");function yAe(e,t={}){const{name:r,config:s}=Qs(e,t);return new Dre(r,s)}var sV,aV;class Ore extends(aV=An,sV=De,aV){constructor(t){super(t,"string","PgCidr")}build(t){return new Rre(t,this.config)}}ue(Ore,sV,"PgCidrBuilder");var iV,oV;class Rre extends(oV=fn,iV=De,oV){getSQLType(){return"cidr"}}ue(Rre,iV,"PgCidr");function vAe(e){return new Ore(e??"")}var lV,cV;class Fre extends(cV=An,lV=De,cV){constructor(t,r,s){super(t,"custom","PgCustomColumn"),this.config.fieldConfig=r,this.config.customTypeParams=s}build(t){return new zre(t,this.config)}}ue(Fre,lV,"PgCustomColumnBuilder");var dV,uV;class zre extends(uV=fn,dV=De,uV){constructor(r,s){super(r,s);ue(this,"sqlName");ue(this,"mapTo");ue(this,"mapFrom");this.sqlName=s.customTypeParams.dataType(s.fieldConfig),this.mapTo=s.customTypeParams.toDriver,this.mapFrom=s.customTypeParams.fromDriver}getSQLType(){return this.sqlName}mapFromDriverValue(r){return typeof this.mapFrom=="function"?this.mapFrom(r):r}mapToDriverValue(r){return typeof this.mapTo=="function"?this.mapTo(r):r}}ue(zre,dV,"PgCustomColumn");function bAe(e){return(t,r)=>{const{name:s,config:a}=Qs(t,r);return new Fre(s,a,e)}}var fV,hV;class X0 extends(hV=An,fV=De,hV){defaultNow(){return this.default(e2`now()`)}}ue(X0,fV,"PgDateColumnBaseBuilder");var mV,pV;class Bre extends(pV=X0,mV=De,pV){constructor(t){super(t,"date","PgDate")}build(t){return new Ure(t,this.config)}}ue(Bre,mV,"PgDateBuilder");var gV,xV;class Ure extends(xV=fn,gV=De,xV){getSQLType(){return"date"}mapFromDriverValue(t){return new Date(t)}mapToDriverValue(t){return t.toISOString()}}ue(Ure,gV,"PgDate");var yV,vV;class Vre extends(vV=X0,yV=De,vV){constructor(t){super(t,"string","PgDateString")}build(t){return new Hre(t,this.config)}}ue(Vre,yV,"PgDateStringBuilder");var bV,wV;class Hre extends(wV=fn,bV=De,wV){getSQLType(){return"date"}}ue(Hre,bV,"PgDateString");function gi(e,t){const{name:r,config:s}=Qs(e,t);return(s==null?void 0:s.mode)==="date"?new Bre(r):new Vre(r)}var jV,NV;class Wre extends(NV=An,jV=De,NV){constructor(t){super(t,"number","PgDoublePrecision")}build(t){return new qre(t,this.config)}}ue(Wre,jV,"PgDoublePrecisionBuilder");var SV,CV;class qre extends(CV=fn,SV=De,CV){getSQLType(){return"double precision"}mapFromDriverValue(t){return typeof t=="string"?Number.parseFloat(t):t}}ue(qre,SV,"PgDoublePrecision");function wAe(e){return new Wre(e??"")}var kV,MV;class Gre extends(MV=An,kV=De,MV){constructor(t){super(t,"string","PgInet")}build(t){return new Yre(t,this.config)}}ue(Gre,kV,"PgInetBuilder");var _V,PV;class Yre extends(PV=fn,_V=De,PV){getSQLType(){return"inet"}}ue(Yre,_V,"PgInet");function jAe(e){return new Gre(e??"")}var TV,AV;class Qre extends(AV=M1,TV=De,AV){constructor(t){super(t,"number","PgInteger")}build(t){return new Kre(t,this.config)}}ue(Qre,TV,"PgIntegerBuilder");var EV,IV;class Kre extends(IV=fn,EV=De,IV){getSQLType(){return"integer"}mapFromDriverValue(t){return typeof t=="string"?Number.parseInt(t):t}}ue(Kre,EV,"PgInteger");function X(e){return new Qre(e??"")}var LV,DV;class Jre extends(DV=An,LV=De,DV){constructor(t,r){super(t,"string","PgInterval"),this.config.intervalConfig=r}build(t){return new Zre(t,this.config)}}ue(Jre,LV,"PgIntervalBuilder");var $V,OV;class Zre extends(OV=fn,$V=De,OV){constructor(){super(...arguments);ue(this,"fields",this.config.intervalConfig.fields);ue(this,"precision",this.config.intervalConfig.precision)}getSQLType(){const r=this.fields?` ${this.fields}`:"",s=this.precision?`(${this.precision})`:"";return`interval${r}${s}`}}ue(Zre,$V,"PgInterval");function NAe(e,t={}){const{name:r,config:s}=Qs(e,t);return new Jre(r,s)}var RV,FV;class Xre extends(FV=An,RV=De,FV){constructor(t){super(t,"json","PgJson")}build(t){return new ese(t,this.config)}}ue(Xre,RV,"PgJsonBuilder");var zV,BV;class ese extends(BV=fn,zV=De,BV){constructor(t,r){super(t,r)}getSQLType(){return"json"}mapToDriverValue(t){return JSON.stringify(t)}mapFromDriverValue(t){if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t}}ue(ese,zV,"PgJson");function SAe(e){return new Xre(e??"")}var UV,VV;class tse extends(VV=An,UV=De,VV){constructor(t){super(t,"json","PgJsonb")}build(t){return new nse(t,this.config)}}ue(tse,UV,"PgJsonbBuilder");var HV,WV;class nse extends(WV=fn,HV=De,WV){constructor(t,r){super(t,r)}getSQLType(){return"jsonb"}mapToDriverValue(t){return JSON.stringify(t)}mapFromDriverValue(t){if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t}}ue(nse,HV,"PgJsonb");function On(e){return new tse(e??"")}var qV,GV;class rse extends(GV=An,qV=De,GV){constructor(t){super(t,"array","PgLine")}build(t){return new sse(t,this.config)}}ue(rse,qV,"PgLineBuilder");var YV,QV;class sse extends(QV=fn,YV=De,QV){getSQLType(){return"line"}mapFromDriverValue(t){const[r,s,a]=t.slice(1,-1).split(",");return[Number.parseFloat(r),Number.parseFloat(s),Number.parseFloat(a)]}mapToDriverValue(t){return`{${t[0]},${t[1]},${t[2]}}`}}ue(sse,YV,"PgLine");var KV,JV;class ase extends(JV=An,KV=De,JV){constructor(t){super(t,"json","PgLineABC")}build(t){return new ise(t,this.config)}}ue(ase,KV,"PgLineABCBuilder");var ZV,XV;class ise extends(XV=fn,ZV=De,XV){getSQLType(){return"line"}mapFromDriverValue(t){const[r,s,a]=t.slice(1,-1).split(",");return{a:Number.parseFloat(r),b:Number.parseFloat(s),c:Number.parseFloat(a)}}mapToDriverValue(t){return`{${t.a},${t.b},${t.c}}`}}ue(ise,ZV,"PgLineABC");function CAe(e,t){const{name:r,config:s}=Qs(e,t);return!(s!=null&&s.mode)||s.mode==="tuple"?new rse(r):new ase(r)}var eH,tH;class ose extends(tH=An,eH=De,tH){constructor(t){super(t,"string","PgMacaddr")}build(t){return new lse(t,this.config)}}ue(ose,eH,"PgMacaddrBuilder");var nH,rH;class lse extends(rH=fn,nH=De,rH){getSQLType(){return"macaddr"}}ue(lse,nH,"PgMacaddr");function kAe(e){return new ose(e??"")}var sH,aH;class cse extends(aH=An,sH=De,aH){constructor(t){super(t,"string","PgMacaddr8")}build(t){return new dse(t,this.config)}}ue(cse,sH,"PgMacaddr8Builder");var iH,oH;class dse extends(oH=fn,iH=De,oH){getSQLType(){return"macaddr8"}}ue(dse,iH,"PgMacaddr8");function MAe(e){return new cse(e??"")}var lH,cH;class use extends(cH=An,lH=De,cH){constructor(t,r,s){super(t,"string","PgNumeric"),this.config.precision=r,this.config.scale=s}build(t){return new fse(t,this.config)}}ue(use,lH,"PgNumericBuilder");var dH,uH;class fse extends(uH=fn,dH=De,uH){constructor(r,s){super(r,s);ue(this,"precision");ue(this,"scale");this.precision=s.precision,this.scale=s.scale}getSQLType(){return this.precision!==void 0&&this.scale!==void 0?`numeric(${this.precision}, ${this.scale})`:this.precision===void 0?"numeric":`numeric(${this.precision})`}}ue(fse,dH,"PgNumeric");function wt(e,t){const{name:r,config:s}=Qs(e,t);return new use(r,s==null?void 0:s.precision,s==null?void 0:s.scale)}var fH,hH;class hse extends(hH=An,fH=De,hH){constructor(t){super(t,"array","PgPointTuple")}build(t){return new mse(t,this.config)}}ue(hse,fH,"PgPointTupleBuilder");var mH,pH;class mse extends(pH=fn,mH=De,pH){getSQLType(){return"point"}mapFromDriverValue(t){if(typeof t=="string"){const[r,s]=t.slice(1,-1).split(",");return[Number.parseFloat(r),Number.parseFloat(s)]}return[t.x,t.y]}mapToDriverValue(t){return`(${t[0]},${t[1]})`}}ue(mse,mH,"PgPointTuple");var gH,xH;class pse extends(xH=An,gH=De,xH){constructor(t){super(t,"json","PgPointObject")}build(t){return new gse(t,this.config)}}ue(pse,gH,"PgPointObjectBuilder");var yH,vH;class gse extends(vH=fn,yH=De,vH){getSQLType(){return"point"}mapFromDriverValue(t){if(typeof t=="string"){const[r,s]=t.slice(1,-1).split(",");return{x:Number.parseFloat(r),y:Number.parseFloat(s)}}return t}mapToDriverValue(t){return`(${t.x},${t.y})`}}ue(gse,yH,"PgPointObject");function _Ae(e,t){const{name:r,config:s}=Qs(e,t);return!(s!=null&&s.mode)||s.mode==="tuple"?new hse(r):new pse(r)}function PAe(e){const t=[];for(let r=0;r<e.length;r+=2)t.push(Number.parseInt(e.slice(r,r+2),16));return new Uint8Array(t)}function hO(e,t){const r=new ArrayBuffer(8),s=new DataView(r);for(let a=0;a<8;a++)s.setUint8(a,e[t+a]);return s.getFloat64(0,!0)}function xse(e){const t=PAe(e);let r=0;const s=t[r];r+=1;const a=new DataView(t.buffer),i=a.getUint32(r,s===1);if(r+=4,i&536870912&&(a.getUint32(r,s===1),r+=4),(i&65535)===1){const o=hO(t,r);r+=8;const l=hO(t,r);return r+=8,[o,l]}throw new Error("Unsupported geometry type")}var bH,wH;class yse extends(wH=An,bH=De,wH){constructor(t){super(t,"array","PgGeometry")}build(t){return new vse(t,this.config)}}ue(yse,bH,"PgGeometryBuilder");var jH,NH;class vse extends(NH=fn,jH=De,NH){getSQLType(){return"geometry(point)"}mapFromDriverValue(t){return xse(t)}mapToDriverValue(t){return`point(${t[0]} ${t[1]})`}}ue(vse,jH,"PgGeometry");var SH,CH;class bse extends(CH=An,SH=De,CH){constructor(t){super(t,"json","PgGeometryObject")}build(t){return new wse(t,this.config)}}ue(bse,SH,"PgGeometryObjectBuilder");var kH,MH;class wse extends(MH=fn,kH=De,MH){getSQLType(){return"geometry(point)"}mapFromDriverValue(t){const r=xse(t);return{x:r[0],y:r[1]}}mapToDriverValue(t){return`point(${t.x} ${t.y})`}}ue(wse,kH,"PgGeometryObject");function TAe(e,t){const{name:r,config:s}=Qs(e,t);return!(s!=null&&s.mode)||s.mode==="tuple"?new yse(r):new bse(r)}var _H,PH;class jse extends(PH=An,_H=De,PH){constructor(t,r){super(t,"number","PgReal"),this.config.length=r}build(t){return new Nse(t,this.config)}}ue(jse,_H,"PgRealBuilder");var TH,AH;class Nse extends(AH=fn,TH=De,AH){constructor(r,s){super(r,s);ue(this,"mapFromDriverValue",r=>typeof r=="string"?Number.parseFloat(r):r)}getSQLType(){return"real"}}ue(Nse,TH,"PgReal");function AAe(e){return new jse(e??"")}var EH,IH;class Sse extends(IH=An,EH=De,IH){constructor(t){super(t,"number","PgSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(t){return new Cse(t,this.config)}}ue(Sse,EH,"PgSerialBuilder");var LH,DH;class Cse extends(DH=fn,LH=De,DH){getSQLType(){return"serial"}}ue(Cse,LH,"PgSerial");function Ae(e){return new Sse(e??"")}var $H,OH;class kse extends(OH=M1,$H=De,OH){constructor(t){super(t,"number","PgSmallInt")}build(t){return new Mse(t,this.config)}}ue(kse,$H,"PgSmallIntBuilder");var RH,FH;class Mse extends(FH=fn,RH=De,FH){constructor(){super(...arguments);ue(this,"mapFromDriverValue",r=>typeof r=="string"?Number(r):r)}getSQLType(){return"smallint"}}ue(Mse,RH,"PgSmallInt");function EAe(e){return new kse(e??"")}var zH,BH;class _se extends(BH=An,zH=De,BH){constructor(t){super(t,"number","PgSmallSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(t){return new Pse(t,this.config)}}ue(_se,zH,"PgSmallSerialBuilder");var UH,VH;class Pse extends(VH=fn,UH=De,VH){getSQLType(){return"smallserial"}}ue(Pse,UH,"PgSmallSerial");function IAe(e){return new _se(e??"")}var HH,WH;class Tse extends(WH=An,HH=De,WH){constructor(t,r){super(t,"string","PgText"),this.config.enumValues=r.enum}build(t){return new Ase(t,this.config)}}ue(Tse,HH,"PgTextBuilder");var qH,GH;class Ase extends(GH=fn,qH=De,GH){constructor(){super(...arguments);ue(this,"enumValues",this.config.enumValues)}getSQLType(){return"text"}}ue(Ase,qH,"PgText");function V(e,t={}){const{name:r,config:s}=Qs(e,t);return new Tse(r,s)}var YH,QH;class Ese extends(QH=X0,YH=De,QH){constructor(t,r,s){super(t,"string","PgTime"),this.withTimezone=r,this.precision=s,this.config.withTimezone=r,this.config.precision=s}build(t){return new Ise(t,this.config)}}ue(Ese,YH,"PgTimeBuilder");var KH,JH;class Ise extends(JH=fn,KH=De,JH){constructor(r,s){super(r,s);ue(this,"withTimezone");ue(this,"precision");this.withTimezone=s.withTimezone,this.precision=s.precision}getSQLType(){return`time${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}ue(Ise,KH,"PgTime");function LAe(e,t={}){const{name:r,config:s}=Qs(e,t);return new Ese(r,s.withTimezone??!1,s.precision)}var ZH,XH;class Lse extends(XH=X0,ZH=De,XH){constructor(t,r,s){super(t,"date","PgTimestamp"),this.config.withTimezone=r,this.config.precision=s}build(t){return new Dse(t,this.config)}}ue(Lse,ZH,"PgTimestampBuilder");var eW,tW;class Dse extends(tW=fn,eW=De,tW){constructor(r,s){super(r,s);ue(this,"withTimezone");ue(this,"precision");ue(this,"mapFromDriverValue",r=>new Date(this.withTimezone?r:r+"+0000"));ue(this,"mapToDriverValue",r=>r.toISOString());this.withTimezone=s.withTimezone,this.precision=s.precision}getSQLType(){return`timestamp${this.precision===void 0?"":` (${this.precision})`}${this.withTimezone?" with time zone":""}`}}ue(Dse,eW,"PgTimestamp");var nW,rW;class $se extends(rW=X0,nW=De,rW){constructor(t,r,s){super(t,"string","PgTimestampString"),this.config.withTimezone=r,this.config.precision=s}build(t){return new Ose(t,this.config)}}ue($se,nW,"PgTimestampStringBuilder");var sW,aW;class Ose extends(aW=fn,sW=De,aW){constructor(r,s){super(r,s);ue(this,"withTimezone");ue(this,"precision");this.withTimezone=s.withTimezone,this.precision=s.precision}getSQLType(){return`timestamp${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}ue(Ose,sW,"PgTimestampString");function K(e,t={}){const{name:r,config:s}=Qs(e,t);return(s==null?void 0:s.mode)==="string"?new $se(r,s.withTimezone??!1,s.precision):new Lse(r,(s==null?void 0:s.withTimezone)??!1,s==null?void 0:s.precision)}var iW,oW;class Rse extends(oW=An,iW=De,oW){constructor(t){super(t,"string","PgUUID")}defaultRandom(){return this.default(e2`gen_random_uuid()`)}build(t){return new Fse(t,this.config)}}ue(Rse,iW,"PgUUIDBuilder");var lW,cW;class Fse extends(cW=fn,lW=De,cW){getSQLType(){return"uuid"}}ue(Fse,lW,"PgUUID");function DAe(e){return new Rse(e??"")}var dW,uW;class zse extends(uW=An,dW=De,uW){constructor(t,r){super(t,"string","PgVarchar"),this.config.length=r.length,this.config.enumValues=r.enum}build(t){return new Bse(t,this.config)}}ue(zse,dW,"PgVarcharBuilder");var fW,hW;class Bse extends(hW=fn,fW=De,hW){constructor(){super(...arguments);ue(this,"length",this.config.length);ue(this,"enumValues",this.config.enumValues)}getSQLType(){return this.length===void 0?"varchar":`varchar(${this.length})`}}ue(Bse,fW,"PgVarchar");function ae(e,t={}){const{name:r,config:s}=Qs(e,t);return new zse(r,s)}var mW,pW;class Use extends(pW=An,mW=De,pW){constructor(t,r){super(t,"string","PgBinaryVector"),this.config.dimensions=r.dimensions}build(t){return new Vse(t,this.config)}}ue(Use,mW,"PgBinaryVectorBuilder");var gW,xW;class Vse extends(xW=fn,gW=De,xW){constructor(){super(...arguments);ue(this,"dimensions",this.config.dimensions)}getSQLType(){return`bit(${this.dimensions})`}}ue(Vse,gW,"PgBinaryVector");function $Ae(e,t){const{name:r,config:s}=Qs(e,t);return new Use(r,s)}var yW,vW;class Hse extends(vW=An,yW=De,vW){constructor(t,r){super(t,"array","PgHalfVector"),this.config.dimensions=r.dimensions}build(t){return new Wse(t,this.config)}}ue(Hse,yW,"PgHalfVectorBuilder");var bW,wW;class Wse extends(wW=fn,bW=De,wW){constructor(){super(...arguments);ue(this,"dimensions",this.config.dimensions)}getSQLType(){return`halfvec(${this.dimensions})`}mapToDriverValue(r){return JSON.stringify(r)}mapFromDriverValue(r){return r.slice(1,-1).split(",").map(s=>Number.parseFloat(s))}}ue(Wse,bW,"PgHalfVector");function OAe(e,t){const{name:r,config:s}=Qs(e,t);return new Hse(r,s)}var jW,NW;class qse extends(NW=An,jW=De,NW){constructor(t,r){super(t,"string","PgSparseVector"),this.config.dimensions=r.dimensions}build(t){return new Gse(t,this.config)}}ue(qse,jW,"PgSparseVectorBuilder");var SW,CW;class Gse extends(CW=fn,SW=De,CW){constructor(){super(...arguments);ue(this,"dimensions",this.config.dimensions)}getSQLType(){return`sparsevec(${this.dimensions})`}}ue(Gse,SW,"PgSparseVector");function RAe(e,t){const{name:r,config:s}=Qs(e,t);return new qse(r,s)}var kW,MW;class Yse extends(MW=An,kW=De,MW){constructor(t,r){super(t,"array","PgVector"),this.config.dimensions=r.dimensions}build(t){return new Qse(t,this.config)}}ue(Yse,kW,"PgVectorBuilder");var _W,PW;class Qse extends(PW=fn,_W=De,PW){constructor(){super(...arguments);ue(this,"dimensions",this.config.dimensions)}getSQLType(){return`vector(${this.dimensions})`}mapToDriverValue(r){return JSON.stringify(r)}mapFromDriverValue(r){return r.slice(1,-1).split(",").map(s=>Number.parseFloat(s))}}ue(Qse,_W,"PgVector");function FAe(e,t){const{name:r,config:s}=Qs(e,t);return new Yse(r,s)}function zAe(){return{bigint:gAe,bigserial:xAe,boolean:Oe,char:yAe,cidr:vAe,customType:bAe,date:gi,doublePrecision:wAe,inet:jAe,integer:X,interval:NAe,json:SAe,jsonb:On,line:CAe,macaddr:kAe,macaddr8:MAe,numeric:wt,point:_Ae,geometry:TAe,real:AAe,serial:Ae,smallint:EAe,smallserial:IAe,text:V,time:LAe,timestamp:K,uuid:DAe,varchar:ae,bit:$Ae,halfvec:OAe,sparsevec:RAe,vector:FAe}}const FM=Symbol.for("drizzle:PgInlineForeignKeys"),mO=Symbol.for("drizzle:EnableRLS");var TW,AW,EW,IW,LW;class Lx extends(LW=za,IW=De,EW=FM,AW=mO,TW=za.Symbol.ExtraConfigBuilder,LW){constructor(){super(...arguments);ue(this,EW,[]);ue(this,AW,!1);ue(this,TW)}}ue(Lx,IW,"PgTable"),ue(Lx,"Symbol",Object.assign({},za.Symbol,{InlineForeignKeys:FM,EnableRLS:mO}));function BAe(e,t,r,s,a=e){const i=new Lx(e,s,a),o=typeof t=="function"?t(zAe()):t,l=Object.fromEntries(Object.entries(o).map(([u,f])=>{const h=f;h.setName(u);const m=h.build(i);return i[FM].push(...h.buildForeignKeys(m,i)),[u,m]})),c=Object.fromEntries(Object.entries(o).map(([u,f])=>{const h=f;h.setName(u);const m=h.buildExtraConfigColumn(i);return[u,m]})),d=Object.assign(i,l);return d[za.Symbol.Columns]=l,d[za.Symbol.ExtraConfigColumns]=c,r&&(d[Lx.Symbol.ExtraConfigBuilder]=r),Object.assign(d,{enableRLS:()=>(d[Lx.Symbol.EnableRLS]=!0,d)})}const Te=(e,t,r)=>BAe(e,t,r,void 0);var DW;DW=De;class TE{constructor(t,r){this.unique=t,this.name=r}on(...t){return new Ew(t.map(r=>{if(fs(r,Kr))return r;r=r;const s=new Aw(r.name,!!r.keyAsName,r.columnType,r.indexConfig);return r.indexConfig=JSON.parse(JSON.stringify(r.defaultConfig)),s}),this.unique,!1,this.name)}onOnly(...t){return new Ew(t.map(r=>{if(fs(r,Kr))return r;r=r;const s=new Aw(r.name,!!r.keyAsName,r.columnType,r.indexConfig);return r.indexConfig=r.defaultConfig,s}),this.unique,!0,this.name)}using(t,...r){return new Ew(r.map(s=>{if(fs(s,Kr))return s;s=s;const a=new Aw(s.name,!!s.keyAsName,s.columnType,s.indexConfig);return s.indexConfig=JSON.parse(JSON.stringify(s.defaultConfig)),a}),this.unique,!0,this.name,t)}}ue(TE,DW,"PgIndexBuilderOn");var $W;$W=De;class Ew{constructor(t,r,s,a,i="btree"){ue(this,"config");this.config={name:a,columns:t,unique:r,only:s,method:i}}concurrently(){return this.config.concurrently=!0,this}with(t){return this.config.with=t,this}where(t){return this.config.where=t,this}build(t){return new Kse(this.config,t)}}ue(Ew,$W,"PgIndexBuilder");var OW;OW=De;class Kse{constructor(t,r){ue(this,"config");this.config={...t,table:r}}}ue(Kse,OW,"PgIndex");function Ge(e){return new TE(!1,e)}function ei(e){return new TE(!0,e)}var In;(function(e){e.assertEqual=a=>a;function t(a){}e.assertIs=t;function r(a){throw new Error}e.assertNever=r,e.arrayToEnum=a=>{const i={};for(const o of a)i[o]=o;return i},e.getValidEnumValues=a=>{const i=e.objectKeys(a).filter(l=>typeof a[a[l]]!="number"),o={};for(const l of i)o[l]=a[l];return e.objectValues(o)},e.objectValues=a=>e.objectKeys(a).map(function(i){return a[i]}),e.objectKeys=typeof Object.keys=="function"?a=>Object.keys(a):a=>{const i=[];for(const o in a)Object.prototype.hasOwnProperty.call(a,o)&&i.push(o);return i},e.find=(a,i)=>{for(const o of a)if(i(o))return o},e.isInteger=typeof Number.isInteger=="function"?a=>Number.isInteger(a):a=>typeof a=="number"&&isFinite(a)&&Math.floor(a)===a;function s(a,i=" | "){return a.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}e.joinValues=s,e.jsonStringifyReplacer=(a,i)=>typeof i=="bigint"?i.toString():i})(In||(In={}));var zM;(function(e){e.mergeShapes=(t,r)=>({...t,...r})})(zM||(zM={}));const vt=In.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Sc=e=>{switch(typeof e){case"undefined":return vt.undefined;case"string":return vt.string;case"number":return isNaN(e)?vt.nan:vt.number;case"boolean":return vt.boolean;case"function":return vt.function;case"bigint":return vt.bigint;case"symbol":return vt.symbol;case"object":return Array.isArray(e)?vt.array:e===null?vt.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?vt.promise:typeof Map<"u"&&e instanceof Map?vt.map:typeof Set<"u"&&e instanceof Set?vt.set:typeof Date<"u"&&e instanceof Date?vt.date:vt.object;default:return vt.unknown}},Ke=In.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),UAe=e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:");class Ri extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=s=>{this.issues=[...this.issues,s]},this.addIssues=(s=[])=>{this.issues=[...this.issues,...s]};const r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=t}format(t){const r=t||function(i){return i.message},s={_errors:[]},a=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(a);else if(o.code==="invalid_return_type")a(o.returnTypeError);else if(o.code==="invalid_arguments")a(o.argumentsError);else if(o.path.length===0)s._errors.push(r(o));else{let l=s,c=0;for(;c<o.path.length;){const d=o.path[c];c===o.path.length-1?(l[d]=l[d]||{_errors:[]},l[d]._errors.push(r(o))):l[d]=l[d]||{_errors:[]},l=l[d],c++}}};return a(this),s}static assert(t){if(!(t instanceof Ri))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,In.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=r=>r.message){const r={},s=[];for(const a of this.issues)a.path.length>0?(r[a.path[0]]=r[a.path[0]]||[],r[a.path[0]].push(t(a))):s.push(t(a));return{formErrors:s,fieldErrors:r}}get formErrors(){return this.flatten()}}Ri.create=e=>new Ri(e);const Up=(e,t)=>{let r;switch(e.code){case Ke.invalid_type:e.received===vt.undefined?r="Required":r=`Expected ${e.expected}, received ${e.received}`;break;case Ke.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,In.jsonStringifyReplacer)}`;break;case Ke.unrecognized_keys:r=`Unrecognized key(s) in object: ${In.joinValues(e.keys,", ")}`;break;case Ke.invalid_union:r="Invalid input";break;case Ke.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${In.joinValues(e.options)}`;break;case Ke.invalid_enum_value:r=`Invalid enum value. Expected ${In.joinValues(e.options)}, received '${e.received}'`;break;case Ke.invalid_arguments:r="Invalid function arguments";break;case Ke.invalid_return_type:r="Invalid function return type";break;case Ke.invalid_date:r="Invalid date";break;case Ke.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:In.assertNever(e.validation):e.validation!=="regex"?r=`Invalid ${e.validation}`:r="Invalid";break;case Ke.too_small:e.type==="array"?r=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?r=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?r=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?r=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:r="Invalid input";break;case Ke.too_big:e.type==="array"?r=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?r=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?r=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?r=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?r=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:r="Invalid input";break;case Ke.custom:r="Invalid input";break;case Ke.invalid_intersection_types:r="Intersection results could not be merged";break;case Ke.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case Ke.not_finite:r="Number must be finite";break;default:r=t.defaultError,In.assertNever(e)}return{message:r}};let Jse=Up;function VAe(e){Jse=e}function n2(){return Jse}const r2=e=>{const{data:t,path:r,errorMaps:s,issueData:a}=e,i=[...r,...a.path||[]],o={...a,path:i};if(a.message!==void 0)return{...a,path:i,message:a.message};let l="";const c=s.filter(d=>!!d).slice().reverse();for(const d of c)l=d(o,{data:t,defaultError:l}).message;return{...a,path:i,message:l}},HAe=[];function mt(e,t){const r=n2(),s=r2({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,r,r===Up?void 0:Up].filter(a=>!!a)});e.common.issues.push(s)}class Na{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,r){const s=[];for(const a of r){if(a.status==="aborted")return Zt;a.status==="dirty"&&t.dirty(),s.push(a.value)}return{status:t.value,value:s}}static async mergeObjectAsync(t,r){const s=[];for(const a of r){const i=await a.key,o=await a.value;s.push({key:i,value:o})}return Na.mergeObjectSync(t,s)}static mergeObjectSync(t,r){const s={};for(const a of r){const{key:i,value:o}=a;if(i.status==="aborted"||o.status==="aborted")return Zt;i.status==="dirty"&&t.dirty(),o.status==="dirty"&&t.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||a.alwaysSet)&&(s[i.value]=o.value)}return{status:t.value,value:s}}}const Zt=Object.freeze({status:"aborted"}),jm=e=>({status:"dirty",value:e}),Ka=e=>({status:"valid",value:e}),BM=e=>e.status==="aborted",UM=e=>e.status==="dirty",ch=e=>e.status==="valid",Dy=e=>typeof Promise<"u"&&e instanceof Promise;function s2(e,t,r,s){if(typeof t=="function"?e!==t||!0:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t.get(e)}function Zse(e,t,r,s,a){if(typeof t=="function"?e!==t||!0:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t.set(e,r),r}var It;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(It||(It={}));var ix,ox;class Xl{constructor(t,r,s,a){this._cachedPath=[],this.parent=t,this.data=r,this._path=s,this._key=a}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const pO=(e,t)=>{if(ch(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const r=new Ri(e.common.issues);return this._error=r,this._error}}};function hn(e){if(!e)return{};const{errorMap:t,invalid_type_error:r,required_error:s,description:a}=e;if(t&&(r||s))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:a}:{errorMap:(o,l)=>{var c,d;const{message:u}=e;return o.code==="invalid_enum_value"?{message:u??l.defaultError}:typeof l.data>"u"?{message:(c=u??s)!==null&&c!==void 0?c:l.defaultError}:o.code!=="invalid_type"?{message:l.defaultError}:{message:(d=u??r)!==null&&d!==void 0?d:l.defaultError}},description:a}}class wn{get description(){return this._def.description}_getType(t){return Sc(t.data)}_getOrReturnCtx(t,r){return r||{common:t.parent.common,data:t.data,parsedType:Sc(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new Na,ctx:{common:t.parent.common,data:t.data,parsedType:Sc(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const r=this._parse(t);if(Dy(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(t){const r=this._parse(t);return Promise.resolve(r)}parse(t,r){const s=this.safeParse(t,r);if(s.success)return s.data;throw s.error}safeParse(t,r){var s;const a={common:{issues:[],async:(s=r==null?void 0:r.async)!==null&&s!==void 0?s:!1,contextualErrorMap:r==null?void 0:r.errorMap},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Sc(t)},i=this._parseSync({data:t,path:a.path,parent:a});return pO(a,i)}"~validate"(t){var r,s;const a={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Sc(t)};if(!this["~standard"].async)try{const i=this._parseSync({data:t,path:[],parent:a});return ch(i)?{value:i.value}:{issues:a.common.issues}}catch(i){!((s=(r=i==null?void 0:i.message)===null||r===void 0?void 0:r.toLowerCase())===null||s===void 0)&&s.includes("encountered")&&(this["~standard"].async=!0),a.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:a}).then(i=>ch(i)?{value:i.value}:{issues:a.common.issues})}async parseAsync(t,r){const s=await this.safeParseAsync(t,r);if(s.success)return s.data;throw s.error}async safeParseAsync(t,r){const s={common:{issues:[],contextualErrorMap:r==null?void 0:r.errorMap,async:!0},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Sc(t)},a=this._parse({data:t,path:s.path,parent:s}),i=await(Dy(a)?a:Promise.resolve(a));return pO(s,i)}refine(t,r){const s=a=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(a):r;return this._refinement((a,i)=>{const o=t(a),l=()=>i.addIssue({code:Ke.custom,...s(a)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(l(),!1)):o?!0:(l(),!1)})}refinement(t,r){return this._refinement((s,a)=>t(s)?!0:(a.addIssue(typeof r=="function"?r(s,a):r),!1))}_refinement(t){return new xl({schema:this,typeName:Qt.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:r=>this["~validate"](r)}}optional(){return Wl.create(this,this._def)}nullable(){return _u.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return il.create(this)}promise(){return Hp.create(this,this._def)}or(t){return Fy.create([this,t],this._def)}and(t){return zy.create(this,t,this._def)}transform(t){return new xl({...hn(this._def),schema:this,typeName:Qt.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const r=typeof t=="function"?t:()=>t;return new Wy({...hn(this._def),innerType:this,defaultValue:r,typeName:Qt.ZodDefault})}brand(){return new AE({typeName:Qt.ZodBranded,type:this,...hn(this._def)})}catch(t){const r=typeof t=="function"?t:()=>t;return new qy({...hn(this._def),innerType:this,catchValue:r,typeName:Qt.ZodCatch})}describe(t){const r=this.constructor;return new r({...this._def,description:t})}pipe(t){return _1.create(this,t)}readonly(){return Gy.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const WAe=/^c[^\s-]{8,}$/i,qAe=/^[0-9a-z]+$/,GAe=/^[0-9A-HJKMNP-TV-Z]{26}$/i,YAe=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,QAe=/^[a-z0-9_-]{21}$/i,KAe=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,JAe=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,ZAe=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,XAe="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let IC;const eEe=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,tEe=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,nEe=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,rEe=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,sEe=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,aEe=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Xse="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",iEe=new RegExp(`^${Xse}$`);function eae(e){let t="[0-5]\\d";e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`);const r=e.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${r}`}function oEe(e){return new RegExp(`^${eae(e)}$`)}function tae(e){let t=`${Xse}T${eae(e)}`;const r=[];return r.push(e.local?"Z?":"Z"),e.offset&&r.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${r.join("|")})`,new RegExp(`^${t}$`)}function lEe(e,t){return!!((t==="v4"||!t)&&eEe.test(e)||(t==="v6"||!t)&&nEe.test(e))}function cEe(e,t){if(!KAe.test(e))return!1;try{const[r]=e.split("."),s=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),a=JSON.parse(atob(s));return!(typeof a!="object"||a===null||!a.typ||!a.alg||t&&a.alg!==t)}catch{return!1}}function dEe(e,t){return!!((t==="v4"||!t)&&tEe.test(e)||(t==="v6"||!t)&&rEe.test(e))}class tl extends wn{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==vt.string){const i=this._getOrReturnCtx(t);return mt(i,{code:Ke.invalid_type,expected:vt.string,received:i.parsedType}),Zt}const s=new Na;let a;for(const i of this._def.checks)if(i.kind==="min")t.data.length<i.value&&(a=this._getOrReturnCtx(t,a),mt(a,{code:Ke.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),s.dirty());else if(i.kind==="max")t.data.length>i.value&&(a=this._getOrReturnCtx(t,a),mt(a,{code:Ke.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),s.dirty());else if(i.kind==="length"){const o=t.data.length>i.value,l=t.data.length<i.value;(o||l)&&(a=this._getOrReturnCtx(t,a),o?mt(a,{code:Ke.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):l&&mt(a,{code:Ke.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),s.dirty())}else if(i.kind==="email")ZAe.test(t.data)||(a=this._getOrReturnCtx(t,a),mt(a,{validation:"email",code:Ke.invalid_string,message:i.message}),s.dirty());else if(i.kind==="emoji")IC||(IC=new RegExp(XAe,"u")),IC.test(t.data)||(a=this._getOrReturnCtx(t,a),mt(a,{validation:"emoji",code:Ke.invalid_string,message:i.message}),s.dirty());else if(i.kind==="uuid")YAe.test(t.data)||(a=this._getOrReturnCtx(t,a),mt(a,{validation:"uuid",code:Ke.invalid_string,message:i.message}),s.dirty());else if(i.kind==="nanoid")QAe.test(t.data)||(a=this._getOrReturnCtx(t,a),mt(a,{validation:"nanoid",code:Ke.invalid_string,message:i.message}),s.dirty());else if(i.kind==="cuid")WAe.test(t.data)||(a=this._getOrReturnCtx(t,a),mt(a,{validation:"cuid",code:Ke.invalid_string,message:i.message}),s.dirty());else if(i.kind==="cuid2")qAe.test(t.data)||(a=this._getOrReturnCtx(t,a),mt(a,{validation:"cuid2",code:Ke.invalid_string,message:i.message}),s.dirty());else if(i.kind==="ulid")GAe.test(t.data)||(a=this._getOrReturnCtx(t,a),mt(a,{validation:"ulid",code:Ke.invalid_string,message:i.message}),s.dirty());else if(i.kind==="url")try{new URL(t.data)}catch{a=this._getOrReturnCtx(t,a),mt(a,{validation:"url",code:Ke.invalid_string,message:i.message}),s.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(t.data)||(a=this._getOrReturnCtx(t,a),mt(a,{validation:"regex",code:Ke.invalid_string,message:i.message}),s.dirty())):i.kind==="trim"?t.data=t.data.trim():i.kind==="includes"?t.data.includes(i.value,i.position)||(a=this._getOrReturnCtx(t,a),mt(a,{code:Ke.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),s.dirty()):i.kind==="toLowerCase"?t.data=t.data.toLowerCase():i.kind==="toUpperCase"?t.data=t.data.toUpperCase():i.kind==="startsWith"?t.data.startsWith(i.value)||(a=this._getOrReturnCtx(t,a),mt(a,{code:Ke.invalid_string,validation:{startsWith:i.value},message:i.message}),s.dirty()):i.kind==="endsWith"?t.data.endsWith(i.value)||(a=this._getOrReturnCtx(t,a),mt(a,{code:Ke.invalid_string,validation:{endsWith:i.value},message:i.message}),s.dirty()):i.kind==="datetime"?tae(i).test(t.data)||(a=this._getOrReturnCtx(t,a),mt(a,{code:Ke.invalid_string,validation:"datetime",message:i.message}),s.dirty()):i.kind==="date"?iEe.test(t.data)||(a=this._getOrReturnCtx(t,a),mt(a,{code:Ke.invalid_string,validation:"date",message:i.message}),s.dirty()):i.kind==="time"?oEe(i).test(t.data)||(a=this._getOrReturnCtx(t,a),mt(a,{code:Ke.invalid_string,validation:"time",message:i.message}),s.dirty()):i.kind==="duration"?JAe.test(t.data)||(a=this._getOrReturnCtx(t,a),mt(a,{validation:"duration",code:Ke.invalid_string,message:i.message}),s.dirty()):i.kind==="ip"?lEe(t.data,i.version)||(a=this._getOrReturnCtx(t,a),mt(a,{validation:"ip",code:Ke.invalid_string,message:i.message}),s.dirty()):i.kind==="jwt"?cEe(t.data,i.alg)||(a=this._getOrReturnCtx(t,a),mt(a,{validation:"jwt",code:Ke.invalid_string,message:i.message}),s.dirty()):i.kind==="cidr"?dEe(t.data,i.version)||(a=this._getOrReturnCtx(t,a),mt(a,{validation:"cidr",code:Ke.invalid_string,message:i.message}),s.dirty()):i.kind==="base64"?sEe.test(t.data)||(a=this._getOrReturnCtx(t,a),mt(a,{validation:"base64",code:Ke.invalid_string,message:i.message}),s.dirty()):i.kind==="base64url"?aEe.test(t.data)||(a=this._getOrReturnCtx(t,a),mt(a,{validation:"base64url",code:Ke.invalid_string,message:i.message}),s.dirty()):In.assertNever(i);return{status:s.value,value:t.data}}_regex(t,r,s){return this.refinement(a=>t.test(a),{validation:r,code:Ke.invalid_string,...It.errToObj(s)})}_addCheck(t){return new tl({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...It.errToObj(t)})}url(t){return this._addCheck({kind:"url",...It.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...It.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...It.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...It.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...It.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...It.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...It.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...It.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...It.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...It.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...It.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...It.errToObj(t)})}datetime(t){var r,s;return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(r=t==null?void 0:t.offset)!==null&&r!==void 0?r:!1,local:(s=t==null?void 0:t.local)!==null&&s!==void 0?s:!1,...It.errToObj(t==null?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,...It.errToObj(t==null?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",...It.errToObj(t)})}regex(t,r){return this._addCheck({kind:"regex",regex:t,...It.errToObj(r)})}includes(t,r){return this._addCheck({kind:"includes",value:t,position:r==null?void 0:r.position,...It.errToObj(r==null?void 0:r.message)})}startsWith(t,r){return this._addCheck({kind:"startsWith",value:t,...It.errToObj(r)})}endsWith(t,r){return this._addCheck({kind:"endsWith",value:t,...It.errToObj(r)})}min(t,r){return this._addCheck({kind:"min",value:t,...It.errToObj(r)})}max(t,r){return this._addCheck({kind:"max",value:t,...It.errToObj(r)})}length(t,r){return this._addCheck({kind:"length",value:t,...It.errToObj(r)})}nonempty(t){return this.min(1,It.errToObj(t))}trim(){return new tl({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new tl({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new tl({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxLength(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}}tl.create=e=>{var t;return new tl({checks:[],typeName:Qt.ZodString,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...hn(e)})};function uEe(e,t){const r=(e.toString().split(".")[1]||"").length,s=(t.toString().split(".")[1]||"").length,a=r>s?r:s,i=parseInt(e.toFixed(a).replace(".","")),o=parseInt(t.toFixed(a).replace(".",""));return i%o/Math.pow(10,a)}class Cu extends wn{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==vt.number){const i=this._getOrReturnCtx(t);return mt(i,{code:Ke.invalid_type,expected:vt.number,received:i.parsedType}),Zt}let s;const a=new Na;for(const i of this._def.checks)i.kind==="int"?In.isInteger(t.data)||(s=this._getOrReturnCtx(t,s),mt(s,{code:Ke.invalid_type,expected:"integer",received:"float",message:i.message}),a.dirty()):i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(s=this._getOrReturnCtx(t,s),mt(s,{code:Ke.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(s=this._getOrReturnCtx(t,s),mt(s,{code:Ke.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="multipleOf"?uEe(t.data,i.value)!==0&&(s=this._getOrReturnCtx(t,s),mt(s,{code:Ke.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):i.kind==="finite"?Number.isFinite(t.data)||(s=this._getOrReturnCtx(t,s),mt(s,{code:Ke.not_finite,message:i.message}),a.dirty()):In.assertNever(i);return{status:a.value,value:t.data}}gte(t,r){return this.setLimit("min",t,!0,It.toString(r))}gt(t,r){return this.setLimit("min",t,!1,It.toString(r))}lte(t,r){return this.setLimit("max",t,!0,It.toString(r))}lt(t,r){return this.setLimit("max",t,!1,It.toString(r))}setLimit(t,r,s,a){return new Cu({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:s,message:It.toString(a)}]})}_addCheck(t){return new Cu({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:It.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:It.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:It.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:It.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:It.toString(t)})}multipleOf(t,r){return this._addCheck({kind:"multipleOf",value:t,message:It.toString(r)})}finite(t){return this._addCheck({kind:"finite",message:It.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:It.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:It.toString(t)})}get minValue(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxValue(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&In.isInteger(t.value))}get isFinite(){let t=null,r=null;for(const s of this._def.checks){if(s.kind==="finite"||s.kind==="int"||s.kind==="multipleOf")return!0;s.kind==="min"?(r===null||s.value>r)&&(r=s.value):s.kind==="max"&&(t===null||s.value<t)&&(t=s.value)}return Number.isFinite(r)&&Number.isFinite(t)}}Cu.create=e=>new Cu({checks:[],typeName:Qt.ZodNumber,coerce:(e==null?void 0:e.coerce)||!1,...hn(e)});class ku extends wn{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==vt.bigint)return this._getInvalidInput(t);let s;const a=new Na;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(s=this._getOrReturnCtx(t,s),mt(s,{code:Ke.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(s=this._getOrReturnCtx(t,s),mt(s,{code:Ke.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="multipleOf"?t.data%i.value!==BigInt(0)&&(s=this._getOrReturnCtx(t,s),mt(s,{code:Ke.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):In.assertNever(i);return{status:a.value,value:t.data}}_getInvalidInput(t){const r=this._getOrReturnCtx(t);return mt(r,{code:Ke.invalid_type,expected:vt.bigint,received:r.parsedType}),Zt}gte(t,r){return this.setLimit("min",t,!0,It.toString(r))}gt(t,r){return this.setLimit("min",t,!1,It.toString(r))}lte(t,r){return this.setLimit("max",t,!0,It.toString(r))}lt(t,r){return this.setLimit("max",t,!1,It.toString(r))}setLimit(t,r,s,a){return new ku({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:s,message:It.toString(a)}]})}_addCheck(t){return new ku({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:It.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:It.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:It.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:It.toString(t)})}multipleOf(t,r){return this._addCheck({kind:"multipleOf",value:t,message:It.toString(r)})}get minValue(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxValue(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}}ku.create=e=>{var t;return new ku({checks:[],typeName:Qt.ZodBigInt,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...hn(e)})};class $y extends wn{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==vt.boolean){const s=this._getOrReturnCtx(t);return mt(s,{code:Ke.invalid_type,expected:vt.boolean,received:s.parsedType}),Zt}return Ka(t.data)}}$y.create=e=>new $y({typeName:Qt.ZodBoolean,coerce:(e==null?void 0:e.coerce)||!1,...hn(e)});class dh extends wn{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==vt.date){const i=this._getOrReturnCtx(t);return mt(i,{code:Ke.invalid_type,expected:vt.date,received:i.parsedType}),Zt}if(isNaN(t.data.getTime())){const i=this._getOrReturnCtx(t);return mt(i,{code:Ke.invalid_date}),Zt}const s=new Na;let a;for(const i of this._def.checks)i.kind==="min"?t.data.getTime()<i.value&&(a=this._getOrReturnCtx(t,a),mt(a,{code:Ke.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),s.dirty()):i.kind==="max"?t.data.getTime()>i.value&&(a=this._getOrReturnCtx(t,a),mt(a,{code:Ke.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),s.dirty()):In.assertNever(i);return{status:s.value,value:new Date(t.data.getTime())}}_addCheck(t){return new dh({...this._def,checks:[...this._def.checks,t]})}min(t,r){return this._addCheck({kind:"min",value:t.getTime(),message:It.toString(r)})}max(t,r){return this._addCheck({kind:"max",value:t.getTime(),message:It.toString(r)})}get minDate(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t!=null?new Date(t):null}}dh.create=e=>new dh({checks:[],coerce:(e==null?void 0:e.coerce)||!1,typeName:Qt.ZodDate,...hn(e)});class a2 extends wn{_parse(t){if(this._getType(t)!==vt.symbol){const s=this._getOrReturnCtx(t);return mt(s,{code:Ke.invalid_type,expected:vt.symbol,received:s.parsedType}),Zt}return Ka(t.data)}}a2.create=e=>new a2({typeName:Qt.ZodSymbol,...hn(e)});class Oy extends wn{_parse(t){if(this._getType(t)!==vt.undefined){const s=this._getOrReturnCtx(t);return mt(s,{code:Ke.invalid_type,expected:vt.undefined,received:s.parsedType}),Zt}return Ka(t.data)}}Oy.create=e=>new Oy({typeName:Qt.ZodUndefined,...hn(e)});class Ry extends wn{_parse(t){if(this._getType(t)!==vt.null){const s=this._getOrReturnCtx(t);return mt(s,{code:Ke.invalid_type,expected:vt.null,received:s.parsedType}),Zt}return Ka(t.data)}}Ry.create=e=>new Ry({typeName:Qt.ZodNull,...hn(e)});class Vp extends wn{constructor(){super(...arguments),this._any=!0}_parse(t){return Ka(t.data)}}Vp.create=e=>new Vp({typeName:Qt.ZodAny,...hn(e)});class Ff extends wn{constructor(){super(...arguments),this._unknown=!0}_parse(t){return Ka(t.data)}}Ff.create=e=>new Ff({typeName:Qt.ZodUnknown,...hn(e)});class nd extends wn{_parse(t){const r=this._getOrReturnCtx(t);return mt(r,{code:Ke.invalid_type,expected:vt.never,received:r.parsedType}),Zt}}nd.create=e=>new nd({typeName:Qt.ZodNever,...hn(e)});class i2 extends wn{_parse(t){if(this._getType(t)!==vt.undefined){const s=this._getOrReturnCtx(t);return mt(s,{code:Ke.invalid_type,expected:vt.void,received:s.parsedType}),Zt}return Ka(t.data)}}i2.create=e=>new i2({typeName:Qt.ZodVoid,...hn(e)});class il extends wn{_parse(t){const{ctx:r,status:s}=this._processInputParams(t),a=this._def;if(r.parsedType!==vt.array)return mt(r,{code:Ke.invalid_type,expected:vt.array,received:r.parsedType}),Zt;if(a.exactLength!==null){const o=r.data.length>a.exactLength.value,l=r.data.length<a.exactLength.value;(o||l)&&(mt(r,{code:o?Ke.too_big:Ke.too_small,minimum:l?a.exactLength.value:void 0,maximum:o?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),s.dirty())}if(a.minLength!==null&&r.data.length<a.minLength.value&&(mt(r,{code:Ke.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),s.dirty()),a.maxLength!==null&&r.data.length>a.maxLength.value&&(mt(r,{code:Ke.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),s.dirty()),r.common.async)return Promise.all([...r.data].map((o,l)=>a.type._parseAsync(new Xl(r,o,r.path,l)))).then(o=>Na.mergeArray(s,o));const i=[...r.data].map((o,l)=>a.type._parseSync(new Xl(r,o,r.path,l)));return Na.mergeArray(s,i)}get element(){return this._def.type}min(t,r){return new il({...this._def,minLength:{value:t,message:It.toString(r)}})}max(t,r){return new il({...this._def,maxLength:{value:t,message:It.toString(r)}})}length(t,r){return new il({...this._def,exactLength:{value:t,message:It.toString(r)}})}nonempty(t){return this.min(1,t)}}il.create=(e,t)=>new il({type:e,minLength:null,maxLength:null,exactLength:null,typeName:Qt.ZodArray,...hn(t)});function tm(e){if(e instanceof $r){const t={};for(const r in e.shape){const s=e.shape[r];t[r]=Wl.create(tm(s))}return new $r({...e._def,shape:()=>t})}else return e instanceof il?new il({...e._def,type:tm(e.element)}):e instanceof Wl?Wl.create(tm(e.unwrap())):e instanceof _u?_u.create(tm(e.unwrap())):e instanceof ec?ec.create(e.items.map(t=>tm(t))):e}class $r extends wn{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),r=In.objectKeys(t);return this._cached={shape:t,keys:r}}_parse(t){if(this._getType(t)!==vt.object){const d=this._getOrReturnCtx(t);return mt(d,{code:Ke.invalid_type,expected:vt.object,received:d.parsedType}),Zt}const{status:s,ctx:a}=this._processInputParams(t),{shape:i,keys:o}=this._getCached(),l=[];if(!(this._def.catchall instanceof nd&&this._def.unknownKeys==="strip"))for(const d in a.data)o.includes(d)||l.push(d);const c=[];for(const d of o){const u=i[d],f=a.data[d];c.push({key:{status:"valid",value:d},value:u._parse(new Xl(a,f,a.path,d)),alwaysSet:d in a.data})}if(this._def.catchall instanceof nd){const d=this._def.unknownKeys;if(d==="passthrough")for(const u of l)c.push({key:{status:"valid",value:u},value:{status:"valid",value:a.data[u]}});else if(d==="strict")l.length>0&&(mt(a,{code:Ke.unrecognized_keys,keys:l}),s.dirty());else if(d!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const d=this._def.catchall;for(const u of l){const f=a.data[u];c.push({key:{status:"valid",value:u},value:d._parse(new Xl(a,f,a.path,u)),alwaysSet:u in a.data})}}return a.common.async?Promise.resolve().then(async()=>{const d=[];for(const u of c){const f=await u.key,h=await u.value;d.push({key:f,value:h,alwaysSet:u.alwaysSet})}return d}).then(d=>Na.mergeObjectSync(s,d)):Na.mergeObjectSync(s,c)}get shape(){return this._def.shape()}strict(t){return It.errToObj,new $r({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(r,s)=>{var a,i,o,l;const c=(o=(i=(a=this._def).errorMap)===null||i===void 0?void 0:i.call(a,r,s).message)!==null&&o!==void 0?o:s.defaultError;return r.code==="unrecognized_keys"?{message:(l=It.errToObj(t).message)!==null&&l!==void 0?l:c}:{message:c}}}:{}})}strip(){return new $r({...this._def,unknownKeys:"strip"})}passthrough(){return new $r({...this._def,unknownKeys:"passthrough"})}extend(t){return new $r({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new $r({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:Qt.ZodObject})}setKey(t,r){return this.augment({[t]:r})}catchall(t){return new $r({...this._def,catchall:t})}pick(t){const r={};return In.objectKeys(t).forEach(s=>{t[s]&&this.shape[s]&&(r[s]=this.shape[s])}),new $r({...this._def,shape:()=>r})}omit(t){const r={};return In.objectKeys(this.shape).forEach(s=>{t[s]||(r[s]=this.shape[s])}),new $r({...this._def,shape:()=>r})}deepPartial(){return tm(this)}partial(t){const r={};return In.objectKeys(this.shape).forEach(s=>{const a=this.shape[s];t&&!t[s]?r[s]=a:r[s]=a.optional()}),new $r({...this._def,shape:()=>r})}required(t){const r={};return In.objectKeys(this.shape).forEach(s=>{if(t&&!t[s])r[s]=this.shape[s];else{let i=this.shape[s];for(;i instanceof Wl;)i=i._def.innerType;r[s]=i}}),new $r({...this._def,shape:()=>r})}keyof(){return nae(In.objectKeys(this.shape))}}$r.create=(e,t)=>new $r({shape:()=>e,unknownKeys:"strip",catchall:nd.create(),typeName:Qt.ZodObject,...hn(t)});$r.strictCreate=(e,t)=>new $r({shape:()=>e,unknownKeys:"strict",catchall:nd.create(),typeName:Qt.ZodObject,...hn(t)});$r.lazycreate=(e,t)=>new $r({shape:e,unknownKeys:"strip",catchall:nd.create(),typeName:Qt.ZodObject,...hn(t)});class Fy extends wn{_parse(t){const{ctx:r}=this._processInputParams(t),s=this._def.options;function a(i){for(const l of i)if(l.result.status==="valid")return l.result;for(const l of i)if(l.result.status==="dirty")return r.common.issues.push(...l.ctx.common.issues),l.result;const o=i.map(l=>new Ri(l.ctx.common.issues));return mt(r,{code:Ke.invalid_union,unionErrors:o}),Zt}if(r.common.async)return Promise.all(s.map(async i=>{const o={...r,common:{...r.common,issues:[]},parent:null};return{result:await i._parseAsync({data:r.data,path:r.path,parent:o}),ctx:o}})).then(a);{let i;const o=[];for(const c of s){const d={...r,common:{...r.common,issues:[]},parent:null},u=c._parseSync({data:r.data,path:r.path,parent:d});if(u.status==="valid")return u;u.status==="dirty"&&!i&&(i={result:u,ctx:d}),d.common.issues.length&&o.push(d.common.issues)}if(i)return r.common.issues.push(...i.ctx.common.issues),i.result;const l=o.map(c=>new Ri(c));return mt(r,{code:Ke.invalid_union,unionErrors:l}),Zt}}get options(){return this._def.options}}Fy.create=(e,t)=>new Fy({options:e,typeName:Qt.ZodUnion,...hn(t)});const yc=e=>e instanceof Uy?yc(e.schema):e instanceof xl?yc(e.innerType()):e instanceof Vy?[e.value]:e instanceof Mu?e.options:e instanceof Hy?In.objectValues(e.enum):e instanceof Wy?yc(e._def.innerType):e instanceof Oy?[void 0]:e instanceof Ry?[null]:e instanceof Wl?[void 0,...yc(e.unwrap())]:e instanceof _u?[null,...yc(e.unwrap())]:e instanceof AE||e instanceof Gy?yc(e.unwrap()):e instanceof qy?yc(e._def.innerType):[];class V4 extends wn{_parse(t){const{ctx:r}=this._processInputParams(t);if(r.parsedType!==vt.object)return mt(r,{code:Ke.invalid_type,expected:vt.object,received:r.parsedType}),Zt;const s=this.discriminator,a=r.data[s],i=this.optionsMap.get(a);return i?r.common.async?i._parseAsync({data:r.data,path:r.path,parent:r}):i._parseSync({data:r.data,path:r.path,parent:r}):(mt(r,{code:Ke.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[s]}),Zt)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(t,r,s){const a=new Map;for(const i of r){const o=yc(i.shape[t]);if(!o.length)throw new Error(`A discriminator value for key \`${t}\` could not be extracted from all schema options`);for(const l of o){if(a.has(l))throw new Error(`Discriminator property ${String(t)} has duplicate value ${String(l)}`);a.set(l,i)}}return new V4({typeName:Qt.ZodDiscriminatedUnion,discriminator:t,options:r,optionsMap:a,...hn(s)})}}function VM(e,t){const r=Sc(e),s=Sc(t);if(e===t)return{valid:!0,data:e};if(r===vt.object&&s===vt.object){const a=In.objectKeys(t),i=In.objectKeys(e).filter(l=>a.indexOf(l)!==-1),o={...e,...t};for(const l of i){const c=VM(e[l],t[l]);if(!c.valid)return{valid:!1};o[l]=c.data}return{valid:!0,data:o}}else if(r===vt.array&&s===vt.array){if(e.length!==t.length)return{valid:!1};const a=[];for(let i=0;i<e.length;i++){const o=e[i],l=t[i],c=VM(o,l);if(!c.valid)return{valid:!1};a.push(c.data)}return{valid:!0,data:a}}else return r===vt.date&&s===vt.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class zy extends wn{_parse(t){const{status:r,ctx:s}=this._processInputParams(t),a=(i,o)=>{if(BM(i)||BM(o))return Zt;const l=VM(i.value,o.value);return l.valid?((UM(i)||UM(o))&&r.dirty(),{status:r.value,value:l.data}):(mt(s,{code:Ke.invalid_intersection_types}),Zt)};return s.common.async?Promise.all([this._def.left._parseAsync({data:s.data,path:s.path,parent:s}),this._def.right._parseAsync({data:s.data,path:s.path,parent:s})]).then(([i,o])=>a(i,o)):a(this._def.left._parseSync({data:s.data,path:s.path,parent:s}),this._def.right._parseSync({data:s.data,path:s.path,parent:s}))}}zy.create=(e,t,r)=>new zy({left:e,right:t,typeName:Qt.ZodIntersection,...hn(r)});class ec extends wn{_parse(t){const{status:r,ctx:s}=this._processInputParams(t);if(s.parsedType!==vt.array)return mt(s,{code:Ke.invalid_type,expected:vt.array,received:s.parsedType}),Zt;if(s.data.length<this._def.items.length)return mt(s,{code:Ke.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Zt;!this._def.rest&&s.data.length>this._def.items.length&&(mt(s,{code:Ke.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());const i=[...s.data].map((o,l)=>{const c=this._def.items[l]||this._def.rest;return c?c._parse(new Xl(s,o,s.path,l)):null}).filter(o=>!!o);return s.common.async?Promise.all(i).then(o=>Na.mergeArray(r,o)):Na.mergeArray(r,i)}get items(){return this._def.items}rest(t){return new ec({...this._def,rest:t})}}ec.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ec({items:e,typeName:Qt.ZodTuple,rest:null,...hn(t)})};class By extends wn{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:r,ctx:s}=this._processInputParams(t);if(s.parsedType!==vt.object)return mt(s,{code:Ke.invalid_type,expected:vt.object,received:s.parsedType}),Zt;const a=[],i=this._def.keyType,o=this._def.valueType;for(const l in s.data)a.push({key:i._parse(new Xl(s,l,s.path,l)),value:o._parse(new Xl(s,s.data[l],s.path,l)),alwaysSet:l in s.data});return s.common.async?Na.mergeObjectAsync(r,a):Na.mergeObjectSync(r,a)}get element(){return this._def.valueType}static create(t,r,s){return r instanceof wn?new By({keyType:t,valueType:r,typeName:Qt.ZodRecord,...hn(s)}):new By({keyType:tl.create(),valueType:t,typeName:Qt.ZodRecord,...hn(r)})}}class o2 extends wn{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:r,ctx:s}=this._processInputParams(t);if(s.parsedType!==vt.map)return mt(s,{code:Ke.invalid_type,expected:vt.map,received:s.parsedType}),Zt;const a=this._def.keyType,i=this._def.valueType,o=[...s.data.entries()].map(([l,c],d)=>({key:a._parse(new Xl(s,l,s.path,[d,"key"])),value:i._parse(new Xl(s,c,s.path,[d,"value"]))}));if(s.common.async){const l=new Map;return Promise.resolve().then(async()=>{for(const c of o){const d=await c.key,u=await c.value;if(d.status==="aborted"||u.status==="aborted")return Zt;(d.status==="dirty"||u.status==="dirty")&&r.dirty(),l.set(d.value,u.value)}return{status:r.value,value:l}})}else{const l=new Map;for(const c of o){const d=c.key,u=c.value;if(d.status==="aborted"||u.status==="aborted")return Zt;(d.status==="dirty"||u.status==="dirty")&&r.dirty(),l.set(d.value,u.value)}return{status:r.value,value:l}}}}o2.create=(e,t,r)=>new o2({valueType:t,keyType:e,typeName:Qt.ZodMap,...hn(r)});class uh extends wn{_parse(t){const{status:r,ctx:s}=this._processInputParams(t);if(s.parsedType!==vt.set)return mt(s,{code:Ke.invalid_type,expected:vt.set,received:s.parsedType}),Zt;const a=this._def;a.minSize!==null&&s.data.size<a.minSize.value&&(mt(s,{code:Ke.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,exact:!1,message:a.minSize.message}),r.dirty()),a.maxSize!==null&&s.data.size>a.maxSize.value&&(mt(s,{code:Ke.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,exact:!1,message:a.maxSize.message}),r.dirty());const i=this._def.valueType;function o(c){const d=new Set;for(const u of c){if(u.status==="aborted")return Zt;u.status==="dirty"&&r.dirty(),d.add(u.value)}return{status:r.value,value:d}}const l=[...s.data.values()].map((c,d)=>i._parse(new Xl(s,c,s.path,d)));return s.common.async?Promise.all(l).then(c=>o(c)):o(l)}min(t,r){return new uh({...this._def,minSize:{value:t,message:It.toString(r)}})}max(t,r){return new uh({...this._def,maxSize:{value:t,message:It.toString(r)}})}size(t,r){return this.min(t,r).max(t,r)}nonempty(t){return this.min(1,t)}}uh.create=(e,t)=>new uh({valueType:e,minSize:null,maxSize:null,typeName:Qt.ZodSet,...hn(t)});class Gm extends wn{constructor(){super(...arguments),this.validate=this.implement}_parse(t){const{ctx:r}=this._processInputParams(t);if(r.parsedType!==vt.function)return mt(r,{code:Ke.invalid_type,expected:vt.function,received:r.parsedType}),Zt;function s(l,c){return r2({data:l,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,n2(),Up].filter(d=>!!d),issueData:{code:Ke.invalid_arguments,argumentsError:c}})}function a(l,c){return r2({data:l,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,n2(),Up].filter(d=>!!d),issueData:{code:Ke.invalid_return_type,returnTypeError:c}})}const i={errorMap:r.common.contextualErrorMap},o=r.data;if(this._def.returns instanceof Hp){const l=this;return Ka(async function(...c){const d=new Ri([]),u=await l._def.args.parseAsync(c,i).catch(m=>{throw d.addIssue(s(c,m)),d}),f=await Reflect.apply(o,this,u);return await l._def.returns._def.type.parseAsync(f,i).catch(m=>{throw d.addIssue(a(f,m)),d})})}else{const l=this;return Ka(function(...c){const d=l._def.args.safeParse(c,i);if(!d.success)throw new Ri([s(c,d.error)]);const u=Reflect.apply(o,this,d.data),f=l._def.returns.safeParse(u,i);if(!f.success)throw new Ri([a(u,f.error)]);return f.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...t){return new Gm({...this._def,args:ec.create(t).rest(Ff.create())})}returns(t){return new Gm({...this._def,returns:t})}implement(t){return this.parse(t)}strictImplement(t){return this.parse(t)}static create(t,r,s){return new Gm({args:t||ec.create([]).rest(Ff.create()),returns:r||Ff.create(),typeName:Qt.ZodFunction,...hn(s)})}}class Uy extends wn{get schema(){return this._def.getter()}_parse(t){const{ctx:r}=this._processInputParams(t);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}}Uy.create=(e,t)=>new Uy({getter:e,typeName:Qt.ZodLazy,...hn(t)});class Vy extends wn{_parse(t){if(t.data!==this._def.value){const r=this._getOrReturnCtx(t);return mt(r,{received:r.data,code:Ke.invalid_literal,expected:this._def.value}),Zt}return{status:"valid",value:t.data}}get value(){return this._def.value}}Vy.create=(e,t)=>new Vy({value:e,typeName:Qt.ZodLiteral,...hn(t)});function nae(e,t){return new Mu({values:e,typeName:Qt.ZodEnum,...hn(t)})}class Mu extends wn{constructor(){super(...arguments),ix.set(this,void 0)}_parse(t){if(typeof t.data!="string"){const r=this._getOrReturnCtx(t),s=this._def.values;return mt(r,{expected:In.joinValues(s),received:r.parsedType,code:Ke.invalid_type}),Zt}if(s2(this,ix)||Zse(this,ix,new Set(this._def.values)),!s2(this,ix).has(t.data)){const r=this._getOrReturnCtx(t),s=this._def.values;return mt(r,{received:r.data,code:Ke.invalid_enum_value,options:s}),Zt}return Ka(t.data)}get options(){return this._def.values}get enum(){const t={};for(const r of this._def.values)t[r]=r;return t}get Values(){const t={};for(const r of this._def.values)t[r]=r;return t}get Enum(){const t={};for(const r of this._def.values)t[r]=r;return t}extract(t,r=this._def){return Mu.create(t,{...this._def,...r})}exclude(t,r=this._def){return Mu.create(this.options.filter(s=>!t.includes(s)),{...this._def,...r})}}ix=new WeakMap;Mu.create=nae;class Hy extends wn{constructor(){super(...arguments),ox.set(this,void 0)}_parse(t){const r=In.getValidEnumValues(this._def.values),s=this._getOrReturnCtx(t);if(s.parsedType!==vt.string&&s.parsedType!==vt.number){const a=In.objectValues(r);return mt(s,{expected:In.joinValues(a),received:s.parsedType,code:Ke.invalid_type}),Zt}if(s2(this,ox)||Zse(this,ox,new Set(In.getValidEnumValues(this._def.values))),!s2(this,ox).has(t.data)){const a=In.objectValues(r);return mt(s,{received:s.data,code:Ke.invalid_enum_value,options:a}),Zt}return Ka(t.data)}get enum(){return this._def.values}}ox=new WeakMap;Hy.create=(e,t)=>new Hy({values:e,typeName:Qt.ZodNativeEnum,...hn(t)});class Hp extends wn{unwrap(){return this._def.type}_parse(t){const{ctx:r}=this._processInputParams(t);if(r.parsedType!==vt.promise&&r.common.async===!1)return mt(r,{code:Ke.invalid_type,expected:vt.promise,received:r.parsedType}),Zt;const s=r.parsedType===vt.promise?r.data:Promise.resolve(r.data);return Ka(s.then(a=>this._def.type.parseAsync(a,{path:r.path,errorMap:r.common.contextualErrorMap})))}}Hp.create=(e,t)=>new Hp({type:e,typeName:Qt.ZodPromise,...hn(t)});class xl extends wn{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Qt.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:r,ctx:s}=this._processInputParams(t),a=this._def.effect||null,i={addIssue:o=>{mt(s,o),o.fatal?r.abort():r.dirty()},get path(){return s.path}};if(i.addIssue=i.addIssue.bind(i),a.type==="preprocess"){const o=a.transform(s.data,i);if(s.common.async)return Promise.resolve(o).then(async l=>{if(r.value==="aborted")return Zt;const c=await this._def.schema._parseAsync({data:l,path:s.path,parent:s});return c.status==="aborted"?Zt:c.status==="dirty"||r.value==="dirty"?jm(c.value):c});{if(r.value==="aborted")return Zt;const l=this._def.schema._parseSync({data:o,path:s.path,parent:s});return l.status==="aborted"?Zt:l.status==="dirty"||r.value==="dirty"?jm(l.value):l}}if(a.type==="refinement"){const o=l=>{const c=a.refinement(l,i);if(s.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(s.common.async===!1){const l=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});return l.status==="aborted"?Zt:(l.status==="dirty"&&r.dirty(),o(l.value),{status:r.value,value:l.value})}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(l=>l.status==="aborted"?Zt:(l.status==="dirty"&&r.dirty(),o(l.value).then(()=>({status:r.value,value:l.value}))))}if(a.type==="transform")if(s.common.async===!1){const o=this._def.schema._parseSync({data:s.data,path:s.path,parent:s});if(!ch(o))return o;const l=a.transform(o.value,i);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:l}}else return this._def.schema._parseAsync({data:s.data,path:s.path,parent:s}).then(o=>ch(o)?Promise.resolve(a.transform(o.value,i)).then(l=>({status:r.value,value:l})):o);In.assertNever(a)}}xl.create=(e,t,r)=>new xl({schema:e,typeName:Qt.ZodEffects,effect:t,...hn(r)});xl.createWithPreprocess=(e,t,r)=>new xl({schema:t,effect:{type:"preprocess",transform:e},typeName:Qt.ZodEffects,...hn(r)});class Wl extends wn{_parse(t){return this._getType(t)===vt.undefined?Ka(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Wl.create=(e,t)=>new Wl({innerType:e,typeName:Qt.ZodOptional,...hn(t)});class _u extends wn{_parse(t){return this._getType(t)===vt.null?Ka(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}_u.create=(e,t)=>new _u({innerType:e,typeName:Qt.ZodNullable,...hn(t)});class Wy extends wn{_parse(t){const{ctx:r}=this._processInputParams(t);let s=r.data;return r.parsedType===vt.undefined&&(s=this._def.defaultValue()),this._def.innerType._parse({data:s,path:r.path,parent:r})}removeDefault(){return this._def.innerType}}Wy.create=(e,t)=>new Wy({innerType:e,typeName:Qt.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...hn(t)});class qy extends wn{_parse(t){const{ctx:r}=this._processInputParams(t),s={...r,common:{...r.common,issues:[]}},a=this._def.innerType._parse({data:s.data,path:s.path,parent:{...s}});return Dy(a)?a.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Ri(s.common.issues)},input:s.data})})):{status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new Ri(s.common.issues)},input:s.data})}}removeCatch(){return this._def.innerType}}qy.create=(e,t)=>new qy({innerType:e,typeName:Qt.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...hn(t)});class l2 extends wn{_parse(t){if(this._getType(t)!==vt.nan){const s=this._getOrReturnCtx(t);return mt(s,{code:Ke.invalid_type,expected:vt.nan,received:s.parsedType}),Zt}return{status:"valid",value:t.data}}}l2.create=e=>new l2({typeName:Qt.ZodNaN,...hn(e)});const fEe=Symbol("zod_brand");class AE extends wn{_parse(t){const{ctx:r}=this._processInputParams(t),s=r.data;return this._def.type._parse({data:s,path:r.path,parent:r})}unwrap(){return this._def.type}}class _1 extends wn{_parse(t){const{status:r,ctx:s}=this._processInputParams(t);if(s.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:s.data,path:s.path,parent:s});return i.status==="aborted"?Zt:i.status==="dirty"?(r.dirty(),jm(i.value)):this._def.out._parseAsync({data:i.value,path:s.path,parent:s})})();{const a=this._def.in._parseSync({data:s.data,path:s.path,parent:s});return a.status==="aborted"?Zt:a.status==="dirty"?(r.dirty(),{status:"dirty",value:a.value}):this._def.out._parseSync({data:a.value,path:s.path,parent:s})}}static create(t,r){return new _1({in:t,out:r,typeName:Qt.ZodPipeline})}}class Gy extends wn{_parse(t){const r=this._def.innerType._parse(t),s=a=>(ch(a)&&(a.value=Object.freeze(a.value)),a);return Dy(r)?r.then(a=>s(a)):s(r)}unwrap(){return this._def.innerType}}Gy.create=(e,t)=>new Gy({innerType:e,typeName:Qt.ZodReadonly,...hn(t)});function gO(e,t){const r=typeof e=="function"?e(t):typeof e=="string"?{message:e}:e;return typeof r=="string"?{message:r}:r}function rae(e,t={},r){return e?Vp.create().superRefine((s,a)=>{var i,o;const l=e(s);if(l instanceof Promise)return l.then(c=>{var d,u;if(!c){const f=gO(t,s),h=(u=(d=f.fatal)!==null&&d!==void 0?d:r)!==null&&u!==void 0?u:!0;a.addIssue({code:"custom",...f,fatal:h})}});if(!l){const c=gO(t,s),d=(o=(i=c.fatal)!==null&&i!==void 0?i:r)!==null&&o!==void 0?o:!0;a.addIssue({code:"custom",...c,fatal:d})}}):Vp.create()}const hEe={object:$r.lazycreate};var Qt;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(Qt||(Qt={}));const mEe=(e,t={message:`Input not instance of ${e.name}`})=>rae(r=>r instanceof e,t),sae=tl.create,aae=Cu.create,pEe=l2.create,gEe=ku.create,iae=$y.create,xEe=dh.create,yEe=a2.create,vEe=Oy.create,bEe=Ry.create,wEe=Vp.create,jEe=Ff.create,NEe=nd.create,SEe=i2.create,CEe=il.create,kEe=$r.create,MEe=$r.strictCreate,_Ee=Fy.create,PEe=V4.create,TEe=zy.create,AEe=ec.create,EEe=By.create,IEe=o2.create,LEe=uh.create,DEe=Gm.create,$Ee=Uy.create,OEe=Vy.create,REe=Mu.create,FEe=Hy.create,zEe=Hp.create,xO=xl.create,BEe=Wl.create,UEe=_u.create,VEe=xl.createWithPreprocess,HEe=_1.create,WEe=()=>sae().optional(),qEe=()=>aae().optional(),GEe=()=>iae().optional(),YEe={string:e=>tl.create({...e,coerce:!0}),number:e=>Cu.create({...e,coerce:!0}),boolean:e=>$y.create({...e,coerce:!0}),bigint:e=>ku.create({...e,coerce:!0}),date:e=>dh.create({...e,coerce:!0})},QEe=Zt;var fe=Object.freeze({__proto__:null,defaultErrorMap:Up,setErrorMap:VAe,getErrorMap:n2,makeIssue:r2,EMPTY_PATH:HAe,addIssueToContext:mt,ParseStatus:Na,INVALID:Zt,DIRTY:jm,OK:Ka,isAborted:BM,isDirty:UM,isValid:ch,isAsync:Dy,get util(){return In},get objectUtil(){return zM},ZodParsedType:vt,getParsedType:Sc,ZodType:wn,datetimeRegex:tae,ZodString:tl,ZodNumber:Cu,ZodBigInt:ku,ZodBoolean:$y,ZodDate:dh,ZodSymbol:a2,ZodUndefined:Oy,ZodNull:Ry,ZodAny:Vp,ZodUnknown:Ff,ZodNever:nd,ZodVoid:i2,ZodArray:il,ZodObject:$r,ZodUnion:Fy,ZodDiscriminatedUnion:V4,ZodIntersection:zy,ZodTuple:ec,ZodRecord:By,ZodMap:o2,ZodSet:uh,ZodFunction:Gm,ZodLazy:Uy,ZodLiteral:Vy,ZodEnum:Mu,ZodNativeEnum:Hy,ZodPromise:Hp,ZodEffects:xl,ZodTransformer:xl,ZodOptional:Wl,ZodNullable:_u,ZodDefault:Wy,ZodCatch:qy,ZodNaN:l2,BRAND:fEe,ZodBranded:AE,ZodPipeline:_1,ZodReadonly:Gy,custom:rae,Schema:wn,ZodSchema:wn,late:hEe,get ZodFirstPartyTypeKind(){return Qt},coerce:YEe,any:wEe,array:CEe,bigint:gEe,boolean:iae,date:xEe,discriminatedUnion:PEe,effect:xO,enum:REe,function:DEe,instanceof:mEe,intersection:TEe,lazy:$Ee,literal:OEe,map:IEe,nan:pEe,nativeEnum:FEe,never:NEe,null:bEe,nullable:UEe,number:aae,object:kEe,oboolean:GEe,onumber:qEe,optional:BEe,ostring:WEe,pipeline:HEe,preprocess:VEe,promise:zEe,record:EEe,set:LEe,strictObject:MEe,string:sae,symbol:yEe,transformer:xO,tuple:AEe,undefined:vEe,union:_Ee,unknown:jEe,void:SEe,NEVER:QEe,ZodIssueCode:Ke,quotelessJson:UAe,ZodError:Ri});const Dr={INT8_MIN:-128,INT8_MAX:127,INT8_UNSIGNED_MAX:255,INT16_MIN:-32768,INT16_MAX:32767,INT16_UNSIGNED_MAX:65535,INT24_MIN:-8388608,INT24_MAX:8388607,INT24_UNSIGNED_MAX:16777215,INT32_MIN:-2147483648,INT32_MAX:2147483647,INT32_UNSIGNED_MAX:4294967295,INT48_MIN:-0x800000000000,INT48_MAX:0x7fffffffffff,INT48_UNSIGNED_MAX:0xffffffffffff,INT64_MIN:-9223372036854775808n,INT64_MAX:9223372036854775807n,INT64_UNSIGNED_MAX:18446744073709551615n};function ns(e,t){return t.includes(e.columnType)}function KEe(e){return"enumValues"in e&&Array.isArray(e.enumValues)&&e.enumValues.length>0}const JEe=fe.union([fe.string(),fe.number(),fe.boolean(),fe.null()]),ZEe=fe.union([JEe,fe.record(fe.any()),fe.array(fe.any())]),XEe=fe.custom(e=>e instanceof Buffer);function oae(e,t){const r=(t==null?void 0:t.zodInstance)??fe,s=(t==null?void 0:t.coerce)??{};let a;return KEe(e)&&(a=e.enumValues.length?r.enum(e.enumValues):r.string()),a||(ns(e,["PgGeometry","PgPointTuple"])?a=r.tuple([r.number(),r.number()]):ns(e,["PgGeometryObject","PgPointObject"])?a=r.object({x:r.number(),y:r.number()}):ns(e,["PgHalfVector","PgVector"])?(a=r.array(r.number()),a=e.dimensions?a.length(e.dimensions):a):ns(e,["PgLine"])?a=r.tuple([r.number(),r.number(),r.number()]):ns(e,["PgLineABC"])?a=r.object({a:r.number(),b:r.number(),c:r.number()}):ns(e,["PgArray"])?(a=r.array(oae(e.baseColumn,r)),a=e.size?a.length(e.size):a):e.dataType==="array"?a=r.array(r.any()):e.dataType==="number"?a=eIe(e,r,s):e.dataType==="bigint"?a=tIe(e,r,s):e.dataType==="boolean"?a=s===!0||s.boolean?r.coerce.boolean():r.boolean():e.dataType==="date"?a=s===!0||s.date?r.coerce.date():r.date():e.dataType==="string"?a=nIe(e,r,s):e.dataType==="json"?a=ZEe:e.dataType==="custom"?a=r.any():e.dataType==="buffer"&&(a=XEe)),a||(a=r.any()),a}function eIe(e,t,r){let s=e.getSQLType().includes("unsigned"),a,i,o=!1;ns(e,["MySqlTinyInt","SingleStoreTinyInt"])?(a=s?0:Dr.INT8_MIN,i=s?Dr.INT8_UNSIGNED_MAX:Dr.INT8_MAX,o=!0):ns(e,["PgSmallInt","PgSmallSerial","MySqlSmallInt","SingleStoreSmallInt"])?(a=s?0:Dr.INT16_MIN,i=s?Dr.INT16_UNSIGNED_MAX:Dr.INT16_MAX,o=!0):ns(e,["PgReal","MySqlFloat","MySqlMediumInt","SingleStoreMediumInt","SingleStoreFloat"])?(a=s?0:Dr.INT24_MIN,i=s?Dr.INT24_UNSIGNED_MAX:Dr.INT24_MAX,o=ns(e,["MySqlMediumInt","SingleStoreMediumInt"])):ns(e,["PgInteger","PgSerial","MySqlInt","SingleStoreInt"])?(a=s?0:Dr.INT32_MIN,i=s?Dr.INT32_UNSIGNED_MAX:Dr.INT32_MAX,o=!0):ns(e,["PgDoublePrecision","MySqlReal","MySqlDouble","SingleStoreReal","SingleStoreDouble","SQLiteReal"])?(a=s?0:Dr.INT48_MIN,i=s?Dr.INT48_UNSIGNED_MAX:Dr.INT48_MAX):ns(e,["PgBigInt53","PgBigSerial53","MySqlBigInt53","MySqlSerial","SingleStoreBigInt53","SingleStoreSerial","SQLiteInteger"])?(s=s||ns(e,["MySqlSerial","SingleStoreSerial"]),a=s?0:Number.MIN_SAFE_INTEGER,i=Number.MAX_SAFE_INTEGER,o=!0):ns(e,["MySqlYear","SingleStoreYear"])?(a=1901,i=2155,o=!0):(a=Number.MIN_SAFE_INTEGER,i=Number.MAX_SAFE_INTEGER);let l=r===!0||r!=null&&r.number?t.coerce.number():t.number();return l=l.min(a).max(i),o?l.int():l}function tIe(e,t,r){const s=e.getSQLType().includes("unsigned"),a=s?0n:Dr.INT64_MIN,i=s?Dr.INT64_UNSIGNED_MAX:Dr.INT64_MAX;return(r===!0||r!=null&&r.bigint?t.coerce.bigint():t.bigint()).min(a).max(i)}function nIe(e,t,r){if(ns(e,["PgUUID"]))return t.string().uuid();let s,a,i=!1;ns(e,["PgVarchar","SQLiteText"])?s=e.length:ns(e,["MySqlVarChar","SingleStoreVarChar"])?s=e.length??Dr.INT16_UNSIGNED_MAX:ns(e,["MySqlText","SingleStoreText"])&&(e.textType==="longtext"?s=Dr.INT32_UNSIGNED_MAX:e.textType==="mediumtext"?s=Dr.INT24_UNSIGNED_MAX:e.textType==="text"?s=Dr.INT16_UNSIGNED_MAX:s=Dr.INT8_UNSIGNED_MAX),ns(e,["PgChar","MySqlChar","SingleStoreChar"])&&(s=e.length,i=!0),ns(e,["PgBinaryVector"])&&(a=/^[01]+$/,s=e.dimensions);let o=r===!0||r!=null&&r.string?t.coerce.string():t.string();return o=a?o.regex(a):o,s&&i?o.length(s):s?o.max(s):o}function lae(e){return bre(e)?mAe(e):pAe(e)}function cae(e,t,r,s){const a={};for(const[i,o]of Object.entries(e)){if(!fs(o,Bp)&&!fs(o,Kr)&&!fs(o,Kr.Aliased)&&typeof o=="object"){const f=bre(o)||hAe(o)?lae(o):o;a[i]=cae(f,t[i]??{},r,s);continue}const l=t[i];if(l!==void 0&&typeof l!="function"){a[i]=l;continue}const c=fs(o,Bp)?o:void 0,d=c?oae(c,s):fe.any(),u=typeof l=="function"?l(d):d;r.never(c)||(a[i]=u,c&&(r.nullable(c)&&(a[i]=a[i].nullable()),r.optional(c)&&(a[i]=a[i].optional())))}return fe.object(a)}const rIe={never:e=>{var t,r;return((t=e==null?void 0:e.generated)==null?void 0:t.type)==="always"||((r=e==null?void 0:e.generatedIdentity)==null?void 0:r.type)==="always"},optional:e=>!e.notNull||e.notNull&&e.hasDefault,nullable:e=>!e.notNull},Xe=(e,t)=>{const r=lae(e);return cae(r,{},rIe)},Xt=Te("users",{id:Ae("id").primaryKey(),username:V("username").notNull().unique(),password:V("password").notNull(),email:V("email"),role:ae("role",{length:20}).notNull().default("employee"),fullName:V("full_name"),operatorName:V("operator_name"),requirePasswordChange:Oe("require_password_change").default(!1),lastPasswordChange:K("last_password_change"),isActive:Oe("is_active").default(!0),stripeCustomerId:V("stripe_customer_id"),stripeSubscriptionId:V("stripe_subscription_id"),hasSeenDashboardTour:Oe("has_seen_dashboard_tour").default(!1),dashboardTheme:V("dashboard_theme").default("modern-dark"),createdAt:K("created_at").defaultNow(),createdBy:X("created_by")},e=>({createdByFk:sAe({columns:[e.createdBy],foreignColumns:[e.id],name:"users_created_by_fkey"}),createdByIdx:Ge("users_created_by_idx").on(e.createdBy)}));Te("oauth_providers",{id:Ae("id").primaryKey(),userId:X("user_id").notNull().references(()=>Xt.id),provider:ae("provider",{length:20}).notNull(),providerId:V("provider_id").notNull(),email:V("email"),displayName:V("display_name"),profileImageUrl:V("profile_image_url"),accessToken:V("access_token"),refreshToken:V("refresh_token"),tokenExpiresAt:K("token_expires_at"),metadata:On("metadata"),createdAt:K("created_at").defaultNow(),lastUsedAt:K("last_used_at")},e=>({providerUniqueIdx:ei("oauth_provider_unique_idx").on(e.provider,e.providerId),userIdIdx:Ge("oauth_providers_user_id_idx").on(e.userId)}));Te("password_reset_tokens",{id:Ae("id").primaryKey(),userId:X("user_id").notNull().references(()=>Xt.id),token:V("token").notNull().unique(),expiresAt:K("expires_at").notNull(),used:Oe("used").default(!1),createdAt:K("created_at").defaultNow()});Te("booking_tokens",{id:Ae("id").primaryKey(),token:V("token").notNull().unique(),quoteId:X("quote_id").notNull(),customerName:V("customer_name").notNull(),phone:V("phone").notNull(),email:V("email"),damageType:V("damage_type").notNull(),customQuoteAmount:wt("custom_quote_amount",{precision:10,scale:2}),issueDescription:V("issue_description"),expiresAt:K("expires_at").notNull(),used:Oe("used").default(!1),usedAt:K("used_at"),createdAt:K("created_at").defaultNow()},e=>({tokenIdx:Ge("booking_tokens_token_idx").on(e.token),expiresAtIdx:Ge("booking_tokens_expires_at_idx").on(e.expiresAt)}));Te("session",{sid:ae("sid").primaryKey(),sess:On("sess").notNull(),expire:K("expire").notNull()});Te("webauthn_credentials",{id:V("id").primaryKey(),userId:X("user_id").notNull().references(()=>Xt.id),publicKey:V("public_key").notNull(),counter:X("counter").notNull().default(0),transports:V("transports").array(),deviceName:V("device_name"),createdAt:K("created_at").defaultNow(),lastUsedAt:K("last_used_at")});Te("totp_secrets",{id:Ae("id").primaryKey(),userId:X("user_id").notNull().unique().references(()=>Xt.id),secret:V("secret").notNull(),enabled:Oe("enabled").default(!1),backupCodes:V("backup_codes").array(),createdAt:K("created_at").defaultNow(),enabledAt:K("enabled_at"),lastUsedAt:K("last_used_at")});Te("login_attempts",{id:Ae("id").primaryKey(),username:V("username").notNull(),ipAddress:V("ip_address").notNull(),successful:Oe("successful").notNull(),failureReason:V("failure_reason"),userAgent:V("user_agent"),attemptedAt:K("attempted_at").defaultNow()},e=>({usernameIdx:Ge("login_attempts_username_idx").on(e.username),ipIdx:Ge("login_attempts_ip_idx").on(e.ipAddress),attemptedAtIdx:Ge("login_attempts_attempted_at_idx").on(e.attemptedAt)}));Te("account_lockouts",{id:Ae("id").primaryKey(),userId:X("user_id").notNull().references(()=>Xt.id),lockedAt:K("locked_at").defaultNow(),unlockAt:K("unlock_at").notNull(),reason:V("reason").notNull(),lockedBy:X("locked_by"),unlocked:Oe("unlocked").default(!1),unlockedAt:K("unlocked_at")},e=>({userIdIdx:Ge("account_lockouts_user_id_idx").on(e.userId)}));Te("audit_logs",{id:Ae("id").primaryKey(),userId:X("user_id").notNull().references(()=>Xt.id),action:V("action").notNull(),resource:V("resource").notNull(),resourceId:V("resource_id"),changes:On("changes"),ipAddress:V("ip_address"),userAgent:V("user_agent"),metadata:On("metadata"),createdAt:K("created_at").defaultNow()},e=>({userIdIdx:Ge("audit_logs_user_id_idx").on(e.userId),actionIdx:Ge("audit_logs_action_idx").on(e.action),resourceIdx:Ge("audit_logs_resource_idx").on(e.resource),createdAtIdx:Ge("audit_logs_created_at_idx").on(e.createdAt)}));Te("error_logs",{id:Ae("id").primaryKey(),errorType:V("error_type").notNull(),severity:V("severity").notNull(),message:V("message").notNull(),stack:V("stack"),endpoint:V("endpoint"),userId:V("user_id"),requestData:On("request_data"),metadata:On("metadata"),resolved:K("resolved"),createdAt:K("created_at").defaultNow()});Te("impersonation_events",{id:Ae("id").primaryKey(),sessionId:ae("session_id",{length:50}).notNull(),realUserId:X("real_user_id").notNull().references(()=>Xt.id),tenantId:ae("tenant_id",{length:50}).notNull(),tenantName:V("tenant_name"),action:ae("action",{length:10}).notNull(),startedAt:K("started_at").notNull(),endedAt:K("ended_at"),durationSeconds:X("duration_seconds"),ipAddress:V("ip_address"),userAgent:V("user_agent")},e=>({sessionIdIdx:Ge("impersonation_events_session_id_idx").on(e.sessionId),realUserIdIdx:Ge("impersonation_events_real_user_id_idx").on(e.realUserId),tenantIdIdx:Ge("impersonation_events_tenant_id_idx").on(e.tenantId),startedAtIdx:Ge("impersonation_events_started_at_idx").on(e.startedAt)}));const sIe=Te("dashboard_layouts",{id:Ae("id").primaryKey(),tenantId:ae("tenant_id",{length:50}).notNull(),userId:X("user_id"),layout:On("layout").notNull().$type(),layoutVersion:X("layout_version").notNull().default(1),createdAt:K("created_at").defaultNow().notNull(),updatedAt:K("updated_at").defaultNow().notNull()},e=>({tenantUserIdx:ei("dashboard_layouts_tenant_user_idx").on(e.tenantId,e.userId),userIdIdx:Ge("dashboard_layouts_user_id_idx").on(e.userId)})),aIe=Te("platform_settings",{id:Ae("id").primaryKey(),demoModeEnabled:Oe("demo_mode_enabled").default(!1).notNull(),updatedAt:K("updated_at").defaultNow().notNull()}),dae=ME("tenant_tier",["free","starter","pro","elite","internal"]),iIe=ME("tenant_status",["trialing","active","past_due","suspended","cancelled"]),H4=Te("tenants",{id:ae("id",{length:50}).primaryKey(),name:ae("name",{length:255}).notNull(),subdomain:ae("subdomain",{length:100}).unique(),isRoot:Oe("is_root").default(!1).notNull(),planTier:dae("plan_tier").default("starter").notNull(),status:iIe("status").default("trialing").notNull(),stripeCustomerId:V("stripe_customer_id"),stripeSubscriptionId:V("stripe_subscription_id"),createdAt:K("created_at").defaultNow().notNull(),updatedAt:K("updated_at").defaultNow().notNull()}),oIe=Te("tenant_config",{tenantId:ae("tenant_id",{length:50}).primaryKey().references(()=>H4.id,{onDelete:"cascade"}),businessName:ae("business_name",{length:255}).notNull(),logoUrl:V("logo_url"),primaryColor:ae("primary_color",{length:20}).default("#3b82f6"),accentColor:ae("accent_color",{length:20}),tier:dae("tier").default("starter").notNull(),industry:ae("industry",{length:100}),industryPackId:ae("industry_pack_id",{length:100}),industryConfig:On("industry_config").$type(),primaryContactName:ae("primary_contact_name",{length:255}),primaryContactEmail:ae("primary_contact_email",{length:255}),primaryCity:ae("primary_city",{length:100}),websiteUrl:ae("website_url",{length:500}),internalNotes:V("internal_notes"),homeBaseAddress:V("home_base_address"),homeBaseLat:wt("home_base_lat",{precision:10,scale:7}),homeBaseLng:wt("home_base_lng",{precision:10,scale:7}),serviceAreaMaxMinutes:X("service_area_max_minutes").default(25),serviceAreaSoftDeclineMessage:V("service_area_soft_decline_message"),createdAt:K("created_at").defaultNow().notNull(),updatedAt:K("updated_at").defaultNow().notNull()}),lIe=Te("tenant_phone_config",{id:ae("id",{length:50}).primaryKey(),tenantId:ae("tenant_id",{length:50}).notNull().references(()=>H4.id,{onDelete:"cascade"}),phoneNumber:ae("phone_number",{length:50}).notNull().unique(),messagingServiceSid:ae("messaging_service_sid",{length:255}),sipDomain:ae("sip_domain",{length:255}),sipUsername:ae("sip_username",{length:255}),sipPasswordEncrypted:ae("sip_password_encrypted",{length:255}),ivrMode:ae("ivr_mode",{length:50}).default("simple"),createdAt:K("created_at").defaultNow().notNull()},e=>({phoneNumberIdx:ei("tenant_phone_config_phone_number_idx").on(e.phoneNumber),tenantIdIdx:Ge("tenant_phone_config_tenant_id_idx").on(e.tenantId)}));Te("campaign_configs",{id:Ae("id").primaryKey(),tenantId:ae("tenant_id",{length:50}).notNull().references(()=>H4.id,{onDelete:"cascade"}),campaignKey:ae("campaign_key",{length:100}).notNull(),configJson:On("config_json").$type().notNull(),createdAt:K("created_at").defaultNow().notNull(),updatedAt:K("updated_at").defaultNow().notNull()},e=>({tenantCampaignIdx:ei("campaign_configs_tenant_campaign_idx").on(e.tenantId,e.campaignKey)}));Te("campaign_sends",{id:Ae("id").primaryKey(),tenantId:ae("tenant_id",{length:50}).notNull().default("root"),customerId:X("customer_id").notNull().references(()=>Zn.id,{onDelete:"cascade"}),campaignKey:ae("campaign_key",{length:100}).notNull(),channel:ae("channel",{length:20}).notNull(),sentAt:K("sent_at").defaultNow().notNull()},e=>({tenantCustomerCampaignIdx:Ge("campaign_sends_tenant_customer_campaign_idx").on(e.tenantId,e.customerId,e.campaignKey),sentAtIdx:Ge("campaign_sends_sent_at_idx").on(e.sentAt)}));const cIe=ME("loyalty_tier",["bronze","silver","gold","platinum"]),Zn=Te("customers",{id:Ae("id").primaryKey(),tenantId:ae("tenant_id",{length:50}).notNull().default("root"),name:V("name").notNull(),email:V("email").unique(),phone:V("phone").unique(),address:V("address"),vehicleInfo:V("vehicle_info"),lastInteraction:K("last_interaction").defaultNow(),notes:V("notes"),photoFolderLink:V("photo_folder_link"),loyaltyProgramOptIn:Oe("loyalty_program_opt_in").default(!1),loyaltyProgramJoinDate:K("loyalty_program_join_date"),smsConsent:Oe("sms_consent").default(!1),smsConsentTimestamp:K("sms_consent_timestamp"),smsConsentIpAddress:V("sms_consent_ip_address"),loyaltyTier:cIe("loyalty_tier").default("bronze"),hasPriorityBooking:Oe("has_priority_booking").default(!1),priorityBookingGrantedAt:K("priority_booking_granted_at"),isVip:Oe("is_vip").default(!1),isReturningCustomer:Oe("is_returning_customer").notNull().default(!1),firstAppointmentAt:K("first_appointment_at"),lastAppointmentAt:K("last_appointment_at"),totalAppointments:X("total_appointments").notNull().default(0),lifetimeValue:wt("lifetime_value",{precision:10,scale:2}).default("0.00"),importSource:ae("import_source",{length:255}),householdId:X("household_id"),profilePictureUrl:V("profile_picture_url"),customerNotes:V("customer_notes"),notifyViaEmail:Oe("notify_via_email").default(!0),notifyViaSms:Oe("notify_via_sms").default(!0),notifyViaPush:Oe("notify_via_push").default(!1)},e=>({tenantPhoneIdx:Ge("customers_tenant_phone_idx").on(e.tenantId,e.phone),tenantEmailIdx:Ge("customers_tenant_email_idx").on(e.tenantId,e.email)}));Te("households",{id:Ae("id").primaryKey(),tenantId:ae("tenant_id",{length:50}).notNull().default("root"),normalizedAddress:V("normalized_address").notNull(),createdAt:K("created_at").defaultNow().notNull()},e=>({tenantAddressUnique:ei("households_tenant_address_unique").on(e.tenantId,e.normalizedAddress)}));Te("migration_log",{id:Ae("id").primaryKey(),type:ae("type",{length:100}).notNull(),tenantId:ae("tenant_id",{length:50}).notNull().default("root"),startedAt:K("started_at").defaultNow().notNull(),completedAt:K("completed_at"),notes:V("notes")},e=>({typeIdx:Ge("migration_log_type_idx").on(e.type),tenantIdx:Ge("migration_log_tenant_idx").on(e.tenantId)}));const dIe=Te("customer_identities",{id:Ae("id").primaryKey(),tenantId:ae("tenant_id",{length:50}).notNull(),customerId:X("customer_id").notNull(),primaryPhone:V("primary_phone"),primaryEmail:V("primary_email"),lastLoginAt:K("last_login_at"),createdAt:K("created_at").defaultNow().notNull(),updatedAt:K("updated_at").defaultNow().notNull()},e=>({tenantCustomerUnique:ei("customer_identities_tenant_customer_uid").on(e.tenantId,e.customerId),tenantPhoneIdx:Ge("customer_identities_tenant_phone_idx").on(e.tenantId,e.primaryPhone),tenantEmailIdx:Ge("customer_identities_tenant_email_idx").on(e.tenantId,e.primaryEmail)})),uIe=Te("customer_otps",{id:Ae("id").primaryKey(),tenantId:ae("tenant_id",{length:50}).notNull(),customerId:X("customer_id"),channel:ae("channel",{length:20}).notNull(),destination:V("destination").notNull(),codeHash:V("code_hash").notNull(),expiresAt:K("expires_at").notNull(),createdAt:K("created_at").defaultNow().notNull(),consumedAt:K("consumed_at"),attempts:X("attempts").notNull().default(0)},e=>({tenantDestinationIdx:Ge("customer_otps_tenant_destination_idx").on(e.tenantId,e.destination,e.channel),expiresAtIdx:Ge("customer_otps_expires_at_idx").on(e.expiresAt)})),fIe=Te("customer_sessions",{id:Ae("id").primaryKey(),tenantId:ae("tenant_id",{length:50}).notNull(),customerId:X("customer_id").notNull(),sessionToken:V("session_token").notNull(),userAgent:V("user_agent"),ipAddress:V("ip_address"),createdAt:K("created_at").defaultNow().notNull(),expiresAt:K("expires_at").notNull(),revokedAt:K("revoked_at")},e=>({sessionTokenUnique:ei("customer_sessions_token_uid").on(e.sessionToken),tenantCustomerIdx:Ge("customer_sessions_tenant_customer_idx").on(e.tenantId,e.customerId),expiresAtIdx:Ge("customer_sessions_expires_at_idx").on(e.expiresAt)})),uae=Te("customer_vehicles",{id:Ae("id").primaryKey(),tenantId:ae("tenant_id",{length:50}).notNull().default("root"),customerId:X("customer_id").references(()=>Zn.id).notNull(),year:ae("year",{length:4}),make:ae("make",{length:100}),model:ae("model",{length:100}),color:ae("color",{length:50}),licensePlate:ae("license_plate",{length:20}),vin:ae("vin",{length:17}),notes:V("notes"),isPrimary:Oe("is_primary").notNull().default(!1),createdAt:K("created_at").defaultNow().notNull(),updatedAt:K("updated_at").defaultNow().notNull()}),hIe=Te("customer_service_history",{id:Ae("id").primaryKey(),customerId:X("customer_id").references(()=>Zn.id).notNull(),appointmentId:X("appointment_id").references(()=>xi.id),serviceDate:K("service_date").notNull(),serviceType:ae("service_type",{length:100}).notNull(),vehicleId:X("vehicle_id").references(()=>uae.id),technicianId:X("technician_id").references(()=>Xt.id),amount:wt("amount",{precision:10,scale:2}),satisfaction:X("satisfaction"),notes:V("notes"),createdAt:K("created_at").defaultNow().notNull()}),fh=Te("services",{id:Ae("id").primaryKey(),tenantId:ae("tenant_id",{length:50}).notNull().default("root"),name:V("name").notNull(),priceRange:V("price_range").notNull(),overview:V("overview").notNull(),detailedDescription:V("detailed_description").notNull(),duration:V("duration").notNull(),durationHours:wt("duration_hours").notNull(),minDurationHours:wt("min_duration_hours").notNull().default("1.5"),maxDurationHours:wt("max_duration_hours").notNull().default("2"),imageUrl:V("image_url")}),xi=Te("appointments",{id:Ae("id").primaryKey(),tenantId:ae("tenant_id",{length:50}).notNull().default("root"),customerId:X("customer_id").notNull().references(()=>Zn.id),serviceId:X("service_id").notNull().references(()=>fh.id),scheduledTime:K("scheduled_time").notNull(),completed:Oe("completed").default(!1),calendarEventId:V("calendar_event_id"),reminderSent:Oe("reminder_sent").default(!1),additionalRequests:V("additional_requests").array(),address:V("address").notNull(),addressLat:wt("address_lat",{precision:10,scale:7}),addressLng:wt("address_lng",{precision:10,scale:7}),addOns:On("add_ons"),damageAssessmentStatus:ae("damage_assessment_status",{length:20}).default("none"),damagePhotos:V("damage_photos").array(),damageDescription:V("damage_description"),assessmentRequestedAt:K("assessment_requested_at"),assessmentReviewedAt:K("assessment_reviewed_at"),autoApprovedAt:K("auto_approved_at"),requesterContactId:X("requester_contact_id"),serviceContactId:X("service_contact_id"),vehicleOwnerContactId:X("vehicle_owner_contact_id"),billingContactId:X("billing_contact_id"),billingType:ae("billing_type",{length:20}).default("self"),poNumber:V("po_number"),depositPercent:X("deposit_percent"),billingStatus:ae("billing_status",{length:30}).default("pending"),sharePriceWithRequester:Oe("share_price_with_requester").default(!0),shareLocationWithPayer:Oe("share_location_with_payer").default(!1),isGift:Oe("is_gift").default(!1),giftMessage:V("gift_message"),giftCardCode:V("gift_card_code"),estimatedPrice:wt("estimated_price",{precision:10,scale:2}),priceLocked:Oe("price_locked").default(!1),priceLockedAt:K("price_locked_at"),signedAuthorizationId:X("signed_authorization_id"),notesBilling:V("notes_billing"),depositPaid:Oe("deposit_paid").default(!1),depositAmount:wt("deposit_amount",{precision:10,scale:2}),status:ae("status",{length:20}).default("pending"),completedAt:K("completed_at"),serviceType:V("service_type"),vehicleMake:V("vehicle_make"),vehicleModel:V("vehicle_model"),location:V("location"),smsConsent:Oe("sms_consent").default(!1),smsConsentTimestamp:K("sms_consent_timestamp"),smsConsentIpAddress:V("sms_consent_ip_address"),technicianId:X("technician_id").references(()=>Co.id,{onDelete:"set null"}),latitude:wt("latitude",{precision:10,scale:7}),longitude:wt("longitude",{precision:10,scale:7}),addressConfirmedByCustomer:Oe("address_confirmed_by_customer").default(!1),addressNeedsReview:Oe("address_needs_review").default(!1),jobNotes:V("job_notes"),statusUpdatedAt:K("status_updated_at")},e=>({technicianScheduleIdx:Ge("appointments_technician_schedule_idx").on(e.technicianId,e.scheduledTime),statusIdx:Ge("appointments_status_idx").on(e.status)})),mIe=Te("job_photos",{id:Ae("id").primaryKey(),appointmentId:X("appointment_id").notNull().references(()=>xi.id,{onDelete:"cascade"}),technicianId:X("technician_id").references(()=>Co.id,{onDelete:"set null"}),photoUrl:V("photo_url").notNull(),photoType:ae("photo_type",{length:30}).notNull().default("progress"),caption:V("caption"),fileName:V("file_name"),fileSize:X("file_size"),mimeType:ae("mime_type",{length:50}),latitude:wt("latitude",{precision:10,scale:7}),longitude:wt("longitude",{precision:10,scale:7}),uploadedAt:K("uploaded_at").defaultNow()},e=>({appointmentIdIdx:Ge("job_photos_appointment_id_idx").on(e.appointmentId),technicianIdIdx:Ge("job_photos_technician_id_idx").on(e.technicianId)})),pIe=Te("quote_requests",{id:Ae("id").primaryKey(),customerId:X("customer_id").references(()=>Zn.id),phone:V("phone").notNull(),customerName:V("customer_name").notNull(),issueDescription:V("issue_description").notNull(),damageType:ae("damage_type",{length:50}).notNull(),photoUrls:V("photo_urls").array(),thirdPartyPayerName:V("third_party_payer_name"),thirdPartyPayerEmail:V("third_party_payer_email"),thirdPartyPayerPhone:V("third_party_payer_phone"),poNumber:V("po_number"),status:ae("status",{length:30}).notNull().default("pending_review"),customQuoteAmount:wt("custom_quote_amount",{precision:10,scale:2}),quoteNotes:V("quote_notes"),approverType:ae("approver_type",{length:20}),approvalToken:V("approval_token").unique(),approvedAt:K("approved_at"),declinedAt:K("declined_at"),declinedReason:V("declined_reason"),completedAt:K("completed_at"),actualTimeSpent:wt("actual_time_spent",{precision:4,scale:2}),difficultyRating:X("difficulty_rating"),lessonLearned:V("lesson_learned"),createdAt:K("created_at").defaultNow(),quotedAt:K("quoted_at"),updatedAt:K("updated_at").defaultNow(),appointmentId:X("appointment_id").references(()=>xi.id)}),P1=Te("invoices",{id:Ae("id").primaryKey(),appointmentId:X("appointment_id").references(()=>xi.id),customerId:X("customer_id").notNull().references(()=>Zn.id),invoiceType:ae("invoice_type",{length:20}).notNull().default("appointment"),amount:wt("amount").notNull(),status:ae("status",{length:20}).notNull().default("unpaid"),paymentStatus:ae("payment_status",{length:20}).notNull().default("unpaid"),paymentMethod:ae("payment_method",{length:20}),stripePaymentIntentId:V("stripe_payment_intent_id"),paypalOrderId:V("paypal_order_id"),createdAt:K("created_at").defaultNow(),paidAt:K("paid_at"),notes:V("notes"),serviceDescription:V("service_description").notNull(),reviewRequestSent:Oe("review_request_sent").default(!1),reviewRequestedAt:K("review_requested_at"),followUpSent:Oe("follow_up_sent").default(!1),billToContactId:X("bill_to_contact_id"),subtotal:wt("subtotal",{precision:10,scale:2}),taxAmount:wt("tax_amount",{precision:10,scale:2}),totalAmount:wt("total_amount",{precision:10,scale:2}),depositAmount:wt("deposit_amount",{precision:10,scale:2}),depositPaidAt:K("deposit_paid_at"),balanceDue:wt("balance_due",{precision:10,scale:2}),dueDate:K("due_date"),invoiceSentAt:K("invoice_sent_at"),lastReminderSent:K("last_reminder_sent"),reminderCount:X("reminder_count").default(0),referralCode:ae("referral_code",{length:20}),referralDiscount:wt("referral_discount",{precision:10,scale:2}),referralRewardType:ae("referral_reward_type",{length:30}),referralRewardValue:wt("referral_reward_value",{precision:10,scale:2}),referralOriginalAmount:wt("referral_original_amount",{precision:10,scale:2}),technicianId:X("technician_id").references(()=>Xt.id),updatedAt:K("updated_at").defaultNow()}),gIe=Te("technician_deposits",{id:Ae("id").primaryKey(),technicianId:X("technician_id").notNull().references(()=>Xt.id),depositDate:gi("deposit_date").notNull(),cashAmount:wt("cash_amount",{precision:10,scale:2}).notNull().default("0"),checkAmount:wt("check_amount",{precision:10,scale:2}).notNull().default("0"),totalAmount:wt("total_amount",{precision:10,scale:2}).notNull().default("0"),invoiceIds:X("invoice_ids").array(),notes:V("notes"),status:ae("status",{length:20}).notNull().default("pending"),depositedAt:K("deposited_at"),depositedBy:X("deposited_by").references(()=>Xt.id),createdAt:K("created_at").defaultNow()},e=>({technicianDateIdx:Ge("technician_deposits_tech_date_idx").on(e.technicianId,e.depositDate),statusIdx:Ge("technician_deposits_status_idx").on(e.status)})),Ih=Te("conversations",{id:Ae("id").primaryKey(),tenantId:ae("tenant_id",{length:50}).notNull().default("root"),customerId:X("customer_id").references(()=>Zn.id),customerPhone:V("customer_phone"),customerName:V("customer_name"),category:ae("category",{length:20}).default("Other"),intent:ae("intent",{length:30}).default("Information Gathering"),needsHumanAttention:Oe("needs_human_attention").default(!1),resolved:Oe("resolved").default(!1),lastMessageTime:K("last_message_time").defaultNow(),platform:ae("platform",{length:20}).notNull(),phoneLineId:X("phone_line_id").references(()=>W4.id),facebookSenderId:V("facebook_sender_id"),facebookPageId:V("facebook_page_id"),emailAddress:V("email_address"),emailThreadId:V("email_thread_id"),emailSubject:V("email_subject"),controlMode:ae("control_mode",{length:20}).default("auto"),assignedAgent:V("assigned_agent"),behaviorSettings:On("behavior_settings"),status:ae("status",{length:20}).default("active"),createdAt:K("created_at").defaultNow(),handoffRequestedAt:K("handoff_requested_at"),manualModeStartedAt:K("manual_mode_started_at"),lastAgentActivity:K("last_agent_activity"),handoffReason:V("handoff_reason"),appointmentId:X("appointment_id").references(()=>xi.id),unreadCount:X("unread_count").default(0),snoozedUntil:K("snoozed_until"),smsOptOut:Oe("sms_opt_out").default(!1),smsOptOutAt:K("sms_opt_out_at"),starred:Oe("starred").default(!1),archived:Oe("archived").default(!1),pinned:Oe("pinned").default(!1),pinnedAt:K("pinned_at"),archivedAt:K("archived_at"),starredAt:K("starred_at"),humanEscalationActive:Oe("human_escalation_active").notNull().default(!1),humanEscalationRequestedAt:K("human_escalation_requested_at"),humanHandledAt:K("human_handled_at"),humanHandledBy:X("human_handled_by").references(()=>Xt.id)},e=>({emailThreadIndex:Ge("conversations_email_thread_idx").on(e.platform,e.emailThreadId),emailAddressIndex:Ge("conversations_email_address_idx").on(e.platform,e.emailAddress),phoneLineIndex:Ge("conversations_phone_line_idx").on(e.phoneLineId)})),T1=Te("messages",{id:Ae("id").primaryKey(),conversationId:X("conversation_id").notNull().references(()=>Ih.id),content:V("content").notNull(),tenantId:ae("tenant_id",{length:50}).notNull().default("1"),sender:ae("sender",{length:20}).notNull(),fromCustomer:Oe("from_customer").notNull(),timestamp:K("timestamp").defaultNow(),topics:V("topics").array(),channel:ae("channel",{length:10}),phoneLineId:X("phone_line_id").references(()=>W4.id),isAutomated:Oe("is_automated").default(!1),edited:Oe("edited").default(!1),editedAt:K("edited_at"),deliveryStatus:ae("delivery_status",{length:20}).default("sent"),readAt:K("read_at"),metadata:On("metadata")}),xIe=Te("message_reactions",{id:Ae("id").primaryKey(),messageId:X("message_id").notNull().references(()=>T1.id,{onDelete:"cascade"}),userId:X("user_id").notNull().references(()=>Xt.id,{onDelete:"cascade"}),emoji:V("emoji").notNull(),createdAt:K("created_at").defaultNow()},e=>({uniqueReaction:ei("message_reactions_unique_idx").on(e.messageId,e.userId,e.emoji),messageIndex:Ge("message_reactions_message_idx").on(e.messageId)})),yIe=Te("message_edit_history",{id:Ae("id").primaryKey(),messageId:X("message_id").notNull().references(()=>T1.id,{onDelete:"cascade"}),previousContent:V("previous_content").notNull(),newContent:V("new_content").notNull(),editedBy:X("edited_by").references(()=>Xt.id,{onDelete:"set null"}),editedAt:K("edited_at").defaultNow()},e=>({messageIndex:Ge("message_edit_history_message_idx").on(e.messageId)})),vIe=Te("scheduled_messages",{id:Ae("id").primaryKey(),conversationId:X("conversation_id").notNull().references(()=>Ih.id,{onDelete:"cascade"}),userId:X("user_id").references(()=>Xt.id,{onDelete:"set null"}),content:V("content").notNull(),channel:ae("channel",{length:20}),scheduledFor:K("scheduled_for").notNull(),status:ae("status",{length:20}).default("pending"),metadata:On("metadata"),sentAt:K("sent_at"),errorMessage:V("error_message"),createdAt:K("created_at").defaultNow()},e=>({statusScheduledIndex:Ge("scheduled_messages_status_scheduled_idx").on(e.status,e.scheduledFor)})),bIe=Te("human_escalation_requests",{id:Ae("id").primaryKey(),conversationId:X("conversation_id").references(()=>Ih.id).notNull(),customerId:X("customer_id").references(()=>Zn.id).notNull(),customerPhone:ae("customer_phone",{length:20}).notNull(),customerName:ae("customer_name",{length:255}),triggerPhrase:ae("trigger_phrase",{length:500}),triggerMessageId:X("trigger_message_id").references(()=>T1.id),status:ae("status",{length:50}).notNull().default("pending"),recentMessageSummary:V("recent_message_summary"),customerVehicle:ae("customer_vehicle",{length:255}),lastServiceDate:K("last_service_date"),requestedAt:K("requested_at").defaultNow().notNull(),acknowledgedAt:K("acknowledged_at"),resolvedAt:K("resolved_at"),expiresAt:K("expires_at").notNull(),smsNotificationSent:Oe("sms_notification_sent").notNull().default(!1),pushNotificationSent:Oe("push_notification_sent").notNull().default(!1),createdAt:K("created_at").defaultNow().notNull()},e=>({conversationIdIdx:Ge("human_escalation_requests_conversation_idx").on(e.conversationId),statusIdx:Ge("human_escalation_requests_status_idx").on(e.status),expiresAtIdx:Ge("human_escalation_requests_expires_at_idx").on(e.expiresAt)}));Te("call_events",{id:Ae("id").primaryKey(),conversationId:X("conversation_id").references(()=>Ih.id),callSid:V("call_sid").notNull().unique(),direction:ae("direction",{length:20}).notNull(),from:V("from").notNull(),to:V("to").notNull(),customerPhone:V("customer_phone"),status:ae("status",{length:20}).notNull(),duration:X("duration"),recordingUrl:V("recording_url"),recordingSid:V("recording_sid"),transcriptionText:V("transcription_text"),transcriptionStatus:ae("transcription_status",{length:20}),answeredBy:V("answered_by"),price:wt("price"),priceUnit:ae("price_unit",{length:10}),technicianId:X("technician_id").references(()=>Co.id,{onDelete:"set null"}),appointmentId:X("appointment_id").references(()=>xi.id,{onDelete:"set null"}),readAt:K("read_at"),createdAt:K("created_at").defaultNow(),startedAt:K("started_at"),endedAt:K("ended_at")},e=>({fromPhoneIndex:Ge("call_events_from_idx").on(e.from),toPhoneIndex:Ge("call_events_to_idx").on(e.to),conversationIndex:Ge("call_events_conversation_idx").on(e.conversationId),technicianIndex:Ge("call_events_technician_idx").on(e.technicianId),statusCreatedIndex:Ge("call_events_status_created_idx").on(e.status,e.createdAt),recordingSidIndex:Ge("call_events_recording_sid_idx").on(e.recordingSid)}));const W4=Te("phone_lines",{id:Ae("id").primaryKey(),tenantId:ae("tenant_id",{length:50}).notNull().default("root"),phoneNumber:ae("phone_number",{length:20}).notNull().unique(),label:ae("label",{length:100}).notNull(),forwardingEnabled:Oe("forwarding_enabled").default(!0),forwardingNumber:ae("forwarding_number",{length:20}),ringDuration:X("ring_duration").default(10),voicemailGreeting:V("voicemail_greeting"),voicemailGreetingUrl:V("voicemail_greeting_url"),afterHoursVoicemailGreeting:V("after_hours_voicemail_greeting"),afterHoursVoicemailGreetingUrl:V("after_hours_voicemail_greeting_url"),sipEnabled:Oe("sip_enabled").default(!1),sipEndpoint:V("sip_endpoint"),sipCredentialSid:V("sip_credential_sid"),sipFallbackNumber:ae("sip_fallback_number",{length:20}),createdAt:K("created_at").defaultNow(),updatedAt:K("updated_at").defaultNow()},e=>({phoneNumberIndex:Ge("phone_lines_phone_number_idx").on(e.phoneNumber)})),wIe=Te("phone_schedules",{id:Ae("id").primaryKey(),phoneLineId:X("phone_line_id").notNull().references(()=>W4.id,{onDelete:"cascade"}),dayOfWeek:X("day_of_week").notNull(),startTime:ae("start_time",{length:5}).notNull(),endTime:ae("end_time",{length:5}).notNull(),action:ae("action",{length:20}).notNull(),createdAt:K("created_at").defaultNow()},e=>({phoneLineIdIndex:Ge("phone_schedules_phone_line_id_idx").on(e.phoneLineId),dayOfWeekIndex:Ge("phone_schedules_day_of_week_idx").on(e.dayOfWeek)})),jIe=Te("recurring_services",{id:Ae("id").primaryKey(),customerId:X("customer_id").notNull().references(()=>Zn.id),serviceId:X("service_id").notNull().references(()=>fh.id),frequency:ae("frequency",{length:30}).notNull(),intervalType:ae("interval_type",{length:30}),nextScheduledDate:gi("next_scheduled_date"),autoRenew:Oe("auto_renew").default(!0),status:ae("status",{length:20}).notNull().default("active"),preferredTime:V("preferred_time"),preferredDayOfWeek:X("preferred_day_of_week"),preferredDayOfMonth:X("preferred_day_of_month"),intervalCustomDates:V("interval_custom_dates").array(),deferredUntil:K("deferred_until"),bookingToken:ae("booking_token",{length:50}),tokenExpiresAt:K("token_expires_at"),notes:V("notes"),pauseReason:V("pause_reason"),createdAt:K("created_at").defaultNow(),updatedAt:K("updated_at").defaultNow(),pausedAt:K("paused_at"),cancelledAt:K("cancelled_at"),lastAppointmentCreatedAt:K("last_appointment_created_at")}),fae=Te("sms_delivery_status",{id:Ae("id").primaryKey(),messageSid:V("message_sid").notNull().unique(),conversationId:X("conversation_id").references(()=>Ih.id),messageId:X("message_id").references(()=>T1.id),to:V("to").notNull(),from:V("from").notNull(),body:V("body"),status:ae("status",{length:20}).notNull(),direction:ae("direction",{length:20}).notNull(),price:wt("price"),priceUnit:ae("price_unit",{length:10}),errorCode:X("error_code"),errorMessage:V("error_message"),numSegments:X("num_segments"),createdAt:K("created_at").defaultNow(),sentAt:K("sent_at"),deliveredAt:K("delivered_at"),failedAt:K("failed_at"),updatedAt:K("updated_at").defaultNow()}),hae=Te("loyalty_points",{id:Ae("id").primaryKey(),tenantId:ae("tenant_id",{length:50}).notNull().default("root"),customerId:X("customer_id").notNull().references(()=>Zn.id),points:X("points").notNull().default(0),lastUpdated:K("last_updated").defaultNow(),expiryDate:K("expiry_date")},e=>({tenantCustomerUnique:ei("loyalty_points_tenant_customer_unique").on(e.tenantId,e.customerId)}));Te("loyalty_tiers",{id:Ae("id").primaryKey(),name:V("name").notNull(),description:V("description").notNull(),pointThreshold:X("point_threshold").notNull(),benefits:V("benefits").array(),icon:V("icon")});const NIe=Te("achievements",{id:Ae("id").primaryKey(),name:V("name").notNull(),description:V("description").notNull(),pointValue:X("point_value").notNull().default(0),criteria:V("criteria").notNull(),icon:V("icon"),level:X("level").notNull().default(1)}),mae=Te("reward_services",{id:Ae("id").primaryKey(),name:V("name").notNull(),description:V("description").notNull(),pointCost:X("point_cost").notNull(),tier:ae("tier",{length:20}).notNull(),active:Oe("active").default(!0)}),pae=Te("points_transactions",{id:Ae("id").primaryKey(),tenantId:ae("tenant_id",{length:50}).notNull().default("root"),loyaltyPointsId:X("loyalty_points_id").notNull().references(()=>hae.id),amount:X("amount").notNull(),description:V("description").notNull(),transactionDate:K("transaction_date").defaultNow(),transactionType:ae("transaction_type",{length:20}).notNull(),source:ae("source",{length:30}).notNull(),sourceId:X("source_id"),expiryDate:K("expiry_date")},e=>({tenantCustomerIdx:Ge("points_transactions_tenant_customer_idx").on(e.tenantId,e.loyaltyPointsId)}));Te("loyalty_transactions",{id:Ae("id").primaryKey(),tenantId:ae("tenant_id",{length:50}).notNull(),customerId:X("customer_id").notNull().references(()=>Zn.id),deltaPoints:X("delta_points").notNull(),promoKey:ae("promo_key",{length:50}),source:ae("source",{length:50}).notNull(),metadata:On("metadata"),status:ae("status",{length:50}).default("pending"),pointsAwarded:X("points_awarded"),fulfilledAt:K("fulfilled_at"),createdAt:K("created_at").defaultNow().notNull()},e=>({tenantCustomerIdx:Ge("loyalty_transactions_tenant_customer_idx").on(e.tenantId,e.customerId),tenantPromoIdx:Ge("loyalty_transactions_tenant_promo_idx").on(e.tenantId,e.promoKey),tenantCustomerPromoIdx:Ge("loyalty_transactions_tenant_customer_promo_idx").on(e.tenantId,e.customerId,e.promoKey),tenantStatusIdx:Ge("loyalty_transactions_tenant_status_idx").on(e.tenantId,e.status)}));Te("customer_achievements",{id:Ae("id").primaryKey(),customerId:X("customer_id").notNull().references(()=>Zn.id),achievementId:X("achievement_id").notNull().references(()=>NIe.id),dateEarned:K("date_earned").defaultNow(),notified:Oe("notified").default(!1)});const SIe=Te("redeemed_rewards",{id:Ae("id").primaryKey(),customerId:X("customer_id").notNull().references(()=>Zn.id),rewardServiceId:X("reward_service_id").notNull().references(()=>mae.id),pointsSpent:X("points_spent").notNull(),redeemedDate:K("redeemed_date").defaultNow(),status:ae("status",{length:20}).default("pending"),appointmentId:X("appointment_id").references(()=>xi.id),expiryDate:K("expiry_date")}),gae=Te("referrals",{id:Ae("id").primaryKey(),referrerId:X("referrer_id").notNull().references(()=>Zn.id),referralCode:ae("referral_code",{length:20}).notNull().unique(),refereePhone:ae("referee_phone",{length:20}),refereeEmail:V("referee_email"),refereeName:V("referee_name"),refereeCustomerId:X("referee_customer_id").references(()=>Zn.id),status:ae("status",{length:30}).notNull().default("pending"),pointsAwarded:X("points_awarded").default(500),createdAt:K("created_at").defaultNow(),expiresAt:K("expires_at"),signedUpAt:K("signed_up_at"),completedAt:K("completed_at"),rewardedAt:K("rewarded_at"),rewardedInvoiceId:X("rewarded_invoice_id"),notes:V("notes")}),CIe=Te("referral_program_config",{id:Ae("id").primaryKey(),enabled:Oe("enabled").notNull().default(!0),referrerRewardType:ae("referrer_reward_type",{length:30}).notNull().default("loyalty_points"),referrerRewardAmount:wt("referrer_reward_amount",{precision:10,scale:2}).notNull().default("500"),referrerRewardServiceId:X("referrer_reward_service_id").references(()=>fh.id),referrerRewardExpiryDays:X("referrer_reward_expiry_days"),referrerRewardNotes:V("referrer_reward_notes"),refereeRewardType:ae("referee_reward_type",{length:30}).notNull().default("fixed_discount"),refereeRewardAmount:wt("referee_reward_amount",{precision:10,scale:2}).notNull().default("25"),refereeRewardServiceId:X("referee_reward_service_id").references(()=>fh.id),refereeRewardExpiryDays:X("referee_reward_expiry_days"),refereeRewardNotes:V("referee_reward_notes"),codeExpiryDays:X("code_expiry_days").default(90),maxUsesPerCode:X("max_uses_per_code").default(1),milestonesEnabled:Oe("milestones_enabled").default(!1),milestoneConfig:On("milestone_config").default("[]"),updatedAt:K("updated_at").defaultNow(),updatedBy:X("updated_by").references(()=>Xt.id)}),kIe=Te("reward_audit",{id:Ae("id").primaryKey(),referralId:X("referral_id").notNull().references(()=>gae.id),customerId:X("customer_id").notNull().references(()=>Zn.id),rewardRole:ae("reward_role",{length:20}).notNull(),rewardType:ae("reward_type",{length:30}).notNull(),rewardAmount:wt("reward_amount",{precision:10,scale:2}).notNull(),status:ae("status",{length:20}).notNull().default("pending"),appliedAt:K("applied_at"),expiresAt:K("expires_at"),invoiceId:X("invoice_id").references(()=>P1.id),transactionId:X("transaction_id").references(()=>pae.id),metadata:On("metadata"),errorMessage:V("error_message"),createdAt:K("created_at").defaultNow()},e=>({referralIdIdx:Ge("reward_audit_referral_id_idx").on(e.referralId),customerIdIdx:Ge("reward_audit_customer_id_idx").on(e.customerId),statusIdx:Ge("reward_audit_status_idx").on(e.status)})),MIe=Te("qr_code_actions",{id:Ae("id").primaryKey(),customerId:X("customer_id").notNull().references(()=>Zn.id),actionType:ae("action_type",{length:50}).notNull().default("booking"),actionUrl:V("action_url").notNull(),trackingEnabled:Oe("tracking_enabled").notNull().default(!0),scans:X("scans").notNull().default(0),lastScannedAt:K("last_scanned_at"),createdAt:K("created_at").defaultNow(),updatedAt:K("updated_at").defaultNow()},e=>({customerIdIdx:Ge("qr_code_actions_customer_id_idx").on(e.customerId)})),xae=Te("upsell_offers",{id:Ae("id").primaryKey(),name:V("name").notNull(),description:V("description").notNull(),serviceId:X("service_id").references(()=>fh.id),addOnService:Oe("add_on_service").default(!1),discountPercentage:wt("discount_percentage"),discountAmount:wt("discount_amount"),active:Oe("active").default(!0),displayOrder:X("display_order").default(0),createdAt:K("created_at").defaultNow(),updatedAt:K("updated_at").defaultNow(),minimumPurchaseAmount:wt("minimum_purchase_amount"),applicableServiceIds:V("applicable_service_ids").array(),validityDays:X("validity_days").default(3)}),_Ie=Te("appointment_upsells",{id:Ae("id").primaryKey(),appointmentId:X("appointment_id").notNull().references(()=>xi.id),upsellOfferId:X("upsell_offer_id").notNull().references(()=>xae.id),offeredAt:K("offered_at").defaultNow(),status:ae("status",{length:20}).default("offered"),responseAt:K("response_at"),newAppointmentId:X("new_appointment_id").references(()=>xi.id),expiryDate:K("expiry_date"),discountApplied:wt("discount_applied")}),yae=Te("email_campaigns",{id:Ae("id").primaryKey(),name:V("name").notNull(),subject:V("subject").notNull(),content:V("content").notNull(),scheduledDate:K("scheduled_date"),sentAt:K("sent_at"),completedAt:K("completed_at"),status:ae("status",{length:20}).notNull().default("draft"),openRate:wt("open_rate"),clickRate:wt("click_rate"),targetAudience:ae("target_audience",{length:30}).default("all"),recipientCount:X("recipient_count").default(0),sentCount:X("sent_count").default(0),failedCount:X("failed_count").default(0),createdAt:K("created_at").defaultNow(),createdBy:X("created_by").references(()=>Xt.id)});Te("campaign_recipients",{id:Ae("id").primaryKey(),campaignId:X("campaign_id").notNull().references(()=>yae.id),customerId:X("customer_id").references(()=>Zn.id),email:V("email").notNull(),status:ae("status",{length:20}).notNull().default("pending"),scheduledFor:K("scheduled_for"),sentAt:K("sent_at"),deliveredAt:K("delivered_at"),openedAt:K("opened_at"),clickedAt:K("clicked_at"),bouncedAt:K("bounced_at"),complainedAt:K("complained_at"),attemptCount:X("attempt_count").default(0),lastError:V("last_error"),messageSid:V("message_sid"),metadata:On("metadata"),createdAt:K("created_at").defaultNow()},e=>({campaignStatusIdx:Ge("campaign_recipients_status_idx").on(e.campaignId,e.status),emailIdx:Ge("campaign_recipients_email_idx").on(e.email),messageSidIdx:Ge("campaign_recipients_message_sid_idx").on(e.messageSid)}));Te("email_suppression_list",{id:Ae("id").primaryKey(),email:V("email").notNull().unique(),reason:ae("reason",{length:20}).notNull(),source:V("source"),addedAt:K("added_at").defaultNow(),metadata:On("metadata")},e=>({emailIdx:Ge("email_suppression_email_idx").on(e.email)}));const PIe=Te("sms_campaigns",{id:Ae("id").primaryKey(),name:V("name").notNull(),message:V("message").notNull(),scheduledDate:K("scheduled_date"),sentAt:K("sent_at"),completedAt:K("completed_at"),status:ae("status",{length:20}).notNull().default("draft"),targetAudience:ae("target_audience",{length:30}).default("all"),recipientCount:X("recipient_count").default(0),sentCount:X("sent_count").default(0),failedCount:X("failed_count").default(0),deliveredCount:X("delivered_count").default(0),fromNumber:V("from_number"),estimatedSegments:X("estimated_segments").default(1),createdAt:K("created_at").defaultNow(),createdBy:X("created_by").references(()=>Xt.id)});Te("sms_campaign_recipients",{id:Ae("id").primaryKey(),campaignId:X("campaign_id").notNull().references(()=>PIe.id),customerId:X("customer_id").references(()=>Zn.id),phoneNumber:V("phone_number").notNull(),status:ae("status",{length:20}).notNull().default("pending"),scheduledFor:K("scheduled_for"),sentAt:K("sent_at"),deliveredAt:K("delivered_at"),failedAt:K("failed_at"),attemptCount:X("attempt_count").default(0),lastError:V("last_error"),twilioSid:V("twilio_sid"),deliveryStatusId:X("delivery_status_id").references(()=>fae.id),timezone:V("timezone").default("America/Chicago"),metadata:On("metadata"),createdAt:K("created_at").defaultNow()},e=>({campaignStatusIdx:Ge("sms_campaign_recipients_status_idx").on(e.campaignId,e.status),phoneIdx:Ge("sms_campaign_recipients_phone_idx").on(e.phoneNumber),twilioSidIdx:Ge("sms_campaign_recipients_twilio_sid_idx").on(e.twilioSid)}));Te("daily_send_counters",{id:Ae("id").primaryKey(),date:gi("date").notNull().unique(),emailCount:X("email_count").default(0),smsCount:X("sms_count").default(0),emailLimit:X("email_limit").default(50),smsLimit:X("sms_limit").default(200),createdAt:K("created_at").defaultNow(),updatedAt:K("updated_at").defaultNow()},e=>({dateIdx:ei("daily_send_counters_date_idx").on(e.date)}));const TIe=Te("email_templates",{id:Ae("id").primaryKey(),name:V("name").notNull(),subject:V("subject").notNull(),content:V("content").notNull(),category:ae("category",{length:30}).notNull().default("general"),lastUsed:K("last_used")}),AIe=Te("email_subscribers",{id:Ae("id").primaryKey(),email:V("email").notNull().unique(),subscribed:Oe("subscribed").default(!0),subscribedAt:K("subscribed_at").defaultNow(),unsubscribedAt:K("unsubscribed_at")}),vae=Te("quick_reply_categories",{id:Ae("id").primaryKey(),name:V("name").notNull(),icon:V("icon"),displayOrder:X("display_order").default(0),createdAt:K("created_at").defaultNow()}),EIe=Te("quick_reply_templates",{id:Ae("id").primaryKey(),categoryId:X("category_id").notNull().references(()=>vae.id),content:V("content").notNull(),shortcut:V("shortcut"),displayOrder:X("display_order").default(0),createdAt:K("created_at").defaultNow(),lastUsed:K("last_used")}),IIe=Te("notification_settings",{id:Ae("id").primaryKey(),settingKey:V("setting_key").notNull().unique(),enabled:Oe("enabled").default(!0),config:On("config").notNull(),updatedAt:K("updated_at").defaultNow(),updatedBy:X("updated_by").references(()=>Xt.id)}),bae=Te("sms_templates",{id:Ae("id").primaryKey(),tenantId:ae("tenant_id",{length:50}).notNull().default("root"),templateKey:ae("template_key",{length:100}).notNull(),category:ae("category",{length:50}).notNull(),channel:ae("channel",{length:20}).notNull().default("sms"),language:ae("language",{length:10}).notNull().default("en"),name:V("name").notNull(),description:V("description"),body:V("body").notNull(),variables:On("variables").notNull(),defaultPayload:On("default_payload"),enabled:Oe("enabled").default(!0),version:X("version").notNull().default(1),createdAt:K("created_at").defaultNow(),updatedAt:K("updated_at").defaultNow(),updatedBy:X("updated_by").references(()=>Xt.id)},e=>({tenantTemplateKeyUnique:ei("sms_templates_tenant_id_template_key_unique").on(e.tenantId,e.templateKey)})),LIe=Te("sms_template_versions",{id:Ae("id").primaryKey(),templateId:X("template_id").notNull().references(()=>bae.id,{onDelete:"cascade"}),tenantId:X("tenant_id").notNull().default(1),version:X("version").notNull(),body:V("body").notNull(),variables:On("variables").notNull(),changeDescription:V("change_description"),createdAt:K("created_at").defaultNow(),createdBy:X("created_by").references(()=>Xt.id)}),DIe=Te("ai_behavior_rules",{id:Ae("id").primaryKey(),tenantId:ae("tenant_id",{length:50}).notNull().default("root"),ruleKey:ae("rule_key",{length:100}).notNull(),category:ae("category",{length:50}).notNull(),name:V("name").notNull(),description:V("description"),content:V("content").notNull(),priority:X("priority").notNull().default(100),enabled:Oe("enabled").default(!0),createdAt:K("created_at").defaultNow(),updatedAt:K("updated_at").defaultNow(),updatedBy:X("updated_by").references(()=>Xt.id)},e=>({tenantRuleKeyUnique:ei("ai_behavior_rules_tenant_id_rule_key_unique").on(e.tenantId,e.ruleKey)})),$Ie=Te("faq_entries",{id:Ae("id").primaryKey(),tenantId:ae("tenant_id",{length:50}).notNull().default("root"),category:ae("category",{length:50}).notNull(),question:V("question").notNull(),answer:V("answer").notNull(),keywords:V("keywords").array(),displayOrder:X("display_order").notNull().default(0),enabled:Oe("enabled").default(!0),createdAt:K("created_at").defaultNow(),updatedAt:K("updated_at").defaultNow(),updatedBy:X("updated_by").references(()=>Xt.id)},e=>({tenantCategoryQuestionUnique:ei("faq_entries_tenant_id_category_question_unique").on(e.tenantId,e.category,e.question)})),OIe=Te("push_subscriptions",{id:Ae("id").primaryKey(),userId:X("user_id").references(()=>Xt.id),endpoint:V("endpoint").notNull().unique(),p256dh:V("p256dh").notNull(),auth:V("auth").notNull(),userAgent:V("user_agent"),createdAt:K("created_at").defaultNow(),lastUsedAt:K("last_used_at").defaultNow()}),RIe=Te("notification_preferences",{id:Ae("id").primaryKey(),userId:X("user_id").notNull().references(()=>Xt.id),voicemailSms:Oe("voicemail_sms").notNull().default(!0),voicemailPush:Oe("voicemail_push").notNull().default(!0),cashPaymentSms:Oe("cash_payment_sms").notNull().default(!0),cashPaymentPush:Oe("cash_payment_push").notNull().default(!0),systemErrorSms:Oe("system_error_sms").notNull().default(!0),systemErrorPush:Oe("system_error_push").notNull().default(!0),missedCallSms:Oe("missed_call_sms").notNull().default(!1),appointmentReminderPush:Oe("appointment_reminder_push").notNull().default(!0),updatedAt:K("updated_at").defaultNow()}),FIe=Te("critical_monitoring_settings",{id:Ae("id").primaryKey(),alertChannels:On("alert_channels").notNull().$type(),smsRecipients:V("sms_recipients").array().notNull().default([]),emailRecipients:V("email_recipients").array().notNull().default([]),pushRoles:V("push_roles").array().notNull().default(["owner","manager"]),failureThreshold:X("failure_threshold").notNull().default(3),cooldownMinutes:X("cooldown_minutes").notNull().default(30),updatedAt:K("updated_at").defaultNow(),updatedBy:X("updated_by").references(()=>Xt.id)}),zIe=Te("gallery_photos",{id:Ae("id").primaryKey(),imageUrl:V("image_url").notNull(),title:V("title"),description:V("description"),displayOrder:X("display_order").notNull().default(0),isActive:Oe("is_active").default(!0),uploadedAt:K("uploaded_at").defaultNow(),uploadedBy:X("uploaded_by").references(()=>Xt.id),tenantId:ae("tenant_id",{length:50}).notNull().default("1")}),BIe=Te("subscriptions",{id:Ae("id").primaryKey(),serviceName:V("service_name").notNull(),description:V("description"),monthlyCost:wt("monthly_cost",{precision:10,scale:2}).notNull(),billingCycle:ae("billing_cycle",{length:20}).notNull().default("monthly"),status:ae("status",{length:20}).notNull().default("active"),renewalDate:gi("renewal_date"),website:V("website"),notes:V("notes"),isActive:Oe("is_active").default(!0),createdAt:K("created_at").defaultNow(),updatedAt:K("updated_at").defaultNow(),updatedBy:X("updated_by").references(()=>Xt.id)}),wae=Te("cancellation_feedback",{id:Ae("id").primaryKey(),appointmentId:X("appointment_id").references(()=>xi.id),customerId:X("customer_id").references(()=>Zn.id),customerName:V("customer_name").notNull(),serviceName:V("service_name").notNull(),appointmentDate:K("appointment_date").notNull(),reason:V("reason").notNull(),category:ae("category",{length:30}).notNull(),additionalComments:V("additional_comments"),wouldReschedule:Oe("would_reschedule").default(!1),wantsFullCancellation:Oe("wants_full_cancellation").default(!0),wantsFollowUp:Oe("wants_follow_up").default(!1),followUpDate:K("follow_up_date"),followUpNotes:V("follow_up_notes"),suggestedResponse:V("suggested_response"),responseStatus:ae("response_status",{length:20}).default("pending"),createdAt:K("created_at").defaultNow()}),UIe=Te("follow_up_reminders",{id:Ae("id").primaryKey(),customerId:X("customer_id").notNull().references(()=>Zn.id),cancellationId:X("cancellation_id").references(()=>wae.id),reminderDate:K("reminder_date").notNull(),reminderType:ae("reminder_type",{length:30}).default("reschedule_check"),message:V("message"),status:ae("status",{length:20}).default("pending"),sentAt:K("sent_at"),responseReceived:Oe("response_received").default(!1),notes:V("notes"),createdAt:K("created_at").defaultNow(),completedAt:K("completed_at")}),VIe=Te("facebook_page_tokens",{id:Ae("id").primaryKey(),pageId:V("page_id").notNull().unique(),pageName:V("page_name").notNull(),pageAccessToken:V("page_access_token").notNull(),platform:ae("platform",{length:20}).notNull().default("facebook"),isActive:Oe("is_active").default(!0),webhookVerifyToken:V("webhook_verify_token"),createdAt:K("created_at").defaultNow(),updatedAt:K("updated_at").defaultNow(),updatedBy:X("updated_by").references(()=>Xt.id)}),HIe=Te("business_settings",{id:Ae("id").primaryKey(),activeScheduleType:ae("active_schedule_type",{length:20}).notNull().default("regular"),startHour:X("start_hour").notNull().default(9),startMinute:X("start_minute").notNull().default(0),endHour:X("end_hour").notNull().default(15),endMinute:X("end_minute").notNull().default(0),summerStartHour:X("summer_start_hour").notNull().default(8),summerStartMinute:X("summer_start_minute").notNull().default(0),summerEndHour:X("summer_end_hour").notNull().default(18),summerEndMinute:X("summer_end_minute").notNull().default(0),winterStartHour:X("winter_start_hour").notNull().default(10),winterStartMinute:X("winter_start_minute").notNull().default(0),winterEndHour:X("winter_end_hour").notNull().default(17),winterEndMinute:X("winter_end_minute").notNull().default(0),enableLunchBreak:Oe("enable_lunch_break").notNull().default(!0),lunchHour:X("lunch_hour").notNull().default(12),lunchMinute:X("lunch_minute").notNull().default(0),daysOfWeek:X("days_of_week").array().notNull().default([1,2,3,4,5]),allowWeekendBookings:Oe("allow_weekend_bookings").notNull().default(!1),halfHourIncrements:Oe("half_hour_increments").notNull().default(!0),minimumNoticeHours:X("minimum_notice_hours").notNull().default(24),maxDriveTimeMinutes:X("max_drive_time_minutes").notNull().default(26),etaPadding:X("eta_padding").notNull().default(15),googlePlaceId:V("google_place_id").default(""),excludedServices:V("excluded_services").array().default([]),maintenanceMode:Oe("maintenance_mode").default(!1),maintenanceMessage:V("maintenance_message").default("We're currently performing maintenance. Please check back soon or contact us directly."),backupEmail:V("backup_email"),alertPhone:V("alert_phone"),autoFailoverThreshold:X("auto_failover_threshold").default(5),lastFailoverAt:K("last_failover_at"),smsFallbackEnabled:Oe("sms_fallback_enabled").default(!1),smsFallbackPhone:V("sms_fallback_phone"),smsFallbackAutoReply:V("sms_fallback_auto_reply").default("Thanks for your message! Our automated system is currently offline. You'll receive a personal response shortly."),updatedAt:K("updated_at").defaultNow(),updatedBy:X("updated_by").references(()=>Xt.id)}),WIe=Te("service_limits",{id:Ae("id").primaryKey(),serviceId:X("service_id").notNull().references(()=>fh.id),dailyLimit:X("daily_limit").notNull(),effectiveFrom:gi("effective_from"),effectiveTo:gi("effective_to"),isActive:Oe("is_active").default(!0),createdAt:K("created_at").defaultNow(),updatedAt:K("updated_at").defaultNow(),updatedBy:X("updated_by").references(()=>Xt.id)},e=>({serviceLimitLookupIdx:Ge("service_limit_lookup_idx").on(e.serviceId,e.isActive,e.effectiveFrom),serviceLimitUniqueIdx:ei("service_limit_unique_idx").on(e.serviceId,e.effectiveFrom,e.effectiveTo,e.isActive)})),jae=Te("banners",{id:Ae("id").primaryKey(),tenantId:ae("tenant_id",{length:50}).notNull().default("root"),title:V("title").notNull(),bodyText:V("body_text").notNull(),displayMode:ae("display_mode",{length:20}).notNull().default("top_bar"),ctaLabel:V("cta_label"),ctaUrl:V("cta_url"),priority:X("priority").default(0),pageTargets:V("page_targets").array().default([]),scheduleStart:K("schedule_start"),scheduleEnd:K("schedule_end"),isDismissible:Oe("is_dismissible").default(!0),trackingKey:V("tracking_key").notNull().unique(),themeColor:ae("theme_color",{length:20}).default("blue"),isActive:Oe("is_active").default(!0),createdAt:K("created_at").defaultNow(),updatedAt:K("updated_at").defaultNow(),createdBy:X("created_by").references(()=>Xt.id)},e=>({bannerActiveScheduleIdx:Ge("banner_active_schedule_idx").on(e.isActive,e.scheduleStart,e.scheduleEnd)})),qIe=Te("banner_metrics",{id:Ae("id").primaryKey(),bannerId:X("banner_id").notNull().references(()=>jae.id),eventType:ae("event_type",{length:20}).notNull(),sessionId:V("session_id"),userAgent:V("user_agent"),pageUrl:V("page_url"),createdAt:K("created_at").defaultNow()},e=>({bannerMetricsLookupIdx:Ge("banner_metrics_lookup_idx").on(e.bannerId,e.eventType,e.createdAt)})),Nae=Te("customer_tags",{id:Ae("id").primaryKey(),name:V("name").notNull().unique(),color:ae("color",{length:20}).notNull().default("blue"),icon:V("icon"),isPredefined:Oe("is_predefined").default(!1),createdAt:K("created_at").defaultNow()}),GIe=Te("conversation_tags",{id:Ae("id").primaryKey(),conversationId:X("conversation_id").notNull().references(()=>Ih.id),tagId:X("tag_id").notNull().references(()=>Nae.id),createdAt:K("created_at").defaultNow()}),Co=Te("technicians",{id:Ae("id").primaryKey(),userId:X("user_id").references(()=>Xt.id),publicId:V("public_id").notNull().unique(),preferredName:V("preferred_name").notNull(),fullName:V("full_name").notNull(),email:V("email"),phone:V("phone"),city:V("city"),photoUrl:V("photo_url"),photoThumb96:V("photo_thumb_96"),photoCard320:V("photo_card_320"),photoMms640:V("photo_mms_640"),bioAbout:V("bio_about"),bioTags:On("bio_tags"),bioRaw:V("bio_raw"),bioAiLastRevision:V("bio_ai_last_revision"),consentPublicProfile:Oe("consent_public_profile").default(!0),profileReviewed:Oe("profile_reviewed").default(!1),profileReviewedAt:K("profile_reviewed_at"),profileReviewedBy:X("profile_reviewed_by").references(()=>Xt.id),profileRejectionReason:V("profile_rejection_reason"),role:ae("role",{length:20}).notNull().default("technician"),employmentStatus:ae("employment_status",{length:20}).notNull().default("active"),hireDate:gi("hire_date"),terminationDate:gi("termination_date"),hourlyRate:wt("hourly_rate",{precision:10,scale:2}),skillLevel:X("skill_level").default(1),specialties:V("specialties").array(),maxJobsPerDay:X("max_jobs_per_day").default(6),generatedEmail:ae("generated_email",{length:255}),phoneExtension:X("phone_extension"),provisioningStatus:ae("provisioning_status",{length:20}).default("pending"),provisioningError:V("provisioning_error"),provisionedAt:K("provisioned_at"),provisionedBy:X("provisioned_by").references(()=>Xt.id),createdAt:K("created_at").defaultNow(),updatedAt:K("updated_at").defaultNow()},e=>({phoneExtensionUniqueIdx:ei("technicians_phone_extension_unique_idx").on(e.phoneExtension)}));Te("extension_pool",{id:Ae("id").primaryKey(),nextExtension:X("next_extension").notNull().default(101),assignedExtensions:X("assigned_extensions").array(),lastUpdated:K("last_updated").defaultNow(),updatedBy:X("updated_by").references(()=>Xt.id)});const YIe=Te("org_settings",{id:Ae("id").primaryKey(),settingKey:V("setting_key").notNull().unique(),settingValue:On("setting_value").notNull(),description:V("description"),updatedAt:K("updated_at").defaultNow(),updatedBy:X("updated_by").references(()=>Xt.id)}),QIe=Te("agent_preferences",{id:Ae("id").primaryKey(),professionalismLevel:X("professionalism_level").notNull().default(4),friendliness:X("friendliness").notNull().default(4),detailOrientation:X("detail_orientation").notNull().default(3),humorLevel:X("humor_level").notNull().default(2),enthusiasm:X("enthusiasm").notNull().default(3),useCustomerName:Oe("use_customer_name").notNull().default(!0),askFollowUpQuestions:Oe("ask_follow_up_questions").notNull().default(!0),offerSuggestions:Oe("offer_suggestions").notNull().default(!0),sendConfirmationMessages:Oe("send_confirmation_messages").notNull().default(!0),proactiveServiceReminders:Oe("proactive_service_reminders").notNull().default(!0),holidayGreetings:Oe("holiday_greetings").notNull().default(!0),formality:X("formality").notNull().default(3),technicalTerms:X("technical_terms").notNull().default(2),messageLength:X("message_length").notNull().default(3),defaultLanguage:ae("default_language",{length:10}).notNull().default("en"),useEmojis:Oe("use_emojis").notNull().default(!0),smsOpeningMessage:V("sms_opening_message").notNull().default("Hi! Thanks for reaching out to Clean Machine Auto Detail. How can I help you today?"),websiteOpeningMessage:V("website_opening_message").notNull().default("Welcome to Clean Machine! I'm here to help you schedule a detailing appointment or answer any questions."),facebookOpeningMessage:V("facebook_opening_message").notNull().default("Hey there! Thanks for messaging Clean Machine. What can I do for you?"),knownHolidays:On("known_holidays").notNull().default("[]"),updatedAt:K("updated_at").defaultNow(),updatedBy:X("updated_by").references(()=>Xt.id)}),KIe=Te("homepage_content",{id:Ae("id").primaryKey(),templateId:ae("template_id",{length:50}).notNull().default("current"),layoutSettings:On("layout_settings"),heroHeading:V("hero_heading").notNull().default("Clean Machine Auto Detail"),heroSubheading:V("hero_subheading").notNull().default("Professional Mobile Auto Detailing"),heroCtaText:V("hero_cta_text").notNull().default("Book Now"),heroCtaLink:V("hero_cta_link").notNull().default("/booking"),aboutHeading:V("about_heading").notNull().default("About Us"),aboutText:V("about_text").notNull().default("Premium auto detailing services..."),servicesHeading:V("services_heading").notNull().default("Our Services"),servicesSubheading:V("services_subheading"),primaryColor:ae("primary_color",{length:50}).notNull().default("220 90% 56%"),secondaryColor:ae("secondary_color",{length:50}).notNull().default("280 80% 60%"),accentColor:ae("accent_color",{length:50}).notNull().default("340 80% 55%"),logoUrl:V("logo_url"),metaTitle:V("meta_title").notNull().default("Clean Machine Auto Detail"),metaDescription:V("meta_description").notNull().default("Professional auto detailing services"),updatedAt:K("updated_at").defaultNow().notNull(),updatedBy:X("updated_by").references(()=>Xt.id)}),Sae=Te("job_postings",{id:Ae("id").primaryKey(),title:ae("title",{length:200}).notNull(),department:ae("department",{length:100}),location:ae("location",{length:100}),employmentType:ae("employment_type",{length:50}).notNull(),description:V("description").notNull(),requirements:V("requirements"),benefits:V("benefits"),salaryRange:ae("salary_range",{length:100}),isActive:Oe("is_active").default(!0).notNull(),createdAt:K("created_at").defaultNow().notNull(),updatedAt:K("updated_at").defaultNow().notNull()}),JIe=Te("job_applications",{id:Ae("id").primaryKey(),jobPostingId:X("job_posting_id").references(()=>Sae.id),firstName:ae("first_name",{length:100}).notNull(),lastName:ae("last_name",{length:100}).notNull(),email:ae("email",{length:255}).notNull(),phone:ae("phone",{length:20}).notNull(),resumeUrl:V("resume_url"),coverLetter:V("cover_letter"),linkedinUrl:ae("linkedin_url",{length:255}),portfolioUrl:ae("portfolio_url",{length:255}),yearsExperience:X("years_experience"),currentCompany:ae("current_company",{length:200}),status:ae("status",{length:50}).default("new").notNull(),notes:V("notes"),reviewedBy:X("reviewed_by").references(()=>Xt.id),reviewedAt:K("reviewed_at"),submittedAt:K("submitted_at").defaultNow().notNull()}),Cae=Te("shift_templates",{id:Ae("id").primaryKey(),name:V("name").notNull(),startTime:V("start_time").notNull(),endTime:V("end_time").notNull(),durationHours:wt("duration_hours").notNull(),color:ae("color",{length:20}).default("blue"),isActive:Oe("is_active").default(!0),createdAt:K("created_at").defaultNow()}),c2=Te("shifts",{id:Ae("id").primaryKey(),technicianId:X("technician_id").references(()=>Co.id),templateId:X("template_id").references(()=>Cae.id),shiftDate:gi("shift_date").notNull(),startTime:V("start_time").notNull(),endTime:V("end_time").notNull(),status:ae("status",{length:20}).notNull().default("scheduled"),assignedAppointments:X("assigned_appointments").array(),appointmentId:X("appointment_id").references(()=>xi.id),notes:V("notes"),createdAt:K("created_at").defaultNow(),createdBy:X("created_by").references(()=>Xt.id),updatedAt:K("updated_at").defaultNow()}),ZIe=Te("time_entries",{id:Ae("id").primaryKey(),technicianId:X("technician_id").notNull().references(()=>Co.id),shiftId:X("shift_id").references(()=>c2.id),clockInTime:K("clock_in_time").notNull(),clockOutTime:K("clock_out_time"),clockInLatitude:wt("clock_in_latitude",{precision:10,scale:7}),clockInLongitude:wt("clock_in_longitude",{precision:10,scale:7}),clockOutLatitude:wt("clock_out_latitude",{precision:10,scale:7}),clockOutLongitude:wt("clock_out_longitude",{precision:10,scale:7}),clockInAddress:V("clock_in_address"),clockOutAddress:V("clock_out_address"),geofenceVerified:Oe("geofence_verified").default(!1),totalHours:wt("total_hours",{precision:10,scale:2}),breakMinutes:X("break_minutes").default(0),status:ae("status",{length:20}).notNull().default("active"),flagReason:V("flag_reason"),approvedBy:X("approved_by").references(()=>Xt.id),approvedAt:K("approved_at"),notes:V("notes"),createdAt:K("created_at").defaultNow()}),XIe=Te("pto_requests",{id:Ae("id").primaryKey(),technicianId:X("technician_id").notNull().references(()=>Co.id),requestType:ae("request_type",{length:20}).notNull(),startDate:gi("start_date").notNull(),endDate:gi("end_date").notNull(),totalDays:wt("total_days",{precision:10,scale:1}).notNull(),reason:V("reason"),status:ae("status",{length:20}).notNull().default("pending"),requestedAt:K("requested_at").defaultNow(),reviewedBy:X("reviewed_by").references(()=>Xt.id),reviewedAt:K("reviewed_at"),reviewNotes:V("review_notes")}),e9e=Te("shift_trades",{id:Ae("id").primaryKey(),originalShiftId:X("original_shift_id").notNull().references(()=>c2.id),offeringTechId:X("offering_tech_id").notNull().references(()=>Co.id),requestingTechId:X("requesting_tech_id").references(()=>Co.id),tradeType:ae("trade_type",{length:20}).notNull(),swapShiftId:X("swap_shift_id").references(()=>c2.id),status:ae("status",{length:20}).notNull().default("pending"),message:V("message"),requestedAt:K("requested_at").defaultNow(),acceptedAt:K("accepted_at"),reviewedBy:X("reviewed_by").references(()=>Xt.id),reviewedAt:K("reviewed_at"),reviewNotes:V("review_notes")}),t9e=Te("technician_availability",{id:Ae("id").primaryKey(),technicianId:X("technician_id").notNull().references(()=>Co.id),dayOfWeek:X("day_of_week").notNull(),available:Oe("available").default(!0),preferredStartTime:V("preferred_start_time"),preferredEndTime:V("preferred_end_time"),maxHoursPerDay:wt("max_hours_per_day",{precision:10,scale:1}),notes:V("notes"),createdAt:K("created_at").defaultNow(),updatedAt:K("updated_at").defaultNow()}),n9e=Te("applicants",{id:Ae("id").primaryKey(),firstName:V("first_name").notNull(),lastName:V("last_name").notNull(),email:V("email").notNull(),phone:V("phone").notNull(),position:ae("position",{length:50}).notNull(),resumeUrl:V("resume_url"),coverLetter:V("cover_letter"),applicationStatus:ae("application_status",{length:20}).notNull().default("new"),appliedAt:K("applied_at").defaultNow(),source:ae("source",{length:30}),referredBy:X("referred_by").references(()=>Co.id),experienceYears:wt("experience_years",{precision:10,scale:1}),desiredPay:wt("desired_pay",{precision:10,scale:2}),availableStartDate:gi("available_start_date"),interviewScheduledAt:K("interview_scheduled_at"),interviewNotes:V("interview_notes"),assignedRecruiter:X("assigned_recruiter").references(()=>Xt.id),rejectionReason:V("rejection_reason"),statusUpdatedAt:K("status_updated_at").defaultNow(),notes:V("notes"),createdAt:K("created_at").defaultNow()}),r9e=Te("audit_log",{id:Ae("id").primaryKey(),userId:X("user_id").references(()=>Xt.id),technicianId:X("technician_id").references(()=>Co.id),actionType:ae("action_type",{length:50}).notNull(),entityType:ae("entity_type",{length:50}),entityId:X("entity_id"),details:On("details"),ipAddress:V("ip_address"),userAgent:V("user_agent"),timestamp:K("timestamp").defaultNow()}),EE=Te("contacts",{id:Ae("id").primaryKey(),name:V("name").notNull(),phoneE164:V("phone_e164").notNull(),phoneDisplay:V("phone_display"),email:V("email"),company:V("company"),roleTags:On("role_tags").notNull().default("[]"),address:V("address"),city:V("city"),state:ae("state",{length:2}),zip:ae("zip",{length:10}),notificationPrefs:On("notification_prefs").notNull().default('{"sms":true,"email":true}'),verified:Oe("verified").default(!1),verifiedAt:K("verified_at"),smsOptOut:Oe("sms_opt_out").default(!1),smsOptOutAt:K("sms_opt_out_at"),notes:V("notes"),createdAt:K("created_at").defaultNow(),updatedAt:K("updated_at").defaultNow(),createdBy:X("created_by").references(()=>Xt.id)}),s9e=Te("authorizations",{id:Ae("id").primaryKey(),appointmentId:X("appointment_id").notNull().references(()=>xi.id),signerContactId:X("signer_contact_id").notNull().references(()=>EE.id),authType:ae("auth_type",{length:30}).notNull(),token:V("token").notNull().unique(),tokenExpiresAt:K("token_expires_at").notNull(),approvalStatus:ae("approval_status",{length:20}).default("pending"),approvedAt:K("approved_at"),declinedAt:K("declined_at"),declineReason:V("decline_reason"),signatureData:V("signature_data"),ipAddress:V("ip_address"),userAgent:V("user_agent"),agreedToTerms:Oe("agreed_to_terms").default(!1),otpVerified:Oe("otp_verified").default(!1),otpVerifiedAt:K("otp_verified_at"),referralCode:V("referral_code"),referralDiscount:wt("referral_discount",{precision:10,scale:2}),referralDiscountType:ae("referral_discount_type",{length:30}),referralReferrerId:X("referral_referrer_id"),createdAt:K("created_at").defaultNow()}),a9e=Te("payment_links",{id:Ae("id").primaryKey(),appointmentId:X("appointment_id").notNull().references(()=>xi.id),invoiceId:X("invoice_id").references(()=>P1.id),contactId:X("contact_id").notNull().references(()=>EE.id),linkType:ae("link_type",{length:20}).notNull(),amount:wt("amount",{precision:10,scale:2}).notNull(),stripePaymentLinkId:V("stripe_payment_link_id").notNull(),publicUrl:V("public_url").notNull(),status:ae("status",{length:20}).notNull().default("pending"),paidAt:K("paid_at"),expiresAt:K("expires_at"),sentVia:ae("sent_via",{length:20}),sentAt:K("sent_at"),lastReminderSent:K("last_reminder_sent"),reminderCount:X("reminder_count").default(0),createdAt:K("created_at").defaultNow()}),i9e=Te("gift_cards",{id:Ae("id").primaryKey(),code:V("code").notNull().unique(),initialValue:wt("initial_value",{precision:10,scale:2}).notNull(),currentBalance:wt("current_balance",{precision:10,scale:2}).notNull(),currency:ae("currency",{length:3}).notNull().default("USD"),purchasedBy:V("purchased_by"),purchasedByEmail:V("purchased_by_email"),purchasedByPhone:V("purchased_by_phone"),recipientName:V("recipient_name"),recipientEmail:V("recipient_email"),giftMessage:V("gift_message"),status:ae("status",{length:20}).notNull().default("active"),issuedAt:K("issued_at").defaultNow(),expiresAt:K("expires_at"),redeemedAt:K("redeemed_at"),lastUsedAt:K("last_used_at"),createdAt:K("created_at").defaultNow()}),kae=Te("credit_ledger",{id:Ae("id").primaryKey(),customerId:X("customer_id").notNull().references(()=>Zn.id),creditType:ae("credit_type",{length:20}).notNull(),initialAmount:wt("initial_amount",{precision:10,scale:2}).notNull(),currentBalance:wt("current_balance",{precision:10,scale:2}).notNull(),currency:ae("currency",{length:3}).notNull().default("USD"),source:ae("source",{length:50}).notNull(),sourceId:X("source_id"),description:V("description"),status:ae("status",{length:20}).notNull().default("active"),issuedAt:K("issued_at").defaultNow(),expiresAt:K("expires_at"),usedAt:K("used_at"),lastUsedAt:K("last_used_at"),createdAt:K("created_at").defaultNow()},e=>({customerStatusIndex:Ge("credit_ledger_customer_status_idx").on(e.customerId,e.status),expiryIndex:Ge("credit_ledger_expiry_idx").on(e.expiresAt)})),o9e=Te("credit_transactions",{id:Ae("id").primaryKey(),creditLedgerId:X("credit_ledger_id").notNull().references(()=>kae.id),amount:wt("amount",{precision:10,scale:2}).notNull(),invoiceId:X("invoice_id").references(()=>P1.id),description:V("description"),transactionType:ae("transaction_type",{length:20}).notNull(),balanceBefore:wt("balance_before",{precision:10,scale:2}).notNull(),balanceAfter:wt("balance_after",{precision:10,scale:2}).notNull(),createdAt:K("created_at").defaultNow()}),l9e=Te("service_addons",{id:Ae("id").primaryKey(),name:V("name").notNull(),description:V("description"),value:wt("value",{precision:10,scale:2}).notNull(),category:ae("category",{length:50}),isActive:Oe("is_active").default(!0),sortOrder:X("sort_order").default(0),createdAt:K("created_at").defaultNow()});Te("customer_addon_credits",{id:Ae("id").primaryKey(),customerId:X("customer_id").notNull().references(()=>Zn.id),addonId:X("addon_id").notNull().references(()=>l9e.id),source:ae("source",{length:50}).notNull(),sourceId:X("source_id"),status:ae("status",{length:20}).notNull().default("available"),grantedAt:K("granted_at").defaultNow(),expiresAt:K("expires_at"),redeemedAt:K("redeemed_at"),redeemedInvoiceId:X("redeemed_invoice_id").references(()=>P1.id),notes:V("notes")},e=>({customerStatusIndex:Ge("addon_credits_customer_status_idx").on(e.customerId,e.status)}));const c9e=Te("milestone_definitions",{id:Ae("id").primaryKey(),name:V("name").notNull(),description:V("description"),milestoneType:ae("milestone_type",{length:30}).notNull(),targetValue:wt("target_value",{precision:10,scale:2}).notNull(),rewardType:ae("reward_type",{length:30}).notNull(),rewardValue:V("reward_value"),isActive:Oe("is_active").default(!0),isRepeatable:Oe("is_repeatable").default(!1),sortOrder:X("sort_order").default(0),createdAt:K("created_at").defaultNow()});Te("customer_milestone_progress",{id:Ae("id").primaryKey(),customerId:X("customer_id").notNull().references(()=>Zn.id),milestoneId:X("milestone_id").notNull().references(()=>c9e.id),currentValue:wt("current_value",{precision:10,scale:2}).notNull().default("0"),completedAt:K("completed_at"),rewardGranted:Oe("reward_granted").default(!1),rewardAuditId:X("reward_audit_id"),lastUpdatedAt:K("last_updated_at").defaultNow(),createdAt:K("created_at").defaultNow()},e=>({customerMilestoneIndex:Ge("milestone_progress_customer_milestone_idx").on(e.customerId,e.milestoneId),completedIndex:Ge("milestone_progress_completed_idx").on(e.completedAt)}));const Mae=Te("reminder_rules",{id:Ae("id").primaryKey(),name:V("name").notNull(),serviceId:X("service_id").references(()=>fh.id),triggerType:ae("trigger_type",{length:30}).notNull(),triggerIntervalDays:X("trigger_interval_days"),reminderWindowDays:X("reminder_window_days"),enabled:Oe("enabled").notNull().default(!0),createdAt:K("created_at").defaultNow()},e=>({serviceIdIdx:Ge("reminder_rules_service_id_idx").on(e.serviceId),enabledIdx:Ge("reminder_rules_enabled_idx").on(e.enabled)})),IE=Te("reminder_jobs",{id:Ae("id").primaryKey(),customerId:X("customer_id").notNull().references(()=>Zn.id),ruleId:X("rule_id").notNull().references(()=>Mae.id),scheduledFor:K("scheduled_for").notNull(),status:ae("status",{length:20}).notNull().default("pending"),messageContent:V("message_content"),lastAttemptAt:K("last_attempt_at"),attemptsCount:X("attempts_count").notNull().default(0),errorMessage:V("error_message"),createdAt:K("created_at").defaultNow(),sentAt:K("sent_at")},e=>({customerIdx:Ge("reminder_jobs_customer_idx").on(e.customerId),ruleIdx:Ge("reminder_jobs_rule_idx").on(e.ruleId),statusScheduledIdx:Ge("reminder_jobs_status_scheduled_idx").on(e.status,e.scheduledFor)})),d9e=Te("reminder_events",{id:Ae("id").primaryKey(),jobId:X("job_id").notNull().references(()=>IE.id,{onDelete:"cascade"}),customerId:X("customer_id").notNull().references(()=>Zn.id),eventType:ae("event_type",{length:20}).notNull(),channel:ae("channel",{length:20}).notNull(),messageContent:V("message_content"),metadata:On("metadata"),createdAt:K("created_at").defaultNow()},e=>({jobIdIdx:Ge("reminder_events_job_id_idx").on(e.jobId),customerIdx:Ge("reminder_events_customer_idx").on(e.customerId),eventTypeIdx:Ge("reminder_events_event_type_idx").on(e.eventType)})),u9e=Te("reminder_snoozes",{id:Ae("id").primaryKey(),jobId:X("job_id").notNull().references(()=>IE.id,{onDelete:"cascade"}),customerId:X("customer_id").notNull().references(()=>Zn.id),snoozedUntil:K("snoozed_until").notNull(),snoozeDuration:ae("snooze_duration",{length:20}).notNull(),createdAt:K("created_at").defaultNow()},e=>({jobIdIdx:Ge("reminder_snoozes_job_id_idx").on(e.jobId),customerIdx:Ge("reminder_snoozes_customer_idx").on(e.customerId),snoozedUntilIdx:Ge("reminder_snoozes_snoozed_until_idx").on(e.snoozedUntil)})),f9e=Te("reminder_opt_outs",{id:Ae("id").primaryKey(),customerId:X("customer_id").notNull().references(()=>Zn.id),optedOutAt:K("opted_out_at").defaultNow(),reason:V("reason"),channel:ae("channel",{length:20})},e=>({customerIdx:Ge("reminder_opt_outs_customer_idx").on(e.customerId),channelIdx:Ge("reminder_opt_outs_channel_idx").on(e.channel)})),h9e=Te("reminder_consent",{id:Ae("id").primaryKey(),customerId:X("customer_id").notNull().references(()=>Zn.id),consentType:ae("consent_type",{length:20}).notNull(),consentGiven:Oe("consent_given").notNull().default(!0),consentedAt:K("consented_at").defaultNow(),consentSource:V("consent_source"),revokedAt:K("revoked_at")},e=>({customerConsentIdx:Ge("reminder_consent_customer_consent_idx").on(e.customerId,e.consentType),consentGivenIdx:Ge("reminder_consent_given_idx").on(e.consentGiven)}));Xe(Xt).pick({username:!0,password:!0});Xe(Zn).pick({name:!0,email:!0,phone:!0,address:!0,vehicleInfo:!0,notes:!0,loyaltyProgramOptIn:!0,profilePictureUrl:!0,customerNotes:!0,notifyViaEmail:!0,notifyViaSms:!0,notifyViaPush:!0});Xe(xi).pick({customerId:!0,serviceId:!0,scheduledTime:!0,address:!0,additionalRequests:!0,addOns:!0});Xe(jIe).pick({customerId:!0,serviceId:!0,frequency:!0,intervalType:!0,nextScheduledDate:!0,intervalCustomDates:!0,autoRenew:!0,status:!0,preferredTime:!0,preferredDayOfWeek:!0,preferredDayOfMonth:!0,deferredUntil:!0,bookingToken:!0,tokenExpiresAt:!0,notes:!0}).partial({nextScheduledDate:!0,intervalType:!0,intervalCustomDates:!0,deferredUntil:!0,bookingToken:!0,tokenExpiresAt:!0,status:!0});Xe(pIe).pick({phone:!0,customerName:!0,issueDescription:!0,damageType:!0,photoUrls:!0,thirdPartyPayerName:!0,thirdPartyPayerEmail:!0,thirdPartyPayerPhone:!0,poNumber:!0}).extend({customerId:fe.number().optional()});Xe(P1).pick({appointmentId:!0,customerId:!0,amount:!0,serviceDescription:!0,notes:!0,technicianId:!0});Xe(gIe).omit({id:!0,createdAt:!0});Xe(hae).pick({customerId:!0,points:!0,expiryDate:!0});Xe(mae).pick({name:!0,description:!0,pointCost:!0,tier:!0,active:!0});Xe(SIe).pick({customerId:!0,rewardServiceId:!0,pointsSpent:!0,status:!0,expiryDate:!0});Xe(pae).pick({loyaltyPointsId:!0,amount:!0,description:!0,transactionType:!0,source:!0,sourceId:!0,expiryDate:!0});Xe(gae).omit({id:!0,createdAt:!0,signedUpAt:!0,completedAt:!0,rewardedAt:!0});Xe(CIe).omit({id:!0,updatedAt:!0});Xe(kIe).omit({id:!0,createdAt:!0,appliedAt:!0});Xe(MIe).omit({id:!0,scans:!0,lastScannedAt:!0,createdAt:!0,updatedAt:!0});Xe(xae).pick({name:!0,description:!0,serviceId:!0,addOnService:!0,discountPercentage:!0,discountAmount:!0,active:!0,displayOrder:!0,minimumPurchaseAmount:!0,applicableServiceIds:!0,validityDays:!0});Xe(_Ie).pick({appointmentId:!0,upsellOfferId:!0,status:!0,expiryDate:!0,discountApplied:!0});Xe(yae).pick({name:!0,subject:!0,content:!0,scheduledDate:!0,status:!0,targetAudience:!0,recipientCount:!0});Xe(TIe).pick({name:!0,subject:!0,content:!0,category:!0});Xe(AIe).pick({email:!0,subscribed:!0});Xe(vae).pick({name:!0,icon:!0,displayOrder:!0});Xe(EIe).pick({categoryId:!0,content:!0,displayOrder:!0});Xe(Ih).pick({customerId:!0,customerPhone:!0,customerName:!0,platform:!0,category:!0,intent:!0,controlMode:!0,assignedAgent:!0,behaviorSettings:!0,status:!0,handoffReason:!0});Xe(T1).pick({conversationId:!0,content:!0,sender:!0,fromCustomer:!0,channel:!0,topics:!0});Xe(xIe).omit({id:!0,createdAt:!0});Xe(yIe).omit({id:!0,editedAt:!0});Xe(vIe).omit({id:!0,createdAt:!0,sentAt:!0});Xe(bIe).omit({id:!0,createdAt:!0});Xe(IIe).pick({settingKey:!0,enabled:!0,config:!0,updatedBy:!0});Xe(zIe).pick({imageUrl:!0,title:!0,description:!0,displayOrder:!0,isActive:!0,uploadedBy:!0,tenantId:!0});Xe(BIe).pick({serviceName:!0,description:!0,monthlyCost:!0,billingCycle:!0,status:!0,renewalDate:!0,website:!0,notes:!0,isActive:!0,updatedBy:!0});Xe(wae).pick({appointmentId:!0,customerId:!0,customerName:!0,serviceName:!0,appointmentDate:!0,reason:!0,category:!0,additionalComments:!0,wouldReschedule:!0,wantsFullCancellation:!0,wantsFollowUp:!0,followUpDate:!0,followUpNotes:!0,suggestedResponse:!0,responseStatus:!0});Xe(UIe).pick({customerId:!0,cancellationId:!0,reminderDate:!0,reminderType:!0,message:!0,status:!0,notes:!0});Xe(fae).omit({id:!0,createdAt:!0,updatedAt:!0});Xe(VIe).omit({id:!0,createdAt:!0,updatedAt:!0});Xe(Nae).omit({id:!0,createdAt:!0});Xe(GIe).omit({id:!0,createdAt:!0});Xe(Co).omit({id:!0,createdAt:!0,updatedAt:!0,profileReviewedAt:!0,profileReviewedBy:!0});Xe(mIe).omit({id:!0,uploadedAt:!0});Xe(YIe).omit({id:!0,updatedAt:!0});Xe(Cae).omit({id:!0,createdAt:!0});Xe(c2).omit({id:!0,createdAt:!0,updatedAt:!0});Xe(ZIe).omit({id:!0,createdAt:!0,approvedAt:!0});Xe(XIe).omit({id:!0,requestedAt:!0,reviewedAt:!0});Xe(e9e).omit({id:!0,requestedAt:!0,acceptedAt:!0,reviewedAt:!0});Xe(t9e).omit({id:!0,createdAt:!0,updatedAt:!0});Xe(n9e).omit({id:!0,appliedAt:!0,createdAt:!0,statusUpdatedAt:!0});Xe(r9e).omit({id:!0,timestamp:!0});Xe(EE).omit({id:!0,createdAt:!0,updatedAt:!0,verifiedAt:!0,smsOptOutAt:!0});Xe(s9e).omit({id:!0,createdAt:!0,approvedAt:!0,declinedAt:!0});Xe(a9e).omit({id:!0,createdAt:!0,paidAt:!0,sentAt:!0,lastReminderSent:!0});Xe(i9e).omit({id:!0,createdAt:!0,issuedAt:!0,redeemedAt:!0,lastUsedAt:!0});Xe(kae).omit({id:!0,createdAt:!0,issuedAt:!0,usedAt:!0,lastUsedAt:!0});Xe(o9e).omit({id:!0,createdAt:!0});Xe(sIe).omit({id:!0,createdAt:!0,updatedAt:!0});const m9e=fe.object({id:fe.string(),position:fe.object({x:fe.number(),y:fe.number()}),size:fe.object({width:fe.number(),height:fe.number()}),visible:fe.boolean(),order:fe.number()});fe.object({widgets:fe.array(m9e)});Xe(HIe).omit({id:!0,updatedAt:!0});Xe(QIe).omit({id:!0,updatedAt:!0}).extend({professionalismLevel:fe.number().int().min(1).max(5,"Must be between 1 and 5"),friendliness:fe.number().int().min(1).max(5,"Must be between 1 and 5"),detailOrientation:fe.number().int().min(1).max(5,"Must be between 1 and 5"),humorLevel:fe.number().int().min(1).max(5,"Must be between 1 and 5"),enthusiasm:fe.number().int().min(1).max(5,"Must be between 1 and 5"),formality:fe.number().int().min(1).max(5,"Must be between 1 and 5"),technicalTerms:fe.number().int().min(1).max(5,"Must be between 1 and 5"),messageLength:fe.number().int().min(1).max(5,"Must be between 1 and 5")});Xe(KIe).omit({id:!0,updatedAt:!0});Xe(Sae).omit({id:!0,createdAt:!0,updatedAt:!0});Xe(JIe).omit({id:!0,submittedAt:!0});Xe(WIe).omit({id:!0,createdAt:!0,updatedAt:!0}).extend({dailyLimit:fe.number().positive("Daily limit must be greater than 0")});const p9e=Xe(jae).omit({id:!0,createdAt:!0,updatedAt:!0}).extend({ctaUrl:fe.string().url("Must be a valid URL").optional().or(fe.literal("")),trackingKey:fe.string().min(3,"Tracking key must be at least 3 characters")});Xe(qIe).omit({id:!0,createdAt:!0});Xe(W4).omit({id:!0,createdAt:!0,updatedAt:!0});Xe(wIe).omit({id:!0,createdAt:!0});Xe(bae).omit({id:!0,createdAt:!0,updatedAt:!0,version:!0});Xe(LIe).omit({id:!0,createdAt:!0});Xe(DIe).omit({id:!0,createdAt:!0,updatedAt:!0});Xe($Ie).omit({id:!0,createdAt:!0,updatedAt:!0});Xe(OIe).omit({id:!0,createdAt:!0,lastUsedAt:!0});Xe(RIe).omit({id:!0,updatedAt:!0});Xe(FIe).omit({id:!0,updatedAt:!0});Xe(uae).omit({id:!0,createdAt:!0,updatedAt:!0});Xe(hIe).omit({id:!0,createdAt:!0});Xe(Mae).omit({id:!0,createdAt:!0});Xe(IE).omit({id:!0,createdAt:!0,sentAt:!0,lastAttemptAt:!0});Xe(d9e).omit({id:!0,createdAt:!0});Xe(u9e).omit({id:!0,createdAt:!0});Xe(f9e).omit({id:!0,optedOutAt:!0});Xe(h9e).omit({id:!0,consentedAt:!0,revokedAt:!0});const g9e=Te("api_usage_logs",{id:Ae("id").primaryKey(),service:ae("service",{length:50}).notNull(),apiType:ae("api_type",{length:100}),quantity:X("quantity").notNull(),cost:wt("cost",{precision:10,scale:4}).notNull(),metadata:On("metadata"),timestamp:K("timestamp").defaultNow().notNull(),createdAt:K("created_at").defaultNow().notNull()},e=>({serviceIdx:Ge("api_usage_logs_service_idx").on(e.service),timestampIdx:Ge("api_usage_logs_timestamp_idx").on(e.timestamp)})),x9e=Te("service_health",{id:Ae("id").primaryKey(),service:ae("service",{length:50}).notNull().unique(),status:ae("status",{length:20}).notNull(),lastCheck:K("last_check").notNull(),lastSuccess:K("last_success"),lastError:V("last_error"),consecutiveFailures:X("consecutive_failures").default(0).notNull(),responseTime:X("response_time"),apiKeyExpiry:K("api_key_expiry"),updatedAt:K("updated_at").defaultNow().notNull()}),y9e=Te("usage_summary",{id:Ae("id").primaryKey(),service:ae("service",{length:50}).notNull(),period:ae("period",{length:20}).notNull(),periodStart:gi("period_start").notNull(),totalCalls:X("total_calls").notNull().default(0),totalCost:wt("total_cost",{precision:10,scale:2}).notNull().default("0"),createdAt:K("created_at").defaultNow().notNull(),updatedAt:K("updated_at").defaultNow().notNull()}),v9e=Te("suggestions",{id:Ae("id").primaryKey(),tenantId:V("tenant_id"),customerId:X("customer_id"),source:V("source").notNull(),context:V("context"),message:V("message").notNull(),name:V("name"),contact:V("contact"),createdAt:K("created_at").defaultNow().notNull(),handled:Oe("handled").default(!1).notNull(),handledBy:V("handled_by"),handledAt:K("handled_at"),notes:V("notes")},e=>({tenantIdIdx:Ge("suggestions_tenant_id_idx").on(e.tenantId),sourceIdx:Ge("suggestions_source_idx").on(e.source),handledIdx:Ge("suggestions_handled_idx").on(e.handled)}));Xe(g9e).omit({id:!0,createdAt:!0});Xe(x9e).omit({id:!0,updatedAt:!0});Xe(y9e).omit({id:!0,createdAt:!0,updatedAt:!0});const b9e=fe.object({name:fe.string(),priceRange:fe.string(),overview:fe.string(),detailedDescription:fe.string(),duration:fe.string().optional(),imageUrl:fe.string().optional()}),w9e=fe.object({name:fe.string(),priceRange:fe.string(),overview:fe.string(),detailedDescription:fe.string(),imageUrl:fe.string().optional()});fe.object({success:fe.boolean(),services:fe.array(b9e)});fe.object({success:fe.boolean(),addOns:fe.array(w9e)});Xe(aIe).omit({id:!0,updatedAt:!0});fe.object({demoModeEnabled:fe.boolean()});Xe(v9e).omit({id:!0,createdAt:!0});Xe(dIe).omit({id:!0,createdAt:!0,updatedAt:!0});Xe(uIe).omit({id:!0,createdAt:!0});Xe(fIe).omit({id:!0,createdAt:!0});Xe(H4).omit({createdAt:!0,updatedAt:!0});Xe(oIe).omit({createdAt:!0,updatedAt:!0});Xe(lIe).omit({createdAt:!0});const mi=OTe,_ae=p.createContext({}),Ye=({...e})=>n.jsx(_ae.Provider,{value:{name:e.name},children:n.jsx(BTe,{...e})}),q4=()=>{const e=p.useContext(_ae),t=p.useContext(Pae),{getFieldState:r,formState:s}=U4(),a=r(e.name,s);if(!e)throw new Error("useFormField should be used within <FormField>");const{id:i}=t;return{id:i,name:e.name,formItemId:`${i}-form-item`,formDescriptionId:`${i}-form-item-description`,formMessageId:`${i}-form-item-message`,...a}},Pae=p.createContext({}),We=p.forwardRef(({className:e,...t},r)=>{const s=p.useId();return n.jsx(Pae.Provider,{value:{id:s},children:n.jsx("div",{ref:r,className:Le("space-y-2",e),...t})})});We.displayName="FormItem";const qe=p.forwardRef(({className:e,...t},r)=>{const{error:s,formItemId:a}=q4();return n.jsx(U,{ref:r,className:Le(s&&"text-destructive",e),htmlFor:a,...t})});qe.displayName="FormLabel";const Qe=p.forwardRef(({...e},t)=>{const{error:r,formItemId:s,formDescriptionId:a,formMessageId:i}=q4();return n.jsx(MY,{ref:t,id:s,"aria-describedby":r?`${a} ${i}`:`${a}`,"aria-invalid":!!r,...e})});Qe.displayName="FormControl";const cn=p.forwardRef(({className:e,...t},r)=>{const{formDescriptionId:s}=q4();return n.jsx("p",{ref:r,id:s,className:Le("text-sm text-muted-foreground",e),...t})});cn.displayName="FormDescription";const Ze=p.forwardRef(({className:e,children:t,...r},s)=>{const{error:a,formMessageId:i}=q4(),o=a?String((a==null?void 0:a.message)??""):t;return o?n.jsx("p",{ref:s,id:i,className:Le("text-sm font-medium text-destructive",e),...r,children:o}):null});Ze.displayName="FormMessage";const j9e=p9e.extend({scheduleStart:fe.string().optional(),scheduleEnd:fe.string().optional(),pageTargets:fe.string().optional()});function yO(){const{toast:e}=Ee(),[t,r]=p.useState(!1),[s,a]=p.useState(null),{data:i=[],isLoading:o}=be({queryKey:["/api/banners"]}),l=je({mutationFn:async h=>await Ne("POST","/api/banners",h),onSuccess:()=>{ze.invalidateQueries({queryKey:["/api/banners"]}),r(!1),e({title:"Banner created successfully"})},onError:h=>{e({title:"Failed to create banner",description:h.message,variant:"destructive"})}}),c=je({mutationFn:async({id:h,data:m})=>await Ne("PATCH",`/api/banners/${h}`,m),onSuccess:()=>{ze.invalidateQueries({queryKey:["/api/banners"]}),a(null),e({title:"Banner updated successfully"})},onError:h=>{e({title:"Failed to update banner",description:h.message,variant:"destructive"})}}),d=je({mutationFn:async h=>await Ne("DELETE",`/api/banners/${h}`),onSuccess:()=>{ze.invalidateQueries({queryKey:["/api/banners"]}),e({title:"Banner deleted successfully"})},onError:h=>{e({title:"Failed to delete banner",description:h.message,variant:"destructive"})}}),u=({banner:h,onClose:m})=>{var y;const g=fi({resolver:hi(j9e),defaultValues:{title:(h==null?void 0:h.title)||"",bodyText:(h==null?void 0:h.bodyText)||"",displayMode:(h==null?void 0:h.displayMode)||"top_bar",ctaLabel:(h==null?void 0:h.ctaLabel)||"",ctaUrl:(h==null?void 0:h.ctaUrl)||"",priority:(h==null?void 0:h.priority)??0,pageTargets:((y=h==null?void 0:h.pageTargets)==null?void 0:y.join(", "))||"",scheduleStart:h!=null&&h.scheduleStart?Ie(new Date(h.scheduleStart),"yyyy-MM-dd'T'HH:mm"):"",scheduleEnd:h!=null&&h.scheduleEnd?Ie(new Date(h.scheduleEnd),"yyyy-MM-dd'T'HH:mm"):"",isDismissible:(h==null?void 0:h.isDismissible)!==void 0?h.isDismissible:!0,trackingKey:(h==null?void 0:h.trackingKey)||`banner_${Date.now()}`,themeColor:(h==null?void 0:h.themeColor)||"blue",isActive:(h==null?void 0:h.isActive)!==void 0?h.isActive:!0}}),x=v=>{const b={...v,pageTargets:v.pageTargets?v.pageTargets.split(",").map(w=>w.trim()).filter(Boolean):[],scheduleStart:v.scheduleStart?new Date(v.scheduleStart):null,scheduleEnd:v.scheduleEnd?new Date(v.scheduleEnd):null};h?c.mutate({id:h.id,data:b}):l.mutate(b)};return n.jsx(mi,{...g,children:n.jsxs("form",{onSubmit:g.handleSubmit(x),className:"space-y-4",children:[n.jsx(Ye,{control:g.control,name:"title",render:({field:v})=>n.jsxs(We,{children:[n.jsx(qe,{children:"Title"}),n.jsx(Qe,{children:n.jsx(se,{...v,placeholder:"Spring Special 2025","data-testid":"input-banner-title"})}),n.jsx(Ze,{})]})}),n.jsx(Ye,{control:g.control,name:"bodyText",render:({field:v})=>n.jsxs(We,{children:[n.jsx(qe,{children:"Message"}),n.jsx(Qe,{children:n.jsx(un,{...v,placeholder:"Get 20% off all detailing services this month!",rows:3,"data-testid":"textarea-banner-message"})}),n.jsx(cn,{children:"Plain text or markdown supported"}),n.jsx(Ze,{})]})}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsx(Ye,{control:g.control,name:"displayMode",render:({field:v})=>n.jsxs(We,{children:[n.jsx(qe,{children:"Display Mode"}),n.jsxs(Pt,{onValueChange:v.onChange,defaultValue:v.value,children:[n.jsx(Qe,{children:n.jsx(kt,{"data-testid":"select-display-mode",children:n.jsx(Tt,{placeholder:"Select display mode"})})}),n.jsxs(Mt,{children:[n.jsx(ve,{value:"top_bar",children:"Top Bar"}),n.jsx(ve,{value:"modal",children:"Modal"}),n.jsx(ve,{value:"floating",children:"Floating"})]})]}),n.jsx(Ze,{})]})}),n.jsx(Ye,{control:g.control,name:"themeColor",render:({field:v})=>n.jsxs(We,{children:[n.jsx(qe,{children:"Theme Color"}),n.jsxs(Pt,{onValueChange:v.onChange,defaultValue:v.value||void 0,children:[n.jsx(Qe,{children:n.jsx(kt,{"data-testid":"select-theme-color",children:n.jsx(Tt,{placeholder:"Select color"})})}),n.jsxs(Mt,{children:[n.jsx(ve,{value:"blue",children:"Blue"}),n.jsx(ve,{value:"red",children:"Red"}),n.jsx(ve,{value:"green",children:"Green"}),n.jsx(ve,{value:"yellow",children:"Yellow"}),n.jsx(ve,{value:"purple",children:"Purple"})]})]}),n.jsx(Ze,{})]})})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsx(Ye,{control:g.control,name:"ctaLabel",render:({field:v})=>n.jsxs(We,{children:[n.jsx(qe,{children:"Button Text (Optional)"}),n.jsx(Qe,{children:n.jsx(se,{...v,value:v.value||"",placeholder:"Book Now","data-testid":"input-cta-label"})}),n.jsx(Ze,{})]})}),n.jsx(Ye,{control:g.control,name:"ctaUrl",render:({field:v})=>n.jsxs(We,{children:[n.jsx(qe,{children:"Button URL (Optional)"}),n.jsx(Qe,{children:n.jsx(se,{...v,value:v.value||"",placeholder:"/",type:"url","data-testid":"input-cta-url"})}),n.jsx(Ze,{})]})})]}),n.jsx(Ye,{control:g.control,name:"pageTargets",render:({field:v})=>n.jsxs(We,{children:[n.jsx(qe,{children:"Target Pages (Optional)"}),n.jsx(Qe,{children:n.jsx(se,{...v,placeholder:"/, /services, /dashboard","data-testid":"input-page-targets"})}),n.jsx(cn,{children:"Comma-separated paths. Leave empty for all pages."}),n.jsx(Ze,{})]})}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsx(Ye,{control:g.control,name:"scheduleStart",render:({field:v})=>n.jsxs(We,{children:[n.jsx(qe,{children:"Start Date/Time (Optional)"}),n.jsx(Qe,{children:n.jsx(se,{...v,type:"datetime-local","data-testid":"input-schedule-start"})}),n.jsx(Ze,{})]})}),n.jsx(Ye,{control:g.control,name:"scheduleEnd",render:({field:v})=>n.jsxs(We,{children:[n.jsx(qe,{children:"End Date/Time (Optional)"}),n.jsx(Qe,{children:n.jsx(se,{...v,type:"datetime-local","data-testid":"input-schedule-end"})}),n.jsx(Ze,{})]})})]}),n.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[n.jsx(Ye,{control:g.control,name:"priority",render:({field:v})=>n.jsxs(We,{children:[n.jsx(qe,{children:"Priority"}),n.jsx(Qe,{children:n.jsx(se,{...v,value:v.value??0,type:"number",placeholder:"0","data-testid":"input-priority",onChange:b=>v.onChange(parseInt(b.target.value)||0)})}),n.jsx(cn,{children:"Higher shows first"}),n.jsx(Ze,{})]})}),n.jsx(Ye,{control:g.control,name:"isDismissible",render:({field:v})=>n.jsxs(We,{className:"flex flex-col justify-between",children:[n.jsx(qe,{children:"Dismissible"}),n.jsx(Qe,{children:n.jsx(Vt,{checked:v.value??!0,onCheckedChange:v.onChange,"data-testid":"switch-dismissible"})}),n.jsx(Ze,{})]})}),n.jsx(Ye,{control:g.control,name:"isActive",render:({field:v})=>n.jsxs(We,{className:"flex flex-col justify-between",children:[n.jsx(qe,{children:"Active"}),n.jsx(Qe,{children:n.jsx(Vt,{checked:v.value??!0,onCheckedChange:v.onChange,"data-testid":"switch-active"})}),n.jsx(Ze,{})]})})]}),n.jsx(Ye,{control:g.control,name:"trackingKey",render:({field:v})=>n.jsxs(We,{children:[n.jsx(qe,{children:"Tracking Key"}),n.jsx(Qe,{children:n.jsx(se,{...v,placeholder:"banner_spring_2025","data-testid":"input-tracking-key"})}),n.jsx(cn,{children:"Unique identifier for tracking dismissals"}),n.jsx(Ze,{})]})}),n.jsxs("div",{className:"flex justify-end gap-2",children:[n.jsx(_,{type:"button",variant:"outline",onClick:m,"data-testid":"button-cancel",children:"Cancel"}),n.jsx(_,{type:"submit",disabled:l.isPending||c.isPending,"data-testid":"button-save-banner",children:l.isPending||c.isPending?"Saving...":h?"Update Banner":"Create Banner"})]})]})})};if(o)return n.jsx(xn,{title:"Banner Management",children:n.jsx("div",{className:"p-6",children:n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsx("div",{className:"text-muted-foreground",children:"Loading banners..."})})})});const f=n.jsxs(At,{open:t,onOpenChange:r,children:[n.jsx(pl,{asChild:!0,children:n.jsxs(_,{"data-testid":"button-create-banner",children:[n.jsx(Un,{className:"h-4 w-4 mr-2"}),"Create Banner"]})}),n.jsxs(_t,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[n.jsx($t,{children:n.jsx(Et,{children:"Create New Banner"})}),n.jsx(u,{onClose:()=>r(!1)})]})]});return n.jsx(xn,{title:"Banner Management",pageActions:f,children:n.jsx("div",{className:"p-6",children:i.length===0?n.jsx(O,{children:n.jsxs(H,{className:"flex flex-col items-center justify-center py-12",children:[n.jsx(Mp,{className:"h-12 w-12 text-muted-foreground mb-4"}),n.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No banners yet"}),n.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Create your first marketing banner to get started"}),n.jsxs(_,{onClick:()=>r(!0),"data-testid":"button-create-first-banner",children:[n.jsx(Un,{className:"h-4 w-4 mr-2"}),"Create Banner"]})]})}):n.jsx("div",{className:"grid gap-4",children:i.map(h=>n.jsxs(O,{"data-testid":`card-banner-${h.id}`,children:[n.jsx(ee,{children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx(te,{children:h.title}),h.isActive?n.jsx(ge,{variant:"default","data-testid":`badge-active-${h.id}`,children:"Active"}):n.jsx(ge,{variant:"secondary","data-testid":`badge-inactive-${h.id}`,children:"Inactive"}),n.jsx(ge,{variant:"outline",children:h.displayMode})]}),n.jsx(ke,{children:h.bodyText})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(At,{open:(s==null?void 0:s.id)===h.id,onOpenChange:m=>!m&&a(null),children:[n.jsx(pl,{asChild:!0,children:n.jsx(_,{variant:"outline",size:"sm",onClick:()=>a(h),"data-testid":`button-edit-${h.id}`,children:n.jsx(No,{className:"h-4 w-4"})})}),n.jsxs(_t,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[n.jsx($t,{children:n.jsx(Et,{children:"Edit Banner"})}),n.jsx(u,{banner:h,onClose:()=>a(null)})]})]}),n.jsx(_,{variant:"outline",size:"sm",onClick:()=>{confirm("Are you sure you want to delete this banner?")&&d.mutate(h.id)},"data-testid":`button-delete-${h.id}`,children:n.jsx(Nr,{className:"h-4 w-4 text-destructive"})})]})]})}),n.jsx(H,{children:n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[h.scheduleStart&&n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Dt,{className:"h-4 w-4 text-muted-foreground"}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:"Start"}),n.jsx("div",{className:"text-muted-foreground",children:Ie(new Date(h.scheduleStart),"MMM d, yyyy")})]})]}),h.scheduleEnd&&n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Dt,{className:"h-4 w-4 text-muted-foreground"}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:"End"}),n.jsx("div",{className:"text-muted-foreground",children:Ie(new Date(h.scheduleEnd),"MMM d, yyyy")})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Mp,{className:"h-4 w-4 text-muted-foreground"}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:"Pages"}),n.jsx("div",{className:"text-muted-foreground",children:h.pageTargets&&h.pageTargets.length>0?h.pageTargets.join(", "):"All pages"})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Kl,{className:"h-4 w-4 text-muted-foreground"}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:"Priority"}),n.jsx("div",{className:"text-muted-foreground",children:h.priority})]})]})]})})]},h.id))})})})}function N9e(){const[e,t]=zt(),[r,s]=p.useState(new Set),a=h=>{if(h.startsWith("http://")||h.startsWith("https://")||h.startsWith("//")||h.startsWith("mailto:")||h.startsWith("tel:")){window.location.href=h;return}if(h.startsWith("/api/")){window.location.href=h;return}if(["/uploads/","/downloads/","/assets/","/static/","/files/"].some(x=>h.startsWith(x))){window.location.href=h;return}if([".pdf",".zip",".doc",".docx",".xls",".xlsx",".csv",".txt",".jpg",".jpeg",".png",".gif",".mp4",".mov",".avi",".mp3",".wav"].some(x=>h.toLowerCase().includes(x))){window.location.href=h;return}t(h)},{data:i=[]}=be({queryKey:["/api/banners/active"],queryFn:async()=>{const h=await fetch("/api/banners/active",{credentials:"include"});if(!h.ok)throw new Error("Failed to fetch banners");return h.json()},refetchInterval:6e4});p.useEffect(()=>{const h=new Set;i.forEach(m=>{localStorage.getItem(`banner_dismissed_${m.trackingKey}`)&&h.add(m.trackingKey)}),s(m=>{const g=Array.from(m).sort(),x=Array.from(h).sort();return JSON.stringify(g)===JSON.stringify(x)?m:h})},[i]);const o=h=>{h.isDismissible&&(localStorage.setItem(`banner_dismissed_${h.trackingKey}`,"true"),s(m=>new Set(m).add(h.trackingKey)))},l=i.filter(h=>r.has(h.trackingKey)?!1:h.pageTargets&&h.pageTargets.length>0?h.pageTargets.includes(e):!0),c=l.filter(h=>h.displayMode==="top_bar"),d=l.filter(h=>h.displayMode==="modal"),u=l.filter(h=>h.displayMode==="floating"),f=h=>{const m={blue:{bg:"bg-blue-500/10 dark:bg-blue-500/20",text:"text-blue-900 dark:text-blue-100",border:"border-blue-500/20"},red:{bg:"bg-red-500/10 dark:bg-red-500/20",text:"text-red-900 dark:text-red-100",border:"border-red-500/20"},green:{bg:"bg-green-500/10 dark:bg-green-500/20",text:"text-green-900 dark:text-green-100",border:"border-green-500/20"},yellow:{bg:"bg-yellow-500/10 dark:bg-yellow-500/20",text:"text-yellow-900 dark:text-yellow-100",border:"border-yellow-500/20"},purple:{bg:"bg-purple-500/10 dark:bg-purple-500/20",text:"text-purple-900 dark:text-purple-100",border:"border-purple-500/20"}};return m[h]||m.blue};return n.jsxs(n.Fragment,{children:[c.map(h=>{const m=f(h.themeColor||"blue");return n.jsx("div",{className:`w-full ${m.bg} ${m.text} border-b ${m.border} py-3 px-4 relative`,"data-testid":`banner-topbar-${h.trackingKey}`,children:n.jsxs("div",{className:"container mx-auto flex items-center justify-between gap-4",children:[n.jsxs("div",{className:"flex-1 flex items-center gap-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-semibold text-sm sm:text-base",children:h.title}),n.jsx("p",{className:"text-xs sm:text-sm opacity-90",children:h.bodyText})]}),h.ctaLabel&&h.ctaUrl&&n.jsx(_,{size:"sm",variant:"default",onClick:()=>a(h.ctaUrl),"data-testid":`banner-cta-${h.trackingKey}`,children:h.ctaLabel})]}),h.isDismissible&&n.jsx("button",{onClick:()=>o(h),className:"p-1 hover:opacity-70 transition-opacity","data-testid":`banner-dismiss-${h.trackingKey}`,"aria-label":"Dismiss banner",children:n.jsx(Jr,{className:"h-4 w-4"})})]})},h.id)}),d.map((h,m)=>{const g=f(h.themeColor||"blue");return n.jsx(At,{open:!0,onOpenChange:()=>o(h),children:n.jsx(_t,{className:`sm:max-w-md ${g.bg} ${g.text} border ${g.border}`,"data-testid":`banner-modal-${h.trackingKey}`,children:n.jsxs("div",{className:"space-y-4",children:[n.jsx("h2",{className:"text-2xl font-bold",children:h.title}),n.jsx("p",{className:"text-sm opacity-90 whitespace-pre-wrap",children:h.bodyText}),h.ctaLabel&&h.ctaUrl&&n.jsxs("div",{className:"flex justify-end gap-2",children:[h.isDismissible&&n.jsx(_,{variant:"outline",onClick:()=>o(h),"data-testid":`banner-modal-dismiss-${h.trackingKey}`,children:"Maybe Later"}),n.jsx(_,{variant:"default",onClick:()=>a(h.ctaUrl),"data-testid":`banner-modal-cta-${h.trackingKey}`,children:h.ctaLabel})]})]})})},h.id)}),u.map((h,m)=>{const g=f(h.themeColor||"blue");return n.jsx(O,{className:`fixed bottom-4 right-4 max-w-sm ${g.bg} ${g.text} border ${g.border} shadow-lg z-50`,"data-testid":`banner-floating-${h.trackingKey}`,style:{bottom:`${4+m*160}px`},children:n.jsxs("div",{className:"p-4 space-y-3",children:[n.jsxs("div",{className:"flex items-start justify-between gap-2",children:[n.jsx("h3",{className:"font-semibold text-sm",children:h.title}),h.isDismissible&&n.jsx("button",{onClick:()=>o(h),className:"p-1 hover:opacity-70 transition-opacity shrink-0","data-testid":`banner-floating-dismiss-${h.trackingKey}`,"aria-label":"Dismiss banner",children:n.jsx(Jr,{className:"h-4 w-4"})})]}),n.jsx("p",{className:"text-xs opacity-90 whitespace-pre-wrap",children:h.bodyText}),h.ctaLabel&&h.ctaUrl&&n.jsx(_,{size:"sm",variant:"default",className:"w-full",onClick:()=>a(h.ctaUrl),"data-testid":`banner-floating-cta-${h.trackingKey}`,children:h.ctaLabel})]})},h.id)})]})}function S9e(){const{toast:e}=Ee(),{data:t,isLoading:r}=be({queryKey:["/api/appointments/damage-assessment/pending"]}),s=(t==null?void 0:t.appointments)||[],a=je({mutationFn:async({appointmentId:d,status:u})=>{const f=await fetch(`/api/appointments/${d}/damage-assessment`,{method:"PATCH",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({status:u})});if(!f.ok)throw new Error("Failed to update assessment status");return f.json()},onSuccess:()=>{ze.invalidateQueries({queryKey:["/api/appointments/damage-assessment/pending"]}),e({title:"Status Updated",description:"Damage assessment status has been updated successfully."})},onError:()=>{e({title:"Error",description:"Failed to update assessment status. Please try again.",variant:"destructive"})}}),i=d=>{a.mutate({appointmentId:d,status:"approved"})},o=d=>{a.mutate({appointmentId:d,status:"rejected"})},l=d=>{const u=new Date,f=new Date(d),h=Math.floor((u.getTime()-f.getTime())/(1e3*60*60)),m=Math.floor((u.getTime()-f.getTime())%(1e3*60*60)/(1e3*60));return h>0?`${h}h ${m}m`:`${m}m`},c=n.jsxs(ge,{variant:s.length>0?"destructive":"outline",children:[s.length," Pending Review",s.length!==1?"s":""]});return n.jsx(xn,{title:"Damage Assessment",pageActions:c,children:n.jsx("div",{className:"p-6 space-y-6",children:r?n.jsx("div",{className:"text-center py-12",children:n.jsx("p",{className:"text-gray-500",children:"Loading pending assessments..."})}):s.length===0?n.jsx(O,{children:n.jsx(H,{className:"py-12",children:n.jsxs("div",{className:"text-center",children:[n.jsx(bn,{className:"mx-auto h-12 w-12 text-green-500 mb-4"}),n.jsx("h3",{className:"text-xl font-semibold mb-2",children:"All Caught Up!"}),n.jsx("p",{className:"text-gray-500",children:"No damage assessments pending review. All appointments are approved or handled."})]})})}):n.jsx("div",{className:"grid gap-6",children:s.map(d=>n.jsxs(O,{className:"border-l-4 border-l-orange-500",children:[n.jsx(ee,{children:n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{className:"space-y-1",children:[n.jsxs(te,{className:"flex items-center gap-2",children:[n.jsx(Wt,{className:"h-5 w-5 text-orange-500"}),d.service.name," - ",d.customer.name]}),n.jsxs(ke,{children:["Scheduled: ",Ie(new Date(d.appointment.scheduledTime),"PPP p")]})]}),n.jsxs(ge,{variant:"outline",className:"flex items-center gap-1",children:[n.jsx(Rt,{className:"h-3 w-3"}),"Waiting: ",l(d.appointment.assessmentRequestedAt)]})]})}),n.jsxs(H,{className:"space-y-6",children:[n.jsxs("div",{className:"grid md:grid-cols-2 gap-4 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Customer"}),n.jsx("p",{className:"font-semibold",children:d.customer.name}),n.jsx("p",{className:"text-sm text-gray-600",children:d.customer.phone}),d.customer.email&&n.jsx("p",{className:"text-sm text-gray-600",children:d.customer.email})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Service Location"}),n.jsx("p",{className:"text-sm",children:d.appointment.address}),n.jsx("p",{className:"text-sm font-medium text-gray-500 mt-2",children:"Price Range"}),n.jsx("p",{className:"text-sm",children:d.service.priceRange})]})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold mb-2",children:"Reported Issue:"}),n.jsx("p",{className:"text-gray-700 dark:text-gray-300 p-3 bg-yellow-50 dark:bg-yellow-900/20 rounded border-l-4 border-yellow-500",children:d.appointment.damageDescription||"No description provided"})]}),d.appointment.damagePhotos&&d.appointment.damagePhotos.length>0&&n.jsxs("div",{children:[n.jsxs("h4",{className:"font-semibold mb-3",children:["Uploaded Photos (",d.appointment.damagePhotos.length,"):"]}),n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:d.appointment.damagePhotos.map((u,f)=>n.jsxs("div",{className:"relative group",children:[n.jsx("img",{src:u,alt:`Damage photo ${f+1}`,className:"w-full h-32 object-cover rounded-lg border-2 border-gray-200 dark:border-gray-700"}),n.jsx("a",{href:u,target:"_blank",rel:"noopener noreferrer",className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center rounded-lg","data-testid":`link-photo-${f+1}`,children:n.jsx(xa,{className:"h-6 w-6 text-white"})})]},f))})]}),n.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[n.jsxs(_,{onClick:()=>i(d.appointment.id),disabled:a.isPending,className:"flex-1 bg-green-600 hover:bg-green-700","data-testid":`button-approve-${d.appointment.id}`,children:[n.jsx(bn,{className:"mr-2 h-4 w-4"}),"Approve & Confirm"]}),n.jsxs(_,{onClick:()=>o(d.appointment.id),disabled:a.isPending,variant:"destructive",className:"flex-1","data-testid":`button-reject-${d.appointment.id}`,children:[n.jsx(Ws,{className:"mr-2 h-4 w-4"}),"Reject Appointment"]})]}),n.jsx("p",{className:"text-xs text-gray-500 text-center pt-2",children:" Appointments auto-approve after 2 hours if no action taken"})]})]},d.appointment.id))})})})}const vO=[{id:1,name:"Sarah Johnson",email:"sarah.johnson@email.com",phone:"+1555012",address:"123 Oak Street, Austin, TX 78701",vehicleInfo:"2022 Tesla Model 3 - White",loyaltyPoints:850,tier:"gold",totalAppointments:8,lifetimeValue:1240,lastVisit:"2025-11-15"},{id:2,name:"Michael Chen",email:"m.chen@business.com",phone:"+15550123457",address:"456 Maple Ave, Austin, TX 78702",vehicleInfo:"2023 BMW X5 - Black",loyaltyPoints:1200,tier:"platinum",totalAppointments:12,lifetimeValue:2150,lastVisit:"2025-11-18"},{id:3,name:"Emily Rodriguez",email:"emily.r@mail.com",phone:"+15550234568",address:"789 Pine Road, Austin, TX 78703",vehicleInfo:"2021 Honda CR-V - Silver",loyaltyPoints:420,tier:"silver",totalAppointments:5,lifetimeValue:650,lastVisit:"2025-11-12"},{id:4,name:"David Martinez",email:"dmartinez@company.net",phone:"+15550345679",address:"321 Elm Street, Austin, TX 78704",vehicleInfo:"2024 Mercedes GLE - Gray",loyaltyPoints:2100,tier:"platinum",totalAppointments:15,lifetimeValue:3200,lastVisit:"2025-11-19"},{id:5,name:"Jessica Taylor",email:"jtaylor@webmail.com",phone:"+15550456780",address:"654 Birch Lane, Austin, TX 78705",vehicleInfo:"2020 Toyota Camry - Blue",loyaltyPoints:180,tier:"bronze",totalAppointments:2,lifetimeValue:280,lastVisit:"2025-10-28"},{id:6,name:"Robert Williams",email:"rwilliams@corp.com",phone:"+15550567891",address:"987 Cedar Drive, Austin, TX 78706",vehicleInfo:"2023 Audi Q7 - White",loyaltyPoints:950,tier:"gold",totalAppointments:9,lifetimeValue:1580,lastVisit:"2025-11-14"},{id:7,name:"Amanda Brown",email:"amanda.b@email.net",phone:"+15550678902",address:"246 Willow Court, Austin, TX 78707",vehicleInfo:"2022 Ford F-150 - Red",loyaltyPoints:620,tier:"silver",totalAppointments:6,lifetimeValue:920,lastVisit:"2025-11-10"},{id:8,name:"Christopher Lee",email:"c.lee@business.org",phone:"+15550789013",address:"135 Spruce Ave, Austin, TX 78708",vehicleInfo:"2023 Lexus RX - Black",loyaltyPoints:1450,tier:"platinum",totalAppointments:11,lifetimeValue:2380,lastVisit:"2025-11-17"},{id:9,name:"Lisa Anderson",email:"lisa.anderson@mail.com",phone:"+15550890124",address:"579 Ash Boulevard, Austin, TX 78709",vehicleInfo:"2021 Jeep Wrangler - Green",loyaltyPoints:340,tier:"bronze",totalAppointments:4,lifetimeValue:480,lastVisit:"2025-11-05"},{id:10,name:"James Wilson",email:"jwilson@enterprise.com",phone:"+15550901235",address:"802 Poplar Street, Austin, TX 78710",vehicleInfo:"2024 Porsche Cayenne - Silver",loyaltyPoints:2850,tier:"platinum",totalAppointments:18,lifetimeValue:4200,lastVisit:"2025-11-20"},{id:11,name:"Maria Garcia",email:"mgarcia@webservice.com",phone:"+15551012346",address:"413 Magnolia Way, Austin, TX 78711",vehicleInfo:"2022 Nissan Rogue - White",loyaltyPoints:520,tier:"silver",totalAppointments:5,lifetimeValue:750,lastVisit:"2025-11-08"},{id:12,name:"Daniel Thompson",email:"d.thompson@mail.net",phone:"+15551123457",address:"768 Sycamore Road, Austin, TX 78712",vehicleInfo:"2023 Volvo XC90 - Blue",loyaltyPoints:1680,tier:"platinum",totalAppointments:13,lifetimeValue:2650,lastVisit:"2025-11-16"},{id:13,name:"Rachel Kim",email:"rkim@business.co",phone:"+15551234568",address:"951 Hickory Lane, Austin, TX 78713",vehicleInfo:"2021 Mazda CX-5 - Gray",loyaltyPoints:280,tier:"bronze",totalAppointments:3,lifetimeValue:420,lastVisit:"2025-10-22"},{id:14,name:"Kevin Patel",email:"kpatel@company.com",phone:"+15551345679",address:"357 Dogwood Court, Austin, TX 78714",vehicleInfo:"2024 Acura MDX - Black",loyaltyPoints:1120,tier:"gold",totalAppointments:10,lifetimeValue:1850,lastVisit:"2025-11-13"},{id:15,name:"Nicole Turner",email:"nturner@email.com",phone:"+15551456780",address:"842 Juniper Drive, Austin, TX 78715",vehicleInfo:"2022 Subaru Outback - Green",loyaltyPoints:720,tier:"gold",totalAppointments:7,lifetimeValue:1080,lastVisit:"2025-11-11"},{id:16,name:"Brandon Scott",email:"bscott@mail.org",phone:"+15551567891",address:"526 Redwood Ave, Austin, TX 78716",vehicleInfo:"2023 Chevrolet Tahoe - White",loyaltyPoints:1890,tier:"platinum",totalAppointments:14,lifetimeValue:2980,lastVisit:"2025-11-19"}],bO=[{id:1,customerId:1,customerName:"Sarah Johnson",platform:"sms",lastMessage:"Perfect! See you tomorrow at 2pm",lastMessageAt:"2025-11-20T14:30:00Z",unreadCount:0,messages:[{id:1,from:"customer",text:"Hi! I'd like to book a full detail for tomorrow",timestamp:"2025-11-20T14:15:00Z"},{id:2,from:"business",text:"Hi Sarah! I have 2pm or 4pm available tomorrow. Which works better for you?",timestamp:"2025-11-20T14:18:00Z"},{id:3,from:"customer",text:"2pm would be perfect!",timestamp:"2025-11-20T14:25:00Z"},{id:4,from:"business",text:"Perfect! See you tomorrow at 2pm",timestamp:"2025-11-20T14:28:00Z"}]},{id:2,customerId:2,customerName:"Michael Chen",platform:"web",lastMessage:"Thank you! The ceramic coating looks amazing",lastMessageAt:"2025-11-19T16:45:00Z",unreadCount:0,messages:[{id:1,from:"customer",text:"How long does the ceramic coating last?",timestamp:"2025-11-19T15:30:00Z"},{id:2,from:"business",text:"Our ceramic coating lasts 2-3 years with proper care. It provides excellent protection against UV rays, chemicals, and minor scratches.",timestamp:"2025-11-19T15:35:00Z"},{id:3,from:"customer",text:"That sounds great! I'll book it for next week",timestamp:"2025-11-19T16:40:00Z"},{id:4,from:"customer",text:"Thank you! The ceramic coating looks amazing",timestamp:"2025-11-19T16:45:00Z"}]},{id:3,customerId:3,customerName:"Emily Rodriguez",platform:"facebook",lastMessage:"Can I add interior shampoo to my appointment?",lastMessageAt:"2025-11-20T10:20:00Z",unreadCount:1,messages:[{id:1,from:"customer",text:"Hi! I have an appointment tomorrow",timestamp:"2025-11-20T10:15:00Z"},{id:2,from:"customer",text:"Can I add interior shampoo to my appointment?",timestamp:"2025-11-20T10:20:00Z"}]},{id:4,customerId:4,customerName:"David Martinez",platform:"sms",lastMessage:"On my way! ETA 5 minutes",lastMessageAt:"2025-11-20T13:55:00Z",unreadCount:0,messages:[{id:1,from:"business",text:"Hi David! Your appointment is scheduled for 2pm today. See you soon!",timestamp:"2025-11-20T09:00:00Z"},{id:2,from:"customer",text:"Thanks! I'll be there",timestamp:"2025-11-20T09:15:00Z"},{id:3,from:"business",text:"On my way! ETA 5 minutes",timestamp:"2025-11-20T13:55:00Z"}]},{id:5,customerId:5,customerName:"Jessica Taylor",platform:"instagram",lastMessage:"What are your prices for SUV interior detail?",lastMessageAt:"2025-11-20T11:30:00Z",unreadCount:1,messages:[{id:1,from:"customer",text:"I saw your work on Instagram - looks great!",timestamp:"2025-11-20T11:20:00Z"},{id:2,from:"customer",text:"What are your prices for SUV interior detail?",timestamp:"2025-11-20T11:30:00Z"}]},{id:6,customerId:6,customerName:"Robert Williams",platform:"sms",lastMessage:"Yes, I can bring it by at 10am",lastMessageAt:"2025-11-19T19:20:00Z",unreadCount:0,messages:[{id:1,from:"business",text:"Hi Robert! We have your paint correction scheduled for Friday. Can you drop off the car at 10am?",timestamp:"2025-11-19T18:00:00Z"},{id:2,from:"customer",text:"Yes, I can bring it by at 10am",timestamp:"2025-11-19T19:20:00Z"}]},{id:7,customerId:7,customerName:"Amanda Brown",platform:"web",lastMessage:"The truck looks brand new! Thank you so much",lastMessageAt:"2025-11-18T17:30:00Z",unreadCount:0,messages:[{id:1,from:"customer",text:"Just picked up my truck - WOW!",timestamp:"2025-11-18T17:25:00Z"},{id:2,from:"customer",text:"The truck looks brand new! Thank you so much",timestamp:"2025-11-18T17:30:00Z"},{id:3,from:"business",text:"We're so glad you love it! Thank you for choosing us!",timestamp:"2025-11-18T17:35:00Z"}]},{id:8,customerId:8,customerName:"Christopher Lee",platform:"sms",lastMessage:"That works perfectly!",lastMessageAt:"2025-11-20T08:45:00Z",unreadCount:0,messages:[{id:1,from:"business",text:"Hi Christopher! Monthly service reminder - would you like to schedule your detail?",timestamp:"2025-11-20T08:30:00Z"},{id:2,from:"customer",text:"Yes! Next Tuesday would be great",timestamp:"2025-11-20T08:40:00Z"},{id:3,from:"business",text:"Tuesday at 2pm is available. Does that work?",timestamp:"2025-11-20T08:42:00Z"},{id:4,from:"customer",text:"That works perfectly!",timestamp:"2025-11-20T08:45:00Z"}]},{id:9,customerId:9,customerName:"Lisa Anderson",platform:"facebook",lastMessage:"Do you offer mobile service?",lastMessageAt:"2025-11-20T12:15:00Z",unreadCount:1,messages:[{id:1,from:"customer",text:"Hi! I'm interested in your services",timestamp:"2025-11-20T12:10:00Z"},{id:2,from:"customer",text:"Do you offer mobile service?",timestamp:"2025-11-20T12:15:00Z"}]},{id:10,customerId:10,customerName:"James Wilson",platform:"sms",lastMessage:"Absolutely! Same time next month?",lastMessageAt:"2025-11-20T15:30:00Z",unreadCount:0,messages:[{id:1,from:"business",text:"Hi James! Your Cayenne is ready for pickup. The detail came out fantastic!",timestamp:"2025-11-20T15:00:00Z"},{id:2,from:"customer",text:"Excellent! I'll be there in 30 minutes",timestamp:"2025-11-20T15:15:00Z"},{id:3,from:"business",text:"Would you like to schedule your next monthly detail?",timestamp:"2025-11-20T15:25:00Z"},{id:4,from:"customer",text:"Absolutely! Same time next month?",timestamp:"2025-11-20T15:30:00Z"}]},{id:11,customerId:11,customerName:"Maria Garcia",platform:"web",lastMessage:"Can I get a quote for full exterior and interior?",lastMessageAt:"2025-11-19T14:20:00Z",unreadCount:1,messages:[{id:1,from:"customer",text:"Hello! I'm new to the area",timestamp:"2025-11-19T14:15:00Z"},{id:2,from:"customer",text:"Can I get a quote for full exterior and interior?",timestamp:"2025-11-19T14:20:00Z"}]},{id:12,customerId:12,customerName:"Daniel Thompson",platform:"instagram",lastMessage:"Love your before/after posts!",lastMessageAt:"2025-11-18T20:10:00Z",unreadCount:0,messages:[{id:1,from:"customer",text:"Love your before/after posts!",timestamp:"2025-11-18T20:10:00Z"},{id:2,from:"business",text:"Thank you! We'd love to detail your Volvo!",timestamp:"2025-11-18T20:25:00Z"}]},{id:13,customerId:13,customerName:"Rachel Kim",platform:"sms",lastMessage:"Yes please! What time?",lastMessageAt:"2025-11-20T09:35:00Z",unreadCount:0,messages:[{id:1,from:"business",text:"Hi Rachel! We have an opening tomorrow if you'd like to schedule a detail",timestamp:"2025-11-20T09:30:00Z"},{id:2,from:"customer",text:"Yes please! What time?",timestamp:"2025-11-20T09:35:00Z"}]},{id:14,customerId:14,customerName:"Kevin Patel",platform:"web",lastMessage:"Perfect, I'll drop it off at 8am Friday",lastMessageAt:"2025-11-19T16:50:00Z",unreadCount:0,messages:[{id:1,from:"customer",text:"I need headlight restoration for my MDX",timestamp:"2025-11-19T16:30:00Z"},{id:2,from:"business",text:"We can do that! Takes about 2 hours. Friday morning works?",timestamp:"2025-11-19T16:40:00Z"},{id:3,from:"customer",text:"Perfect, I'll drop it off at 8am Friday",timestamp:"2025-11-19T16:50:00Z"}]},{id:15,customerId:15,customerName:"Nicole Turner",platform:"facebook",lastMessage:"Can you remove dog hair from seats?",lastMessageAt:"2025-11-20T11:45:00Z",unreadCount:1,messages:[{id:1,from:"customer",text:"I have a Subaru that needs interior cleaning",timestamp:"2025-11-20T11:40:00Z"},{id:2,from:"customer",text:"Can you remove dog hair from seats?",timestamp:"2025-11-20T11:45:00Z"}]},{id:16,customerId:16,customerName:"Brandon Scott",platform:"sms",lastMessage:"See you then!",lastMessageAt:"2025-11-20T07:50:00Z",unreadCount:0,messages:[{id:1,from:"business",text:"Hi Brandon! Reminder: Your Tahoe detail is scheduled for today at 1pm",timestamp:"2025-11-20T07:00:00Z"},{id:2,from:"customer",text:"Thanks for the reminder!",timestamp:"2025-11-20T07:45:00Z"},{id:3,from:"customer",text:"See you then!",timestamp:"2025-11-20T07:50:00Z"}]},{id:17,customerId:1,customerName:"Sarah Johnson",platform:"web",lastMessage:"How much is the ceramic coating?",lastMessageAt:"2025-11-15T13:20:00Z",unreadCount:0,messages:[{id:1,from:"customer",text:"I'm interested in ceramic coating for my Tesla",timestamp:"2025-11-15T13:15:00Z"},{id:2,from:"customer",text:"How much is the ceramic coating?",timestamp:"2025-11-15T13:20:00Z"},{id:3,from:"business",text:"For a Tesla Model 3, ceramic coating is $899. Includes full exterior detail and 2-year protection.",timestamp:"2025-11-15T13:30:00Z"}]},{id:18,customerId:4,customerName:"David Martinez",platform:"sms",lastMessage:"You're the best!",lastMessageAt:"2025-11-17T18:00:00Z",unreadCount:0,messages:[{id:1,from:"business",text:"Hi David! Just finished your Mercedes. Want to add a complimentary tire shine?",timestamp:"2025-11-17T17:45:00Z"},{id:2,from:"customer",text:"Yes please! Thank you!",timestamp:"2025-11-17T17:55:00Z"},{id:3,from:"customer",text:"You're the best!",timestamp:"2025-11-17T18:00:00Z"}]},{id:19,customerId:8,customerName:"Christopher Lee",platform:"instagram",lastMessage:"Sent you a DM!",lastMessageAt:"2025-11-16T21:30:00Z",unreadCount:0,messages:[{id:1,from:"customer",text:"Saw your story about the new wax treatment",timestamp:"2025-11-16T21:25:00Z"},{id:2,from:"customer",text:"Sent you a DM!",timestamp:"2025-11-16T21:30:00Z"}]},{id:20,customerId:10,customerName:"James Wilson",platform:"web",lastMessage:"Already booked for next month!",lastMessageAt:"2025-11-14T10:15:00Z",unreadCount:0,messages:[{id:1,from:"business",text:"Hi James! Your monthly detail reminder",timestamp:"2025-11-14T10:00:00Z"},{id:2,from:"customer",text:"Already booked for next month!",timestamp:"2025-11-14T10:15:00Z"}]}],wO=[{id:1,customerId:1,customerName:"Sarah Johnson",service:"Full Detail",date:"2025-11-21",time:"14:00",status:"confirmed",price:180,vehicle:"2022 Tesla Model 3",notes:"First-time customer referral from Michael Chen"},{id:2,customerId:4,customerName:"David Martinez",service:"Premium Detail + Ceramic Coating",date:"2025-11-21",time:"09:00",status:"in_progress",price:899,vehicle:"2024 Mercedes GLE",notes:"VIP client - platinum tier"},{id:3,customerId:16,customerName:"Brandon Scott",service:"SUV Full Detail",date:"2025-11-21",time:"13:00",status:"confirmed",price:225,vehicle:"2023 Chevrolet Tahoe",notes:"Monthly recurring service"},{id:4,customerId:10,customerName:"James Wilson",service:"Executive Detail Package",date:"2025-11-20",time:"10:00",status:"completed",price:350,vehicle:"2024 Porsche Cayenne",notes:"Completed - customer very satisfied"},{id:5,customerId:7,customerName:"Amanda Brown",service:"Truck Detail + Engine Bay",date:"2025-11-18",time:"11:00",status:"completed",price:245,vehicle:"2022 Ford F-150",notes:"Completed - excellent results"},{id:6,customerId:2,customerName:"Michael Chen",service:"Paint Correction",date:"2025-11-17",time:"08:00",status:"completed",price:650,vehicle:"2023 BMW X5",notes:"Multi-stage correction - ceramic coating scheduled next week"},{id:7,customerId:8,customerName:"Christopher Lee",service:"Interior Shampoo + Exterior Wash",date:"2025-11-22",time:"15:00",status:"confirmed",price:165,vehicle:"2023 Lexus RX",notes:"Regular monthly client"},{id:8,customerId:14,customerName:"Kevin Patel",service:"Headlight Restoration",date:"2025-11-22",time:"08:00",status:"confirmed",price:120,vehicle:"2024 Acura MDX",notes:"Drop-off service"},{id:9,customerId:6,customerName:"Robert Williams",service:"Paint Correction + Ceramic Coating",date:"2025-11-22",time:"10:00",status:"confirmed",price:1199,vehicle:"2023 Audi Q7",notes:"Premium package - estimated 6-8 hours"},{id:10,customerId:12,customerName:"Daniel Thompson",service:"Full Detail",date:"2025-11-16",time:"14:00",status:"completed",price:195,vehicle:"2023 Volvo XC90",notes:"Completed - customer left 5-star review"},{id:11,customerId:3,customerName:"Emily Rodriguez",service:"Express Detail",date:"2025-11-12",time:"16:00",status:"completed",price:95,vehicle:"2021 Honda CR-V",notes:"Quick turnaround service"},{id:12,customerId:11,customerName:"Maria Garcia",service:"Interior Detail",date:"2025-11-23",time:"11:00",status:"pending",price:135,vehicle:"2022 Nissan Rogue",notes:"Awaiting customer confirmation"}],C9e={revenue:{today:1425,week:8950,month:32400,year:185e3},appointments:{today:3,week:24,month:98,year:1152},conversionRate:{overall:78.5,sms:82.3,web:76.1,facebook:71.8,instagram:69.4},responseTime:{average:"2.4 minutes",sms:"1.8 minutes",web:"3.1 minutes",social:"4.2 minutes"},customerSatisfaction:{rating:4.9,totalReviews:487,fiveStarReviews:456,repeatCustomerRate:68.2}},k9e=[{id:1,name:"Express Detail",category:"Basic",price:95,duration:"1-2 hours",description:"Quick exterior wash and interior vacuum"},{id:2,name:"Full Detail",category:"Standard",price:180,duration:"3-4 hours",description:"Complete interior and exterior detail"},{id:3,name:"Premium Detail",category:"Premium",price:275,duration:"4-6 hours",description:"Full detail plus wax and interior conditioning"},{id:4,name:"Paint Correction",category:"Specialty",price:650,duration:"6-8 hours",description:"Multi-stage paint correction and polish"},{id:5,name:"Ceramic Coating",category:"Protection",price:899,duration:"8-10 hours",description:"Professional ceramic coating with 2-year warranty"},{id:6,name:"SUV Full Detail",category:"Standard",price:225,duration:"4-5 hours",description:"Complete detail for SUVs and large vehicles"}],M9e=[{id:1,customerId:1,points:180,type:"earned",reason:"Full Detail - $180.00",date:"2025-11-15"},{id:2,customerId:2,points:899,type:"earned",reason:"Ceramic Coating - $899.00",date:"2025-11-18"},{id:3,customerId:4,points:-500,type:"redeemed",reason:"50% off coupon",date:"2025-11-19"},{id:4,customerId:10,points:350,type:"earned",reason:"Executive Package - $350.00",date:"2025-11-20"},{id:5,customerId:1,points:100,type:"bonus",reason:"Referral bonus - Sarah referred Emily",date:"2025-11-12"}],_9e=[{id:1,referrerId:2,referredId:1,referredName:"Sarah Johnson",status:"completed",reward:50,date:"2025-11-10"},{id:2,referrerId:4,referredId:11,referredName:"Maria Garcia",status:"completed",reward:50,date:"2025-11-05"},{id:3,referrerId:10,referredId:16,referredName:"Brandon Scott",status:"pending",reward:0,date:"2025-11-18"}],P9e=[{id:1,from:"+15550123456",fromName:"Sarah Johnson",duration:32,timestamp:"2025-11-20T09:15:00Z",transcription:"Hi, this is Sarah. I'd like to schedule a detail for my Tesla tomorrow if possible. Please call me back. Thanks!",audioUrl:"/demo/voicemail-1.mp3"},{id:2,from:"+15550234568",fromName:"Unknown",duration:18,timestamp:"2025-11-19T14:30:00Z",transcription:"Hey, I saw your truck on the road. Looks great! What are your rates for a full-size truck? Call me back.",audioUrl:"/demo/voicemail-2.mp3"}],T9e=[{id:1,customerId:1,customerName:"Sarah Johnson",direction:"incoming",duration:185,timestamp:"2025-11-20T14:10:00Z",status:"completed"},{id:2,customerId:4,customerName:"David Martinez",direction:"outgoing",duration:92,timestamp:"2025-11-20T13:50:00Z",status:"completed"},{id:3,customerId:null,customerName:"Unknown",direction:"incoming",duration:0,timestamp:"2025-11-20T11:25:00Z",status:"missed"},{id:4,customerId:10,customerName:"James Wilson",direction:"incoming",duration:245,timestamp:"2025-11-20T10:15:00Z",status:"completed"},{id:5,customerId:2,customerName:"Michael Chen",direction:"outgoing",duration:156,timestamp:"2025-11-19T16:30:00Z",status:"completed"}],A9e=[{id:1,technicianId:1,technicianName:"Alex Thompson",date:"2025-11-21",shifts:[{id:1,appointmentId:2,time:"09:00-14:00",customer:"David Martinez",service:"Premium Detail"},{id:2,appointmentId:1,time:"14:00-18:00",customer:"Sarah Johnson",service:"Full Detail"}]},{id:2,technicianId:2,technicianName:"Jordan Rivera",date:"2025-11-21",shifts:[{id:3,appointmentId:3,time:"13:00-18:00",customer:"Brandon Scott",service:"SUV Full Detail"}]}],E9e=[{id:1,customerId:10,amount:350,method:"card",status:"completed",date:"2025-11-20",invoice:"INV-001234"},{id:2,customerId:7,amount:245,method:"cash",status:"completed",date:"2025-11-18",invoice:"INV-001233"},{id:3,customerId:2,amount:650,method:"card",status:"completed",date:"2025-11-17",invoice:"INV-001232"},{id:4,customerId:12,amount:195,method:"card",status:"completed",date:"2025-11-16",invoice:"INV-001231"},{id:5,customerId:1,amount:180,method:"pending",status:"pending",date:"2025-11-21",invoice:"INV-001235"}],I9e={todayAppointments:3,weekRevenue:8950,monthRevenue:32400,pendingMessages:5,activeCustomers:156,averageRating:4.9,completionRate:98.5};function Pa(e,t){switch(e){case"customers":return vO;case"customer":return vO.find(r=>r.id===(t==null?void 0:t.id));case"conversations":return bO;case"conversation":return bO.find(r=>r.id===(t==null?void 0:t.id));case"appointments":return wO;case"appointment":return wO.find(r=>r.id===(t==null?void 0:t.id));case"analytics":return C9e;case"services":return k9e;case"loyalty":return M9e;case"referrals":return _9e;case"voicemails":return P9e;case"callLogs":return T9e;case"technicianSchedules":return A9e;case"payments":return E9e;case"dashboard":return I9e;default:return null}}const L9e=p.createContext(void 0);function D9e({children:e}){const{toast:t}=Ee(),[r,s]=p.useState(!1),[a,i]=p.useState(!1),o=new wY({defaultOptions:{queries:{staleTime:1e3*60*5,retry:!1,queryFn:async({queryKey:c})=>{if(!r){const u=c[0],f=await fetch(u,{credentials:"include"});if(!f.ok)throw new Error(`HTTP ${f.status}: ${f.statusText}`);return f.json()}const d=c[0];if(console.log("[DEMO MODE] Intercepting GET request:",d),d.includes("/api/customers")){if(d.match(/\/api\/customers\/\d+$/)){const u=parseInt(d.split("/").pop()||"1");return{success:!0,customer:Pa("customer",{id:u})}}return{success:!0,customers:Pa("customers")}}if(d.includes("/api/conversations")||d.includes("/api/messages")){if(d.match(/\/api\/conversations\/\d+$/)){const u=parseInt(d.split("/").pop()||"1");return{success:!0,conversation:Pa("conversation",{id:u})}}return{success:!0,conversations:Pa("conversations")}}if(d.includes("/api/appointments")){if(d.match(/\/api\/appointments\/\d+$/)){const u=parseInt(d.split("/").pop()||"1");return{success:!0,appointment:Pa("appointment",{id:u})}}return{success:!0,appointments:Pa("appointments")}}return d.includes("/api/analytics")?{success:!0,analytics:Pa("analytics")}:d.includes("/api/services")?{success:!0,services:Pa("services")}:d.includes("/api/loyalty")?{success:!0,transactions:Pa("loyalty")}:d.includes("/api/referrals")?{success:!0,referrals:Pa("referrals")}:d.includes("/api/voicemails")?{success:!0,voicemails:Pa("voicemails")}:d.includes("/api/calls")?{success:!0,calls:Pa("callLogs")}:d.includes("/api/technician/schedule")?{success:!0,schedules:Pa("technicianSchedules")}:d.includes("/api/payments")?{success:!0,payments:Pa("payments")}:d.includes("/api/dashboard")?{success:!0,...Pa("dashboard")}:d.includes("/api/users/me")?{success:!0,user:{id:999,username:"demo_user",role:"manager",fullName:"Demo User",email:"demo@acmedetailing.com"}}:{success:!0,demoMode:!0,data:[]}}},mutations:{retry:!1,mutationFn:async({url:c,method:d,body:u})=>{if(!r){const f=await fetch(c,{method:d,headers:{"Content-Type":"application/json"},body:u?JSON.stringify(u):void 0,credentials:"include"});if(!f.ok){const h=await f.json();throw new Error(h.message||`HTTP ${f.status}`)}return f.json()}return console.log(`[DEMO MODE] Intercepting ${d} request:`,c),t({title:"Demo Mode",description:"This action was simulated. No real data was changed.",duration:3e3}),{success:!0,demoMode:!0,message:"Operation simulated successfully",data:{id:Math.floor(Math.random()*1e4),created:!0}}}}}}),l=async()=>{try{const c=await fetch("/api/users/me",{credentials:"include"});if(c.ok){const d=await c.json();s(!1)}else{const d=window.location.pathname.startsWith("/demo");s(d)}}catch(c){console.error("[DEMO MODE] Error checking demo status:",c),s(!1)}};return p.useEffect(()=>{l();const c=setInterval(()=>{r&&fetch("/api/users/me",{credentials:"include"}).then(d=>{d.ok||(i(!0),t({title:"Demo Session Expired",description:"Your demo session has expired. Please start a new demo.",variant:"destructive",duration:1e4}))})},6e4);return()=>clearInterval(c)},[r]),n.jsx(L9e.Provider,{value:{isDemoMode:r,demoSessionExpired:a,checkDemoStatus:l},children:n.jsx(SY,{client:o,children:e})})}function $9e(){return n.jsxs(D9e,{children:[n.jsx("div",{className:"fixed top-0 left-0 right-0 z-50 bg-gradient-to-r from-amber-500 to-orange-500 text-white py-2 px-4 text-center text-sm font-medium shadow-lg",children:" DEMO MODE - Exploring Acme Detailing (Mock Data) - Changes will not be saved"}),n.jsx("div",{className:"pt-12",children:n.jsx(Dne,{})})]})}function Tae(){return n.jsx("div",{className:"w-full flex justify-center items-center py-6",children:n.jsx(q.div,{className:"relative w-full max-w-3xl",initial:{opacity:0},animate:{opacity:1},transition:{duration:.8},children:n.jsx("div",{className:"flex flex-col items-center",children:n.jsxs(q.div,{className:"relative",initial:{scale:.9},animate:{scale:1},transition:{duration:.5,ease:"easeOut"},children:[n.jsx("div",{className:"relative",children:n.jsxs(q.div,{className:"w-72 h-72 md:w-96 md:h-96 relative",children:[n.jsx(q.div,{className:"absolute inset-0 rounded-full bg-blue-600/10 filter blur-xl",animate:{scale:[1,1.1,1],opacity:[.5,.7,.5]},transition:{duration:6,repeat:1/0,repeatType:"reverse"}}),n.jsxs("svg",{className:"absolute inset-0 w-full h-full",viewBox:"0 0 400 400",children:[n.jsx(q.circle,{cx:"200",cy:"200",r:"180",fill:"none",stroke:"rgba(59, 130, 246, 0.1)",strokeWidth:"1",animate:{opacity:[0,.3,0]},transition:{duration:4,repeat:1/0,repeatType:"reverse"}}),n.jsxs(q.g,{animate:{rotate:360},transition:{duration:20,repeat:1/0,ease:"linear"},children:[n.jsx(q.circle,{cx:"200",cy:"20",r:"10",fill:"rgba(255, 255, 255, 0.7)",stroke:"rgba(59, 130, 246, 0.3)",strokeWidth:"2",animate:{scale:[1,1.2,1],opacity:[.7,1,.7]},transition:{duration:3,repeat:1/0,repeatType:"reverse"}}),n.jsx(q.circle,{cx:"350",cy:"200",r:"12",fill:"rgba(255, 255, 255, 0.7)",stroke:"rgba(59, 130, 246, 0.3)",strokeWidth:"2",animate:{scale:[1,1.2,1],opacity:[.7,1,.7]},transition:{duration:4,repeat:1/0,repeatType:"reverse",delay:.5}}),n.jsx(q.circle,{cx:"200",cy:"380",r:"8",fill:"rgba(255, 255, 255, 0.7)",stroke:"rgba(59, 130, 246, 0.3)",strokeWidth:"2",animate:{scale:[1,1.3,1],opacity:[.7,1,.7]},transition:{duration:3.5,repeat:1/0,repeatType:"reverse",delay:1}}),n.jsx(q.circle,{cx:"50",cy:"200",r:"11",fill:"rgba(255, 255, 255, 0.7)",stroke:"rgba(59, 130, 246, 0.3)",strokeWidth:"2",animate:{scale:[1,1.2,1],opacity:[.7,1,.7]},transition:{duration:5,repeat:1/0,repeatType:"reverse",delay:1.5}})]})]}),n.jsx(q.div,{className:"absolute inset-0 w-full h-full",initial:{opacity:0},animate:{opacity:1},transition:{duration:1,delay:.3},children:n.jsx("svg",{className:"w-full h-full p-8",viewBox:"0 0 500 500",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:n.jsxs("g",{className:"filter drop-shadow(0px 0px 8px rgba(255, 255, 255, 0.3))",children:[n.jsx(q.path,{d:"M100 140C111.046 140 120 131.046 120 120C120 108.954 111.046 100 100 100C88.9543 100 80 108.954 80 120C80 131.046 88.9543 140 100 140Z",stroke:"white",strokeWidth:"6",fill:"none",animate:{scale:[1,1.05,1],y:[0,-2,0]},transition:{duration:3,repeat:1/0,repeatType:"reverse"}}),n.jsx(q.path,{d:"M400 140C411.046 140 420 131.046 420 120C420 108.954 411.046 100 400 100C388.954 100 380 108.954 380 120C380 131.046 388.954 140 400 140Z",stroke:"white",strokeWidth:"6",fill:"none",animate:{scale:[1,1.05,1],y:[0,-2,0]},transition:{duration:3,repeat:1/0,repeatType:"reverse",delay:.2}}),n.jsx(q.path,{d:"M170 180C192.091 180 210 162.091 210 140C210 117.909 192.091 100 170 100C147.909 100 130 117.909 130 140C130 162.091 147.909 180 170 180Z",stroke:"white",strokeWidth:"6",fill:"none",animate:{scale:[1,1.03,1],y:[0,-3,0]},transition:{duration:4,repeat:1/0,repeatType:"reverse",delay:.3}}),n.jsx(q.path,{d:"M250 190C277.614 190 300 167.614 300 140C300 112.386 277.614 90 250 90C222.386 90 200 112.386 200 140C200 167.614 222.386 190 250 190Z",stroke:"white",strokeWidth:"6",fill:"none",animate:{scale:[1,1.04,1],y:[0,-1,0]},transition:{duration:5,repeat:1/0,repeatType:"reverse",delay:.5}}),n.jsx(q.path,{d:"M330 180C352.091 180 370 162.091 370 140C370 117.909 352.091 100 330 100C307.909 100 290 117.909 290 140C290 162.091 307.909 180 330 180Z",stroke:"white",strokeWidth:"6",fill:"none",animate:{scale:[1,1.03,1],y:[0,-2,0]},transition:{duration:4.5,repeat:1/0,repeatType:"reverse",delay:.7}}),n.jsx(q.path,{d:"M80 300V240L120 200H240L280 240H440L460 260V300H420C420 327.614 397.614 350 370 350C342.386 350 320 327.614 320 300H160C160 327.614 137.614 350 110 350C82.386 350 60 327.614 60 300H80Z",stroke:"white",strokeWidth:"6",fill:"rgba(0, 0, 0, 0.5)",animate:{y:[0,-2,0]},transition:{duration:4,repeat:1/0,repeatType:"reverse"}}),n.jsx(q.circle,{cx:"110",cy:"300",r:"40",stroke:"white",strokeWidth:"6",fill:"none",animate:{rotate:[0,360]},transition:{duration:10,repeat:1/0,ease:"linear"}}),n.jsx(q.circle,{cx:"370",cy:"300",r:"40",stroke:"white",strokeWidth:"6",fill:"none",animate:{rotate:[0,360]},transition:{duration:10,repeat:1/0,ease:"linear"}})]})})})]})}),n.jsxs(q.div,{className:"mt-4 mb-1 text-center",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.5},children:[n.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-white tracking-wider",children:n.jsx(q.span,{className:"inline-block text-transparent bg-clip-text bg-gradient-to-r from-blue-400 via-blue-100 to-blue-300",initial:{letterSpacing:"0.05em"},animate:{letterSpacing:["0.05em","0.06em","0.05em"],textShadow:["0px 0px 1px rgba(255,255,255,0.2)","0px 0px 3px rgba(255,255,255,0.3)","0px 0px 1px rgba(255,255,255,0.2)"]},transition:{duration:4,repeat:1/0,repeatType:"reverse"},children:"CLEAN MACHINE"})}),n.jsxs("div",{className:"relative",children:[n.jsx(q.div,{className:"absolute inset-0 bg-gradient-to-r from-blue-900/0 via-blue-600/10 to-blue-900/0 rounded-full blur-md",animate:{opacity:[.2,.4,.2],scale:[.95,1,.95]},transition:{duration:5,repeat:1/0,repeatType:"reverse"}}),n.jsx(q.p,{className:"text-blue-200 text-xs font-medium relative z-10 px-4 py-1 tracking-wide",animate:{opacity:[.8,.9,.8]},transition:{duration:4,repeat:1/0,repeatType:"reverse",delay:1},children:"AUTO DETAIL"})]})]})]})})})})}const O9e=({name:e,priceRange:t,detailedDescription:r})=>{const[s,a]=p.useState(!1);if(console.log(`ExpandableServiceDetails for ${e}:`,{hasDetailedDescription:!!r,detailedDescriptionLength:(r==null?void 0:r.length)||0,detailedDescription:r}),!r||r.trim()==="")return console.log(`No detailed description for ${e}, hiding dropdown`),null;const i=o=>o.split(`
`).filter(c=>c.trim()).map((c,d)=>{const u=c.trim();return u.startsWith("")||u.startsWith("-")?n.jsxs("li",{className:"flex items-start ml-4",children:[n.jsx("span",{className:"text-blue-400 mr-2 mt-1",children:""}),n.jsx("span",{className:"flex-1",children:u.replace(/^[-]\s*/,"")})]},d):n.jsx("p",{className:"mb-2 font-medium text-gray-100",children:u},d)});return n.jsxs("div",{className:"w-full mt-3 border-t border-gray-800 pt-3",children:[n.jsxs(_,{variant:"ghost",size:"sm",onClick:()=>a(!s),className:"w-full flex items-center justify-between p-0 h-auto text-blue-400 hover:text-blue-300 bg-transparent hover:bg-transparent focus:bg-transparent",children:[n.jsx("span",{className:"font-medium text-sm",children:"View Service Details"}),s?n.jsx(T0,{className:"h-4 w-4"}):n.jsx(Ui,{className:"h-4 w-4"})]}),n.jsx($s,{children:s&&n.jsx(q.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},className:"overflow-hidden text-left bg-gradient-to-br from-gray-900 to-gray-950 p-5 mt-2 rounded-lg border border-gray-800",children:n.jsx("div",{className:"space-y-2 text-sm text-gray-200 leading-relaxed",children:i(r)})})})]})},R9e=()=>{const[e,t]=p.useState([]),[r,s]=p.useState([]),[a,i]=p.useState(!0),[o,l]=p.useState(null),[c,d]=p.useState("main");p.useEffect(()=>{(async()=>{try{i(!0);const m=await(await fetch("/api/services")).json();if(!m.success)throw new Error("Failed to load services");const x=await(await fetch("/api/addon-services")).json();if(!x.success)throw new Error("Failed to load add-on services");t(m.services),s(x.addOns)}catch(h){console.error("Error fetching services:",h),l("Unable to load services. Please try again later.")}finally{i(!1)}})()},[]);const u=c==="main"?e:r;return a?n.jsx("div",{className:"w-full py-12",children:n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[1,2,3].map(f=>n.jsxs(O,{className:"opacity-50 animate-pulse",children:[n.jsxs(ee,{children:[n.jsx("div",{className:"h-7 bg-gray-700 rounded w-3/4 mb-2"}),n.jsx("div",{className:"h-5 bg-gray-700 rounded w-1/3"})]}),n.jsxs(H,{children:[n.jsx("div",{className:"h-4 bg-gray-700 rounded w-full mb-2"}),n.jsx("div",{className:"h-4 bg-gray-700 rounded w-full mb-2"}),n.jsx("div",{className:"h-4 bg-gray-700 rounded w-4/5"})]})]},f))})}):o?n.jsxs("div",{className:"w-full py-12 text-center",children:[n.jsx("p",{className:"text-red-400",children:o}),n.jsx(_,{variant:"outline",className:"mt-4",onClick:()=>window.location.reload(),children:"Retry"})]}):n.jsxs("div",{className:"w-full px-2",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row justify-center gap-4 mb-8",children:[n.jsx(_,{variant:c==="main"?"default":"outline",onClick:()=>d("main"),className:`min-w-[150px] font-medium shadow-md transition-all duration-300 ${c==="main"?"bg-blue-600 text-white hover:bg-blue-700 hover:shadow-blue-500/20 shadow-blue-600/10":"bg-gray-800/80 text-white border-gray-700 hover:border-blue-400 hover:text-blue-400"}`,children:"Main Packages"}),n.jsx(_,{variant:c==="addon"?"default":"outline",onClick:()=>d("addon"),className:`min-w-[150px] font-medium shadow-md transition-all duration-300 ${c==="addon"?"bg-blue-600 text-white hover:bg-blue-700 hover:shadow-blue-500/20 shadow-blue-600/10":"bg-gray-800/80 text-white border-gray-700 hover:border-blue-400 hover:text-blue-400"}`,children:"Add-on Services"})]}),n.jsx("div",{className:"relative",children:n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:u.map((f,h)=>n.jsx(q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:h*.1},whileHover:{y:-5},className:"flex h-full",children:n.jsxs(O,{className:"bg-gray-900 border-gray-700 hover:border-blue-500 transition-all duration-300 flex flex-col w-full shadow-lg shadow-black/20 hover:shadow-blue-900/20 overflow-hidden",children:[f.imageUrl&&n.jsx("div",{className:"w-full h-48 overflow-hidden",children:n.jsx("img",{src:f.imageUrl,alt:f.name,className:"w-full h-full object-cover transition-transform duration-300 hover:scale-105"})}),n.jsxs(ee,{className:"pb-2",children:[n.jsx(ge,{variant:"outline",className:"border-blue-500/50 text-blue-300 mb-2",children:c==="main"?"Package":"Add-on"}),n.jsx(te,{className:"text-xl text-white transition-colors",children:f.name}),n.jsx("p",{className:"text-blue-300 font-semibold",children:f.priceRange})]}),n.jsxs(H,{className:"text-gray-300 flex-grow",children:[n.jsx("p",{className:"text-sm mb-2",children:f.overview}),c==="main"&&f.duration&&n.jsxs("div",{className:"flex items-center mt-3 text-sm text-gray-400 border-t border-gray-800 pt-3",children:[n.jsx("svg",{className:"w-4 h-4 mr-2 text-blue-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Duration: ",f.duration]}),n.jsx("div",{children:n.jsx(O9e,{name:f.name,priceRange:f.priceRange,detailedDescription:f.detailedDescription})})]}),n.jsx(sl,{children:n.jsx(_,{asChild:!0,className:"w-full bg-blue-600/80 hover:bg-blue-600 text-white border-none shadow-md hover:shadow-lg transform hover:translate-y-[-2px] transition-all duration-300 group",children:n.jsxs(St,{href:`/chat?service=${encodeURIComponent(f.name)}&action=schedule`,className:"flex items-center justify-center",children:[n.jsx("span",{children:"Book This Service"}),n.jsx("span",{className:"ml-2 transform translate-x-0 group-hover:translate-x-1 transition-transform duration-300",children:""})]})})})]})},`${c}-${h}`))})})]})},Bu=({placeId:e})=>{const[t,r]=p.useState([]),[s,a]=p.useState(!0),[i,o]=p.useState(null),[l,c]=p.useState(0),d=3;p.useEffect(()=>{(async()=>{try{a(!0);const y=e?`/api/google-reviews?placeId=${e}`:"/api/google-reviews",v=await fetch(y);if(v.ok){const w=await v.json();if(w.success&&w.reviews&&w.reviews.length>0){r(w.reviews),a(!1);return}}const{mockReviews:b}=await cy(async()=>{const{mockReviews:w}=await import("./reviews-_kikNdL3.js");return{mockReviews:w}},[]);r(b)}catch(y){console.error("Error fetching Google reviews:",y);const{mockReviews:v}=await cy(async()=>{const{mockReviews:b}=await import("./reviews-_kikNdL3.js");return{mockReviews:b}},[]);r(v)}finally{a(!1)}})()},[e]);const u=x=>{const y=[],v=Math.floor(x),b=x%1>=.5;for(let w=0;w<v;w++)y.push(n.jsx(Qr,{className:"w-4 h-4 text-yellow-400 fill-yellow-400"},`star-${w}`));return b&&y.push(n.jsx(fge,{className:"w-4 h-4 text-yellow-400 fill-yellow-400"},"half-star")),y},f=Math.ceil(t.length/d),h=t.slice(l*d,(l+1)*d),m=()=>{c(x=>(x+1)%f)},g=()=>{c(x=>(x-1+f)%f)};return s?n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[1,2,3].map(x=>n.jsxs(O,{className:"bg-black/30 animate-pulse",children:[n.jsx(ee,{children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-700"}),n.jsx("div",{className:"flex-1",children:n.jsx("div",{className:"h-4 bg-gray-700 rounded w-24"})})]})}),n.jsxs(H,{children:[n.jsx("div",{className:"h-4 bg-gray-700 rounded w-full mb-2"}),n.jsx("div",{className:"h-4 bg-gray-700 rounded w-full mb-2"}),n.jsx("div",{className:"h-4 bg-gray-700 rounded w-5/6"})]})]},x))}):i?n.jsxs("div",{className:"text-center py-8 bg-blue-900/20 rounded-lg p-6 border border-blue-800/50",children:[n.jsx("div",{className:"inline-block bg-blue-800/30 p-3 rounded-full mb-4",children:n.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-blue-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),n.jsx("h3",{className:"text-xl font-medium text-blue-200 mb-2",children:"Taking a Quick Break"}),n.jsx("p",{className:"text-blue-300 mb-4",children:"Our review system is freshening up. Don't worry, we'll be back shortly!"}),n.jsx("div",{className:"text-blue-300 mb-4",children:"In the meantime, check out what our customers are saying about us directly:"}),n.jsxs("button",{onClick:()=>window.open("https://g.co/kgs/mZHbtbZ","_blank"),className:"px-4 py-2 bg-blue-600/40 hover:bg-blue-600/60 text-blue-100 rounded-md transition-all duration-300 hover:shadow-lg hover:shadow-blue-900/30 transform hover:scale-105",children:["View Our Google Business Profile",n.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 inline-block ml-2",viewBox:"0 0 20 20",fill:"currentColor",children:n.jsx("path",{fillRule:"evenodd",d:"M10.293 5.293a1 1 0 011.414 0l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414-1.414L12.586 11H5a1 1 0 110-2h7.586l-2.293-2.293a1 1 0 010-1.414z",clipRule:"evenodd"})})]})]}):t.length===0?n.jsxs("div",{className:"text-center py-8 bg-blue-900/20 rounded-lg p-6 border border-blue-800/50",children:[n.jsx("div",{className:"inline-block bg-blue-800/30 p-3 rounded-full mb-4",children:n.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-blue-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 19a2 2 0 01-2-2V7a2 2 0 012-2h4l2 2h4a2 2 0 012 2v1M5 19h14a2 2 0 002-2v-5a2 2 0 00-2-2H9a2 2 0 00-2 2v5a2 2 0 01-2 2z"})})}),n.jsx("h3",{className:"text-xl font-medium text-blue-200 mb-2",children:"Reviews Coming Soon"}),n.jsx("p",{className:"text-blue-300 mb-4",children:"We're gathering our customer feedback to showcase here."}),n.jsx("div",{className:"text-blue-300 mb-4",children:"Check back soon or visit our Google Business Profile directly:"}),n.jsxs("button",{onClick:()=>window.open("https://g.co/kgs/mZHbtbZ","_blank"),className:"px-4 py-2 bg-blue-600/40 hover:bg-blue-600/60 text-blue-100 rounded-md transition-all duration-300 hover:shadow-lg hover:shadow-blue-900/30 transform hover:scale-105",children:["See All Reviews",n.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 inline-block ml-2",viewBox:"0 0 20 20",fill:"currentColor",children:n.jsx("path",{fillRule:"evenodd",d:"M10.293 5.293a1 1 0 011.414 0l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414-1.414L12.586 11H5a1 1 0 110-2h7.586l-2.293-2.293a1 1 0 010-1.414z",clipRule:"evenodd"})})]})]}):n.jsxs("div",{children:[n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:h.map((x,y)=>n.jsxs(O,{className:"bg-black/30 border-gray-700 hover:border-blue-700 transition-all duration-300 hover:shadow-md hover:shadow-blue-900/20 transform hover:translate-y-[-5px]",children:[n.jsx(ee,{className:"pb-3",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[x.profile_photo_url?n.jsx("img",{src:x.profile_photo_url,alt:x.author_name,className:"w-10 h-10 rounded-full"}):n.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-800 flex items-center justify-center",children:n.jsx(Fn,{className:"w-6 h-6 text-gray-400"})}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-white",children:x.author_name}),n.jsx("div",{className:"flex",children:u(x.rating)})]})]})}),n.jsxs(H,{children:[n.jsx("p",{className:"text-gray-300 line-clamp-4",children:x.text}),n.jsx("p",{className:"text-xs text-gray-500 mt-2",children:new Date(x.time*1e3).toLocaleDateString()})]})]},y))}),f>1&&n.jsxs("div",{className:"flex justify-center mt-6 space-x-4",children:[n.jsx(_,{className:"bg-blue-600/50 hover:bg-blue-600/70 text-white border-blue-700 hover:border-blue-500 transition-all duration-300 transform hover:scale-105",size:"sm",onClick:g,disabled:t.length<=d,children:"Previous"}),n.jsx(_,{className:"bg-blue-600/50 hover:bg-blue-600/70 text-white border-blue-700 hover:border-blue-500 transition-all duration-300 transform hover:scale-105",size:"sm",onClick:m,disabled:t.length<=d,children:"Next"})]})]})};function F9e(){const e=()=>{window.open("https://squareup.com/gift/EDQKXPXWCXQWM/order","_blank")};return n.jsx(q.div,{className:"flex justify-center mt-5 mb-8 w-full max-w-xl mx-auto",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4},children:n.jsxs("div",{className:"grid grid-cols-2 gap-3 w-full max-w-sm mx-auto",children:[n.jsx(_,{variant:"ghost",asChild:!0,className:"py-2 px-3 bg-blue-600/10 hover:bg-blue-600/30 text-white border-none rounded-md shadow-sm transition-all duration-300 transform hover:scale-105 hover:shadow-md hover:shadow-blue-800/20","data-testid":"button-gallery",children:n.jsxs(St,{href:"/gallery",children:[n.jsx($i,{className:"h-4 w-4 mr-1 group-hover:animate-pulse"}),"Gallery"]})}),n.jsxs(_,{variant:"ghost",onClick:e,className:"py-2 px-3 bg-blue-600/10 hover:bg-blue-600/30 text-white border-none rounded-md shadow-sm transition-all duration-300 transform hover:scale-105 hover:shadow-md hover:shadow-blue-800/20","data-testid":"button-gift-cards",children:[n.jsx(jr,{className:"h-4 w-4 mr-1 group-hover:animate-pulse"}),"Gift Cards"]}),n.jsx(_,{variant:"ghost",asChild:!0,className:"py-2 px-3 bg-blue-600/10 hover:bg-blue-600/30 text-white border-none rounded-md shadow-sm transition-all duration-300 transform hover:scale-105 hover:shadow-md hover:shadow-blue-800/20","data-testid":"button-reviews",children:n.jsxs(St,{href:"/reviews",children:[n.jsx(Qr,{className:"h-4 w-4 mr-1 group-hover:animate-pulse"}),"Reviews"]})}),n.jsx(_,{variant:"ghost",asChild:!0,className:"py-2 px-3 bg-blue-600/10 hover:bg-blue-600/30 text-white border-none rounded-md shadow-sm transition-all duration-300 transform hover:scale-105 hover:shadow-md hover:shadow-blue-800/20","data-testid":"button-rewards",children:n.jsxs(St,{href:"/rewards",children:[n.jsx(Yr,{className:"h-4 w-4 mr-1 group-hover:animate-pulse"}),"My Loyalty Points"]})})]})})}function z9e(e){return n.jsxs("svg",{...e,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[n.jsx("path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.4 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2"}),n.jsx("circle",{cx:"7",cy:"17",r:"2"}),n.jsx("path",{d:"M9 17h6"}),n.jsx("circle",{cx:"17",cy:"17",r:"2"})]})}function B9e(e){return n.jsxs("svg",{...e,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[n.jsx("path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"}),n.jsx("circle",{cx:"12",cy:"7",r:"4"})]})}function U9e(e){return n.jsxs("svg",{...e,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[n.jsx("path",{d:"m22 2-7 20-4-9-9-4Z"}),n.jsx("path",{d:"M22 2 11 13"})]})}function V9e(e){return n.jsx("svg",{...e,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:n.jsx("path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.47"})})}const LC="/assets/Clean_Machine_hexagonal_shield_logo_46864b38-BvjErzgs.png",H9e={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.3}},exit:{opacity:0,transition:{duration:.2}}},W9e={initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10}},q9e={initial:{y:0},animate:e=>({y:[0,-5,0],transition:{duration:.6,repeat:1/0,delay:e*.1}})};function G9e(){zt();const[e,t]=p.useState(()=>{localStorage.removeItem("chatMessages");const le=localStorage.getItem("chatMessages");if(le)try{return JSON.parse(le,(et,_e)=>et==="timestamp"&&_e?new Date(_e):_e)}catch($e){console.error("Failed to parse saved messages:",$e)}return[{id:"welcome",text:"Hey, I'm the Clean Machine Assistant! Want to check our services, book an appointment, or ask a question? I can handle it all right here.",sender:"bot",timestamp:new Date}]}),[r,s]=p.useState(""),[a,i]=p.useState(!1),[o,l]=p.useState(""),[c,d]=p.useState(!1),[u,f]=p.useState(!1),[h,m]=p.useState(""),[g,x]=p.useState(!1),[y,v]=p.useState(!1),[b,w]=p.useState(!1),[N,j]=p.useState(!1);p.useEffect(()=>{const le=new URL(window.location.href),$e=le.searchParams.get("service"),et=le.searchParams.get("action");$e&&et==="schedule"&&(m($e),setTimeout(()=>{const _e={id:Math.random().toString(36).substring(2,9),text:`I'd like to book a ${$e} service.`,sender:"user",timestamp:new Date};t(ot=>[...ot,_e]),i(!0),setTimeout(()=>{i(!1);const ot={id:Math.random().toString(36).substring(2,9),text:`Great choice! I'd be happy to help you schedule a ${$e}. Let's get your appointment set up right away.`,sender:"bot",timestamp:new Date};t(rt=>[...rt,ot]),v(!0),setTimeout(()=>{f(!0)},1e3)},1500)},300))},[]);const[S,C]=p.useState(!1),[k,M]=p.useState(()=>localStorage.getItem("customerName")||""),[A,P]=p.useState(()=>localStorage.getItem("customerPhone")||""),[T,I]=p.useState(()=>localStorage.getItem("customerEmail")||""),[L,R]=p.useState(""),[G,$]=p.useState(null),[D,W]=p.useState("file"),E=p.useRef(null),{toast:F}=Ee(),B=p.useRef(null),Z=p.useRef(null),ne=p.useRef(null);p.useRef(null),p.useEffect(()=>{try{localStorage.setItem("chatMessages",JSON.stringify(e))}catch(le){console.error("Failed to save messages to localStorage:",le)}},[e]),p.useEffect(()=>{k&&localStorage.setItem("customerName",k),A&&localStorage.setItem("customerPhone",A),T&&localStorage.setItem("customerEmail",T)},[k,A,T]),p.useEffect(()=>{var le;(y||a)&&((le=E.current)==null||le.scrollIntoView({behavior:"smooth"}),v(!1))},[e,a,y]),p.useEffect(()=>{var le;(le=B.current)==null||le.focus()},[]),p.useEffect(()=>{g&&F({title:"Demo Mode Enabled",description:"The chat is now in demo mode. No actual service requests will be made."})},[g,F]);const Y=()=>{j(!0)},me=le=>{le.target.files&&le.target.files.length>0&&$(le.target.files[0])},pe=async()=>{const le=[];if(D==="url"&&!o.trim()&&le.push("Please enter a valid media URL"),D==="file"&&!G&&le.push("Please select a file to upload"),k.trim()||le.push("Please enter your name"),!A.trim()&&!T.trim()&&le.push("Please provide either a phone number or email address"),L.trim()||le.push("Please enter your vehicle information"),le.length>0){F({title:"Missing Required Information",description:le[0],variant:"destructive"});return}C(!0);const $e={id:Math.random().toString(36).substring(2,9),text:`Uploading ${D==="url"?"media from URL":(G==null?void 0:G.name)||"file"}...`,sender:"user",timestamp:new Date,isUploading:!0};t(et=>[...et,$e]),v(!0);try{let et;if(D==="file"&&G){const rt=new FormData;rt.append("photo",G),rt.append("customerName",k),rt.append("customerPhone",A),rt.append("customerEmail",T),rt.append("vehicleInfo",L),console.log("Uploading file with data:",{name:k,phone:A?"provided":"not provided",email:T?"provided":"not provided",vehicle:L,file:G.name,fileSize:G.size}),et=await fetch("/api/upload-photo",{method:"POST",body:rt})}else{const rt={photoUrl:o,customerName:k,phoneNumber:A,customerEmail:T,vehicleInfo:L};console.log("Uploading URL with data:",rt),et=await fetch("/api/process-photo",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(rt)})}if(!et.ok)throw new Error(`Server responded with ${et.status}`);const _e=await et.json();console.log("Upload response:",_e),t(rt=>rt.map(z=>z.id===$e.id?{...z,text:D==="file"?`I've uploaded an image of my vehicle${L?` (${L})`:""}.`:`I've shared an image URL of my vehicle${L?` (${L})`:""}.`,isUploading:!1,mediaUrl:_e.fileLink||_e.url,mediaType:(G==null?void 0:G.type)||"image/jpeg"}:z)),v(!0),d(!1),l(""),$(null),R(""),I(""),Me("I've just sent you a photo of my vehicle.")}catch(et){console.error("Error uploading media:",et);const _e=et;t(ot=>ot.map(rt=>rt.id===$e.id?{...rt,text:`Failed to upload ${D==="url"?"media URL":"file"}: ${_e.message||"Unknown error"}`,isUploading:!1}:rt)),v(!0),F({title:"Upload Failed",description:`Couldn't upload your ${D==="url"?"media URL":"file"}. Please try again.`,variant:"destructive"})}finally{C(!1)}},Me=async le=>{const et=["book","schedule","appointment","reserve","booking"].some(rt=>le.toLowerCase().includes(rt));if(["full detail","interior detail","maintenance detail","ceramic coating","polish","enhancement","premium wash","motorcycle detail","shampoo"].some(rt=>le.toLowerCase().includes(rt)),et){const rt={id:Math.random().toString(36).substring(2,9),text:le,sender:"user",timestamp:new Date};t(Se=>[...Se,rt]),v(!0);const z={id:Math.random().toString(36).substring(2,9),text:"We'd be delighted to get you scheduled for a service! Our team at Clean Machine takes pride in providing exceptional detailing services that will leave your vehicle looking its best. Let me help you find a convenient time that works for your schedule.",sender:"bot",timestamp:new Date};t(Se=>[...Se,z]),v(!0),i(!0),setTimeout(()=>{i(!1);const Se={id:Math.random().toString(36).substring(2,9),text:`Please select from our available services and time slots when you're ready. Our business hours are 9am to 5pm, with appointments starting between 9am and 3pm to ensure we have enough time to complete your service.

[Click here to open our scheduling tool]`,sender:"bot",timestamp:new Date,actionButton:{text:"Open Scheduling Tool",action:()=>f(!0)}};t(J=>[...J,Se]),v(!0)},3e3);return}const ot={id:Math.random().toString(36).substring(2,9),text:le,sender:"user",timestamp:new Date};t(rt=>[...rt,ot]),v(!0),i(!0);try{const rt=await fetch("/api/web-chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({Body:le})});if(!rt.ok)throw new Error(`Server responded with ${rt.status}`);const z=await rt.json();if(!z.success)throw new Error(z.error||"Failed to get response");const Se=z.message,J={id:Math.random().toString(36).substring(2,9),text:Se,sender:"bot",timestamp:new Date};t(oe=>[...oe,J]),v(!0)}catch(rt){console.error("Error sending message:",rt);const z={id:Math.random().toString(36).substring(2,9),text:"Sorry, I couldn't process your message at this time. Please try again later.",sender:"bot",timestamp:new Date};t(Se=>[...Se,z]),v(!0),F({title:"Error",description:"Failed to send message. Please try again.",variant:"destructive"})}finally{i(!1)}},re=async le=>{if(le.preventDefault(),!r.trim())return;const $e=r.trim();s(""),Me($e)},de=le=>{f(!1);const $e={id:Math.random().toString(36).substring(2,9),text:"I'd like to book an appointment",sender:"user",timestamp:new Date},et={id:Math.random().toString(36).substring(2,9),text:`Your appointment for ${le.service} has been confirmed for ${le.formattedTime}. We look forward to seeing you!`,sender:"bot",timestamp:new Date},_e={id:Math.random().toString(36).substring(2,9),text:he(le.service),sender:"bot",timestamp:new Date(Date.now()+1e3),actionButton:{text:"Add to my appointment",action:()=>{F({title:"Feature Coming Soon",description:"The ability to add services to an existing appointment will be available soon."})}}};t(ot=>[...ot,$e,et,_e]),v(!0)},he=le=>{const $e=ce(),et={"Full Detail":"Would you like to add our Leather Protector treatment? It helps maintain the condition of your interior after a Full Detail and extends the life of your leather surfaces.","Interior Detail":"Consider adding our Excessive Pet Hair Removal service if you have pets with heavy shedding, or our Odor Elimination treatment to keep your interior fresh longer.","Exterior Detail":"Our Rain Repellent treatment would be a perfect addition to your Exterior Detail. It improves visibility during rain and helps water bead off your windshield.","Express Wash":"Would you like to upgrade to our Premium Wash? It includes additional wax protection that helps your vehicle stay cleaner longer.","Ceramic Coating":"Our Headlight Restoration service would complement your Ceramic Coating perfectly, giving your vehicle a completely refreshed look.","Maintenance Detail Program":"Adding our Wheel Protection service would be a great addition to your Maintenance program, keeping your wheels looking fresh between details."},_e={SUV:{"Full Detail":"For your SUV, we recommend adding our third-row deep cleaning ($25 extra). SUVs with extra rows need special attention to ensure complete detailing.","Interior Detail":"For SUVs, we recommend adding our Carpet Shampoo with Extra Coverage ($40) - perfect for the larger floor space in your vehicle."},Truck:{"Full Detail":"For your truck, we recommend adding our Bed Liner Treatment ($30) to restore and protect your truck bed alongside your Full Detail.","Exterior Detail":"For trucks, our Undercarriage Treatment ($45) provides excellent protection against off-road elements and road salt."},Luxury:{"Full Detail":"For your luxury vehicle, we recommend our Premium Leather Conditioning package ($55) which uses special products designed specifically for high-end leather.","Ceramic Coating":"For luxury vehicles, we suggest our Advanced Paint Correction ($150) before applying the ceramic coating for absolutely flawless results."}},ot={"Full Detail":" PACKAGE DEAL: Add both Leather Protector AND Odor Elimination for just $65 (save $10)!","Interior Detail":" PACKAGE DEAL: Add both Excessive Pet Hair Removal AND Odor Elimination for just $55 (save $10)!","Exterior Detail":" PACKAGE DEAL: Add both Rain Repellent AND Headlight Restoration for just $70 (save $15)!","Ceramic Coating":" PACKAGE DEAL: Add both Headlight Restoration AND Wheel Protection for just $95 (save $20)!"};let rt="";return $e&&_e[$e]&&_e[$e][le]?rt=_e[$e][le]:rt=et[le]||"Would you like to enhance your service with add-ons like Leather Protector ($35), Excessive Pet Hair Removal ($25), or Odor Elimination ($40)?",ot[le]&&(rt+=`

`+ot[le]),rt},ce=()=>{for(const le of e){const $e=le.text.toLowerCase();if($e.includes("suv")||$e.includes("crossover")||$e.includes("explorer")||$e.includes("tahoe")||$e.includes("suburban")||$e.includes("highlander"))return"SUV";if($e.includes("truck")||$e.includes("pickup")||$e.includes("silverado")||$e.includes("f-150")||$e.includes("ram")||$e.includes("tundra"))return"Truck";if($e.includes("bmw")||$e.includes("mercedes")||$e.includes("audi")||$e.includes("lexus")||$e.includes("tesla")||$e.includes("porsche")||$e.includes("jaguar")||$e.includes("luxury"))return"Luxury"}return null},Be=()=>n.jsx($s,{children:a&&n.jsx(q.div,{className:"flex items-center mb-3",initial:"initial",animate:"animate",exit:"exit",variants:W9e,children:n.jsxs("div",{className:"max-w-[85%] bg-white text-gray-800 rounded-2xl rounded-tl-md px-3 py-2 flex items-center gap-2 shadow-sm border border-gray-200",children:[n.jsx("img",{src:LC,alt:"Clean Machine",className:"h-3 w-3 rounded-full"}),n.jsx("span",{className:"text-[10px] opacity-60 font-medium",children:"Clean Machine is typing"}),n.jsx("div",{className:"flex gap-1",children:[0,1,2].map(le=>n.jsx(q.div,{className:"w-1 h-1 bg-blue-500 rounded-full",variants:q9e,custom:le},le))})]})})});return N?n.jsxs("div",{className:"fixed bottom-6 right-6 z-50",children:[n.jsx(q.div,{className:"absolute inset-0 rounded-full bg-blue-400 dark:bg-blue-300",animate:{scale:[1,1.3,1],opacity:[.4,0,.4]},transition:{duration:2.5,repeat:1/0,ease:"easeInOut"}}),n.jsxs(q.button,{initial:{scale:0,opacity:0,rotate:-180},animate:{scale:1,opacity:1,rotate:0},exit:{scale:0,opacity:0,rotate:180},transition:{type:"spring",stiffness:300,damping:25,rotate:{duration:.6}},whileHover:{scale:1.15,rotate:5,boxShadow:"0 0 25px rgba(59, 130, 246, 0.6)"},whileTap:{scale:.95,boxShadow:"0 0 35px rgba(59, 130, 246, 0.8)"},onClick:()=>j(!1),className:"relative h-14 w-14 rounded-full bg-gradient-to-br from-blue-500 to-blue-600 dark:from-blue-400 dark:to-blue-500 shadow-xl hover:shadow-2xl transition-shadow duration-300 flex items-center justify-center text-white overflow-hidden group","data-testid":"button-open-chat","aria-label":"Open chat",children:[n.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-transparent via-white/20 to-transparent translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-700"}),n.jsx("img",{src:LC,alt:"Clean Machine",className:"h-8 w-8 rounded-full relative z-10 border-2 border-white/30"})]})]}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"w-full max-w-[280px] mx-auto h-[300px] flex flex-col shadow-[0_20px_60px_-15px_rgba(0,0,0,0.3)] rounded-2xl border-2 border-blue-300/40 bg-gradient-to-br from-white via-blue-50/40 to-purple-50/30 overflow-hidden",style:{backgroundColor:g?"#f0f7ff":void 0},children:[n.jsxs("div",{className:"bg-gradient-to-r from-blue-600 via-blue-500 to-blue-600 text-white p-3 relative overflow-hidden flex-shrink-0",children:[n.jsx("div",{className:"absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZGVmcz48cGF0dGVybiBpZD0iZ3JpZCIgd2lkdGg9IjQwIiBoZWlnaHQ9IjQwIiBwYXR0ZXJuVW5pdHM9InVzZXJTcGFjZU9uVXNlIj48cGF0aCBkPSJNIDQwIDAgTCAwIDAgMCA0MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSJyZ2JhKDI1NSwyNTUsMjU1LDAuMSkiIHN0cm9rZS13aWR0aD0iMSIvPjwvcGF0dGVybj48L2RlZnM+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsbD0idXJsKCNncmlkKSIvPjwvc3ZnPg==')] opacity-20"}),n.jsxs("div",{className:"flex items-center justify-between relative z-10",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("img",{src:LC,alt:"Clean Machine",className:"h-7 w-7 rounded-full border-2 border-white/30 shadow-md"}),n.jsx("h1",{className:"text-base font-semibold tracking-tight",children:"Clean Machine"})]}),n.jsx("div",{className:"flex items-center gap-1",children:n.jsx(Bj,{children:n.jsxs(Uj,{children:[n.jsx(Vj,{asChild:!0,children:n.jsxs(_,{variant:"ghost",size:"icon",onClick:Y,className:"h-7 w-7 text-white/80 hover:bg-white/20 hover:text-white rounded-lg transition-all",children:[n.jsx("span",{className:"text-lg leading-none font-bold",children:""}),n.jsx("span",{className:"sr-only",children:"Minimize"})]})}),n.jsx(Ty,{children:n.jsx("p",{children:"Minimize chat"})})]})})})]})]}),n.jsx(At,{open:u,onOpenChange:f,children:n.jsxs(_t,{className:"w-[95vw] max-w-2xl h-[90vh] p-0 flex flex-col","aria-describedby":"appointment-scheduler-description",children:[n.jsx(Et,{className:"sr-only",children:"Appointment Scheduler"}),n.jsx("p",{id:"appointment-scheduler-description",className:"sr-only",children:"Schedule your appointment with Clean Machine Auto Detail"}),n.jsx(b4,{onClose:()=>f(!1),onSuccess:de})]})}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-3 bg-gradient-to-b from-gray-50/50 to-white",children:[n.jsx($s,{initial:!1,children:e.map(le=>n.jsx(q.div,{className:Le("mb-3 flex",le.sender==="user"?"justify-end":"justify-start"),variants:H9e,initial:"hidden",animate:"visible",exit:"exit",layout:!0,children:n.jsxs("div",{className:Le("max-w-[85%] rounded-2xl px-3 py-2 shadow-sm text-sm",le.sender==="user"?"bg-blue-600 text-white rounded-tr-md":"bg-white text-gray-800 rounded-tl-md border border-gray-200"),children:[n.jsxs("div",{className:"flex items-center gap-1.5 mb-1",children:[le.sender==="user"?n.jsx(B9e,{className:"h-3 w-3 text-blue-200"}):n.jsx(z9e,{className:"h-3 w-3 text-blue-600"}),n.jsxs("span",{className:"text-[10px] opacity-60 font-medium",children:[le.sender==="user"?"You":"Clean Machine","  ",le.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]}),n.jsx("div",{className:"whitespace-pre-wrap leading-relaxed",children:le.isUploading?n.jsxs("div",{className:"space-y-2",children:[n.jsx(Lt,{className:"h-3 w-full"}),n.jsx(Lt,{className:"h-3 w-3/4"})]}):n.jsxs(n.Fragment,{children:[n.jsx("p",{children:le.text}),le.mediaUrl&&n.jsx("div",{className:"mt-2",children:n.jsx("a",{href:le.mediaUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300 underline text-xs",children:"View uploaded image"})}),le.actionButton&&n.jsx(_,{variant:"secondary",size:"sm",className:"mt-2 h-7 text-xs",onClick:le.actionButton.action,children:le.actionButton.text})]})})]})},le.id))}),Be(),n.jsx("div",{ref:E})]}),n.jsx("div",{className:"p-3 border-t border-gray-200 flex-shrink-0 bg-white",children:n.jsxs("form",{onSubmit:re,className:"flex gap-2",children:[n.jsx(se,{ref:B,type:"text",placeholder:"Type a message...",value:r,onChange:le=>s(le.target.value),className:"flex-grow border-gray-300 focus-visible:ring-blue-500 text-sm h-9 rounded-full px-4 placeholder:text-gray-500 bg-white text-black shadow-sm"}),n.jsx(Bj,{children:n.jsxs(Uj,{children:[n.jsx(Vj,{asChild:!0,children:n.jsxs(_,{type:"button",size:"icon",variant:"ghost",onClick:()=>d(!0),className:"h-9 w-9 rounded-full hover:bg-gray-100",disabled:a,children:[n.jsx(V9e,{className:"h-4 w-4 text-gray-600"}),n.jsx("span",{className:"sr-only",children:"Upload Photo"})]})}),n.jsx(Ty,{children:n.jsx("p",{children:"Upload photo"})})]})}),n.jsxs(_,{type:"submit",size:"icon",disabled:a||!r.trim(),className:"h-9 w-9 rounded-full bg-blue-600 hover:bg-blue-700 disabled:opacity-50",children:[n.jsx(U9e,{className:"h-4 w-4"}),n.jsx("span",{className:"sr-only",children:"Send"})]})]})})]}),n.jsx(At,{open:c,onOpenChange:d,children:n.jsxs(_t,{className:"sm:max-w-[425px]",children:[n.jsx($t,{children:n.jsx(Et,{children:"Share a photo of your vehicle"})}),n.jsxs("div",{className:"space-y-4 py-2",children:[n.jsxs("div",{className:"flex flex-col space-y-2",children:[n.jsxs("label",{htmlFor:"name",className:"text-sm font-medium",children:["Your Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(se,{id:"name",placeholder:"John Doe",value:k,onChange:le=>M(le.target.value),className:"border-blue-200 focus-visible:ring-blue-400"})]}),n.jsxs("div",{className:"flex flex-col space-y-2",children:[n.jsx("label",{htmlFor:"phone",className:"text-sm font-medium",children:"Phone Number"}),n.jsx(se,{id:"phone",placeholder:"(918) 555-1234",value:A,onChange:le=>P(le.target.value),className:"border-blue-200 focus-visible:ring-blue-400"}),n.jsx("p",{className:"text-xs text-gray-500",children:"Phone number or email is required"})]}),n.jsxs("div",{className:"flex flex-col space-y-2",children:[n.jsx("label",{htmlFor:"email",className:"text-sm font-medium",children:"Email Address"}),n.jsx(se,{id:"email",type:"email",placeholder:"john.doe@example.com",value:T,onChange:le=>I(le.target.value),className:"border-blue-200 focus-visible:ring-blue-400"})]}),n.jsxs("div",{className:"flex flex-col space-y-2",children:[n.jsxs("label",{htmlFor:"vehicle",className:"text-sm font-medium",children:["Vehicle Information ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(se,{id:"vehicle",placeholder:"2020 Toyota Camry, Blue",value:L,onChange:le=>R(le.target.value)}),n.jsx("p",{className:"text-xs text-gray-500",children:"Include year, make, model, and color"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("label",{className:"text-sm font-medium",children:"Upload Method:"}),n.jsxs("div",{className:"flex space-x-4",children:[n.jsxs("label",{className:"flex items-center space-x-2",children:[n.jsx("input",{type:"radio",checked:D==="file",onChange:()=>W("file"),className:"text-blue-600"}),n.jsx("span",{children:"Upload File"})]}),n.jsxs("label",{className:"flex items-center space-x-2",children:[n.jsx("input",{type:"radio",checked:D==="url",onChange:()=>W("url"),className:"text-blue-600"}),n.jsx("span",{children:"URL"})]})]})]}),D==="file"?n.jsxs("div",{className:"mt-4",children:[n.jsxs("label",{className:"block text-sm font-medium",children:["Select Photo ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("div",{className:"mt-1 flex items-center",children:n.jsxs("label",{className:"cursor-pointer bg-white border border-gray-300 rounded-md py-2 px-3 text-sm leading-4 hover:bg-gray-50",children:[n.jsx("span",{children:G?G.name.substring(0,20)+"...":"Choose a file..."}),n.jsx("input",{ref:ne,type:"file",accept:"image/*",onChange:me,className:"sr-only"})]})})]}):n.jsxs("div",{className:"mt-4",children:[n.jsxs("label",{htmlFor:"media-url",className:"block text-sm font-medium",children:["Media URL ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(se,{id:"media-url",ref:Z,type:"url",placeholder:"https://example.com/your-image.jpg",value:o,onChange:le=>l(le.target.value),className:"mt-1"})]})]})]}),n.jsxs("div",{className:"flex justify-between mt-4",children:[n.jsx(LCe,{asChild:!0,children:n.jsx(_,{variant:"outline",className:"transition-all duration-300 hover:bg-red-50 hover:text-red-600 hover:border-red-200 hover:shadow-sm hover:scale-105",children:"Cancel"})}),n.jsx(_,{onClick:pe,disabled:S,className:"transition-all duration-300 hover:bg-blue-700 hover:shadow-md hover:shadow-blue-600/30 hover:scale-105",children:S?"Uploading...":"Upload"})]})]})})]})}const Y9e={hidden:{opacity:1},visible:{opacity:1,transition:{staggerChildren:.12,delayChildren:.1}}},Q9e={hidden:{opacity:0,scale:.85},visible:{opacity:1,scale:1,transition:{duration:.6,ease:[.16,1,.3,1]}}},Ab={hidden:{opacity:0,y:24},visible:{opacity:1,y:0,transition:{duration:.7,ease:[.16,1,.3,1]}}},jO={hidden:{opacity:0,scale:.92},visible:{opacity:1,scale:1,transition:{type:"spring",stiffness:260,damping:22,mass:.8}}},K9e={hidden:{opacity:0},visible:{opacity:1,transition:{duration:1.2,ease:"easeOut"}}};function Aae({content:e}={}){const t=e,r=rwe(),s=a=>r?{hidden:{opacity:0},visible:{opacity:1,transition:{duration:.3}}}:a;return p.useEffect(()=>{if(t){document.title=t.metaTitle;let a=document.querySelector('meta[name="description"]');a||(a=document.createElement("meta"),a.setAttribute("name","description"),document.head.appendChild(a)),a.setAttribute("content",t.metaDescription)}},[t]),n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 via-blue-50/10 to-white dark:from-gray-900 dark:via-blue-950/10 dark:to-black text-gray-900 dark:text-white overflow-hidden relative",children:[n.jsx(q.div,{className:"absolute inset-0 z-0",initial:"hidden",animate:"visible",variants:s(K9e),style:{willChange:"opacity"},children:n.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-100/20 via-blue-100/30 to-indigo-50/20 dark:from-purple-900/20 dark:via-blue-900/30 dark:to-indigo-950/20 animate-gradient-slow"})}),n.jsxs(q.div,{className:"absolute inset-0 z-0 overflow-hidden",initial:{opacity:0},animate:{opacity:1},transition:{duration:1.5,delay:.3},children:[n.jsx(q.div,{className:"absolute top-[20%] left-[10%] w-96 h-96 bg-blue-500/10 dark:bg-blue-500/5 rounded-full filter blur-3xl",animate:{scale:[1,1.1,1],opacity:[.5,.7,.5]},transition:{duration:8,repeat:1/0,ease:"easeInOut"},style:{willChange:"transform, opacity"}}),n.jsx(q.div,{className:"absolute bottom-[10%] right-[20%] w-64 h-64 bg-blue-600/10 dark:bg-blue-600/5 rounded-full filter blur-3xl",animate:{scale:[1,1.15,1],opacity:[.4,.6,.4]},transition:{duration:10,repeat:1/0,ease:"easeInOut",delay:1},style:{willChange:"transform, opacity"}})]}),n.jsx(q.header,{className:"relative z-20",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2,ease:[.16,1,.3,1]},children:n.jsx("nav",{className:"flex justify-end items-center max-w-7xl mx-auto px-4 md:px-8 py-4",children:n.jsx(_,{variant:"ghost",size:"sm",className:"text-gray-700 dark:text-blue-100 hover:bg-gray-200 dark:hover:bg-blue-500/20 hover:text-gray-900 dark:hover:text-white transition-colors",asChild:!0,children:n.jsx(St,{href:"/login","data-testid":"button-login",children:"Login"})})})}),n.jsxs("main",{className:"max-w-7xl mx-auto px-4 md:px-8 relative z-10",children:[n.jsxs(q.section,{className:"text-center",initial:"hidden",animate:"visible",variants:r?{}:Y9e,children:[n.jsx(q.div,{className:"mb-2 -mt-8",variants:s(Q9e),style:{willChange:"transform, opacity"},children:n.jsx(Tae,{})}),n.jsxs(q.div,{className:"py-6",children:[n.jsx(q.p,{variants:s(Ab),className:"text-base md:text-lg text-gray-700 dark:text-blue-100/70 mb-8 max-w-3xl mx-auto leading-relaxed font-light",style:{willChange:"transform, opacity"},children:(t==null?void 0:t.aboutText)||"Clean Machine Auto Detail offers extensive detailing services ranging from Upholstery shampoo & Headlight restoration to Paint Correction & Ceramic Coatings, right in your driveway!"}),n.jsx(q.p,{variants:s(Ab),className:"text-gray-600 dark:text-blue-200/90 mb-3 italic",style:{willChange:"transform, opacity"},children:"book anytime. chat with our floating assistant."}),n.jsxs(q.div,{variants:s(Ab),className:"flex flex-col items-center",children:[n.jsxs("div",{className:"flex flex-col items-center gap-4",children:[n.jsx(q.div,{variants:s(jO),style:{willChange:"transform, opacity"},children:n.jsx(_,{size:"lg",variant:"outline",className:"transform hover:scale-105 transition-all duration-300 shadow-lg font-semibold relative overflow-hidden group px-8 py-6 rounded-md !text-gray-900 dark:!text-white",style:{borderColor:t!=null&&t.accentColor?`hsl(${t.accentColor})`:"hsl(340, 80%, 55%)",backgroundColor:t!=null&&t.accentColor?`hsl(${t.accentColor} / 0.1)`:"hsl(220, 90%, 56% / 0.1)"},asChild:!0,children:n.jsxs(St,{href:"/schedule",className:"relative z-10 flex items-center gap-2","data-testid":"button-schedule",children:[n.jsx(Ql,{className:"h-5 w-5 mr-1"}),n.jsx("span",{children:"Visual Scheduler"}),n.jsx("span",{className:"ml-1 group-hover:ml-2 transition-all duration-300",children:""}),n.jsx("span",{className:"absolute inset-0 bg-gradient-to-r from-blue-600/0 via-blue-400/5 to-blue-600/0 w-[200%] h-full transform -translate-x-full group-hover:translate-x-0 transition-transform duration-1000"})]})})}),n.jsx(q.div,{variants:s(jO),style:{willChange:"transform, opacity"},children:n.jsx(_,{size:"default",className:"bg-green-600 hover:bg-green-700 text-white transform hover:scale-105 transition-all duration-300 shadow-lg hover:shadow-green-500/30 font-medium relative overflow-hidden group px-6 py-3 rounded-md",asChild:!0,children:n.jsxs("a",{href:"tel:+19188565304",className:"relative z-10 flex items-center gap-2","data-testid":"button-call",children:[n.jsx(bt,{className:"h-4 w-4 mr-1"}),n.jsx("span",{children:"Call Now"}),n.jsx("span",{className:"absolute inset-0 bg-gradient-to-r from-green-600/0 via-green-400/10 to-green-600/0 w-[200%] h-full transform -translate-x-full group-hover:translate-x-0 transition-transform duration-1000"})]})})})]}),n.jsx(q.div,{variants:s(Ab),style:{willChange:"transform, opacity"},children:n.jsx(F9e,{})})]})]})]}),n.jsxs(q.section,{initial:{opacity:0},whileInView:{opacity:1},transition:{duration:.8,ease:[.16,1,.3,1]},viewport:{once:!0,margin:"-100px"},className:"py-20 relative",children:[n.jsx(q.div,{className:"absolute inset-0 bg-gray-100 dark:bg-gray-900 rounded-3xl mx-4 transform -skew-y-1",initial:{opacity:0,scale:.95},whileInView:{opacity:1,scale:1},transition:{duration:.8,ease:[.16,1,.3,1]},viewport:{once:!0,margin:"-100px"}}),n.jsxs(q.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.7,delay:.2,ease:[.16,1,.3,1]},viewport:{once:!0,margin:"-100px"},className:"relative z-10 px-4 py-2",children:[n.jsx(q.h2,{className:"text-2xl md:text-3xl font-bold text-center mb-12 bg-clip-text text-transparent bg-gradient-to-r from-blue-800 via-blue-600 to-blue-800 dark:from-blue-200 dark:via-blue-400 dark:to-blue-200",initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:.3,ease:[.16,1,.3,1]},viewport:{once:!0,margin:"-100px"},children:(t==null?void 0:t.servicesHeading)||"Premium Auto Detailing Services"}),(t==null?void 0:t.servicesSubheading)&&n.jsx(q.p,{className:"text-center text-gray-600 dark:text-blue-200/70 mb-8 -mt-8",initial:{opacity:0},whileInView:{opacity:1},transition:{duration:.6,delay:.4,ease:"easeOut"},viewport:{once:!0,margin:"-100px"},children:t.servicesSubheading}),n.jsx(q.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.7,delay:.5,ease:[.16,1,.3,1]},viewport:{once:!0,margin:"-100px"},children:n.jsx(R9e,{})})]})]}),n.jsxs(q.section,{className:"py-16 relative",initial:{opacity:0},whileInView:{opacity:1},transition:{duration:.8,ease:[.16,1,.3,1]},viewport:{once:!0,margin:"-80px"},children:[n.jsx(q.div,{className:"absolute inset-x-0 top-0 h-px bg-gradient-to-r from-transparent via-gray-300 dark:via-blue-500/50 to-transparent",initial:{scaleX:0},whileInView:{scaleX:1},transition:{duration:1,ease:"easeOut"},viewport:{once:!0,margin:"-80px"}}),n.jsxs(q.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.7,delay:.2,ease:[.16,1,.3,1]},viewport:{once:!0,margin:"-80px"},className:"text-center mb-12",children:[n.jsx(q.h2,{className:"text-2xl md:text-3xl font-bold mb-4 bg-clip-text text-transparent bg-gradient-to-r from-blue-800 via-blue-600 to-blue-800 dark:from-blue-200 dark:via-blue-400 dark:to-blue-200",initial:{opacity:0,scale:.95},whileInView:{opacity:1,scale:1},transition:{duration:.6,delay:.3,ease:[.16,1,.3,1]},viewport:{once:!0,margin:"-80px"},children:"What Our Customers Say"}),n.jsx(q.p,{className:"text-gray-600 dark:text-blue-200/60 max-w-2xl mx-auto",initial:{opacity:0},whileInView:{opacity:1},transition:{duration:.6,delay:.4,ease:"easeOut"},viewport:{once:!0,margin:"-80px"},children:"The finest automobiles deserve the finest care. See what other discerning vehicle owners have to say about our premium detailing services."})]}),n.jsx(q.div,{className:"px-4",initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.7,delay:.5,ease:[.16,1,.3,1]},viewport:{once:!0,margin:"-80px"},children:n.jsx(Bu,{})})]}),n.jsx(q.section,{className:"py-10 border-t border-gray-300 dark:border-blue-900/30 mt-16",initial:{opacity:0},whileInView:{opacity:1},transition:{duration:.6,ease:"easeOut"},viewport:{once:!0,margin:"-50px"},children:n.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-6",children:[n.jsxs(q.div,{className:"flex items-center gap-3",initial:{opacity:0,x:-20},whileInView:{opacity:1,x:0},transition:{duration:.7,delay:.2,ease:[.16,1,.3,1]},viewport:{once:!0,margin:"-50px"},children:[t!=null&&t.logoUrl?n.jsx("img",{src:t.logoUrl,alt:t.metaTitle||"Clean Machine Auto Detail",className:"h-16 w-auto transition-all duration-300 transform hover:scale-110 hover:shadow-lg hover:shadow-blue-500/20 rounded cursor-pointer"}):n.jsx("img",{src:"/logo.jpg",alt:"Clean Machine Auto Detail",className:"h-16 transition-all duration-300 transform hover:scale-110 hover:shadow-lg hover:shadow-blue-500/20 rounded cursor-pointer"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-gray-900 dark:text-white font-medium",children:"Clean Machine Auto Detail"}),n.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Premium detailing services in Tulsa"}),n.jsxs("div",{className:"flex flex-col mt-2",children:[n.jsxs("a",{href:"tel:9188565304",className:"text-blue-600 dark:text-blue-300 hover:text-blue-700 dark:hover:text-blue-100 transition-all duration-300 text-sm flex items-center gap-1 hover:translate-x-1 hover:shadow-sm hover:shadow-blue-500/20",children:[n.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:n.jsx("path",{d:"M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.74 4.435a1 1 0 01-.54 1.06l-1.548.773a11.037 11.037 0 006.105 6.105l.774-1.548a1 1 0 011.059-.54l4.435.74a1 1 0 01.836.986V17a1 1 0 01-1 1h-2C7.82 18 2 12.18 2 5V3z"})}),"(918) 856-5304"]}),n.jsxs("a",{href:"mailto:cleanmachinetulsa@gmail.com",className:"text-blue-600 dark:text-blue-300 hover:text-blue-700 dark:hover:text-blue-100 transition-all duration-300 text-sm flex items-center gap-1 hover:translate-x-1 hover:shadow-sm hover:shadow-blue-500/20",children:[n.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:[n.jsx("path",{d:"M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"}),n.jsx("path",{d:"M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"})]}),"cleanmachinetulsa@gmail.com"]})]})]})]}),n.jsxs(q.div,{className:"text-center md:text-right",initial:{opacity:0,x:20},whileInView:{opacity:1,x:0},transition:{duration:.7,delay:.3,ease:[.16,1,.3,1]},viewport:{once:!0,margin:"-50px"},children:[n.jsxs("div",{className:"flex gap-4 justify-center md:justify-end mb-2",children:[n.jsx(St,{href:"/my-services",className:"text-blue-600 dark:text-blue-300 hover:text-blue-700 dark:hover:text-blue-100 text-sm transition-all duration-300 hover:translate-x-1",children:"My Services"}),n.jsx(St,{href:"/careers",className:"text-blue-600 dark:text-blue-300 hover:text-blue-700 dark:hover:text-blue-100 text-sm transition-all duration-300 hover:translate-x-1",children:"Careers"}),n.jsx(St,{href:"/showcase",className:"text-blue-600 dark:text-blue-300 hover:text-blue-700 dark:hover:text-blue-100 text-sm transition-all duration-300 hover:translate-x-1",children:"Showcase"})]}),n.jsxs("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:[" ",new Date().getFullYear()," Clean Machine Auto Detail. All rights reserved."]}),n.jsx("p",{className:"text-gray-500 dark:text-gray-500 text-xs mt-1",children:"Serving Tulsa and surrounding areas"})]})]})})]}),n.jsx("div",{className:"fixed bottom-4 right-4 z-50",children:n.jsx(G9e,{})})]})}function J9e({content:e}={}){const{data:t}=be({queryKey:["/api/homepage-content"],enabled:!e}),{data:r}=be({queryKey:["/api/services"]}),s=e||(t==null?void 0:t.content),a=(r==null?void 0:r.services)||[],{scrollYProgress:i}=s1(),o=Ra(i,[0,1],[0,200]);return p.useEffect(()=>{if(s){document.title=s.metaTitle;let l=document.querySelector('meta[name="description"]');l||(l=document.createElement("meta"),l.setAttribute("name","description"),document.head.appendChild(l)),l.setAttribute("content",s.metaDescription)}},[s]),n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 via-blue-50/20 to-white dark:from-slate-900 dark:via-blue-900/20 dark:to-slate-950 text-gray-900 dark:text-white overflow-hidden relative",children:[n.jsxs("div",{className:"absolute inset-0 z-0",children:[n.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(ellipse_at_top,_var(--tw-gradient-stops))] from-blue-400/20 via-transparent to-transparent dark:from-blue-600/20"}),n.jsx(q.div,{style:{y:o},className:"absolute top-[10%] left-[5%] w-[600px] h-[600px] bg-blue-500/10 rounded-full filter blur-3xl"}),n.jsx(q.div,{style:{y:Ra(i,[0,1],[0,-100])},className:"absolute bottom-[20%] right-[10%] w-96 h-96 bg-cyan-500/10 rounded-full filter blur-3xl"})]}),n.jsx("header",{className:"relative z-20 backdrop-blur-md bg-white/80 dark:bg-white/5 border-b border-gray-200 dark:border-white/10",children:n.jsxs("nav",{className:"flex justify-between items-center max-w-7xl mx-auto px-4 md:px-8 py-4",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(zn,{className:"h-8 w-8 text-cyan-600 dark:text-cyan-400"}),n.jsx("span",{className:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-600 to-cyan-500 dark:from-blue-400 dark:to-cyan-300",children:"CLEAN MACHINE"})]}),n.jsx(_,{variant:"ghost",size:"sm",className:"text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-white/10 transition-all backdrop-blur-sm",asChild:!0,children:n.jsx(St,{href:"/login","data-testid":"button-login",children:"Login"})})]})}),n.jsxs("main",{className:"max-w-7xl mx-auto px-4 md:px-8 relative z-10",children:[n.jsxs("section",{className:"py-16 text-center",children:[n.jsxs(q.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.8,ease:"easeOut"},className:"mb-8",children:[n.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-blue-100/50 dark:bg-white/10 backdrop-blur-md border border-blue-300 dark:border-white/20 mb-6",children:[n.jsx(ln,{className:"h-4 w-4 text-cyan-600 dark:text-cyan-400"}),n.jsx("span",{className:"text-sm text-blue-800 dark:text-cyan-100",children:"AI-Powered Auto Detailing"})]}),n.jsxs("h1",{className:"text-5xl md:text-7xl font-bold mb-6 bg-clip-text text-transparent bg-gradient-to-r from-gray-900 via-blue-800 to-cyan-700 dark:from-white dark:via-blue-100 dark:to-cyan-200",children:["Premium Detail",n.jsx("br",{}),"At Your Door"]}),n.jsx("p",{className:"text-lg md:text-xl text-gray-700 dark:text-blue-100/80 mb-12 max-w-3xl mx-auto leading-relaxed",children:(s==null?void 0:s.aboutText)||"Experience luxury auto detailing with AI-powered booking, real-time updates, and concierge-level service."})]}),n.jsxs("div",{className:"grid md:grid-cols-3 gap-6 mb-16",children:[n.jsx(q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1},children:n.jsx(O,{className:"p-6 bg-white/80 dark:bg-white/5 backdrop-blur-xl border-gray-200 dark:border-white/20 hover:bg-gray-50 dark:hover:bg-white/10 transition-all duration-300 cursor-pointer group",children:n.jsx(St,{href:(s==null?void 0:s.heroCtaLink)||"/chat",children:n.jsxs("div",{className:"flex flex-col items-center gap-4",children:[n.jsx("div",{className:"p-4 rounded-2xl bg-gradient-to-br from-blue-100 to-cyan-100 dark:from-blue-500/20 dark:to-cyan-500/20 border border-blue-300 dark:border-blue-400/30 group-hover:scale-110 transition-transform",children:n.jsx(on,{className:"h-8 w-8 text-cyan-600 dark:text-cyan-400"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-semibold mb-2 text-gray-900 dark:text-white",children:"AI Assistant"}),n.jsx("p",{className:"text-sm text-gray-600 dark:text-blue-200/70",children:"Ask anything, get instant answers"})]})]})})})}),n.jsx(q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},children:n.jsx(O,{className:"p-6 bg-white/80 dark:bg-white/5 backdrop-blur-xl border-gray-200 dark:border-white/20 hover:bg-gray-50 dark:hover:bg-white/10 transition-all duration-300 cursor-pointer group",children:n.jsx(St,{href:"/schedule",children:n.jsxs("div",{className:"flex flex-col items-center gap-4",children:[n.jsx("div",{className:"p-4 rounded-2xl bg-gradient-to-br from-purple-100 to-pink-100 dark:from-purple-500/20 dark:to-pink-500/20 border border-purple-300 dark:border-purple-400/30 group-hover:scale-110 transition-transform",children:n.jsx(Ql,{className:"h-8 w-8 text-purple-600 dark:text-purple-400"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-semibold mb-2 text-gray-900 dark:text-white",children:"Visual Scheduler"}),n.jsx("p",{className:"text-sm text-gray-600 dark:text-blue-200/70",children:"Book in seconds with live availability"})]})]})})})}),n.jsx(q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.3},children:n.jsx(O,{className:"p-6 bg-white/80 dark:bg-white/5 backdrop-blur-xl border-gray-200 dark:border-white/20 hover:bg-gray-50 dark:hover:bg-white/10 transition-all duration-300 cursor-pointer group",children:n.jsx("a",{href:`tel:${(s==null?void 0:s.phoneNumber)||"918-856-5304"}`,children:n.jsxs("div",{className:"flex flex-col items-center gap-4",children:[n.jsx("div",{className:"p-4 rounded-2xl bg-gradient-to-br from-green-100 to-emerald-100 dark:from-green-500/20 dark:to-emerald-500/20 border border-green-300 dark:border-green-400/30 group-hover:scale-110 transition-transform",children:n.jsx(bt,{className:"h-8 w-8 text-green-600 dark:text-green-400"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-semibold mb-2 text-gray-900 dark:text-white",children:"Call Now"}),n.jsx("p",{className:"text-sm text-gray-600 dark:text-blue-200/70",children:(s==null?void 0:s.phoneNumber)||"918-856-5304"})]})]})})})})]}),n.jsxs(q.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.8,delay:.5},className:"flex flex-wrap justify-center gap-8 py-8 border-y border-gray-200 dark:border-white/10",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(zn,{className:"h-5 w-5 text-cyan-600 dark:text-cyan-400"}),n.jsx("span",{className:"text-sm text-gray-700 dark:text-blue-200/80",children:"Fully Insured"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Rt,{className:"h-5 w-5 text-cyan-600 dark:text-cyan-400"}),n.jsx("span",{className:"text-sm text-gray-700 dark:text-blue-200/80",children:"Same-Day Available"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(ln,{className:"h-5 w-5 text-cyan-600 dark:text-cyan-400"}),n.jsx("span",{className:"text-sm text-gray-700 dark:text-blue-200/80",children:"AI-Powered Service"})]})]})]}),a.length>0&&n.jsxs("section",{className:"py-16",children:[n.jsxs(q.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6},className:"text-center mb-12",children:[n.jsx("h2",{className:"text-4xl md:text-5xl font-bold mb-4 bg-clip-text text-transparent bg-gradient-to-r from-gray-900 to-blue-700 dark:from-white dark:to-blue-200",children:"Our Services"}),n.jsx("p",{className:"text-gray-600 dark:text-blue-200/70",children:"Premium detailing packages for every need"})]}),n.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.slice(0,6).map((l,c)=>n.jsx(q.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.5,delay:c*.1},children:n.jsxs(O,{className:"p-6 bg-white/80 dark:bg-white/5 backdrop-blur-xl border-gray-200 dark:border-white/20 hover:bg-gray-50 dark:hover:bg-white/10 hover:border-cyan-500 dark:hover:border-cyan-400/40 transition-all duration-300 h-full",children:[n.jsx("h3",{className:"text-xl font-semibold mb-2 text-gray-900 dark:text-white",children:l.name}),n.jsx("p",{className:"text-cyan-600 dark:text-cyan-400 font-bold mb-3",children:l.priceRange}),n.jsx("p",{className:"text-sm text-gray-600 dark:text-blue-200/70 line-clamp-3",children:l.overview})]})},l.id))}),n.jsx("div",{className:"text-center mt-8",children:n.jsx(_,{size:"lg",variant:"outline",className:"border-cyan-500 dark:border-cyan-400/50 text-cyan-600 dark:text-cyan-400 hover:bg-cyan-50 dark:hover:bg-cyan-400/10",asChild:!0,children:n.jsx(St,{href:"/schedule",children:"View All Services "})})})]}),n.jsx("section",{className:"py-16",children:n.jsx(q.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6},children:n.jsx(Bu,{})})})]}),n.jsx("footer",{className:"relative z-10 mt-20 border-t border-gray-200 dark:border-white/10 backdrop-blur-md bg-white/80 dark:bg-white/5",children:n.jsxs("div",{className:"max-w-7xl mx-auto px-4 md:px-8 py-12",children:[n.jsxs("div",{className:"grid md:grid-cols-3 gap-8 mb-8",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-lg mb-4 text-cyan-600 dark:text-cyan-400",children:"Clean Machine"}),n.jsx("p",{className:"text-sm text-gray-600 dark:text-blue-200/70",children:"Premium mobile auto detailing powered by AI"})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-lg mb-4 text-gray-900 dark:text-white",children:"Quick Links"}),n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsx(St,{href:"/schedule",className:"text-sm text-gray-600 dark:text-blue-200/70 hover:text-cyan-600 dark:hover:text-cyan-400 transition-colors",children:"Book Appointment"}),n.jsx(St,{href:"/careers",className:"text-sm text-gray-600 dark:text-blue-200/70 hover:text-cyan-600 dark:hover:text-cyan-400 transition-colors",children:"Careers"}),n.jsx(St,{href:"/showcase",className:"text-sm text-gray-600 dark:text-blue-200/70 hover:text-cyan-600 dark:hover:text-cyan-400 transition-colors",children:"Investor Showcase"})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-lg mb-4 text-gray-900 dark:text-white",children:"Contact"}),n.jsx("p",{className:"text-sm text-gray-700 dark:text-blue-200/70 mb-2",children:(s==null?void 0:s.phoneNumber)||"918-856-5304"}),n.jsx("p",{className:"text-sm text-gray-600 dark:text-blue-200/70",children:"Tulsa, Oklahoma"})]})]}),n.jsx("div",{className:"text-center pt-8 border-t border-gray-200 dark:border-white/10",children:n.jsx("p",{className:"text-sm text-gray-600 dark:text-blue-200/50",children:" 2025 Clean Machine Auto Detail. All rights reserved."})})]})})]})}function Z9e({content:e}={}){const{data:t}=be({queryKey:["/api/homepage-content"],enabled:!e}),{data:r}=be({queryKey:["/api/services"]}),s=e||(t==null?void 0:t.content),a=(r==null?void 0:r.services)||[],{scrollYProgress:i}=s1(),o=Ra(i,[0,.5],[0,-100]);return p.useEffect(()=>{if(s){document.title=s.metaTitle;let l=document.querySelector('meta[name="description"]');l||(l=document.createElement("meta"),l.setAttribute("name","description"),document.head.appendChild(l)),l.setAttribute("content",s.metaDescription)}},[s]),n.jsxs("div",{className:"min-h-screen bg-white dark:bg-black text-gray-900 dark:text-white overflow-hidden",children:[n.jsxs("div",{className:"fixed inset-0 z-0",children:[n.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white via-gray-100 to-gray-50 dark:from-black dark:via-gray-900 dark:to-black"}),n.jsx(q.div,{animate:{scale:[1,1.2,1],rotate:[0,90,0],opacity:[.1,.2,.1]},transition:{duration:10,repeat:1/0,ease:"linear"},className:"absolute top-[20%] right-[10%] w-[500px] h-[500px] bg-gradient-to-br from-orange-500/20 to-red-600/20 rounded-full filter blur-3xl"}),n.jsx(q.div,{animate:{scale:[1.2,1,1.2],rotate:[90,0,90],opacity:[.15,.25,.15]},transition:{duration:8,repeat:1/0,ease:"linear"},className:"absolute bottom-[10%] left-[5%] w-[600px] h-[600px] bg-gradient-to-tl from-red-500/20 to-orange-500/20 rounded-full filter blur-3xl"})]}),n.jsx("header",{className:"relative z-20 bg-gradient-to-r from-white/90 to-gray-50/90 dark:from-black/90 dark:to-gray-900/90 backdrop-blur-sm border-b border-orange-500/30 dark:border-orange-500/20",children:n.jsxs("nav",{className:"flex justify-between items-center max-w-7xl mx-auto px-4 md:px-8 py-4",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"p-2 rounded-lg bg-gradient-to-br from-orange-500 to-red-600",children:n.jsx(na,{className:"h-6 w-6 text-white"})}),n.jsx("span",{className:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-orange-500 to-red-600 dark:from-orange-400 dark:to-red-500",children:"CLEAN MACHINE"})]}),n.jsx(_,{variant:"ghost",size:"sm",className:"text-gray-900 dark:text-white hover:bg-orange-500/20 hover:text-orange-600 dark:hover:text-orange-400 transition-all",asChild:!0,children:n.jsx(St,{href:"/login","data-testid":"button-login",children:"Login"})})]})}),n.jsxs("main",{className:"relative z-10",children:[n.jsx("section",{className:"min-h-screen flex items-center",children:n.jsx("div",{className:"max-w-7xl mx-auto px-4 md:px-8 w-full",children:n.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 items-center",children:[n.jsxs(q.div,{initial:{opacity:0,x:-50},animate:{opacity:1,x:0},transition:{duration:.8,ease:"easeOut"},style:{x:o},children:[n.jsxs(q.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.6,delay:.2},className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-gradient-to-r from-orange-500/20 to-red-600/20 border border-orange-500/30 mb-6",children:[n.jsx(ya,{className:"h-4 w-4 text-orange-500 dark:text-orange-400"}),n.jsx("span",{className:"text-sm text-orange-700 dark:text-orange-300 font-medium",children:"Premium Mobile Detailing"})]}),n.jsxs("h1",{className:"text-6xl md:text-7xl font-black mb-6 leading-tight",children:[n.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-gray-900 to-gray-700 dark:from-white dark:to-gray-300",children:"Detailing"}),n.jsx("br",{}),n.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-orange-600 via-red-600 to-orange-700 dark:from-orange-400 dark:via-red-500 dark:to-orange-600",children:"Redefined"})]}),n.jsx("p",{className:"text-lg md:text-xl text-gray-600 dark:text-gray-400 mb-8 max-w-xl leading-relaxed",children:(s==null?void 0:s.aboutText)||"Experience the future of auto detailing. AI-powered scheduling, real-time tracking, and concierge-level service at your location."}),n.jsxs("div",{className:"flex flex-col gap-4 mb-8",children:[n.jsx(q.div,{whileHover:{scale:1.02},whileTap:{scale:.98},children:n.jsx(_,{size:"lg",className:"w-full md:w-auto bg-gradient-to-r from-orange-500 to-red-600 hover:from-orange-600 hover:to-red-700 text-white font-bold text-lg py-6 px-8 shadow-lg shadow-orange-500/50",asChild:!0,children:n.jsxs(St,{href:(s==null?void 0:s.heroCtaLink)||"/chat","data-testid":"button-chat",children:[n.jsx(on,{className:"mr-2 h-5 w-5"}),"Chat with AI Assistant"]})})}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsx(q.div,{whileHover:{scale:1.02},whileTap:{scale:.98},children:n.jsx(_,{size:"lg",variant:"outline",className:"w-full border-2 border-orange-500/50 text-orange-400 hover:bg-orange-500/10 hover:border-orange-400 font-semibold py-6",asChild:!0,children:n.jsxs(St,{href:"/schedule","data-testid":"button-schedule",children:[n.jsx(Ql,{className:"mr-2 h-5 w-5"}),"Book Now"]})})}),n.jsx(q.div,{whileHover:{scale:1.02},whileTap:{scale:.98},children:n.jsx(_,{size:"lg",variant:"outline",className:"w-full border-2 border-orange-500/50 text-orange-400 hover:bg-orange-500/10 hover:border-orange-400 font-semibold py-6",asChild:!0,children:n.jsxs("a",{href:`tel:${(s==null?void 0:s.phoneNumber)||"918-856-5304"}`,"data-testid":"button-call",children:[n.jsx(bt,{className:"mr-2 h-5 w-5"}),"Call Us"]})})})]})]}),n.jsxs("div",{className:"flex flex-wrap gap-6",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Yr,{className:"h-5 w-5 text-orange-500 dark:text-orange-400"}),n.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"5-Star Rated"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(na,{className:"h-5 w-5 text-orange-500 dark:text-orange-400"}),n.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Same Day Available"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(ya,{className:"h-5 w-5 text-orange-500 dark:text-orange-400"}),n.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"AI-Powered"})]})]})]}),n.jsx(q.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},transition:{duration:.8,ease:"easeOut",delay:.2},className:"relative h-[500px] lg:h-[600px]",children:n.jsxs("div",{className:"absolute inset-0 rounded-2xl overflow-hidden border-2 border-orange-500/30 shadow-2xl shadow-orange-500/20 bg-gradient-to-br from-orange-50 to-red-50 dark:bg-gradient-to-br dark:from-gray-900 dark:to-black",children:[n.jsx(q.div,{animate:{background:["linear-gradient(135deg, #f97316 0%, #dc2626 100%)","linear-gradient(135deg, #dc2626 0%, #f97316 100%)","linear-gradient(135deg, #f97316 0%, #dc2626 100%)"]},transition:{duration:5,repeat:1/0,ease:"linear"},className:"absolute inset-0 opacity-20"}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:n.jsxs(q.div,{animate:{y:[0,-20,0],rotate:[0,5,0]},transition:{duration:3,repeat:1/0,ease:"easeInOut"},className:"text-center",children:[n.jsx("div",{className:"text-8xl font-black bg-clip-text text-transparent bg-gradient-to-r from-orange-600 to-red-600 dark:from-orange-400 dark:to-red-500 mb-4",children:"Premium"}),n.jsx("div",{className:"text-2xl text-gray-700 dark:text-gray-300 font-semibold",children:"Auto Detailing"})]})}),n.jsx(q.div,{animate:{scaleX:[0,1,0],x:["-100%","0%","100%"]},transition:{duration:2,repeat:1/0,ease:"linear"},className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-transparent via-orange-500 to-transparent"}),n.jsx(q.div,{animate:{scaleX:[0,1,0],x:["100%","0%","-100%"]},transition:{duration:2,repeat:1/0,ease:"linear",delay:1},className:"absolute bottom-0 left-0 right-0 h-1 bg-gradient-to-r from-transparent via-red-500 to-transparent"})]})})]})})}),a.length>0&&n.jsx("section",{className:"py-20 bg-gradient-to-b from-gray-50 to-white dark:from-black dark:to-gray-900",children:n.jsxs("div",{className:"max-w-7xl mx-auto px-4 md:px-8",children:[n.jsxs(q.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6},className:"text-center mb-12",children:[n.jsx("div",{className:"inline-block px-4 py-2 rounded-full bg-gradient-to-r from-orange-500/20 to-red-600/20 border border-orange-500/30 mb-4",children:n.jsx("span",{className:"text-sm text-orange-600 dark:text-orange-400 font-semibold",children:"Our Services"})}),n.jsx("h2",{className:"text-5xl md:text-6xl font-black mb-4",children:n.jsx("span",{className:"bg-clip-text text-transparent bg-gradient-to-r from-gray-900 to-gray-600 dark:from-white dark:to-gray-400",children:"Premium Packages"})}),n.jsx("p",{className:"text-gray-600 dark:text-gray-500 text-lg",children:"Tailored detailing solutions for every vehicle"})]}),n.jsx("div",{className:"relative overflow-hidden",children:n.jsx(q.div,{className:"flex gap-6 pb-8",initial:{x:0},animate:{x:[0,-20,0]},transition:{duration:20,repeat:1/0,ease:"linear"},children:a.map((l,c)=>n.jsx(q.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.5,delay:c*.1},whileHover:{scale:1.05,y:-10},className:"min-w-[300px] md:min-w-[350px]",children:n.jsxs(O,{className:"p-6 bg-gradient-to-br from-white to-gray-50 dark:from-gray-900 dark:to-black border-2 border-orange-500/30 hover:border-orange-500 transition-all duration-300 h-full shadow-lg shadow-orange-500/10",children:[n.jsxs("div",{className:"mb-4",children:[n.jsx("div",{className:"w-12 h-12 rounded-lg bg-gradient-to-br from-orange-500 to-red-600 flex items-center justify-center mb-4",children:n.jsx(na,{className:"h-6 w-6 text-white"})}),n.jsx("h3",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:l.name}),n.jsx("p",{className:"text-orange-600 dark:text-orange-400 font-bold text-xl mb-3",children:l.priceRange})]}),n.jsx("p",{className:"text-gray-600 dark:text-gray-400 line-clamp-3",children:l.overview})]})},l.id))})}),n.jsx("div",{className:"text-center mt-12",children:n.jsx(_,{size:"lg",className:"bg-gradient-to-r from-orange-500 to-red-600 hover:from-orange-600 hover:to-red-700 text-white font-bold shadow-lg shadow-orange-500/30",asChild:!0,children:n.jsx(St,{href:"/schedule",children:"View All Services "})})})]})}),n.jsx("section",{className:"py-20 bg-white dark:bg-black",children:n.jsx("div",{className:"max-w-7xl mx-auto px-4 md:px-8",children:n.jsx(q.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6},children:n.jsx(Bu,{})})})})]}),n.jsx("footer",{className:"relative z-10 border-t-2 border-orange-500/30 bg-gradient-to-b from-gray-100 to-white dark:from-gray-900 dark:to-black",children:n.jsxs("div",{className:"max-w-7xl mx-auto px-4 md:px-8 py-16",children:[n.jsxs("div",{className:"grid md:grid-cols-3 gap-12 mb-12",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx("div",{className:"p-2 rounded-lg bg-gradient-to-br from-orange-500 to-red-600",children:n.jsx(na,{className:"h-6 w-6 text-white"})}),n.jsx("h3",{className:"font-bold text-xl bg-clip-text text-transparent bg-gradient-to-r from-orange-600 to-red-600 dark:from-orange-400 dark:to-red-500",children:"Clean Machine"})]}),n.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Premium mobile auto detailing powered by AI technology"})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-lg text-orange-600 dark:text-orange-400 mb-4",children:"Quick Links"}),n.jsxs("div",{className:"flex flex-col gap-3",children:[n.jsx(St,{href:"/schedule",className:"text-gray-600 dark:text-gray-400 hover:text-orange-600 dark:hover:text-orange-400 transition-colors",children:"Book Appointment"}),n.jsx(St,{href:"/careers",className:"text-gray-600 dark:text-gray-400 hover:text-orange-600 dark:hover:text-orange-400 transition-colors",children:"Careers"}),n.jsx(St,{href:"/showcase",className:"text-gray-600 dark:text-gray-400 hover:text-orange-600 dark:hover:text-orange-400 transition-colors",children:"Investor Showcase"})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-lg text-orange-600 dark:text-orange-400 mb-4",children:"Contact"}),n.jsx("p",{className:"text-gray-700 dark:text-gray-400 mb-2 font-semibold",children:(s==null?void 0:s.phoneNumber)||"918-856-5304"}),n.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Tulsa, Oklahoma"})]})]}),n.jsx("div",{className:"text-center pt-8 border-t border-orange-500/20",children:n.jsx("p",{className:"text-gray-600 dark:text-gray-500",children:" 2025 Clean Machine Auto Detail. All rights reserved."})})]})})]})}function X9e({content:e}={}){const{data:t}=be({queryKey:["/api/homepage-content"],enabled:!e}),{data:r}=be({queryKey:["/api/services"]}),s=e||(t==null?void 0:t.content),a=(r==null?void 0:r.services)||[],{scrollYProgress:i}=s1(),o=Ra(i,[0,1],[0,150]),l=Ra(i,[0,1],[0,-80]);return p.useEffect(()=>{if(s){document.title=s.metaTitle;let c=document.querySelector('meta[name="description"]');c||(c=document.createElement("meta"),c.setAttribute("name","description"),document.head.appendChild(c)),c.setAttribute("content",s.metaDescription)}},[s]),n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-white via-amber-50/30 to-gray-50 dark:from-gray-950 dark:via-slate-900 dark:to-gray-950 text-gray-900 dark:text-white overflow-hidden relative",children:[n.jsxs("div",{className:"absolute inset-0 z-0",children:[n.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(ellipse_at_top_left,_var(--tw-gradient-stops))] from-amber-200/20 via-transparent to-transparent dark:from-amber-900/20"}),n.jsx(q.div,{style:{y:o},className:"absolute top-[15%] right-[10%] w-[500px] h-[500px] bg-amber-600/10 rounded-full filter blur-3xl"}),n.jsx(q.div,{style:{y:l},className:"absolute bottom-[25%] left-[5%] w-80 h-80 bg-yellow-600/10 rounded-full filter blur-3xl"})]}),n.jsx("header",{className:"relative z-20 bg-white/20 dark:bg-black/20 backdrop-blur-sm border-b border-amber-300/30 dark:border-amber-900/20",children:n.jsxs("nav",{className:"flex justify-between items-center max-w-7xl mx-auto px-4 md:px-8 py-4",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Yr,{className:"h-8 w-8 text-amber-600 dark:text-amber-500"}),n.jsx("span",{className:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-amber-600 to-yellow-500 dark:from-amber-500 dark:to-yellow-400",children:"CLEAN MACHINE"})]}),n.jsx(_,{variant:"ghost",size:"sm",className:"text-gray-900 dark:text-white hover:bg-amber-500/10 hover:text-amber-600 dark:hover:text-amber-400 transition-all",asChild:!0,children:n.jsx(St,{href:"/login","data-testid":"button-login",children:"Login"})})]})}),n.jsxs("main",{className:"max-w-7xl mx-auto px-4 md:px-8 relative z-10",children:[n.jsxs("section",{className:"py-16 grid md:grid-cols-2 gap-12 items-center",children:[n.jsxs(q.div,{initial:{opacity:0,x:-30},animate:{opacity:1,x:0},transition:{duration:.7,ease:"easeOut"},className:"space-y-8",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-amber-500/10 border border-amber-500/30 mb-6",children:[n.jsx(Qr,{className:"h-4 w-4 text-amber-600 dark:text-amber-400"}),n.jsx("span",{className:"text-sm text-amber-800 dark:text-amber-100",children:"Premium Mobile Detailing"})]}),n.jsxs("h1",{className:"text-5xl md:text-6xl font-bold mb-6 bg-clip-text text-transparent bg-gradient-to-r from-amber-700 via-yellow-600 to-amber-600 dark:from-amber-400 dark:via-yellow-400 dark:to-amber-300 leading-tight",children:["Prestige Detail",n.jsx("br",{}),"Delivered"]}),n.jsx("p",{className:"text-lg text-gray-700 dark:text-gray-300 mb-8 leading-relaxed",children:(s==null?void 0:s.aboutText)||"Experience elevated auto care with modular service packages, professional-grade results, and seamless booking."})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"flex items-start gap-3 p-4 rounded-lg bg-amber-50 dark:bg-white/5 border border-amber-200 dark:border-amber-900/20",children:[n.jsx(zn,{className:"h-6 w-6 text-amber-600 dark:text-amber-500 flex-shrink-0 mt-0.5"}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-sm mb-1 text-gray-900 dark:text-white",children:"Fully Insured"}),n.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Licensed & Protected"})]})]}),n.jsxs("div",{className:"flex items-start gap-3 p-4 rounded-lg bg-amber-50 dark:bg-white/5 border border-amber-200 dark:border-amber-900/20",children:[n.jsx(Rt,{className:"h-6 w-6 text-amber-600 dark:text-amber-500 flex-shrink-0 mt-0.5"}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-sm mb-1 text-gray-900 dark:text-white",children:"Same Day"}),n.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Fast Scheduling"})]})]}),n.jsxs("div",{className:"flex items-start gap-3 p-4 rounded-lg bg-amber-50 dark:bg-white/5 border border-amber-200 dark:border-amber-900/20",children:[n.jsx(bn,{className:"h-6 w-6 text-amber-600 dark:text-amber-500 flex-shrink-0 mt-0.5"}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-sm mb-1 text-gray-900 dark:text-white",children:"Satisfaction"}),n.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"100% Guaranteed"})]})]}),n.jsxs("div",{className:"flex items-start gap-3 p-4 rounded-lg bg-amber-50 dark:bg-white/5 border border-amber-200 dark:border-amber-900/20",children:[n.jsx(Yr,{className:"h-6 w-6 text-amber-600 dark:text-amber-500 flex-shrink-0 mt-0.5"}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-sm mb-1 text-gray-900 dark:text-white",children:"Top Rated"}),n.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"5-Star Reviews"})]})]})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[n.jsx(_,{size:"lg",className:"bg-gradient-to-r from-amber-500 to-yellow-600 hover:from-amber-600 hover:to-yellow-700 text-white border-0",asChild:!0,children:n.jsx(St,{href:(s==null?void 0:s.heroCtaLink)||"/schedule","data-testid":"button-book-now",children:"Book Now"})}),n.jsx(_,{size:"lg",variant:"outline",className:"border-amber-500/50 text-amber-600 dark:text-amber-400 hover:bg-amber-100 dark:hover:bg-amber-500/10",asChild:!0,children:n.jsxs("a",{href:`tel:${(s==null?void 0:s.phoneNumber)||"918-856-5304"}`,"data-testid":"button-call",children:[n.jsx(bt,{className:"h-4 w-4 mr-2"}),(s==null?void 0:s.phoneNumber)||"918-856-5304"]})})]})]}),n.jsxs(q.div,{initial:{opacity:0,x:30},animate:{opacity:1,x:0},transition:{duration:.7,ease:"easeOut",delay:.2},className:"space-y-4",children:[n.jsx(O,{className:"p-6 bg-gradient-to-br from-amber-50 to-yellow-50 dark:from-amber-950/30 dark:to-yellow-950/20 border-amber-200 dark:border-amber-800/30 hover:border-amber-500 dark:hover:border-amber-600/50 transition-all duration-300 cursor-pointer group",children:n.jsx(St,{href:(s==null?void 0:s.heroCtaLink)||"/chat",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"p-4 rounded-xl bg-gradient-to-br from-amber-100 to-yellow-100 dark:from-amber-500/20 dark:to-yellow-500/20 border border-amber-300 dark:border-amber-400/30 group-hover:scale-110 transition-transform duration-300",children:n.jsx(on,{className:"h-8 w-8 text-amber-600 dark:text-amber-400"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-semibold mb-1 text-gray-900 dark:text-white",children:"AI Assistant"}),n.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Get instant answers & quotes"})]})]})})}),n.jsx(O,{className:"p-6 bg-gradient-to-br from-amber-50 to-yellow-50 dark:from-amber-950/30 dark:to-yellow-950/20 border-amber-200 dark:border-amber-800/30 hover:border-amber-500 dark:hover:border-amber-600/50 transition-all duration-300 cursor-pointer group",children:n.jsx(St,{href:"/schedule",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"p-4 rounded-xl bg-gradient-to-br from-amber-100 to-yellow-100 dark:from-amber-500/20 dark:to-yellow-500/20 border border-amber-300 dark:border-amber-400/30 group-hover:scale-110 transition-transform duration-300",children:n.jsx(Ql,{className:"h-8 w-8 text-amber-600 dark:text-amber-400"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-semibold mb-1 text-gray-900 dark:text-white",children:"Visual Scheduler"}),n.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"See live availability & book"})]})]})})}),n.jsx("div",{className:"text-center pt-4 text-sm text-gray-600 dark:text-gray-400",children:"Trusted by 500+ vehicle owners in Tulsa"})]})]}),a.length>0&&n.jsxs("section",{className:"py-16",children:[n.jsxs(q.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6},className:"mb-12",children:[n.jsx("h2",{className:"text-4xl md:text-5xl font-bold mb-4 bg-clip-text text-transparent bg-gradient-to-r from-amber-700 to-yellow-600 dark:from-amber-400 dark:to-yellow-500",children:"Our Services"}),n.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-lg",children:"Modular packages tailored to your needs"})]}),n.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-6",children:a.slice(0,9).map((c,d)=>n.jsx(q.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6,delay:d*.1},children:n.jsxs(O,{className:"p-6 bg-gradient-to-br from-white to-amber-50 dark:from-slate-900/50 dark:to-gray-900/50 border-amber-200 dark:border-amber-900/20 hover:border-amber-500 dark:hover:border-amber-600/40 hover:bg-gradient-to-br hover:from-amber-50 hover:to-yellow-50 dark:hover:from-amber-950/30 dark:hover:to-yellow-950/20 transition-all duration-300 h-full group",children:[n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white group-hover:text-amber-600 dark:group-hover:text-amber-400 transition-colors",children:c.name}),n.jsx(bn,{className:"h-5 w-5 text-amber-600 dark:text-amber-500 flex-shrink-0"})]}),n.jsx("p",{className:"text-amber-600 dark:text-amber-400 font-bold mb-3 text-lg",children:c.priceRange}),n.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 line-clamp-3",children:c.overview})]})},c.id))}),n.jsx("div",{className:"text-center mt-10",children:n.jsx(_,{size:"lg",variant:"outline",className:"border-amber-500/50 text-amber-600 dark:text-amber-400 hover:bg-amber-100 dark:hover:bg-amber-500/10",asChild:!0,children:n.jsx(St,{href:"/schedule",children:"View All Services & Pricing "})})})]}),n.jsx("section",{className:"py-16",children:n.jsx(q.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6},children:n.jsx(Bu,{})})})]}),n.jsx("footer",{className:"relative z-10 mt-20 border-t border-amber-200 dark:border-amber-900/20 bg-white/30 dark:bg-black/30 backdrop-blur-sm",children:n.jsxs("div",{className:"max-w-7xl mx-auto px-4 md:px-8 py-12",children:[n.jsxs("div",{className:"grid md:grid-cols-3 gap-8 mb-8",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-lg mb-4 text-amber-600 dark:text-amber-400",children:"Clean Machine"}),n.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Premium mobile auto detailing with professional results"})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-lg mb-4 text-gray-900 dark:text-white",children:"Quick Links"}),n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsx(St,{href:"/schedule",className:"text-sm text-gray-600 dark:text-gray-400 hover:text-amber-600 dark:hover:text-amber-400 transition-colors",children:"Book Appointment"}),n.jsx(St,{href:"/careers",className:"text-sm text-gray-600 dark:text-gray-400 hover:text-amber-600 dark:hover:text-amber-400 transition-colors",children:"Careers"}),n.jsx(St,{href:"/showcase",className:"text-sm text-gray-600 dark:text-gray-400 hover:text-amber-600 dark:hover:text-amber-400 transition-colors",children:"Investor Showcase"})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-lg mb-4 text-gray-900 dark:text-white",children:"Contact"}),n.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-400 mb-2",children:(s==null?void 0:s.phoneNumber)||"918-856-5304"}),n.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Tulsa, Oklahoma"})]})]}),n.jsx("div",{className:"text-center pt-8 border-t border-amber-200 dark:border-amber-900/20",children:n.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-500",children:" 2025 Clean Machine Auto Detail. All rights reserved."})})]})})]})}function eLe({content:e}={}){const{data:t}=be({queryKey:["/api/homepage-content"],enabled:!e}),{data:r}=be({queryKey:["/api/services"]}),s=e||(t==null?void 0:t.content),a=(r==null?void 0:r.services)||[];p.useEffect(()=>{if(s){document.title=s.metaTitle;let o=document.querySelector('meta[name="description"]');o||(o=document.createElement("meta"),o.setAttribute("name","description"),document.head.appendChild(o)),o.setAttribute("content",s.metaDescription)}},[s]);const i=[...a,...a,...a];return n.jsxs("div",{className:"min-h-screen bg-black text-white overflow-hidden relative",children:[n.jsxs("div",{className:"absolute inset-0 z-0",children:[n.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-black via-purple-950/30 to-black"}),n.jsx(q.div,{animate:{scale:[1,1.2,1],opacity:[.3,.5,.3]},transition:{duration:3,repeat:1/0,ease:"easeInOut"},className:"absolute top-0 left-1/4 w-96 h-96 bg-fuchsia-500/30 blur-[120px]"}),n.jsx(q.div,{animate:{scale:[1,1.3,1],opacity:[.3,.6,.3]},transition:{duration:4,repeat:1/0,ease:"easeInOut",delay:1},className:"absolute bottom-1/4 right-1/4 w-96 h-96 bg-purple-600/30 blur-[120px]"}),n.jsx(q.div,{animate:{scale:[1,1.25,1],opacity:[.2,.4,.2]},transition:{duration:5,repeat:1/0,ease:"easeInOut",delay:2},className:"absolute top-1/2 left-1/2 w-96 h-96 bg-cyan-500/20 blur-[120px]"}),n.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(139,92,246,0.05)_1px,transparent_1px),linear-gradient(90deg,rgba(139,92,246,0.05)_1px,transparent_1px)] bg-[size:50px_50px]"})]}),n.jsx("header",{className:"relative z-20 border-b-2 border-fuchsia-500/50 bg-black/80",children:n.jsxs("nav",{className:"flex justify-between items-center max-w-7xl mx-auto px-4 md:px-8 py-4",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(q.div,{animate:{boxShadow:["0 0 10px rgba(217,70,239,0.5)","0 0 20px rgba(217,70,239,0.8)","0 0 10px rgba(217,70,239,0.5)"]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},children:n.jsx(zn,{className:"h-8 w-8 text-fuchsia-400"})}),n.jsxs("span",{className:"text-xl font-bold uppercase tracking-wider",style:{textShadow:"0 0 10px rgba(217,70,239,0.8), 0 0 20px rgba(217,70,239,0.5)"},children:[n.jsx("span",{className:"text-fuchsia-400",children:"CLEAN"})," ",n.jsx("span",{className:"text-purple-400",children:"MACHINE"})]})]}),n.jsx(_,{variant:"ghost",size:"sm",className:"text-fuchsia-400 hover:bg-fuchsia-500/20 transition-all border border-fuchsia-500/50 hover:border-fuchsia-400",style:{boxShadow:"0 0 10px rgba(217,70,239,0.3)"},asChild:!0,children:n.jsx(St,{href:"/login","data-testid":"button-login",children:"LOGIN"})})]})}),n.jsxs("main",{className:"max-w-7xl mx-auto px-4 md:px-8 relative z-10",children:[n.jsxs("section",{className:"py-20 text-center",children:[n.jsxs(q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"mb-12",children:[n.jsxs(q.div,{animate:{boxShadow:["0 0 20px rgba(217,70,239,0.5)","0 0 40px rgba(217,70,239,0.8)","0 0 20px rgba(217,70,239,0.5)"]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},className:"inline-flex items-center gap-2 px-6 py-2 border-2 border-fuchsia-500 bg-black mb-8",children:[n.jsx(na,{className:"h-5 w-5 text-fuchsia-400"}),n.jsx("span",{className:"text-sm font-bold uppercase tracking-wider text-fuchsia-400",children:"AI-Powered Future Detail"})]}),n.jsxs("h1",{className:"text-6xl md:text-8xl font-black mb-6 uppercase tracking-tight",style:{background:"linear-gradient(to right, #d946ef, #a855f7, #d946ef)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",textShadow:"0 0 30px rgba(217,70,239,0.5)"},children:["DRIVE",n.jsx("br",{}),"THE FUTURE"]}),n.jsx("p",{className:"text-lg md:text-xl text-purple-200 mb-12 max-w-3xl mx-auto font-light tracking-wide",children:(s==null?void 0:s.aboutText)||"Experience next-generation auto detailing with cyberpunk precision and neon-level service."})]}),n.jsxs("div",{className:"grid md:grid-cols-3 gap-6 mb-16",children:[n.jsx(q.div,{initial:{opacity:0,x:-50},animate:{opacity:1,x:0},transition:{duration:.5,delay:.1},whileHover:{scale:1.05},children:n.jsx(St,{href:(s==null?void 0:s.heroCtaLink)||"/chat",children:n.jsx(O,{className:"p-6 bg-black border-2 border-fuchsia-500/50 hover:border-fuchsia-400 transition-all duration-300 cursor-pointer group",style:{boxShadow:"0 0 20px rgba(217,70,239,0.3)"},children:n.jsxs("div",{className:"flex flex-col items-center gap-4",children:[n.jsx(q.div,{animate:{boxShadow:["0 0 15px rgba(217,70,239,0.5)","0 0 25px rgba(217,70,239,0.8)","0 0 15px rgba(217,70,239,0.5)"]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},className:"p-4 border-2 border-fuchsia-500 bg-black",children:n.jsx(on,{className:"h-8 w-8 text-fuchsia-400"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-bold mb-2 uppercase text-fuchsia-400",children:"AI CHAT"}),n.jsx("p",{className:"text-sm text-purple-300",children:"Instant neural responses"})]})]})})})}),n.jsx(q.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},whileHover:{scale:1.05},children:n.jsx(St,{href:"/schedule",children:n.jsx(O,{className:"p-6 bg-black border-2 border-purple-500/50 hover:border-purple-400 transition-all duration-300 cursor-pointer group",style:{boxShadow:"0 0 20px rgba(168,85,247,0.3)"},children:n.jsxs("div",{className:"flex flex-col items-center gap-4",children:[n.jsx(q.div,{animate:{boxShadow:["0 0 15px rgba(168,85,247,0.5)","0 0 25px rgba(168,85,247,0.8)","0 0 15px rgba(168,85,247,0.5)"]},transition:{duration:2,repeat:1/0,ease:"easeInOut",delay:.5},className:"p-4 border-2 border-purple-500 bg-black",children:n.jsx(Ql,{className:"h-8 w-8 text-purple-400"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-bold mb-2 uppercase text-purple-400",children:"SYNC SCHEDULE"}),n.jsx("p",{className:"text-sm text-purple-300",children:"Real-time booking matrix"})]})]})})})}),n.jsx(q.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},transition:{duration:.5,delay:.3},whileHover:{scale:1.05},children:n.jsx("a",{href:`tel:${(s==null?void 0:s.phoneNumber)||"918-856-5304"}`,children:n.jsx(O,{className:"p-6 bg-black border-2 border-cyan-500/50 hover:border-cyan-400 transition-all duration-300 cursor-pointer group",style:{boxShadow:"0 0 20px rgba(6,182,212,0.3)"},children:n.jsxs("div",{className:"flex flex-col items-center gap-4",children:[n.jsx(q.div,{animate:{boxShadow:["0 0 15px rgba(6,182,212,0.5)","0 0 25px rgba(6,182,212,0.8)","0 0 15px rgba(6,182,212,0.5)"]},transition:{duration:2,repeat:1/0,ease:"easeInOut",delay:1},className:"p-4 border-2 border-cyan-500 bg-black",children:n.jsx(bt,{className:"h-8 w-8 text-cyan-400"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-bold mb-2 uppercase text-cyan-400",children:"DIRECT LINE"}),n.jsx("p",{className:"text-sm text-purple-300",children:(s==null?void 0:s.phoneNumber)||"918-856-5304"})]})]})})})})]}),n.jsxs(q.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.8,delay:.5},className:"flex flex-wrap justify-center gap-8 py-8 border-y-2 border-fuchsia-500/30",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(zn,{className:"h-5 w-5 text-fuchsia-400"}),n.jsx("span",{className:"text-sm text-purple-200 uppercase tracking-wide",children:"Insured"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Rt,{className:"h-5 w-5 text-purple-400"}),n.jsx("span",{className:"text-sm text-purple-200 uppercase tracking-wide",children:"Same-Day"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(na,{className:"h-5 w-5 text-cyan-400"}),n.jsx("span",{className:"text-sm text-purple-200 uppercase tracking-wide",children:"AI-Powered"})]})]})]}),a.length>0&&n.jsxs("section",{className:"py-16 overflow-hidden",children:[n.jsxs(q.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6},className:"text-center mb-12",children:[n.jsx("h2",{className:"text-4xl md:text-6xl font-black mb-4 uppercase tracking-tight",style:{background:"linear-gradient(to right, #d946ef, #a855f7)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",textShadow:"0 0 20px rgba(217,70,239,0.5)"},children:"SERVICE ARRAY"}),n.jsx("p",{className:"text-purple-300 uppercase tracking-wider text-sm",children:"Elite detailing protocols"})]}),n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"overflow-hidden border-y-2 border-fuchsia-500/50 bg-black/50 py-8",children:n.jsx(q.div,{animate:{x:[0,-1920]},transition:{x:{duration:30,repeat:1/0,ease:"linear"}},className:"flex gap-6",children:i.map((o,l)=>n.jsxs("div",{className:"min-w-[400px] p-6 border-2 border-purple-500/50 bg-black",style:{boxShadow:"0 0 15px rgba(168,85,247,0.3)"},children:[n.jsx("h3",{className:"text-xl font-bold mb-2 uppercase text-fuchsia-400 tracking-wide",children:o.name}),n.jsx("p",{className:"text-cyan-400 font-bold mb-3 text-lg",children:o.priceRange}),n.jsx("p",{className:"text-sm text-purple-200 line-clamp-2",children:o.overview})]},`${o.id}-${l}`))})}),n.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-32 bg-gradient-to-r from-black to-transparent pointer-events-none"}),n.jsx("div",{className:"absolute right-0 top-0 bottom-0 w-32 bg-gradient-to-l from-black to-transparent pointer-events-none"})]}),n.jsx("div",{className:"text-center mt-8",children:n.jsx(_,{size:"lg",className:"border-2 border-fuchsia-500 bg-black text-fuchsia-400 hover:bg-fuchsia-500/20 uppercase tracking-wider font-bold",style:{boxShadow:"0 0 20px rgba(217,70,239,0.5)"},asChild:!0,children:n.jsx(St,{href:"/schedule",children:"ACCESS ALL SERVICES "})})})]}),n.jsx("section",{className:"py-16",children:n.jsx(q.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6},className:"border-2 border-purple-500/50 bg-black/50 p-8",style:{boxShadow:"0 0 30px rgba(168,85,247,0.3)"},children:n.jsx(Bu,{})})})]}),n.jsx("footer",{className:"relative z-10 mt-20 border-t-2 border-fuchsia-500/50 bg-black",children:n.jsxs("div",{className:"max-w-7xl mx-auto px-4 md:px-8 py-12",children:[n.jsxs("div",{className:"grid md:grid-cols-3 gap-8 mb-8",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-lg mb-4 uppercase tracking-wider text-fuchsia-400",children:"Clean Machine"}),n.jsx("p",{className:"text-sm text-purple-300",children:"Next-gen mobile auto detailing powered by AI"})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-lg mb-4 uppercase tracking-wider text-purple-400",children:"Quick Access"}),n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsx(St,{href:"/schedule",className:"text-sm text-purple-300 hover:text-fuchsia-400 transition-colors uppercase tracking-wide",children:"Book Now"}),n.jsx(St,{href:"/careers",className:"text-sm text-purple-300 hover:text-fuchsia-400 transition-colors uppercase tracking-wide",children:"Careers"}),n.jsx(St,{href:"/showcase",className:"text-sm text-purple-300 hover:text-fuchsia-400 transition-colors uppercase tracking-wide",children:"Showcase"})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-lg mb-4 uppercase tracking-wider text-cyan-400",children:"Connect"}),n.jsx("p",{className:"text-sm text-purple-300 mb-2 font-mono",children:(s==null?void 0:s.phoneNumber)||"918-856-5304"}),n.jsx("p",{className:"text-sm text-purple-300 uppercase tracking-wide",children:"Tulsa, Oklahoma"})]})]}),n.jsx("div",{className:"text-center pt-8 border-t-2 border-fuchsia-500/30",children:n.jsx("p",{className:"text-sm text-purple-400 uppercase tracking-wider",children:" 2025 Clean Machine Auto Detail. All rights reserved."})})]})})]})}function tLe({content:e}={}){const{data:t}=be({queryKey:["/api/homepage-content"],enabled:!e}),{data:r}=be({queryKey:["/api/services"]}),s=e||(t==null?void 0:t.content),a=(r==null?void 0:r.services)||[],{scrollYProgress:i}=s1(),o=Ra(i,[0,.2],[1,.3]);return p.useEffect(()=>{if(s){document.title=s.metaTitle;let l=document.querySelector('meta[name="description"]');l||(l=document.createElement("meta"),l.setAttribute("name","description"),document.head.appendChild(l)),l.setAttribute("content",s.metaDescription)}},[s]),n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-white to-gray-50 dark:from-gray-950 dark:to-gray-900 text-gray-900 dark:text-gray-100",children:[n.jsx("header",{className:"border-b border-gray-200 dark:border-gray-800 bg-white dark:bg-gray-950",children:n.jsxs("nav",{className:"flex justify-between items-center max-w-6xl mx-auto px-6 md:px-12 py-6",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(zn,{className:"h-7 w-7 text-gray-900 dark:text-gray-100",strokeWidth:1.5}),n.jsx("span",{className:"text-lg font-light tracking-wide text-gray-900 dark:text-gray-100",children:"CLEAN MACHINE"})]}),n.jsx(_,{variant:"ghost",size:"sm",className:"text-gray-900 dark:text-gray-100 hover:bg-gray-100 dark:hover:bg-gray-800 font-light",asChild:!0,children:n.jsx(St,{href:"/login","data-testid":"button-login",children:"Login"})})]})}),n.jsxs("main",{className:"max-w-5xl mx-auto px-6 md:px-12",children:[n.jsx("section",{className:"py-24 md:py-32",children:n.jsxs(q.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:1,ease:"easeOut"},className:"text-center",style:{opacity:o},children:[n.jsx("div",{className:"mb-8",children:n.jsx("span",{className:"text-sm tracking-widest text-gray-500 dark:text-gray-400 uppercase",children:"Premium Mobile Detailing"})}),n.jsxs("h1",{className:"text-5xl md:text-7xl font-light mb-8 text-gray-900 dark:text-gray-100 tracking-tight leading-tight",children:["Excellence",n.jsx("br",{}),"Delivered"]}),n.jsx("p",{className:"text-lg md:text-xl text-gray-600 dark:text-gray-300 mb-16 max-w-2xl mx-auto font-light leading-relaxed",children:(s==null?void 0:s.aboutText)||"Exceptional auto detailing with precision service, intelligent booking, and unwavering attention to detail."}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center mb-20",children:[n.jsx(_,{size:"lg",className:"bg-gray-900 dark:bg-gray-100 hover:bg-gray-800 dark:hover:bg-gray-200 text-white dark:text-gray-900 px-8 py-6 text-base font-light tracking-wide min-w-[200px]",asChild:!0,children:n.jsx(St,{href:(s==null?void 0:s.heroCtaLink)||"/chat","data-testid":"button-chat",children:"Get Started"})}),n.jsx(_,{size:"lg",variant:"outline",className:"border-gray-300 dark:border-gray-700 text-gray-900 dark:text-gray-100 hover:bg-gray-50 dark:hover:bg-gray-800 px-8 py-6 text-base font-light tracking-wide min-w-[200px]",asChild:!0,children:n.jsx(St,{href:"/schedule",children:"Book Appointment"})})]}),n.jsxs("div",{className:"flex flex-wrap justify-center gap-12 py-12 border-t border-gray-200 dark:border-gray-800",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(zn,{className:"h-5 w-5 text-gray-400 dark:text-gray-500",strokeWidth:1.5}),n.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300 font-light",children:"Fully Insured"})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Rt,{className:"h-5 w-5 text-gray-400 dark:text-gray-500",strokeWidth:1.5}),n.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300 font-light",children:"Same-Day Available"})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(ln,{className:"h-5 w-5 text-gray-400 dark:text-gray-500",strokeWidth:1.5}),n.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300 font-light",children:"AI-Powered Service"})]})]})]})}),n.jsx("section",{className:"py-16 border-t border-gray-200 dark:border-gray-800",children:n.jsxs("div",{className:"grid md:grid-cols-3 gap-px bg-gray-200 dark:bg-gray-800",children:[n.jsx(q.div,{initial:{opacity:0},whileInView:{opacity:1},viewport:{once:!0},transition:{duration:.8},className:"bg-white dark:bg-gray-950 p-8 hover:bg-gray-50 dark:hover:bg-gray-900 transition-colors cursor-pointer",children:n.jsx(St,{href:(s==null?void 0:s.heroCtaLink)||"/chat",children:n.jsxs("div",{className:"text-center",children:[n.jsx(on,{className:"h-8 w-8 text-gray-900 dark:text-gray-100 mx-auto mb-4",strokeWidth:1.5}),n.jsx("h3",{className:"text-lg font-light mb-2 text-gray-900 dark:text-gray-100",children:"AI Assistant"}),n.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 font-light",children:"Instant answers to your questions"})]})})}),n.jsx(q.div,{initial:{opacity:0},whileInView:{opacity:1},viewport:{once:!0},transition:{duration:.8,delay:.1},className:"bg-white dark:bg-gray-950 p-8 hover:bg-gray-50 dark:hover:bg-gray-900 transition-colors cursor-pointer",children:n.jsx(St,{href:"/schedule",children:n.jsxs("div",{className:"text-center",children:[n.jsx(Ql,{className:"h-8 w-8 text-gray-900 dark:text-gray-100 mx-auto mb-4",strokeWidth:1.5}),n.jsx("h3",{className:"text-lg font-light mb-2 text-gray-900 dark:text-gray-100",children:"Visual Scheduler"}),n.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 font-light",children:"Real-time availability"})]})})}),n.jsx(q.div,{initial:{opacity:0},whileInView:{opacity:1},viewport:{once:!0},transition:{duration:.8,delay:.2},className:"bg-white dark:bg-gray-950 p-8 hover:bg-gray-50 dark:hover:bg-gray-900 transition-colors cursor-pointer",children:n.jsx("a",{href:`tel:${(s==null?void 0:s.phoneNumber)||"918-856-5304"}`,children:n.jsxs("div",{className:"text-center",children:[n.jsx(bt,{className:"h-8 w-8 text-gray-900 dark:text-gray-100 mx-auto mb-4",strokeWidth:1.5}),n.jsx("h3",{className:"text-lg font-light mb-2 text-gray-900 dark:text-gray-100",children:"Call Direct"}),n.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 font-light",children:(s==null?void 0:s.phoneNumber)||"918-856-5304"})]})})})]})}),a.length>0&&n.jsxs("section",{className:"py-20 border-t border-gray-200 dark:border-gray-800",children:[n.jsxs(q.div,{initial:{opacity:0},whileInView:{opacity:1},viewport:{once:!0},transition:{duration:.8},className:"mb-16",children:[n.jsx("h2",{className:"text-4xl md:text-5xl font-light mb-4 text-gray-900 dark:text-gray-100 tracking-tight",children:"Services"}),n.jsx("p",{className:"text-gray-500 dark:text-gray-400 font-light",children:"Tailored detailing for every vehicle"})]}),n.jsx("div",{className:"space-y-px bg-gray-200 dark:bg-gray-800",children:a.slice(0,8).map((l,c)=>n.jsx(q.div,{initial:{opacity:0},whileInView:{opacity:1},viewport:{once:!0},transition:{duration:.6,delay:c*.05},children:n.jsx("div",{className:"bg-white dark:bg-gray-950 p-8 md:p-10 hover:bg-gray-50 dark:hover:bg-gray-900 transition-colors",children:n.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-xl md:text-2xl font-light mb-2 text-gray-900 dark:text-gray-100",children:l.name}),n.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 font-light leading-relaxed max-w-2xl",children:l.overview})]}),n.jsx("div",{className:"md:text-right",children:n.jsx("p",{className:"text-lg text-gray-900 dark:text-gray-100 font-light",children:l.priceRange})})]})})},l.id))}),n.jsx("div",{className:"text-center mt-12",children:n.jsx(_,{size:"lg",variant:"outline",className:"border-gray-300 dark:border-gray-700 text-gray-900 dark:text-gray-100 hover:bg-gray-50 dark:hover:bg-gray-800 font-light tracking-wide",asChild:!0,children:n.jsx(St,{href:"/schedule",children:"View All Services"})})})]}),n.jsx("section",{className:"py-20 border-t border-gray-200 dark:border-gray-800",children:n.jsx(q.div,{initial:{opacity:0},whileInView:{opacity:1},viewport:{once:!0},transition:{duration:.8},children:n.jsx(Bu,{})})})]}),n.jsx("footer",{className:"border-t border-gray-200 dark:border-gray-800 bg-white dark:bg-gray-950 mt-20",children:n.jsxs("div",{className:"max-w-5xl mx-auto px-6 md:px-12 py-16",children:[n.jsxs("div",{className:"grid md:grid-cols-3 gap-12 mb-12",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-light text-lg mb-4 text-gray-900 dark:text-gray-100 tracking-wide",children:"Clean Machine"}),n.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 font-light leading-relaxed",children:"Premium mobile auto detailing service"})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-light text-lg mb-4 text-gray-900 dark:text-gray-100",children:"Navigation"}),n.jsxs("div",{className:"flex flex-col gap-3",children:[n.jsx(St,{href:"/schedule",className:"text-sm text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-gray-100 transition-colors font-light",children:"Book Appointment"}),n.jsx(St,{href:"/careers",className:"text-sm text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-gray-100 transition-colors font-light",children:"Careers"}),n.jsx(St,{href:"/showcase",className:"text-sm text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-gray-100 transition-colors font-light",children:"Investor Showcase"})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-light text-lg mb-4 text-gray-900 dark:text-gray-100",children:"Contact"}),n.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 font-light mb-2",children:(s==null?void 0:s.phoneNumber)||"918-856-5304"}),n.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 font-light",children:"Tulsa, Oklahoma"})]})]}),n.jsx("div",{className:"text-center pt-12 border-t border-gray-200 dark:border-gray-800",children:n.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 font-light",children:" 2025 Clean Machine Auto Detail. All rights reserved."})})]})})]})}const nLe=()=>{var d,u;const[e,t]=p.useState("main"),r=be({queryKey:["/api/services"]}),s=be({queryKey:["/api/addon-services"]}),a=r.isLoading||s.isLoading,i=r.error||s.error,o=((d=r.data)==null?void 0:d.services)||[],l=((u=s.data)==null?void 0:u.addOns)||[],c=e==="main"?o:l;return a?n.jsxs("div",{className:"w-full py-8",children:[n.jsxs("div",{className:"flex gap-3 mb-8 justify-center",children:[n.jsx("div",{className:"h-10 w-32 bg-white/5 rounded-lg animate-pulse"}),n.jsx("div",{className:"h-10 w-32 bg-white/5 rounded-lg animate-pulse"})]}),n.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6",children:[1,2,3,4,5,6].map(f=>n.jsx("div",{className:"bg-white/5 rounded-xl h-64 animate-pulse backdrop-blur-sm"},f))})]}):i?n.jsxs("div",{className:"w-full py-12 text-center",children:[n.jsx("p",{className:"text-red-400 mb-4",children:"Unable to load services. Please try again."}),n.jsx(_,{variant:"outline",onClick:()=>{ze.invalidateQueries({queryKey:["/api/services"]}),ze.invalidateQueries({queryKey:["/api/addon-services"]})},"data-testid":"button-retry-services",children:"Retry"})]}):n.jsxs("div",{className:"w-full",children:[n.jsxs("div",{className:"flex gap-3 mb-8 justify-center flex-wrap px-4",children:[n.jsxs(_,{variant:e==="main"?"default":"ghost",onClick:()=>t("main"),"data-testid":"button-tab-main-services",className:`
            px-6 py-2 rounded-full font-medium transition-all duration-300
            ${e==="main"?"bg-gradient-to-r from-blue-500 to-purple-600 text-white shadow-lg shadow-blue-500/30 scale-105":"text-blue-200 hover:text-white hover:bg-white/10"}
          `,children:[n.jsx(ln,{className:"w-4 h-4 mr-2"}),"Main Services"]}),n.jsxs(_,{variant:e==="addon"?"default":"ghost",onClick:()=>t("addon"),"data-testid":"button-tab-addon-services",className:`
            px-6 py-2 rounded-full font-medium transition-all duration-300
            ${e==="addon"?"bg-gradient-to-r from-blue-500 to-purple-600 text-white shadow-lg shadow-blue-500/30 scale-105":"text-blue-200 hover:text-white hover:bg-white/10"}
          `,children:[n.jsx(ln,{className:"w-4 h-4 mr-2"}),"Add-ons"]})]}),n.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4 md:gap-6 px-2 sm:px-0 auto-rows-fr",children:c.map((f,h)=>{const m=f.name.toLowerCase().replace(/\s+/g,"-");return n.jsx(q.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.3,delay:h*.05,ease:[.22,1,.36,1]},whileHover:{y:-8,transition:{duration:.2,ease:"easeOut"}},className:"group min-w-0","data-testid":`service-card-${m}`,children:n.jsxs(O,{className:`
                h-full flex flex-col
                bg-gradient-to-br from-white/[0.07] to-white/[0.03]
                border border-white/10
                backdrop-blur-xl
                hover:border-blue-400/50
                hover:shadow-2xl hover:shadow-blue-500/20
                transition-all duration-300
                overflow-hidden
                relative
              `,children:[n.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500/0 to-purple-600/0 group-hover:from-blue-500/5 group-hover:to-purple-600/5 transition-all duration-500 pointer-events-none"}),n.jsxs("div",{className:"relative z-10 flex flex-col h-full",children:[n.jsxs(ee,{className:"pb-3 space-y-2",children:[n.jsx(ge,{variant:"outline",className:"w-fit border-blue-400/30 text-blue-300 text-[10px] sm:text-xs px-2 py-0.5",children:e==="main"?"Package":"Add-on"}),n.jsx(te,{className:"text-sm sm:text-base md:text-lg text-white font-bold leading-tight line-clamp-2 group-hover:text-blue-300 transition-colors",children:f.name}),n.jsx("p",{className:"text-xs sm:text-sm md:text-base font-semibold bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent",children:f.priceRange})]}),n.jsxs(H,{className:"flex-grow pb-3 space-y-2",children:[n.jsx("p",{className:"text-xs sm:text-sm text-gray-300 line-clamp-3 leading-relaxed",children:f.overview}),e==="main"&&"duration"in f&&f.duration&&n.jsxs("div",{className:"flex items-center gap-2 text-xs text-blue-300/80 pt-2 border-t border-white/5",children:[n.jsx(Rt,{className:"w-3 h-3"}),n.jsx("span",{children:f.duration})]})]}),n.jsx(sl,{className:"pt-0",children:n.jsx(_,{asChild:!0,size:"sm",className:`
                        w-full 
                        bg-gradient-to-r from-blue-500 to-purple-600 
                        hover:from-blue-600 hover:to-purple-700
                        text-white text-xs sm:text-sm
                        shadow-lg shadow-blue-500/20
                        border-0
                        group/btn
                        transition-all duration-300
                      `,"data-testid":`button-book-${m}`,children:n.jsxs(St,{href:`/chat?service=${encodeURIComponent(f.name)}&action=schedule`,className:"flex items-center justify-center gap-2",children:[n.jsx("span",{children:"Book Now"}),n.jsx(Gc,{className:"w-3 h-3 sm:w-4 sm:h-4 group-hover/btn:translate-x-1 transition-transform"})]})})})]})]})},`${e}-${m}`)})}),c.length===0&&n.jsx("div",{className:"text-center py-16 text-gray-400",children:n.jsxs("p",{children:["No ",e==="main"?"services":"add-ons"," available at this time."]})})]})};function rLe({content:e}){const t=p.useRef(null),{scrollYProgress:r}=s1({target:t,offset:["start start","end start"]}),s=tM(r,{stiffness:100,damping:30,restDelta:.001}),a=Ra(s,[0,1],["0%","30%"]),i=Ra(s,[0,.5],[1,0]);return p.useEffect(()=>{if(e){document.title=e.metaTitle;let o=document.querySelector('meta[name="description"]');o||(o=document.createElement("meta"),o.setAttribute("name","description"),document.head.appendChild(o)),o.setAttribute("content",e.metaDescription)}},[e]),n.jsxs("div",{className:"min-h-screen bg-white dark:bg-black text-gray-900 dark:text-white overflow-hidden",children:[n.jsxs("div",{className:"fixed inset-0 z-0",children:[n.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-gray-50 via-blue-50/20 to-purple-50/20 dark:from-gray-950 dark:via-blue-950/20 dark:to-purple-950/20"}),n.jsx(q.div,{className:"absolute top-0 right-0 w-[800px] h-[800px] rounded-full opacity-20",style:{background:"conic-gradient(from 0deg, #3b82f6, #8b5cf6, #3b82f6)",filter:"blur(120px)",willChange:"transform"},animate:{rotate:360,scale:[1,1.1,1]},transition:{duration:20,repeat:1/0,ease:"linear"}}),n.jsx(q.div,{className:"absolute bottom-0 left-0 w-[600px] h-[600px] rounded-full opacity-15",style:{background:"conic-gradient(from 180deg, #8b5cf6, #3b82f6, #8b5cf6)",filter:"blur(100px)",willChange:"transform"},animate:{rotate:-360,scale:[1,1.15,1]},transition:{duration:25,repeat:1/0,ease:"linear"}}),n.jsx("div",{className:"absolute inset-0 opacity-[0.015]",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg viewBox='0 0 400 400' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' /%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' /%3E%3C/svg%3E")`,backgroundRepeat:"repeat"}})]}),n.jsx("header",{className:"fixed top-0 left-0 right-0 z-50",children:n.jsxs("nav",{className:"flex justify-between items-center max-w-7xl mx-auto px-6 py-4",children:[n.jsx(q.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.6},className:"text-xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 dark:from-blue-400 dark:to-purple-400 bg-clip-text text-transparent",children:"CLEAN MACHINE"}),n.jsx(q.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.6},children:n.jsx(_,{variant:"ghost",size:"sm",className:"text-blue-700 dark:text-blue-100 hover:bg-blue-100 dark:hover:bg-white/10 backdrop-blur-sm transition-all duration-300",asChild:!0,children:n.jsx(St,{href:"/login","data-testid":"button-login",children:"Dashboard"})})})]})}),n.jsxs("section",{ref:t,className:"relative min-h-screen flex items-center justify-center pt-20 pb-10 px-4 overflow-hidden",children:[n.jsx(q.div,{className:"max-w-7xl mx-auto w-full",style:{y:a,opacity:i},children:n.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 items-center",children:[n.jsxs("div",{className:"space-y-8 z-10",children:[n.jsxs(q.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2},children:[n.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-gradient-to-r from-blue-500/10 to-purple-500/10 border border-blue-400/30 dark:border-blue-400/20 backdrop-blur-sm mb-6",children:[n.jsx(ln,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"}),n.jsx("span",{className:"text-sm text-blue-800 dark:text-blue-300",children:"AI-Powered Auto Detailing"})]}),n.jsxs("h1",{className:"text-4xl sm:text-5xl lg:text-6xl xl:text-7xl font-black leading-tight",children:[n.jsx("span",{className:"bg-gradient-to-r from-gray-900 via-blue-800 to-gray-900 dark:from-white dark:via-blue-100 dark:to-white bg-clip-text text-transparent",children:"Premium Detail,"}),n.jsx("br",{}),n.jsx("span",{className:"bg-gradient-to-r from-blue-600 via-purple-600 to-blue-600 dark:from-blue-400 dark:via-purple-400 dark:to-blue-400 bg-clip-text text-transparent animate-gradient-x",children:"Zero Hassle"})]}),n.jsx("p",{className:"text-lg sm:text-xl text-gray-700 dark:text-gray-300 leading-relaxed max-w-xl",children:(e==null?void 0:e.aboutText)||"Book instantly with AI, schedule visually, or call anytime. Professional auto detailing right in your driveway."})]}),n.jsxs(q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},className:"flex flex-col sm:flex-row gap-4",children:[n.jsx(_,{size:"lg",className:`
                    group relative overflow-hidden
                    bg-gradient-to-r from-blue-500 to-purple-600
                    hover:from-blue-600 hover:to-purple-700
                    text-white font-bold
                    px-8 py-6 text-lg
                    shadow-2xl shadow-blue-500/30
                    border-0
                    transition-all duration-300
                  `,asChild:!0,"data-testid":"button-hero-ai-chat",children:n.jsxs(St,{href:(e==null?void 0:e.heroCtaLink)||"/chat",className:"flex items-center gap-3",children:[n.jsx(on,{className:"w-5 h-5"}),n.jsx("span",{children:(e==null?void 0:e.heroCtaText)||"Chat with AI"}),n.jsx(Gc,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"}),n.jsx("div",{className:"absolute inset-0 -translate-x-full group-hover:translate-x-full transition-transform duration-1000 bg-gradient-to-r from-transparent via-white/20 to-transparent"})]})}),n.jsx(_,{size:"lg",variant:"outline",className:`
                    group
                    border-2 border-blue-500 dark:border-blue-400/50 
                    hover:border-blue-600 dark:hover:border-blue-400
                    bg-blue-50 dark:bg-white/5 hover:bg-blue-100 dark:hover:bg-white/10
                    backdrop-blur-sm
                    text-gray-900 dark:text-white font-semibold
                    px-8 py-6 text-lg
                    transition-all duration-300
                  `,asChild:!0,"data-testid":"button-hero-visual-scheduler",children:n.jsxs(St,{href:"/schedule",className:"flex items-center gap-3",children:[n.jsx(Ql,{className:"w-5 h-5"}),n.jsx("span",{children:"Visual Scheduler"}),n.jsx(Gc,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"})]})})]}),n.jsxs(q.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.8,delay:.6},className:"flex flex-wrap items-center gap-6 pt-4",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"flex -space-x-2",children:[1,2,3,4].map(o=>n.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-blue-400 to-purple-600 border-2 border-white dark:border-black"},o))}),n.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"1,200+ Happy Customers"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Qr,{className:"w-5 h-5 text-yellow-500 dark:text-yellow-400 fill-yellow-500 dark:fill-yellow-400"}),n.jsx("span",{className:"text-sm font-semibold text-gray-900 dark:text-white",children:"4.9/5.0"}),n.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"on Google"})]})]})]}),n.jsx(q.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.8,delay:.3},className:"grid grid-cols-2 gap-4 lg:gap-6",children:[{icon:on,label:"AI Assistant",desc:"24/7 Instant Booking"},{icon:na,label:"Same Day",desc:"Service Available"},{icon:zn,label:"Insured",desc:"100% Protected"},{icon:Ql,label:"Flexible",desc:"You Pick the Time"}].map((o,l)=>n.jsxs(q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.5+l*.1},whileHover:{scale:1.05,rotateZ:l%2===0?2:-2,transition:{duration:.2}},className:`
                    group p-6 rounded-2xl
                    bg-gradient-to-br from-blue-50 to-purple-50 dark:from-white/[0.07] dark:to-white/[0.03]
                    border border-blue-200 dark:border-white/10
                    hover:border-blue-500 dark:hover:border-blue-400/50
                    backdrop-blur-xl
                    cursor-pointer
                    transition-all duration-300
                  `,children:[n.jsx(o.icon,{className:"w-8 h-8 text-blue-600 dark:text-blue-400 mb-3 group-hover:scale-110 transition-transform"}),n.jsx("h3",{className:"font-bold text-gray-900 dark:text-white mb-1",children:o.label}),n.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:o.desc})]},o.label))})]})}),n.jsx(q.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:1,duration:1},className:"absolute bottom-8 left-1/2 -translate-x-1/2",children:n.jsx(q.div,{animate:{y:[0,10,0]},transition:{duration:2,repeat:1/0},className:"w-6 h-10 rounded-full border-2 border-gray-400 dark:border-white/20 flex items-start justify-center p-2",children:n.jsx("div",{className:"w-1 h-2 bg-gray-500 dark:bg-white/50 rounded-full"})})})]}),n.jsx("section",{className:"relative z-10 py-20 px-4",children:n.jsxs("div",{className:"max-w-7xl mx-auto",children:[n.jsxs(q.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0,margin:"-100px"},transition:{duration:.8},className:"text-center mb-16",children:[n.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-gradient-to-r from-blue-500/10 to-purple-500/10 border border-blue-400/30 dark:border-blue-400/20 backdrop-blur-sm mb-6",children:[n.jsx(ln,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"}),n.jsx("span",{className:"text-sm text-blue-800 dark:text-blue-300",children:"Our Services"})]}),n.jsx("h2",{className:"text-3xl sm:text-4xl lg:text-5xl font-black mb-4",children:n.jsx("span",{className:"bg-gradient-to-r from-gray-900 via-blue-800 to-gray-900 dark:from-white dark:via-blue-100 dark:to-white bg-clip-text text-transparent",children:(e==null?void 0:e.servicesHeading)||"Choose Your Detail"})}),(e==null?void 0:e.servicesSubheading)&&n.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-400 max-w-2xl mx-auto",children:e.servicesSubheading})]}),n.jsx(q.div,{initial:{opacity:0,y:40},whileInView:{opacity:1,y:0},viewport:{once:!0,margin:"-100px"},transition:{duration:.8,delay:.2},children:n.jsx(nLe,{})})]})}),n.jsx("section",{className:"relative z-10 py-20 px-4",children:n.jsxs("div",{className:"max-w-7xl mx-auto",children:[n.jsx(q.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0,margin:"-100px"},transition:{duration:.8},className:"text-center mb-16",children:n.jsx("h2",{className:"text-3xl sm:text-4xl lg:text-5xl font-black mb-4",children:n.jsx("span",{className:"bg-gradient-to-r from-gray-900 via-blue-800 to-gray-900 dark:from-white dark:via-blue-100 dark:to-white bg-clip-text text-transparent",children:"What Customers Say"})})}),n.jsx(Bu,{})]})}),n.jsx("section",{className:"relative z-10 py-16 px-4",children:n.jsx("div",{className:"max-w-4xl mx-auto",children:n.jsxs(q.div,{initial:{opacity:0,scale:.95},whileInView:{opacity:1,scale:1},viewport:{once:!0},transition:{duration:.6},className:`
              p-8 sm:p-12 rounded-3xl
              bg-gradient-to-br from-blue-50 to-purple-50 dark:from-blue-500/10 dark:to-purple-500/10
              border border-blue-300 dark:border-blue-400/20
              backdrop-blur-xl
              text-center
            `,children:[n.jsx("h3",{className:"text-2xl sm:text-3xl font-bold mb-4",children:n.jsx("span",{className:"bg-gradient-to-r from-blue-600 to-purple-600 dark:from-blue-400 dark:to-purple-400 bg-clip-text text-transparent",children:"Ready to Transform Your Ride?"})}),n.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-8 max-w-xl mx-auto",children:"Book in 60 seconds with our AI assistant, or call us directly for personalized service."}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[n.jsx(_,{size:"lg",className:`
                  bg-gradient-to-r from-blue-500 to-purple-600
                  hover:from-blue-600 hover:to-purple-700
                  text-white font-bold
                  px-8 py-6
                  shadow-2xl shadow-blue-500/30
                  border-0
                `,asChild:!0,"data-testid":"button-cta-chat",children:n.jsxs(St,{href:"/chat",className:"flex items-center gap-2",children:[n.jsx(on,{className:"w-5 h-5"}),"Chat Now"]})}),n.jsx(_,{size:"lg",className:`
                  bg-green-600 hover:bg-green-700
                  text-white font-bold
                  px-8 py-6
                  shadow-2xl shadow-green-500/30
                  border-0
                `,asChild:!0,"data-testid":"button-cta-call",children:n.jsxs("a",{href:"tel:+19188565304",className:"flex items-center gap-2",children:[n.jsx(bt,{className:"w-5 h-5"}),"(918) 856-5304"]})})]})]})})}),n.jsx("footer",{className:"relative z-10 border-t border-gray-200 dark:border-white/10 py-12 px-4 mt-20",children:n.jsxs("div",{className:"max-w-7xl mx-auto text-center text-gray-600 dark:text-gray-400 text-sm",children:[n.jsx("p",{children:" 2024 Clean Machine Auto Detail. All rights reserved."}),n.jsxs("div",{className:"flex gap-6 justify-center mt-4",children:[n.jsx(St,{href:"/privacy-policy",className:"hover:text-gray-900 dark:hover:text-white transition-colors",children:"Privacy Policy"}),n.jsx(St,{href:"/careers",className:"hover:text-gray-900 dark:hover:text-white transition-colors",children:"Careers"})]})]})})]})}const sLe={current:Aae,luminous_concierge:J9e,dynamic_spotlight:Z9e,prestige_grid:X9e,night_drive_neon:eLe,executive_minimal:tLe,quantum_concierge:rLe};function aLe(){return n.jsxs(q.div,{className:"min-h-screen bg-gradient-to-b from-gray-900 via-blue-950/10 to-black text-white overflow-hidden relative",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},children:[n.jsx("div",{className:"absolute inset-0 z-0",children:n.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-900/20 via-blue-900/30 to-indigo-950/20 animate-gradient-slow"})}),n.jsxs("div",{className:"absolute inset-0 z-0 overflow-hidden",children:[n.jsx("div",{className:"absolute top-[20%] left-[10%] w-96 h-96 bg-blue-500/5 rounded-full filter blur-3xl animate-pulse-slow"}),n.jsx("div",{className:"absolute bottom-[10%] right-[20%] w-64 h-64 bg-blue-600/5 rounded-full filter blur-3xl animate-pulse-slow",style:{animationDelay:"1s"}})]}),n.jsxs("div",{className:"relative z-10 max-w-7xl mx-auto px-4 md:px-8",children:[n.jsx("div",{className:"mb-2 pt-16",children:n.jsx(Tae,{})}),n.jsxs("div",{className:"py-6 text-center space-y-8",children:[n.jsxs("div",{className:"flex flex-col items-center gap-3",children:[n.jsx("div",{className:"h-6 w-3/4 max-w-3xl bg-blue-100/10 rounded-lg animate-pulse"}),n.jsx("div",{className:"h-6 w-2/3 max-w-2xl bg-blue-100/10 rounded-lg animate-pulse",style:{animationDelay:"0.1s"}})]}),n.jsxs("div",{className:"flex flex-col items-center gap-4 pt-4",children:[n.jsx("div",{className:"h-14 w-64 bg-blue-600/20 rounded-lg animate-pulse",style:{animationDelay:"0.2s"}}),n.jsx("div",{className:"h-12 w-48 bg-green-600/20 rounded-lg animate-pulse",style:{animationDelay:"0.3s"}})]}),n.jsx("div",{className:"grid grid-cols-2 gap-3 w-full max-w-sm mx-auto pt-4",children:[0,1,2,3].map(e=>n.jsx("div",{className:"h-12 bg-blue-600/10 rounded-md animate-pulse",style:{animationDelay:`${.4+e*.1}s`}},e))})]}),n.jsx(q.div,{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2",initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.5,delay:.2},children:n.jsxs("div",{className:"flex flex-col items-center gap-4",children:[n.jsx("div",{className:"w-16 h-16 border-4 border-blue-500/30 border-t-blue-500 rounded-full animate-spin"}),n.jsx("p",{className:"text-blue-200/60 text-sm font-light",children:"Preparing your experience..."})]})})]})]})}function iLe(){var a;const{data:e,isLoading:t}=be({queryKey:["/api/homepage-content"],staleTime:6e4,refetchOnWindowFocus:!1}),r=((a=e==null?void 0:e.content)==null?void 0:a.templateId)||"current",s=sLe[r]||Aae;return n.jsx($s,{mode:"wait",children:t?n.jsx(aLe,{},"loading"):n.jsx(q.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,ease:"easeOut"},children:n.jsx(s,{content:e==null?void 0:e.content})},"content")})}function NO(){const{toast:e}=Ee(),[,t]=zt(),[r,s]=p.useState({});p.useEffect(()=>{const i=new URLSearchParams(window.location.search),o=i.get("name"),l=i.get("phone"),c=i.get("service"),d=i.get("ref");(o||l||c||d)&&s({name:o||void 0,phone:l||void 0,service:c||void 0,referralCode:d||void 0})},[]);const a=i=>{e({title:"Appointment Scheduled",description:`Your ${i.service} appointment has been confirmed for ${i.formattedTime}.`}),setTimeout(()=>{t("/")},3e3)};return n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 via-blue-950/10 to-black text-white overflow-hidden relative",children:[n.jsxs("div",{className:"absolute inset-0 z-0 overflow-hidden",children:[n.jsx("div",{className:"absolute top-[10%] left-[15%] w-96 h-96 bg-blue-500/5 rounded-full filter blur-3xl"}),n.jsx("div",{className:"absolute bottom-[20%] right-[10%] w-80 h-80 bg-blue-600/5 rounded-full filter blur-3xl"})]}),n.jsx("div",{className:"container mx-auto py-12 px-4 relative z-10",children:n.jsx(q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,ease:"easeOut"},className:"w-full max-w-4xl mx-auto",children:n.jsxs("div",{className:"bg-gray-900/40 backdrop-blur-xl border border-blue-500/20 rounded-2xl shadow-2xl shadow-blue-500/10 overflow-hidden",children:[n.jsxs("div",{className:"p-8 pb-4 text-center",children:[n.jsx(q.h1,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1},className:"text-3xl md:text-4xl font-bold mb-3 bg-clip-text text-transparent bg-gradient-to-r from-blue-200 via-blue-400 to-blue-200",children:"Schedule Your Detailing Service"}),n.jsx(q.p,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},className:"text-blue-100/70 text-sm md:text-base max-w-2xl mx-auto",children:"Complete the form below to book your premium auto detailing service"})]}),n.jsxs(q.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.3},className:"px-6 pb-6",children:[(r.name||r.phone)&&n.jsx("div",{className:"max-w-md mx-auto mb-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:n.jsxs("p",{className:"text-sm text-blue-800",children:[" ",n.jsx("strong",{children:"Rescheduling due to weather?"})," Your information has been pre-filled. Just select a new date!"]})}),n.jsx(b4,{initialName:r.name,initialPhone:r.phone,initialService:r.service,initialReferralCode:r.referralCode,onClose:()=>t("/"),onSuccess:a})]})]})})})]})}function Eae({fallbackPath:e="/dashboard",label:t="Back",className:r="",variant:s="ghost"}){const[,a]=zt(),i=()=>{typeof window<"u"&&window.history.length>1?window.history.back():a(e)};return n.jsxs(_,{variant:s,size:"sm",onClick:i,className:r,"data-testid":"button-back-navigation",children:[n.jsx(pi,{className:"h-4 w-4 mr-2"}),t]})}function oLe(){var rt;const{toast:e}=Ee(),[,t]=zt(),[r,s]=p.useState("lookup"),[a,i]=p.useState(""),[o,l]=p.useState(!1),[c,d]=p.useState(null),[u,f]=p.useState({name:!0,phone:!0,email:!0,address:!0}),[h,m]=p.useState([]),[g,x]=p.useState([]),[y,v]=p.useState(!0),[b,w]=p.useState(""),[N,j]=p.useState(void 0),[S,C]=p.useState(""),[k,M]=p.useState([]),[A,P]=p.useState({}),[T,I]=p.useState(!1),[L,R]=p.useState(!1),[G,$]=p.useState(!1),[D,W]=p.useState(""),[E,F]=p.useState(null),[B,Z]=p.useState(null),[ne,Y]=p.useState(!1),me=p.useRef({}),{data:pe}=be({queryKey:["/api/services"]}),Me=(pe==null?void 0:pe.services)||[];p.useEffect(()=>{const Se=new URLSearchParams(window.location.search).get("ref");if(Se){const J=Se.toUpperCase();W(J),re(J)}},[]),p.useEffect(()=>{const Se=new URLSearchParams(window.location.search).get("quote");Se&&(async()=>{try{const ye=await(await fetch(`/api/quote-approval/booking-data/${Se}`)).json();if(!ye.success||!ye.data){e({title:"Booking Link Issue",description:ye.error||"This booking link is no longer valid. Please contact us to schedule.",variant:"destructive"}),s("lookup"),i(""),d(null);return}const Re=ye.data;d({found:!0,name:Re.customerName,phone:Re.phone,email:Re.email||"",address:"",loyaltyPoints:0,lastAppointment:null,vehicleInfo:""}),i(Re.phone),w(Re.damageType),v(!1),x([{make:"",model:"",year:""}]),m([!0]),s("confirmation"),e({title:"Quote Data Loaded",description:`Ready to schedule your ${Re.damageType} service`})}catch(oe){console.error("Error loading quote data:",oe),e({title:"Error Loading Quote",description:"Could not load quote data. Please try again or contact us.",variant:"destructive"})}})()},[]);const re=async z=>{var J,oe;const Se=z.trim().toUpperCase();if(!Se){F(null),Z(null);return}if(me.current[Se]){const ye=me.current[Se];F(ye.isValid),Z(ye.reward||null);return}Y(!0),F(null),Z(null);try{const Re=await(await fetch("/api/referral/validate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:Se})})).json(),He={isValid:Re.success&&((J=Re.data)==null?void 0:J.valid),reward:(oe=Re.data)==null?void 0:oe.reward,error:Re.success?void 0:Re.message};me.current[Se]=He,F(He.isValid),Z(He.reward||null)}catch(ye){console.error("Referral validation error:",ye),e({title:"Network Error",description:"Could not validate referral code. Please try again.",variant:"destructive"})}finally{Y(!1)}},de=async z=>{var Se;if(z.preventDefault(),!a.trim()){e({title:"Error",description:"Please enter a phone number or email address",variant:"destructive"});return}l(!0);try{const oe=await(await fetch(`/api/quick-booking/lookup?contact=${encodeURIComponent(a)}`)).json();if(oe.success&&oe.customer){d(oe.customer);let ye=[];if(oe.customer.vehicleInfo)try{const Re=typeof oe.customer.vehicleInfo=="string"?JSON.parse(oe.customer.vehicleInfo):oe.customer.vehicleInfo;ye=Array.isArray(Re)?Re:[Re]}catch(Re){console.error("Error parsing vehicle info:",Re)}x(ye.length>0?ye:[{make:"",model:"",year:""}]),m(ye.map(()=>!0)),(Se=oe.customer.lastAppointment)!=null&&Se.service&&(w(oe.customer.lastAppointment.service),v(!0)),s("confirmation"),e({title:"Customer Found!",description:`Welcome back, ${oe.customer.name}!`})}else e({title:"Not Found",description:"No booking history found. Would you like to book as a new customer?"}),setTimeout(()=>{t("/schedule")},2e3)}catch(J){console.error("Lookup error:",J),e({title:"Error",description:"Failed to lookup customer. Please try again.",variant:"destructive"})}finally{l(!1)}},he=async z=>{I(!0);try{const J=await(await fetch(`/api/available-slots?service=${encodeURIComponent(z)}`)).json();if(J.success&&J.slots&&Array.isArray(J.slots)){const oe=J.slots,ye=[],Re={},He=new Set;oe.forEach(Fe=>{const st=zm(Fe),Bt=Ie(st,"yyyy-MM-dd");Re[Bt]||(Re[Bt]=[]),Re[Bt].push(Fe),He.has(Bt)||(He.add(Bt),ye.push(st))}),ye.sort((Fe,st)=>Fe.getTime()-st.getTime()),M(ye),P(Re)}else M([]),P({}),e({title:"No Slots Available",description:"No time slots available. Please contact us directly.",variant:"destructive"})}catch(Se){console.error("Error fetching time slots:",Se),e({title:"Error",description:"Failed to load available time slots.",variant:"destructive"})}finally{I(!1)}},ce=()=>{var Se;const z=y&&((Se=c==null?void 0:c.lastAppointment)!=null&&Se.service)?c.lastAppointment.service:b;if(!z){e({title:"Error",description:"Please select a service",variant:"destructive"});return}if(!h.some(J=>J)){e({title:"Error",description:"Please confirm at least one vehicle",variant:"destructive"});return}w(z),he(z),s("datetime")},Be=z=>{j(z),C("")},le=()=>{if(!N)return[];const z=Ie(N,"yyyy-MM-dd");return A[z]||[]},$e=()=>{x(z=>[...z,{make:"",model:"",year:""}]),m(z=>[...z,!1])},et=(z,Se,J)=>{x(oe=>{const ye=[...oe];return ye[z]={...ye[z],[Se]:J},ye})},_e=z=>{m(Se=>{const J=[...Se];return J[z]=!J[z],J})},ot=async()=>{var Se;if(!c||!b||!S){e({title:"Error",description:"Please complete all required fields",variant:"destructive"});return}const z=g.filter((J,oe)=>h[oe]);if(z.length===0){e({title:"Error",description:"Please confirm at least one vehicle",variant:"destructive"});return}R(!0);try{const J=Me.find(He=>He.name===b),oe=J?Me.indexOf(J)+1:1,Re=await(await Ne("POST","/api/quick-booking/submit",{name:c.name,phone:c.phone,email:c.email,address:c.address,service:b,serviceId:oe,addOns:((Se=c.lastAppointment)==null?void 0:Se.addOns)||[],vehicles:z,scheduledTime:S,notes:"",smsConsent:G,referralCode:E?D:void 0})).json();if(Re.success)s("success"),e({title:"Success!",description:"Your appointment has been booked!"}),setTimeout(()=>{t("/")},3e3);else throw new Error(Re.message||"Failed to book appointment")}catch(J){console.error("Booking error:",J),e({title:"Error",description:"Failed to book appointment. Please try again.",variant:"destructive"})}finally{R(!1)}};return n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 via-blue-950/10 to-black text-white overflow-hidden relative",children:[n.jsxs("div",{className:"absolute inset-0 z-0 overflow-hidden",children:[n.jsx("div",{className:"absolute top-[10%] left-[15%] w-96 h-96 bg-blue-500/5 rounded-full filter blur-3xl"}),n.jsx("div",{className:"absolute bottom-[20%] right-[10%] w-80 h-80 bg-blue-600/5 rounded-full filter blur-3xl"})]}),n.jsx("div",{className:"container mx-auto py-12 px-4 relative z-10",children:n.jsx(q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,ease:"easeOut"},className:"w-full max-w-4xl mx-auto",children:n.jsxs("div",{className:"bg-gray-900/40 backdrop-blur-xl border border-blue-500/20 rounded-2xl shadow-2xl shadow-blue-500/10 overflow-hidden",children:[n.jsxs("div",{className:"p-8 pb-4 text-center relative",children:[n.jsx("div",{className:"absolute left-4 top-4",children:n.jsx(Eae,{fallbackPath:"/",variant:"ghost",className:"text-blue-400 hover:text-blue-300 hover:bg-blue-500/10"})}),n.jsx(q.h1,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1},className:"text-3xl md:text-4xl font-bold mb-3 bg-clip-text text-transparent bg-gradient-to-r from-blue-200 via-blue-400 to-blue-200",children:"Quick Booking"}),n.jsx(q.p,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},className:"text-blue-100/70 text-sm md:text-base max-w-2xl mx-auto",children:"Fast booking for returning customers"})]}),n.jsx("div",{className:"px-6 pb-6",children:n.jsxs($s,{mode:"wait",children:[r==="lookup"&&n.jsx(q.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},children:n.jsxs(O,{className:"bg-gray-800/50 border-blue-500/30",children:[n.jsx(ee,{children:n.jsxs(te,{className:"text-blue-100 flex items-center gap-2",children:[n.jsx(Ga,{className:"w-5 h-5"}),"Find Your Account"]})}),n.jsx(H,{children:n.jsxs("form",{onSubmit:de,className:"space-y-6",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(U,{htmlFor:"contact",className:"text-blue-100",children:"Phone Number or Email"}),n.jsx(se,{id:"contact","data-testid":"input-contact",type:"text",placeholder:"Enter phone or email",value:a,onChange:z=>i(z.target.value),className:"bg-gray-900/50 border-blue-500/30 text-white placeholder:text-gray-500",disabled:o})]}),n.jsx(_,{type:"submit","data-testid":"button-lookup",className:"w-full bg-gradient-to-r from-blue-600 to-blue-500 hover:from-blue-500 hover:to-blue-400",disabled:o,children:o?n.jsxs(n.Fragment,{children:[n.jsx(nt,{className:"mr-2 h-4 w-4 animate-spin"}),"Looking up..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Ga,{className:"mr-2 h-4 w-4"}),"Find My Account"]})}),n.jsx("div",{className:"text-center pt-4",children:n.jsx(_,{type:"button",variant:"link","data-testid":"link-new-customer",onClick:()=>t("/schedule"),className:"text-blue-400 hover:text-blue-300",children:"New customer? Book here"})})]})})]})},"lookup"),r==="confirmation"&&c&&n.jsxs(q.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},className:"space-y-6",children:[c.loyaltyPoints>0&&n.jsx(O,{className:"bg-gradient-to-r from-amber-900/20 to-yellow-900/20 border-amber-500/30",children:n.jsx(H,{className:"p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Yr,{className:"w-8 h-8 text-amber-400"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-amber-200/70",children:"Loyalty Points"}),n.jsx("p",{className:"text-2xl font-bold text-amber-400","data-testid":"text-loyalty-points",children:c.loyaltyPoints})]})]}),n.jsx(ge,{variant:"secondary",className:"bg-amber-500/20 text-amber-300",children:"VIP Customer"})]})})}),n.jsxs(O,{className:"bg-gray-800/50 border-blue-500/30",children:[n.jsx(ee,{children:n.jsx(te,{className:"text-blue-100",children:"Confirm Your Information"})}),n.jsxs(H,{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(as,{id:"confirm-name","data-testid":"checkbox-name",checked:u.name,onCheckedChange:z=>f({...u,name:z}),className:"border-blue-400"}),n.jsx("div",{className:"flex-1",children:n.jsxs(U,{htmlFor:"confirm-name",className:"text-blue-100 cursor-pointer",children:[n.jsx("span",{className:"text-sm text-blue-300/70",children:"Name"}),n.jsx("p",{className:"font-medium","data-testid":"text-customer-name",children:c.name})]})})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(as,{id:"confirm-phone","data-testid":"checkbox-phone",checked:u.phone,onCheckedChange:z=>f({...u,phone:z}),className:"border-blue-400"}),n.jsx("div",{className:"flex-1",children:n.jsxs(U,{htmlFor:"confirm-phone",className:"text-blue-100 cursor-pointer flex items-center gap-2",children:[n.jsx(bt,{className:"w-4 h-4 text-blue-400"}),n.jsxs("div",{children:[n.jsx("span",{className:"text-sm text-blue-300/70",children:"Phone"}),n.jsx("p",{className:"font-medium","data-testid":"text-customer-phone",children:c.phone})]})]})})]}),c.email&&n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(as,{id:"confirm-email","data-testid":"checkbox-email",checked:u.email,onCheckedChange:z=>f({...u,email:z}),className:"border-blue-400"}),n.jsx("div",{className:"flex-1",children:n.jsxs(U,{htmlFor:"confirm-email",className:"text-blue-100 cursor-pointer flex items-center gap-2",children:[n.jsx(Cr,{className:"w-4 h-4 text-blue-400"}),n.jsxs("div",{children:[n.jsx("span",{className:"text-sm text-blue-300/70",children:"Email"}),n.jsx("p",{className:"font-medium","data-testid":"text-customer-email",children:c.email})]})]})})]}),c.address&&n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(as,{id:"confirm-address","data-testid":"checkbox-address",checked:u.address,onCheckedChange:z=>f({...u,address:z}),className:"border-blue-400"}),n.jsx("div",{className:"flex-1",children:n.jsxs(U,{htmlFor:"confirm-address",className:"text-blue-100 cursor-pointer flex items-center gap-2",children:[n.jsx(zr,{className:"w-4 h-4 text-blue-400"}),n.jsxs("div",{children:[n.jsx("span",{className:"text-sm text-blue-300/70",children:"Address"}),n.jsx("p",{className:"font-medium","data-testid":"text-customer-address",children:c.address})]})]})})]})]})]}),n.jsxs(O,{className:"bg-gray-800/50 border-blue-500/30",children:[n.jsx(ee,{children:n.jsxs(te,{className:"text-blue-100 flex items-center gap-2",children:[n.jsx(Ys,{className:"w-5 h-5"}),"Your Vehicles"]})}),n.jsxs(H,{className:"space-y-4",children:[g.map((z,Se)=>n.jsxs("div",{className:"flex items-start gap-3 p-4 bg-gray-900/50 rounded-lg border border-blue-500/20",children:[n.jsx(as,{id:`vehicle-${Se}`,"data-testid":`checkbox-vehicle-${Se}`,checked:h[Se]||!1,onCheckedChange:()=>_e(Se),className:"border-blue-400 mt-1"}),n.jsxs("div",{className:"flex-1 space-y-2",children:[n.jsxs(U,{htmlFor:`vehicle-${Se}`,className:"text-blue-100 cursor-pointer",children:["Vehicle ",Se+1]}),n.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[n.jsx(se,{placeholder:"Make","data-testid":`input-vehicle-make-${Se}`,value:z.make,onChange:J=>et(Se,"make",J.target.value),className:"bg-gray-800/50 border-blue-500/30 text-white text-sm"}),n.jsx(se,{placeholder:"Model","data-testid":`input-vehicle-model-${Se}`,value:z.model,onChange:J=>et(Se,"model",J.target.value),className:"bg-gray-800/50 border-blue-500/30 text-white text-sm"}),n.jsx(se,{placeholder:"Year","data-testid":`input-vehicle-year-${Se}`,value:z.year,onChange:J=>et(Se,"year",J.target.value),className:"bg-gray-800/50 border-blue-500/30 text-white text-sm"})]})]})]},Se)),n.jsxs(_,{type:"button",variant:"outline","data-testid":"button-add-vehicle",onClick:$e,className:"w-full border-blue-500/30 text-blue-400 hover:bg-blue-500/10",children:[n.jsx(Un,{className:"w-4 h-4 mr-2"}),"Add Another Vehicle"]})]})]}),n.jsxs(O,{className:"bg-gray-800/50 border-blue-500/30",children:[n.jsx(ee,{children:n.jsx(te,{className:"text-blue-100",children:"Select Service"})}),n.jsxs(H,{className:"space-y-4",children:[((rt=c.lastAppointment)==null?void 0:rt.service)&&n.jsx("div",{className:"space-y-2",children:n.jsxs("div",{className:"flex items-center gap-3 p-4 bg-blue-900/20 rounded-lg border border-blue-500/30",children:[n.jsx(as,{id:"book-usual","data-testid":"checkbox-book-usual",checked:y,onCheckedChange:z=>v(z),className:"border-blue-400"}),n.jsx(U,{htmlFor:"book-usual",className:"text-blue-100 cursor-pointer flex-1",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:"Book The Usual"}),n.jsx("p",{className:"text-sm text-blue-300/70","data-testid":"text-last-service",children:c.lastAppointment.service})]}),n.jsx(ge,{variant:"secondary",className:"bg-blue-500/20 text-blue-300",children:"Last Service"})]})})]})}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(U,{className:"text-blue-100",children:"Or Choose Different Service"}),n.jsxs(Pt,{value:y?"":b,onValueChange:z=>{w(z),v(!1)},disabled:y,children:[n.jsx(kt,{"data-testid":"select-service",className:"bg-gray-900/50 border-blue-500/30 text-white",children:n.jsx(Tt,{placeholder:"Select a service"})}),n.jsx(Mt,{className:"bg-gray-800 border-blue-500/30",children:Me.map(z=>n.jsxs(ve,{value:z.name,"data-testid":`option-service-${z.name}`,children:[z.name," - ",z.priceRange]},z.name))})]})]})]})]}),n.jsxs("div",{className:"flex gap-4",children:[n.jsx(_,{variant:"outline","data-testid":"button-back-to-lookup",onClick:()=>s("lookup"),className:"flex-1 border-blue-500/30 text-blue-400 hover:bg-blue-500/10",children:"Back"}),n.jsx(_,{"data-testid":"button-continue-to-datetime",onClick:ce,className:"flex-1 bg-gradient-to-r from-blue-600 to-blue-500 hover:from-blue-500 hover:to-blue-400",children:"Continue to Date & Time"})]})]},"confirmation"),r==="datetime"&&n.jsx(q.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},className:"space-y-6",children:T?n.jsx(O,{className:"bg-gray-800/50 border-blue-500/30",children:n.jsx(H,{className:"p-12",children:n.jsxs("div",{className:"flex flex-col items-center justify-center gap-4",children:[n.jsx(nt,{className:"w-8 h-8 animate-spin text-blue-400"}),n.jsx("p",{className:"text-blue-100",children:"Loading available time slots..."})]})})}):n.jsxs(n.Fragment,{children:[n.jsxs(O,{className:"bg-gray-800/50 border-blue-500/30",children:[n.jsx(ee,{children:n.jsxs(te,{className:"text-blue-100 flex items-center gap-2",children:[n.jsx(Dt,{className:"w-5 h-5"}),"Select Date"]})}),n.jsx(H,{children:n.jsx(oh,{mode:"single",selected:N,onSelect:Be,disabled:z=>!k.some(Se=>Ie(Se,"yyyy-MM-dd")===Ie(z,"yyyy-MM-dd")),className:"rounded-md border border-blue-500/30 bg-gray-900/50","data-testid":"calendar-date-picker"})})]}),N&&n.jsxs(O,{className:"bg-gray-800/50 border-blue-500/30",children:[n.jsx(ee,{children:n.jsxs(te,{className:"text-blue-100 flex items-center gap-2",children:[n.jsx(Rt,{className:"w-5 h-5"}),"Select Time"]})}),n.jsx(H,{children:n.jsxs(Pt,{value:S,onValueChange:C,children:[n.jsx(kt,{"data-testid":"select-time",className:"bg-gray-900/50 border-blue-500/30 text-white",children:n.jsx(Tt,{placeholder:"Choose a time slot"})}),n.jsx(Mt,{className:"bg-gray-800 border-blue-500/30",children:le().map(z=>n.jsx(ve,{value:z,"data-testid":`option-time-${z}`,children:Ie(zm(z),"h:mm a")},z))})]})})]}),S&&n.jsx(O,{className:"bg-gray-800/50 border-blue-500/30",children:n.jsxs(H,{className:"p-4 space-y-3",children:[n.jsx("p",{className:"text-blue-300 text-sm",children:"We will never share your information with anyone for any reason."}),n.jsx(EA,{checked:G,onCheckedChange:$})]})}),S&&n.jsxs(O,{className:"bg-gray-800/50 border-blue-500/30",children:[n.jsx(ee,{children:n.jsxs(te,{className:"text-blue-100 flex items-center gap-2 text-base",children:[n.jsx(jr,{className:"w-5 h-5"}),"Referral Code (Optional)"]})}),n.jsxs(H,{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx(se,{"data-testid":"input-referral-code",type:"text",placeholder:"ENTER REFERRAL CODE",value:D,onChange:z=>{const Se=z.target.value.toUpperCase();W(Se),F(null),Z(null)},onBlur:z=>{const Se=z.target.value.trim().toUpperCase();Se&&re(Se)},className:"bg-gray-900/50 border-blue-500/30 text-white placeholder:text-gray-500 uppercase"}),ne&&n.jsxs("p",{className:"text-sm text-blue-400 mt-2 flex items-center gap-2",children:[n.jsx(nt,{className:"w-3 h-3 animate-spin"}),"Validating code..."]}),!ne&&E===!1&&n.jsx("p",{className:"text-sm text-red-400 mt-2",children:"Invalid or expired referral code"})]}),!ne&&E&&B&&n.jsx(q.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-green-900/20 border border-green-500/30 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(nn,{className:"w-5 h-5 text-green-400 flex-shrink-0 mt-0.5"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-medium text-green-100",children:" Valid code! You'll receive:"}),n.jsx("p",{className:"text-base font-semibold text-green-300 mt-1",children:B.description}),B.expiryDays&&n.jsxs("p",{className:"text-xs text-green-200/70 mt-1",children:["Expires in ",B.expiryDays," days"]}),B.notes&&n.jsx("p",{className:"text-xs text-green-200/70 mt-1",children:B.notes})]})]})})]})]}),n.jsxs("div",{className:"flex gap-4",children:[n.jsx(_,{variant:"outline","data-testid":"button-back-to-confirmation",onClick:()=>s("confirmation"),className:"flex-1 border-blue-500/30 text-blue-400 hover:bg-blue-500/10",children:"Back"}),n.jsx(_,{"data-testid":"button-submit-booking",onClick:ot,disabled:!S||!G||L,className:"flex-1 bg-gradient-to-r from-blue-600 to-blue-500 hover:from-blue-500 hover:to-blue-400",children:L?n.jsxs(n.Fragment,{children:[n.jsx(nt,{className:"mr-2 h-4 w-4 animate-spin"}),"Booking..."]}):"Confirm Booking"})]})]})},"datetime"),r==="success"&&n.jsx(q.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5},children:n.jsx(O,{className:"bg-gradient-to-br from-green-900/20 to-blue-900/20 border-green-500/30",children:n.jsx(H,{className:"p-12",children:n.jsxs("div",{className:"flex flex-col items-center justify-center gap-6 text-center",children:[n.jsx(q.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring",stiffness:200},children:n.jsx(nn,{className:"w-20 h-20 text-green-400"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-3xl font-bold text-green-100 mb-2","data-testid":"text-success-title",children:"Booking Confirmed!"}),n.jsx("p",{className:"text-green-200/70",children:"Your appointment has been successfully scheduled."}),N&&S&&n.jsxs("p",{className:"text-lg text-green-100 mt-4","data-testid":"text-appointment-details",children:[Ie(N,"EEEE, MMMM d, yyyy")," at ",Ie(zm(S),"h:mm a")]})]}),n.jsx("p",{className:"text-sm text-green-300/70",children:"Redirecting to home page..."})]})})})},"success")]})})]})})})]})}const lLe=P0("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Ln=p.forwardRef(({className:e,variant:t,...r},s)=>n.jsx("div",{ref:s,role:"alert",className:Le(lLe({variant:t}),e),...r}));Ln.displayName="Alert";const d2=p.forwardRef(({className:e,...t},r)=>n.jsx("h5",{ref:r,className:Le("mb-1 font-medium leading-none tracking-tight",e),...t}));d2.displayName="AlertTitle";const Dn=p.forwardRef(({className:e,...t},r)=>n.jsx("div",{ref:r,className:Le("text-sm [&_p]:leading-relaxed",e),...t}));Dn.displayName="AlertDescription";const cLe=({currentPoints:e=0,value:t,showValue:r=!0,isAnimated:s=!0,className:a=""})=>{const i=t!==void 0,[o,l]=p.useState(0),[c,d]=p.useState(0),u=[{name:"Bronze",threshold:0,color:"#CD7F32",icon:n.jsx(Yr,{className:"h-5 w-5 text-[#CD7F32]"})},{name:"Silver",threshold:1e3,color:"#C0C0C0",icon:n.jsx(Yr,{className:"h-5 w-5 text-[#C0C0C0]"})},{name:"Gold",threshold:2500,color:"#FFD700",icon:n.jsx(Yr,{className:"h-5 w-5 text-[#FFD700]"})},{name:"Platinum",threshold:3e3,color:"#E5E4E2",icon:n.jsx(Yr,{className:"h-5 w-5 text-[#E5E4E2]"})}],f=()=>{for(let y=u.length-1;y>=0;y--)if(e>=u[y].threshold)return u[y];return u[0]},h=()=>{const y=u.findIndex(v=>v.name===f().name);return y<u.length-1?u[y+1]:null},m=f(),g=h(),x=y=>{if(!g)return 100;const v=(y-m.threshold)/(g.threshold-m.threshold)*100;return Math.min(Math.max(v,0),100)};return p.useEffect(()=>{if(i){const j=typeof t=="number"?Math.max(0,Math.min(100,t)):0;d(j);return}if(!s){l(e),d(x(e));return}const y=1e3,v=Date.now(),b=o,w=e,N=()=>{const j=Date.now()-v,S=Math.min(j/y,1),C=1-Math.pow(1-S,3),k=Math.round(b+(w-b)*C);l(k),d(x(k)),S<1&&requestAnimationFrame(N)};requestAnimationFrame(N)},[e,t,s,i]),n.jsxs("div",{className:`${a}`,children:[!i&&n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-1 font-semibold",children:[n.jsx(Qr,{className:"h-4 w-4 text-yellow-500"}),n.jsx(q.span,{initial:s?{opacity:.5,scale:.8}:!1,animate:{opacity:1,scale:1},className:"text-lg",children:o.toLocaleString()},e),n.jsx("span",{className:"text-sm text-gray-500",children:"points"})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx("span",{className:"text-sm font-medium mr-2",children:m.name}),m.icon]})]}),n.jsxs("div",{className:"relative pt-1",children:[n.jsxs("div",{className:"flex mb-1 items-center justify-between",children:[n.jsx("div",{className:"text-xs text-gray-500",children:g?n.jsxs(n.Fragment,{children:["Next tier: ",g.name," (",(g.threshold-e).toLocaleString()," points needed)"]}):n.jsx(n.Fragment,{children:"Maximum tier reached!"})}),r&&n.jsx("div",{className:"text-right",children:n.jsxs("span",{className:"text-xs font-semibold inline-block text-blue-600",children:[Math.round(c),"%"]})})]}),n.jsxs("div",{className:"relative w-full h-4 bg-gray-200 rounded-full overflow-hidden",children:[n.jsx(q.div,{initial:{width:"0%"},animate:{width:isNaN(c)?"0%":`${c}%`},transition:{duration:.7,ease:"easeOut"},className:"h-full rounded-full",style:{background:`linear-gradient(90deg, ${m.color} 0%, ${g?g.color:m.color} 100%)`,boxShadow:"0 1px 3px rgba(0,0,0,0.1) inset"}}),n.jsx("div",{className:"absolute top-0 left-0 w-full h-full pointer-events-none",children:u.map((y,v)=>{if(v===0)return null;const b=Math.min((y.threshold-u[0].threshold)/(u[u.length-1].threshold-u[0].threshold)*100,100);return n.jsx("div",{className:"absolute top-0 h-full flex flex-col items-center justify-center",style:{left:`${b}%`},children:n.jsx("div",{className:"h-full w-px bg-white opacity-70"})},y.name)})})]}),n.jsx("div",{className:"flex justify-between mt-1 px-1",children:u.map((y,v)=>v===0||v===u.length-1?n.jsx("div",{className:"flex flex-col items-center",children:n.jsx("span",{className:"text-[10px] text-gray-500",children:y.threshold.toLocaleString()})},y.name):n.jsx("div",{className:"hidden md:flex flex-col items-center",children:n.jsx("span",{className:"text-[10px] text-gray-500",children:y.threshold.toLocaleString()})},y.name))})]})]}),i&&n.jsxs("div",{className:"w-full",children:[n.jsx("div",{className:"relative w-full h-2 bg-gray-200 rounded-full overflow-hidden",children:n.jsx(q.div,{initial:{width:"0%"},animate:{width:isNaN(c)?"0%":`${c}%`},transition:{duration:.7,ease:"easeOut"},className:"h-full rounded-full bg-blue-600"})}),r&&n.jsx("div",{className:"flex justify-end mt-1",children:n.jsxs("span",{className:"text-xs font-semibold text-blue-600",children:[Math.round(c),"%"]})})]})]})},dLe=async()=>{const t={origin:{y:.7},zIndex:9999},s=(await cy(()=>Promise.resolve().then(()=>A0t),void 0)).default;function a(i,o){s({...t,...o,particleCount:Math.floor(200*i)})}a(.25,{spread:26,startVelocity:55}),a(.2,{spread:60}),a(.35,{spread:100,decay:.91,scalar:.8}),a(.1,{spread:120,startVelocity:25,decay:.92,scalar:1.2}),a(.1,{spread:120,startVelocity:45})},uLe=()=>{var D,W,E,F,B;const{toast:e}=Ee(),t=cs(),[r,s]=p.useState("phone"),[a,i]=p.useState(""),[o,l]=p.useState(!1),[c,d]=p.useState(!1),[u,f]=p.useState(null),[h,m]=p.useState(null),[g,x]=p.useState(!1),[y,v]=p.useState(1),[b,w]=p.useState(!1),[N,j]=p.useState(!1),[S,C]=p.useState(""),{data:k}=be({queryKey:["/api/loyalty/rewards"],enabled:!0}),M=((D=k==null?void 0:k.data)==null?void 0:D.reduce((Z,ne)=>{const Y=ne.tier;return Z[Y]||(Z[Y]=[]),Z[Y].push(ne),Z},{}))||{},A=M?Object.keys(M).sort((Z,ne)=>(Z==="tier_500"?500:Z==="tier_1000"?1e3:Z==="tier_2000"?2e3:Z==="tier_3000"?3e3:0)-(ne==="tier_500"?500:ne==="tier_1000"?1e3:ne==="tier_2000"?2e3:ne==="tier_3000"?3e3:0)):[],P=async()=>{var Z;if(!a.trim()){e({title:"Required field",description:"Please enter a phone number or email address",variant:"destructive"});return}l(!0),d(!0);try{const ne=r==="phone"?`/api/loyalty/points/phone/${encodeURIComponent(a)}`:`/api/loyalty/points/email/${encodeURIComponent(a)}`,Y=await fetch(ne);if(!Y.ok)throw new Error("Failed to fetch loyalty points data");const me=await Y.json();me.success&&me.data?(f(me.data),((Z=me.data.loyaltyPoints)==null?void 0:Z.points)>=500&&dLe()):f(null)}catch(ne){console.error("Error searching for loyalty points:",ne),e({title:"Error",description:"Failed to retrieve loyalty information. Please try again.",variant:"destructive"}),f(null)}finally{l(!1)}},T=je({mutationFn:async({customerId:Z})=>Ne("/api/loyalty/opt-in",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({customerId:Z})}),onSuccess:Z=>{if(e({title:"Success!",description:"You have been enrolled in our loyalty program."}),w(!1),u&&f({...u,loyaltyPoints:Z.data.loyaltyPoints}),a&&r){const ne=r==="phone"?`/api/loyalty/points/phone/${encodeURIComponent(a)}`:`/api/loyalty/points/email/${encodeURIComponent(a)}`;t.invalidateQueries({queryKey:[ne]})}},onError:Z=>{e({title:"Enrollment failed",description:Z.message||"Failed to enroll in loyalty program",variant:"destructive"})}}),I=je({mutationFn:async({rewardId:Z,quantity:ne})=>{var Y;if(!((Y=u==null?void 0:u.customer)!=null&&Y.id))throw new Error("Customer ID is required");return Ne("/api/loyalty/redeem",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({customerId:u.customer.id,rewardServiceId:Z,quantity:ne})})},onSuccess:Z=>{if(e({title:"Success!",description:Z.data.message||"Reward redeemed successfully!"}),x(!1),u&&Z.data.updatedPoints&&f({...u,loyaltyPoints:{...u.loyaltyPoints,points:Z.data.updatedPoints.points}}),h&&(C(h.name),j(!0)),a&&r){const ne=r==="phone"?`/api/loyalty/points/phone/${encodeURIComponent(a)}`:`/api/loyalty/points/email/${encodeURIComponent(a)}`;t.invalidateQueries({queryKey:[ne]})}},onError:Z=>{e({title:"Redemption failed",description:Z.message||"Failed to redeem points",variant:"destructive"})}}),L=Z=>{if(!(u!=null&&u.loyaltyPoints)){e({title:"Not enrolled",description:"Please enroll in the loyalty program first",variant:"destructive"});return}if(u.loyaltyPoints.points<Z.pointCost){e({title:"Not enough points",description:`You need ${Z.pointCost} points to redeem this reward, but you only have ${u.loyaltyPoints.points} points.`,variant:"destructive"});return}m(Z),v(1),x(!0)},R=()=>{if(!(u!=null&&u.loyaltyPoints)||typeof u.loyaltyPoints.points!="number")return{progress:0,nextTier:1e3,pointsNeeded:1e3};const Z=Number(u.loyaltyPoints.points)||0,ne=[500,1e3,2e3,3e3];let Y=null;for(const re of ne)if(Z<re){Y=re;break}if(!Y)return{progress:100,nextTier:3e3,pointsNeeded:0};const me=ne[ne.indexOf(Y)-1]||0,pe=(Z-me)/(Y-me)*100,Me=Y-Z;return{progress:Math.min(Math.max(isNaN(pe)?0:pe,0),100),nextTier:Y,pointsNeeded:Me}},G=()=>{if(!(u!=null&&u.loyaltyPoints))return"Not Enrolled";const Z=u.loyaltyPoints.points;return Z>=3e3?"Platinum":Z>=2e3?"Gold":Z>=1e3?"Silver":Z>=500?"Bronze":"Standard"},$=()=>{var Z;if(!((Z=u==null?void 0:u.customer)!=null&&Z.id)){e({title:"Error",description:"Customer information is required. Please search for a customer first.",variant:"destructive"});return}T.mutate({customerId:u.customer.id})};return n.jsxs("div",{className:"container py-6 max-w-4xl",children:[n.jsxs("div",{className:"flex items-center mb-6",children:[n.jsx(St,{href:"/",children:n.jsxs(_,{variant:"ghost",size:"sm",className:"gap-1",children:[n.jsx(Lu,{className:"h-4 w-4"}),"Back"]})}),n.jsx("h1",{className:"text-3xl font-bold text-center flex-1 mr-10",children:"My Loyalty Points"})]}),n.jsxs(O,{className:"mb-8",children:[n.jsxs(ee,{children:[n.jsx(te,{className:"text-xl",children:"Check Your Loyalty Points"}),n.jsx(ke,{children:"Enter your phone number or email address to see your loyalty points and available rewards."})]}),n.jsx(H,{children:n.jsxs(js,{defaultValue:"phone",className:"space-y-4",onValueChange:Z=>s(Z),children:[n.jsxs(ds,{className:"grid grid-cols-2 w-64",children:[n.jsx(dt,{value:"phone",children:"Phone"}),n.jsx(dt,{value:"email",children:"Email"})]}),n.jsxs("div",{className:"flex space-x-2",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx(U,{htmlFor:"searchValue",className:"sr-only",children:r==="phone"?"Phone Number":"Email Address"}),n.jsx(se,{id:"searchValue",placeholder:r==="phone"?"Enter phone number (e.g. 123-456-7890)":"Enter email address",value:a,onChange:Z=>{if(r==="phone"){const ne=Z.target.value.replace(/\D/g,"");let Y=ne;ne.length>3&&(Y=ne.slice(0,3)+"-"+ne.slice(3)),ne.length>6&&(Y=Y.slice(0,7)+"-"+Y.slice(7)),Y.length<=12&&i(Y)}else i(Z.target.value)},onKeyDown:Z=>Z.key==="Enter"&&P()})]}),n.jsxs(_,{onClick:P,disabled:o,children:[o?"Searching...":"Search",n.jsx(Ga,{className:"ml-2 h-4 w-4"})]})]})]})})]}),n.jsxs(Ln,{className:"mb-6 border-blue-200 dark:border-blue-800 bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-950/20 dark:to-purple-950/20",children:[n.jsx(jr,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"}),n.jsxs(d2,{className:"flex items-center gap-2",children:["Welcome Back Campaign",n.jsx("span",{className:"text-xs bg-blue-600 text-white px-2 py-0.5 rounded-full",children:"New"})]}),n.jsxs(Dn,{className:"mt-2",children:[n.jsx("p",{className:"text-sm mb-3",children:"Reward your customers with bonus loyalty points! Configure and send VIP or Regular customer campaigns."}),n.jsx(St,{href:"/settings",children:n.jsx(_,{variant:"outline",size:"sm",className:"border-blue-300 hover:bg-blue-100 dark:hover:bg-blue-900",children:"Configure Welcome Back Campaign "})})]})]}),c&&n.jsx("div",{className:"space-y-6",children:u?n.jsxs("div",{className:"space-y-6",children:[n.jsxs(O,{className:"overflow-hidden",children:[n.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-800 text-white p-4",children:n.jsxs("h2",{className:"text-2xl font-bold",children:["Hello, ",u.customer.name,"!"]})}),n.jsx(H,{className:"pt-6",children:u.loyaltyPoints?n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsxs("h3",{className:"text-xl font-semibold",children:[u.loyaltyPoints&&typeof u.loyaltyPoints.points=="number"?u.loyaltyPoints.points:0," Points"]}),n.jsxs("p",{className:"text-gray-600",children:["Current Tier: ",G()]})]}),n.jsx("div",{className:"bg-blue-100 text-blue-800 py-1 px-3 rounded-full text-sm font-medium",children:"Points valid for 2 years"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{children:"Progress to next tier"}),n.jsxs("span",{children:[R().nextTier," Points"]})]}),n.jsxs("div",{className:"flex justify-between text-xs text-gray-600 mb-1",children:[n.jsxs("span",{children:[u.loyaltyPoints.points," points"]}),n.jsxs("span",{children:[R().pointsNeeded," points needed"]})]}),n.jsx(cLe,{value:R().progress,showValue:!1})]}),n.jsxs("div",{className:"border rounded-md p-4",children:[n.jsx("h4",{className:"font-medium mb-2",children:"Recent Transactions"}),u.transactions&&u.transactions.length>0?n.jsx("ul",{className:"space-y-2 text-sm",children:u.transactions.map(Z=>n.jsxs("li",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsxs("span",{className:Z.transactionType==="earn"?"text-green-600":Z.transactionType==="redeem"?"text-blue-600":"text-red-600",children:[Z.transactionType==="earn"?"+":"",Z.amount," points"]}),n.jsx("p",{className:"text-gray-600 text-xs",children:Z.description})]}),n.jsx("div",{className:"text-xs text-gray-500",children:new Date(Z.transactionDate).toLocaleDateString()})]},Z.id))}):n.jsx("p",{className:"text-gray-500 text-sm",children:"No transactions yet."})]})]}):n.jsxs(Ln,{className:"mb-4",children:[n.jsx(Wt,{className:"h-4 w-4"}),n.jsxs(Dn,{children:["You are not currently enrolled in our loyalty program.",n.jsx(_,{variant:"outline",size:"sm",className:"ml-4",onClick:()=>w(!0),children:"Enroll Now"})]})]})})]}),u.loyaltyPoints&&n.jsxs("div",{className:"space-y-6",children:[n.jsx("h2",{className:"text-2xl font-bold text-center text-blue-700",children:"Available Loyalty Offers"}),A.map(Z=>n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-xl font-semibold text-blue-600",children:Z==="tier_500"?"500 Points Offers":Z==="tier_1000"?"1,000 Points Offers":Z==="tier_2000"?"2,000 Points Offers":Z==="tier_3000"?"3,000 Points Offers":"Loyalty Offers"}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:M[Z].map(ne=>{var Y;return n.jsxs(O,{className:`overflow-hidden transition-all duration-300 ${u.loyaltyPoints&&u.loyaltyPoints.points>=ne.pointCost?"bg-gradient-to-br from-white to-blue-50 shadow-md border-blue-200 hover:shadow-lg hover:-translate-y-1":"bg-gray-50 border-gray-200 opacity-70"}`,children:[n.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-blue-800 py-2 px-4 text-white text-sm font-semibold",children:[ne.pointCost," Points"]}),n.jsx(ee,{className:"pb-2",children:n.jsxs(te,{className:"text-xl flex items-center",children:[n.jsx(jr,{className:"h-5 w-5 mr-2 text-blue-600"}),ne.name]})}),n.jsx(H,{className:"text-sm text-gray-600",children:n.jsx("p",{children:ne.description})}),n.jsx(sl,{children:n.jsx(_,{className:"w-full bg-blue-600 hover:bg-blue-700",disabled:!u.loyaltyPoints||u.loyaltyPoints.points<ne.pointCost,onClick:()=>L(ne),children:u.loyaltyPoints&&u.loyaltyPoints.points>=ne.pointCost?"Redeem Offer":`Need ${ne.pointCost-(((Y=u.loyaltyPoints)==null?void 0:Y.points)||0)} More Points`})})]},ne.id)})})]},Z))]})]}):n.jsxs(Ln,{variant:"destructive",className:"mb-6",children:[n.jsx(Wt,{className:"h-4 w-4"}),n.jsx(d2,{children:"No Results Found"}),n.jsx(Dn,{children:"We couldn't find a customer with that information. Please check your entry and try again."})]})}),n.jsxs(O,{className:"mb-8 bg-white shadow-md border-blue-100",children:[n.jsx(ee,{children:n.jsx(te,{className:"text-2xl text-center text-blue-700",children:"About Our Loyalty Program"})}),n.jsxs(H,{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs("h3",{className:"text-lg font-semibold text-blue-600 flex items-center",children:[n.jsx(na,{className:"h-5 w-5 mr-2"}),"How It Works"]}),n.jsx("p",{children:"Our loyalty program rewards you for every dollar you spend on our detailing services. For each dollar spent, you earn 1 point in your loyalty account. Points can be redeemed for free services when you reach specific reward tiers."})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("h3",{className:"text-lg font-semibold text-blue-600 flex items-center",children:[n.jsx(Yr,{className:"h-5 w-5 mr-2"}),"Reward Tiers"]}),n.jsxs("ul",{className:"space-y-2",children:[n.jsxs("li",{className:"flex items-start",children:[n.jsx(Mr,{className:"h-5 w-5 mr-2 text-green-500 flex-shrink-0 mt-0.5"}),n.jsxs("span",{children:[n.jsx("strong",{children:"500 Points:"})," Free Leather/Upholstery Protector or Engine Bay Cleaning"]})]}),n.jsxs("li",{className:"flex items-start",children:[n.jsx(Mr,{className:"h-5 w-5 mr-2 text-green-500 flex-shrink-0 mt-0.5"}),n.jsxs("span",{children:[n.jsx("strong",{children:"1,000 Points:"})," Free Maintenance Detail"]})]}),n.jsxs("li",{className:"flex items-start",children:[n.jsx(Mr,{className:"h-5 w-5 mr-2 text-green-500 flex-shrink-0 mt-0.5"}),n.jsxs("span",{children:[n.jsx("strong",{children:"2,000 Points:"})," Free Paint Enhancement"]})]}),n.jsxs("li",{className:"flex items-start",children:[n.jsx(Mr,{className:"h-5 w-5 mr-2 text-green-500 flex-shrink-0 mt-0.5"}),n.jsxs("span",{children:[n.jsx("strong",{children:"3,000 Points:"})," Free 1 Year Ceramic Coating"]})]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("h3",{className:"text-lg font-semibold text-blue-600 flex items-center",children:[n.jsx(Qr,{className:"h-5 w-5 mr-2"}),"Important Details"]}),n.jsxs("ul",{className:"space-y-2",children:[n.jsxs("li",{className:"flex items-start",children:[n.jsx(Mr,{className:"h-5 w-5 mr-2 text-green-500 flex-shrink-0 mt-0.5"}),n.jsx("span",{children:"Points are valid for 2 years from the date they are earned."})]}),n.jsxs("li",{className:"flex items-start",children:[n.jsx(Mr,{className:"h-5 w-5 mr-2 text-green-500 flex-shrink-0 mt-0.5"}),n.jsx("span",{children:"You can redeem up to 3 reward services at once if you have enough points."})]}),n.jsxs("li",{className:"flex items-start",children:[n.jsx(Mr,{className:"h-5 w-5 mr-2 text-green-500 flex-shrink-0 mt-0.5"}),n.jsx("span",{children:"Reward services must be scheduled within 90 days of redemption."})]}),n.jsxs("li",{className:"flex items-start",children:[n.jsx(Mr,{className:"h-5 w-5 mr-2 text-green-500 flex-shrink-0 mt-0.5"}),n.jsx("span",{children:"You will receive an email notification when you become eligible for a reward."})]})]})]})]})]}),n.jsx(At,{open:b,onOpenChange:w,children:n.jsxs(_t,{children:[n.jsxs($t,{children:[n.jsx(Et,{className:"text-xl",children:"Join Our Loyalty Program"}),n.jsx(an,{children:"Earn points for every dollar you spend and redeem them for free services."})]}),n.jsxs("div",{className:"space-y-4 py-2",children:[n.jsxs(Ln,{className:"bg-blue-50 border-blue-200",children:[n.jsx(Yr,{className:"h-5 w-5 text-blue-600"}),n.jsx(Dn,{children:"By joining our loyalty program, you'll start earning 1 point for every dollar spent on our services."})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Benefits include:"}),n.jsxs("ul",{className:"text-sm space-y-1",children:[n.jsxs("li",{className:"flex items-center",children:[n.jsx(Mr,{className:"h-4 w-4 mr-2 text-green-500"}),"Free services at reward tiers"]}),n.jsxs("li",{className:"flex items-center",children:[n.jsx(Mr,{className:"h-4 w-4 mr-2 text-green-500"}),"Early access to promotions"]}),n.jsxs("li",{className:"flex items-center",children:[n.jsx(Mr,{className:"h-4 w-4 mr-2 text-green-500"}),"Birthday rewards"]})]})]})]}),n.jsxs(Sn,{children:[n.jsx(_,{variant:"outline",onClick:()=>w(!1),children:"Cancel"}),n.jsx(_,{onClick:$,disabled:T.isPending,children:T.isPending?"Enrolling...":"Enroll Now"})]})]})}),n.jsx(At,{open:g,onOpenChange:x,children:n.jsxs(_t,{children:[n.jsxs($t,{children:[n.jsx(Et,{className:"text-xl",children:"Redeem Loyalty Offer"}),n.jsxs(an,{children:["Confirm your redemption for ",h==null?void 0:h.name]})]}),n.jsxs("div",{className:"space-y-4 py-2",children:[n.jsx(Ln,{children:n.jsx(Dn,{children:h==null?void 0:h.description})}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(U,{htmlFor:"quantity",children:"Quantity (up to 3)"}),n.jsxs(Pt,{value:String(y),onValueChange:Z=>v(Number(Z)),children:[n.jsx(kt,{id:"quantity",children:n.jsx(Tt,{placeholder:"Quantity"})}),n.jsxs(Mt,{children:[n.jsx(ve,{value:"1",children:"1"}),n.jsx(ve,{value:"2",disabled:(W=u==null?void 0:u.loyaltyPoints)!=null&&W.points&&h?u.loyaltyPoints.points<h.pointCost*2:!0,children:"2"}),n.jsx(ve,{value:"3",disabled:(E=u==null?void 0:u.loyaltyPoints)!=null&&E.points&&h?u.loyaltyPoints.points<h.pointCost*3:!0,children:"3"})]})]}),n.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:["This will use ",h?h.pointCost*y:0," points from your balance."]})]}),n.jsxs(Ln,{className:"bg-yellow-50 border-yellow-200",children:[n.jsx(Wt,{className:"h-5 w-5 text-yellow-600"}),n.jsx(Dn,{className:"text-yellow-800",children:"Please note: Redeemed offers must be scheduled within 90 days."})]})]}),n.jsxs(Sn,{children:[n.jsx(_,{variant:"outline",onClick:()=>x(!1),children:"Cancel"}),n.jsx(_,{onClick:()=>h&&I.mutate({rewardId:h.id,quantity:y}),disabled:I.isPending,children:I.isPending?"Redeeming...":"Confirm Redemption"})]})]})}),n.jsx(At,{open:N,onOpenChange:j,children:n.jsxs(_t,{className:"max-w-4xl max-h-[90vh] overflow-auto",children:[n.jsxs($t,{children:[n.jsx(Et,{className:"text-xl",children:"Schedule Your Redemption Service"}),n.jsxs(an,{children:["Choose a time to schedule your ",S]})]}),n.jsx(b4,{customerId:(F=u==null?void 0:u.customer)==null?void 0:F.id,customerName:(B=u==null?void 0:u.customer)==null?void 0:B.name,defaultService:S,isRewardRedemption:!0,onAppointmentBooked:()=>{j(!1),e({title:"Appointment Scheduled!",description:"Your redemption service has been scheduled successfully."})}})]})})]})};function fLe(){return n.jsx(St,{href:"/dashboard",children:n.jsxs(_,{className:"fixed bottom-4 left-1/2 transform -translate-x-1/2 z-50 shadow-lg px-6 py-6 rounded-full",size:"lg",children:[n.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"mr-2",children:[n.jsx("rect",{width:"7",height:"9",x:"3",y:"3",rx:"1"}),n.jsx("rect",{width:"7",height:"5",x:"14",y:"3",rx:"1"}),n.jsx("rect",{width:"7",height:"9",x:"14",y:"12",rx:"1"}),n.jsx("rect",{width:"7",height:"5",x:"3",y:"16",rx:"1"})]}),"Dashboard"]})})}const hLe=()=>{const[e,t]=p.useState([]),[r,s]=p.useState(!0),[a,i]=p.useState(null);return Ee(),p.useEffect(()=>{(async()=>{try{s(!0);const l=await fetch("/api/gallery");if(l.ok){const c=await l.json();c.success&&c.photos&&c.photos.length>0?t(c.photos):t([])}else throw new Error("Failed to fetch photos")}catch(l){console.error("Error fetching photos:",l),i("Unable to load gallery photos. Please try again later."),t([])}finally{s(!1)}})()},[]),n.jsx("div",{className:"min-h-screen bg-gradient-to-b from-blue-950 via-black to-blue-950 text-white",children:n.jsxs("div",{className:"container mx-auto px-4 py-12",children:[n.jsxs("div",{className:"mb-8 flex flex-col md:flex-row md:items-start md:justify-between gap-4",children:[n.jsxs("div",{children:[n.jsx(_,{variant:"ghost",className:"text-blue-300 hover:text-blue-100 hover:bg-blue-800/30 mb-2",asChild:!0,"data-testid":"button-back-home",children:n.jsxs(St,{href:"/",children:[n.jsx(Lu,{className:"mr-1 h-4 w-4"}),"Back to Home"]})}),n.jsx("h1",{className:"text-4xl font-bold mb-2 bg-clip-text text-transparent bg-gradient-to-r from-blue-300 to-blue-100",children:"Our Work Gallery"}),n.jsx("p",{className:"text-blue-300",children:"See the difference our premium detailing services make on real client vehicles"})]}),n.jsx("div",{className:"flex flex-col gap-2 md:mt-8",children:n.jsx(_,{variant:"outline",className:"border-blue-500 text-blue-300 hover:bg-blue-950/50",asChild:!0,"data-testid":"button-view-google-photos",children:n.jsxs("a",{href:"https://g.page/r/CQo53O2yXrN8EAE",target:"_blank",rel:"noopener noreferrer",children:[n.jsx($i,{className:"h-4 w-4 mr-2"}),"View More on Google",n.jsx(xa,{className:"h-3 w-3 ml-2"})]})})})]}),r?n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:6}).map((o,l)=>n.jsx(O,{className:"bg-blue-900/20 border-blue-800/50 overflow-hidden",children:n.jsxs(H,{className:"p-0",children:[n.jsx(Lt,{className:"w-full h-64 bg-blue-800/20"}),n.jsxs("div",{className:"p-4",children:[n.jsx(Lt,{className:"w-1/2 h-5 bg-blue-800/20 mb-2"}),n.jsx(Lt,{className:"w-full h-4 bg-blue-800/20"})]})]})},l))}):a?n.jsxs("div",{className:"text-center py-12",children:[n.jsx($i,{className:"h-16 w-16 mx-auto text-blue-400 opacity-50 mb-4"}),n.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Couldn't Load Gallery"}),n.jsx("p",{className:"text-blue-300 mb-6",children:a}),n.jsxs("p",{className:"text-blue-400 italic",children:["We're working on connecting our business photos. In the meantime, please check out our work on the",n.jsxs(_,{variant:"link",className:"text-blue-300 hover:text-blue-100 px-1",onClick:()=>window.open("https://g.page/r/CQo53O2yXrN8EAE","_blank"),children:["Google Business Profile ",n.jsx(xa,{className:"h-3 w-3 inline"})]})]})]}):e.length===0?n.jsxs("div",{className:"text-center py-12",children:[n.jsx($i,{className:"h-16 w-16 mx-auto text-blue-400 opacity-50 mb-4"}),n.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No Photos Available"}),n.jsx("p",{className:"text-blue-300 mb-6",children:"Check back soon to see our latest work"}),n.jsxs("p",{className:"text-blue-400 italic",children:["Meanwhile, you can see our work on our",n.jsxs(_,{variant:"link",className:"text-blue-300 hover:text-blue-100 px-1",onClick:()=>window.open("https://g.page/r/CQo53O2yXrN8EAE","_blank"),children:["Google Business Profile ",n.jsx(xa,{className:"h-3 w-3 inline"})]})]})]}):n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map((o,l)=>n.jsx(q.div,{initial:{opacity:0,y:50,scale:.95},whileInView:{opacity:1,y:0,scale:1},viewport:{once:!0,margin:"-50px"},transition:{duration:.6,delay:l*.08,ease:[.23,1,.32,1]},children:n.jsx(O,{className:"bg-blue-900/20 border-blue-800/50 overflow-hidden h-full group",children:n.jsxs(H,{className:"p-0 relative h-full flex flex-col",children:[n.jsxs("div",{className:"relative aspect-[4/3] overflow-hidden",children:[n.jsx(q.img,{src:o.imageUrl,alt:o.title||`Clean Machine Auto Detail work ${l+1}`,className:"w-full h-full object-cover",whileHover:{scale:1.08},transition:{duration:.4,ease:"easeOut"}}),n.jsx(q.div,{className:"absolute inset-0 bg-gradient-to-t from-blue-950/90 via-blue-950/40 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300",initial:{opacity:0}})]}),(o.title||o.description)&&n.jsxs("div",{className:"p-4 mt-auto",children:[o.title&&n.jsx("p",{className:"text-sm font-semibold text-blue-200",children:o.title}),o.description&&n.jsx("p",{className:"text-xs text-gray-400 mt-1",children:o.description})]})]})})},o.id))})]})})};function mLe(){return n.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 via-blue-950/10 to-black text-white",children:[n.jsx("header",{className:"border-b border-gray-800 bg-gray-900/50 backdrop-blur-sm sticky top-0 z-50",children:n.jsx("div",{className:"max-w-7xl mx-auto px-4 md:px-8 py-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(_,{variant:"ghost",asChild:!0,className:"text-blue-400 hover:text-blue-300 hover:bg-blue-950/50","data-testid":"button-back-home",children:n.jsxs(St,{href:"/",children:[n.jsx(pi,{className:"h-4 w-4 mr-2"}),"Back to Home"]})}),n.jsx(_,{variant:"outline",className:"border-blue-500 text-blue-300 hover:bg-blue-950/50",asChild:!0,"data-testid":"button-leave-review",children:n.jsxs("a",{href:"https://g.page/r/CQo53O2yXrN8EBM/review",target:"_blank",rel:"noopener noreferrer",children:[n.jsx(Qr,{className:"h-4 w-4 mr-2"}),"Leave a Review on Google",n.jsx(xa,{className:"h-3 w-3 ml-2"})]})})]})})}),n.jsx("main",{className:"max-w-7xl mx-auto px-4 md:px-8 py-12",children:n.jsxs(q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[n.jsxs("div",{className:"text-center mb-12",children:[n.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-4 bg-clip-text text-transparent bg-gradient-to-r from-blue-200 via-blue-400 to-blue-200",children:"Customer Reviews"}),n.jsx("p",{className:"text-blue-200/70 text-lg max-w-2xl mx-auto",children:"See what our customers are saying about Clean Machine Auto Detail"})]}),n.jsx(Bu,{placeId:"ChIJVX4B3d2TtocRCjnc7bJevHw"}),n.jsx(q.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.5,duration:.6},className:"mt-16 text-center",children:n.jsxs("div",{className:"bg-gradient-to-r from-blue-900/30 to-blue-950/30 rounded-2xl p-8 max-w-2xl mx-auto border border-blue-800/30",children:[n.jsx("h3",{className:"text-2xl font-bold mb-4 text-blue-100",children:"Ready to Experience Premium Detailing?"}),n.jsx("p",{className:"text-blue-200/70 mb-6",children:"Join hundreds of satisfied customers who trust Clean Machine for their auto detailing needs"}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[n.jsx(_,{size:"lg",className:"bg-blue-600 hover:bg-blue-700",asChild:!0,"data-testid":"button-book-now",children:n.jsx(St,{href:"/chat",children:"Book Your Detail Now"})}),n.jsx(_,{size:"lg",variant:"outline",className:"border-blue-500 text-blue-300 hover:bg-blue-950/50",asChild:!0,"data-testid":"button-view-gallery",children:n.jsx(St,{href:"/gallery",children:"View Our Work"})})]})]})})]})})]})}const Iae=p.createContext(void 0);function pLe({children:e}){const[t,r]=p.useState(()=>{const c=localStorage.getItem("conversationFilter");return c?c==="null"?null:parseInt(c):null}),[s,a]=p.useState(()=>{const c=localStorage.getItem("activeSendLineId");return c?parseInt(c):2}),i=c=>{r(c),localStorage.setItem("conversationFilter",c===null?"null":c.toString())},o=c=>{a(c),localStorage.setItem("activeSendLineId",c.toString())},l=c=>{o(c)};return n.jsx(Iae.Provider,{value:{conversationFilter:t,setConversationFilter:i,activeSendLineId:s,setActiveSendLineId:o,selectedPhoneLineId:s,setSelectedPhoneLineId:l},children:e})}function LE(){const e=p.useContext(Iae);if(e===void 0)throw new Error("usePhoneLine must be used within a PhoneLineProvider");return e}const tc=Object.create(null);tc.open="0";tc.close="1";tc.ping="2";tc.pong="3";tc.message="4";tc.upgrade="5";tc.noop="6";const Iw=Object.create(null);Object.keys(tc).forEach(e=>{Iw[tc[e]]=e});const HM={type:"error",data:"parser error"},Lae=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",Dae=typeof ArrayBuffer=="function",$ae=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,DE=({type:e,data:t},r,s)=>Lae&&t instanceof Blob?r?s(t):SO(t,s):Dae&&(t instanceof ArrayBuffer||$ae(t))?r?s(t):SO(new Blob([t]),s):s(tc[e]+(t||"")),SO=(e,t)=>{const r=new FileReader;return r.onload=function(){const s=r.result.split(",")[1];t("b"+(s||""))},r.readAsDataURL(e)};function CO(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let DC;function gLe(e,t){if(Lae&&e.data instanceof Blob)return e.data.arrayBuffer().then(CO).then(t);if(Dae&&(e.data instanceof ArrayBuffer||$ae(e.data)))return t(CO(e.data));DE(e,!1,r=>{DC||(DC=new TextEncoder),t(DC.encode(r))})}const kO="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lx=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let e=0;e<kO.length;e++)lx[kO.charCodeAt(e)]=e;const xLe=e=>{let t=e.length*.75,r=e.length,s,a=0,i,o,l,c;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);const d=new ArrayBuffer(t),u=new Uint8Array(d);for(s=0;s<r;s+=4)i=lx[e.charCodeAt(s)],o=lx[e.charCodeAt(s+1)],l=lx[e.charCodeAt(s+2)],c=lx[e.charCodeAt(s+3)],u[a++]=i<<2|o>>4,u[a++]=(o&15)<<4|l>>2,u[a++]=(l&3)<<6|c&63;return d},yLe=typeof ArrayBuffer=="function",$E=(e,t)=>{if(typeof e!="string")return{type:"message",data:Oae(e,t)};const r=e.charAt(0);return r==="b"?{type:"message",data:vLe(e.substring(1),t)}:Iw[r]?e.length>1?{type:Iw[r],data:e.substring(1)}:{type:Iw[r]}:HM},vLe=(e,t)=>{if(yLe){const r=xLe(e);return Oae(r,t)}else return{base64:!0,data:e}},Oae=(e,t)=>{switch(t){case"blob":return e instanceof Blob?e:new Blob([e]);case"arraybuffer":default:return e instanceof ArrayBuffer?e:e.buffer}},Rae="",bLe=(e,t)=>{const r=e.length,s=new Array(r);let a=0;e.forEach((i,o)=>{DE(i,!1,l=>{s[o]=l,++a===r&&t(s.join(Rae))})})},wLe=(e,t)=>{const r=e.split(Rae),s=[];for(let a=0;a<r.length;a++){const i=$E(r[a],t);if(s.push(i),i.type==="error")break}return s};function jLe(){return new TransformStream({transform(e,t){gLe(e,r=>{const s=r.length;let a;if(s<126)a=new Uint8Array(1),new DataView(a.buffer).setUint8(0,s);else if(s<65536){a=new Uint8Array(3);const i=new DataView(a.buffer);i.setUint8(0,126),i.setUint16(1,s)}else{a=new Uint8Array(9);const i=new DataView(a.buffer);i.setUint8(0,127),i.setBigUint64(1,BigInt(s))}e.data&&typeof e.data!="string"&&(a[0]|=128),t.enqueue(a),t.enqueue(r)})}})}let $C;function Eb(e){return e.reduce((t,r)=>t+r.length,0)}function Ib(e,t){if(e[0].length===t)return e.shift();const r=new Uint8Array(t);let s=0;for(let a=0;a<t;a++)r[a]=e[0][s++],s===e[0].length&&(e.shift(),s=0);return e.length&&s<e[0].length&&(e[0]=e[0].slice(s)),r}function NLe(e,t){$C||($C=new TextDecoder);const r=[];let s=0,a=-1,i=!1;return new TransformStream({transform(o,l){for(r.push(o);;){if(s===0){if(Eb(r)<1)break;const c=Ib(r,1);i=(c[0]&128)===128,a=c[0]&127,a<126?s=3:a===126?s=1:s=2}else if(s===1){if(Eb(r)<2)break;const c=Ib(r,2);a=new DataView(c.buffer,c.byteOffset,c.length).getUint16(0),s=3}else if(s===2){if(Eb(r)<8)break;const c=Ib(r,8),d=new DataView(c.buffer,c.byteOffset,c.length),u=d.getUint32(0);if(u>Math.pow(2,21)-1){l.enqueue(HM);break}a=u*Math.pow(2,32)+d.getUint32(4),s=3}else{if(Eb(r)<a)break;const c=Ib(r,a);l.enqueue($E(i?c:$C.decode(c),t)),s=0}if(a===0||a>e){l.enqueue(HM);break}}}})}const Fae=4;function ys(e){if(e)return SLe(e)}function SLe(e){for(var t in ys.prototype)e[t]=ys.prototype[t];return e}ys.prototype.on=ys.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this};ys.prototype.once=function(e,t){function r(){this.off(e,r),t.apply(this,arguments)}return r.fn=t,this.on(e,r),this};ys.prototype.off=ys.prototype.removeListener=ys.prototype.removeAllListeners=ys.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var r=this._callbacks["$"+e];if(!r)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var s,a=0;a<r.length;a++)if(s=r[a],s===t||s.fn===t){r.splice(a,1);break}return r.length===0&&delete this._callbacks["$"+e],this};ys.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),r=this._callbacks["$"+e],s=1;s<arguments.length;s++)t[s-1]=arguments[s];if(r){r=r.slice(0);for(var s=0,a=r.length;s<a;++s)r[s].apply(this,t)}return this};ys.prototype.emitReserved=ys.prototype.emit;ys.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};ys.prototype.hasListeners=function(e){return!!this.listeners(e).length};const G4=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,r)=>r(t,0),co=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),CLe="arraybuffer";function zae(e,...t){return t.reduce((r,s)=>(e.hasOwnProperty(s)&&(r[s]=e[s]),r),{})}const kLe=co.setTimeout,MLe=co.clearTimeout;function Y4(e,t){t.useNativeTimers?(e.setTimeoutFn=kLe.bind(co),e.clearTimeoutFn=MLe.bind(co)):(e.setTimeoutFn=co.setTimeout.bind(co),e.clearTimeoutFn=co.clearTimeout.bind(co))}const _Le=1.33;function PLe(e){return typeof e=="string"?TLe(e):Math.ceil((e.byteLength||e.size)*_Le)}function TLe(e){let t=0,r=0;for(let s=0,a=e.length;s<a;s++)t=e.charCodeAt(s),t<128?r+=1:t<2048?r+=2:t<55296||t>=57344?r+=3:(s++,r+=4);return r}function Bae(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function ALe(e){let t="";for(let r in e)e.hasOwnProperty(r)&&(t.length&&(t+="&"),t+=encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t}function ELe(e){let t={},r=e.split("&");for(let s=0,a=r.length;s<a;s++){let i=r[s].split("=");t[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return t}class ILe extends Error{constructor(t,r,s){super(t),this.description=r,this.context=s,this.type="TransportError"}}class OE extends ys{constructor(t){super(),this.writable=!1,Y4(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,r,s){return super.emitReserved("error",new ILe(t,r,s)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const r=$E(t,this.socket.binaryType);this.onPacket(r)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,r={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(r)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const r=ALe(t);return r.length?"?"+r:""}}class LLe extends OE{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const r=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let s=0;this._polling&&(s++,this.once("pollComplete",function(){--s||r()})),this.writable||(s++,this.once("drain",function(){--s||r()}))}else r()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const r=s=>{if(this.readyState==="opening"&&s.type==="open"&&this.onOpen(),s.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(s)};wLe(t,this.socket.binaryType).forEach(r),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,bLe(t,r=>{this.doWrite(r,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",r=this.query||{};return this.opts.timestampRequests!==!1&&(r[this.opts.timestampParam]=Bae()),!this.supportsBinary&&!r.sid&&(r.b64=1),this.createUri(t,r)}}let Uae=!1;try{Uae=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const DLe=Uae;function $Le(){}class OLe extends LLe{constructor(t){if(super(t),typeof location<"u"){const r=location.protocol==="https:";let s=location.port;s||(s=r?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||s!==t.port}}doWrite(t,r){const s=this.request({method:"POST",data:t});s.on("success",r),s.on("error",(a,i)=>{this.onError("xhr post error",a,i)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(r,s)=>{this.onError("xhr poll error",r,s)}),this.pollXhr=t}}let Ym=class Lw extends ys{constructor(t,r,s){super(),this.createRequest=t,Y4(this,s),this._opts=s,this._method=s.method||"GET",this._uri=r,this._data=s.data!==void 0?s.data:null,this._create()}_create(){var t;const r=zae(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");r.xdomain=!!this._opts.xd;const s=this._xhr=this.createRequest(r);try{s.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){s.setDisableHeaderCheck&&s.setDisableHeaderCheck(!0);for(let a in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(a)&&s.setRequestHeader(a,this._opts.extraHeaders[a])}}catch{}if(this._method==="POST")try{s.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{s.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(s),"withCredentials"in s&&(s.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(s.timeout=this._opts.requestTimeout),s.onreadystatechange=()=>{var a;s.readyState===3&&((a=this._opts.cookieJar)===null||a===void 0||a.parseCookies(s.getResponseHeader("set-cookie"))),s.readyState===4&&(s.status===200||s.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof s.status=="number"?s.status:0)},0))},s.send(this._data)}catch(a){this.setTimeoutFn(()=>{this._onError(a)},0);return}typeof document<"u"&&(this._index=Lw.requestsCount++,Lw.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=$Le,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Lw.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}};Ym.requestsCount=0;Ym.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",MO);else if(typeof addEventListener=="function"){const e="onpagehide"in co?"pagehide":"unload";addEventListener(e,MO,!1)}}function MO(){for(let e in Ym.requests)Ym.requests.hasOwnProperty(e)&&Ym.requests[e].abort()}const RLe=function(){const e=Vae({xdomain:!1});return e&&e.responseType!==null}();class FLe extends OLe{constructor(t){super(t);const r=t&&t.forceBase64;this.supportsBinary=RLe&&!r}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new Ym(Vae,this.uri(),t)}}function Vae(e){const t=e.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||DLe))return new XMLHttpRequest}catch{}if(!t)try{return new co[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const Hae=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class zLe extends OE{get name(){return"websocket"}doOpen(){const t=this.uri(),r=this.opts.protocols,s=Hae?{}:zae(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(s.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,r,s)}catch(a){return this.emitReserved("error",a)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let r=0;r<t.length;r++){const s=t[r],a=r===t.length-1;DE(s,this.supportsBinary,i=>{try{this.doWrite(s,i)}catch{}a&&G4(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",r=this.query||{};return this.opts.timestampRequests&&(r[this.opts.timestampParam]=Bae()),this.supportsBinary||(r.b64=1),this.createUri(t,r)}}const OC=co.WebSocket||co.MozWebSocket;class BLe extends zLe{createSocket(t,r,s){return Hae?new OC(t,r,s):r?new OC(t,r):new OC(t)}doWrite(t,r){this.ws.send(r)}}class ULe extends OE{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const r=NLe(Number.MAX_SAFE_INTEGER,this.socket.binaryType),s=t.readable.pipeThrough(r).getReader(),a=jLe();a.readable.pipeTo(t.writable),this._writer=a.writable.getWriter();const i=()=>{s.read().then(({done:l,value:c})=>{l||(this.onPacket(c),i())}).catch(l=>{})};i();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this._writer.write(o).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let r=0;r<t.length;r++){const s=t[r],a=r===t.length-1;this._writer.write(s).then(()=>{a&&G4(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const VLe={websocket:BLe,webtransport:ULe,polling:FLe},HLe=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,WLe=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function WM(e){if(e.length>8e3)throw"URI too long";const t=e,r=e.indexOf("["),s=e.indexOf("]");r!=-1&&s!=-1&&(e=e.substring(0,r)+e.substring(r,s).replace(/:/g,";")+e.substring(s,e.length));let a=HLe.exec(e||""),i={},o=14;for(;o--;)i[WLe[o]]=a[o]||"";return r!=-1&&s!=-1&&(i.source=t,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=qLe(i,i.path),i.queryKey=GLe(i,i.query),i}function qLe(e,t){const r=/\/{2,9}/g,s=t.replace(r,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&s.splice(0,1),t.slice(-1)=="/"&&s.splice(s.length-1,1),s}function GLe(e,t){const r={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(s,a,i){a&&(r[a]=i)}),r}const qM=typeof addEventListener=="function"&&typeof removeEventListener=="function",Dw=[];qM&&addEventListener("offline",()=>{Dw.forEach(e=>e())},!1);class cu extends ys{constructor(t,r){if(super(),this.binaryType=CLe,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(r=t,t=null),t){const s=WM(t);r.hostname=s.host,r.secure=s.protocol==="https"||s.protocol==="wss",r.port=s.port,s.query&&(r.query=s.query)}else r.host&&(r.hostname=WM(r.host).host);Y4(this,r),this.secure=r.secure!=null?r.secure:typeof location<"u"&&location.protocol==="https:",r.hostname&&!r.port&&(r.port=this.secure?"443":"80"),this.hostname=r.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=r.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},r.transports.forEach(s=>{const a=s.prototype.name;this.transports.push(a),this._transportsByName[a]=s}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},r),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=ELe(this.opts.query)),qM&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Dw.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const r=Object.assign({},this.opts.query);r.EIO=Fae,r.transport=t,this.id&&(r.sid=this.id);const s=Object.assign({},this.opts,{query:r,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](s)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&cu.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const r=this.createTransport(t);r.open(),this.setTransport(r)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",r=>this._onClose("transport close",r))}onOpen(){this.readyState="open",cu.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const r=new Error("server error");r.code=t.data,this._onError(r);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let r=1;for(let s=0;s<this.writeBuffer.length;s++){const a=this.writeBuffer[s].data;if(a&&(r+=PLe(a)),s>0&&r>this._maxPayload)return this.writeBuffer.slice(0,s);r+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,G4(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,r,s){return this._sendPacket("message",t,r,s),this}send(t,r,s){return this._sendPacket("message",t,r,s),this}_sendPacket(t,r,s,a){if(typeof r=="function"&&(a=r,r=void 0),typeof s=="function"&&(a=s,s=null),this.readyState==="closing"||this.readyState==="closed")return;s=s||{},s.compress=s.compress!==!1;const i={type:t,data:r,options:s};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),a&&this.once("flush",a),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},r=()=>{this.off("upgrade",r),this.off("upgradeError",r),t()},s=()=>{this.once("upgrade",r),this.once("upgradeError",r)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?s():t()}):this.upgrading?s():t()),this}_onError(t){if(cu.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,r){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),qM&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const s=Dw.indexOf(this._offlineEventListener);s!==-1&&Dw.splice(s,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,r),this.writeBuffer=[],this._prevBufferLen=0}}}cu.protocol=Fae;class YLe extends cu{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let r=this.createTransport(t),s=!1;cu.priorWebsocketSuccess=!1;const a=()=>{s||(r.send([{type:"ping",data:"probe"}]),r.once("packet",f=>{if(!s)if(f.type==="pong"&&f.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",r),!r)return;cu.priorWebsocketSuccess=r.name==="websocket",this.transport.pause(()=>{s||this.readyState!=="closed"&&(u(),this.setTransport(r),r.send([{type:"upgrade"}]),this.emitReserved("upgrade",r),r=null,this.upgrading=!1,this.flush())})}else{const h=new Error("probe error");h.transport=r.name,this.emitReserved("upgradeError",h)}}))};function i(){s||(s=!0,u(),r.close(),r=null)}const o=f=>{const h=new Error("probe error: "+f);h.transport=r.name,i(),this.emitReserved("upgradeError",h)};function l(){o("transport closed")}function c(){o("socket closed")}function d(f){r&&f.name!==r.name&&i()}const u=()=>{r.removeListener("open",a),r.removeListener("error",o),r.removeListener("close",l),this.off("close",c),this.off("upgrading",d)};r.once("open",a),r.once("error",o),r.once("close",l),this.once("close",c),this.once("upgrading",d),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{s||r.open()},200):r.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const r=[];for(let s=0;s<t.length;s++)~this.transports.indexOf(t[s])&&r.push(t[s]);return r}}let QLe=class extends YLe{constructor(t,r={}){const s=typeof t=="object"?t:r;(!s.transports||s.transports&&typeof s.transports[0]=="string")&&(s.transports=(s.transports||["polling","websocket","webtransport"]).map(a=>VLe[a]).filter(a=>!!a)),super(t,s)}};function KLe(e,t="",r){let s=e;r=r||typeof location<"u"&&location,e==null&&(e=r.protocol+"//"+r.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=r.protocol+e:e=r.host+e),/^(https?|wss?):\/\//.test(e)||(typeof r<"u"?e=r.protocol+"//"+e:e="https://"+e),s=WM(e)),s.port||(/^(http|ws)$/.test(s.protocol)?s.port="80":/^(http|ws)s$/.test(s.protocol)&&(s.port="443")),s.path=s.path||"/";const i=s.host.indexOf(":")!==-1?"["+s.host+"]":s.host;return s.id=s.protocol+"://"+i+":"+s.port+t,s.href=s.protocol+"://"+i+(r&&r.port===s.port?"":":"+s.port),s}const JLe=typeof ArrayBuffer=="function",ZLe=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,Wae=Object.prototype.toString,XLe=typeof Blob=="function"||typeof Blob<"u"&&Wae.call(Blob)==="[object BlobConstructor]",eDe=typeof File=="function"||typeof File<"u"&&Wae.call(File)==="[object FileConstructor]";function RE(e){return JLe&&(e instanceof ArrayBuffer||ZLe(e))||XLe&&e instanceof Blob||eDe&&e instanceof File}function $w(e,t){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let r=0,s=e.length;r<s;r++)if($w(e[r]))return!0;return!1}if(RE(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return $w(e.toJSON(),!0);for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&$w(e[r]))return!0;return!1}function tDe(e){const t=[],r=e.data,s=e;return s.data=GM(r,t),s.attachments=t.length,{packet:s,buffers:t}}function GM(e,t){if(!e)return e;if(RE(e)){const r={_placeholder:!0,num:t.length};return t.push(e),r}else if(Array.isArray(e)){const r=new Array(e.length);for(let s=0;s<e.length;s++)r[s]=GM(e[s],t);return r}else if(typeof e=="object"&&!(e instanceof Date)){const r={};for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&(r[s]=GM(e[s],t));return r}return e}function nDe(e,t){return e.data=YM(e.data,t),delete e.attachments,e}function YM(e,t){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let r=0;r<e.length;r++)e[r]=YM(e[r],t);else if(typeof e=="object")for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(e[r]=YM(e[r],t));return e}const rDe=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],sDe=5;var Pn;(function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"})(Pn||(Pn={}));class aDe{constructor(t){this.replacer=t}encode(t){return(t.type===Pn.EVENT||t.type===Pn.ACK)&&$w(t)?this.encodeAsBinary({type:t.type===Pn.EVENT?Pn.BINARY_EVENT:Pn.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let r=""+t.type;return(t.type===Pn.BINARY_EVENT||t.type===Pn.BINARY_ACK)&&(r+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(r+=t.nsp+","),t.id!=null&&(r+=t.id),t.data!=null&&(r+=JSON.stringify(t.data,this.replacer)),r}encodeAsBinary(t){const r=tDe(t),s=this.encodeAsString(r.packet),a=r.buffers;return a.unshift(s),a}}function _O(e){return Object.prototype.toString.call(e)==="[object Object]"}class FE extends ys{constructor(t){super(),this.reviver=t}add(t){let r;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");r=this.decodeString(t);const s=r.type===Pn.BINARY_EVENT;s||r.type===Pn.BINARY_ACK?(r.type=s?Pn.EVENT:Pn.ACK,this.reconstructor=new iDe(r),r.attachments===0&&super.emitReserved("decoded",r)):super.emitReserved("decoded",r)}else if(RE(t)||t.base64)if(this.reconstructor)r=this.reconstructor.takeBinaryData(t),r&&(this.reconstructor=null,super.emitReserved("decoded",r));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let r=0;const s={type:Number(t.charAt(0))};if(Pn[s.type]===void 0)throw new Error("unknown packet type "+s.type);if(s.type===Pn.BINARY_EVENT||s.type===Pn.BINARY_ACK){const i=r+1;for(;t.charAt(++r)!=="-"&&r!=t.length;);const o=t.substring(i,r);if(o!=Number(o)||t.charAt(r)!=="-")throw new Error("Illegal attachments");s.attachments=Number(o)}if(t.charAt(r+1)==="/"){const i=r+1;for(;++r&&!(t.charAt(r)===","||r===t.length););s.nsp=t.substring(i,r)}else s.nsp="/";const a=t.charAt(r+1);if(a!==""&&Number(a)==a){const i=r+1;for(;++r;){const o=t.charAt(r);if(o==null||Number(o)!=o){--r;break}if(r===t.length)break}s.id=Number(t.substring(i,r+1))}if(t.charAt(++r)){const i=this.tryParse(t.substr(r));if(FE.isPayloadValid(s.type,i))s.data=i;else throw new Error("invalid payload")}return s}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,r){switch(t){case Pn.CONNECT:return _O(r);case Pn.DISCONNECT:return r===void 0;case Pn.CONNECT_ERROR:return typeof r=="string"||_O(r);case Pn.EVENT:case Pn.BINARY_EVENT:return Array.isArray(r)&&(typeof r[0]=="number"||typeof r[0]=="string"&&rDe.indexOf(r[0])===-1);case Pn.ACK:case Pn.BINARY_ACK:return Array.isArray(r)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class iDe{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const r=nDe(this.reconPack,this.buffers);return this.finishedReconstruction(),r}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const oDe=Object.freeze(Object.defineProperty({__proto__:null,Decoder:FE,Encoder:aDe,get PacketType(){return Pn},protocol:sDe},Symbol.toStringTag,{value:"Module"}));function Ho(e,t,r){return e.on(t,r),function(){e.off(t,r)}}const lDe=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class qae extends ys{constructor(t,r,s){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=r,s&&s.auth&&(this.auth=s.auth),this._opts=Object.assign({},s),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[Ho(t,"open",this.onopen.bind(this)),Ho(t,"packet",this.onpacket.bind(this)),Ho(t,"error",this.onerror.bind(this)),Ho(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...r){var s,a,i;if(lDe.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(r.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(r),this;const o={type:Pn.EVENT,data:r};if(o.options={},o.options.compress=this.flags.compress!==!1,typeof r[r.length-1]=="function"){const u=this.ids++,f=r.pop();this._registerAckCallback(u,f),o.id=u}const l=(a=(s=this.io.engine)===null||s===void 0?void 0:s.transport)===null||a===void 0?void 0:a.writable,c=this.connected&&!(!((i=this.io.engine)===null||i===void 0)&&i._hasPingExpired());return this.flags.volatile&&!l||(c?(this.notifyOutgoingListeners(o),this.packet(o)):this.sendBuffer.push(o)),this.flags={},this}_registerAckCallback(t,r){var s;const a=(s=this.flags.timeout)!==null&&s!==void 0?s:this._opts.ackTimeout;if(a===void 0){this.acks[t]=r;return}const i=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let l=0;l<this.sendBuffer.length;l++)this.sendBuffer[l].id===t&&this.sendBuffer.splice(l,1);r.call(this,new Error("operation has timed out"))},a),o=(...l)=>{this.io.clearTimeoutFn(i),r.apply(this,l)};o.withError=!0,this.acks[t]=o}emitWithAck(t,...r){return new Promise((s,a)=>{const i=(o,l)=>o?a(o):s(l);i.withError=!0,r.push(i),this.emit(t,...r)})}_addToQueue(t){let r;typeof t[t.length-1]=="function"&&(r=t.pop());const s={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((a,...i)=>s!==this._queue[0]?void 0:(a!==null?s.tryCount>this._opts.retries&&(this._queue.shift(),r&&r(a)):(this._queue.shift(),r&&r(null,...i)),s.pending=!1,this._drainQueue())),this._queue.push(s),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const r=this._queue[0];r.pending&&!t||(r.pending=!0,r.tryCount++,this.flags=r.flags,this.emit.apply(this,r.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:Pn.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,r){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,r),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(s=>String(s.id)===t)){const s=this.acks[t];delete this.acks[t],s.withError&&s.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case Pn.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Pn.EVENT:case Pn.BINARY_EVENT:this.onevent(t);break;case Pn.ACK:case Pn.BINARY_ACK:this.onack(t);break;case Pn.DISCONNECT:this.ondisconnect();break;case Pn.CONNECT_ERROR:this.destroy();const s=new Error(t.data.message);s.data=t.data.data,this.emitReserved("connect_error",s);break}}onevent(t){const r=t.data||[];t.id!=null&&r.push(this.ack(t.id)),this.connected?this.emitEvent(r):this.receiveBuffer.push(Object.freeze(r))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const r=this._anyListeners.slice();for(const s of r)s.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const r=this;let s=!1;return function(...a){s||(s=!0,r.packet({type:Pn.ACK,id:t,data:a}))}}onack(t){const r=this.acks[t.id];typeof r=="function"&&(delete this.acks[t.id],r.withError&&t.data.unshift(null),r.apply(this,t.data))}onconnect(t,r){this.id=t,this.recovered=r&&this._pid===r,this._pid=r,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Pn.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const r=this._anyListeners;for(let s=0;s<r.length;s++)if(t===r[s])return r.splice(s,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const r=this._anyOutgoingListeners;for(let s=0;s<r.length;s++)if(t===r[s])return r.splice(s,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const r=this._anyOutgoingListeners.slice();for(const s of r)s.apply(this,t.data)}}}function eg(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}eg.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),r=Math.floor(t*this.jitter*e);e=Math.floor(t*10)&1?e+r:e-r}return Math.min(e,this.max)|0};eg.prototype.reset=function(){this.attempts=0};eg.prototype.setMin=function(e){this.ms=e};eg.prototype.setMax=function(e){this.max=e};eg.prototype.setJitter=function(e){this.jitter=e};class QM extends ys{constructor(t,r){var s;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(r=t,t=void 0),r=r||{},r.path=r.path||"/socket.io",this.opts=r,Y4(this,r),this.reconnection(r.reconnection!==!1),this.reconnectionAttempts(r.reconnectionAttempts||1/0),this.reconnectionDelay(r.reconnectionDelay||1e3),this.reconnectionDelayMax(r.reconnectionDelayMax||5e3),this.randomizationFactor((s=r.randomizationFactor)!==null&&s!==void 0?s:.5),this.backoff=new eg({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(r.timeout==null?2e4:r.timeout),this._readyState="closed",this.uri=t;const a=r.parser||oDe;this.encoder=new a.Encoder,this.decoder=new a.Decoder,this._autoConnect=r.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var r;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(r=this.backoff)===null||r===void 0||r.setMin(t),this)}randomizationFactor(t){var r;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(r=this.backoff)===null||r===void 0||r.setJitter(t),this)}reconnectionDelayMax(t){var r;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(r=this.backoff)===null||r===void 0||r.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new QLe(this.uri,this.opts);const r=this.engine,s=this;this._readyState="opening",this.skipReconnect=!1;const a=Ho(r,"open",function(){s.onopen(),t&&t()}),i=l=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",l),t?t(l):this.maybeReconnectOnOpen()},o=Ho(r,"error",i);if(this._timeout!==!1){const l=this._timeout,c=this.setTimeoutFn(()=>{a(),i(new Error("timeout")),r.close()},l);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}return this.subs.push(a),this.subs.push(o),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(Ho(t,"ping",this.onping.bind(this)),Ho(t,"data",this.ondata.bind(this)),Ho(t,"error",this.onerror.bind(this)),Ho(t,"close",this.onclose.bind(this)),Ho(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(r){this.onclose("parse error",r)}}ondecoded(t){G4(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,r){let s=this.nsps[t];return s?this._autoConnect&&!s.active&&s.connect():(s=new qae(this,t,r),this.nsps[t]=s),s}_destroy(t){const r=Object.keys(this.nsps);for(const s of r)if(this.nsps[s].active)return;this._close()}_packet(t){const r=this.encoder.encode(t);for(let s=0;s<r.length;s++)this.engine.write(r[s],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,r){var s;this.cleanup(),(s=this.engine)===null||s===void 0||s.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,r),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const r=this.backoff.duration();this._reconnecting=!0;const s=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(a=>{a?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",a)):t.onreconnect()}))},r);this.opts.autoUnref&&s.unref(),this.subs.push(()=>{this.clearTimeoutFn(s)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const $g={};function Dx(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};const r=KLe(e,t.path||"/socket.io"),s=r.source,a=r.id,i=r.path,o=$g[a]&&i in $g[a].nsps,l=t.forceNew||t["force new connection"]||t.multiplex===!1||o;let c;return l?c=new QM(s,t):($g[a]||($g[a]=new QM(s,t)),c=$g[a]),r.query&&!t.query&&(t.query=r.queryKey),c.socket(r.path,t)}Object.assign(Dx,{Manager:QM,Socket:qae,io:Dx,connect:Dx});const cDe=({conversationList:e,threadView:t,contextPanel:r,showContextPanel:s=!0})=>n.jsxs("div",{className:"min-h-screen w-full bg-gradient-to-br from-slate-950 via-slate-950 to-black text-slate-100",children:[n.jsx("header",{className:"border-b border-slate-800/80 bg-slate-950/80 backdrop-blur-xl",children:n.jsxs("div",{className:"mx-auto flex max-w-[1800px] items-center justify-between px-4 py-3 md:px-8",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"flex h-9 w-9 items-center justify-center rounded-2xl bg-cyan-500/15 ring-1 ring-cyan-400/60 shadow-[0_0_18px_rgba(34,211,238,0.5)]",children:n.jsx(ln,{className:"h-4 w-4 text-cyan-300"})}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-xs font-semibold tracking-[0.24em] text-slate-500 uppercase",children:"Night Ops"}),n.jsx("span",{className:"rounded-full bg-cyan-500/10 px-2 py-0.5 text-[0.65rem] font-medium text-cyan-300 ring-1 ring-cyan-500/40",children:"Control Tower v1"})]}),n.jsx("h1",{className:"text-sm font-semibold text-slate-100 md:text-base",children:"Conversations & Dispatch"})]})]}),n.jsxs("div",{className:"hidden items-center gap-6 text-xs text-slate-400 md:flex",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(wa,{className:"h-4 w-4 text-cyan-300"}),n.jsx("span",{children:"Live threads"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(wx,{className:"h-4 w-4 text-violet-300"}),n.jsx("span",{children:"Voice & Voicemail"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(ln,{className:"h-4 w-4 text-emerald-300"}),n.jsx("span",{children:"AI Assist"})]})]})]})}),n.jsxs("main",{className:"mx-auto flex max-w-[1800px] flex-col gap-4 px-3 py-4 md:px-6 md:py-6 lg:flex-row",children:[n.jsxs(q.section,{layout:!0,className:Le("nightops-panel nightops-scroll relative flex h-[70vh] w-full flex-col overflow-hidden md:h-[78vh] lg:h-[82vh]","lg:w-[26%]"),initial:{opacity:0,y:6},animate:{opacity:1,y:0},transition:{duration:.22,ease:"easeOut"},children:[n.jsx("div",{className:"flex items-center justify-between border-b border-slate-700/60 px-4 py-3",children:n.jsxs("div",{children:[n.jsx("div",{className:"nightops-section-title",children:"Inbox"}),n.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-400",children:[n.jsx("span",{className:"inline-flex h-2 w-2 rounded-full bg-emerald-400/90 nightops-pulse"}),n.jsx("span",{children:"Live customers"})]})]})}),n.jsx("div",{className:"nightops-scroll flex-1 overflow-y-auto px-2 py-2",children:e})]}),n.jsxs(q.section,{layout:!0,className:Le("nightops-panel nightops-scroll relative flex h-[72vh] w-full flex-col overflow-hidden md:h-[78vh] lg:h-[82vh]",s?"lg:w-[46%]":"lg:w-[74%]"),initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.28,ease:"easeOut"},children:[n.jsxs("div",{className:"flex items-center justify-between border-b border-slate-700/60 px-4 py-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"nightops-section-title",children:"Thread"}),n.jsx("span",{className:"rounded-full bg-slate-900/70 px-2 py-0.5 text-[0.65rem] text-slate-400 ring-1 ring-slate-700/80",children:"SMS  Voice  AI"})]}),n.jsxs("div",{className:"flex items-center gap-3 text-[0.7rem] text-slate-400",children:[n.jsxs("div",{className:"inline-flex items-center gap-1",children:[n.jsx(Rt,{className:"h-3 w-3 text-slate-500"}),n.jsx("span",{children:"Chronological"})]}),n.jsxs("div",{className:"inline-flex items-center gap-1",children:[n.jsx(vo,{className:"h-3 w-3 text-cyan-400"}),n.jsx("span",{children:"AI assisted"})]})]})]}),n.jsx("div",{className:"nightops-scroll flex-1 overflow-y-auto",children:t})]}),s&&n.jsxs(q.section,{layout:!0,className:Le("nightops-panel nightops-scroll relative flex h-[40vh] w-full flex-col overflow-hidden md:h-[78vh] lg:h-[82vh]","lg:w-[28%]"),initial:{opacity:0,y:6},animate:{opacity:1,y:0},transition:{duration:.25,ease:"easeOut"},children:[n.jsxs("div",{className:"flex items-center justify-between border-b border-slate-700/60 px-4 py-3",children:[n.jsxs("div",{children:[n.jsx("div",{className:"nightops-section-title",children:"Context"}),n.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-400",children:[n.jsx(vge,{className:"h-3.5 w-3.5 text-slate-300"}),n.jsx("span",{children:"Customer  Vehicle  Jobs"})]})]}),n.jsxs("div",{className:"flex items-center gap-2 text-[0.7rem] text-slate-400",children:[n.jsx(zr,{className:"h-3 w-3 text-cyan-300"}),n.jsx("span",{children:"Route-aware"})]})]}),n.jsx("div",{className:"nightops-scroll flex-1 overflow-y-auto px-4 py-3",children:r})]})]})]});var Gae={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},PO=Q.createContext&&Q.createContext(Gae),dDe=["attr","size","title"];function uDe(e,t){if(e==null)return{};var r=fDe(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function fDe(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}function u2(){return u2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},u2.apply(this,arguments)}function TO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function f2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?TO(Object(r),!0).forEach(function(s){hDe(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):TO(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function hDe(e,t,r){return t=mDe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mDe(e){var t=pDe(e,"string");return typeof t=="symbol"?t:t+""}function pDe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Yae(e){return e&&e.map((t,r)=>Q.createElement(t.tag,f2({key:r},t.attr),Yae(t.child)))}function Q4(e){return t=>Q.createElement(gDe,u2({attr:f2({},e.attr)},t),Yae(e.child))}function gDe(e){var t=r=>{var{attr:s,size:a,title:i}=e,o=uDe(e,dDe),l=a||r.size||"1em",c;return r.className&&(c=r.className),e.className&&(c=(c?c+" ":"")+e.className),Q.createElement("svg",u2({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,s,o,{className:c,style:f2(f2({color:e.color||r.color},r.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),i&&Q.createElement("title",null,i),e.children)};return PO!==void 0?Q.createElement(PO.Consumer,null,r=>t(r)):t(Gae)}function xDe(e){return Q4({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M9.101 23.691v-7.98H6.627v-3.667h2.474v-1.58c0-4.085 1.848-5.978 5.858-5.978.401 0 .955.042 1.468.103a8.68 8.68 0 0 1 1.141.195v3.325a8.623 8.623 0 0 0-.653-.036 26.805 26.805 0 0 0-.733-.009c-.707 0-1.259.096-1.675.309a1.686 1.686 0 0 0-.679.622c-.258.42-.374.995-.374 1.752v1.297h3.919l-.386 2.103-.287 1.564h-3.246v8.245C19.396 23.238 24 18.179 24 12.044c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.628 3.874 10.35 9.101 11.647Z"},child:[]}]})(e)}function yDe(e){return Q4({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M7.0301.084c-1.2768.0602-2.1487.264-2.911.5634-.7888.3075-1.4575.72-2.1228 1.3877-.6652.6677-1.075 1.3368-1.3802 2.127-.2954.7638-.4956 1.6365-.552 2.914-.0564 1.2775-.0689 1.6882-.0626 4.947.0062 3.2586.0206 3.6671.0825 4.9473.061 1.2765.264 2.1482.5635 2.9107.308.7889.72 1.4573 1.388 2.1228.6679.6655 1.3365 1.0743 2.1285 1.38.7632.295 1.6361.4961 2.9134.552 1.2773.056 1.6884.069 4.9462.0627 3.2578-.0062 3.668-.0207 4.9478-.0814 1.28-.0607 2.147-.2652 2.9098-.5633.7889-.3086 1.4578-.72 2.1228-1.3881.665-.6682 1.0745-1.3378 1.3795-2.1284.2957-.7632.4966-1.636.552-2.9124.056-1.2809.0692-1.6898.063-4.948-.0063-3.2583-.021-3.6668-.0817-4.9465-.0607-1.2797-.264-2.1487-.5633-2.9117-.3084-.7889-.72-1.4568-1.3876-2.1228C21.2982 1.33 20.628.9208 19.8378.6165 19.074.321 18.2017.1197 16.9244.0645 15.6471.0093 15.236-.005 11.977.0014 8.718.0076 8.31.0215 7.0301.0839m.1402 21.6932c-1.17-.0509-1.8053-.2453-2.2287-.408-.5606-.216-.96-.4771-1.3819-.895-.422-.4178-.6811-.8186-.9-1.378-.1644-.4234-.3624-1.058-.4171-2.228-.0595-1.2645-.072-1.6442-.079-4.848-.007-3.2037.0053-3.583.0607-4.848.05-1.169.2456-1.805.408-2.2282.216-.5613.4762-.96.895-1.3816.4188-.4217.8184-.6814 1.3783-.9003.423-.1651 1.0575-.3614 2.227-.4171 1.2655-.06 1.6447-.072 4.848-.079 3.2033-.007 3.5835.005 4.8495.0608 1.169.0508 1.8053.2445 2.228.408.5608.216.96.4754 1.3816.895.4217.4194.6816.8176.9005 1.3787.1653.4217.3617 1.056.4169 2.2263.0602 1.2655.0739 1.645.0796 4.848.0058 3.203-.0055 3.5834-.061 4.848-.051 1.17-.245 1.8055-.408 2.2294-.216.5604-.4763.96-.8954 1.3814-.419.4215-.8181.6811-1.3783.9-.4224.1649-1.0577.3617-2.2262.4174-1.2656.0595-1.6448.072-4.8493.079-3.2045.007-3.5825-.006-4.848-.0608M16.953 5.5864A1.44 1.44 0 1 0 18.39 4.144a1.44 1.44 0 0 0-1.437 1.4424M5.8385 12.012c.0067 3.4032 2.7706 6.1557 6.173 6.1493 3.4026-.0065 6.157-2.7701 6.1506-6.1733-.0065-3.4032-2.771-6.1565-6.174-6.1498-3.403.0067-6.156 2.771-6.1496 6.1738M8 12.0077a4 4 0 1 1 4.008 3.9921A3.9996 3.9996 0 0 1 8 12.0077"},child:[]}]})(e)}function vDe({conversations:e,selectedId:t,onSelect:r,isLoading:s,searchQuery:a,onSearchChange:i,filter:o,onFilterChange:l}){const c=(f,h)=>f?f.split(" ").map(m=>m[0]).join("").toUpperCase().slice(0,2):h.slice(-2),d=f=>{switch(f){case"sms":return n.jsx(bt,{className:"h-3 w-3"});case"web":return n.jsx(aQ,{className:"h-3 w-3"});case"facebook":return n.jsx(xDe,{className:"h-3 w-3"});case"instagram":return n.jsx(yDe,{className:"h-3 w-3"});case"email":return n.jsx(Cr,{className:"h-3 w-3"});default:return n.jsx(wa,{className:"h-3 w-3"})}},u=f=>{switch(f){case"sms":return"text-blue-400";case"web":return"text-green-400";case"facebook":return"text-blue-500";case"instagram":return"text-purple-400";case"email":return"text-gray-400";default:return"text-slate-400"}};return n.jsxs("div",{className:"flex flex-col h-full",children:[n.jsx("div",{className:"p-3",children:n.jsxs("div",{className:"relative",children:[n.jsx(Ga,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-500"}),n.jsx(se,{type:"text",placeholder:"Search conversations...",value:a,onChange:f=>i(f.target.value),className:"pl-9 h-9 nightops-input bg-slate-900/60 border-slate-700/60 text-slate-200 placeholder:text-slate-500","data-testid":"input-search-conversations"})]})}),n.jsx("div",{className:"px-3 py-2 flex gap-1.5 overflow-x-auto border-b border-slate-700/40",children:["all","unread","sms","web"].map(f=>n.jsx(_,{size:"sm",variant:"ghost",onClick:()=>l(f),className:Le("text-xs h-7 px-3 rounded-full transition-all",o===f?"bg-cyan-500/20 text-cyan-300 ring-1 ring-cyan-500/40":"text-slate-400 hover:text-slate-200 hover:bg-slate-800/60"),"data-testid":`filter-${f}`,children:f.charAt(0).toUpperCase()+f.slice(1)},f))}),n.jsx("div",{className:"flex-1 overflow-y-auto nightops-scroll px-2 py-2",children:s?n.jsx("div",{className:"space-y-2",children:[1,2,3,4,5].map(f=>n.jsx("div",{className:"h-20 rounded-xl bg-slate-800/40 animate-pulse"},f))}):e.length===0?n.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-center p-6",children:[n.jsx("div",{className:"w-16 h-16 rounded-full bg-slate-800/60 flex items-center justify-center mb-4",children:n.jsx(wa,{className:"h-8 w-8 text-slate-600"})}),n.jsx("p",{className:"text-sm text-slate-500",children:a?"No conversations match your search":"No conversations yet"})]}):n.jsx("div",{className:"space-y-1",children:e.map((f,h)=>{var m,g,x,y,v;return n.jsx(q.button,{onClick:()=>r(f.id),initial:{opacity:0,y:8},animate:{opacity:1,y:0},transition:{delay:h*.03,duration:.2},className:Le("w-full text-left p-3 rounded-xl transition-all duration-200","nightops-conversation-row",t===f.id&&"selected"),"data-testid":`conversation-${f.id}`,children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:Le("nightops-avatar w-10 h-10 text-sm flex-shrink-0",f.unreadCount>0&&"ring-2 ring-cyan-400/60"),children:c(f.customerName,f.customerPhone)}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center justify-between mb-1",children:[n.jsxs("div",{className:"flex items-center gap-1.5 min-w-0",children:[n.jsx("span",{className:"font-medium text-sm text-slate-100 truncate",children:f.customerName||f.customerPhone}),f.pinned&&n.jsx(lge,{className:"h-3 w-3 text-cyan-400 flex-shrink-0"}),f.starred&&n.jsx(Qr,{className:"h-3 w-3 text-yellow-400 flex-shrink-0 fill-yellow-400"})]}),n.jsx("span",{className:"text-[0.65rem] text-slate-500 flex-shrink-0 ml-2",children:bu(new Date(f.lastMessageTime),{addSuffix:!1})})]}),n.jsxs("p",{className:"text-xs text-slate-400 truncate mb-1.5",children:[((m=f.latestMessage)==null?void 0:m.sender)==="customer"?"":((g=f.latestMessage)==null?void 0:g.sender)==="ai"?" ":"You: ",(y=(x=f.latestMessage)==null?void 0:x.content)!=null&&y.startsWith(" Voicemail:")?f.latestMessage.content.replace(` Voicemail:

`," "):((v=f.latestMessage)==null?void 0:v.content)||"No messages yet"]}),n.jsxs("div",{className:"flex items-center gap-1.5 flex-wrap",children:[n.jsx("span",{className:Le("p-1 rounded-md bg-slate-800/60",u(f.platform)),children:d(f.platform)}),f.unreadCount>0&&n.jsx("span",{className:"nightops-badge",children:f.unreadCount}),f.needsHumanAttention&&n.jsxs("span",{className:"nightops-badge nightops-badge-danger flex items-center gap-1",children:[n.jsx(Wt,{className:"h-2.5 w-2.5"}),"Needs Attention"]}),(f.controlMode==="ai"||f.controlMode==="auto")&&n.jsxs("span",{className:"nightops-badge nightops-badge-purple flex items-center gap-1",children:[n.jsx(yo,{className:"h-2.5 w-2.5"}),"AI"]})]})]})]})},f.id)})})})]})}var zE="Popover",[Qae]=ws(zE,[R0]),A1=R0(),[bDe,Uu]=Qae(zE),Kae=e=>{const{__scopePopover:t,children:r,open:s,defaultOpen:a,onOpenChange:i,modal:o=!1}=e,l=A1(t),c=p.useRef(null),[d,u]=p.useState(!1),[f=!1,h]=qa({prop:s,defaultProp:a,onChange:i});return n.jsx(iA,{...l,children:n.jsx(bDe,{scope:t,contentId:Gs(),triggerRef:c,open:f,onOpenChange:h,onOpenToggle:p.useCallback(()=>h(m=>!m),[h]),hasCustomAnchor:d,onCustomAnchorAdd:p.useCallback(()=>u(!0),[]),onCustomAnchorRemove:p.useCallback(()=>u(!1),[]),modal:o,children:r})})};Kae.displayName=zE;var Jae="PopoverAnchor",wDe=p.forwardRef((e,t)=>{const{__scopePopover:r,...s}=e,a=Uu(Jae,r),i=A1(r),{onCustomAnchorAdd:o,onCustomAnchorRemove:l}=a;return p.useEffect(()=>(o(),()=>l()),[o,l]),n.jsx(i4,{...i,...s,ref:t})});wDe.displayName=Jae;var Zae="PopoverTrigger",Xae=p.forwardRef((e,t)=>{const{__scopePopover:r,...s}=e,a=Uu(Zae,r),i=A1(r),o=rn(t,a.triggerRef),l=n.jsx(ht.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":sie(a.open),...s,ref:o,onClick:ut(e.onClick,a.onOpenToggle)});return a.hasCustomAnchor?l:n.jsx(i4,{asChild:!0,...i,children:l})});Xae.displayName=Zae;var BE="PopoverPortal",[jDe,NDe]=Qae(BE,{forceMount:void 0}),eie=e=>{const{__scopePopover:t,forceMount:r,children:s,container:a}=e,i=Uu(BE,t);return n.jsx(jDe,{scope:t,forceMount:r,children:n.jsx(Sa,{present:r||i.open,children:n.jsx(Gv,{asChild:!0,container:a,children:s})})})};eie.displayName=BE;var Wp="PopoverContent",tie=p.forwardRef((e,t)=>{const r=NDe(Wp,e.__scopePopover),{forceMount:s=r.forceMount,...a}=e,i=Uu(Wp,e.__scopePopover);return n.jsx(Sa,{present:s||i.open,children:i.modal?n.jsx(CDe,{...a,ref:t}):n.jsx(kDe,{...a,ref:t})})});tie.displayName=Wp;var SDe=th("PopoverContent.RemoveScroll"),CDe=p.forwardRef((e,t)=>{const r=Uu(Wp,e.__scopePopover),s=p.useRef(null),a=rn(t,s),i=p.useRef(!1);return p.useEffect(()=>{const o=s.current;if(o)return cA(o)},[]),n.jsx(l4,{as:SDe,allowPinchZoom:!0,children:n.jsx(nie,{...e,ref:a,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ut(e.onCloseAutoFocus,o=>{var l;o.preventDefault(),i.current||(l=r.triggerRef.current)==null||l.focus()}),onPointerDownOutside:ut(e.onPointerDownOutside,o=>{const l=o.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,d=l.button===2||c;i.current=d},{checkForDefaultPrevented:!1}),onFocusOutside:ut(e.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),kDe=p.forwardRef((e,t)=>{const r=Uu(Wp,e.__scopePopover),s=p.useRef(!1),a=p.useRef(!1);return n.jsx(nie,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,l;(o=e.onCloseAutoFocus)==null||o.call(e,i),i.defaultPrevented||(s.current||(l=r.triggerRef.current)==null||l.focus(),i.preventDefault()),s.current=!1,a.current=!1},onInteractOutside:i=>{var c,d;(c=e.onInteractOutside)==null||c.call(e,i),i.defaultPrevented||(s.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=i.target;((d=r.triggerRef.current)==null?void 0:d.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),nie=p.forwardRef((e,t)=>{const{__scopePopover:r,trapFocus:s,onOpenAutoFocus:a,onCloseAutoFocus:i,disableOutsidePointerEvents:o,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:d,onInteractOutside:u,...f}=e,h=Uu(Wp,r),m=A1(r);return KT(),n.jsx(n4,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:a,onUnmountAutoFocus:i,children:n.jsx(_0,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:u,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:d,onDismiss:()=>h.onOpenChange(!1),children:n.jsx(oA,{"data-state":sie(h.open),role:"dialog",id:h.contentId,...m,...f,ref:t,style:{...f.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),rie="PopoverClose",MDe=p.forwardRef((e,t)=>{const{__scopePopover:r,...s}=e,a=Uu(rie,r);return n.jsx(ht.button,{type:"button",...s,ref:t,onClick:ut(e.onClick,()=>a.onOpenChange(!1))})});MDe.displayName=rie;var _De="PopoverArrow",PDe=p.forwardRef((e,t)=>{const{__scopePopover:r,...s}=e,a=A1(r);return n.jsx(lA,{...a,...s,ref:t})});PDe.displayName=_De;function sie(e){return e?"open":"closed"}var TDe=Kae,ADe=Xae,EDe=eie,aie=tie;const hh=TDe,mh=ADe,Pu=p.forwardRef(({className:e,align:t="center",sideOffset:r=4,...s},a)=>n.jsx(EDe,{children:n.jsx(aie,{ref:a,align:t,sideOffset:r,className:Le("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]",e),...s})}));Pu.displayName=aie.displayName;function AO({value:e,onSelect:t,label:r="Address",placeholder:s="Start typing an address...",testId:a="input-address-autocomplete"}){const[i,o]=p.useState(e??""),[l,c]=p.useState(!1),d=p.useRef(null);p.useEffect(()=>{e!==void 0&&o(e)},[e]),p.useEffect(()=>{function h(m){d.current&&!d.current.contains(m.target)&&c(!1)}return document.addEventListener("mousedown",h),()=>{document.removeEventListener("mousedown",h)}},[]);const{data:u=[]}=be({queryKey:["places-autocomplete",i],queryFn:async()=>{var g;return!i||i.length<3?[]:((g=(await(await fetch(`/api/places/autocomplete?input=${encodeURIComponent(i)}`)).json()).predictions)==null?void 0:g.map(x=>({description:x.description,placeId:x.place_id})))??[]},enabled:i.length>=3,staleTime:3e4});async function f(h){o(h.description),c(!1);const g=await(await fetch(`/api/places/details?placeId=${h.placeId}`)).json();t({address:h.description,lat:(g==null?void 0:g.lat)??null,lng:(g==null?void 0:g.lng)??null,formatted:(g==null?void 0:g.formatted)??h.description})}return n.jsxs("div",{className:"relative w-full",ref:d,children:[n.jsx(U,{htmlFor:a,className:"text-xs",children:r}),n.jsx(se,{id:a,value:i,onChange:h=>{o(h.target.value),c(!0)},onFocus:()=>{u.length>0&&c(!0)},placeholder:s,className:"mt-1","data-testid":a,autoComplete:"off"}),l&&u.length>0&&n.jsx("div",{className:"absolute z-50 bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800 rounded-md w-full shadow-lg max-h-60 overflow-auto mt-1",children:u.map(h=>n.jsx("div",{className:"px-3 py-2 cursor-pointer hover:bg-neutral-100 dark:hover:bg-neutral-800 text-sm",onClick:()=>f(h),"data-testid":`suggestion-${h.placeId}`,children:h.description},h.placeId))})]})}function IDe({conversationId:e}){var M,A;const[t,r]=p.useState(!0),[s,a]=p.useState(!1),[i,o]=p.useState(!1),{toast:l}=Ee(),{data:c,isLoading:d}=be({queryKey:[`/api/conversations/${e}/appointment`],enabled:!!e}),{data:u}=be({queryKey:[`/api/conversations/${e}`],enabled:!!e}),{data:f}=be({queryKey:["/api/services"]}),{data:h,isLoading:m,error:g}=be({queryKey:["bookingDraft",e],enabled:!!e&&!x&&s,queryFn:async()=>{try{const P=await fetch(`/api/conversations/${e}/booking-draft`);if(!P.ok){const T=await P.json();return console.warn("[BOOKING DRAFT] Failed to load:",T.message),null}return P.json()}catch(P){return console.error("[BOOKING DRAFT] Error fetching draft:",P),null}},retry:!1}),x=c==null?void 0:c.appointment,y=u==null?void 0:u.data,v=(f==null?void 0:f.services)||[],[b,w]=p.useState({serviceId:0,scheduledTime:"",address:"",addressLat:null,addressLng:null,additionalRequests:""});p.useEffect(()=>{var P;x&&w({serviceId:x.serviceId,scheduledTime:x.scheduledTime,address:x.address,addressLat:x.addressLat?Number(x.addressLat):null,addressLng:x.addressLng?Number(x.addressLng):null,additionalRequests:((P=x.additionalRequests)==null?void 0:P.join(", "))||""})},[x]),p.useEffect(()=>{if(!x&&h&&s){let P=h.serviceId||0;if(!P&&h.serviceName&&v.length>0){const R=v.find(G=>{var $;return G.name.toLowerCase()===(($=h.serviceName)==null?void 0:$.toLowerCase())});P=(R==null?void 0:R.id)||0}let T="";if(h.preferredDate){const R=h.normalizedStartTime||"09:00";T=new Date(`${h.preferredDate}T${R}`).toISOString()}let I="";const L=[];h.vehicleSummary&&L.push(`Vehicle: ${h.vehicleSummary}`),h.rawTimePreference&&L.push(`Preferred: ${h.rawTimePreference}`),h.aiSuggestedNotes&&L.push(h.aiSuggestedNotes),I=L.join(", "),w(R=>({serviceId:R.serviceId||P,scheduledTime:R.scheduledTime||T,address:R.address||h.formattedAddress||h.address||"",addressLat:R.addressLat||h.addressLat||null,addressLng:R.addressLng||h.addressLng||null,additionalRequests:R.additionalRequests||I}))}},[h,s,x,v]);const N=je({mutationFn:async P=>await Ne("POST",`/api/conversations/${e}/appointment`,P),onSuccess:()=>{l({title:"Appointment saved",description:"Booking details have been updated successfully."}),ze.invalidateQueries({queryKey:[`/api/conversations/${e}/appointment`]}),a(!1)},onError:P=>{l({title:"Error saving appointment",description:P.message||"Failed to save booking details",variant:"destructive"})}}),j=je({mutationFn:async()=>{const P=await fetch(`/api/conversations/${e}/appointment`,{method:"DELETE"});if(!P.ok)throw new Error("Failed to delete appointment");return P.json()},onSuccess:()=>{l({title:"Appointment removed",description:"Booking has been removed from this conversation."}),ze.invalidateQueries({queryKey:[`/api/conversations/${e}/appointment`]})},onError:P=>{l({title:"Error removing appointment",description:P.message||"Failed to remove booking",variant:"destructive"})}}),S=()=>{const P=(x==null?void 0:x.customerId)||(y==null?void 0:y.customerId);if(!P){l({title:"Customer required",description:"Cannot create appointment without customer information",variant:"destructive"});return}if(!b.serviceId||b.serviceId===0){l({title:"Service required",description:"Please select a service",variant:"destructive"});return}if(!b.scheduledTime){l({title:"Date & time required",description:"Please select a date and time",variant:"destructive"});return}if(!b.address||!b.address.trim()){l({title:"Address required",description:"Please enter a service address",variant:"destructive"});return}const T=b.additionalRequests.split(",").map(L=>L.trim()).filter(L=>L.length>0),I=(h==null?void 0:h.inServiceArea)===!1&&i;N.mutate({customerId:P,serviceId:b.serviceId,scheduledTime:b.scheduledTime,address:b.address,addressLat:b.addressLat,addressLng:b.addressLng,additionalRequests:T,addOns:(x==null?void 0:x.addOns)||null,requiresManualApproval:I})},C=()=>N.isPending?"Creating...":(h==null?void 0:h.inServiceArea)===!1&&i?"Submit for Manual Approval":"Create Appointment",k=()=>{confirm("Are you sure you want to remove this appointment from the conversation?")&&j.mutate()};return!x&&!s?n.jsx("div",{className:"border-t border-border",children:n.jsx(O,{className:"rounded-none border-x-0 border-b-0",children:n.jsx(H,{className:"px-4 py-3",children:n.jsxs(_,{onClick:()=>{var P;a(!0),r(!0),w({serviceId:((P=v[0])==null?void 0:P.id)||0,scheduledTime:"",address:"",addressLat:null,addressLng:null,additionalRequests:""})},className:"w-full",variant:"outline",size:"sm","data-testid":"button-create-appointment",children:[n.jsx(Dt,{className:"h-4 w-4 mr-2"}),"Create Appointment"]})})})}):!x&&s?n.jsx("div",{className:"border-t border-border",children:n.jsxs(O,{className:"rounded-none border-x-0 border-b-0",children:[n.jsx(ee,{className:"py-3 px-4 bg-accent/50",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Dt,{className:"h-4 w-4 text-primary"}),n.jsx(te,{className:"text-sm font-medium",children:"Create New Appointment"})]})}),n.jsx(H,{className:"px-4 pb-4 pt-4 space-y-4",children:n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx(U,{htmlFor:"service-create",className:"text-xs",children:"Service"}),n.jsxs(Pt,{value:b.serviceId.toString(),onValueChange:P=>w({...b,serviceId:parseInt(P)}),children:[n.jsx(kt,{id:"service-create",className:"mt-1","data-testid":"select-service",children:n.jsx(Tt,{placeholder:"Select a service"})}),n.jsx(Mt,{children:v.map(P=>n.jsxs(ve,{value:P.id.toString(),children:[P.name," (",P.priceRange,")"]},P.id))})]})]}),n.jsxs("div",{children:[n.jsx(U,{htmlFor:"scheduledTime-create",className:"text-xs",children:"Date & Time"}),n.jsx(se,{id:"scheduledTime-create",type:"datetime-local",value:b.scheduledTime?Ie(new Date(b.scheduledTime),"yyyy-MM-dd'T'HH:mm"):"",onChange:P=>w({...b,scheduledTime:new Date(P.target.value).toISOString()}),className:"mt-1","data-testid":"input-scheduled-time"})]}),n.jsx("div",{children:n.jsx(AO,{label:"Service Address",value:b.address,placeholder:"Start typing an address...",testId:"input-address-create",onSelect:P=>{w({...b,address:P.formatted,addressLat:P.lat,addressLng:P.lng})}})}),(h==null?void 0:h.inServiceArea)===!1&&!i&&n.jsxs("div",{className:"p-3 border rounded-md bg-red-50 dark:bg-red-950 text-red-800 dark:text-red-200","data-testid":"service-area-warning",children:[n.jsx("div",{className:"font-semibold mb-1",children:"Outside Service Area"}),n.jsx("div",{className:"text-sm",children:h.serviceAreaSoftDeclineMessage}),h.travelMinutes!=null&&n.jsxs("div",{className:"mt-2 text-xs opacity-70",children:["Estimated travel time: ",h.travelMinutes," minutes"]}),n.jsx(_,{type:"button",variant:"outline",size:"sm",className:"mt-3 bg-yellow-500 hover:bg-yellow-600 text-white border-yellow-600",onClick:()=>o(!0),"data-testid":"button-override-service-area",children:"Submit Anyway (Requires Manual Approval)"})]}),(h==null?void 0:h.routeSuggestion)&&n.jsxs("div",{className:"p-3 border rounded-md bg-blue-50 dark:bg-blue-950 text-blue-900 dark:text-blue-100","data-testid":"route-suggestion",children:[n.jsxs("div",{className:"font-semibold text-sm",children:["Suggested time (",h.routeSuggestion.reason,")"]}),h.routeSuggestion.suggestedDate&&n.jsxs("div",{className:"text-xs mt-1",children:["Date: ",h.routeSuggestion.suggestedDate]}),n.jsxs("div",{className:"text-xs mt-1",children:["Time Window: ",h.routeSuggestion.suggestedStart,"  ",h.routeSuggestion.suggestedEnd]}),h.routeSuggestion.travelMinutes!=null&&n.jsxs("div",{className:"text-xs opacity-70 mt-1",children:["Travel time: ",h.routeSuggestion.travelMinutes," minutes"]})]}),n.jsxs("div",{children:[n.jsx(U,{htmlFor:"additionalRequests-create",className:"text-xs",children:"Additional Requests"}),n.jsx(se,{id:"additionalRequests-create",value:b.additionalRequests,onChange:P=>w({...b,additionalRequests:P.target.value}),placeholder:"Comma-separated requests",className:"mt-1","data-testid":"input-additional-requests"}),(h==null?void 0:h.aiSuggestedNotes)&&n.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["AI Suggestion: ",h.aiSuggestedNotes]})]}),n.jsxs("div",{className:"flex gap-2 pt-2",children:[n.jsxs(_,{onClick:S,size:"sm",className:`flex-1 ${(h==null?void 0:h.inServiceArea)===!1&&i?"bg-amber-600 hover:bg-amber-700":""}`,disabled:N.isPending||(h==null?void 0:h.inServiceArea)===!1&&!i,"data-testid":"button-save-appointment",children:[n.jsx(fr,{className:"h-3 w-3 mr-1"}),C()]}),n.jsx(_,{onClick:()=>a(!1),variant:"outline",size:"sm","data-testid":"button-cancel-edit",children:"Cancel"})]})]})})]})}):n.jsx("div",{className:"border-t border-border",children:n.jsx(b1,{open:t,onOpenChange:r,children:n.jsxs(O,{className:"rounded-none border-x-0 border-b-0",children:[n.jsx(w1,{className:"w-full","data-testid":"button-toggle-booking-panel",children:n.jsxs(ee,{className:"flex flex-row items-center justify-between py-3 px-4 hover:bg-accent/50 transition-colors",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Dt,{className:"h-4 w-4 text-primary"}),n.jsx(te,{className:"text-sm font-medium",children:"Appointment Details"})]}),t?n.jsx(T0,{className:"h-4 w-4 text-muted-foreground"}):n.jsx(Ui,{className:"h-4 w-4 text-muted-foreground"})]})}),n.jsx(j1,{children:n.jsx(H,{className:"px-4 pb-4 space-y-4",children:s?n.jsx(n.Fragment,{children:n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx(U,{htmlFor:"service",className:"text-xs",children:"Service"}),n.jsxs(Pt,{value:b.serviceId.toString(),onValueChange:P=>w({...b,serviceId:parseInt(P)}),children:[n.jsx(kt,{id:"service",className:"mt-1","data-testid":"select-service",children:n.jsx(Tt,{placeholder:"Select a service"})}),n.jsx(Mt,{children:v.map(P=>n.jsxs(ve,{value:P.id.toString(),children:[P.name," (",P.priceRange,")"]},P.id))})]})]}),n.jsxs("div",{children:[n.jsx(U,{htmlFor:"scheduledTime",className:"text-xs",children:"Date & Time"}),n.jsx(se,{id:"scheduledTime",type:"datetime-local",value:b.scheduledTime?Ie(new Date(b.scheduledTime),"yyyy-MM-dd'T'HH:mm"):"",onChange:P=>w({...b,scheduledTime:new Date(P.target.value).toISOString()}),className:"mt-1","data-testid":"input-scheduled-time"})]}),n.jsx("div",{children:n.jsx(AO,{label:"Service Address",value:b.address,placeholder:"Start typing an address...",testId:"input-address",onSelect:P=>{w({...b,address:P.formatted,addressLat:P.lat,addressLng:P.lng})}})}),(h==null?void 0:h.inServiceArea)===!1&&!i&&n.jsxs("div",{className:"p-3 border rounded-md bg-red-50 dark:bg-red-950 text-red-800 dark:text-red-200","data-testid":"service-area-warning",children:[n.jsx("div",{className:"font-semibold mb-1",children:"Outside Service Area"}),n.jsx("div",{className:"text-sm",children:h.serviceAreaSoftDeclineMessage}),h.travelMinutes!=null&&n.jsxs("div",{className:"mt-2 text-xs opacity-70",children:["Estimated travel time: ",h.travelMinutes," minutes"]}),n.jsx(_,{type:"button",variant:"outline",size:"sm",className:"mt-3 bg-yellow-500 hover:bg-yellow-600 text-white border-yellow-600",onClick:()=>o(!0),"data-testid":"button-override-service-area",children:"Submit Anyway (Requires Manual Approval)"})]}),(h==null?void 0:h.routeSuggestion)&&n.jsxs("div",{className:"p-3 border rounded-md bg-blue-50 dark:bg-blue-950 text-blue-900 dark:text-blue-100","data-testid":"route-suggestion",children:[n.jsxs("div",{className:"font-semibold text-sm",children:["Suggested time (",h.routeSuggestion.reason,")"]}),h.routeSuggestion.suggestedDate&&n.jsxs("div",{className:"text-xs mt-1",children:["Date: ",h.routeSuggestion.suggestedDate]}),n.jsxs("div",{className:"text-xs mt-1",children:["Time Window: ",h.routeSuggestion.suggestedStart,"  ",h.routeSuggestion.suggestedEnd]}),h.routeSuggestion.travelMinutes!=null&&n.jsxs("div",{className:"text-xs opacity-70 mt-1",children:["Travel time: ",h.routeSuggestion.travelMinutes," minutes"]})]}),n.jsxs("div",{children:[n.jsx(U,{htmlFor:"additionalRequests",className:"text-xs",children:"Additional Requests"}),n.jsx(se,{id:"additionalRequests",value:b.additionalRequests,onChange:P=>w({...b,additionalRequests:P.target.value}),placeholder:"Comma-separated requests",className:"mt-1","data-testid":"input-additional-requests"}),(h==null?void 0:h.aiSuggestedNotes)&&n.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["AI Suggestion: ",h.aiSuggestedNotes]})]}),n.jsxs("div",{className:"flex gap-2 pt-2",children:[n.jsxs(_,{onClick:S,size:"sm",className:"flex-1",disabled:N.isPending,"data-testid":"button-save-appointment",children:[n.jsx(fr,{className:"h-3 w-3 mr-1"}),N.isPending?"Saving...":"Save Changes"]}),n.jsx(_,{onClick:()=>a(!1),variant:"outline",size:"sm","data-testid":"button-cancel-edit",children:"Cancel"})]})]})}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"space-y-2 text-sm",children:[n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(nh,{className:"h-4 w-4 text-muted-foreground mt-0.5"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:(M=x.service)==null?void 0:M.name}),n.jsx("p",{className:"text-xs text-muted-foreground",children:(A=x.service)==null?void 0:A.priceRange})]})]}),n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(Rt,{className:"h-4 w-4 text-muted-foreground mt-0.5"}),n.jsxs("div",{children:[n.jsx("p",{children:Ie(new Date(x.scheduledTime),"EEEE, MMMM d, yyyy")}),n.jsx("p",{className:"text-xs text-muted-foreground",children:Ie(new Date(x.scheduledTime),"h:mm a")})]})]}),n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(zr,{className:"h-4 w-4 text-muted-foreground mt-0.5"}),n.jsx("p",{children:x.address})]}),x.additionalRequests&&x.additionalRequests.length>0&&n.jsxs("div",{className:"pt-2 border-t",children:[n.jsx("p",{className:"text-xs font-medium text-muted-foreground mb-1",children:"Additional Requests:"}),n.jsx("ul",{className:"text-xs space-y-1",children:x.additionalRequests.map((P,T)=>n.jsxs("li",{className:"flex items-start gap-1",children:[n.jsx("span",{className:"text-muted-foreground",children:""}),n.jsx("span",{children:P})]},T))})]})]}),n.jsxs("div",{className:"flex gap-2 pt-2 border-t",children:[n.jsx(_,{onClick:()=>a(!0),variant:"outline",size:"sm",className:"flex-1","data-testid":"button-edit-appointment",children:"Edit Details"}),n.jsx(_,{onClick:k,variant:"ghost",size:"sm",className:"text-destructive hover:text-destructive",disabled:j.isPending,"data-testid":"button-delete-appointment",children:n.jsx(Nr,{className:"h-4 w-4"})})]})]})})})]})})})}const LDe=["","","","","",""];function DDe({message:e,conversationCustomerName:t,conversationCustomerPhone:r,conversationAssignedAgent:s,reactions:a=[],onAddReaction:i,onRemoveReaction:o,currentUserId:l,onEditMessage:c,onDeleteMessage:d,onForwardMessage:u,onStarMessage:f,reactionSlot:h,scheduledMetaSlot:m,deliveryIndicatorSlot:g,messageActionSlot:x}){var A;const{toast:y}=Ee(),v=e.sender==="customer",b=e.sender==="agent"||e.sender==="ai",w=()=>{e.content&&(navigator.clipboard.writeText(e.content),y({title:"Message copied",description:"Message text copied to clipboard"}))},N=a.reduce((P,T)=>(P[T.emoji]||(P[T.emoji]=[]),P[T.emoji].push(T),P),{}),j=P=>{if(!l||!i||!o)return;const T=a.find(I=>I.emoji===P&&I.userId===l);T?o(T.id):i(P)},S=e.metadata,C=(S==null?void 0:S.type)==="voicemail"||e.content&&e.content.startsWith(" Voicemail:"),k=(S==null?void 0:S.recordingUrl)||null,M=(S==null?void 0:S.voicemailSummary)||null;return n.jsx("div",{className:`flex ${v?"justify-start":"justify-end"} mb-1 px-2`,"data-testid":`message-${e.id}`,children:n.jsxs("div",{className:"relative max-w-[75%] sm:max-w-[65%] group",children:[n.jsx("div",{className:`absolute -top-1 ${v?"-right-1":"-left-1"} opacity-0 group-hover:opacity-100 group-focus-within:opacity-100 transition-opacity duration-200 z-10 sm:opacity-0`,children:n.jsxs("div",{className:"flex items-center gap-0.5 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 p-0.5",children:[n.jsx(_,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0 hover:bg-gray-100 dark:hover:bg-gray-700",onClick:w,title:"Copy message","data-testid":"button-copy-message",children:n.jsx(Qv,{className:"h-3.5 w-3.5"})}),b&&c&&n.jsx(_,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0 hover:bg-gray-100 dark:hover:bg-gray-700",onClick:()=>c(e.id),title:"Edit message","data-testid":"button-edit-message",children:n.jsx(kp,{className:"h-3.5 w-3.5"})}),u&&n.jsx(_,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0 hover:bg-gray-100 dark:hover:bg-gray-700",onClick:()=>u(e.id),title:"Forward message","data-testid":"button-forward-message",children:n.jsx(G0e,{className:"h-3.5 w-3.5"})}),f&&n.jsx(_,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0 hover:bg-gray-100 dark:hover:bg-gray-700",onClick:()=>f(e.id),title:"Star message","data-testid":"button-star-message",children:n.jsx(Qr,{className:"h-3.5 w-3.5"})}),b&&d&&n.jsx(_,{variant:"ghost",size:"sm",className:"h-7 w-7 p-0 hover:bg-red-100 dark:hover:bg-red-900 text-red-600 dark:text-red-400",onClick:()=>d(e.id),title:"Delete message","data-testid":"button-delete-message",children:n.jsx(Nr,{className:"h-3.5 w-3.5"})})]})}),x&&n.jsx("div",{className:"absolute top-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-200",style:{[v?"right":"left"]:"-40px"},children:x(e)}),n.jsxs("div",{className:`
          relative px-3.5 py-2 shadow-sm
          ${v?"bg-gray-200 dark:bg-gray-700 text-gray-900 dark:text-gray-100 rounded-2xl rounded-bl-md":"bg-blue-500 dark:bg-blue-600 text-white rounded-2xl rounded-br-md"}
          ${C?"border-l-4 border-cyan-500 dark:border-cyan-400":""}
        `,children:[C&&n.jsxs("div",{className:"flex items-center gap-2 mb-2 pb-2 border-b border-gray-300/50 dark:border-gray-600/50",children:[n.jsx("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-cyan-500/20 dark:bg-cyan-400/20",children:n.jsx(Sp,{className:"h-4 w-4 text-cyan-600 dark:text-cyan-400"})}),n.jsx("div",{className:"flex-1",children:n.jsx("span",{className:"text-xs font-semibold uppercase tracking-wider text-cyan-600 dark:text-cyan-400",children:"Voicemail Transcription"})}),k&&n.jsxs("a",{href:k,target:"_blank",rel:"noopener noreferrer",className:`flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium transition-colors ${v?"bg-cyan-500/20 hover:bg-cyan-500/30 text-cyan-700 dark:text-cyan-300":"bg-white/20 hover:bg-white/30 text-white"}`,"data-testid":"button-play-voicemail",children:[n.jsx(A0,{className:"h-3 w-3"}),"Play"]})]}),e.content&&n.jsx("p",{className:"text-[15px] leading-relaxed whitespace-pre-wrap break-words","data-testid":`content-${e.id}`,children:C&&e.content.startsWith(" Voicemail:")?e.content.replace(` Voicemail:

`,""):e.content}),C&&M&&n.jsxs("div",{className:`mt-2 rounded-md px-2.5 py-1.5 text-xs ${v?"bg-white/40 dark:bg-gray-900/40 border border-gray-300/40 dark:border-gray-600/40":"bg-white/15 border border-white/20"}`,"data-testid":"voicemail-summary",children:[n.jsx("div",{className:`font-semibold uppercase tracking-wide text-[0.65rem] mb-0.5 ${v?"text-sky-600 dark:text-sky-400":"text-sky-200"}`,children:"AI Summary"}),n.jsx("div",{className:v?"text-gray-700 dark:text-gray-200":"text-white/90",children:M})]}),e.metadata&&((A=e.metadata.attachments)==null?void 0:A.length)>0&&n.jsx("div",{className:`${e.content?"mt-2":""} space-y-1.5`,children:e.metadata.attachments.map((P,T)=>{var L;return((L=P.type)==null?void 0:L.startsWith("image/"))?n.jsx("a",{href:P.url,target:"_blank",rel:"noopener noreferrer",className:"block overflow-hidden rounded-lg border-2 border-white/20","data-testid":`attachment-image-${T}`,children:n.jsx("img",{src:P.directUrl||P.url,alt:P.name,className:"max-w-full h-auto max-h-64 object-contain",loading:"lazy"})},T):n.jsxs("a",{href:P.url,target:"_blank",rel:"noopener noreferrer",className:`flex items-center gap-2 p-2 rounded-lg ${v?"bg-gray-300/50 dark:bg-gray-600/50 hover:bg-gray-300 dark:hover:bg-gray-600":"bg-blue-400/30 hover:bg-blue-400/50"} transition-colors`,"data-testid":`attachment-file-${T}`,children:[n.jsx(bs,{className:"h-4 w-4 flex-shrink-0"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm font-medium truncate",children:P.name}),P.size&&n.jsxs("p",{className:"text-xs opacity-75",children:[(parseInt(P.size)/1024).toFixed(1)," KB"]})]}),n.jsx(xa,{className:"h-3.5 w-3.5 flex-shrink-0 opacity-75"})]},T)})}),m&&n.jsx("div",{className:"mt-1",children:m(e)})]}),n.jsxs("div",{className:`flex flex-col ${v?"items-start":"items-end"} gap-0.5 mt-0.5 px-1`,children:[n.jsxs("div",{className:"flex items-center gap-1",children:[b&&n.jsx("div",{className:"flex items-center","data-testid":`delivery-status-${e.deliveryStatus||"sent"}`,children:e.deliveryStatus==="failed"?n.jsx("div",{title:"Failed to send",className:"text-red-500 dark:text-red-400",children:n.jsx(on,{className:"h-3 w-3"})}):e.deliveryStatus==="read"?n.jsx("div",{title:"Read",className:"text-blue-500 dark:text-blue-400",children:n.jsx(L6,{className:"h-3 w-3 fill-current"})}):e.deliveryStatus==="delivered"?n.jsx("div",{title:"Delivered",className:"text-gray-500 dark:text-gray-400",children:n.jsx(L6,{className:"h-3 w-3"})}):n.jsx("div",{title:"Sent",className:"text-gray-500 dark:text-gray-400",children:n.jsx(Mr,{className:"h-3 w-3"})})}),g&&g(e),n.jsx("span",{className:"text-[11px] text-muted-foreground","data-testid":`timestamp-${e.id}`,children:e.timestamp?Ie(new Date(e.timestamp),"h:mm a"):"Now"})]}),b&&e.deliveryStatus==="read"&&e.readAt&&n.jsxs("span",{className:"text-[10px] text-blue-500 dark:text-blue-400","data-testid":`read-receipt-${e.id}`,children:["Read ",Ie(new Date(e.readAt),"h:mm a")]})]}),(a.length>0||i)&&n.jsxs("div",{className:`mt-1 flex items-center gap-1 flex-wrap ${v?"justify-start":"justify-end"}`,children:[Object.entries(N).map(([P,T])=>{const I=l&&T.some(L=>L.userId===l);return n.jsxs("button",{onClick:()=>j(P),className:`inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs transition-all ${I?"bg-blue-100 dark:bg-blue-900 border border-blue-300 dark:border-blue-700":"bg-gray-100 dark:bg-gray-800 border border-gray-300 dark:border-gray-700 hover:bg-gray-200 dark:hover:bg-gray-700"}`,"data-testid":`reaction-${P}-count-${T.length}`,title:`${T.length} reaction${T.length>1?"s":""}`,children:[n.jsx("span",{children:P}),n.jsx("span",{className:"font-medium",children:T.length})]},P)}),i&&n.jsxs(hh,{children:[n.jsx(mh,{asChild:!0,children:n.jsx(_,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700 opacity-0 group-hover:opacity-100 transition-opacity","data-testid":"button-add-reaction",children:n.jsx(pQ,{className:"h-3.5 w-3.5 text-gray-500 dark:text-gray-400"})})}),n.jsx(Pu,{className:"w-auto p-2",align:v?"start":"end",children:n.jsx("div",{className:"flex items-center gap-1",children:LDe.map(P=>n.jsx("button",{onClick:()=>j(P),className:"text-2xl hover:scale-125 transition-transform p-1 rounded hover:bg-gray-100 dark:hover:bg-gray-800","data-testid":`quick-reaction-${P}`,children:P},P))})})]})]}),h&&n.jsx("div",{className:`mt-1 flex items-center gap-1 ${v?"justify-start":"justify-end"}`,children:h(e)})]})})}function $De({inlineSuggestionsSlot:e,sidePanelSlot:t}){return e||t?n.jsxs("div",{className:"relative",children:[e&&n.jsx("div",{className:"mb-2",children:e}),t&&n.jsx("div",{className:"mb-2",children:t})]}):null}function ODe({conversationId:e,messages:t,readerRole:r,socket:s,enabled:a=!0}){const i=cs(),o=p.useRef(null),l=p.useRef(new Set),c=p.useRef(null),d=je({mutationFn:async g=>await Ne("POST",`/api/conversations/${e}/messages/read`,{messageIds:g,readerRole:r}),onSuccess:()=>{i.invalidateQueries({queryKey:[`/api/conversations/${e}`]})}}),u=p.useCallback(()=>{if(l.current.size===0)return;const g=Array.from(l.current);l.current.clear(),d.mutate(g)},[d]),f=p.useCallback(g=>{l.current.add(g),c.current&&clearTimeout(c.current),c.current=setTimeout(()=>{u()},500)},[u]),h=p.useCallback(g=>{g.forEach(x=>{if(x.isIntersecting){const y=parseInt(x.target.getAttribute("data-message-id")||"0");y>0&&f(y)}})},[f]);return p.useEffect(()=>{if(a)return o.current=new IntersectionObserver(h,{root:null,rootMargin:"0px",threshold:.5}),()=>{o.current&&o.current.disconnect(),c.current&&clearTimeout(c.current)}},[a,h]),p.useEffect(()=>{if(!s||!a)return;const g=x=>{x.conversationId===e&&i.setQueryData([`/api/conversations/${e}`],y=>{var v;return(v=y==null?void 0:y.data)!=null&&v.messages?{...y,data:{...y.data,messages:y.data.messages.map(b=>x.messageIds.includes(b.id)?{...b,deliveryStatus:"read",readAt:x.readAt}:b)}}:y})};return s.on("messages_read",g),()=>{s.off("messages_read",g)}},[s,e,i,a]),{observeMessage:p.useCallback((g,x)=>{if(!g||!o.current||!a)return;const y=x.sender==="customer"||r==="customer",v=x.deliveryStatus!=="read";return y&&v&&o.current.observe(g),()=>{o.current&&g&&o.current.unobserve(g)}},[r,a]),isMarking:d.isPending}}function RDe({controlMode:e,assignedAgent:t,lastHandoffAt:r,manualModeStartedAt:s}){function a(){switch(e){case"auto":return n.jsxs(ge,{className:"bg-emerald-100 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-400 border-emerald-300 dark:border-emerald-700","data-testid":"badge-control-mode",children:[n.jsx(yo,{className:"h-3 w-3 mr-1"}),"AI Control"]});case"manual":return n.jsxs(ge,{className:"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-400 border-blue-300 dark:border-blue-700","data-testid":"badge-control-mode",children:[n.jsx(Fn,{className:"h-3 w-3 mr-1"}),"Manual Control"]});case"paused":return n.jsxs(ge,{className:"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-400 border-gray-300 dark:border-gray-700","data-testid":"badge-control-mode",children:[n.jsx(Cp,{className:"h-3 w-3 mr-1"}),"Paused"]});default:return n.jsx(ge,{variant:"outline","data-testid":"badge-control-mode",children:e})}}const i=r||s;return n.jsx(O,{className:"p-4 bg-gradient-to-br from-white to-gray-50 dark:from-gray-900 dark:to-gray-950 border-gray-200 dark:border-gray-800","data-testid":"card-conversation-meta",children:n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Control Mode"}),a()]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Assigned Agent"}),n.jsx("span",{className:"text-sm text-gray-900 dark:text-gray-100","data-testid":"text-assigned-agent",children:t||n.jsx("span",{className:"text-gray-500 italic",children:"Unassigned"})})]}),i&&n.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-gray-200 dark:border-gray-800",children:[n.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-500 flex items-center gap-1",children:[n.jsx(Rt,{className:"h-3 w-3"}),"Last handoff"]}),n.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400","data-testid":"text-last-handoff",children:bu(new Date(i),{addSuffix:!0})})]})]})})}async function FDe(e){const t=await fetch(`/api/conversations/${e}/smart-schedule`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"}});if(!t.ok){const s=await t.json().catch(()=>({message:"Failed to parse conversation"}));throw new Error(s.message||"Failed to extract booking information")}return(await t.json()).data}async function zDe(e,t){const r=await fetch(`/api/conversations/${e}/smart-handback`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(t||{})});if(!r.ok){const a=await r.json().catch(()=>({message:"Failed to hand back conversation"}));throw new Error(a.message||"Failed to return conversation to AI")}return await r.json()}async function BDe(e){const t=await fetch(`/api/conversations/${e}/handback-analysis`,{method:"GET",credentials:"include"});if(!t.ok){const s=await t.json().catch(()=>({message:"Failed to analyze handback readiness"}));throw new Error(s.message||"Failed to get handback analysis")}return(await t.json()).data}function UDe({conversationId:e}){const[t,r]=p.useState(!1),[s,a]=p.useState(null),{toast:i}=Ee();async function o(){try{r(!0);const c=await FDe(e);a(c),i({title:c.readyToBook?"Ready to book!":"Information extracted",description:c.readyToBook?"All required details collected. You can create the appointment.":`Missing: ${c.missingInfo.join(", ")}`})}catch(c){console.error("[SMART SCHEDULE] Error:",c),i({title:"Extraction failed",description:c instanceof Error?c.message:"Failed to analyze conversation",variant:"destructive"})}finally{r(!1)}}function l(c){const d={high:"bg-emerald-100 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-400",medium:"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400",low:"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400"};return n.jsxs(ge,{className:d[c]||d.medium,"data-testid":"badge-confidence",children:[c," confidence"]})}return n.jsxs(O,{className:"p-4 space-y-4","data-testid":"card-smart-schedule",children:[n.jsx("div",{className:"flex items-center justify-between",children:n.jsxs("h3",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100 flex items-center gap-2",children:[n.jsx(ln,{className:"h-4 w-4 text-purple-600"}),"Smart Schedule"]})}),s?n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-gradient-to-br from-purple-50 to-blue-50 dark:from-purple-950/20 dark:to-blue-950/20 border border-purple-200 dark:border-purple-800",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[s.readyToBook?n.jsx(bn,{className:"h-5 w-5 text-emerald-600"}):n.jsx(Wt,{className:"h-5 w-5 text-yellow-600"}),n.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:s.readyToBook?"Ready to schedule":"More info needed"})]}),l(s.confidence)]}),n.jsxs("div",{className:"space-y-3 text-sm",children:[s.customerName&&n.jsxs("div",{children:[n.jsx(U,{className:"text-xs text-gray-600 dark:text-gray-400",children:"Customer"}),n.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100","data-testid":"text-customer-name",children:s.customerName})]}),s.serviceType&&n.jsxs("div",{children:[n.jsx(U,{className:"text-xs text-gray-600 dark:text-gray-400",children:"Service"}),n.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100","data-testid":"text-service-type",children:s.serviceType})]}),s.preferredDate&&n.jsxs("div",{children:[n.jsx(U,{className:"text-xs text-gray-600 dark:text-gray-400",children:"Preferred Date/Time"}),n.jsxs("div",{className:"font-medium text-gray-900 dark:text-gray-100","data-testid":"text-preferred-datetime",children:[s.preferredDate," ",s.preferredTime&&`at ${s.preferredTime}`]})]}),s.address&&n.jsxs("div",{children:[n.jsx(U,{className:"text-xs text-gray-600 dark:text-gray-400",children:"Location"}),n.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100","data-testid":"text-address",children:s.address})]}),s.addOns&&s.addOns.length>0&&n.jsxs("div",{children:[n.jsx(U,{className:"text-xs text-gray-600 dark:text-gray-400",children:"Add-ons"}),n.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:s.addOns.map((c,d)=>n.jsx(ge,{variant:"secondary",className:"text-xs",children:c},d))})]}),s.extractionNotes&&n.jsxs("div",{children:[n.jsx(U,{className:"text-xs text-gray-600 dark:text-gray-400",children:"AI Notes"}),n.jsx("p",{className:"text-xs text-gray-700 dark:text-gray-300 italic","data-testid":"text-extraction-notes",children:s.extractionNotes})]}),s.missingInfo.length>0&&n.jsxs("div",{className:"p-3 rounded-lg bg-yellow-50 dark:bg-yellow-950/20 border border-yellow-200 dark:border-yellow-800",children:[n.jsx(U,{className:"text-xs font-semibold text-yellow-800 dark:text-yellow-400",children:"Still Need:"}),n.jsx("ul",{className:"mt-1 text-xs text-yellow-700 dark:text-yellow-300 space-y-1","data-testid":"list-missing-info",children:s.missingInfo.map((c,d)=>n.jsxs("li",{children:[" ",c]},d))})]})]}),n.jsxs("div",{className:"flex gap-2 pt-2 border-t border-gray-200 dark:border-gray-800",children:[n.jsx(_,{size:"sm",variant:"outline",onClick:()=>a(null),"data-testid":"button-reset",children:"Reset"}),s.readyToBook&&n.jsxs(_,{size:"sm",className:"flex-1 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700",onClick:()=>{i({title:"Opening booking form",description:"Pre-filling with extracted details..."})},"data-testid":"button-create-appointment",children:[n.jsx(hu,{className:"h-4 w-4 mr-2"}),"Create Appointment"]})]})]}):n.jsx(_,{onClick:o,disabled:t,className:"w-full",variant:"outline","data-testid":"button-extract-booking",children:t?n.jsxs(n.Fragment,{children:[n.jsx(nt,{className:"h-4 w-4 mr-2 animate-spin"}),"Analyzing conversation..."]}):n.jsxs(n.Fragment,{children:[n.jsx(hu,{className:"h-4 w-4 mr-2"}),"Extract booking details"]})})]})}function VDe({conversationId:e,controlMode:t,onHandbackComplete:r}){const[s,a]=p.useState(!1),[i,o]=p.useState(!0),{toast:l}=Ee(),c=cs();async function d(){try{a(!0);const f=await zDe(e,{notifyCustomer:i,force:!1});if(f.success)l({title:"Returned to AI",description:f.message||"Conversation is now under AI control"}),c.invalidateQueries({queryKey:["/api/conversations"]}),c.invalidateQueries({queryKey:[`/api/conversations/${e}`]}),r==null||r();else throw new Error(f.message||"Failed to hand back conversation")}catch(f){console.error("[HANDBACK] Error:",f),l({title:"Handback failed",description:f instanceof Error?f.message:"Failed to return conversation to AI",variant:"destructive"})}finally{a(!1)}}const u=t==="manual";return n.jsxs(O,{className:"p-4 space-y-4","data-testid":"card-handoff-controls",children:[n.jsxs("div",{children:[n.jsxs("h3",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100 flex items-center gap-2 mb-2",children:[n.jsx(yo,{className:"h-4 w-4 text-blue-600"}),"AI Handoff"]}),n.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:u?"Return this conversation to AI control when ready.":"This conversation is already under AI control."})]}),u&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex items-center justify-between py-2",children:[n.jsx(U,{htmlFor:"notify-customer",className:"text-sm text-gray-700 dark:text-gray-300 cursor-pointer",children:"Notify customer"}),n.jsx(Vt,{id:"notify-customer",checked:i,onCheckedChange:o,"data-testid":"switch-notify-customer"})]}),n.jsx(_,{onClick:d,disabled:s,className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700","data-testid":"button-return-to-ai",children:s?n.jsxs(n.Fragment,{children:[n.jsx(nt,{className:"h-4 w-4 mr-2 animate-spin"}),"Returning to AI..."]}):n.jsxs(n.Fragment,{children:[n.jsx(yo,{className:"h-4 w-4 mr-2"}),"Return to AI"]})})]}),!u&&n.jsxs("div",{className:"p-3 rounded-lg bg-emerald-50 dark:bg-emerald-950/20 border border-emerald-200 dark:border-emerald-800 flex items-center gap-2",children:[n.jsx(bn,{className:"h-4 w-4 text-emerald-600"}),n.jsx("span",{className:"text-sm text-emerald-700 dark:text-emerald-400",children:"AI is handling this conversation"})]})]})}function HDe({conversationId:e}){const[t,r]=p.useState(!1),[s,a]=p.useState(null),{toast:i}=Ee();async function o(){try{r(!0);const d=await BDe(e);a(d)}catch(d){console.error("[HANDBACK ANALYSIS] Error:",d),i({title:"Analysis failed",description:d instanceof Error?d.message:"Failed to analyze conversation",variant:"destructive"})}finally{r(!1)}}function l(d,u){return d?n.jsxs(ge,{className:"bg-emerald-100 dark:bg-emerald-900/30 text-emerald-700 dark:text-emerald-400","data-testid":"badge-recommendation",children:[n.jsx(gQ,{className:"h-3 w-3 mr-1"}),"Recommend handback (",u,")"]}):n.jsxs(ge,{className:"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-400","data-testid":"badge-recommendation",children:[n.jsx(pge,{className:"h-3 w-3 mr-1"}),"Keep manual (",u,")"]})}function c(d){switch(d){case"satisfied":return n.jsx(bn,{className:"h-4 w-4 text-emerald-600"});case"frustrated":return n.jsx(Ya,{className:"h-4 w-4 text-red-600"});default:return n.jsx("div",{className:"h-4 w-4 rounded-full bg-gray-400"})}}return n.jsxs(O,{className:"p-4 space-y-4","data-testid":"card-handback-analysis",children:[n.jsx("div",{className:"flex items-center justify-between",children:n.jsxs("h3",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100 flex items-center gap-2",children:[n.jsx($f,{className:"h-4 w-4 text-purple-600"}),"AI Analysis"]})}),s?n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"p-3 rounded-lg bg-gradient-to-br from-purple-50 to-blue-50 dark:from-purple-950/20 dark:to-blue-950/20 border border-purple-200 dark:border-purple-800",children:[l(s.shouldHandback,s.confidence),n.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 mt-2","data-testid":"text-analysis-reason",children:s.reason})]}),s.contextSummary&&n.jsxs("div",{className:"space-y-3 text-sm",children:[s.contextSummary.issueDescription&&n.jsxs("div",{children:[n.jsx("div",{className:"text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Issue"}),n.jsx("p",{className:"text-gray-900 dark:text-gray-100","data-testid":"text-issue-description",children:s.contextSummary.issueDescription})]}),s.contextSummary.customerSentiment&&n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"Customer:"}),n.jsxs("div",{className:"flex items-center gap-1",children:[c(s.contextSummary.customerSentiment),n.jsx("span",{className:"text-sm capitalize text-gray-900 dark:text-gray-100","data-testid":"text-customer-sentiment",children:s.contextSummary.customerSentiment})]})]}),s.contextSummary.actionsTaken&&s.contextSummary.actionsTaken.length>0&&n.jsxs("div",{children:[n.jsx("div",{className:"text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Actions Taken"}),n.jsx("ul",{className:"space-y-1","data-testid":"list-actions-taken",children:s.contextSummary.actionsTaken.map((d,u)=>n.jsxs("li",{className:"text-xs text-gray-700 dark:text-gray-300",children:[" ",d]},u))})]}),s.contextSummary.outstandingItems&&s.contextSummary.outstandingItems.length>0&&n.jsxs("div",{children:[n.jsx("div",{className:"text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Outstanding"}),n.jsx("ul",{className:"space-y-1","data-testid":"list-outstanding-items",children:s.contextSummary.outstandingItems.map((d,u)=>n.jsxs("li",{className:"text-xs text-yellow-700 dark:text-yellow-300",children:[" ",d]},u))})]}),s.contextSummary.recommendedAIBehavior&&n.jsxs("div",{className:"p-2 rounded bg-blue-50 dark:bg-blue-950/20 border border-blue-200 dark:border-blue-800",children:[n.jsx("div",{className:"text-xs font-medium text-blue-700 dark:text-blue-400 mb-1",children:"AI Guidance"}),n.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-300","data-testid":"text-ai-guidance",children:s.contextSummary.recommendedAIBehavior})]})]}),n.jsx(_,{size:"sm",variant:"ghost",onClick:()=>a(null),className:"w-full","data-testid":"button-close-analysis",children:"Close"})]}):n.jsx(_,{onClick:o,disabled:t,variant:"outline",className:"w-full","data-testid":"button-analyze-handback",children:t?n.jsxs(n.Fragment,{children:[n.jsx(nt,{className:"h-4 w-4 mr-2 animate-spin"}),"Analyzing..."]}):n.jsxs(n.Fragment,{children:[n.jsx($f,{className:"h-4 w-4 mr-2"}),"Analyze handback readiness"]})})]})}function WDe(e){return Ny(e)?"Today":rX(e)?"Yesterday":Ie(e,"EEEE, MMMM d, yyyy")}function qDe(e){const t=[],r=new Date;return e.forEach(s=>{const a=s.timestamp?new Date(s.timestamp):r,i=t[t.length-1];!i||!is(i.date,a)?t.push({date:a,messages:[s]}):i.messages.push(s)}),t}function GDe({conversationId:e,onBack:t,messageReactionSlot:r,scheduledMetaSlot:s,deliveryIndicatorSlot:a,messageActionSlot:i,inlineSuggestionsSlot:o,sidePanelSlot:l,scheduledBannerSlot:c}){var ka,Nl,Sl;const{activeSendLineId:d}=LE(),[u,f]=p.useState(""),[h,m]=p.useState(new Set),[g,x]=p.useState(!0),[y,v]=p.useState(!0),[b,w]=p.useState(!1),[N,j]=p.useState(new Set),[S,C]=p.useState("connected"),[k,M]=p.useState(null),[A,P]=p.useState([]),[T,I]=p.useState(!1),[L,R]=p.useState(null),[G,$]=p.useState(!1),[D,W]=p.useState(""),[E,F]=p.useState(!1),[B,Z]=p.useState(!1),ne=p.useRef(null),Y=p.useRef(null),me=p.useRef(null),pe=p.useRef(null),Me=p.useRef(null),re=p.useRef(null),de=p.useRef(!1),he=cs(),{toast:ce}=Ee(),{data:Be}=be({queryKey:["/api/users/me"]}),le=Be==null?void 0:Be.user,{data:$e}=be({queryKey:["/api/phone-settings/lines"]}),_e=(($e==null?void 0:$e.lines)||[]).find(Ce=>Ce.id===d),{data:ot,isLoading:rt}=be({queryKey:[`/api/conversations/${e}`],refetchInterval:5e3}),z=ot==null?void 0:ot.data,Se=(z==null?void 0:z.bookingStatus)||"not_ready",J=((ka=z==null?void 0:z.messages)==null?void 0:ka.filter(Ce=>D.trim()?Ce.content.toLowerCase().includes(D.toLowerCase()):!0))||[],{data:oe}=be({queryKey:[`/api/conversations/${e}/reactions`],enabled:!!e}),ye=(oe==null?void 0:oe.reactions)||[],Re=(z==null?void 0:z.controlMode)==="auto"&&((Nl=z==null?void 0:z.messages)==null?void 0:Nl.length)>0&&((Sl=z.messages[z.messages.length-1])==null?void 0:Sl.sender)==="customer";p.useEffect(()=>{z&&(z.unreadCount||0)>0&&Ne("POST",`/api/conversations/${e}/mark-read`).catch(console.error)},[e,z==null?void 0:z.unreadCount]);const{data:He,refetch:Fe}=be({queryKey:[`/api/conversations/${e}/suggestions`],enabled:!!z&&z.controlMode==="manual"}),st=(He==null?void 0:He.suggestions)||[],{data:Bt}=be({queryKey:["/api/quick-replies/categories"]}),En=(Bt==null?void 0:Bt.categories)||[],{data:jn}=be({queryKey:[`/api/conversations/${e}/template-variables`],enabled:!!e}),wi=(jn==null?void 0:jn.variables)||[],{observeMessage:Js}=ODe({conversationId:e,messages:(z==null?void 0:z.messages)||[],readerRole:"agent",socket:pe.current,enabled:!!z}),cc=je({mutationFn:async({messageId:Ce,emoji:lt})=>Ne("POST",`/api/messages/${Ce}/reactions`,{emoji:lt}),onSuccess:()=>{he.invalidateQueries({queryKey:[`/api/conversations/${e}/reactions`]})}}),Eo=je({mutationFn:async Ce=>Ne("DELETE",`/api/messages/reactions/${Ce}`,{}),onSuccess:()=>{he.invalidateQueries({queryKey:[`/api/conversations/${e}/reactions`]})}}),Rs=je({mutationFn:async Ce=>(await Ne("POST",`/api/conversations/${e}/send-message`,{content:Ce.content,channel:(z==null?void 0:z.platform)||"web",attachments:Ce.attachments||[],phoneLineId:(z==null?void 0:z.platform)==="sms"?d:void 0})).json(),onMutate:async Ce=>{await he.cancelQueries({queryKey:[`/api/conversations/${e}`]});const lt=he.getQueryData([`/api/conversations/${e}`]);return he.setQueryData([`/api/conversations/${e}`],sn=>{if(!sn)return sn;const es={id:-Date.now(),conversationId:e,content:Ce.content,sender:"agent",fromCustomer:!1,timestamp:new Date,topics:null,channel:(z==null?void 0:z.platform)||"web",isAutomated:!1,deliveryStatus:null,readAt:null,edited:!1,editedAt:null,metadata:Ce.attachments&&Ce.attachments.length>0?{attachments:Ce.attachments}:null};return{...sn,data:{...sn.data,messages:[...sn.data.messages||[],es]}}}),{previousConversation:lt}},onError:(Ce,lt,sn)=>{sn!=null&&sn.previousConversation&&he.setQueryData([`/api/conversations/${e}`],sn.previousConversation),M(lt.content),ce({title:"Message failed to send",description:"Your message couldn't be sent. Click retry to try again.",variant:"destructive"})},onSuccess:()=>{f(""),M(null),he.invalidateQueries({queryKey:[`/api/conversations/${e}`]}),Fe()}}),dc=je({mutationFn:async()=>(await Ne("POST",`/api/conversations/${e}/return-to-ai`,{agentName:(le==null?void 0:le.username)||"Agent",notifyCustomer:!0})).json(),onSuccess:()=>{he.invalidateQueries({queryKey:[`/api/conversations/${e}`]}),he.invalidateQueries({queryKey:["/api/conversations"]})}}),Ji=je({mutationFn:async()=>(await Ne("POST",`/api/conversations/${e}/assign`,{agentName:(le==null?void 0:le.username)||"Agent"})).json(),onSuccess:()=>{he.invalidateQueries({queryKey:[`/api/conversations/${e}`]}),he.invalidateQueries({queryKey:["/api/conversations"]})}}),xd=je({mutationFn:async Ce=>(await Ne("POST",`/api/conversations/${e}/snooze`,{snoozedUntil:Ce})).json(),onSuccess:()=>{he.invalidateQueries({queryKey:[`/api/conversations/${e}`]}),he.invalidateQueries({queryKey:["/api/conversations"]})}}),yd=je({mutationFn:async()=>(await Ne("POST",`/api/conversations/${e}/resolve`)).json(),onSuccess:()=>{he.invalidateQueries({queryKey:[`/api/conversations/${e}`]}),he.invalidateQueries({queryKey:["/api/conversations"]})}});p.useEffect(()=>{const Ce=Dx();return pe.current=Ce,Ce.on("connect",()=>{console.log("[THREAD VIEW] Connected to WebSocket"),C("connected"),Ce.emit("join_conversation",e)}),Ce.on("disconnect",()=>{console.log("[THREAD VIEW] Disconnected from WebSocket"),C("disconnected")}),Ce.io.on("reconnect_attempt",()=>{console.log("[THREAD VIEW] Attempting to reconnect..."),C("reconnecting")}),Ce.io.on("reconnect",()=>{console.log("[THREAD VIEW] Reconnected to WebSocket"),C("connected"),Ce.emit("join_conversation",e)}),Ce.on("new_message",lt=>{lt.conversationId===e&&(console.log("[THREAD VIEW] New message received:",lt),he.invalidateQueries({queryKey:[`/api/conversations/${e}`]}),Fe())}),Ce.on("conversation_updated",lt=>{lt.conversationId===e&&(console.log("[THREAD VIEW] Conversation updated:",lt),he.invalidateQueries({queryKey:[`/api/conversations/${e}`]}))}),Ce.on("control_mode_changed",lt=>{lt.conversationId===e&&(console.log("[THREAD VIEW] Control mode changed:",lt),he.invalidateQueries({queryKey:[`/api/conversations/${e}`]}))}),Ce.on("user_typing",lt=>{lt.conversationId===e&&lt.username!==(le==null?void 0:le.username)&&(console.log("[THREAD VIEW] Typing event:",lt),j(sn=>{const es=new Set(sn);return lt.isTyping?es.add(lt.username):es.delete(lt.username),es}))}),()=>{me.current&&clearTimeout(me.current),le!=null&&le.username&&Ce.emit("typing_stop",{conversationId:e,username:le.username}),Ce.emit("leave_conversation",e),Ce.disconnect(),pe.current=null}},[e,he,le==null?void 0:le.username]),p.useEffect(()=>{var Ce;(Ce=Me.current)==null||Ce.scrollIntoView({behavior:"smooth"})},[z==null?void 0:z.messages]),p.useEffect(()=>{de.current=!1;try{const Ce=`message-draft-${e}`,lt=localStorage.getItem(Ce);f(lt||"")}catch(Ce){console.warn("[DRAFTS] Failed to restore draft, clearing:",Ce);try{localStorage.removeItem(`message-draft-${e}`)}catch{}f("")}},[e]),p.useEffect(()=>{const Ce=setTimeout(()=>{de.current=!0},0);return()=>clearTimeout(Ce)},[e]),p.useEffect(()=>{if(!de.current)return;const Ce=`message-draft-${e}`,lt=setTimeout(()=>{try{u.trim()?localStorage.setItem(Ce,u):localStorage.removeItem(Ce)}catch(sn){console.warn("[DRAFTS] Failed to save draft:",sn)}},300);return()=>clearTimeout(lt)},[u,e]);const vd=Ce=>{!(le!=null&&le.username)||!pe.current||pe.current.emit(Ce?"typing_start":"typing_stop",{conversationId:e,username:le.username})},Ir=Ce=>{if(Ce.length>1600){ce({title:"Character limit reached",description:"SMS messages are limited to 1600 characters",variant:"destructive"});return}f(Ce),(z==null?void 0:z.controlMode)==="manual"&&Ce.trim()?(vd(!0),me.current&&clearTimeout(me.current),me.current=setTimeout(()=>{vd(!1)},2e3)):vd(!1)},Fs=async()=>{if(!(z!=null&&z.messages)||z.messages.length===0||b)return;const Ce=re.current,lt=Ce==null?void 0:Ce.querySelector("[data-radix-scroll-area-viewport]"),sn=(lt==null?void 0:lt.scrollHeight)||0,es=(lt==null?void 0:lt.scrollTop)||0;w(!0);try{const Ma=z.messages[0],Io=Ma.timestamp?new Date(Ma.timestamp).toISOString():"",kl=await(await fetch(`/api/conversations/${e}?before=${Io}&limit=50`)).json();kl.success&&kl.data&&(he.setQueryData([`/api/conversations/${e}`],Lo=>Lo&&{...Lo,data:{...Lo.data,messages:[...kl.data.messages,...Lo.data.messages],hasMore:kl.data.hasMore}}),v(kl.data.hasMore||!1),setTimeout(()=>{if(lt){const pg=lt.scrollHeight-sn;lt.scrollTop=es+pg}},0))}catch(Ma){console.error("Error loading more messages:",Ma)}finally{w(!1)}},Zs=async Ce=>{const lt=Ce.target.files;if(!lt||lt.length===0)return;const sn=lt[0],es=sn.type.startsWith("image/"),Ma=sn.type==="application/pdf";if(!es&&!Ma){ce({title:"Invalid file type",description:"Only images and PDFs are supported",variant:"destructive"});return}if(sn.size>10*1024*1024){ce({title:"File too large",description:"Maximum file size is 10MB",variant:"destructive"});return}P([sn]),R(null),I(!0);try{const Io=new FormData;Io.append("file",sn),Io.append("conversationId",e.toString());const Cl=await fetch("/api/messages/upload-attachment",{method:"POST",credentials:"include",body:Io});if(!Cl.ok){const Lo=await Cl.json().catch(()=>({}));throw new Error(Lo.message||Lo.error||"Upload failed")}const kl=await Cl.json();P([Object.assign(sn,{uploadedData:kl.attachment})]),R(null),ce({title:"File uploaded",description:`${sn.name} is ready to send`})}catch(Io){console.error("File upload error:",Io);const Cl=Io.message||"Could not upload file";R(Cl),ce({title:"Upload failed",description:Cl,variant:"destructive"})}finally{I(!1)}ne.current&&(ne.current.value="")},Xn=()=>{P([]),R(null)},Hn=async()=>{if(A.length===0)return;const Ce=A[0];R(null),I(!0);try{const lt=new FormData;lt.append("file",Ce),lt.append("conversationId",e.toString());const sn=await fetch("/api/messages/upload-attachment",{method:"POST",credentials:"include",body:lt});if(!sn.ok){const Ma=await sn.json().catch(()=>({}));throw new Error(Ma.message||Ma.error||"Upload failed")}const es=await sn.json();P([Object.assign(Ce,{uploadedData:es.attachment})]),R(null),ce({title:"File uploaded",description:`${Ce.name} is ready to send`})}catch(lt){console.error("File upload retry error:",lt);const sn=lt.message||"Could not upload file";R(sn),ce({title:"Upload failed",description:sn,variant:"destructive"})}finally{I(!1)}},Ns=()=>{if(u.trim()||A.length>0){const Ce=u,lt=A.map(sn=>sn.uploadedData).filter(Boolean);f(""),P([]),$(!1),vd(!1),localStorage.removeItem(`message-draft-${e}`),Rs.mutate({content:Ce,attachments:lt})}},ti=Ce=>{f(Ce)},jl=Ce=>{f(lt=>lt+Ce+" ")},Xr=async(Ce,lt)=>{await Ne("POST",`/api/quick-replies/templates/${Ce}/use`),Rs.mutate({content:lt,attachments:[]})},oa=Ce=>{const lt=new Set(h);lt.has(Ce)?lt.delete(Ce):lt.add(Ce),m(lt)},ni=()=>{if(!z)return null;switch(z.controlMode){case"manual":return n.jsxs(ge,{variant:"default",className:"gap-1 bg-purple-600","data-testid":"badge-status-manual",children:[n.jsx(Fn,{className:"h-3 w-3"}),"Manual Mode"]});case"auto":return n.jsxs(ge,{variant:"secondary",className:"gap-1","data-testid":"badge-status-ai",children:[n.jsx(yo,{className:"h-3 w-3"}),"AI Mode"]});case"paused":return n.jsxs(ge,{variant:"outline",className:"gap-1","data-testid":"badge-status-paused",children:[n.jsx(Rt,{className:"h-3 w-3"}),"Paused"]});default:return null}};return rt?n.jsx("div",{className:"flex items-center justify-center h-full",children:n.jsx(nt,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):z?n.jsxs("div",{className:"flex flex-col h-full bg-white dark:bg-gray-950",children:[n.jsxs("div",{className:"border-b dark:border-gray-800 bg-white dark:bg-gray-900 px-6 py-4 shadow-sm",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[n.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[t&&n.jsxs(_,{variant:"ghost",size:"sm",onClick:t,className:"md:hidden flex items-center gap-2 -ml-2 hover:bg-gray-100 dark:hover:bg-gray-800","data-testid":"button-back-mobile",children:[n.jsx(pi,{className:"h-5 w-5"}),n.jsx("span",{className:"font-medium",children:"Back"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(bt,{className:"h-5 w-5 text-primary"}),n.jsxs("div",{children:[n.jsx("h2",{className:"font-semibold","data-testid":"text-customer-name",children:z.customerName||z.customerPhone}),z.customerName&&n.jsx("p",{className:"text-sm text-muted-foreground","data-testid":"text-customer-phone",children:z.customerPhone})]})]}),ni()]}),n.jsxs("div",{className:"flex items-center gap-2 flex-wrap max-w-full",children:[!z.assignedAgent&&n.jsxs(_,{variant:"outline",size:"sm",onClick:()=>Ji.mutate(),disabled:Ji.isPending,className:"gap-2","data-testid":"button-assign-to-me",children:[Ji.isPending?n.jsx(nt,{className:"h-4 w-4 animate-spin"}):n.jsx(Fn,{className:"h-4 w-4"}),"Assign to Me"]}),n.jsxs(hh,{children:[n.jsx(mh,{asChild:!0,children:n.jsxs(_,{variant:"outline",size:"sm",className:"gap-2","data-testid":"button-snooze",children:[n.jsx(Rt,{className:"h-4 w-4"}),"Snooze"]})}),n.jsx(Pu,{className:"w-48 p-2",children:n.jsxs("div",{className:"space-y-1",children:[n.jsx(_,{variant:"ghost",size:"sm",className:"w-full justify-start",onClick:()=>{const Ce=new Date(Date.now()+36e5).toISOString();xd.mutate(Ce)},children:"1 hour"}),n.jsx(_,{variant:"ghost",size:"sm",className:"w-full justify-start",onClick:()=>{const Ce=new Date(Date.now()+144e5).toISOString();xd.mutate(Ce)},children:"4 hours"}),n.jsx(_,{variant:"ghost",size:"sm",className:"w-full justify-start",onClick:()=>{const Ce=new Date;Ce.setDate(Ce.getDate()+1),Ce.setHours(9,0,0,0),xd.mutate(Ce.toISOString())},children:"Tomorrow 9 AM"}),n.jsx(_,{variant:"ghost",size:"sm",className:"w-full justify-start",onClick:()=>{const Ce=new Date;Ce.setDate(Ce.getDate()+7),Ce.setHours(9,0,0,0),xd.mutate(Ce.toISOString())},children:"Next week"})]})})]}),z.status!=="closed"&&n.jsxs(_,{variant:"outline",size:"sm",onClick:()=>yd.mutate(),disabled:yd.isPending,className:"gap-2","data-testid":"button-resolve",children:[yd.isPending?n.jsx(nt,{className:"h-4 w-4 animate-spin"}):n.jsx(on,{className:"h-4 w-4"}),"Mark Resolved"]}),z.controlMode==="manual"&&n.jsxs(_,{variant:"default",size:"sm",onClick:()=>dc.mutate(),disabled:dc.isPending,className:"gap-2 bg-blue-600 hover:bg-blue-700","data-testid":"button-hand-to-ai",children:[dc.isPending?n.jsx(nt,{className:"h-4 w-4 animate-spin"}):n.jsx(yo,{className:"h-4 w-4"}),"Return to AI"]}),n.jsxs(_,{variant:"outline",size:"sm",onClick:()=>F(!E),className:"gap-2","data-testid":"button-search-messages",children:[E?n.jsx(Ws,{className:"h-4 w-4"}):n.jsx(Ga,{className:"h-4 w-4"}),E?"Close":"Search"]})]})]}),E&&n.jsxs("div",{className:"px-6 py-3 border-t dark:border-gray-700 bg-gray-50 dark:bg-gray-800/50",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("div",{className:"relative flex-1",children:[n.jsx(Ga,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),n.jsx("input",{type:"text",placeholder:"Search messages...",value:D,onChange:Ce=>W(Ce.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-900 text-sm focus:outline-none focus:ring-2 focus:ring-primary/20","data-testid":"input-search-messages",autoFocus:!0})]}),D&&n.jsx(_,{variant:"ghost",size:"sm",onClick:()=>W(""),"data-testid":"button-clear-search",children:"Clear"})]}),D&&n.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:[J.length," ",J.length===1?"result":"results"," found"]})]})]}),n.jsxs("div",{className:"flex-1 flex flex-col lg:flex-row overflow-hidden min-h-0",children:[n.jsxs("div",{className:"flex-1 flex flex-col min-h-0 overflow-hidden",children:[c&&n.jsx("div",{className:"border-b dark:border-gray-800 bg-amber-50 dark:bg-amber-950/20 px-4 py-3",children:c}),S!=="connected"&&n.jsx("div",{className:`border-b px-4 py-2.5 text-sm flex items-center gap-2 ${S==="disconnected"?"bg-red-50 dark:bg-red-950/30 border-red-200 dark:border-red-800 text-red-700 dark:text-red-300":"bg-yellow-50 dark:bg-yellow-950/30 border-yellow-200 dark:border-yellow-800 text-yellow-700 dark:text-yellow-300"}`,"data-testid":"socket-status-banner",children:S==="disconnected"?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"h-2 w-2 rounded-full bg-red-500 dark:bg-red-400"}),n.jsx("span",{className:"font-medium",children:"Connection lost - Messages may not be sent or received"})]}):n.jsxs(n.Fragment,{children:[n.jsx(nt,{className:"h-3.5 w-3.5 animate-spin"}),n.jsx("span",{className:"font-medium",children:"Reconnecting to server..."})]})}),n.jsx(ia,{ref:re,className:"flex-1 bg-gray-50 dark:bg-gray-900/50",children:n.jsx("div",{className:"max-w-4xl mx-auto py-6",children:J&&J.length>0?n.jsxs(n.Fragment,{children:[!D&&y&&z.messages&&z.messages.length>=20&&n.jsx("div",{className:"flex justify-center mb-4",children:n.jsxs(_,{variant:"outline",size:"sm",onClick:Fs,disabled:b,className:"text-xs bg-white dark:bg-gray-800 shadow-sm","data-testid":"button-load-more",children:[b?n.jsx(nt,{className:"h-3 w-3 mr-1.5 animate-spin"}):n.jsx(Rt,{className:"h-3 w-3 mr-1.5"}),b?"Loading...":"Load older messages"]})}),qDe(J).map((Ce,lt)=>n.jsxs("div",{className:"mb-6",children:[n.jsx("div",{className:"flex items-center justify-center mb-4",children:n.jsx("div",{className:"bg-white dark:bg-gray-800 px-3 py-1 rounded-full shadow-sm border border-gray-200 dark:border-gray-700",children:n.jsx("span",{className:"text-xs font-medium text-gray-600 dark:text-gray-300",children:WDe(Ce.date)})})}),n.jsx("div",{className:"space-y-0.5",children:Ce.messages.map(sn=>n.jsx("div",{ref:es=>Js(es,sn),"data-message-id":sn.id,children:n.jsx(DDe,{message:sn,conversationCustomerName:z.customerName,conversationCustomerPhone:z.customerPhone,conversationAssignedAgent:z.assignedAgent,reactions:ye.filter(es=>es.messageId===sn.id),onAddReaction:es=>cc.mutate({messageId:sn.id,emoji:es}),onRemoveReaction:es=>Eo.mutate(es),currentUserId:le==null?void 0:le.id,reactionSlot:r,scheduledMetaSlot:s,deliveryIndicatorSlot:a,messageActionSlot:i})},sn.id))})]},lt)),(Re||N.size>0)&&n.jsx("div",{className:"flex justify-start mb-1 px-2 animate-fadeIn",children:n.jsx("div",{className:"bg-gray-200 dark:bg-gray-700 rounded-2xl rounded-bl-md px-4 py-3 shadow-sm",children:n.jsxs("div",{className:"flex flex-col gap-2",children:[N.size>0&&n.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-300 mb-1",children:[Array.from(N).join(", ")," ",N.size===1?"is":"are"," typing..."]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("div",{className:"w-2 h-2 bg-gray-500 dark:bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),n.jsx("div",{className:"w-2 h-2 bg-gray-500 dark:bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),n.jsx("div",{className:"w-2 h-2 bg-gray-500 dark:bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})]})})}),n.jsx("div",{ref:Me})]}):n.jsxs("div",{className:"text-center text-muted-foreground py-8",children:[n.jsx(on,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),n.jsx("p",{children:"No messages yet"}),n.jsx("p",{className:"text-sm mt-1",children:"Start the conversation!"})]})})}),z.controlMode==="manual"&&st.length>0&&n.jsxs("div",{className:"border-t dark:border-gray-800 bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-950/20 dark:to-purple-950/20",children:[n.jsxs("button",{onClick:()=>Z(!B),className:"w-full flex items-center gap-2 px-4 py-3 hover:bg-blue-100/50 dark:hover:bg-blue-900/20 transition-colors","data-testid":"button-toggle-suggestions",children:[n.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-500 p-1.5 rounded-lg",children:n.jsx(ln,{className:"h-3.5 w-3.5 text-white"})}),n.jsx("span",{className:"text-sm font-semibold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"AI-Powered Suggestions"}),n.jsx(ge,{variant:"secondary",className:"text-xs",children:st.length}),n.jsx("div",{className:"ml-auto",children:n.jsx(Ui,{className:`h-4 w-4 text-blue-600 dark:text-blue-400 transition-transform ${B?"-rotate-180":""}`})})]}),!B&&n.jsx("div",{className:"px-4 pb-3",children:n.jsx("div",{className:"flex flex-wrap gap-2 max-w-4xl mx-auto",children:st.map((Ce,lt)=>n.jsx(_,{variant:"outline",size:"sm",onClick:()=>ti(Ce.content),className:"text-xs h-auto py-2.5 px-4 whitespace-normal text-left bg-white dark:bg-gray-800 hover:bg-blue-50 dark:hover:bg-blue-900/20 border-blue-200 dark:border-blue-800 transition-all hover:scale-105 hover:shadow-md","data-testid":`suggestion-${Ce.id}`,children:n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx("span",{className:"font-mono text-blue-600 dark:text-blue-400 text-[10px] mt-0.5",children:lt+1}),n.jsx("span",{className:"flex-1",children:Ce.content}),Ce.confidence>=.9&&n.jsx(ge,{variant:"secondary",className:"text-[10px] px-1.5 py-0 bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400",children:"High"})]})},Ce.id))})})]}),Se!=="not_ready"&&n.jsx("div",{className:"border-t dark:border-gray-800 px-4 py-3 bg-gradient-to-r from-emerald-50 to-blue-50 dark:from-emerald-950/20 dark:to-blue-950/20",children:n.jsxs("div",{className:"flex items-center gap-3 max-w-4xl mx-auto",children:[Se==="ready_for_draft"&&n.jsxs(n.Fragment,{children:[n.jsxs("span",{className:"inline-flex items-center px-2.5 py-1 text-xs font-medium rounded-full bg-emerald-100 text-emerald-800 dark:bg-emerald-900/40 dark:text-emerald-200","data-testid":"badge-ready-to-book",children:[n.jsx("span",{className:"w-1.5 h-1.5 bg-emerald-500 rounded-full mr-1.5 animate-pulse"}),"Ready to book"]}),n.jsx("span",{className:"text-xs text-emerald-700 dark:text-emerald-300",children:'All required information collected. Click "Create Appointment" to submit.'})]}),Se==="ready_for_human_review"&&n.jsxs(n.Fragment,{children:[n.jsxs("span",{className:"inline-flex items-center px-2.5 py-1 text-xs font-medium rounded-full bg-amber-100 text-amber-800 dark:bg-amber-900/40 dark:text-amber-200","data-testid":"badge-needs-approval",children:[n.jsx("span",{className:"w-1.5 h-1.5 bg-amber-500 rounded-full mr-1.5 animate-pulse"}),"Needs manual approval"]}),n.jsx("span",{className:"text-xs text-amber-700 dark:text-amber-300",children:"Customer may be outside service area or requires special review."})]})]})}),n.jsx(IDe,{conversationId:e}),z.controlMode==="manual"&&n.jsx($De,{inlineSuggestionsSlot:o,sidePanelSlot:l}),k&&z.controlMode==="manual"&&n.jsx("div",{className:"border-t border-red-200 dark:border-red-800 bg-red-50 dark:bg-red-950/30 px-4 py-3",children:n.jsxs("div",{className:"flex items-center justify-between gap-3 max-w-4xl mx-auto",children:[n.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[n.jsx(Wt,{className:"h-4 w-4 text-red-600 dark:text-red-400 flex-shrink-0"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:"Message failed to send"}),n.jsx("p",{className:"text-xs text-red-600 dark:text-red-400 truncate",children:k})]})]}),n.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[n.jsxs(_,{variant:"outline",size:"sm",onClick:()=>{Rs.mutate({content:k,attachments:[]})},disabled:Rs.isPending,className:"gap-1 border-red-300 dark:border-red-700 hover:bg-red-100 dark:hover:bg-red-900/50","data-testid":"button-retry-message",children:[Rs.isPending?n.jsx(nt,{className:"h-3.5 w-3.5 animate-spin"}):n.jsx(Jc,{className:"h-3.5 w-3.5"}),"Retry"]}),n.jsx(_,{variant:"ghost",size:"sm",onClick:()=>M(null),className:"hover:bg-red-100 dark:hover:bg-red-900/50","data-testid":"button-dismiss-error",children:"Dismiss"})]})]})}),n.jsxs("div",{className:"border-t dark:border-gray-800 bg-white dark:bg-gray-900 px-4 py-4 shadow-lg",children:[(z==null?void 0:z.platform)==="sms"&&_e&&n.jsx("div",{className:"mb-3 max-w-4xl mx-auto",children:n.jsxs("div",{className:`flex items-center gap-2 px-3 py-2 rounded-lg border text-xs ${z.phoneLineId&&z.phoneLineId!==d?"bg-amber-50 dark:bg-amber-950/30 border-amber-200 dark:border-amber-800":"bg-blue-50 dark:bg-blue-950/30 border-blue-200 dark:border-blue-800"}`,children:[n.jsx(pu,{className:`h-3.5 w-3.5 flex-shrink-0 ${z.phoneLineId&&z.phoneLineId!==d?"text-amber-600 dark:text-amber-400":"text-blue-600 dark:text-blue-400"}`}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("span",{className:`font-medium ${z.phoneLineId&&z.phoneLineId!==d?"text-amber-900 dark:text-amber-100":"text-blue-900 dark:text-blue-100"}`,children:["Sending from: ",_e.label," (",_e.phoneNumber,")"]}),z.phoneLineId&&z.phoneLineId!==d&&n.jsx("span",{className:"text-amber-700 dark:text-amber-300 ml-1",children:" Different from conversation's original line"})]})]})}),A.length>0&&n.jsx("div",{className:"mb-3 max-w-4xl mx-auto",children:n.jsxs("div",{className:`flex items-center gap-2 p-2 rounded-lg border ${L?"bg-red-50 dark:bg-red-950/30 border-red-200 dark:border-red-800":"bg-blue-50 dark:bg-blue-950/30 border-blue-200 dark:border-blue-800"}`,children:[A[0].type.startsWith("image/")?n.jsx($i,{className:`h-5 w-5 flex-shrink-0 ${L?"text-red-600 dark:text-red-400":"text-blue-600 dark:text-blue-400"}`}):n.jsx(bs,{className:`h-5 w-5 flex-shrink-0 ${L?"text-red-600 dark:text-red-400":"text-blue-600 dark:text-blue-400"}`}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:`text-sm font-medium truncate ${L?"text-red-900 dark:text-red-100":"text-blue-900 dark:text-blue-100"}`,children:A[0].name}),n.jsx("p",{className:`text-xs ${L?"text-red-600 dark:text-red-400":"text-blue-600 dark:text-blue-400"}`,children:L||n.jsxs(n.Fragment,{children:[(A[0].size/1024).toFixed(1)," KB",T&&n.jsx("span",{className:"ml-2",children:" Uploading..."})]})})]}),n.jsx("div",{className:"flex gap-1",children:T?n.jsx(nt,{className:"h-4 w-4 animate-spin text-blue-600 dark:text-blue-400"}):L?n.jsxs(n.Fragment,{children:[n.jsxs(_,{variant:"ghost",size:"sm",onClick:Hn,className:"h-6 px-2 text-xs hover:bg-red-100 dark:hover:bg-red-900","data-testid":"button-retry-upload",children:[n.jsx(Jc,{className:"h-3 w-3 mr-1"}),"Retry"]}),n.jsx(_,{variant:"ghost",size:"sm",onClick:Xn,className:"h-6 w-6 p-0 hover:bg-red-100 dark:hover:bg-red-900","data-testid":"button-remove-attachment",children:n.jsx(Jr,{className:"h-4 w-4"})})]}):n.jsx(_,{variant:"ghost",size:"sm",onClick:Xn,className:"h-6 w-6 p-0 hover:bg-blue-100 dark:hover:bg-blue-900","data-testid":"button-remove-attachment",children:n.jsx(Jr,{className:"h-4 w-4"})})})]})}),n.jsxs("div",{className:"flex gap-2.5 max-w-4xl mx-auto items-end",children:[n.jsx("input",{ref:ne,type:"file",accept:"image/*,.pdf",onChange:Zs,className:"hidden","data-testid":"input-file-attachment"}),n.jsx(_,{variant:"ghost",className:"h-11 w-11 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors p-0 flex items-center justify-center",onClick:()=>{var Ce;return(Ce=ne.current)==null?void 0:Ce.click()},disabled:T||A.length>0,"data-testid":"button-attach-file",title:"Attach file",children:n.jsx(age,{className:"h-5 w-5 text-gray-600 dark:text-gray-400"})}),n.jsxs("div",{className:"flex-1 relative min-w-0",children:[n.jsx(un,{ref:Y,value:u,onChange:Ce=>Ir(Ce.target.value),placeholder:"Message",className:"w-full min-h-[44px] max-h-[200px] resize-none text-[15px] leading-[1.4] bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 dark:focus:border-blue-400 rounded-[22px] px-4 py-[11px] placeholder:text-gray-400 dark:placeholder:text-gray-500 transition-all duration-200 shadow-sm hover:border-gray-400 dark:hover:border-gray-600",disabled:Rs.isPending,"data-testid":"input-message",rows:1,onKeyDown:Ce=>{Ce.key==="Enter"&&!Ce.shiftKey&&(Ce.preventDefault(),u.trim()&&Ns())}}),u.length>0&&n.jsx("div",{className:"absolute bottom-2.5 right-3.5 text-[11px] text-gray-400 dark:text-gray-500 pointer-events-none select-none",children:n.jsx("span",{className:`font-medium transition-colors ${u.length>=1600?"text-red-500 dark:text-red-400":u.length>=1e3?"text-amber-500 dark:text-amber-400":""}`,children:u.length})})]}),n.jsxs(hh,{children:[n.jsx(mh,{asChild:!0,children:n.jsx(_,{variant:"ghost",className:"h-11 w-11 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors p-0 flex items-center justify-center","data-testid":"button-template-variables",title:"Insert template variable",children:n.jsx(pj,{className:"h-5 w-5 text-gray-600 dark:text-gray-400"})})}),n.jsxs(Pu,{className:"w-80 p-0",align:"end",children:[n.jsxs("div",{className:"p-3 border-b dark:border-gray-800",children:[n.jsxs("h3",{className:"font-semibold text-sm flex items-center gap-2",children:[n.jsx(pj,{className:"h-4 w-4 text-primary"}),"Template Variables"]}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Click to insert dynamic content"})]}),n.jsx(ia,{className:"max-h-[300px]",children:n.jsx("div",{className:"p-2",children:wi.map(Ce=>n.jsx("button",{onClick:()=>jl(Ce.variable),className:"w-full text-left px-3 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors","data-testid":`template-var-${Ce.variable}`,children:n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsx("div",{className:"flex items-start justify-between gap-2",children:n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("div",{className:"font-mono text-xs font-semibold text-primary truncate",children:Ce.variable}),n.jsx("div",{className:"text-xs text-muted-foreground",children:Ce.description})]})}),n.jsxs("div",{className:"bg-blue-50 dark:bg-blue-950/30 border border-blue-200 dark:border-blue-800 rounded px-2 py-1.5 mt-1",children:[n.jsx("div",{className:"text-[10px] text-muted-foreground mb-0.5",children:"Preview:"}),n.jsx("div",{className:"text-xs font-medium text-blue-900 dark:text-blue-100 truncate",children:Ce.value})]})]})},Ce.variable))})})]})]}),n.jsx(_,{onClick:Ns,disabled:!u.trim()||Rs.isPending,className:"h-11 w-11 bg-blue-500 hover:bg-blue-600 dark:bg-blue-600 dark:hover:bg-blue-700 text-white rounded-full shadow-md hover:shadow-lg transition-all disabled:opacity-40 disabled:cursor-not-allowed p-0 flex items-center justify-center disabled:bg-gray-300 dark:disabled:bg-gray-700","data-testid":"button-send",children:Rs.isPending?n.jsx(nt,{className:"h-5 w-5 animate-spin"}):n.jsx(Vi,{className:"h-5 w-5 translate-x-[1px]"})})]})]})]}),z.controlMode==="manual"&&n.jsx("div",{className:"lg:w-80 border-t lg:border-t-0 lg:border-l dark:border-gray-800 bg-gray-50 dark:bg-gray-900 overflow-y-auto max-h-[400px] lg:max-h-full",children:n.jsxs("div",{className:"p-4 space-y-4",children:[n.jsxs("div",{className:"space-y-3",children:[n.jsx("h3",{className:"text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Professional Controls"}),n.jsx(RDe,{controlMode:z.controlMode,assignedAgent:z.assignedAgent,lastHandoffAt:z.lastHandoffAt,manualModeStartedAt:z.manualModeStartedAt}),n.jsx(VDe,{conversationId:e,controlMode:z.controlMode}),n.jsx(UDe,{conversationId:e}),n.jsx(HDe,{conversationId:e})]}),En.length>0&&n.jsxs("div",{className:"pt-4 border-t dark:border-gray-800",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[n.jsx("div",{className:"bg-primary/10 p-1.5 rounded-lg",children:n.jsx(on,{className:"h-4 w-4 text-primary"})}),"Quick Replies"]}),n.jsxs(ge,{variant:"outline",className:"text-xs",children:[En.reduce((Ce,lt)=>Ce+lt.templates.length,0)," templates"]})]}),n.jsx("div",{className:"space-y-2",children:En.map(Ce=>n.jsxs(b1,{open:h.has(Ce.id),onOpenChange:()=>oa(Ce.id),children:[n.jsx(w1,{asChild:!0,children:n.jsxs(_,{variant:"ghost",className:"w-full justify-between","data-testid":`category-${Ce.id}`,children:[n.jsxs("span",{className:"flex items-center gap-2",children:[Ce.icon&&n.jsx("span",{children:Ce.icon}),Ce.name]}),h.has(Ce.id)?n.jsx(Ui,{className:"h-4 w-4"}):n.jsx(vl,{className:"h-4 w-4"})]})}),n.jsx(j1,{className:"space-y-1 mt-1",children:Ce.templates.map(lt=>n.jsx(_,{variant:"outline",size:"sm",onClick:()=>Xr(lt.id,lt.content),className:"w-full text-left justify-start text-xs h-auto py-2 px-3 whitespace-normal",disabled:Rs.isPending,"data-testid":`template-${lt.id}`,children:lt.content},lt.id))})]},Ce.id))})]})]})})]})]}):n.jsx("div",{className:"flex items-center justify-center h-full",children:n.jsx("p",{className:"text-muted-foreground",children:"Conversation not found"})})}function YDe({controlMode:e,onTakeOver:t}){return e==="ai"||e==="auto"?n.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border-b border-yellow-200 dark:border-yellow-800 px-4 py-2 flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx(yo,{className:"h-4 w-4 text-yellow-700 dark:text-yellow-400"}),n.jsx("span",{className:"text-sm font-medium text-yellow-900 dark:text-yellow-200",children:"AI Autopilot Active"})]}),n.jsx("span",{className:"text-xs text-yellow-700 dark:text-yellow-400",children:"AI is handling this conversation"})]}),n.jsxs(_,{size:"sm",variant:"outline",onClick:t,className:"bg-white dark:bg-gray-800 border-yellow-300 dark:border-yellow-700 text-yellow-900 dark:text-yellow-200 hover:bg-yellow-100 dark:hover:bg-yellow-900/40","data-testid":"button-take-over",children:[n.jsx(Fn,{className:"h-3.5 w-3.5 mr-1.5"}),"Take Over"]})]}):null}function QDe({conversationId:e,onBack:t,onTakeOver:r,controlMode:s="auto"}){return e?n.jsxs("div",{className:"flex-1 flex flex-col min-h-0 nightops-thread-wrapper",children:[t&&n.jsx("div",{className:"p-2 border-b border-slate-700/40 lg:hidden",children:n.jsxs(_,{variant:"ghost",size:"sm",onClick:t,className:"text-slate-300 hover:text-slate-100 hover:bg-slate-800/60","data-testid":"button-back-mobile",children:[n.jsx(pi,{className:"h-4 w-4 mr-2"}),"Back"]})}),n.jsx("div",{className:"border-b border-slate-700/40",children:n.jsx(YDe,{controlMode:s,onTakeOver:r||(()=>{})})}),n.jsx("div",{className:"flex-1 overflow-hidden flex flex-col nightops-threadview-container",children:n.jsx(GDe,{conversationId:e,onBack:void 0})})]}):n.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-8 text-center",children:[n.jsx(q.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.3},className:"w-20 h-20 rounded-full bg-slate-800/60 flex items-center justify-center mb-6 ring-1 ring-slate-700/60",children:n.jsx(on,{className:"h-10 w-10 text-slate-600"})}),n.jsx(q.h3,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1,duration:.3},className:"text-lg font-semibold text-slate-200 mb-2",children:"No conversation selected"}),n.jsx(q.p,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2,duration:.3},className:"text-sm text-slate-500 max-w-sm",children:"Select a conversation from the inbox to view messages and start communicating"})]})}function KDe({customerInfo:e,isLoading:t=!1,onBookAppointment:r}){const s=(o,l)=>o?o.split(" ").map(c=>c[0]).join("").toUpperCase().slice(0,2):l.slice(-2);if(t)return n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"nightops-card p-4",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx("div",{className:"w-12 h-12 rounded-full bg-slate-700/60 animate-pulse"}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("div",{className:"h-4 w-32 bg-slate-700/60 rounded animate-pulse"}),n.jsx("div",{className:"h-3 w-24 bg-slate-700/60 rounded animate-pulse"})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("div",{className:"h-3 w-full bg-slate-700/60 rounded animate-pulse"}),n.jsx("div",{className:"h-3 w-3/4 bg-slate-700/60 rounded animate-pulse"})]})]}),n.jsxs("div",{className:"nightops-card p-4",children:[n.jsx("div",{className:"h-4 w-20 bg-slate-700/60 rounded animate-pulse mb-3"}),n.jsx("div",{className:"h-16 w-full bg-slate-700/60 rounded animate-pulse"})]})]});if(!e)return n.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-center p-6",children:[n.jsx("div",{className:"w-16 h-16 rounded-full bg-slate-800/60 flex items-center justify-center mb-4 ring-1 ring-slate-700/60",children:n.jsx(Fn,{className:"h-8 w-8 text-slate-600"})}),n.jsx("h3",{className:"text-sm font-medium text-slate-300 mb-1",children:"No conversation selected"}),n.jsx("p",{className:"text-xs text-slate-500",children:"Select a conversation to view customer details"})]});const a=(e.totalBookings??0)>=5,i=(e.totalBookings??0)>=2;return n.jsxs("div",{className:"space-y-4 text-xs text-slate-200",children:[n.jsxs("div",{className:"nightops-card p-4",children:[n.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[n.jsx("div",{className:Le("nightops-avatar w-12 h-12 text-base",a&&"ring-2 ring-amber-400/60"),children:s(e.name,e.phone)}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h3",{className:"font-semibold text-base text-slate-100 truncate",children:e.name||"Unknown Customer"}),n.jsxs("div",{className:"flex items-center gap-1.5 mt-1 flex-wrap",children:[a&&n.jsxs("span",{className:"inline-flex items-center gap-1 nightops-badge text-amber-300 bg-amber-500/15 border-amber-500/40",children:[n.jsx(sQ,{className:"h-2.5 w-2.5"}),"VIP"]}),i&&!a&&n.jsxs("span",{className:"inline-flex items-center gap-1 nightops-badge nightops-badge-success",children:[n.jsx(Jc,{className:"h-2.5 w-2.5"}),"Returning"]}),!i&&n.jsxs("span",{className:"inline-flex items-center gap-1 nightops-badge",children:[n.jsx(ln,{className:"h-2.5 w-2.5"}),"New"]})]})]})]}),n.jsxs("div",{className:"space-y-2.5",children:[n.jsxs("div",{className:"flex items-center gap-2 text-slate-300",children:[n.jsx(bt,{className:"h-3.5 w-3.5 text-cyan-400 flex-shrink-0"}),n.jsx("span",{className:"truncate",children:e.phone})]}),e.email&&n.jsxs("div",{className:"flex items-center gap-2 text-slate-300",children:[n.jsx(Cr,{className:"h-3.5 w-3.5 text-cyan-400 flex-shrink-0"}),n.jsx("span",{className:"truncate",children:e.email})]}),e.address&&n.jsxs("div",{className:"flex items-start gap-2 text-slate-300",children:[n.jsx(zr,{className:"h-3.5 w-3.5 text-cyan-400 flex-shrink-0 mt-0.5"}),n.jsx("span",{className:"leading-tight",children:e.address})]})]})]}),e.vehicles&&e.vehicles.length>0&&n.jsxs("div",{className:"nightops-card p-4",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[n.jsx(Ys,{className:"h-4 w-4 text-cyan-400"}),n.jsx("span",{className:"nightops-section-title",children:"Vehicles"})]}),n.jsx("div",{className:"space-y-2",children:e.vehicles.map((o,l)=>n.jsxs("div",{className:"p-2.5 rounded-lg bg-slate-800/60 border border-slate-700/40",children:[n.jsxs("p",{className:"font-medium text-slate-100",children:[o.year," ",o.make," ",o.model]}),o.color&&n.jsxs("p",{className:"text-[0.65rem] text-slate-400 mt-0.5",children:["Color: ",o.color]})]},l))})]}),(e.totalBookings!==void 0||e.loyaltyPoints!==void 0)&&n.jsxs("div",{className:"nightops-card p-4",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[n.jsx(Qr,{className:"h-4 w-4 text-cyan-400"}),n.jsx("span",{className:"nightops-section-title",children:"Stats"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.totalBookings!==void 0&&n.jsxs("div",{className:"p-2.5 rounded-lg bg-slate-800/60 border border-slate-700/40 text-center",children:[n.jsx("div",{className:"text-lg font-bold text-cyan-300",children:e.totalBookings}),n.jsx("div",{className:"text-[0.65rem] text-slate-400 uppercase tracking-wide",children:"Bookings"})]}),e.loyaltyPoints!==void 0&&n.jsxs("div",{className:"p-2.5 rounded-lg bg-slate-800/60 border border-slate-700/40 text-center",children:[n.jsx("div",{className:"text-lg font-bold text-purple-300",children:e.loyaltyPoints}),n.jsx("div",{className:"text-[0.65rem] text-slate-400 uppercase tracking-wide",children:"Points"})]})]})]}),e.notes&&n.jsxs("div",{className:"nightops-card p-4",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[n.jsx(bs,{className:"h-4 w-4 text-cyan-400"}),n.jsx("span",{className:"nightops-section-title",children:"Notes"})]}),n.jsx("p",{className:"text-slate-300 whitespace-pre-wrap leading-relaxed",children:e.notes})]}),e.lastBooking&&n.jsxs("div",{className:"nightops-card p-4",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[n.jsx(Dt,{className:"h-4 w-4 text-cyan-400"}),n.jsx("span",{className:"nightops-section-title",children:"Last Booking"})]}),n.jsxs("div",{className:"p-2.5 rounded-lg bg-slate-800/60 border border-slate-700/40",children:[n.jsx("p",{className:"font-medium text-slate-100",children:e.lastBooking.service}),n.jsx("p",{className:"text-[0.65rem] text-slate-400 mt-1",children:new Date(e.lastBooking.date).toLocaleDateString()}),n.jsx("span",{className:Le("inline-block mt-2 nightops-badge",e.lastBooking.status==="completed"&&"nightops-badge-success",e.lastBooking.status==="cancelled"&&"nightops-badge-danger"),children:e.lastBooking.status})]})]}),n.jsx("div",{className:"pt-2",children:n.jsxs(_,{onClick:r,disabled:!r,className:"w-full nightops-button-primary text-sm font-medium py-2.5","data-testid":"button-book-appointment",children:[n.jsx(Dt,{className:"h-4 w-4 mr-2"}),"Book Appointment"]})})]})}function JDe(e){return Q4({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"},child:[]}]})(e)}function ZDe(e){return Q4({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"},child:[]}]})(e)}const XDe={version:4,country_calling_codes:{1:["US","AG","AI","AS","BB","BM","BS","CA","DM","DO","GD","GU","JM","KN","KY","LC","MP","MS","PR","SX","TC","TT","VC","VG","VI"],7:["RU","KZ"],20:["EG"],27:["ZA"],30:["GR"],31:["NL"],32:["BE"],33:["FR"],34:["ES"],36:["HU"],39:["IT","VA"],40:["RO"],41:["CH"],43:["AT"],44:["GB","GG","IM","JE"],45:["DK"],46:["SE"],47:["NO","SJ"],48:["PL"],49:["DE"],51:["PE"],52:["MX"],53:["CU"],54:["AR"],55:["BR"],56:["CL"],57:["CO"],58:["VE"],60:["MY"],61:["AU","CC","CX"],62:["ID"],63:["PH"],64:["NZ"],65:["SG"],66:["TH"],81:["JP"],82:["KR"],84:["VN"],86:["CN"],90:["TR"],91:["IN"],92:["PK"],93:["AF"],94:["LK"],95:["MM"],98:["IR"],211:["SS"],212:["MA","EH"],213:["DZ"],216:["TN"],218:["LY"],220:["GM"],221:["SN"],222:["MR"],223:["ML"],224:["GN"],225:["CI"],226:["BF"],227:["NE"],228:["TG"],229:["BJ"],230:["MU"],231:["LR"],232:["SL"],233:["GH"],234:["NG"],235:["TD"],236:["CF"],237:["CM"],238:["CV"],239:["ST"],240:["GQ"],241:["GA"],242:["CG"],243:["CD"],244:["AO"],245:["GW"],246:["IO"],247:["AC"],248:["SC"],249:["SD"],250:["RW"],251:["ET"],252:["SO"],253:["DJ"],254:["KE"],255:["TZ"],256:["UG"],257:["BI"],258:["MZ"],260:["ZM"],261:["MG"],262:["RE","YT"],263:["ZW"],264:["NA"],265:["MW"],266:["LS"],267:["BW"],268:["SZ"],269:["KM"],290:["SH","TA"],291:["ER"],297:["AW"],298:["FO"],299:["GL"],350:["GI"],351:["PT"],352:["LU"],353:["IE"],354:["IS"],355:["AL"],356:["MT"],357:["CY"],358:["FI","AX"],359:["BG"],370:["LT"],371:["LV"],372:["EE"],373:["MD"],374:["AM"],375:["BY"],376:["AD"],377:["MC"],378:["SM"],380:["UA"],381:["RS"],382:["ME"],383:["XK"],385:["HR"],386:["SI"],387:["BA"],389:["MK"],420:["CZ"],421:["SK"],423:["LI"],500:["FK"],501:["BZ"],502:["GT"],503:["SV"],504:["HN"],505:["NI"],506:["CR"],507:["PA"],508:["PM"],509:["HT"],590:["GP","BL","MF"],591:["BO"],592:["GY"],593:["EC"],594:["GF"],595:["PY"],596:["MQ"],597:["SR"],598:["UY"],599:["CW","BQ"],670:["TL"],672:["NF"],673:["BN"],674:["NR"],675:["PG"],676:["TO"],677:["SB"],678:["VU"],679:["FJ"],680:["PW"],681:["WF"],682:["CK"],683:["NU"],685:["WS"],686:["KI"],687:["NC"],688:["TV"],689:["PF"],690:["TK"],691:["FM"],692:["MH"],850:["KP"],852:["HK"],853:["MO"],855:["KH"],856:["LA"],880:["BD"],886:["TW"],960:["MV"],961:["LB"],962:["JO"],963:["SY"],964:["IQ"],965:["KW"],966:["SA"],967:["YE"],968:["OM"],970:["PS"],971:["AE"],972:["IL"],973:["BH"],974:["QA"],975:["BT"],976:["MN"],977:["NP"],992:["TJ"],993:["TM"],994:["AZ"],995:["GE"],996:["KG"],998:["UZ"]},countries:{AC:["247","00","(?:[01589]\\d|[46])\\d{4}",[5,6]],AD:["376","00","(?:1|6\\d)\\d{7}|[135-9]\\d{5}",[6,8,9],[["(\\d{3})(\\d{3})","$1 $2",["[135-9]"]],["(\\d{4})(\\d{4})","$1 $2",["1"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6"]]]],AE:["971","00","(?:[4-7]\\d|9[0-689])\\d{7}|800\\d{2,9}|[2-4679]\\d{7}",[5,6,7,8,9,10,11,12],[["(\\d{3})(\\d{2,9})","$1 $2",["60|8"]],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[236]|[479][2-8]"],"0$1"],["(\\d{3})(\\d)(\\d{5})","$1 $2 $3",["[479]"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["5"],"0$1"]],"0"],AF:["93","00","[2-7]\\d{8}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[2-7]"],"0$1"]],"0"],AG:["1","011","(?:268|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([457]\\d{6})$|1","268$1",0,"268"],AI:["1","011","(?:264|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2457]\\d{6})$|1","264$1",0,"264"],AL:["355","00","(?:700\\d\\d|900)\\d{3}|8\\d{5,7}|(?:[2-5]|6\\d)\\d{7}",[6,7,8,9],[["(\\d{3})(\\d{3,4})","$1 $2",["80|9"],"0$1"],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["4[2-6]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[2358][2-5]|4"],"0$1"],["(\\d{3})(\\d{5})","$1 $2",["[23578]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["6"],"0$1"]],"0"],AM:["374","00","(?:[1-489]\\d|55|60|77)\\d{6}",[8],[["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["[89]0"],"0 $1"],["(\\d{3})(\\d{5})","$1 $2",["2|3[12]"],"(0$1)"],["(\\d{2})(\\d{6})","$1 $2",["1|47"],"(0$1)"],["(\\d{2})(\\d{6})","$1 $2",["[3-9]"],"0$1"]],"0"],AO:["244","00","[29]\\d{8}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[29]"]]]],AR:["54","00","(?:11|[89]\\d\\d)\\d{8}|[2368]\\d{9}",[10,11],[["(\\d{4})(\\d{2})(\\d{4})","$1 $2-$3",["2(?:2[024-9]|3[0-59]|47|6[245]|9[02-8])|3(?:3[28]|4[03-9]|5[2-46-8]|7[1-578]|8[2-9])","2(?:[23]02|6(?:[25]|4[6-8])|9(?:[02356]|4[02568]|72|8[23]))|3(?:3[28]|4(?:[04679]|3[5-8]|5[4-68]|8[2379])|5(?:[2467]|3[237]|8[2-5])|7[1-578]|8(?:[2469]|3[2578]|5[4-8]|7[36-8]|8[5-8]))|2(?:2[24-9]|3[1-59]|47)","2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3[78]|5(?:4[46]|8)|8[2379])|5(?:[2467]|3[237]|8[23])|7[1-578]|8(?:[2469]|3[278]|5[56][46]|86[3-6]))|2(?:2[24-9]|3[1-59]|47)|38(?:[58][78]|7[378])|3(?:4[35][56]|58[45]|8(?:[38]5|54|76))[4-6]","2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3(?:5(?:4[0-25689]|[56])|[78])|58|8[2379])|5(?:[2467]|3[237]|8(?:[23]|4(?:[45]|60)|5(?:4[0-39]|5|64)))|7[1-578]|8(?:[2469]|3[278]|54(?:4|5[13-7]|6[89])|86[3-6]))|2(?:2[24-9]|3[1-59]|47)|38(?:[58][78]|7[378])|3(?:454|85[56])[46]|3(?:4(?:36|5[56])|8(?:[38]5|76))[4-6]"],"0$1",1],["(\\d{2})(\\d{4})(\\d{4})","$1 $2-$3",["1"],"0$1",1],["(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3",["[68]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2-$3",["[23]"],"0$1",1],["(\\d)(\\d{4})(\\d{2})(\\d{4})","$2 15-$3-$4",["9(?:2[2-469]|3[3-578])","9(?:2(?:2[024-9]|3[0-59]|47|6[245]|9[02-8])|3(?:3[28]|4[03-9]|5[2-46-8]|7[1-578]|8[2-9]))","9(?:2(?:[23]02|6(?:[25]|4[6-8])|9(?:[02356]|4[02568]|72|8[23]))|3(?:3[28]|4(?:[04679]|3[5-8]|5[4-68]|8[2379])|5(?:[2467]|3[237]|8[2-5])|7[1-578]|8(?:[2469]|3[2578]|5[4-8]|7[36-8]|8[5-8])))|92(?:2[24-9]|3[1-59]|47)","9(?:2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3[78]|5(?:4[46]|8)|8[2379])|5(?:[2467]|3[237]|8[23])|7[1-578]|8(?:[2469]|3[278]|5(?:[56][46]|[78])|7[378]|8(?:6[3-6]|[78]))))|92(?:2[24-9]|3[1-59]|47)|93(?:4[35][56]|58[45]|8(?:[38]5|54|76))[4-6]","9(?:2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3(?:5(?:4[0-25689]|[56])|[78])|5(?:4[46]|8)|8[2379])|5(?:[2467]|3[237]|8(?:[23]|4(?:[45]|60)|5(?:4[0-39]|5|64)))|7[1-578]|8(?:[2469]|3[278]|5(?:4(?:4|5[13-7]|6[89])|[56][46]|[78])|7[378]|8(?:6[3-6]|[78]))))|92(?:2[24-9]|3[1-59]|47)|93(?:4(?:36|5[56])|8(?:[38]5|76))[4-6]"],"0$1",0,"$1 $2 $3-$4"],["(\\d)(\\d{2})(\\d{4})(\\d{4})","$2 15-$3-$4",["91"],"0$1",0,"$1 $2 $3-$4"],["(\\d{3})(\\d{3})(\\d{5})","$1-$2-$3",["8"],"0$1"],["(\\d)(\\d{3})(\\d{3})(\\d{4})","$2 15-$3-$4",["9"],"0$1",0,"$1 $2 $3-$4"]],"0",0,"0?(?:(11|2(?:2(?:02?|[13]|2[13-79]|4[1-6]|5[2457]|6[124-8]|7[1-4]|8[13-6]|9[1267])|3(?:02?|1[467]|2[03-6]|3[13-8]|[49][2-6]|5[2-8]|[67])|4(?:7[3-578]|9)|6(?:[0136]|2[24-6]|4[6-8]?|5[15-8])|80|9(?:0[1-3]|[19]|2\\d|3[1-6]|4[02568]?|5[2-4]|6[2-46]|72?|8[23]?))|3(?:3(?:2[79]|6|8[2578])|4(?:0[0-24-9]|[12]|3[5-8]?|4[24-7]|5[4-68]?|6[02-9]|7[126]|8[2379]?|9[1-36-8])|5(?:1|2[1245]|3[237]?|4[1-46-9]|6[2-4]|7[1-6]|8[2-5]?)|6[24]|7(?:[069]|1[1568]|2[15]|3[145]|4[13]|5[14-8]|7[2-57]|8[126])|8(?:[01]|2[15-7]|3[2578]?|4[13-6]|5[4-8]?|6[1-357-9]|7[36-8]?|8[5-8]?|9[124])))15)?","9$1"],AS:["1","011","(?:[58]\\d\\d|684|900)\\d{7}",[10],0,"1",0,"([267]\\d{6})$|1","684$1",0,"684"],AT:["43","00","1\\d{3,12}|2\\d{6,12}|43(?:(?:0\\d|5[02-9])\\d{3,9}|2\\d{4,5}|[3467]\\d{4}|8\\d{4,6}|9\\d{4,7})|5\\d{4,12}|8\\d{7,12}|9\\d{8,12}|(?:[367]\\d|4[0-24-9])\\d{4,11}",[4,5,6,7,8,9,10,11,12,13],[["(\\d)(\\d{3,12})","$1 $2",["1(?:11|[2-9])"],"0$1"],["(\\d{3})(\\d{2})","$1 $2",["517"],"0$1"],["(\\d{2})(\\d{3,5})","$1 $2",["5[079]"],"0$1"],["(\\d{3})(\\d{3,10})","$1 $2",["(?:31|4)6|51|6(?:48|5[0-3579]|[6-9])|7(?:20|32|8)|[89]","(?:31|4)6|51|6(?:485|5[0-3579]|[6-9])|7(?:20|32|8)|[89]"],"0$1"],["(\\d{4})(\\d{3,9})","$1 $2",["[2-467]|5[2-6]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["5"],"0$1"],["(\\d{2})(\\d{4})(\\d{4,7})","$1 $2 $3",["5"],"0$1"]],"0"],AU:["61","001[14-689]|14(?:1[14]|34|4[17]|[56]6|7[47]|88)0011","1(?:[0-79]\\d{7}(?:\\d(?:\\d{2})?)?|8[0-24-9]\\d{7})|[2-478]\\d{8}|1\\d{4,7}",[5,6,7,8,9,10,12],[["(\\d{2})(\\d{3,4})","$1 $2",["16"],"0$1"],["(\\d{2})(\\d{3})(\\d{2,4})","$1 $2 $3",["16"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["14|4"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["[2378]"],"(0$1)"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1(?:30|[89])"]]],"0",0,"(183[12])|0",0,0,0,[["(?:(?:241|349)0\\d\\d|8(?:51(?:0(?:0[03-9]|[12479]\\d|3[2-9]|5[0-8]|6[1-9]|8[0-7])|1(?:[0235689]\\d|1[0-69]|4[0-589]|7[0-47-9])|2(?:0[0-79]|[18][13579]|2[14-9]|3[0-46-9]|[4-6]\\d|7[89]|9[0-4])|[34]\\d\\d)|91(?:(?:[0-58]\\d|6[0135-9])\\d|7(?:0[0-24-9]|[1-9]\\d)|9(?:[0-46-9]\\d|5[0-79]))))\\d{3}|(?:2(?:[0-26-9]\\d|3[0-8]|4[02-9]|5[0135-9])|3(?:[0-3589]\\d|4[0-578]|6[1-9]|7[0-35-9])|7(?:[013-57-9]\\d|2[0-8])|8(?:55|6[0-8]|[78]\\d|9[02-9]))\\d{6}",[9]],["4(?:79[01]|83[0-36-9]|95[0-3])\\d{5}|4(?:[0-36]\\d|4[047-9]|[58][0-24-9]|7[02-8]|9[0-47-9])\\d{6}",[9]],["180(?:0\\d{3}|2)\\d{3}",[7,10]],["190[0-26]\\d{6}",[10]],0,0,0,["163\\d{2,6}",[5,6,7,8,9]],["14(?:5(?:1[0458]|[23][458])|71\\d)\\d{4}",[9]],["13(?:00\\d{6}(?:\\d{2})?|45[0-4]\\d{3})|13\\d{4}",[6,8,10,12]]],"0011"],AW:["297","00","(?:[25-79]\\d\\d|800)\\d{4}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[25-9]"]]]],AX:["358","00|99(?:[01469]|5(?:[14]1|3[23]|5[59]|77|88|9[09]))","2\\d{4,9}|35\\d{4,5}|(?:60\\d\\d|800)\\d{4,6}|7\\d{5,11}|(?:[14]\\d|3[0-46-9]|50)\\d{4,8}",[5,6,7,8,9,10,11,12],0,"0",0,0,0,0,"18",0,"00"],AZ:["994","00","365\\d{6}|(?:[124579]\\d|60|88)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["90"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["1[28]|2|365|46","1[28]|2|365[45]|46","1[28]|2|365(?:4|5[02])|46"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[13-9]"],"0$1"]],"0"],BA:["387","00","6\\d{8}|(?:[35689]\\d|49|70)\\d{6}",[8,9],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["6[1-3]|[7-9]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2-$3",["[3-5]|6[56]"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3 $4",["6"],"0$1"]],"0"],BB:["1","011","(?:246|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","246$1",0,"246"],BD:["880","00","[1-469]\\d{9}|8[0-79]\\d{7,8}|[2-79]\\d{8}|[2-9]\\d{7}|[3-9]\\d{6}|[57-9]\\d{5}",[6,7,8,9,10],[["(\\d{2})(\\d{4,6})","$1-$2",["31[5-8]|[459]1"],"0$1"],["(\\d{3})(\\d{3,7})","$1-$2",["3(?:[67]|8[013-9])|4(?:6[168]|7|[89][18])|5(?:6[128]|9)|6(?:[15]|28|4[14])|7[2-589]|8(?:0[014-9]|[12])|9[358]|(?:3[2-5]|4[235]|5[2-578]|6[0389]|76|8[3-7]|9[24])1|(?:44|66)[01346-9]"],"0$1"],["(\\d{4})(\\d{3,6})","$1-$2",["[13-9]|2[23]"],"0$1"],["(\\d)(\\d{7,8})","$1-$2",["2"],"0$1"]],"0"],BE:["32","00","4\\d{8}|[1-9]\\d{7}",[8,9],[["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["(?:80|9)0"],"0$1"],["(\\d)(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[239]|4[23]"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[15-8]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["4"],"0$1"]],"0"],BF:["226","00","(?:[025-7]\\d|44)\\d{6}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[024-7]"]]]],BG:["359","00","00800\\d{7}|[2-7]\\d{6,7}|[89]\\d{6,8}|2\\d{5}",[6,7,8,9,12],[["(\\d)(\\d)(\\d{2})(\\d{2})","$1 $2 $3 $4",["2"],"0$1"],["(\\d{3})(\\d{4})","$1 $2",["43[1-6]|70[1-9]"],"0$1"],["(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{2,3})","$1 $2 $3",["[356]|4[124-7]|7[1-9]|8[1-6]|9[1-7]"],"0$1"],["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["(?:70|8)0"],"0$1"],["(\\d{3})(\\d{3})(\\d{2})","$1 $2 $3",["43[1-7]|7"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[48]|9[08]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["9"],"0$1"]],"0"],BH:["973","00","[136-9]\\d{7}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[13679]|8[02-4679]"]]]],BI:["257","00","(?:[267]\\d|31)\\d{6}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2367]"]]]],BJ:["229","00","(?:01\\d|8)\\d{7}",[8,10],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["0"]]]],BL:["590","00","(?:590\\d|7090)\\d{5}|(?:69|80|9\\d)\\d{7}",[9],0,"0",0,0,0,0,0,[["590(?:2[7-9]|3[3-7]|5[12]|87)\\d{4}"],["(?:69(?:0\\d\\d|1(?:2[2-9]|3[0-5])|4(?:0[89]|1[2-6]|9\\d)|6(?:1[016-9]|5[0-4]|[67]\\d))|7090[0-4])\\d{4}"],["80[0-5]\\d{6}"],0,0,0,0,0,["9(?:(?:39[5-7]|76[018])\\d|475[0-6])\\d{4}"]]],BM:["1","011","(?:441|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","441$1",0,"441"],BN:["673","00","[2-578]\\d{6}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[2-578]"]]]],BO:["591","00(?:1\\d)?","8001\\d{5}|(?:[2-467]\\d|50)\\d{6}",[8,9],[["(\\d)(\\d{7})","$1 $2",["[235]|4[46]"]],["(\\d{8})","$1",["[67]"]],["(\\d{3})(\\d{2})(\\d{4})","$1 $2 $3",["8"]]],"0",0,"0(1\\d)?"],BQ:["599","00","(?:[34]1|7\\d)\\d{5}",[7],0,0,0,0,0,0,"[347]"],BR:["55","00(?:1[245]|2[1-35]|31|4[13]|[56]5|99)","[1-467]\\d{9,10}|55[0-46-9]\\d{8}|[34]\\d{7}|55\\d{7,8}|(?:5[0-46-9]|[89]\\d)\\d{7,9}",[8,9,10,11],[["(\\d{4})(\\d{4})","$1-$2",["300|4(?:0[02]|37|86)","300|4(?:0(?:0|20)|370|864)"]],["(\\d{3})(\\d{2,3})(\\d{4})","$1 $2 $3",["(?:[358]|90)0"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1 $2-$3",["(?:[14689][1-9]|2[12478]|3[1-578]|5[13-5]|7[13-579])[2-57]"],"($1)"],["(\\d{2})(\\d{5})(\\d{4})","$1 $2-$3",["[16][1-9]|[2-57-9]"],"($1)"]],"0",0,"(?:0|90)(?:(1[245]|2[1-35]|31|4[13]|[56]5|99)(\\d{10,11}))?","$2"],BS:["1","011","(?:242|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([3-8]\\d{6})$|1","242$1",0,"242"],BT:["975","00","[178]\\d{7}|[2-8]\\d{6}",[7,8],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[2-6]|7[246]|8[2-4]"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["1[67]|[78]"]]]],BW:["267","00","(?:0800|(?:[37]|800)\\d)\\d{6}|(?:[2-6]\\d|90)\\d{5}",[7,8,10],[["(\\d{2})(\\d{5})","$1 $2",["90"]],["(\\d{3})(\\d{4})","$1 $2",["[24-6]|3[15-9]"]],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[37]"]],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["0"]],["(\\d{3})(\\d{4})(\\d{3})","$1 $2 $3",["8"]]]],BY:["375","810","(?:[12]\\d|33|44|902)\\d{7}|8(?:0[0-79]\\d{5,7}|[1-7]\\d{9})|8(?:1[0-489]|[5-79]\\d)\\d{7}|8[1-79]\\d{6,7}|8[0-79]\\d{5}|8\\d{5}",[6,7,8,9,10,11],[["(\\d{3})(\\d{3})","$1 $2",["800"],"8 $1"],["(\\d{3})(\\d{2})(\\d{2,4})","$1 $2 $3",["800"],"8 $1"],["(\\d{4})(\\d{2})(\\d{3})","$1 $2-$3",["1(?:5[169]|6[3-5]|7[179])|2(?:1[35]|2[34]|3[3-5])","1(?:5[169]|6(?:3[1-3]|4|5[125])|7(?:1[3-9]|7[0-24-6]|9[2-7]))|2(?:1[35]|2[34]|3[3-5])"],"8 0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2-$3-$4",["1(?:[56]|7[467])|2[1-3]"],"8 0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2-$3-$4",["[1-4]"],"8 0$1"],["(\\d{3})(\\d{3,4})(\\d{4})","$1 $2 $3",["[89]"],"8 $1"]],"8",0,"0|80?",0,0,0,0,"8~10"],BZ:["501","00","(?:0800\\d|[2-8])\\d{6}",[7,11],[["(\\d{3})(\\d{4})","$1-$2",["[2-8]"]],["(\\d)(\\d{3})(\\d{4})(\\d{3})","$1-$2-$3-$4",["0"]]]],CA:["1","011","[2-9]\\d{9}|3\\d{6}",[7,10],0,"1",0,0,0,0,0,[["(?:2(?:04|[23]6|[48]9|5[07]|63)|3(?:06|43|54|6[578]|82)|4(?:03|1[68]|[26]8|3[178]|50|74)|5(?:06|1[49]|48|79|8[147])|6(?:04|[18]3|39|47|72)|7(?:0[59]|42|53|78|8[02])|8(?:[06]7|19|25|7[39])|9(?:0[25]|42))[2-9]\\d{6}",[10]],["",[10]],["8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",[10]],["900[2-9]\\d{6}",[10]],["52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|(?:5(?:2[125-9]|33|44|66|77|88)|6(?:22|33))[2-9]\\d{6}",[10]],0,["310\\d{4}",[7]],0,["600[2-9]\\d{6}",[10]]]],CC:["61","001[14-689]|14(?:1[14]|34|4[17]|[56]6|7[47]|88)0011","1(?:[0-79]\\d{8}(?:\\d{2})?|8[0-24-9]\\d{7})|[148]\\d{8}|1\\d{5,7}",[6,7,8,9,10,12],0,"0",0,"([59]\\d{7})$|0","8$1",0,0,[["8(?:51(?:0(?:02|31|60|89)|1(?:18|76)|223)|91(?:0(?:1[0-2]|29)|1(?:[28]2|50|79)|2(?:10|64)|3(?:[06]8|22)|4[29]8|62\\d|70[23]|959))\\d{3}",[9]],["4(?:79[01]|83[0-36-9]|95[0-3])\\d{5}|4(?:[0-36]\\d|4[047-9]|[58][0-24-9]|7[02-8]|9[0-47-9])\\d{6}",[9]],["180(?:0\\d{3}|2)\\d{3}",[7,10]],["190[0-26]\\d{6}",[10]],0,0,0,0,["14(?:5(?:1[0458]|[23][458])|71\\d)\\d{4}",[9]],["13(?:00\\d{6}(?:\\d{2})?|45[0-4]\\d{3})|13\\d{4}",[6,8,10,12]]],"0011"],CD:["243","00","(?:(?:[189]|5\\d)\\d|2)\\d{7}|[1-68]\\d{6}",[7,8,9,10],[["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["88"],"0$1"],["(\\d{2})(\\d{5})","$1 $2",["[1-6]"],"0$1"],["(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[89]"],"0$1"],["(\\d{2})(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3 $4",["5"],"0$1"]],"0"],CF:["236","00","(?:[27]\\d{3}|8776)\\d{4}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[278]"]]]],CG:["242","00","222\\d{6}|(?:0\\d|80)\\d{7}",[9],[["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["8"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[02]"]]]],CH:["41","00","8\\d{11}|[2-9]\\d{8}",[9,12],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8[047]|90"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-79]|81"],"0$1"],["(\\d{3})(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["8"],"0$1"]],"0"],CI:["225","00","[02]\\d{9}",[10],[["(\\d{2})(\\d{2})(\\d)(\\d{5})","$1 $2 $3 $4",["2"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3 $4",["0"]]]],CK:["682","00","[2-578]\\d{4}",[5],[["(\\d{2})(\\d{3})","$1 $2",["[2-578]"]]]],CL:["56","(?:0|1(?:1[0-69]|2[02-5]|5[13-58]|69|7[0167]|8[018]))0","12300\\d{6}|6\\d{9,10}|[2-9]\\d{8}",[9,10,11],[["(\\d{5})(\\d{4})","$1 $2",["219","2196"],"($1)"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["60|809"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["44"]],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["2[1-36]"],"($1)"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["9(?:10|[2-9])"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["3[2-5]|[47]|5[1-3578]|6[13-57]|8(?:0[1-8]|[1-9])"],"($1)"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["60|8"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]],["(\\d{3})(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3 $4",["60"]]]],CM:["237","00","[26]\\d{8}|88\\d{6,7}",[8,9],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["88"]],["(\\d)(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["[26]|88"]]]],CN:["86","00|1(?:[12]\\d|79)\\d\\d00","(?:(?:1[03-689]|2\\d)\\d\\d|6)\\d{8}|1\\d{10}|[126]\\d{6}(?:\\d(?:\\d{2})?)?|86\\d{5,6}|(?:[3-579]\\d|8[0-57-9])\\d{5,9}",[7,8,9,10,11,12],[["(\\d{2})(\\d{5,6})","$1 $2",["(?:10|2[0-57-9])[19]|3(?:[157]|35|49|9[1-68])|4(?:1[124-9]|2[179]|6[47-9]|7|8[23])|5(?:[1357]|2[37]|4[36]|6[1-46]|80)|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:07|1[236-8]|2[5-7]|[37]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|3|4[13]|5[1-5]|7[0-79]|9[0-35-9])|(?:4[35]|59|85)[1-9]","(?:10|2[0-57-9])(?:1[02]|9[56])|8078|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:1[124-9]|2[179]|[35][1-9]|6[47-9]|7\\d|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[1-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|3\\d|4[13]|5[1-5]|7[0-79]|9[0-35-9]))1","10(?:1(?:0|23)|9[56])|2[0-57-9](?:1(?:00|23)|9[56])|80781|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:1[124-9]|2[179]|[35][1-9]|6[47-9]|7\\d|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[1-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|3\\d|4[13]|5[1-5]|7[0-79]|9[0-35-9]))12","10(?:1(?:0|23)|9[56])|2[0-57-9](?:1(?:00|23)|9[56])|807812|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:1[124-9]|2[179]|[35][1-9]|6[47-9]|7\\d|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[1-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|3\\d|4[13]|5[1-5]|7[0-79]|9[0-35-9]))123","10(?:1(?:0|23)|9[56])|2[0-57-9](?:1(?:00|23)|9[56])|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:1[124-9]|2[179]|[35][1-9]|6[47-9]|7\\d|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:078|1[236-8]|2[5-7]|[37]\\d|5[1-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|3\\d|4[13]|5[1-5]|7[0-79]|9[0-35-9]))123"],"0$1"],["(\\d{3})(\\d{5,6})","$1 $2",["3(?:[157]|35|49|9[1-68])|4(?:[17]|2[179]|6[47-9]|8[23])|5(?:[1357]|2[37]|4[36]|6[1-46]|80)|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]|4[13]|5[1-5])|(?:4[35]|59|85)[1-9]","(?:3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[1-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))[19]","85[23](?:10|95)|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[14-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))(?:10|9[56])","85[23](?:100|95)|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[14-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))(?:100|9[56])"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["(?:4|80)0"]],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["10|2(?:[02-57-9]|1[1-9])","10|2(?:[02-57-9]|1[1-9])","10[0-79]|2(?:[02-57-9]|1[1-79])|(?:10|21)8(?:0[1-9]|[1-9])"],"0$1",1],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["3(?:[3-59]|7[02-68])|4(?:[26-8]|3[3-9]|5[2-9])|5(?:3[03-9]|[468]|7[028]|9[2-46-9])|6|7(?:[0-247]|3[04-9]|5[0-4689]|6[2368])|8(?:[1-358]|9[1-7])|9(?:[013479]|5[1-5])|(?:[34]1|55|79|87)[02-9]"],"0$1",1],["(\\d{3})(\\d{7,8})","$1 $2",["9"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["80"],"0$1",1],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["[3-578]"],"0$1",1],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["1[3-9]"]],["(\\d{2})(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3 $4",["[12]"],"0$1",1]],"0",0,"(1(?:[12]\\d|79)\\d\\d)|0",0,0,0,0,"00"],CO:["57","00(?:4(?:[14]4|56)|[579])","(?:46|60\\d\\d)\\d{6}|(?:1\\d|[39])\\d{9}",[8,10,11],[["(\\d{4})(\\d{4})","$1 $2",["46"]],["(\\d{3})(\\d{7})","$1 $2",["6|90"],"($1)"],["(\\d{3})(\\d{7})","$1 $2",["3[0-357]|9[14]"]],["(\\d)(\\d{3})(\\d{7})","$1-$2-$3",["1"],"0$1",0,"$1 $2 $3"]],"0",0,"0([3579]|4(?:[14]4|56))?"],CR:["506","00","(?:8\\d|90)\\d{8}|(?:[24-8]\\d{3}|3005)\\d{4}",[8,10],[["(\\d{4})(\\d{4})","$1 $2",["[2-7]|8[3-9]"]],["(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3",["[89]"]]],0,0,"(19(?:0[0-2468]|1[09]|20|66|77|99))"],CU:["53","119","(?:[2-7]|8\\d\\d)\\d{7}|[2-47]\\d{6}|[34]\\d{5}",[6,7,8,10],[["(\\d{2})(\\d{4,6})","$1 $2",["2[1-4]|[34]"],"(0$1)"],["(\\d)(\\d{6,7})","$1 $2",["7"],"(0$1)"],["(\\d)(\\d{7})","$1 $2",["[56]"],"0$1"],["(\\d{3})(\\d{7})","$1 $2",["8"],"0$1"]],"0"],CV:["238","0","(?:[2-59]\\d\\d|800)\\d{4}",[7],[["(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["[2-589]"]]]],CW:["599","00","(?:[34]1|60|(?:7|9\\d)\\d)\\d{5}",[7,8],[["(\\d{3})(\\d{4})","$1 $2",["[3467]"]],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["9[4-8]"]]],0,0,0,0,0,"[69]"],CX:["61","001[14-689]|14(?:1[14]|34|4[17]|[56]6|7[47]|88)0011","1(?:[0-79]\\d{8}(?:\\d{2})?|8[0-24-9]\\d{7})|[148]\\d{8}|1\\d{5,7}",[6,7,8,9,10,12],0,"0",0,"([59]\\d{7})$|0","8$1",0,0,[["8(?:51(?:0(?:01|30|59|88)|1(?:17|46|75)|2(?:22|35))|91(?:00[6-9]|1(?:[28]1|49|78)|2(?:09|63)|3(?:12|26|75)|4(?:56|97)|64\\d|7(?:0[01]|1[0-2])|958))\\d{3}",[9]],["4(?:79[01]|83[0-36-9]|95[0-3])\\d{5}|4(?:[0-36]\\d|4[047-9]|[58][0-24-9]|7[02-8]|9[0-47-9])\\d{6}",[9]],["180(?:0\\d{3}|2)\\d{3}",[7,10]],["190[0-26]\\d{6}",[10]],0,0,0,0,["14(?:5(?:1[0458]|[23][458])|71\\d)\\d{4}",[9]],["13(?:00\\d{6}(?:\\d{2})?|45[0-4]\\d{3})|13\\d{4}",[6,8,10,12]]],"0011"],CY:["357","00","(?:[279]\\d|[58]0)\\d{6}",[8],[["(\\d{2})(\\d{6})","$1 $2",["[257-9]"]]]],CZ:["420","00","(?:[2-578]\\d|60)\\d{7}|9\\d{8,11}",[9,10,11,12],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[2-8]|9[015-7]"]],["(\\d{2})(\\d{3})(\\d{3})(\\d{2})","$1 $2 $3 $4",["96"]],["(\\d{2})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["9"]],["(\\d{3})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["9"]]]],DE:["49","00","[2579]\\d{5,14}|49(?:[34]0|69|8\\d)\\d\\d?|49(?:37|49|60|7[089]|9\\d)\\d{1,3}|49(?:2[024-9]|3[2-689]|7[1-7])\\d{1,8}|(?:1|[368]\\d|4[0-8])\\d{3,13}|49(?:[015]\\d|2[13]|31|[46][1-8])\\d{1,9}",[4,5,6,7,8,9,10,11,12,13,14,15],[["(\\d{2})(\\d{3,13})","$1 $2",["3[02]|40|[68]9"],"0$1"],["(\\d{3})(\\d{3,12})","$1 $2",["2(?:0[1-389]|1[124]|2[18]|3[14])|3(?:[35-9][15]|4[015])|906|(?:2[4-9]|4[2-9]|[579][1-9]|[68][1-8])1","2(?:0[1-389]|12[0-8])|3(?:[35-9][15]|4[015])|906|2(?:[13][14]|2[18])|(?:2[4-9]|4[2-9]|[579][1-9]|[68][1-8])1"],"0$1"],["(\\d{4})(\\d{2,11})","$1 $2",["[24-6]|3(?:[3569][02-46-9]|4[2-4679]|7[2-467]|8[2-46-8])|70[2-8]|8(?:0[2-9]|[1-8])|90[7-9]|[79][1-9]","[24-6]|3(?:3(?:0[1-467]|2[127-9]|3[124578]|7[1257-9]|8[1256]|9[145])|4(?:2[135]|4[13578]|9[1346])|5(?:0[14]|2[1-3589]|6[1-4]|7[13468]|8[13568])|6(?:2[1-489]|3[124-6]|6[13]|7[12579]|8[1-356]|9[135])|7(?:2[1-7]|4[145]|6[1-5]|7[1-4])|8(?:21|3[1468]|6|7[1467]|8[136])|9(?:0[12479]|2[1358]|4[134679]|6[1-9]|7[136]|8[147]|9[1468]))|70[2-8]|8(?:0[2-9]|[1-8])|90[7-9]|[79][1-9]|3[68]4[1347]|3(?:47|60)[1356]|3(?:3[46]|46|5[49])[1246]|3[4579]3[1357]"],"0$1"],["(\\d{3})(\\d{4})","$1 $2",["138"],"0$1"],["(\\d{5})(\\d{2,10})","$1 $2",["3"],"0$1"],["(\\d{3})(\\d{5,11})","$1 $2",["181"],"0$1"],["(\\d{3})(\\d)(\\d{4,10})","$1 $2 $3",["1(?:3|80)|9"],"0$1"],["(\\d{3})(\\d{7,8})","$1 $2",["1[67]"],"0$1"],["(\\d{3})(\\d{7,12})","$1 $2",["8"],"0$1"],["(\\d{5})(\\d{6})","$1 $2",["185","1850","18500"],"0$1"],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["7"],"0$1"],["(\\d{4})(\\d{7})","$1 $2",["18[68]"],"0$1"],["(\\d{4})(\\d{7})","$1 $2",["15[1279]"],"0$1"],["(\\d{5})(\\d{6})","$1 $2",["15[03568]","15(?:[0568]|3[13])"],"0$1"],["(\\d{3})(\\d{8})","$1 $2",["18"],"0$1"],["(\\d{3})(\\d{2})(\\d{7,8})","$1 $2 $3",["1(?:6[023]|7)"],"0$1"],["(\\d{4})(\\d{2})(\\d{7})","$1 $2 $3",["15[279]"],"0$1"],["(\\d{3})(\\d{2})(\\d{8})","$1 $2 $3",["15"],"0$1"]],"0"],DJ:["253","00","(?:2\\d|77)\\d{6}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[27]"]]]],DK:["45","00","[2-9]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-9]"]]]],DM:["1","011","(?:[58]\\d\\d|767|900)\\d{7}",[10],0,"1",0,"([2-7]\\d{6})$|1","767$1",0,"767"],DO:["1","011","(?:[58]\\d\\d|900)\\d{7}",[10],0,"1",0,0,0,0,"8001|8[024]9"],DZ:["213","00","(?:[1-4]|[5-79]\\d|80)\\d{7}",[8,9],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[1-4]"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["9"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-8]"],"0$1"]],"0"],EC:["593","00","1\\d{9,10}|(?:[2-7]|9\\d)\\d{7}",[8,9,10,11],[["(\\d)(\\d{3})(\\d{4})","$1 $2-$3",["[2-7]"],"(0$1)",0,"$1-$2-$3"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["9"],"0$1"],["(\\d{4})(\\d{3})(\\d{3,4})","$1 $2 $3",["1"]]],"0"],EE:["372","00","8\\d{9}|[4578]\\d{7}|(?:[3-8]\\d|90)\\d{5}",[7,8,10],[["(\\d{3})(\\d{4})","$1 $2",["[369]|4[3-8]|5(?:[0-2]|5[0-478]|6[45])|7[1-9]|88","[369]|4[3-8]|5(?:[02]|1(?:[0-8]|95)|5[0-478]|6(?:4[0-4]|5[1-589]))|7[1-9]|88"]],["(\\d{4})(\\d{3,4})","$1 $2",["[45]|8(?:00|[1-49])","[45]|8(?:00[1-9]|[1-49])"]],["(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["7"]],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["8"]]]],EG:["20","00","[189]\\d{8,9}|[24-6]\\d{8}|[135]\\d{7}",[8,9,10],[["(\\d)(\\d{7,8})","$1 $2",["[23]"],"0$1"],["(\\d{2})(\\d{6,7})","$1 $2",["1[35]|[4-6]|8[2468]|9[235-7]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[89]"],"0$1"],["(\\d{2})(\\d{8})","$1 $2",["1"],"0$1"]],"0"],EH:["212","00","[5-8]\\d{8}",[9],0,"0",0,0,0,0,"528[89]"],ER:["291","00","[178]\\d{6}",[7],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[178]"],"0$1"]],"0"],ES:["34","00","[5-9]\\d{8}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[89]00"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-9]"]]]],ET:["251","00","(?:11|[2-579]\\d)\\d{7}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[1-579]"],"0$1"]],"0"],FI:["358","00|99(?:[01469]|5(?:[14]1|3[23]|5[59]|77|88|9[09]))","[1-35689]\\d{4}|7\\d{10,11}|(?:[124-7]\\d|3[0-46-9])\\d{8}|[1-9]\\d{5,8}",[5,6,7,8,9,10,11,12],[["(\\d{5})","$1",["20[2-59]"],"0$1"],["(\\d{3})(\\d{3,7})","$1 $2",["(?:[1-3]0|[68])0|70[07-9]"],"0$1"],["(\\d{2})(\\d{4,8})","$1 $2",["[14]|2[09]|50|7[135]"],"0$1"],["(\\d{2})(\\d{6,10})","$1 $2",["7"],"0$1"],["(\\d)(\\d{4,9})","$1 $2",["(?:19|[2568])[1-8]|3(?:0[1-9]|[1-9])|9"],"0$1"]],"0",0,0,0,0,"1[03-79]|[2-9]",0,"00"],FJ:["679","0(?:0|52)","45\\d{5}|(?:0800\\d|[235-9])\\d{6}",[7,11],[["(\\d{3})(\\d{4})","$1 $2",["[235-9]|45"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["0"]]],0,0,0,0,0,0,0,"00"],FK:["500","00","[2-7]\\d{4}",[5]],FM:["691","00","(?:[39]\\d\\d|820)\\d{4}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[389]"]]]],FO:["298","00","[2-9]\\d{5}",[6],[["(\\d{6})","$1",["[2-9]"]]],0,0,"(10(?:01|[12]0|88))"],FR:["33","00","[1-9]\\d{8}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0 $1"],["(\\d)(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["[1-79]"],"0$1"]],"0"],GA:["241","00","(?:[067]\\d|11)\\d{6}|[2-7]\\d{6}",[7,8],[["(\\d)(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-7]"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["0"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["11|[67]"],"0$1"]],0,0,"0(11\\d{6}|60\\d{6}|61\\d{6}|6[256]\\d{6}|7[467]\\d{6})","$1"],GB:["44","00","[1-357-9]\\d{9}|[18]\\d{8}|8\\d{6}",[7,9,10],[["(\\d{3})(\\d{4})","$1 $2",["800","8001","80011","800111","8001111"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["845","8454","84546","845464"],"0$1"],["(\\d{3})(\\d{6})","$1 $2",["800"],"0$1"],["(\\d{5})(\\d{4,5})","$1 $2",["1(?:38|5[23]|69|76|94)","1(?:(?:38|69)7|5(?:24|39)|768|946)","1(?:3873|5(?:242|39[4-6])|(?:697|768)[347]|9467)"],"0$1"],["(\\d{4})(\\d{5,6})","$1 $2",["1(?:[2-69][02-9]|[78])"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["[25]|7(?:0|6[02-9])","[25]|7(?:0|6(?:[03-9]|2[356]))"],"0$1"],["(\\d{4})(\\d{6})","$1 $2",["7"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[1389]"],"0$1"]],"0",0,"0|180020",0,0,0,[["(?:1(?:1(?:3(?:[0-58]\\d\\d|73[0-5])|4(?:(?:[0-5]\\d|70)\\d|69[7-9])|(?:(?:5[0-26-9]|[78][0-49])\\d|6(?:[0-4]\\d|5[01]))\\d)|(?:2(?:(?:0[024-9]|2[3-9]|3[3-79]|4[1-689]|[58][02-9]|6[0-47-9]|7[013-9]|9\\d)\\d|1(?:[0-7]\\d|8[0-3]))|(?:3(?:0\\d|1[0-8]|[25][02-9]|3[02-579]|[468][0-46-9]|7[1-35-79]|9[2-578])|4(?:0[03-9]|[137]\\d|[28][02-57-9]|4[02-69]|5[0-8]|[69][0-79])|5(?:0[1-35-9]|[16]\\d|2[024-9]|3[015689]|4[02-9]|5[03-9]|7[0-35-9]|8[0-468]|9[0-57-9])|6(?:0[034689]|1\\d|2[0-35689]|[38][013-9]|4[1-467]|5[0-69]|6[13-9]|7[0-8]|9[0-24578])|7(?:0[0246-9]|2\\d|3[0236-8]|4[03-9]|5[0-46-9]|6[013-9]|7[0-35-9]|8[024-9]|9[02-9])|8(?:0[35-9]|2[1-57-9]|3[02-578]|4[0-578]|5[124-9]|6[2-69]|7\\d|8[02-9]|9[02569])|9(?:0[02-589]|[18]\\d|2[02-689]|3[1-57-9]|4[2-9]|5[0-579]|6[2-47-9]|7[0-24578]|9[2-57]))\\d)\\d)|2(?:0[013478]|3[0189]|4[017]|8[0-46-9]|9[0-2])\\d{3})\\d{4}|1(?:2(?:0(?:46[1-4]|87[2-9])|545[1-79]|76(?:2\\d|3[1-8]|6[1-6])|9(?:7(?:2[0-4]|3[2-5])|8(?:2[2-8]|7[0-47-9]|8[3-5])))|3(?:6(?:38[2-5]|47[23])|8(?:47[04-9]|64[0157-9]))|4(?:044[1-7]|20(?:2[23]|8\\d)|6(?:0(?:30|5[2-57]|6[1-8]|7[2-8])|140)|8(?:052|87[1-3]))|5(?:2(?:4(?:3[2-79]|6\\d)|76\\d)|6(?:26[06-9]|686))|6(?:06(?:4\\d|7[4-79])|295[5-7]|35[34]\\d|47(?:24|61)|59(?:5[08]|6[67]|74)|9(?:55[0-4]|77[23]))|7(?:26(?:6[13-9]|7[0-7])|(?:442|688)\\d|50(?:2[0-3]|[3-68]2|76))|8(?:27[56]\\d|37(?:5[2-5]|8[239])|843[2-58])|9(?:0(?:0(?:6[1-8]|85)|52\\d)|3583|4(?:66[1-8]|9(?:2[01]|81))|63(?:23|3[1-4])|9561))\\d{3}",[9,10]],["7(?:457[0-57-9]|700[01]|911[028])\\d{5}|7(?:[1-3]\\d\\d|4(?:[0-46-9]\\d|5[0-689])|5(?:0[0-8]|[13-9]\\d|2[0-35-9])|7(?:0[1-9]|[1-7]\\d|8[02-9]|9[0-689])|8(?:[014-9]\\d|[23][0-8])|9(?:[024-9]\\d|1[02-9]|3[0-689]))\\d{6}",[10]],["80[08]\\d{7}|800\\d{6}|8001111"],["(?:8(?:4[2-5]|7[0-3])|9(?:[01]\\d|8[2-49]))\\d{7}|845464\\d",[7,10]],["70\\d{8}",[10]],0,["(?:3[0347]|55)\\d{8}",[10]],["76(?:464|652)\\d{5}|76(?:0[0-28]|2[356]|34|4[01347]|5[49]|6[0-369]|77|8[14]|9[139])\\d{6}",[10]],["56\\d{8}",[10]]],0," x"],GD:["1","011","(?:473|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","473$1",0,"473"],GE:["995","00","(?:[3-57]\\d\\d|800)\\d{6}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["70"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["32"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[57]"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[348]"],"0$1"]],"0"],GF:["594","00","(?:[56]94\\d|7093)\\d{5}|(?:80|9\\d)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-7]|9[47]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[89]"],"0$1"]],"0"],GG:["44","00","(?:1481|[357-9]\\d{3})\\d{6}|8\\d{6}(?:\\d{2})?",[7,9,10],0,"0",0,"([25-9]\\d{5})$|0|180020","1481$1",0,0,[["1481[25-9]\\d{5}",[10]],["7(?:(?:781|839)\\d|911[17])\\d{5}",[10]],["80[08]\\d{7}|800\\d{6}|8001111"],["(?:8(?:4[2-5]|7[0-3])|9(?:[01]\\d|8[0-3]))\\d{7}|845464\\d",[7,10]],["70\\d{8}",[10]],0,["(?:3[0347]|55)\\d{8}",[10]],["76(?:464|652)\\d{5}|76(?:0[0-28]|2[356]|34|4[01347]|5[49]|6[0-369]|77|8[14]|9[139])\\d{6}",[10]],["56\\d{8}",[10]]]],GH:["233","00","(?:[235]\\d{3}|800)\\d{5}",[8,9],[["(\\d{3})(\\d{5})","$1 $2",["8"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[235]"],"0$1"]],"0"],GI:["350","00","(?:[25]\\d|60)\\d{6}",[8],[["(\\d{3})(\\d{5})","$1 $2",["2"]]]],GL:["299","00","(?:19|[2-689]\\d|70)\\d{4}",[6],[["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["19|[2-9]"]]]],GM:["220","00","[2-9]\\d{6}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[2-9]"]]]],GN:["224","00","722\\d{6}|(?:3|6\\d)\\d{7}",[8,9],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["3"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[67]"]]]],GP:["590","00","(?:590\\d|7090)\\d{5}|(?:69|80|9\\d)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-79]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0$1"]],"0",0,0,0,0,0,[["590(?:0[1-68]|[14][0-24-9]|2[0-68]|3[1-9]|5[3-579]|[68][0-689]|7[08]|9\\d)\\d{4}"],["(?:69(?:0\\d\\d|1(?:2[2-9]|3[0-5])|4(?:0[89]|1[2-6]|9\\d)|6(?:1[016-9]|5[0-4]|[67]\\d))|7090[0-4])\\d{4}"],["80[0-5]\\d{6}"],0,0,0,0,0,["9(?:(?:39[5-7]|76[018])\\d|475[0-6])\\d{4}"]]],GQ:["240","00","222\\d{6}|(?:3\\d|55|[89]0)\\d{7}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[235]"]],["(\\d{3})(\\d{6})","$1 $2",["[89]"]]]],GR:["30","00","5005000\\d{3}|8\\d{9,11}|(?:[269]\\d|70)\\d{8}",[10,11,12],[["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["21|7"]],["(\\d{4})(\\d{6})","$1 $2",["2(?:2|3[2-57-9]|4[2-469]|5[2-59]|6[2-9]|7[2-69]|8[2-49])|5"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[2689]"]],["(\\d{3})(\\d{3,4})(\\d{5})","$1 $2 $3",["8"]]]],GT:["502","00","80\\d{6}|(?:1\\d{3}|[2-7])\\d{7}",[8,11],[["(\\d{4})(\\d{4})","$1 $2",["[2-8]"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]]]],GU:["1","011","(?:[58]\\d\\d|671|900)\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","671$1",0,"671"],GW:["245","00","[49]\\d{8}|4\\d{6}",[7,9],[["(\\d{3})(\\d{4})","$1 $2",["40"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[49]"]]]],GY:["592","001","(?:[2-8]\\d{3}|9008)\\d{3}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[2-9]"]]]],HK:["852","00(?:30|5[09]|[126-9]?)","8[0-46-9]\\d{6,7}|9\\d{4,7}|(?:[2-7]|9\\d{3})\\d{7}",[5,6,7,8,9,11],[["(\\d{3})(\\d{2,5})","$1 $2",["900","9003"]],["(\\d{4})(\\d{4})","$1 $2",["[2-7]|8[1-4]|9(?:0[1-9]|[1-8])"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8"]],["(\\d{3})(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3 $4",["9"]]],0,0,0,0,0,0,0,"00"],HN:["504","00","8\\d{10}|[237-9]\\d{7}",[8,11],[["(\\d{4})(\\d{4})","$1-$2",["[237-9]"]]]],HR:["385","00","[2-69]\\d{8}|80\\d{5,7}|[1-79]\\d{7}|6\\d{6}",[7,8,9],[["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["6[01]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2,3})","$1 $2 $3",["8"],"0$1"],["(\\d)(\\d{4})(\\d{3})","$1 $2 $3",["1"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["6|7[245]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["9"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-57]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8"],"0$1"]],"0"],HT:["509","00","[2-589]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["[2-589]"]]]],HU:["36","00","[235-7]\\d{8}|[1-9]\\d{7}",[8,9],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["1"],"(06 $1)"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[27][2-9]|3[2-7]|4[24-9]|5[2-79]|6|8[2-57-9]|9[2-69]"],"(06 $1)"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-9]"],"06 $1"]],"06"],ID:["62","00[89]","00[1-9]\\d{9,14}|(?:[1-36]|8\\d{5})\\d{6}|00\\d{9}|[1-9]\\d{8,10}|[2-9]\\d{7}",[7,8,9,10,11,12,13,14,15,16,17],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["15"]],["(\\d{2})(\\d{5,9})","$1 $2",["2[124]|[36]1"],"(0$1)"],["(\\d{3})(\\d{5,7})","$1 $2",["800"],"0$1"],["(\\d{3})(\\d{5,8})","$1 $2",["[2-79]"],"(0$1)"],["(\\d{3})(\\d{3,4})(\\d{3})","$1-$2-$3",["8[1-35-9]"],"0$1"],["(\\d{3})(\\d{6,8})","$1 $2",["1"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["804"],"0$1"],["(\\d{3})(\\d)(\\d{3})(\\d{3})","$1 $2 $3 $4",["80"],"0$1"],["(\\d{3})(\\d{4})(\\d{4,5})","$1-$2-$3",["8"],"0$1"]],"0"],IE:["353","00","(?:1\\d|[2569])\\d{6,8}|4\\d{6,9}|7\\d{8}|8\\d{8,9}",[7,8,9,10],[["(\\d{2})(\\d{5})","$1 $2",["2[24-9]|47|58|6[237-9]|9[35-9]"],"(0$1)"],["(\\d{3})(\\d{5})","$1 $2",["[45]0"],"(0$1)"],["(\\d)(\\d{3,4})(\\d{4})","$1 $2 $3",["1"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2569]|4[1-69]|7[14]"],"(0$1)"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["70"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["81"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[78]"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["4"],"(0$1)"],["(\\d{2})(\\d)(\\d{3})(\\d{4})","$1 $2 $3 $4",["8"],"0$1"]],"0"],IL:["972","0(?:0|1[2-9])","1\\d{6}(?:\\d{3,5})?|[57]\\d{8}|[1-489]\\d{7}",[7,8,9,10,11,12],[["(\\d{4})(\\d{3})","$1-$2",["125"]],["(\\d{4})(\\d{2})(\\d{2})","$1-$2-$3",["121"]],["(\\d)(\\d{3})(\\d{4})","$1-$2-$3",["[2-489]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["[57]"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1-$2-$3",["12"]],["(\\d{4})(\\d{6})","$1-$2",["159"]],["(\\d)(\\d{3})(\\d{3})(\\d{3})","$1-$2-$3-$4",["1[7-9]"]],["(\\d{3})(\\d{1,2})(\\d{3})(\\d{4})","$1-$2 $3-$4",["15"]]],"0"],IM:["44","00","1624\\d{6}|(?:[3578]\\d|90)\\d{8}",[10],0,"0",0,"([25-8]\\d{5})$|0|180020","1624$1",0,"74576|(?:16|7[56])24"],IN:["91","00","(?:000800|[2-9]\\d\\d)\\d{7}|1\\d{7,12}",[8,9,10,11,12,13],[["(\\d{8})","$1",["5(?:0|2[23]|3[03]|[67]1|88)","5(?:0|2(?:21|3)|3(?:0|3[23])|616|717|888)","5(?:0|2(?:21|3)|3(?:0|3[23])|616|717|8888)"],0,1],["(\\d{4})(\\d{4,5})","$1 $2",["180","1800"],0,1],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["140"],0,1],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["11|2[02]|33|4[04]|79[1-7]|80[2-46]","11|2[02]|33|4[04]|79(?:[1-6]|7[19])|80(?:[2-4]|6[0-589])","11|2[02]|33|4[04]|79(?:[124-6]|3(?:[02-9]|1[0-24-9])|7(?:1|9[1-6]))|80(?:[2-4]|6[0-589])"],"0$1",1],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["1(?:2[0-249]|3[0-25]|4[145]|[68]|7[1257])|2(?:1[257]|3[013]|4[01]|5[0137]|6[0158]|78|8[1568])|3(?:26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|5[12]|[78]1)|6(?:12|[2-4]1|5[17]|6[13]|80)|7(?:12|3[134]|4[47]|61|88)|8(?:16|2[014]|3[126]|6[136]|7[078]|8[34]|91)|(?:43|59|75)[15]|(?:1[59]|29|67|72)[14]","1(?:2[0-24]|3[0-25]|4[145]|[59][14]|6[1-9]|7[1257]|8[1-57-9])|2(?:1[257]|3[013]|4[01]|5[0137]|6[058]|78|8[1568]|9[14])|3(?:26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|3[15]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|[578]1|9[15])|674|7(?:(?:2[14]|3[34]|5[15])[2-6]|61[346]|88[0-8])|8(?:70[2-6]|84[235-7]|91[3-7])|(?:1(?:29|60|8[06])|261|552|6(?:12|[2-47]1|5[17]|6[13]|80)|7(?:12|31|4[47])|8(?:16|2[014]|3[126]|6[136]|7[78]|83))[2-7]","1(?:2[0-24]|3[0-25]|4[145]|[59][14]|6[1-9]|7[1257]|8[1-57-9])|2(?:1[257]|3[013]|4[01]|5[0137]|6[058]|78|8[1568]|9[14])|3(?:26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|3[15]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|[578]1|9[15])|6(?:12(?:[2-6]|7[0-8])|74[2-7])|7(?:(?:2[14]|5[15])[2-6]|3171|61[346]|88(?:[2-7]|82))|8(?:70[2-6]|84(?:[2356]|7[19])|91(?:[3-6]|7[19]))|73[134][2-6]|(?:74[47]|8(?:16|2[014]|3[126]|6[136]|7[78]|83))(?:[2-6]|7[19])|(?:1(?:29|60|8[06])|261|552|6(?:[2-4]1|5[17]|6[13]|7(?:1|4[0189])|80)|7(?:12|88[01]))[2-7]"],"0$1",1],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1(?:[2-479]|5[0235-9])|[2-5]|6(?:1[1358]|2[2457-9]|3[2-5]|4[235-7]|5[2-689]|6[24578]|7[235689]|8[1-6])|7(?:1[013-9]|28|3[129]|4[1-35689]|5[29]|6[02-5]|70)|807","1(?:[2-479]|5[0235-9])|[2-5]|6(?:1[1358]|2(?:[2457]|84|95)|3(?:[2-4]|55)|4[235-7]|5[2-689]|6[24578]|7[235689]|8[1-6])|7(?:1(?:[013-8]|9[6-9])|28[6-8]|3(?:17|2[0-49]|9[2-57])|4(?:1[2-4]|[29][0-7]|3[0-8]|[56]|8[0-24-7])|5(?:2[1-3]|9[0-6])|6(?:0[5689]|2[5-9]|3[02-8]|4|5[0-367])|70[13-7])|807[19]","1(?:[2-479]|5(?:[0236-9]|5[013-9]))|[2-5]|6(?:2(?:84|95)|355|83)|73179|807(?:1|9[1-3])|(?:1552|6(?:1[1358]|2[2457]|3[2-4]|4[235-7]|5[2-689]|6[24578]|7[235689]|8[124-6])\\d|7(?:1(?:[013-8]\\d|9[6-9])|28[6-8]|3(?:2[0-49]|9[2-57])|4(?:1[2-4]|[29][0-7]|3[0-8]|[56]\\d|8[0-24-7])|5(?:2[1-3]|9[0-6])|6(?:0[5689]|2[5-9]|3[02-8]|4\\d|5[0-367])|70[13-7]))[2-7]"],"0$1",1],["(\\d{5})(\\d{5})","$1 $2",["[6-9]"],"0$1",1],["(\\d{4})(\\d{2,4})(\\d{4})","$1 $2 $3",["1(?:6|8[06])","1(?:6|8[06]0)"],0,1],["(\\d{4})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["18"],0,1]],"0"],IO:["246","00","3\\d{6}",[7],[["(\\d{3})(\\d{4})","$1 $2",["3"]]]],IQ:["964","00","(?:1|7\\d\\d)\\d{7}|[2-6]\\d{7,8}",[8,9,10],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-6]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"0$1"]],"0"],IR:["98","00","[1-9]\\d{9}|(?:[1-8]\\d\\d|9)\\d{3,4}",[4,5,6,7,10],[["(\\d{4,5})","$1",["96"],"0$1"],["(\\d{2})(\\d{4,5})","$1 $2",["(?:1[137]|2[13-68]|3[1458]|4[145]|5[1468]|6[16]|7[1467]|8[13467])[12689]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["9"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["[1-8]"],"0$1"]],"0"],IS:["354","00|1(?:0(?:01|[12]0)|100)","(?:38\\d|[4-9])\\d{6}",[7,9],[["(\\d{3})(\\d{4})","$1 $2",["[4-9]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["3"]]],0,0,0,0,0,0,0,"00"],IT:["39","00","0\\d{5,11}|1\\d{8,10}|3(?:[0-8]\\d{7,10}|9\\d{7,8})|(?:43|55|70)\\d{8}|8\\d{5}(?:\\d{2,4})?",[6,7,8,9,10,11,12],[["(\\d{2})(\\d{4,6})","$1 $2",["0[26]"]],["(\\d{3})(\\d{3,6})","$1 $2",["0[13-57-9][0159]|8(?:03|4[17]|9[2-5])","0[13-57-9][0159]|8(?:03|4[17]|9(?:2|3[04]|[45][0-4]))"]],["(\\d{4})(\\d{2,6})","$1 $2",["0(?:[13-579][2-46-8]|8[236-8])"]],["(\\d{4})(\\d{4})","$1 $2",["894"]],["(\\d{2})(\\d{3,4})(\\d{4})","$1 $2 $3",["0[26]|5"]],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["1(?:44|[679])|[378]|43"]],["(\\d{3})(\\d{3,4})(\\d{4})","$1 $2 $3",["0[13-57-9][0159]|14"]],["(\\d{2})(\\d{4})(\\d{5})","$1 $2 $3",["0[26]"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["0"]],["(\\d{3})(\\d{4})(\\d{4,5})","$1 $2 $3",["[03]"]]],0,0,0,0,0,0,[["0(?:669[0-79]\\d{1,6}|831\\d{2,8})|0(?:1(?:[0159]\\d|[27][1-5]|31|4[1-4]|6[1356]|8[2-57])|2\\d\\d|3(?:[0159]\\d|2[1-4]|3[12]|[48][1-6]|6[2-59]|7[1-7])|4(?:[0159]\\d|[23][1-9]|4[245]|6[1-5]|7[1-4]|81)|5(?:[0159]\\d|2[1-5]|3[2-6]|4[1-79]|6[4-6]|7[1-578]|8[3-8])|6(?:[0-57-9]\\d|6[0-8])|7(?:[0159]\\d|2[12]|3[1-7]|4[2-46]|6[13569]|7[13-6]|8[1-59])|8(?:[0159]\\d|2[3-578]|3[2356]|[6-8][1-5])|9(?:[0159]\\d|[238][1-5]|4[12]|6[1-8]|7[1-6]))\\d{2,7}"],["3[2-9]\\d{7,8}|(?:31|43)\\d{8}",[9,10]],["80(?:0\\d{3}|3)\\d{3}",[6,9]],["(?:0878\\d{3}|89(?:2\\d|3[04]|4(?:[0-4]|[5-9]\\d\\d)|5[0-4]))\\d\\d|(?:1(?:44|6[346])|89(?:38|5[5-9]|9))\\d{6}",[6,8,9,10]],["1(?:78\\d|99)\\d{6}",[9,10]],["3[2-8]\\d{9,10}",[11,12]],0,0,["55\\d{8}",[10]],["84(?:[08]\\d{3}|[17])\\d{3}",[6,9]]]],JE:["44","00","1534\\d{6}|(?:[3578]\\d|90)\\d{8}",[10],0,"0",0,"([0-24-8]\\d{5})$|0|180020","1534$1",0,0,[["1534[0-24-8]\\d{5}"],["7(?:(?:(?:50|82)9|937)\\d|7(?:00[378]|97\\d))\\d{5}"],["80(?:07(?:35|81)|8901)\\d{4}"],["(?:8(?:4(?:4(?:4(?:05|42|69)|703)|5(?:041|800))|7(?:0002|1206))|90(?:066[59]|1810|71(?:07|55)))\\d{4}"],["701511\\d{4}"],0,["(?:3(?:0(?:07(?:35|81)|8901)|3\\d{4}|4(?:4(?:4(?:05|42|69)|703)|5(?:041|800))|7(?:0002|1206))|55\\d{4})\\d{4}"],["76(?:464|652)\\d{5}|76(?:0[0-28]|2[356]|34|4[01347]|5[49]|6[0-369]|77|8[14]|9[139])\\d{6}"],["56\\d{8}"]]],JM:["1","011","(?:[58]\\d\\d|658|900)\\d{7}",[10],0,"1",0,0,0,0,"658|876"],JO:["962","00","(?:(?:[2689]|7\\d)\\d|32|427|53)\\d{6}",[8,9],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[2356]|87"],"(0$1)"],["(\\d{3})(\\d{5,6})","$1 $2",["[89]"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["70"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["[47]"],"0$1"]],"0"],JP:["81","010","00[1-9]\\d{6,14}|[25-9]\\d{9}|(?:00|[1-9]\\d\\d)\\d{6}",[8,9,10,11,12,13,14,15,16,17],[["(\\d{3})(\\d{3})(\\d{3})","$1-$2-$3",["(?:12|57|99)0"],"0$1"],["(\\d{4})(\\d)(\\d{4})","$1-$2-$3",["1(?:26|3[79]|4[56]|5[4-68]|6[3-5])|499|5(?:76|97)|746|8(?:3[89]|47|51)|9(?:80|9[16])","1(?:267|3(?:7[247]|9[278])|466|5(?:47|58|64)|6(?:3[245]|48|5[4-68]))|499[2468]|5(?:76|97)9|7468|8(?:3(?:8[7-9]|96)|477|51[2-9])|9(?:802|9(?:1[23]|69))|1(?:45|58)[67]","1(?:267|3(?:7[247]|9[278])|466|5(?:47|58|64)|6(?:3[245]|48|5[4-68]))|499[2468]|5(?:769|979[2-69])|7468|8(?:3(?:8[7-9]|96[2457-9])|477|51[2-9])|9(?:802|9(?:1[23]|69))|1(?:45|58)[67]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["60"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1-$2-$3",["3|4(?:2[09]|7[01])|6[1-9]","3|4(?:2(?:0|9[02-69])|7(?:0[019]|1))|6[1-9]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["1(?:1|5[45]|77|88|9[69])|2(?:2[1-37]|3[0-269]|4[59]|5|6[24]|7[1-358]|8[1369]|9[0-38])|4(?:[28][1-9]|3[0-57]|[45]|6[248]|7[2-579]|9[29])|5(?:2|3[0459]|4[0-369]|5[29]|8[02389]|9[0-389])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9[2-6])|8(?:2[124589]|3[26-9]|49|51|6|7[0-468]|8[68]|9[019])|9(?:[23][1-9]|4[15]|5[138]|6[1-3]|7[156]|8[189]|9[1-489])","1(?:1|5(?:4[018]|5[017])|77|88|9[69])|2(?:2(?:[127]|3[014-9])|3[0-269]|4[59]|5(?:[1-3]|5[0-69]|9[19])|62|7(?:[1-35]|8[0189])|8(?:[16]|3[0134]|9[0-5])|9(?:[028]|17))|4(?:2(?:[13-79]|8[014-6])|3[0-57]|[45]|6[248]|7[2-47]|8[1-9]|9[29])|5(?:2|3(?:[045]|9[0-8])|4[0-369]|5[29]|8[02389]|9[0-3])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9(?:[23]|4[0-59]|5[01569]|6[0167]))|8(?:2(?:[1258]|4[0-39]|9[0-2469])|3(?:[29]|60)|49|51|6(?:[0-24]|36|5[0-3589]|7[23]|9[01459])|7[0-468]|8[68])|9(?:[23][1-9]|4[15]|5[138]|6[1-3]|7[156]|8[189]|9(?:[1289]|3[34]|4[0178]))|(?:264|837)[016-9]|2(?:57|93)[015-9]|(?:25[0468]|422|838)[01]|(?:47[59]|59[89]|8(?:6[68]|9))[019]","1(?:1|5(?:4[018]|5[017])|77|88|9[69])|2(?:2[127]|3[0-269]|4[59]|5(?:[1-3]|5[0-69]|9(?:17|99))|6(?:2|4[016-9])|7(?:[1-35]|8[0189])|8(?:[16]|3[0134]|9[0-5])|9(?:[028]|17))|4(?:2(?:[13-79]|8[014-6])|3[0-57]|[45]|6[248]|7[2-47]|9[29])|5(?:2|3(?:[045]|9(?:[0-58]|6[4-9]|7[0-35689]))|4[0-369]|5[29]|8[02389]|9[0-3])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9(?:[23]|4[0-59]|5[01569]|6[0167]))|8(?:2(?:[1258]|4[0-39]|9[0169])|3(?:[29]|60|7(?:[017-9]|6[6-8]))|49|51|6(?:[0-24]|36[2-57-9]|5(?:[0-389]|5[23])|6(?:[01]|9[178])|7(?:2[2-468]|3[78])|9[0145])|7[0-468]|8[68])|9(?:4[15]|5[138]|7[156]|8[189]|9(?:[1289]|3(?:31|4[357])|4[0178]))|(?:8294|96)[1-3]|2(?:57|93)[015-9]|(?:223|8699)[014-9]|(?:25[0468]|422|838)[01]|(?:48|8292|9[23])[1-9]|(?:47[59]|59[89]|8(?:68|9))[019]"],"0$1"],["(\\d{3})(\\d{2})(\\d{4})","$1-$2-$3",["[14]|[289][2-9]|5[3-9]|7[2-4679]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3",["800"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1-$2-$3",["[25-9]"],"0$1"]],"0",0,"(000[2569]\\d{4,6})$|(?:(?:003768)0?)|0","$1"],KE:["254","000","(?:[17]\\d\\d|900)\\d{6}|(?:2|80)0\\d{6,7}|[4-6]\\d{6,8}",[7,8,9,10],[["(\\d{2})(\\d{5,7})","$1 $2",["[24-6]"],"0$1"],["(\\d{3})(\\d{6})","$1 $2",["[17]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["[89]"],"0$1"]],"0"],KG:["996","00","8\\d{9}|[235-9]\\d{8}",[9,10],[["(\\d{4})(\\d{5})","$1 $2",["3(?:1[346]|[24-79])"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[235-79]|88"],"0$1"],["(\\d{3})(\\d{3})(\\d)(\\d{2,3})","$1 $2 $3 $4",["8"],"0$1"]],"0"],KH:["855","00[14-9]","1\\d{9}|[1-9]\\d{7,8}",[8,9,10],[["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[1-9]"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]]],"0"],KI:["686","00","(?:[37]\\d|6[0-79])\\d{6}|(?:[2-48]\\d|50)\\d{3}",[5,8],0,"0"],KM:["269","00","[3478]\\d{6}",[7],[["(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["[3478]"]]]],KN:["1","011","(?:[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-7]\\d{6})$|1","869$1",0,"869"],KP:["850","00|99","85\\d{6}|(?:19\\d|[2-7])\\d{7}",[8,10],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["8"],"0$1"],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[2-7]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"]],"0"],KR:["82","00(?:[125689]|3(?:[46]5|91)|7(?:00|27|3|55|6[126]))","00[1-9]\\d{8,11}|(?:[12]|5\\d{3})\\d{7}|[13-6]\\d{9}|(?:[1-6]\\d|80)\\d{7}|[3-6]\\d{4,5}|(?:00|7)0\\d{8}",[5,6,8,9,10,11,12,13,14],[["(\\d{2})(\\d{3,4})","$1-$2",["(?:3[1-3]|[46][1-4]|5[1-5])1"],"0$1"],["(\\d{4})(\\d{4})","$1-$2",["1"]],["(\\d)(\\d{3,4})(\\d{4})","$1-$2-$3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["[36]0|8"],"0$1"],["(\\d{2})(\\d{3,4})(\\d{4})","$1-$2-$3",["[1346]|5[1-5]"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1-$2-$3",["[57]"],"0$1"],["(\\d{2})(\\d{5})(\\d{4})","$1-$2-$3",["5"],"0$1"]],"0",0,"0(8(?:[1-46-8]|5\\d\\d))?"],KW:["965","00","18\\d{5}|(?:[2569]\\d|41)\\d{6}",[7,8],[["(\\d{4})(\\d{3,4})","$1 $2",["[169]|2(?:[235]|4[1-35-9])|52"]],["(\\d{3})(\\d{5})","$1 $2",["[245]"]]]],KY:["1","011","(?:345|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","345$1",0,"345"],KZ:["7","810","(?:33622|8\\d{8})\\d{5}|[78]\\d{9}",[10,14],0,"8",0,0,0,0,"33622|7",0,"8~10"],LA:["856","00","[23]\\d{9}|3\\d{8}|(?:[235-8]\\d|41)\\d{6}",[8,9,10],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["2[13]|3[14]|[4-8]"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3 $4",["3"],"0$1"],["(\\d{2})(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3 $4",["[23]"],"0$1"]],"0"],LB:["961","00","[27-9]\\d{7}|[13-9]\\d{6}",[7,8],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[13-69]|7(?:[2-57]|62|8[0-6]|9[04-9])|8[02-9]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[27-9]"]]],"0"],LC:["1","011","(?:[58]\\d\\d|758|900)\\d{7}",[10],0,"1",0,"([2-8]\\d{6})$|1","758$1",0,"758"],LI:["423","00","[68]\\d{8}|(?:[2378]\\d|90)\\d{5}",[7,9],[["(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["[2379]|8(?:0[09]|7)","[2379]|8(?:0(?:02|9)|7)"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["69"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6"]]],"0",0,"(1001)|0"],LK:["94","00","[1-9]\\d{8}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[1-689]"],"0$1"]],"0"],LR:["231","00","(?:[2457]\\d|33|88)\\d{7}|(?:2\\d|[4-6])\\d{6}",[7,8,9],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["4[67]|[56]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[2-578]"],"0$1"]],"0"],LS:["266","00","(?:[256]\\d\\d|800)\\d{5}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[2568]"]]]],LT:["370","00","(?:[3469]\\d|52|[78]0)\\d{6}",[8],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["52[0-7]"],"(0-$1)",1],["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["[7-9]"],"0 $1",1],["(\\d{2})(\\d{6})","$1 $2",["37|4(?:[15]|6[1-8])"],"(0-$1)",1],["(\\d{3})(\\d{5})","$1 $2",["[3-6]"],"(0-$1)",1]],"0",0,"[08]"],LU:["352","00","35[013-9]\\d{4,8}|6\\d{8}|35\\d{2,4}|(?:[2457-9]\\d|3[0-46-9])\\d{2,9}",[4,5,6,7,8,9,10,11],[["(\\d{2})(\\d{3})","$1 $2",["2(?:0[2-689]|[2-9])|[3-57]|8(?:0[2-9]|[13-9])|9(?:0[89]|[2-579])"]],["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["2(?:0[2-689]|[2-9])|[3-57]|8(?:0[2-9]|[13-9])|9(?:0[89]|[2-579])"]],["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["20[2-689]"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{1,2})","$1 $2 $3 $4",["2(?:[0367]|4[3-8])"]],["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["80[01]|90[015]"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3 $4",["20"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})(\\d{1,2})","$1 $2 $3 $4 $5",["2(?:[0367]|4[3-8])"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{1,5})","$1 $2 $3 $4",["[3-57]|8[13-9]|9(?:0[89]|[2-579])|(?:2|80)[2-9]"]]],0,0,"(15(?:0[06]|1[12]|[35]5|4[04]|6[26]|77|88|99)\\d)"],LV:["371","00","(?:[268]\\d|78|90)\\d{6}",[8],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[2679]|8[01]"]]]],LY:["218","00","[2-9]\\d{8}",[9],[["(\\d{2})(\\d{7})","$1-$2",["[2-9]"],"0$1"]],"0"],MA:["212","00","[5-8]\\d{8}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["5[45]"],"0$1"],["(\\d{4})(\\d{5})","$1-$2",["5(?:2[2-46-9]|3[3-9]|9)|8(?:0[89]|92)"],"0$1"],["(\\d{2})(\\d{7})","$1-$2",["8"],"0$1"],["(\\d{3})(\\d{6})","$1-$2",["[5-7]"],"0$1"]],"0",0,0,0,0,0,[["5(?:2(?:[0-25-79]\\d|3[1-578]|4[02-46-8]|8[0235-7])|3(?:[0-47]\\d|5[02-9]|6[02-8]|8[014-9]|9[3-9])|(?:4[067]|5[03])\\d)\\d{5}"],["(?:6(?:[0-79]\\d|8[0-247-9])|7(?:[0167]\\d|2[0-8]|5[0-5]|8[0-7]))\\d{6}"],["80[0-7]\\d{6}"],["89\\d{7}"],0,0,0,0,["(?:592(?:4[0-2]|93)|80[89]\\d\\d)\\d{4}"]]],MC:["377","00","(?:[3489]|[67]\\d)\\d{7}",[8,9],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["4"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[389]"]],["(\\d)(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["[67]"],"0$1"]],"0"],MD:["373","00","(?:[235-7]\\d|[89]0)\\d{6}",[8],[["(\\d{3})(\\d{5})","$1 $2",["[89]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["22|3"],"0$1"],["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["[25-7]"],"0$1"]],"0"],ME:["382","00","(?:20|[3-79]\\d)\\d{6}|80\\d{6,7}",[8,9],[["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-9]"],"0$1"]],"0"],MF:["590","00","(?:590\\d|7090)\\d{5}|(?:69|80|9\\d)\\d{7}",[9],0,"0",0,0,0,0,0,[["590(?:0[079]|[14]3|[27][79]|3[03-7]|5[0-268]|87)\\d{4}"],["(?:69(?:0\\d\\d|1(?:2[2-9]|3[0-5])|4(?:0[89]|1[2-6]|9\\d)|6(?:1[016-9]|5[0-4]|[67]\\d))|7090[0-4])\\d{4}"],["80[0-5]\\d{6}"],0,0,0,0,0,["9(?:(?:39[5-7]|76[018])\\d|475[0-6])\\d{4}"]]],MG:["261","00","[23]\\d{8}",[9],[["(\\d{2})(\\d{2})(\\d{3})(\\d{2})","$1 $2 $3 $4",["[23]"],"0$1"]],"0",0,"([24-9]\\d{6})$|0","20$1"],MH:["692","011","329\\d{4}|(?:[256]\\d|45)\\d{5}",[7],[["(\\d{3})(\\d{4})","$1-$2",["[2-6]"]]],"1"],MK:["389","00","[2-578]\\d{7}",[8],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["2|34[47]|4(?:[37]7|5[47]|64)"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[347]"],"0$1"],["(\\d{3})(\\d)(\\d{2})(\\d{2})","$1 $2 $3 $4",["[58]"],"0$1"]],"0"],ML:["223","00","[24-9]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[24-9]"]]]],MM:["95","00","1\\d{5,7}|95\\d{6}|(?:[4-7]|9[0-46-9])\\d{6,8}|(?:2|8\\d)\\d{5,8}",[6,7,8,9,10],[["(\\d)(\\d{2})(\\d{3})","$1 $2 $3",["16|2"],"0$1"],["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["4(?:[2-46]|5[3-5])|5|6(?:[1-689]|7[235-7])|7(?:[0-4]|5[2-7])|8[1-5]|(?:60|86)[23]"],"0$1"],["(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["[12]|452|678|86","[12]|452|6788|86"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[4-7]|8[1-35]"],"0$1"],["(\\d)(\\d{3})(\\d{4,6})","$1 $2 $3",["9(?:2[0-4]|[35-9]|4[137-9])"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["2"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"],"0$1"],["(\\d)(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["92"],"0$1"],["(\\d)(\\d{5})(\\d{4})","$1 $2 $3",["9"],"0$1"]],"0"],MN:["976","001","[12]\\d{7,9}|[5-9]\\d{7}",[8,9,10],[["(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["[12]1"],"0$1"],["(\\d{4})(\\d{4})","$1 $2",["[5-9]"]],["(\\d{3})(\\d{5,6})","$1 $2",["[12]2[1-3]"],"0$1"],["(\\d{4})(\\d{5,6})","$1 $2",["[12](?:27|3[2-8]|4[2-68]|5[1-4689])","[12](?:27|3[2-8]|4[2-68]|5[1-4689])[0-3]"],"0$1"],["(\\d{5})(\\d{4,5})","$1 $2",["[12]"],"0$1"]],"0"],MO:["853","00","0800\\d{3}|(?:28|[68]\\d)\\d{6}",[7,8],[["(\\d{4})(\\d{3})","$1 $2",["0"]],["(\\d{4})(\\d{4})","$1 $2",["[268]"]]]],MP:["1","011","[58]\\d{9}|(?:67|90)0\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","670$1",0,"670"],MQ:["596","00","(?:596\\d|7091)\\d{5}|(?:69|[89]\\d)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-79]|8(?:0[6-9]|[36])"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0$1"]],"0"],MR:["222","00","(?:[2-4]\\d\\d|800)\\d{5}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-48]"]]]],MS:["1","011","(?:[58]\\d\\d|664|900)\\d{7}",[10],0,"1",0,"([34]\\d{6})$|1","664$1",0,"664"],MT:["356","00","3550\\d{4}|(?:[2579]\\d\\d|800)\\d{5}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[2357-9]"]]]],MU:["230","0(?:0|[24-7]0|3[03])","(?:[57]|8\\d\\d)\\d{7}|[2-468]\\d{6}",[7,8,10],[["(\\d{3})(\\d{4})","$1 $2",["[2-46]|8[013]"]],["(\\d{4})(\\d{4})","$1 $2",["[57]"]],["(\\d{5})(\\d{5})","$1 $2",["8"]]],0,0,0,0,0,0,0,"020"],MV:["960","0(?:0|19)","(?:800|9[0-57-9]\\d)\\d{7}|[34679]\\d{6}",[7,10],[["(\\d{3})(\\d{4})","$1-$2",["[34679]"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[89]"]]],0,0,0,0,0,0,0,"00"],MW:["265","00","(?:[1289]\\d|31|77)\\d{7}|1\\d{6}",[7,9],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["1[2-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["2"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[137-9]"],"0$1"]],"0"],MX:["52","0[09]","[2-9]\\d{9}",[10],[["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["33|5[56]|81"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[2-9]"]]],0,0,0,0,0,0,0,"00"],MY:["60","00","1\\d{8,9}|(?:3\\d|[4-9])\\d{7}",[8,9,10],[["(\\d)(\\d{3})(\\d{4})","$1-$2 $3",["[4-79]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1-$2 $3",["1(?:[02469]|[378][1-9]|53)|8","1(?:[02469]|[37][1-9]|53|8(?:[1-46-9]|5[7-9]))|8"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1-$2 $3",["3"],"0$1"],["(\\d)(\\d{3})(\\d{2})(\\d{4})","$1-$2-$3-$4",["1(?:[367]|80)"]],["(\\d{3})(\\d{3})(\\d{4})","$1-$2 $3",["15"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1-$2 $3",["1"],"0$1"]],"0"],MZ:["258","00","(?:2|8\\d)\\d{7}",[8,9],[["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["2|8[2-79]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8"]]]],NA:["264","00","[68]\\d{7,8}",[8,9],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["88"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["6"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["87"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["8"],"0$1"]],"0"],NC:["687","00","(?:050|[2-57-9]\\d\\d)\\d{3}",[6],[["(\\d{2})(\\d{2})(\\d{2})","$1.$2.$3",["[02-57-9]"]]]],NE:["227","00","[027-9]\\d{7}",[8],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["08"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[089]|2[013]|7[0467]"]]]],NF:["672","00","[13]\\d{5}",[6],[["(\\d{2})(\\d{4})","$1 $2",["1[0-3]"]],["(\\d)(\\d{5})","$1 $2",["[13]"]]],0,0,"([0-258]\\d{4})$","3$1"],NG:["234","009","(?:20|9\\d)\\d{8}|[78]\\d{9,13}",[10,11,12,13,14],[["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["[7-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["20[129]"],"0$1"],["(\\d{4})(\\d{2})(\\d{4})","$1 $2 $3",["2"],"0$1"],["(\\d{3})(\\d{4})(\\d{4,5})","$1 $2 $3",["[78]"],"0$1"],["(\\d{3})(\\d{5})(\\d{5,6})","$1 $2 $3",["[78]"],"0$1"]],"0"],NI:["505","00","(?:1800|[25-8]\\d{3})\\d{4}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[125-8]"]]]],NL:["31","00","(?:[124-7]\\d\\d|3(?:[02-9]\\d|1[0-8]))\\d{6}|8\\d{6,9}|9\\d{6,10}|1\\d{4,5}",[5,6,7,8,9,10,11],[["(\\d{3})(\\d{4,7})","$1 $2",["[89]0"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["66"],"0$1"],["(\\d)(\\d{8})","$1 $2",["6"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["1[16-8]|2[259]|3[124]|4[17-9]|5[124679]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[1-578]|91"],"0$1"],["(\\d{3})(\\d{3})(\\d{5})","$1 $2 $3",["9"],"0$1"]],"0"],NO:["47","00","(?:0|[2-9]\\d{3})\\d{4}",[5,8],[["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["8"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-79]"]]],0,0,0,0,0,"[02-689]|7[0-8]"],NP:["977","00","(?:1\\d|9)\\d{9}|[1-9]\\d{7}",[8,10,11],[["(\\d)(\\d{7})","$1-$2",["1[2-6]"],"0$1"],["(\\d{2})(\\d{6})","$1-$2",["1[01]|[2-8]|9(?:[1-59]|[67][2-6])"],"0$1"],["(\\d{3})(\\d{7})","$1-$2",["9"]]],"0"],NR:["674","00","(?:222|444|(?:55|8\\d)\\d|666|777|999)\\d{4}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[24-9]"]]]],NU:["683","00","(?:[4-7]|888\\d)\\d{3}",[4,7],[["(\\d{3})(\\d{4})","$1 $2",["8"]]]],NZ:["64","0(?:0|161)","[1289]\\d{9}|50\\d{5}(?:\\d{2,3})?|[27-9]\\d{7,8}|(?:[34]\\d|6[0-35-9])\\d{6}|8\\d{4,6}",[5,6,7,8,9,10],[["(\\d{2})(\\d{3,8})","$1 $2",["8[1-79]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2,3})","$1 $2 $3",["50[036-8]|8|90","50(?:[0367]|88)|8|90"],"0$1"],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["24|[346]|7[2-57-9]|9[2-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["2(?:10|74)|[589]"],"0$1"],["(\\d{2})(\\d{3,4})(\\d{4})","$1 $2 $3",["1|2[028]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,5})","$1 $2 $3",["2(?:[169]|7[0-35-9])|7"],"0$1"]],"0",0,0,0,0,0,0,"00"],OM:["968","00","(?:1505|[279]\\d{3}|500)\\d{4}|800\\d{5,6}",[7,8,9],[["(\\d{3})(\\d{4,6})","$1 $2",["[58]"]],["(\\d{2})(\\d{6})","$1 $2",["2"]],["(\\d{4})(\\d{4})","$1 $2",["[179]"]]]],PA:["507","00","(?:00800|8\\d{3})\\d{6}|[68]\\d{7}|[1-57-9]\\d{6}",[7,8,10,11],[["(\\d{3})(\\d{4})","$1-$2",["[1-57-9]"]],["(\\d{4})(\\d{4})","$1-$2",["[68]"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"]]]],PE:["51","00|19(?:1[124]|77|90)00","(?:[14-8]|9\\d)\\d{7}",[8,9],[["(\\d{3})(\\d{5})","$1 $2",["80"],"(0$1)"],["(\\d)(\\d{7})","$1 $2",["1"],"(0$1)"],["(\\d{2})(\\d{6})","$1 $2",["[4-8]"],"(0$1)"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["9"]]],"0",0,0,0,0,0,0,"00"," Anexo "],PF:["689","00","4\\d{5}(?:\\d{2})?|8\\d{7,8}",[6,8,9],[["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["44"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["4|8[7-9]"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"]]]],PG:["675","00|140[1-3]","(?:180|[78]\\d{3})\\d{4}|(?:[2-589]\\d|64)\\d{5}",[7,8],[["(\\d{3})(\\d{4})","$1 $2",["18|[2-69]|85"]],["(\\d{4})(\\d{4})","$1 $2",["[78]"]]],0,0,0,0,0,0,0,"00"],PH:["63","00","(?:[2-7]|9\\d)\\d{8}|2\\d{5}|(?:1800|8)\\d{7,9}",[6,8,9,10,11,12,13],[["(\\d)(\\d{5})","$1 $2",["2"],"(0$1)"],["(\\d{4})(\\d{4,6})","$1 $2",["3(?:23|39|46)|4(?:2[3-6]|[35]9|4[26]|76)|544|88[245]|(?:52|64|86)2","3(?:230|397|461)|4(?:2(?:35|[46]4|51)|396|4(?:22|63)|59[347]|76[15])|5(?:221|446)|642[23]|8(?:622|8(?:[24]2|5[13]))"],"(0$1)"],["(\\d{5})(\\d{4})","$1 $2",["346|4(?:27|9[35])|883","3469|4(?:279|9(?:30|56))|8834"],"(0$1)"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["2"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[3-7]|8[2-8]"],"(0$1)"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[89]"],"0$1"],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]],["(\\d{4})(\\d{1,2})(\\d{3})(\\d{4})","$1 $2 $3 $4",["1"]]],"0"],PK:["92","00","122\\d{6}|[24-8]\\d{10,11}|9(?:[013-9]\\d{8,10}|2(?:[01]\\d\\d|2(?:[06-8]\\d|1[01]))\\d{7})|(?:[2-8]\\d{3}|92(?:[0-7]\\d|8[1-9]))\\d{6}|[24-9]\\d{8}|[89]\\d{7}",[8,9,10,11,12],[["(\\d{3})(\\d{3})(\\d{2,7})","$1 $2 $3",["[89]0"],"0$1"],["(\\d{4})(\\d{5})","$1 $2",["1"]],["(\\d{3})(\\d{6,7})","$1 $2",["2(?:3[2358]|4[2-4]|9[2-8])|45[3479]|54[2-467]|60[468]|72[236]|8(?:2[2-689]|3[23578]|4[3478]|5[2356])|9(?:2[2-8]|3[27-9]|4[2-6]|6[3569]|9[25-8])","9(?:2[3-8]|98)|(?:2(?:3[2358]|4[2-4]|9[2-8])|45[3479]|54[2-467]|60[468]|72[236]|8(?:2[2-689]|3[23578]|4[3478]|5[2356])|9(?:22|3[27-9]|4[2-6]|6[3569]|9[25-7]))[2-9]"],"(0$1)"],["(\\d{2})(\\d{7,8})","$1 $2",["(?:2[125]|4[0-246-9]|5[1-35-7]|6[1-8]|7[14]|8[16]|91)[2-9]"],"(0$1)"],["(\\d{5})(\\d{5})","$1 $2",["58"],"(0$1)"],["(\\d{3})(\\d{7})","$1 $2",["3"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["2[125]|4[0-246-9]|5[1-35-7]|6[1-8]|7[14]|8[16]|91"],"(0$1)"],["(\\d{3})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["[24-9]"],"(0$1)"]],"0"],PL:["48","00","(?:6|8\\d\\d)\\d{7}|[1-9]\\d{6}(?:\\d{2})?|[26]\\d{5}",[6,7,8,9,10],[["(\\d{5})","$1",["19"]],["(\\d{3})(\\d{3})","$1 $2",["11|20|64"]],["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["(?:1[2-8]|2[2-69]|3[2-4]|4[1-468]|5[24-689]|6[1-3578]|7[14-7]|8[1-79]|9[145])1","(?:1[2-8]|2[2-69]|3[2-4]|4[1-468]|5[24-689]|6[1-3578]|7[14-7]|8[1-79]|9[145])19"]],["(\\d{3})(\\d{2})(\\d{2,3})","$1 $2 $3",["64"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["21|39|45|5[0137]|6[0469]|7[02389]|8(?:0[14]|8)"]],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["1[2-8]|[2-7]|8[1-79]|9[145]"]],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["8"]]]],PM:["508","00","[45]\\d{5}|(?:708|8\\d\\d)\\d{6}",[6,9],[["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["[45]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["7"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0$1"]],"0"],PR:["1","011","(?:[589]\\d\\d|787)\\d{7}",[10],0,"1",0,0,0,0,"787|939"],PS:["970","00","[2489]2\\d{6}|(?:1\\d|5)\\d{8}",[8,9,10],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[2489]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["5"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]]],"0"],PT:["351","00","1693\\d{5}|(?:[26-9]\\d|30)\\d{7}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["2[12]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["16|[236-9]"]]]],PW:["680","01[12]","(?:[24-8]\\d\\d|345|900)\\d{4}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[2-9]"]]]],PY:["595","00","59\\d{4,6}|9\\d{5,10}|(?:[2-46-8]\\d|5[0-8])\\d{4,7}",[6,7,8,9,10,11],[["(\\d{3})(\\d{3,6})","$1 $2",["[2-9]0"],"0$1"],["(\\d{2})(\\d{5})","$1 $2",["[26]1|3[289]|4[1246-8]|7[1-3]|8[1-36]"],"(0$1)"],["(\\d{3})(\\d{4,5})","$1 $2",["2[279]|3[13-5]|4[359]|5|6(?:[34]|7[1-46-8])|7[46-8]|85"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["2[14-68]|3[26-9]|4[1246-8]|6(?:1|75)|7[1-35]|8[1-36]"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["87"]],["(\\d{3})(\\d{6})","$1 $2",["9(?:[5-79]|8[1-7])"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[2-8]"],"0$1"],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["9"]]],"0"],QA:["974","00","800\\d{4}|(?:2|800)\\d{6}|(?:0080|[3-7])\\d{7}",[7,8,9,11],[["(\\d{3})(\\d{4})","$1 $2",["2[136]|8"]],["(\\d{4})(\\d{4})","$1 $2",["[3-7]"]]]],RE:["262","00","709\\d{6}|(?:26|[689]\\d)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[26-9]"],"0$1"]],"0",0,0,0,0,0,[["26(?:2\\d\\d|3(?:0\\d|1[0-6]))\\d{4}"],["(?:69(?:2\\d\\d|3(?:[06][0-6]|1[0-3]|2[0-2]|3[0-39]|4\\d|5[0-5]|7[0-37]|8[0-8]|9[0-479]))|7092[0-3])\\d{4}"],["80\\d{7}"],["89[1-37-9]\\d{6}"],0,0,0,0,["9(?:399[0-3]|479[0-6]|76(?:2[278]|3[0-37]))\\d{4}"],["8(?:1[019]|2[0156]|84|90)\\d{6}"]]],RO:["40","00","(?:[236-8]\\d|90)\\d{7}|[23]\\d{5}",[6,9],[["(\\d{3})(\\d{3})","$1 $2",["2[3-6]","2[3-6]\\d9"],"0$1"],["(\\d{2})(\\d{4})","$1 $2",["219|31"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[23]1"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[236-9]"],"0$1"]],"0",0,0,0,0,0,0,0," int "],RS:["381","00","38[02-9]\\d{6,9}|6\\d{7,9}|90\\d{4,8}|38\\d{5,6}|(?:7\\d\\d|800)\\d{3,9}|(?:[12]\\d|3[0-79])\\d{5,10}",[6,7,8,9,10,11,12],[["(\\d{3})(\\d{3,9})","$1 $2",["(?:2[389]|39)0|[7-9]"],"0$1"],["(\\d{2})(\\d{5,10})","$1 $2",["[1-36]"],"0$1"]],"0"],RU:["7","810","8\\d{13}|[347-9]\\d{9}",[10,14],[["(\\d{4})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["7(?:1[0-8]|2[1-9])","7(?:1(?:[0-356]2|4[29]|7|8[27])|2(?:1[23]|[2-9]2))","7(?:1(?:[0-356]2|4[29]|7|8[27])|2(?:13[03-69]|62[013-9]))|72[1-57-9]2"],"8 ($1)",1],["(\\d{5})(\\d)(\\d{2})(\\d{2})","$1 $2 $3 $4",["7(?:1[0-68]|2[1-9])","7(?:1(?:[06][3-6]|[18]|2[35]|[3-5][3-5])|2(?:[13][3-5]|[24-689]|7[457]))","7(?:1(?:0(?:[356]|4[023])|[18]|2(?:3[013-9]|5)|3[45]|43[013-79]|5(?:3[1-8]|4[1-7]|5)|6(?:3[0-35-9]|[4-6]))|2(?:1(?:3[178]|[45])|[24-689]|3[35]|7[457]))|7(?:14|23)4[0-8]|71(?:33|45)[1-79]"],"8 ($1)",1],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"8 ($1)",1],["(\\d{3})(\\d{3})(\\d{2})(\\d{2})","$1 $2-$3-$4",["[349]|8(?:[02-7]|1[1-8])"],"8 ($1)",1],["(\\d{4})(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3 $4",["8"],"8 ($1)"]],"8",0,0,0,0,0,[["336(?:[013-9]\\d|2[013-9])\\d{5}|(?:3(?:0[12]|4[1-35-79]|5[1-3]|65|8[1-58]|9[0145])|4(?:01|1[1356]|2[13467]|7[1-5]|8[1-7]|9[1-689])|8(?:1[1-8]|2[01]|3[13-6]|4[0-8]|5[15-7]|6[0-35-79]|7[1-37-9]))\\d{7}",[10]],["9\\d{9}",[10]],["8(?:0[04]|108\\d{3})\\d{7}"],["80[39]\\d{7}",[10]],["808\\d{7}",[10]]],"8~10"],RW:["250","00","(?:06|[27]\\d\\d|[89]00)\\d{6}",[8,9],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["0"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["2"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[7-9]"],"0$1"]],"0"],SA:["966","00","(?:[15]\\d|800|92)\\d{7}",[9,10],[["(\\d{4})(\\d{5})","$1 $2",["9"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["5"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"]]],"0"],SB:["677","0[01]","[6-9]\\d{6}|[1-6]\\d{4}",[5,7],[["(\\d{2})(\\d{5})","$1 $2",["6[89]|7|8[4-9]|9(?:[1-8]|9[0-8])"]]]],SC:["248","010|0[0-2]","(?:[2489]\\d|64)\\d{5}",[7],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[246]|9[57]"]]],0,0,0,0,0,0,0,"00"],SD:["249","00","[19]\\d{8}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[19]"],"0$1"]],"0"],SE:["46","00","(?:[26]\\d\\d|9)\\d{9}|[1-9]\\d{8}|[1-689]\\d{7}|[1-4689]\\d{6}|2\\d{5}",[6,7,8,9,10,12],[["(\\d{2})(\\d{2,3})(\\d{2})","$1-$2 $3",["20"],"0$1",0,"$1 $2 $3"],["(\\d{3})(\\d{4})","$1-$2",["9(?:00|39|44|9)"],"0$1",0,"$1 $2"],["(\\d{2})(\\d{3})(\\d{2})","$1-$2 $3",["[12][136]|3[356]|4[0246]|6[03]|90[1-9]"],"0$1",0,"$1 $2 $3"],["(\\d)(\\d{2,3})(\\d{2})(\\d{2})","$1-$2 $3 $4",["8"],"0$1",0,"$1 $2 $3 $4"],["(\\d{3})(\\d{2,3})(\\d{2})","$1-$2 $3",["1[2457]|2(?:[247-9]|5[0138])|3[0247-9]|4[1357-9]|5[0-35-9]|6(?:[125689]|4[02-57]|7[0-2])|9(?:[125-8]|3[02-5]|4[0-3])"],"0$1",0,"$1 $2 $3"],["(\\d{3})(\\d{2,3})(\\d{3})","$1-$2 $3",["9(?:00|39|44)"],"0$1",0,"$1 $2 $3"],["(\\d{2})(\\d{2,3})(\\d{2})(\\d{2})","$1-$2 $3 $4",["1[13689]|2[0136]|3[1356]|4[0246]|54|6[03]|90[1-9]"],"0$1",0,"$1 $2 $3 $4"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1-$2 $3 $4",["10|7"],"0$1",0,"$1 $2 $3 $4"],["(\\d)(\\d{3})(\\d{3})(\\d{2})","$1-$2 $3 $4",["8"],"0$1",0,"$1 $2 $3 $4"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1-$2 $3 $4",["[13-5]|2(?:[247-9]|5[0138])|6(?:[124-689]|7[0-2])|9(?:[125-8]|3[02-5]|4[0-3])"],"0$1",0,"$1 $2 $3 $4"],["(\\d{3})(\\d{2})(\\d{2})(\\d{3})","$1-$2 $3 $4",["9"],"0$1",0,"$1 $2 $3 $4"],["(\\d{3})(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1-$2 $3 $4 $5",["[26]"],"0$1",0,"$1 $2 $3 $4 $5"]],"0"],SG:["65","0[0-3]\\d","(?:(?:1\\d|8)\\d\\d|7000)\\d{7}|[3689]\\d{7}",[8,10,11],[["(\\d{4})(\\d{4})","$1 $2",["[369]|8(?:0[1-9]|[1-9])"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"]],["(\\d{4})(\\d{4})(\\d{3})","$1 $2 $3",["7"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]]]],SH:["290","00","(?:[256]\\d|8)\\d{3}",[4,5],0,0,0,0,0,0,"[256]"],SI:["386","00|10(?:22|66|88|99)","[1-7]\\d{7}|8\\d{4,7}|90\\d{4,6}",[5,6,7,8],[["(\\d{2})(\\d{3,6})","$1 $2",["8[09]|9"],"0$1"],["(\\d{3})(\\d{5})","$1 $2",["59|8"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[37][01]|4[0139]|51|6"],"0$1"],["(\\d)(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[1-57]"],"(0$1)"]],"0",0,0,0,0,0,0,"00"],SJ:["47","00","0\\d{4}|(?:[489]\\d|79)\\d{6}",[5,8],0,0,0,0,0,0,"79"],SK:["421","00","[2-689]\\d{8}|[2-59]\\d{6}|[2-5]\\d{5}",[6,7,9],[["(\\d)(\\d{2})(\\d{3,4})","$1 $2 $3",["21"],"0$1"],["(\\d{2})(\\d{2})(\\d{2,3})","$1 $2 $3",["[3-5][1-8]1","[3-5][1-8]1[67]"],"0$1"],["(\\d)(\\d{3})(\\d{3})(\\d{2})","$1/$2 $3 $4",["2"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[689]"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1/$2 $3 $4",["[3-5]"],"0$1"]],"0"],SL:["232","00","(?:[237-9]\\d|66)\\d{6}",[8],[["(\\d{2})(\\d{6})","$1 $2",["[236-9]"],"(0$1)"]],"0"],SM:["378","00","(?:0549|[5-7]\\d)\\d{6}",[8,10],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-7]"]],["(\\d{4})(\\d{6})","$1 $2",["0"]]],0,0,"([89]\\d{5})$","0549$1"],SN:["221","00","(?:[378]\\d|93)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"]],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[379]"]]]],SO:["252","00","[346-9]\\d{8}|[12679]\\d{7}|[1-5]\\d{6}|[1348]\\d{5}",[6,7,8,9],[["(\\d{2})(\\d{4})","$1 $2",["8[125]"]],["(\\d{6})","$1",["[134]"]],["(\\d)(\\d{6})","$1 $2",["[15]|2[0-79]|3[0-46-8]|4[0-7]"]],["(\\d)(\\d{7})","$1 $2",["(?:2|90)4|[67]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[348]|64|79|90"]],["(\\d{2})(\\d{5,7})","$1 $2",["1|28|6[0-35-9]|7[67]|9[2-9]"]]],"0"],SR:["597","00","(?:[2-5]|[6-8]\\d|90)\\d{5}",[6,7],[["(\\d{2})(\\d{2})(\\d{2})","$1-$2-$3",["56"]],["(\\d{3})(\\d{3})","$1-$2",["[2-5]"]],["(\\d{3})(\\d{4})","$1-$2",["[6-9]"]]]],SS:["211","00","[19]\\d{8}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[19]"],"0$1"]],"0"],ST:["239","00","(?:22|9\\d)\\d{5}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[29]"]]]],SV:["503","00","(?:[267]\\d\\d|500)\\d{5}|(?:80\\d|900)\\d{4}(?:\\d{4})?",[7,8,11],[["(\\d{3})(\\d{4})","$1 $2",["[89]"]],["(\\d{4})(\\d{4})","$1 $2",["[25-7]"]],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["[89]"]]]],SX:["1","011","7215\\d{6}|(?:[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"(5\\d{6})$|1","721$1",0,"721"],SY:["963","00","[1-359]\\d{8}|[1-5]\\d{7}",[8,9],[["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[1-4]|5[1-3]"],"0$1",1],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[59]"],"0$1",1]],"0"],SZ:["268","00","0800\\d{4}|(?:[237]\\d|900)\\d{6}",[8,9],[["(\\d{4})(\\d{4})","$1 $2",["[0237]"]],["(\\d{5})(\\d{4})","$1 $2",["9"]]]],TA:["290","00","8\\d{3}",[4],0,0,0,0,0,0,"8"],TC:["1","011","(?:[58]\\d\\d|649|900)\\d{7}",[10],0,"1",0,"([2-479]\\d{6})$|1","649$1",0,"649"],TD:["235","00|16","(?:22|30|[689]\\d|77)\\d{6}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[236-9]"]]],0,0,0,0,0,0,0,"00"],TG:["228","00","[279]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[279]"]]]],TH:["66","00[1-9]","(?:001800|[2-57]|[689]\\d)\\d{7}|1\\d{7,9}",[8,9,10,13],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[13-9]"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]]],"0"],TJ:["992","810","(?:[0-57-9]\\d|66)\\d{7}",[9],[["(\\d{6})(\\d)(\\d{2})","$1 $2 $3",["331","3317"]],["(\\d{3})(\\d{2})(\\d{4})","$1 $2 $3",["44[02-479]|[34]7"]],["(\\d{4})(\\d)(\\d{4})","$1 $2 $3",["3(?:[1245]|3[12])"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["\\d"]]],0,0,0,0,0,0,0,"8~10"],TK:["690","00","[2-47]\\d{3,6}",[4,5,6,7]],TL:["670","00","7\\d{7}|(?:[2-47]\\d|[89]0)\\d{5}",[7,8],[["(\\d{3})(\\d{4})","$1 $2",["[2-489]|70"]],["(\\d{4})(\\d{4})","$1 $2",["7"]]]],TM:["993","810","(?:[1-6]\\d|71)\\d{6}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2-$3-$4",["12"],"(8 $1)"],["(\\d{3})(\\d)(\\d{2})(\\d{2})","$1 $2-$3-$4",["[1-5]"],"(8 $1)"],["(\\d{2})(\\d{6})","$1 $2",["[67]"],"8 $1"]],"8",0,0,0,0,0,0,"8~10"],TN:["216","00","[2-57-9]\\d{7}",[8],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[2-57-9]"]]]],TO:["676","00","(?:0800|(?:[5-8]\\d\\d|999)\\d)\\d{3}|[2-8]\\d{4}",[5,7],[["(\\d{2})(\\d{3})","$1-$2",["[2-4]|50|6[09]|7[0-24-69]|8[05]"]],["(\\d{4})(\\d{3})","$1 $2",["0"]],["(\\d{3})(\\d{4})","$1 $2",["[5-9]"]]]],TR:["90","00","4\\d{6}|8\\d{11,12}|(?:[2-58]\\d\\d|900)\\d{7}",[7,10,12,13],[["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["512|8[01589]|90"],"0$1",1],["(\\d{3})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["5(?:[0-59]|61)","5(?:[0-59]|61[06])","5(?:[0-59]|61[06]1)"],"0$1",1],["(\\d{3})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[24][1-8]|3[1-9]"],"(0$1)",1],["(\\d{3})(\\d{3})(\\d{6,7})","$1 $2 $3",["80"],"0$1",1]],"0"],TT:["1","011","(?:[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-46-8]\\d{6})$|1","868$1",0,"868"],TV:["688","00","(?:2|7\\d\\d|90)\\d{4}",[5,6,7],[["(\\d{2})(\\d{3})","$1 $2",["2"]],["(\\d{2})(\\d{4})","$1 $2",["90"]],["(\\d{2})(\\d{5})","$1 $2",["7"]]]],TW:["886","0(?:0[25-79]|19)","[2-689]\\d{8}|7\\d{9,10}|[2-8]\\d{7}|2\\d{6}",[7,8,9,10,11],[["(\\d{2})(\\d)(\\d{4})","$1 $2 $3",["202"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[258]0"],"0$1"],["(\\d)(\\d{3,4})(\\d{4})","$1 $2 $3",["[23568]|4(?:0[02-48]|[1-47-9])|7[1-9]","[23568]|4(?:0[2-48]|[1-47-9])|(?:400|7)[1-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[49]"],"0$1"],["(\\d{2})(\\d{4})(\\d{4,5})","$1 $2 $3",["7"],"0$1"]],"0",0,0,0,0,0,0,0,"#"],TZ:["255","00[056]","(?:[25-8]\\d|41|90)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{4})","$1 $2 $3",["[89]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[24]"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["5"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[67]"],"0$1"]],"0"],UA:["380","00","[89]\\d{9}|[3-9]\\d{8}",[9,10],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6[12][29]|(?:3[1-8]|4[136-8]|5[12457]|6[49])2|(?:56|65)[24]","6[12][29]|(?:35|4[1378]|5[12457]|6[49])2|(?:56|65)[24]|(?:3[1-46-8]|46)2[013-9]"],"0$1"],["(\\d{4})(\\d{5})","$1 $2",["3[1-8]|4(?:[1367]|[45][6-9]|8[4-6])|5(?:[1-5]|6[0135689]|7[4-6])|6(?:[12][3-7]|[459])","3[1-8]|4(?:[1367]|[45][6-9]|8[4-6])|5(?:[1-5]|6(?:[015689]|3[02389])|7[4-6])|6(?:[12][3-7]|[459])"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[3-7]|89|9[1-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["[89]"],"0$1"]],"0",0,0,0,0,0,0,"0~0"],UG:["256","00[057]","800\\d{6}|(?:[29]0|[347]\\d)\\d{7}",[9],[["(\\d{4})(\\d{5})","$1 $2",["202","2024"],"0$1"],["(\\d{3})(\\d{6})","$1 $2",["[27-9]|4(?:6[45]|[7-9])"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["[34]"],"0$1"]],"0"],US:["1","011","[2-9]\\d{9}|3\\d{6}",[10],[["(\\d{3})(\\d{4})","$1-$2",["310"],0,1],["(\\d{3})(\\d{3})(\\d{4})","($1) $2-$3",["[2-9]"],0,1,"$1-$2-$3"]],"1",0,0,0,0,0,[["3052(?:0[0-8]|[1-9]\\d)\\d{4}|(?:2742|305[3-9])\\d{6}|(?:472|983)[2-47-9]\\d{6}|(?:2(?:0[1-35-9]|1[02-9]|2[03-57-9]|3[1459]|4[08]|5[1-46]|6[0279]|7[0269]|8[13])|3(?:0[1-47-9]|1[02-9]|2[013-79]|3[0-24679]|4[167]|5[0-2]|6[01349]|8[056])|4(?:0[124-9]|1[02-579]|2[3-5]|3[0245]|4[023578]|58|6[349]|7[0589]|8[04])|5(?:0[1-57-9]|1[0235-8]|20|3[0149]|4[01]|5[179]|6[1-47]|7[0-5]|8[0256])|6(?:0[1-35-9]|1[024-9]|2[03689]|3[016]|4[0156]|5[01679]|6[0-279]|78|8[0-269])|7(?:0[1-46-8]|1[2-9]|2[04-8]|3[0-247]|4[0378]|5[47]|6[02359]|7[0-59]|8[156])|8(?:0[1-68]|1[02-8]|2[0168]|3[0-2589]|4[03578]|5[046-9]|6[02-5]|7[028])|9(?:0[1346-9]|1[02-9]|2[0589]|3[0146-8]|4[01357-9]|5[12469]|7[0-3589]|8[04-69]))[2-9]\\d{6}"],[""],["8(?:00|33|44|55|66|77|88)[2-9]\\d{6}"],["900[2-9]\\d{6}"],["52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}"],0,0,0,["305209\\d{4}"]]],UY:["598","0(?:0|1[3-9]\\d)","0004\\d{2,9}|[1249]\\d{7}|2\\d{3,4}|(?:[49]\\d|80)\\d{5}",[4,5,6,7,8,9,10,11,12,13],[["(\\d{4,5})","$1",["21"]],["(\\d{3})(\\d{3,4})","$1 $2",["0"]],["(\\d{3})(\\d{4})","$1 $2",["[49]0|8"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["9"],"0$1"],["(\\d{4})(\\d{4})","$1 $2",["[124]"]],["(\\d{3})(\\d{3})(\\d{2,4})","$1 $2 $3",["0"]],["(\\d{3})(\\d{3})(\\d{3})(\\d{2,4})","$1 $2 $3 $4",["0"]]],"0",0,0,0,0,0,0,"00"," int. "],UZ:["998","00","(?:20|33|[5-9]\\d)\\d{7}",[9],[["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[235-9]"]]]],VA:["39","00","0\\d{5,10}|3[0-8]\\d{7,10}|55\\d{8}|8\\d{5}(?:\\d{2,4})?|(?:1\\d|39)\\d{7,8}",[6,7,8,9,10,11,12],0,0,0,0,0,0,"06698"],VC:["1","011","(?:[58]\\d\\d|784|900)\\d{7}",[10],0,"1",0,"([2-7]\\d{6})$|1","784$1",0,"784"],VE:["58","00","[68]00\\d{7}|(?:[24]\\d|[59]0)\\d{8}",[10],[["(\\d{3})(\\d{7})","$1-$2",["[24-689]"],"0$1"]],"0"],VG:["1","011","(?:284|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-578]\\d{6})$|1","284$1",0,"284"],VI:["1","011","[58]\\d{9}|(?:34|90)0\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","340$1",0,"340"],VN:["84","00","[12]\\d{9}|[135-9]\\d{8}|[16]\\d{7}|[16-8]\\d{6}",[7,8,9,10],[["(\\d{2})(\\d{5})","$1 $2",["80"],"0$1",1],["(\\d{4})(\\d{4,6})","$1 $2",["1"],0,1],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["6"],"0$1",1],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[357-9]"],"0$1",1],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["2[48]"],"0$1",1],["(\\d{3})(\\d{4})(\\d{3})","$1 $2 $3",["2"],"0$1",1]],"0"],VU:["678","00","[57-9]\\d{6}|(?:[238]\\d|48)\\d{3}",[5,7],[["(\\d{3})(\\d{4})","$1 $2",["[57-9]"]]]],WF:["681","00","(?:40|72|8\\d{4})\\d{4}|[89]\\d{5}",[6,9],[["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["[47-9]"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"]]]],WS:["685","0","(?:[2-6]|8\\d{5})\\d{4}|[78]\\d{6}|[68]\\d{5}",[5,6,7,10],[["(\\d{5})","$1",["[2-5]|6[1-9]"]],["(\\d{3})(\\d{3,7})","$1 $2",["[68]"]],["(\\d{2})(\\d{5})","$1 $2",["7"]]]],XK:["383","00","2\\d{7,8}|3\\d{7,11}|(?:4\\d\\d|[89]00)\\d{5}",[8,9,10,11,12],[["(\\d{3})(\\d{5})","$1 $2",["[89]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[2-4]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["2|39"],"0$1"],["(\\d{2})(\\d{7,10})","$1 $2",["3"],"0$1"]],"0"],YE:["967","00","(?:1|7\\d)\\d{7}|[1-7]\\d{6}",[7,8,9],[["(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["[1-6]|7(?:[24-6]|8[0-7])"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["7"],"0$1"]],"0"],YT:["262","00","7093\\d{5}|(?:80|9\\d)\\d{7}|(?:26|63)9\\d{6}",[9],0,"0",0,0,0,0,0,[["269(?:0[0-467]|15|5[0-4]|6\\d|[78]0)\\d{4}"],["(?:639(?:0[0-79]|1[019]|[267]\\d|3[09]|40|5[05-9]|9[04-79])|7093[5-7])\\d{4}"],["80\\d{7}"],0,0,0,0,0,["9(?:(?:39|47)8[01]|769\\d)\\d{4}"]]],ZA:["27","00","[1-79]\\d{8}|8\\d{4,9}",[5,6,7,8,9,10],[["(\\d{2})(\\d{3,4})","$1 $2",["8[1-4]"],"0$1"],["(\\d{2})(\\d{3})(\\d{2,3})","$1 $2 $3",["8[1-4]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["860"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[1-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"],"0$1"]],"0"],ZM:["260","00","800\\d{6}|(?:21|[579]\\d|63)\\d{7}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[28]"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["[579]"],"0$1"]],"0"],ZW:["263","00","2(?:[0-57-9]\\d{6,8}|6[0-24-9]\\d{6,7})|[38]\\d{9}|[35-8]\\d{8}|[3-6]\\d{7}|[1-689]\\d{6}|[1-3569]\\d{5}|[1356]\\d{4}",[5,6,7,8,9,10],[["(\\d{3})(\\d{3,5})","$1 $2",["2(?:0[45]|2[278]|[49]8)|3(?:[09]8|17)|6(?:[29]8|37|75)|[23][78]|(?:33|5[15]|6[68])[78]"],"0$1"],["(\\d)(\\d{3})(\\d{2,4})","$1 $2 $3",["[49]"],"0$1"],["(\\d{3})(\\d{4})","$1 $2",["80"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["24|8[13-59]|(?:2[05-79]|39|5[45]|6[15-8])2","2(?:02[014]|4|[56]20|[79]2)|392|5(?:42|525)|6(?:[16-8]21|52[013])|8[13-59]"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["2(?:1[39]|2[0157]|[378]|[56][14])|3(?:12|29)","2(?:1[39]|2[0157]|[378]|[56][14])|3(?:123|29)"],"0$1"],["(\\d{4})(\\d{6})","$1 $2",["8"],"0$1"],["(\\d{2})(\\d{3,5})","$1 $2",["1|2(?:0[0-36-9]|12|29|[56])|3(?:1[0-689]|[24-6])|5(?:[0236-9]|1[2-4])|6(?:[013-59]|7[0-46-9])|(?:33|55|6[68])[0-69]|(?:29|3[09]|62)[0-79]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["29[013-9]|39|54"],"0$1"],["(\\d{4})(\\d{3,5})","$1 $2",["(?:25|54)8","258|5483"],"0$1"]],"0"]},nonGeographic:{800:["800",0,"(?:00|[1-9]\\d)\\d{6}",[8],[["(\\d{4})(\\d{4})","$1 $2",["\\d"]]],0,0,0,0,0,0,[0,0,["(?:00|[1-9]\\d)\\d{6}"]]],808:["808",0,"[1-9]\\d{7}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[1-9]"]]],0,0,0,0,0,0,[0,0,0,0,0,0,0,0,0,["[1-9]\\d{7}"]]],870:["870",0,"7\\d{11}|[235-7]\\d{8}",[9,12],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[235-7]"]]],0,0,0,0,0,0,[0,["(?:[356]|774[45])\\d{8}|7[6-8]\\d{7}"],0,0,0,0,0,0,["2\\d{8}",[9]]]],878:["878",0,"10\\d{10}",[12],[["(\\d{2})(\\d{5})(\\d{5})","$1 $2 $3",["1"]]],0,0,0,0,0,0,[0,0,0,0,0,0,0,0,["10\\d{10}"]]],881:["881",0,"6\\d{9}|[0-36-9]\\d{8}",[9,10],[["(\\d)(\\d{3})(\\d{5})","$1 $2 $3",["[0-37-9]"]],["(\\d)(\\d{3})(\\d{5,6})","$1 $2 $3",["6"]]],0,0,0,0,0,0,[0,["6\\d{9}|[0-36-9]\\d{8}"]]],882:["882",0,"[13]\\d{6}(?:\\d{2,5})?|[19]\\d{7}|(?:[25]\\d\\d|4)\\d{7}(?:\\d{2})?",[7,8,9,10,11,12],[["(\\d{2})(\\d{5})","$1 $2",["16|342"]],["(\\d{2})(\\d{6})","$1 $2",["49"]],["(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["1[36]|9"]],["(\\d{2})(\\d{4})(\\d{3})","$1 $2 $3",["3[23]"]],["(\\d{2})(\\d{3,4})(\\d{4})","$1 $2 $3",["16"]],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["10|23|3(?:[15]|4[57])|4|51"]],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["34"]],["(\\d{2})(\\d{4,5})(\\d{5})","$1 $2 $3",["[1-35]"]]],0,0,0,0,0,0,[0,["342\\d{4}|(?:337|49)\\d{6}|(?:3(?:2|47|7\\d{3})|50\\d{3})\\d{7}",[7,8,9,10,12]],0,0,0,["348[57]\\d{7}",[11]],0,0,["1(?:3(?:0[0347]|[13][0139]|2[035]|4[013568]|6[0459]|7[06]|8[15-8]|9[0689])\\d{4}|6\\d{5,10})|(?:345\\d|9[89])\\d{6}|(?:10|2(?:3|85\\d)|3(?:[15]|[69]\\d\\d)|4[15-8]|51)\\d{8}"]]],883:["883",0,"(?:[1-4]\\d|51)\\d{6,10}",[8,9,10,11,12],[["(\\d{3})(\\d{3})(\\d{2,8})","$1 $2 $3",["[14]|2[24-689]|3[02-689]|51[24-9]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["510"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["21"]],["(\\d{4})(\\d{4})(\\d{4})","$1 $2 $3",["51[13]"]],["(\\d{3})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["[235]"]]],0,0,0,0,0,0,[0,0,0,0,0,0,0,0,["(?:2(?:00\\d\\d|10)|(?:370[1-9]|51\\d0)\\d)\\d{7}|51(?:00\\d{5}|[24-9]0\\d{4,7})|(?:1[0-79]|2[24-689]|3[02-689]|4[0-4])0\\d{5,9}"]]],888:["888",0,"\\d{11}",[11],[["(\\d{3})(\\d{3})(\\d{5})","$1 $2 $3"]],0,0,0,0,0,0,[0,0,0,0,0,0,["\\d{11}"]]],979:["979",0,"[1359]\\d{8}",[9],[["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["[1359]"]]],0,0,0,0,0,0,[0,0,0,["[1359]\\d{8}"]]]}};function e8e(e,t){var r=Array.prototype.slice.call(t);return r.push(XDe),e.apply(this,r)}function EO(e,t){e=e.split("-"),t=t.split("-");for(var r=e[0].split("."),s=t[0].split("."),a=0;a<3;a++){var i=Number(r[a]),o=Number(s[a]);if(i>o)return 1;if(o>i)return-1;if(!isNaN(i)&&isNaN(o))return 1;if(isNaN(i)&&!isNaN(o))return-1}return e[1]&&t[1]?e[1]>t[1]?1:e[1]<t[1]?-1:0:!e[1]&&t[1]?1:e[1]&&!t[1]?-1:0}var t8e={}.constructor;function Qm(e){return e!=null&&e.constructor===t8e}function qp(e){"@babel/helpers - typeof";return qp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qp(e)}function K4(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n8e(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,r8e(s.key),s)}}function J4(e,t,r){return t&&n8e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function r8e(e){var t=s8e(e,"string");return qp(t)=="symbol"?t:t+""}function s8e(e,t){if(qp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(qp(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var a8e="1.2.0",i8e="1.7.35",IO=" ext. ",o8e=/^\d+$/,Ca=function(){function e(t){K4(this,e),iie(t),this.metadata=t,oie.call(this,t)}return J4(e,[{key:"getCountries",value:function(){return Object.keys(this.metadata.countries).filter(function(r){return r!=="001"})}},{key:"getCountryMetadata",value:function(r){return this.metadata.countries[r]}},{key:"nonGeographic",value:function(){if(!(this.v1||this.v2||this.v3))return this.metadata.nonGeographic||this.metadata.nonGeographical}},{key:"hasCountry",value:function(r){return this.getCountryMetadata(r)!==void 0}},{key:"hasCallingCode",value:function(r){if(this.getCountryCodesForCallingCode(r))return!0;if(this.nonGeographic()){if(this.nonGeographic()[r])return!0}else{var s=this.countryCallingCodes()[r];if(s&&s.length===1&&s[0]==="001")return!0}}},{key:"isNonGeographicCallingCode",value:function(r){return this.nonGeographic()?!!this.nonGeographic()[r]:!this.getCountryCodesForCallingCode(r)}},{key:"country",value:function(r){return this.selectNumberingPlan(r)}},{key:"selectNumberingPlan",value:function(r,s){if(r&&o8e.test(r)&&(s=r,r=null),r&&r!=="001"){if(!this.hasCountry(r))throw new Error("Unknown country: ".concat(r));this.numberingPlan=new LO(this.getCountryMetadata(r),this)}else if(s){if(!this.hasCallingCode(s))throw new Error("Unknown calling code: ".concat(s));this.numberingPlan=new LO(this.getNumberingPlanMetadata(s),this)}else this.numberingPlan=void 0;return this}},{key:"getCountryCodesForCallingCode",value:function(r){var s=this.countryCallingCodes()[r];if(s)return s.length===1&&s[0].length===3?void 0:s}},{key:"getCountryCodeForCallingCode",value:function(r){var s=this.getCountryCodesForCallingCode(r);if(s)return s[0]}},{key:"getNumberingPlanMetadata",value:function(r){var s=this.getCountryCodeForCallingCode(r);if(s)return this.getCountryMetadata(s);if(this.nonGeographic()){var a=this.nonGeographic()[r];if(a)return a}else{var i=this.countryCallingCodes()[r];if(i&&i.length===1&&i[0]==="001")return this.metadata.countries["001"]}}},{key:"countryCallingCode",value:function(){return this.numberingPlan.callingCode()}},{key:"IDDPrefix",value:function(){return this.numberingPlan.IDDPrefix()}},{key:"defaultIDDPrefix",value:function(){return this.numberingPlan.defaultIDDPrefix()}},{key:"nationalNumberPattern",value:function(){return this.numberingPlan.nationalNumberPattern()}},{key:"possibleLengths",value:function(){return this.numberingPlan.possibleLengths()}},{key:"formats",value:function(){return this.numberingPlan.formats()}},{key:"nationalPrefixForParsing",value:function(){return this.numberingPlan.nationalPrefixForParsing()}},{key:"nationalPrefixTransformRule",value:function(){return this.numberingPlan.nationalPrefixTransformRule()}},{key:"leadingDigits",value:function(){return this.numberingPlan.leadingDigits()}},{key:"hasTypes",value:function(){return this.numberingPlan.hasTypes()}},{key:"type",value:function(r){return this.numberingPlan.type(r)}},{key:"ext",value:function(){return this.numberingPlan.ext()}},{key:"countryCallingCodes",value:function(){return this.v1?this.metadata.country_phone_code_to_countries:this.metadata.country_calling_codes}},{key:"chooseCountryByCountryCallingCode",value:function(r){return this.selectNumberingPlan(r)}},{key:"hasSelectedNumberingPlan",value:function(){return this.numberingPlan!==void 0}}])}(),LO=function(){function e(t,r){K4(this,e),this.globalMetadataObject=r,this.metadata=t,oie.call(this,r.metadata)}return J4(e,[{key:"callingCode",value:function(){return this.metadata[0]}},{key:"getDefaultCountryMetadataForRegion",value:function(){return this.globalMetadataObject.getNumberingPlanMetadata(this.callingCode())}},{key:"IDDPrefix",value:function(){if(!(this.v1||this.v2))return this.metadata[1]}},{key:"defaultIDDPrefix",value:function(){if(!(this.v1||this.v2))return this.metadata[12]}},{key:"nationalNumberPattern",value:function(){return this.v1||this.v2?this.metadata[1]:this.metadata[2]}},{key:"possibleLengths",value:function(){if(!this.v1)return this.metadata[this.v2?2:3]}},{key:"_getFormats",value:function(r){return r[this.v1?2:this.v2?3:4]}},{key:"formats",value:function(){var r=this,s=this._getFormats(this.metadata)||this._getFormats(this.getDefaultCountryMetadataForRegion())||[];return s.map(function(a){return new l8e(a,r)})}},{key:"nationalPrefix",value:function(){return this.metadata[this.v1?3:this.v2?4:5]}},{key:"_getNationalPrefixFormattingRule",value:function(r){return r[this.v1?4:this.v2?5:6]}},{key:"nationalPrefixFormattingRule",value:function(){return this._getNationalPrefixFormattingRule(this.metadata)||this._getNationalPrefixFormattingRule(this.getDefaultCountryMetadataForRegion())}},{key:"_nationalPrefixForParsing",value:function(){return this.metadata[this.v1?5:this.v2?6:7]}},{key:"nationalPrefixForParsing",value:function(){return this._nationalPrefixForParsing()||this.nationalPrefix()}},{key:"nationalPrefixTransformRule",value:function(){return this.metadata[this.v1?6:this.v2?7:8]}},{key:"_getNationalPrefixIsOptionalWhenFormatting",value:function(){return!!this.metadata[this.v1?7:this.v2?8:9]}},{key:"nationalPrefixIsOptionalWhenFormattingInNationalFormat",value:function(){return this._getNationalPrefixIsOptionalWhenFormatting(this.metadata)||this._getNationalPrefixIsOptionalWhenFormatting(this.getDefaultCountryMetadataForRegion())}},{key:"leadingDigits",value:function(){return this.metadata[this.v1?8:this.v2?9:10]}},{key:"types",value:function(){return this.metadata[this.v1?9:this.v2?10:11]}},{key:"hasTypes",value:function(){return this.types()&&this.types().length===0?!1:!!this.types()}},{key:"type",value:function(r){if(this.hasTypes()&&DO(this.types(),r))return new d8e(DO(this.types(),r),this)}},{key:"ext",value:function(){return this.v1||this.v2?IO:this.metadata[13]||IO}}])}(),l8e=function(){function e(t,r){K4(this,e),this._format=t,this.metadata=r}return J4(e,[{key:"pattern",value:function(){return this._format[0]}},{key:"format",value:function(){return this._format[1]}},{key:"leadingDigitsPatterns",value:function(){return this._format[2]||[]}},{key:"nationalPrefixFormattingRule",value:function(){return this._format[3]||this.metadata.nationalPrefixFormattingRule()}},{key:"nationalPrefixIsOptionalWhenFormattingInNationalFormat",value:function(){return!!this._format[4]||this.metadata.nationalPrefixIsOptionalWhenFormattingInNationalFormat()}},{key:"nationalPrefixIsMandatoryWhenFormattingInNationalFormat",value:function(){return this.usesNationalPrefix()&&!this.nationalPrefixIsOptionalWhenFormattingInNationalFormat()}},{key:"usesNationalPrefix",value:function(){return!!(this.nationalPrefixFormattingRule()&&!c8e.test(this.nationalPrefixFormattingRule()))}},{key:"internationalFormat",value:function(){return this._format[5]||this.format()}}])}(),c8e=/^\(?\$1\)?$/,d8e=function(){function e(t,r){K4(this,e),this.type=t,this.metadata=r}return J4(e,[{key:"pattern",value:function(){return this.metadata.v1?this.type:this.type[0]}},{key:"possibleLengths",value:function(){if(!this.metadata.v1)return this.type[1]||this.metadata.possibleLengths()}}])}();function DO(e,t){switch(t){case"FIXED_LINE":return e[0];case"MOBILE":return e[1];case"TOLL_FREE":return e[2];case"PREMIUM_RATE":return e[3];case"PERSONAL_NUMBER":return e[4];case"VOICEMAIL":return e[5];case"UAN":return e[6];case"PAGER":return e[7];case"VOIP":return e[8];case"SHARED_COST":return e[9]}}function iie(e){if(!e)throw new Error("[libphonenumber-js] `metadata` argument not passed. Check your arguments.");if(!Qm(e)||!Qm(e.countries))throw new Error("[libphonenumber-js] `metadata` argument was passed but it's not a valid metadata. Must be an object having `.countries` child object property. Got ".concat(Qm(e)?"an object of shape: { "+Object.keys(e).join(", ")+" }":"a "+u8e(e)+": "+e,"."))}var u8e=function(t){return qp(t)};function UE(e,t){if(t=new Ca(t),t.hasCountry(e))return t.selectNumberingPlan(e).countryCallingCode();throw new Error("Unknown country: ".concat(e))}function f8e(e,t){return t.countries.hasOwnProperty(e)}function oie(e){var t=e.version;typeof t=="number"?(this.v1=t===1,this.v2=t===2,this.v3=t===3,this.v4=t===4):t?EO(t,a8e)===-1?this.v2=!0:EO(t,i8e)===-1?this.v3=!0:this.v4=!0:this.v1=!0}function VE(e,t,r){return h8e(e,t,void 0,r)}function h8e(e,t,r,s){t&&(s=new Ca(s.metadata),s.selectNumberingPlan(t));var a=s.type(r),i=a&&a.possibleLengths()||s.possibleLengths();if(!i)return"IS_POSSIBLE";var o=e.length,l=i[0];return l===o?"IS_POSSIBLE":l>o?"TOO_SHORT":i[i.length-1]<o?"TOO_LONG":i.indexOf(o,1)>=0?"IS_POSSIBLE":"INVALID_LENGTH"}function m8e(e,t,r){if(t===void 0&&(t={}),r=new Ca(r),t.v2){if(!e.countryCallingCode)throw new Error("Invalid phone number object passed");r.selectNumberingPlan(e.countryCallingCode)}else{if(!e.phone)return!1;if(e.country){if(!r.hasCountry(e.country))throw new Error("Unknown country: ".concat(e.country));r.selectNumberingPlan(e.country)}else{if(!e.countryCallingCode)throw new Error("Invalid phone number object passed");r.selectNumberingPlan(e.countryCallingCode)}}if(r.possibleLengths())return lie(e.phone||e.nationalNumber,e.country,r);if(e.countryCallingCode&&r.isNonGeographicCallingCode(e.countryCallingCode))return!0;throw new Error('Missing "possibleLengths" in metadata. Perhaps the metadata has been generated before v1.0.18.')}function lie(e,t,r){switch(VE(e,t,r)){case"IS_POSSIBLE":return!0;default:return!1}}function rd(e,t){return e=e||"",new RegExp("^(?:"+t+")$").test(e)}function p8e(e,t){var r=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r)return(r=r.call(e)).next.bind(r);if(Array.isArray(e)||(r=g8e(e))||t){r&&(e=r);var s=0;return function(){return s>=e.length?{done:!0}:{done:!1,value:e[s++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function g8e(e,t){if(e){if(typeof e=="string")return $O(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?$O(e,t):void 0}}function $O(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=Array(t);r<t;r++)s[r]=e[r];return s}var x8e=["MOBILE","PREMIUM_RATE","TOLL_FREE","SHARED_COST","VOIP","PERSONAL_NUMBER","PAGER","UAN","VOICEMAIL"];function HE(e,t,r){if(t=t||{},!(!e.country&&!e.countryCallingCode)){r=new Ca(r),r.selectNumberingPlan(e.country,e.countryCallingCode);var s=t.v2?e.nationalNumber:e.phone;if(rd(s,r.nationalNumberPattern())){if(RC(s,"FIXED_LINE",r))return r.type("MOBILE")&&r.type("MOBILE").pattern()===""||!r.type("MOBILE")||RC(s,"MOBILE",r)?"FIXED_LINE_OR_MOBILE":"FIXED_LINE";for(var a=p8e(x8e),i;!(i=a()).done;){var o=i.value;if(RC(s,o,r))return o}}}}function RC(e,t,r){return t=r.type(t),!t||!t.pattern()||t.possibleLengths()&&t.possibleLengths().indexOf(e.length)<0?!1:rd(e,t.pattern())}function y8e(e,t,r){if(t=t||{},r=new Ca(r),r.selectNumberingPlan(e.country,e.countryCallingCode),r.hasTypes())return HE(e,t,r.metadata)!==void 0;var s=t.v2?e.nationalNumber:e.phone;return rd(s,r.nationalNumberPattern())}function v8e(e,t,r){var s=new Ca(r),a=s.getCountryCodesForCallingCode(e);return a?a.filter(function(i){return b8e(t,i,r)}):[]}function b8e(e,t,r){var s=new Ca(r);return s.selectNumberingPlan(t),s.numberingPlan.possibleLengths().indexOf(e.length)>=0}var WE=2,w8e=17,j8e=3,yl="0-9---",N8e="--",S8e="/",C8e=".",k8e="  ",M8e="()\\[\\]",_8e="~",h2="".concat(N8e).concat(S8e).concat(C8e).concat(k8e).concat(M8e).concat(_8e),qE="+",P8e=new RegExp("(["+yl+"])");function T8e(e,t,r,s){if(t){var a=new Ca(s);a.selectNumberingPlan(t,r);var i=new RegExp(a.IDDPrefix());if(e.search(i)===0){e=e.slice(e.match(i)[0].length);var o=e.match(P8e);if(!(o&&o[1]!=null&&o[1].length>0&&o[1]==="0"))return e}}}function A8e(e,t){if(e&&t.numberingPlan.nationalPrefixForParsing()){var r=new RegExp("^(?:"+t.numberingPlan.nationalPrefixForParsing()+")"),s=r.exec(e);if(s){var a,i,o=s.length-1,l=o>0&&s[o];if(t.nationalPrefixTransformRule()&&l)a=e.replace(r,t.nationalPrefixTransformRule()),o>1&&(i=s[1]);else{var c=s[0];a=e.slice(c.length),l&&(i=s[1])}var d;if(l){var u=e.indexOf(s[1]),f=e.slice(0,u);f===t.numberingPlan.nationalPrefix()&&(d=t.numberingPlan.nationalPrefix())}else d=s[0];return{nationalNumber:a,nationalPrefix:d,carrierCode:i}}}return{nationalNumber:e}}function E8e(e,t){var r=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r)return(r=r.call(e)).next.bind(r);if(Array.isArray(e)||(r=I8e(e))||t){r&&(e=r);var s=0;return function(){return s>=e.length?{done:!0}:{done:!1,value:e[s++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function I8e(e,t){if(e){if(typeof e=="string")return OO(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?OO(e,t):void 0}}function OO(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=Array(t);r<t;r++)s[r]=e[r];return s}function L8e(e,t){var r=t.countries,s=t.metadata;s=new Ca(s);for(var a=E8e(r),i;!(i=a()).done;){var o=i.value;if(s.selectNumberingPlan(o),s.leadingDigits()){if(e&&e.search(s.leadingDigits())===0)return o}else if(HE({phone:e,country:o},void 0,s.metadata))return o}}function cie(e,t){var r=t.nationalNumber,s=t.metadata,a=s.getCountryCodesForCallingCode(e);if(a)return a.length===1?a[0]:L8e(r,{countries:a,metadata:s.metadata})}function KM(e,t,r){var s=A8e(e,r),a=s.carrierCode,i=s.nationalNumber;if(i!==e){if(!D8e(e,i,r))return{nationalNumber:e};if(r.numberingPlan.possibleLengths()&&(t||(t=cie(r.numberingPlan.callingCode(),{nationalNumber:i,metadata:r})),!$8e(i,t,r)))return{nationalNumber:e}}return{nationalNumber:i,carrierCode:a}}function D8e(e,t,r){return!(rd(e,r.nationalNumberPattern())&&!rd(t,r.nationalNumberPattern()))}function $8e(e,t,r){switch(VE(e,t,r)){case"TOO_SHORT":case"INVALID_LENGTH":return!1;default:return!0}}function O8e(e,t,r,s,a){var i=r?UE(r,a):s;if(e.indexOf(i)===0){a=new Ca(a),a.selectNumberingPlan(r,i);var o=e.slice(i.length),l=KM(o,t,a),c=l.nationalNumber,d=KM(e,t,a),u=d.nationalNumber;if(!rd(u,a.nationalNumberPattern())&&rd(c,a.nationalNumberPattern())||VE(u,t,a)==="TOO_LONG")return{countryCallingCode:i,number:o}}return{number:e}}function die(e,t,r,s,a){if(!e)return{};var i;if(e[0]!=="+"){var o=T8e(e,r,s,a);if(o&&o!==e)i=!0,e="+"+o;else{if(r||s){var l=O8e(e,t,r,s,a),c=l.countryCallingCode,d=l.number;if(c)return{countryCallingCodeSource:"FROM_NUMBER_WITHOUT_PLUS_SIGN",countryCallingCode:c,number:d}}return{number:e}}}if(e[1]==="0")return{};a=new Ca(a);for(var u=2;u-1<=j8e&&u<=e.length;){var f=e.slice(1,u);if(a.hasCallingCode(f))return a.selectNumberingPlan(f),{countryCallingCodeSource:i?"FROM_NUMBER_WITH_IDD":"FROM_NUMBER_WITH_PLUS_SIGN",countryCallingCode:f,number:e.slice(u)};u++}return{}}function R8e(e){return e.replace(new RegExp("[".concat(h2,"]+"),"g")," ").trim()}var F8e=/(\$\d)/;function z8e(e,t,r){var s=r.useInternationalFormat,a=r.withNationalPrefix,i=e.replace(new RegExp(t.pattern()),s?t.internationalFormat():a&&t.nationalPrefixFormattingRule()?t.format().replace(F8e,t.nationalPrefixFormattingRule()):t.format());return s?R8e(i):i}var B8e=/^[\d]+(?:[~\u2053\u223C\uFF5E][\d]+)?$/;function U8e(e,t,r){var s=new Ca(r);if(s.selectNumberingPlan(e,t),s.defaultIDDPrefix())return s.defaultIDDPrefix();if(B8e.test(s.IDDPrefix()))return s.IDDPrefix()}var V8e=";ext=",Gh=function(t){return"([".concat(yl,"]{1,").concat(t,"})")};function uie(e){var t="20",r="15",s="9",a="6",i="[  \\t,]*",o="[:\\.]?[  \\t,-]*",l="#?",c="(?:e?xt(?:ensi(?:o?|))?n?|??||anexo)",d="(?:[x#~]|int|)",u="[- ]+",f="[  \\t]*",h="(?:,{2}|;)",m=V8e+Gh(t),g=i+c+o+Gh(t)+l,x=i+d+o+Gh(s)+l,y=u+Gh(a)+"#",v=f+h+o+Gh(r)+l,b=f+"(?:,)+"+o+Gh(s)+l;return m+"|"+g+"|"+x+"|"+y+"|"+v+"|"+b}var H8e="["+yl+"]{"+WE+"}",W8e="["+qE+"]{0,1}(?:["+h2+"]*["+yl+"]){3,}["+h2+yl+"]*",q8e=new RegExp("^["+qE+"]{0,1}(?:["+h2+"]*["+yl+"]){1,2}$","i"),G8e=W8e+"(?:"+uie()+")?",Y8e=new RegExp("^"+H8e+"$|^"+G8e+"$","i");function Q8e(e){return e.length>=WE&&Y8e.test(e)}function K8e(e){return q8e.test(e)}function J8e(e){var t=e.number,r=e.ext;if(!t)return"";if(t[0]!=="+")throw new Error('"formatRFC3966()" expects "number" to be in E.164 format.');return"tel:".concat(t).concat(r?";ext="+r:"")}var RO={formatExtension:function(t,r,s){return"".concat(t).concat(s.ext()).concat(r)}};function Z8e(e,t,r,s){if(r?r=t$e({},RO,r):r=RO,s=new Ca(s),e.country&&e.country!=="001"){if(!s.hasCountry(e.country))throw new Error("Unknown country: ".concat(e.country));s.selectNumberingPlan(e.country)}else if(e.countryCallingCode)s.selectNumberingPlan(e.countryCallingCode);else return e.phone||"";var a=s.countryCallingCode(),i=r.v2?e.nationalNumber:e.phone,o;switch(t){case"NATIONAL":return i?(o=m2(i,e.carrierCode,"NATIONAL",s,r),FC(o,e.ext,s,r.formatExtension)):"";case"INTERNATIONAL":return i?(o=m2(i,null,"INTERNATIONAL",s,r),o="+".concat(a," ").concat(o),FC(o,e.ext,s,r.formatExtension)):"+".concat(a);case"E.164":return"+".concat(a).concat(i);case"RFC3966":return J8e({number:"+".concat(a).concat(i),ext:e.ext});case"IDD":if(!r.fromCountry)return;var l=e$e(i,e.carrierCode,a,r.fromCountry,s);return FC(l,e.ext,s,r.formatExtension);default:throw new Error('Unknown "format" argument passed to "formatNumber()": "'.concat(t,'"'))}}function m2(e,t,r,s,a){var i=X8e(s.formats(),e);return i?z8e(e,i,{useInternationalFormat:r==="INTERNATIONAL",withNationalPrefix:!(i.nationalPrefixIsOptionalWhenFormattingInNationalFormat()&&a&&a.nationalPrefix===!1)}):e}function X8e(e,t){return n$e(e,function(r){if(r.leadingDigitsPatterns().length>0){var s=r.leadingDigitsPatterns()[r.leadingDigitsPatterns().length-1];if(t.search(s)!==0)return!1}return rd(t,r.pattern())})}function FC(e,t,r,s){return t?s(e,t,r):e}function e$e(e,t,r,s,a){var i=UE(s,a.metadata);if(i===r){var o=m2(e,t,"NATIONAL",a);return r==="1"?r+" "+o:o}var l=U8e(s,void 0,a.metadata);if(l)return"".concat(l," ").concat(r," ").concat(m2(e,null,"INTERNATIONAL",a))}function t$e(){for(var e=1,t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];for(;e<r.length;){if(r[e])for(var a in r[e])r[0][a]=r[e][a];e++}return r[0]}function n$e(e,t){for(var r=0;r<e.length;){if(t(e[r]))return e[r];r++}}function Yy(e){"@babel/helpers - typeof";return Yy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yy(e)}function FO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function zO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?FO(Object(r),!0).forEach(function(s){r$e(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):FO(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function r$e(e,t,r){return(t=fie(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s$e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a$e(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,fie(s.key),s)}}function i$e(e,t,r){return t&&a$e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function fie(e){var t=o$e(e,"string");return Yy(t)=="symbol"?t:t+""}function o$e(e,t){if(Yy(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(Yy(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var l$e=function(){function e(t,r,s){if(s$e(this,e),!t)throw new TypeError("First argument is required");if(typeof t!="string")throw new TypeError("First argument must be a string");if(t[0]==="+"&&!r)throw new TypeError("`metadata` argument not passed");if(Qm(r)&&Qm(r.countries)){s=r;var a=t;if(!u$e.test(a))throw new Error('Invalid `number` argument passed: must consist of a "+" followed by digits');var i=die(a,void 0,void 0,void 0,s),o=i.countryCallingCode,l=i.number;if(r=l,t=o,!r)throw new Error("Invalid `number` argument passed: too short")}if(!r)throw new TypeError("`nationalNumber` argument is required");if(typeof r!="string")throw new TypeError("`nationalNumber` argument must be a string");iie(s);var c=d$e(t,s),d=c.country,u=c.countryCallingCode;this.country=d,this.countryCallingCode=u,this.nationalNumber=r,this.number="+"+this.countryCallingCode+this.nationalNumber,this.getMetadata=function(){return s}}return i$e(e,[{key:"setExt",value:function(r){this.ext=r}},{key:"getPossibleCountries",value:function(){return this.country?[this.country]:v8e(this.countryCallingCode,this.nationalNumber,this.getMetadata())}},{key:"isPossible",value:function(){return m8e(this,{v2:!0},this.getMetadata())}},{key:"isValid",value:function(){return y8e(this,{v2:!0},this.getMetadata())}},{key:"isNonGeographic",value:function(){var r=new Ca(this.getMetadata());return r.isNonGeographicCallingCode(this.countryCallingCode)}},{key:"isEqual",value:function(r){return this.number===r.number&&this.ext===r.ext}},{key:"getType",value:function(){return HE(this,{v2:!0},this.getMetadata())}},{key:"format",value:function(r,s){return Z8e(this,r,s?zO(zO({},s),{},{v2:!0}):{v2:!0},this.getMetadata())}},{key:"formatNational",value:function(r){return this.format("NATIONAL",r)}},{key:"formatInternational",value:function(r){return this.format("INTERNATIONAL",r)}},{key:"getURI",value:function(r){return this.format("RFC3966",r)}}])}(),c$e=function(t){return/^[A-Z]{2}$/.test(t)};function d$e(e,t){var r,s,a=new Ca(t);return c$e(e)?(r=e,a.selectNumberingPlan(r),s=a.countryCallingCode()):s=e,{country:r,countryCallingCode:s}}var u$e=/^\+\d+$/;function JM(e){"@babel/helpers - typeof";return JM=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},JM(e)}function f$e(e,t,r){return Object.defineProperty(e,"prototype",{writable:!1}),e}function h$e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m$e(e,t,r){return t=Ky(t),p$e(e,GE()?Reflect.construct(t,r||[],Ky(e).constructor):t.apply(e,r))}function p$e(e,t){if(t&&(JM(t)=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return g$e(e)}function g$e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x$e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Qy(e,t)}function ZM(e){var t=typeof Map=="function"?new Map:void 0;return ZM=function(s){if(s===null||!v$e(s))return s;if(typeof s!="function")throw new TypeError("Super expression must either be null or a function");if(t!==void 0){if(t.has(s))return t.get(s);t.set(s,a)}function a(){return y$e(s,arguments,Ky(this).constructor)}return a.prototype=Object.create(s.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),Qy(a,s)},ZM(e)}function y$e(e,t,r){if(GE())return Reflect.construct.apply(null,arguments);var s=[null];s.push.apply(s,t);var a=new(e.bind.apply(e,s));return r&&Qy(a,r.prototype),a}function GE(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(GE=function(){return!!e})()}function v$e(e){try{return Function.toString.call(e).indexOf("[native code]")!==-1}catch{return typeof e=="function"}}function Qy(e,t){return Qy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},Qy(e,t)}function Ky(e){return Ky=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ky(e)}var Cc=function(e){function t(r){var s;return h$e(this,t),s=m$e(this,t,[r]),Object.setPrototypeOf(s,t.prototype),s.name=s.constructor.name,s}return x$e(t,e),f$e(t)}(ZM(Error)),BO=new RegExp("(?:"+uie()+")$","i");function b$e(e){var t=e.search(BO);if(t<0)return{};for(var r=e.slice(0,t),s=e.match(BO),a=1;a<s.length;){if(s[a])return{number:r,ext:s[a]};a++}}var w$e={0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9"};function j$e(e){return w$e[e]}function N$e(e,t){var r=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r)return(r=r.call(e)).next.bind(r);if(Array.isArray(e)||(r=S$e(e))||t){r&&(e=r);var s=0;return function(){return s>=e.length?{done:!0}:{done:!1,value:e[s++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function S$e(e,t){if(e){if(typeof e=="string")return UO(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?UO(e,t):void 0}}function UO(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=Array(t);r<t;r++)s[r]=e[r];return s}function VO(e){for(var t="",r=N$e(e.split("")),s;!(s=r()).done;){var a=s.value;t+=C$e(a,t)||""}return t}function C$e(e,t,r){return e==="+"?t?void 0:"+":j$e(e)}var hie="+",k$e="[\\-\\.\\(\\)]?",HO="(["+yl+"]|"+k$e+")",M$e="^\\"+hie+HO+"*["+yl+"]"+HO+"*$",_$e=new RegExp(M$e,"g"),XM=yl,P$e="["+XM+"]+((\\-)*["+XM+"])*",T$e="a-zA-Z",A$e="["+T$e+"]+((\\-)*["+XM+"])*",E$e="^("+P$e+"\\.)*"+A$e+"\\.?$",I$e=new RegExp(E$e,"g"),WO="tel:",e_=";phone-context=",L$e=";isub=";function D$e(e){var t=e.indexOf(e_);if(t<0)return null;var r=t+e_.length;if(r>=e.length)return"";var s=e.indexOf(";",r);return s>=0?e.substring(r,s):e.substring(r)}function $$e(e){return e===null?!0:e.length===0?!1:_$e.test(e)||I$e.test(e)}function O$e(e,t){var r=t.extractFormattedPhoneNumber,s=D$e(e);if(!$$e(s))throw new Cc("NOT_A_NUMBER");var a;if(s===null)a=r(e)||"";else{a="",s.charAt(0)===hie&&(a+=s);var i=e.indexOf(WO),o;i>=0?o=i+WO.length:o=0;var l=e.indexOf(e_);a+=e.substring(o,l)}var c=a.indexOf(L$e);if(c>0&&(a=a.substring(0,c)),a!=="")return a}var R$e=250,F$e=new RegExp("["+qE+yl+"]"),z$e=new RegExp("[^"+yl+"#]+$");function B$e(e,t,r){if(t=t||{},r=new Ca(r),t.defaultCountry&&!r.hasCountry(t.defaultCountry))throw t.v2?new Cc("INVALID_COUNTRY"):new Error("Unknown country: ".concat(t.defaultCountry));var s=V$e(e,t.v2,t.extract),a=s.number,i=s.ext,o=s.error;if(!a){if(t.v2)throw o==="TOO_SHORT"?new Cc("TOO_SHORT"):new Cc("NOT_A_NUMBER");return{}}var l=W$e(a,t.defaultCountry,t.defaultCallingCode,r),c=l.country,d=l.nationalNumber,u=l.countryCallingCode,f=l.countryCallingCodeSource,h=l.carrierCode;if(!r.hasSelectedNumberingPlan()){if(t.v2)throw new Cc("INVALID_COUNTRY");return{}}if(!d||d.length<WE){if(t.v2)throw new Cc("TOO_SHORT");return{}}if(d.length>w8e){if(t.v2)throw new Cc("TOO_LONG");return{}}if(t.v2){var m=new l$e(u,d,r.metadata);return c&&(m.country=c),h&&(m.carrierCode=h),i&&(m.ext=i),m.__countryCallingCodeSource=f,m}var g=(t.extended?r.hasSelectedNumberingPlan():c)?rd(d,r.nationalNumberPattern()):!1;return t.extended?{country:c,countryCallingCode:u,carrierCode:h,valid:g,possible:g?!0:!!(t.extended===!0&&r.possibleLengths()&&lie(d,c,r)),phone:d,ext:i}:g?H$e(c,d,i):{}}function U$e(e,t,r){if(e){if(e.length>R$e){if(r)throw new Cc("TOO_LONG");return}if(t===!1)return e;var s=e.search(F$e);if(!(s<0))return e.slice(s).replace(z$e,"")}}function V$e(e,t,r){var s=O$e(e,{extractFormattedPhoneNumber:function(o){return U$e(o,r,t)}});if(!s)return{};if(!Q8e(s))return K8e(s)?{error:"TOO_SHORT"}:{};var a=b$e(s);return a.ext?a:{number:s}}function H$e(e,t,r){var s={country:e,phone:t};return r&&(s.ext=r),s}function W$e(e,t,r,s){var a=die(VO(e),void 0,t,r,s.metadata),i=a.countryCallingCodeSource,o=a.countryCallingCode,l=a.number,c;if(o)s.selectNumberingPlan(o);else if(l&&(t||r))s.selectNumberingPlan(t,r),t&&(c=t),o=r||UE(t,s.metadata);else return{};if(!l)return{countryCallingCodeSource:i,countryCallingCode:o};var d=KM(VO(l),c,s),u=d.nationalNumber,f=d.carrierCode,h=cie(o,{nationalNumber:u,metadata:s});return h&&(c=h,h==="001"||s.selectNumberingPlan(c)),{country:c,countryCallingCode:o,countryCallingCodeSource:i,nationalNumber:u,carrierCode:f}}function Jy(e){"@babel/helpers - typeof";return Jy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jy(e)}function qO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function GO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qO(Object(r),!0).forEach(function(s){q$e(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qO(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function q$e(e,t,r){return(t=G$e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function G$e(e){var t=Y$e(e,"string");return Jy(t)=="symbol"?t:t+""}function Y$e(e,t){if(Jy(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(Jy(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Q$e(e,t,r){return B$e(e,GO(GO({},t),{},{v2:!0}),r)}function Zy(e){"@babel/helpers - typeof";return Zy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zy(e)}function YO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function K$e(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?YO(Object(r),!0).forEach(function(s){J$e(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):YO(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function J$e(e,t,r){return(t=Z$e(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Z$e(e){var t=X$e(e,"string");return Zy(t)=="symbol"?t:t+""}function X$e(e,t){if(Zy(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(Zy(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function eOe(e,t){return sOe(e)||rOe(e,t)||nOe(e,t)||tOe()}function tOe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nOe(e,t){if(e){if(typeof e=="string")return QO(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?QO(e,t):void 0}}function QO(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=Array(t);r<t;r++)s[r]=e[r];return s}function rOe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s,a,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(s=i.call(r)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function sOe(e){if(Array.isArray(e))return e}function aOe(e){var t=Array.prototype.slice.call(e),r=eOe(t,4),s=r[0],a=r[1],i=r[2],o=r[3],l,c,d;if(typeof s=="string")l=s;else throw new TypeError("A text for parsing must be a string.");if(!a||typeof a=="string")o?(c=i,d=o):(c=void 0,d=i),a&&(c=K$e({defaultCountry:a},c));else if(Qm(a))i?(c=a,d=i):d=a;else throw new Error("Invalid second argument: ".concat(a));return{text:l,options:c,metadata:d}}function Xy(e){"@babel/helpers - typeof";return Xy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xy(e)}function KO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function JO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?KO(Object(r),!0).forEach(function(s){iOe(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):KO(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function iOe(e,t,r){return(t=oOe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oOe(e){var t=lOe(e,"string");return Xy(t)=="symbol"?t:t+""}function lOe(e,t){if(Xy(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(Xy(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function cOe(e,t,r){t&&t.defaultCountry&&!f8e(t.defaultCountry,r)&&(t=JO(JO({},t),{},{defaultCountry:void 0}));try{return Q$e(e,t,r)}catch(s){if(!(s instanceof Cc))throw s}}function dOe(){var e=aOe(arguments),t=e.text,r=e.options,s=e.metadata;return cOe(t,r,s)}function mie(){return e8e(dOe,arguments)}function $x(e,t="US"){if(!e||typeof e!="string")return null;const r=e.trim();if(!r)return null;try{const s=mie(r,t);return!s||!s.isValid()?null:s.number}catch(s){return console.error("Phone parsing error:",s),null}}function t_(e,t="US"){return $x(e,t)!==null}function n_(e,t="US"){if(!e)return"";try{const r=mie(e,t);return r?r.formatNational():e}catch{return e}}function uOe({isOpen:e,onOpenChange:t,onSuccess:r}){const{selectedPhoneLineId:s}=LE(),[a,i]=p.useState("sms"),[o,l]=p.useState(""),[c,d]=p.useState(""),[u,f]=p.useState(""),[h,m]=p.useState(""),g=cs(),{toast:x}=Ee();p.useEffect(()=>{e||(i("sms"),l(""),d(""),f(""),m(""))},[e]);const y=je({mutationFn:async b=>await Ne("POST","/api/conversations/create",b),onSuccess:async b=>{var N;const w=await b.json();w.isNewConversation&&x({title:"Conversation started",description:`Started conversation with ${h||o}`}),t(!1),g.invalidateQueries({queryKey:["/api/conversations"]}),(N=w.conversation)!=null&&N.id?r(w.conversation.id):r()},onError:b=>{x({title:"Error",description:b.message||"Failed to start conversation",variant:"destructive",duration:8e3,action:n.jsx(oT,{altText:"Try again",onClick:()=>v(),children:"Retry"})})}}),v=()=>{if(a==="sms"){if(!o.trim()){x({title:"Phone required",description:"Please enter a phone number",variant:"destructive",duration:8e3});return}if(!t_(o)){x({title:"Invalid phone number",description:"Please enter a valid phone number",variant:"destructive",duration:8e3});return}}if(a==="email"&&!c.trim()){x({title:"Email required",description:"Please enter an email address",variant:"destructive",duration:8e3});return}if((a==="facebook"||a==="instagram")&&!u.trim()){x({title:"ID required",description:`Please enter ${a} user ID`,variant:"destructive",duration:8e3});return}const b=a==="sms"&&$x(o)||void 0;y.mutate({phone:b,email:a==="email"?c:void 0,socialId:a==="facebook"||a==="instagram"?u:void 0,name:h,platform:a,phoneLineId:a==="sms"&&s||void 0})};return n.jsx(At,{open:e,onOpenChange:t,children:n.jsxs(_t,{className:"dark:bg-gray-800 dark:border-gray-700",children:[n.jsxs($t,{children:[n.jsx(Et,{className:"dark:text-white",children:"New Message"}),n.jsx(an,{className:"dark:text-gray-400",children:"Start a new conversation with a customer"})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(U,{htmlFor:"platform",className:"dark:text-gray-300",children:"Communication Platform *"}),n.jsxs(Pt,{value:a,onValueChange:b=>i(b),children:[n.jsx(kt,{className:"dark:bg-gray-700 dark:border-gray-600 dark:text-white","data-testid":"select-platform",children:n.jsx(Tt,{})}),n.jsxs(Mt,{children:[n.jsx(ve,{value:"sms",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(pu,{className:"h-4 w-4"}),n.jsx("span",{children:"SMS / Text Message"})]})}),n.jsx(ve,{value:"web",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(wa,{className:"h-4 w-4"}),n.jsx("span",{children:"Web Chat"})]})}),n.jsx(ve,{value:"facebook",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(JDe,{className:"h-4 w-4"}),n.jsx("span",{children:"Facebook Messenger"})]})}),n.jsx(ve,{value:"instagram",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(ZDe,{className:"h-4 w-4"}),n.jsx("span",{children:"Instagram Direct"})]})}),n.jsx(ve,{value:"email",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Cr,{className:"h-4 w-4"}),n.jsx("span",{children:"Email"})]})})]})]})]}),a==="sms"&&n.jsxs("div",{children:[n.jsx(U,{htmlFor:"phone",className:"dark:text-gray-300",children:"Phone Number *"}),n.jsx(se,{id:"phone",placeholder:"(918) 555-1234",value:o,onChange:b=>l(n_(b.target.value)),onKeyDown:b=>b.key==="Enter"&&(b.preventDefault(),v()),"data-testid":"input-compose-phone",className:"dark:bg-gray-700 dark:border-gray-600 dark:text-white",autoFocus:!0})]}),a==="email"&&n.jsxs("div",{children:[n.jsx(U,{htmlFor:"email",className:"dark:text-gray-300",children:"Email Address *"}),n.jsx(se,{id:"email",type:"email",placeholder:"customer@example.com",value:c,onChange:b=>d(b.target.value),onKeyDown:b=>b.key==="Enter"&&(b.preventDefault(),v()),"data-testid":"input-compose-email",className:"dark:bg-gray-700 dark:border-gray-600 dark:text-white",autoFocus:!0})]}),(a==="facebook"||a==="instagram")&&n.jsxs("div",{children:[n.jsxs(U,{htmlFor:"social-id",className:"dark:text-gray-300",children:[a==="facebook"?"Facebook":"Instagram"," User ID *"]}),n.jsx(se,{id:"social-id",placeholder:"1234567890",value:u,onChange:b=>f(b.target.value),onKeyDown:b=>b.key==="Enter"&&(b.preventDefault(),v()),"data-testid":"input-compose-social-id",className:"dark:bg-gray-700 dark:border-gray-600 dark:text-white",autoFocus:!0}),n.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["This is usually provided by the ",a," webhook when they message you first"]})]}),a==="web"&&n.jsx("div",{className:"bg-blue-50 dark:bg-blue-950/30 p-3 rounded-lg border dark:border-blue-800",children:n.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:"Web chat conversations start automatically when customers visit your website and use the chat widget."})}),n.jsxs("div",{children:[n.jsx(U,{htmlFor:"name",className:"dark:text-gray-300",children:"Customer Name (Optional)"}),n.jsx(se,{id:"name",placeholder:"John Doe",value:h,onChange:b=>m(b.target.value),onKeyDown:b=>b.key==="Enter"&&(b.preventDefault(),v()),"data-testid":"input-compose-name",className:"dark:bg-gray-700 dark:border-gray-600 dark:text-white"})]})]}),n.jsxs(Sn,{children:[n.jsx(_,{variant:"outline",onClick:()=>t(!1),className:"dark:bg-gray-700 dark:border-gray-600 dark:text-white",disabled:y.isPending,children:"Cancel"}),n.jsx(_,{onClick:v,disabled:y.isPending,"data-testid":"button-start-conversation",children:y.isPending?"Starting...":"Start Conversation"})]})]})})}function fOe({open:e,onClose:t,contactName:r,contactFirstName:s,channelType:a,onMessageGenerated:i}){const{toast:o}=Ee();cs();const[l,c]=p.useState(),[d,u]=p.useState(180),[f,h]=p.useState(null),{data:m,isLoading:g}=be({queryKey:["/api/availability-templates"],enabled:e}),x=(m==null?void 0:m.data)||[];p.useEffect(()=>{if(x.length>0&&!l){const N=x.find(C=>C.channelType===a&&x.some(k=>k.channelType===a)),j=x.find(C=>C.channelType===null),S=N||j||x[0];c(S.id)}},[x,a,l]);const y=je({mutationFn:async()=>(await Ne("/api/calendar/share-availability",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contactName:r,contactFirstName:s,channelType:a,templateId:l,serviceDurationMinutes:d,daysAhead:14})})).json(),onSuccess:N=>{if(N.success)h(N.data),o({title:"Availability generated",description:"Preview your message below"});else throw new Error(N.error||"Failed to generate availability")},onError:N=>{o({title:"Error",description:N.message||"Failed to generate availability message",variant:"destructive"})}});p.useEffect(()=>{e&&l&&!y.isPending&&y.mutate()},[l,d,e]);const v=()=>{f&&(i(f.messageText),o({title:"Message added",description:"Availability message added to composer"}),t())},b=async()=>{if(f)try{await navigator.clipboard.writeText(f.messageText),o({title:"Copied!",description:"Message copied to clipboard"})}catch{o({title:"Error",description:"Failed to copy to clipboard",variant:"destructive"})}},w=[{value:60,label:"1 hour"},{value:120,label:"2 hours"},{value:180,label:"3 hours"},{value:240,label:"4 hours"}];return n.jsx(At,{open:e,onOpenChange:t,children:n.jsxs(_t,{className:"max-w-3xl max-h-[90vh] overflow-y-auto","data-testid":"share-availability-modal",children:[n.jsxs($t,{children:[n.jsxs(Et,{className:"flex items-center gap-2",children:[n.jsx(hu,{className:"w-5 h-5"}),"Share Availability"]}),n.jsxs(an,{children:["Generate a formatted availability message for ",s||r||"your customer"]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(U,{htmlFor:"template-select",children:"Message Template"}),g?n.jsx(Lt,{className:"h-10 w-full"}):n.jsxs(Pt,{value:l==null?void 0:l.toString(),onValueChange:N=>c(parseInt(N,10)),children:[n.jsx(kt,{id:"template-select","data-testid":"select-template",children:n.jsx(Tt,{placeholder:"Select a template"})}),n.jsx(Mt,{children:x.map(N=>n.jsxs(ve,{value:N.id.toString(),"data-testid":`template-option-${N.id}`,children:[N.name,N.channelType&&` (${N.channelType})`]},N.id))})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(U,{htmlFor:"duration-select",children:"Appointment Duration"}),n.jsxs(Pt,{value:d.toString(),onValueChange:N=>u(parseInt(N,10)),children:[n.jsx(kt,{id:"duration-select","data-testid":"select-duration",children:n.jsx(Tt,{placeholder:"Select duration"})}),n.jsx(Mt,{children:w.map(N=>n.jsx(ve,{value:N.value.toString(),"data-testid":`duration-option-${N.value}`,children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Rt,{className:"w-4 h-4"}),N.label]})},N.value))})]})]}),y.isPending&&n.jsx("div",{className:"flex items-center justify-center py-12","data-testid":"loading-indicator",children:n.jsxs("div",{className:"text-center space-y-2",children:[n.jsx(nt,{className:"w-8 h-8 animate-spin mx-auto text-primary"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Checking calendar availability..."})]})}),f&&!y.isPending&&n.jsxs(js,{defaultValue:"formatted",className:"w-full",children:[n.jsxs(ds,{className:"grid w-full grid-cols-2",children:[n.jsxs(dt,{value:"formatted","data-testid":"tab-formatted",children:[n.jsx(on,{className:"w-4 h-4 mr-2"}),"Formatted Message"]}),n.jsxs(dt,{value:"structured","data-testid":"tab-structured",children:[n.jsx(hu,{className:"w-4 h-4 mr-2"}),"Day-by-Day View"]})]}),n.jsx(pt,{value:"formatted",className:"space-y-2",children:n.jsx(O,{className:"p-4 bg-muted/50",children:n.jsx("pre",{className:"whitespace-pre-wrap font-sans text-sm","data-testid":"preview-formatted",children:f.messageText})})}),n.jsx(pt,{value:"structured",className:"space-y-2",children:n.jsx("div",{className:"space-y-3","data-testid":"preview-structured",children:f.rawAvailability.filter(N=>N.hasAvailability).length===0?n.jsx(O,{className:"p-4 bg-muted/50 text-center text-muted-foreground",children:n.jsx("p",{children:"No availability found for the next two weeks"})}):f.rawAvailability.filter(N=>N.hasAvailability).map((N,j)=>n.jsxs(O,{className:"p-4","data-testid":`day-card-${j}`,children:[n.jsx("h4",{className:"font-semibold mb-2",children:N.date}),n.jsx("ul",{className:"space-y-1",children:N.slots.map((S,C)=>n.jsxs("li",{className:"text-sm flex items-center gap-2",children:[n.jsx(Rt,{className:"w-3 h-3 text-muted-foreground"}),S]},C))})]},j))})})]})]}),n.jsxs(Sn,{className:"gap-2",children:[n.jsx(_,{variant:"outline",onClick:t,"data-testid":"button-cancel",children:"Cancel"}),n.jsxs(_,{variant:"outline",onClick:b,disabled:!f||y.isPending,"data-testid":"button-copy",children:[n.jsx(Qv,{className:"w-4 h-4 mr-2"}),"Copy to Clipboard"]}),n.jsxs(_,{onClick:v,disabled:!f||y.isPending,"data-testid":"button-use-message",children:[n.jsx(on,{className:"w-4 h-4 mr-2"}),"Use This Message"]})]})]})})}function hOe(e){var a,i,o,l,c,d,u,f,h,m,g,x,y;const{data:t,isLoading:r}=be({queryKey:["/api/tags/customer-profile",e],enabled:!!e});return{customerInfo:t!=null&&t.data?{id:((a=t.data.customer)==null?void 0:a.id)||0,name:((i=t.data.customer)==null?void 0:i.name)||((o=t.data.conversation)==null?void 0:o.customerName)||null,phone:((l=t.data.customer)==null?void 0:l.phone)||((c=t.data.conversation)==null?void 0:c.customerPhone)||"",email:((d=t.data.customer)==null?void 0:d.email)||null,address:((u=t.data.customer)==null?void 0:u.address)||null,vehicles:((h=(f=t.data.customer)==null?void 0:f.vehicles)==null?void 0:h.map(v=>({year:v.year,make:v.make,model:v.model,color:v.color})))||[],notes:((m=t.data.customer)==null?void 0:m.notes)||null,lastBooking:(g=t.data.appointmentHistory)!=null&&g[0]?{id:t.data.appointmentHistory[0].id,date:t.data.appointmentHistory[0].scheduledTime,service:t.data.appointmentHistory[0].serviceName,status:t.data.appointmentHistory[0].completed?"completed":"scheduled"}:null,totalBookings:((x=t.data.appointmentHistory)==null?void 0:x.length)||0,loyaltyPoints:((y=t.data.customer)==null?void 0:y.loyaltyPoints)||0}:null,isLoading:r}}function mOe(){var I;const{conversationFilter:e}=LE(),[,t]=zt(),r=ape(),[s,a]=p.useState(null),[i,o]=p.useState("all"),[l,c]=p.useState(""),[d,u]=p.useState(!0),[f,h]=p.useState(!1),[m,g]=p.useState(!1),x=cs(),{toast:y}=Ee(),{data:v,isLoading:b}=be({queryKey:["/api/conversations",i,e],queryFn:async()=>{const L=new URLSearchParams({status:i});e!==null&&L.append("phoneLineId",e.toString());const R=await fetch(`/api/conversations?${L.toString()}`,{credentials:"include"});if(!R.ok)throw new Error("Failed to fetch conversations");return R.json()},refetchInterval:1e4}),w=(v==null?void 0:v.data)||[];p.useEffect(()=>{const L=new URLSearchParams(r),R=L.get("phone"),G=L.get("conversation");if(w.length!==0){if(R){const $=w.find(D=>D.customerPhone===R);$&&(a($.id),t("/messages",{replace:!0}))}else if(G){const $=parseInt(G,10);isNaN($)||(a($),t("/messages",{replace:!0}))}}},[r,w,t]);const j=[...w.filter(L=>{var $,D;let R=!1;switch(i){case"all":R=!0;break;case"sms":R=L.platform==="sms";break;case"web":R=L.platform==="web";break;case"facebook":R=L.platform==="facebook";break;case"instagram":R=L.platform==="instagram";break;case"email":R=L.platform==="email";break;default:R=!0;break}if(!R)return!1;if(!l.trim())return!0;const G=l.toLowerCase();return(($=L.customerName)==null?void 0:$.toLowerCase().includes(G))||L.customerPhone.includes(G)||((D=L.latestMessage)==null?void 0:D.content.toLowerCase().includes(G))})].sort((L,R)=>L.pinned&&!R.pinned?-1:!L.pinned&&R.pinned?1:new Date(R.lastMessageTime).getTime()-new Date(L.lastMessageTime).getTime()),S=async()=>{if(s)try{await Ne("POST",`/api/conversations/${s}/takeover`,{}),x.invalidateQueries({queryKey:["/api/conversations"]}),y({title:"Control taken",description:"You now have manual control of this conversation"})}catch(L){console.error("Failed to take control:",L),y({title:"Failed to take control",description:"Could not switch to manual mode",variant:"destructive"})}};p.useEffect(()=>{const L=Dx();return L.on("connect",()=>{console.log("[MESSAGES] Connected to WebSocket"),L.emit("join_monitoring")}),L.on("new_message",()=>{x.invalidateQueries({queryKey:["/api/conversations"]})}),L.on("conversation_updated",()=>{x.invalidateQueries({queryKey:["/api/conversations"]})}),L.on("control_mode_changed",()=>{x.invalidateQueries({queryKey:["/api/conversations"]})}),()=>{L.emit("leave_monitoring"),L.disconnect()}},[x]);const C=w.find(L=>L.id===s),{customerInfo:k,isLoading:M}=hOe(s),A=n.jsx(vDe,{conversations:j,selectedId:s,onSelect:a,isLoading:b,searchQuery:l,onSearchChange:c,filter:i,onFilterChange:o}),P=n.jsx(QDe,{conversationId:s,onBack:()=>a(null),onTakeOver:S,controlMode:C==null?void 0:C.controlMode}),T=n.jsx(KDe,{customerInfo:s?k:null,isLoading:s?M:!1,onBookAppointment:void 0});return n.jsxs(n.Fragment,{children:[n.jsx(cDe,{conversationList:A,threadView:P,contextPanel:T,showContextPanel:d&&!!s}),n.jsxs("div",{className:"fixed top-4 right-4 z-50 flex items-center gap-2",children:[n.jsxs(_,{size:"sm",onClick:()=>h(!0),"data-testid":"button-compose",className:"nightops-button text-xs",children:[n.jsx(aD,{className:"h-3.5 w-3.5 mr-1.5"}),"New"]}),s&&n.jsxs(n.Fragment,{children:[n.jsxs(_,{size:"sm",onClick:()=>g(!0),"data-testid":"button-share-availability",className:"nightops-button text-xs",title:"Share calendar availability",children:[n.jsx(hu,{className:"h-3.5 w-3.5 mr-1.5"}),"Share"]}),n.jsx(_,{size:"sm",onClick:()=>u(!d),className:"nightops-button text-xs hidden lg:flex","data-testid":"button-toggle-profile",title:d?"Hide Context Panel":"Show Context Panel",children:d?n.jsx(nge,{className:"h-3.5 w-3.5"}):n.jsx(rge,{className:"h-3.5 w-3.5"})})]}),n.jsx(_,{size:"sm",onClick:()=>t("/phone"),"data-testid":"button-phone",className:"nightops-button text-xs",title:"Phone & Voicemail",children:n.jsx(bt,{className:"h-3.5 w-3.5"})})]}),n.jsx(uOe,{isOpen:f,onOpenChange:h,onSuccess:L=>{L&&a(L)}}),C&&n.jsx(fOe,{open:m,onClose:()=>g(!1),contactName:C.customerName||void 0,contactFirstName:((I=C.customerName)==null?void 0:I.split(" ")[0])||void 0,channelType:C.platform,onMessageGenerated:L=>{navigator.clipboard.writeText(L),y({title:"Availability copied",description:"Message copied to clipboard - paste it in the message field"}),g(!1)}}),!s&&n.jsx(_,{onClick:()=>h(!0),className:"lg:hidden fixed bottom-6 right-6 h-14 w-14 rounded-full nightops-button-primary shadow-[0_0_20px_rgba(34,211,238,0.5)] z-50",size:"icon","data-testid":"fab-compose-mobile",children:n.jsx(aD,{className:"h-6 w-6"})})]})}function pOe(){return n.jsx(pLe,{children:n.jsx(mOe,{})})}function gOe(){const[e,t]=p.useState(""),[r,s]=p.useState(!1),{toast:a}=Ee(),[,i]=zt(),o=je({mutationFn:async m=>await Ne("POST","/api/calls/initiate",{to:m}),onSuccess:()=>{a({title:"Calling...",description:`Connecting to ${e}`,duration:2e3}),t("")},onError:m=>{const g=m.message||"Unable to initiate call",x=g.includes("Twilio");a({title:x?"Phone service not configured":"Call failed",description:x?"Twilio Voice service is not yet configured. Contact support to enable calling.":g,variant:"destructive",duration:8e3,action:x?void 0:n.jsx(oT,{altText:"Try again",onClick:()=>d(),children:"Retry"})})}}),l=m=>{if(e.length>=15)return;const g=e.replace(/\D/g,"")+m;t(n_(g))},c=()=>{const m=e.replace(/\D/g,"");if(m.length===0)return;const g=m.slice(0,-1);t(n_(g))},d=()=>{if(!t_(e)){a({title:"Invalid number",description:"Please enter a valid phone number",variant:"destructive",duration:8e3});return}if(!$x(e)){a({title:"Invalid number",description:"Unable to process phone number",variant:"destructive",duration:8e3});return}s(!0)},u=()=>{const m=$x(e);m&&o.mutate(m),s(!1)},f=()=>{if(!t_(e)){a({title:"Invalid number",description:"Please enter a valid phone number",variant:"destructive",duration:8e3});return}const m=$x(e);if(!m){a({title:"Invalid number",description:"Unable to process phone number",variant:"destructive",duration:8e3});return}i(`/messages?new=${encodeURIComponent(m)}`)},h=[{digit:"1",letters:""},{digit:"2",letters:"ABC"},{digit:"3",letters:"DEF"},{digit:"4",letters:"GHI"},{digit:"5",letters:"JKL"},{digit:"6",letters:"MNO"},{digit:"7",letters:"PQRS"},{digit:"8",letters:"TUV"},{digit:"9",letters:"WXYZ"},{digit:"*",letters:""},{digit:"0",letters:"+"},{digit:"#",letters:""}];return n.jsxs("div",{className:"max-w-md mx-auto px-6 py-8 flex flex-col h-full",children:[n.jsx("div",{className:"mb-8",children:n.jsx("div",{className:"text-center",children:n.jsx("input",{type:"tel",value:e,readOnly:!0,placeholder:"Enter number",className:"text-4xl font-light text-center w-full bg-transparent border-none outline-none dark:text-white tracking-wider","data-testid":"input-phone-display"})})}),n.jsx("div",{className:"grid grid-cols-3 gap-4 mb-6",children:h.map(m=>n.jsxs("button",{onClick:()=>l(m.digit),className:"aspect-square rounded-full bg-white dark:bg-gray-800 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors shadow-sm border dark:border-gray-700 flex flex-col items-center justify-center","data-testid":`button-dial-${m.digit}`,children:[n.jsx("span",{className:"text-3xl font-light dark:text-white",children:m.digit}),m.letters&&n.jsx("span",{className:"text-xs text-muted-foreground uppercase mt-1",children:m.letters})]},m.digit))}),n.jsxs("div",{className:"flex items-center justify-center gap-6 mt-auto",children:[n.jsx(_,{variant:"outline",size:"lg",onClick:f,disabled:e.replace(/\D/g,"").length<10,className:"rounded-full h-16 w-16 p-0","data-testid":"button-message",children:n.jsx(wa,{className:"h-6 w-6"})}),n.jsx(_,{onClick:d,disabled:o.isPending||e.replace(/\D/g,"").length<10,className:"rounded-full h-20 w-20 bg-green-600 hover:bg-green-700 dark:bg-green-700 dark:hover:bg-green-800 p-0 shadow-lg","data-testid":"button-call",children:n.jsx(bt,{className:"h-8 w-8"})}),n.jsx(_,{variant:"ghost",size:"lg",onClick:c,disabled:e.length===0,className:"rounded-full h-16 w-16 p-0","data-testid":"button-delete",children:n.jsx(H0e,{className:"h-6 w-6"})})]}),n.jsx(V0,{open:r,onOpenChange:s,children:n.jsxs(kh,{className:"max-w-md",children:[n.jsxs(wu,{children:[n.jsxs(Nu,{className:"flex items-center gap-2",children:[n.jsx(Ya,{className:"h-5 w-5 text-amber-500"}),"Confirm Call"]}),n.jsxs(Rc,{className:"text-base",children:["Are you sure you want to call ",n.jsx("span",{className:"font-semibold text-foreground",children:e}),"?",n.jsx("br",{}),n.jsx("br",{}),n.jsx("span",{className:"text-sm text-muted-foreground",children:"You will receive a call first, then be connected to the customer."})]})]}),n.jsxs(ju,{children:[n.jsx(_h,{"data-testid":"button-cancel-call",children:"Cancel"}),n.jsx(Mh,{onClick:u,className:"bg-green-600 hover:bg-green-700","data-testid":"button-confirm-call",children:"Call Now"})]})]})})]})}function xOe(e){if(!e)return"N/A";const t=P4e({start:0,end:e*1e3});return t.hours&&t.hours>0?`${t.hours}h ${t.minutes}m ${t.seconds}s`:t.minutes&&t.minutes>0?`${t.minutes}m ${t.seconds}s`:`${t.seconds}s`}function yOe(e){return{completed:"bg-green-600",missed:"bg-red-600",voicemail:"bg-blue-600",busy:"bg-yellow-600",failed:"bg-gray-600"}[e]||"bg-gray-600"}function vOe(e){return{completed:"Completed",missed:"Missed Call",voicemail:"Voicemail",busy:"Busy",failed:"Failed"}[e]||e}function bOe({call:e,open:t,onOpenChange:r,onCallBack:s,onMessage:a}){const[,i]=zt();if(!e)return null;const o=e.direction==="inbound"?e.from:e.to,l=e.status==="missed",c=()=>{a?a():i(`/messages?new=${encodeURIComponent(o)}`),r(!1)},d=()=>{s&&s(),r(!1)};return n.jsx(At,{open:t,onOpenChange:r,children:n.jsxs(_t,{className:"sm:max-w-[500px]",children:[n.jsx($t,{children:n.jsxs(Et,{className:"flex items-center gap-3",children:[e.direction==="inbound"?l?n.jsx(hQ,{className:"h-6 w-6 text-red-600 dark:text-red-400"}):n.jsx(fQ,{className:"h-6 w-6 text-green-600 dark:text-green-400"}):n.jsx(mQ,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"}),n.jsx("span",{children:"Call Details"})]})}),n.jsxs("div",{className:"space-y-4 py-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:e.direction==="inbound"?"From":"To"}),n.jsx("p",{className:"text-2xl font-semibold dark:text-white",children:o})]}),n.jsx(ge,{className:yOe(e.status),children:vOe(e.status)})]}),n.jsx(Ot,{}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-1",children:[n.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[n.jsx(Dt,{className:"h-4 w-4"}),n.jsx("p",{className:"text-sm",children:"Date"})]}),n.jsx("p",{className:"font-medium dark:text-white",children:Ie(new Date(e.timestamp),"MMM d, yyyy")})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[n.jsx(Rt,{className:"h-4 w-4"}),n.jsx("p",{className:"text-sm",children:"Time"})]}),n.jsx("p",{className:"font-medium dark:text-white",children:Ie(new Date(e.timestamp),"h:mm a")})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[n.jsx(bt,{className:"h-4 w-4"}),n.jsx("p",{className:"text-sm",children:"Direction"})]}),n.jsx("p",{className:"font-medium dark:text-white capitalize",children:e.direction})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[n.jsx(Rt,{className:"h-4 w-4"}),n.jsx("p",{className:"text-sm",children:"Duration"})]}),n.jsx("p",{className:"font-medium dark:text-white",children:xOe(e.duration)})]})]}),e.recordingUrl&&n.jsxs(n.Fragment,{children:[n.jsx(Ot,{}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[n.jsx(z0e,{className:"h-4 w-4"}),n.jsx("p",{className:"text-sm",children:"Recording Available"})]}),n.jsxs(_,{variant:"outline",className:"w-full gap-2",onClick:()=>window.open(e.recordingUrl,"_blank"),"data-testid":"button-download-recording",children:[n.jsx(Qc,{className:"h-4 w-4"}),"Download Recording"]})]})]}),n.jsx(Ot,{}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs(_,{variant:"outline",className:"w-full gap-2",onClick:d,"data-testid":"button-modal-callback",children:[n.jsx(bt,{className:"h-4 w-4"}),"Call Back"]}),n.jsxs(_,{variant:"outline",className:"w-full gap-2",onClick:c,"data-testid":"button-modal-message",children:[n.jsx(wa,{className:"h-4 w-4"}),"Send Message"]})]})]})]})})}function wOe(){return n.jsx("div",{className:"divide-y dark:divide-gray-800",children:[...Array(6)].map((e,t)=>n.jsx("div",{className:"p-4 animate-pulse",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx(Lt,{className:"h-5 w-5 rounded-full"}),n.jsxs("div",{className:"flex-1 space-y-2",children:[n.jsx(Lt,{className:"h-4 w-32"}),n.jsx(Lt,{className:"h-3 w-24"})]}),n.jsx(Lt,{className:"h-3 w-16"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(Lt,{className:"h-9 w-9 rounded"}),n.jsx(Lt,{className:"h-9 w-9 rounded"}),n.jsx(Lt,{className:"h-9 w-9 rounded"})]})]})},t))})}function jOe(){return n.jsx("div",{className:"divide-y dark:divide-gray-800",children:[...Array(5)].map((e,t)=>n.jsx("div",{className:"p-4 animate-pulse",children:n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx(Lt,{className:"h-5 w-5 rounded-full mt-1"}),n.jsxs("div",{className:"flex-1 space-y-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Lt,{className:"h-4 w-32"}),n.jsx(Lt,{className:"h-5 w-16 rounded-full"})]}),n.jsx(Lt,{className:"h-3 w-28"}),n.jsx(Lt,{className:"h-3 w-full max-w-xs"}),n.jsx(Lt,{className:"h-3 w-20"})]}),n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsx(Lt,{className:"h-9 w-9 rounded"}),n.jsx(Lt,{className:"h-9 w-9 rounded"})]})]})},t))})}function NOe(){return n.jsx("div",{className:"divide-y dark:divide-gray-800",children:[...Array(4)].map((e,t)=>n.jsx("div",{className:"p-4 animate-pulse",children:n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Lt,{className:"h-4 w-32"}),n.jsx(Lt,{className:"h-5 w-12 rounded-full"})]}),n.jsx(Lt,{className:"h-3 w-24"})]}),n.jsx(Lt,{className:"h-12 w-full rounded-lg"}),n.jsx(Lt,{className:"h-20 w-full rounded-lg"}),n.jsxs("div",{className:"flex gap-2 pt-2",children:[n.jsx(Lt,{className:"h-8 w-24 rounded"}),n.jsx(Lt,{className:"h-8 w-24 rounded"}),n.jsx(Lt,{className:"h-8 w-10 rounded"})]})]})},t))})}function SOe(e){return e.direction==="inbound"&&e.status==="missed"?n.jsx(hQ,{className:"h-5 w-5 text-red-600 dark:text-red-400"}):e.direction==="inbound"?n.jsx(fQ,{className:"h-5 w-5 text-green-600 dark:text-green-400"}):n.jsx(mQ,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"})}function COe(e){if(!e)return"";const t=Math.floor(e/60),r=e%60;return t>0?`${t}m ${r}s`:`${r}s`}function kOe(e){const t=new Date(e);return Ny(t)?Ie(t,"h:mm a"):rX(t)?"Yesterday":Ie(t,"MMM d")}function MOe(){const[,e]=zt(),{toast:t}=Ee(),[r,s]=p.useState(null),{data:a,isLoading:i,isError:o,error:l}=be({queryKey:["/api/calls/recent"],refetchInterval:1e4,retry:3}),c=(a==null?void 0:a.calls)||[],d=je({mutationFn:async m=>await Ne("POST","/api/calls/initiate",{to:m}),onSuccess:(m,g)=>{t({title:"Calling...",description:`Connecting to ${g}`})},onError:m=>{t({title:"Call failed",description:m.message||"Unable to initiate call",variant:"destructive"})}}),u=m=>{e(`/messages?new=${encodeURIComponent(m)}`)},f=m=>{d.mutate(m)};if(i)return n.jsx(ia,{className:"h-full",children:n.jsx(wOe,{})});if(o)return n.jsx("div",{className:"flex items-center justify-center h-full",children:n.jsxs("div",{className:"text-center px-4",children:[n.jsx(bt,{className:"h-16 w-16 mx-auto mb-4 text-destructive"}),n.jsx("h3",{className:"text-lg font-semibold mb-2 dark:text-white",children:"Unable to load call history"}),n.jsx("p",{className:"text-muted-foreground mb-4",children:l instanceof Error?l.message:"Please try again later"}),n.jsx(_,{variant:"outline",onClick:()=>window.location.reload(),"data-testid":"button-retry-calls",children:"Retry"})]})});if(c.length===0)return n.jsx("div",{className:"flex items-center justify-center h-full",children:n.jsxs("div",{className:"text-center px-4",children:[n.jsx(bt,{className:"h-16 w-16 mx-auto mb-4 text-muted-foreground"}),n.jsx("h3",{className:"text-lg font-semibold mb-2 dark:text-white",children:"No recent calls"}),n.jsx("p",{className:"text-muted-foreground",children:"Your call history will appear here"})]})});const h=c.filter(m=>m.status==="missed").length;return c.filter(m=>m.direction==="inbound").length,c.filter(m=>m.direction==="outbound").length,n.jsxs(n.Fragment,{children:[n.jsx(bOe,{call:r,open:!!r,onOpenChange:m=>!m&&s(null),onCallBack:()=>r&&f(r.direction==="inbound"?r.from:r.to),onMessage:()=>r&&u(r.direction==="inbound"?r.from:r.to)}),n.jsxs("div",{className:"h-full flex flex-col bg-gradient-to-br from-gray-50/30 to-gray-100/20 dark:from-gray-950/50 dark:to-gray-900/30",children:[n.jsx("div",{className:"glass-card m-4 mb-0 p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-2 rounded-full bg-gradient-to-br from-green-500 to-blue-500",children:n.jsx(bt,{className:"h-5 w-5 text-white"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-lg dark:text-white",children:"Recent Calls"}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:[c.length," call",c.length!==1?"s":"",h>0&&`  ${h} missed`]})]})]}),n.jsx("div",{className:"flex items-center gap-2",children:h>0&&n.jsxs(ge,{className:"bg-gradient-to-br from-red-600 to-red-700 text-white border-0",children:[h," Missed"]})})]})}),n.jsx(ia,{className:"flex-1",children:n.jsx("div",{className:"p-4 space-y-3",children:c.map(m=>{const g=m.direction==="inbound"?m.from:m.to,x=m.status==="missed";return n.jsx("div",{className:`glass-card p-4 transition-all duration-200 hover:scale-[1.01] ${x?"bg-gradient-to-br from-red-50/30 to-red-100/20 dark:from-red-900/20 dark:to-red-950/10":""}`,"data-testid":`call-${m.id}`,children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"flex-shrink-0",children:SOe(m)}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("p",{className:`font-medium dark:text-white ${x?"text-red-700 dark:text-red-400":""}`,children:g}),x&&n.jsx(ge,{variant:"destructive",className:"text-xs",children:"Missed"}),m.status==="voicemail"&&n.jsx(ge,{className:"text-xs bg-gradient-to-br from-blue-600 to-purple-600 text-white border-0",children:"Voicemail"})]}),n.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[n.jsx("span",{children:m.direction==="inbound"?"Incoming":"Outgoing"}),m.duration!==null&&n.jsxs(n.Fragment,{children:[n.jsx("span",{children:""}),n.jsx("span",{children:COe(m.duration)})]})]})]}),n.jsx("div",{className:"text-sm text-muted-foreground text-right hidden sm:block",children:kOe(m.timestamp)}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(_,{variant:"ghost",size:"sm",onClick:()=>u(g),className:"h-9 w-9 p-0 transition-all duration-200 hover:scale-110",title:"Send message","data-testid":`button-message-${m.id}`,children:n.jsx(wa,{className:"h-4 w-4"})}),n.jsx(_,{variant:"ghost",size:"sm",onClick:()=>f(g),disabled:d.isPending,className:"h-9 w-9 p-0 text-green-600 hover:text-green-700 hover:bg-green-50 dark:hover:bg-green-950 transition-all duration-200 hover:scale-110",title:"Call back","data-testid":`button-call-${m.id}`,children:n.jsx(bt,{className:"h-4 w-4"})}),n.jsx(_,{variant:"ghost",size:"sm",onClick:()=>s(m),className:"h-9 w-9 p-0 transition-all duration-200 hover:scale-110",title:"Details","data-testid":`button-info-${m.id}`,children:n.jsx(vo,{className:"h-4 w-4"})})]})]})},m.id)})})})]})]})}var pie=["PageUp","PageDown"],gie=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],xie={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},tg="Slider",[r_,_Oe,POe]=qv(tg),[yie]=ws(tg,[POe]),[TOe,Z4]=yie(tg),vie=p.forwardRef((e,t)=>{const{name:r,min:s=0,max:a=100,step:i=1,orientation:o="horizontal",disabled:l=!1,minStepsBetweenThumbs:c=0,defaultValue:d=[s],value:u,onValueChange:f=()=>{},onValueCommit:h=()=>{},inverted:m=!1,form:g,...x}=e,y=p.useRef(new Set),v=p.useRef(0),w=o==="horizontal"?AOe:EOe,[N=[],j]=qa({prop:u,defaultProp:d,onChange:P=>{var I;(I=[...y.current][v.current])==null||I.focus(),f(P)}}),S=p.useRef(N);function C(P){const T=OOe(N,P);A(P,T)}function k(P){A(P,v.current)}function M(){const P=S.current[v.current];N[v.current]!==P&&h(N)}function A(P,T,{commit:I}={commit:!1}){const L=BOe(i),R=UOe(Math.round((P-s)/i)*i+s,L),G=yy(R,[s,a]);j(($=[])=>{const D=DOe($,G,T);if(zOe(D,c*i)){v.current=D.indexOf(G);const W=String(D)!==String($);return W&&I&&h(D),W?D:$}else return $})}return n.jsx(TOe,{scope:e.__scopeSlider,name:r,disabled:l,min:s,max:a,valueIndexToChangeRef:v,thumbs:y.current,values:N,orientation:o,form:g,children:n.jsx(r_.Provider,{scope:e.__scopeSlider,children:n.jsx(r_.Slot,{scope:e.__scopeSlider,children:n.jsx(w,{"aria-disabled":l,"data-disabled":l?"":void 0,...x,ref:t,onPointerDown:ut(x.onPointerDown,()=>{l||(S.current=N)}),min:s,max:a,inverted:m,onSlideStart:l?void 0:C,onSlideMove:l?void 0:k,onSlideEnd:l?void 0:M,onHomeKeyDown:()=>!l&&A(s,0,{commit:!0}),onEndKeyDown:()=>!l&&A(a,N.length-1,{commit:!0}),onStepKeyDown:({event:P,direction:T})=>{if(!l){const R=pie.includes(P.key)||P.shiftKey&&gie.includes(P.key)?10:1,G=v.current,$=N[G],D=i*R*T;A($+D,G,{commit:!0})}}})})})})});vie.displayName=tg;var[bie,wie]=yie(tg,{startEdge:"left",endEdge:"right",size:"width",direction:1}),AOe=p.forwardRef((e,t)=>{const{min:r,max:s,dir:a,inverted:i,onSlideStart:o,onSlideMove:l,onSlideEnd:c,onStepKeyDown:d,...u}=e,[f,h]=p.useState(null),m=rn(t,w=>h(w)),g=p.useRef(void 0),x=Ch(a),y=x==="ltr",v=y&&!i||!y&&i;function b(w){const N=g.current||f.getBoundingClientRect(),j=[0,N.width],C=YE(j,v?[r,s]:[s,r]);return g.current=N,C(w-N.left)}return n.jsx(bie,{scope:e.__scopeSlider,startEdge:v?"left":"right",endEdge:v?"right":"left",direction:v?1:-1,size:"width",children:n.jsx(jie,{dir:x,"data-orientation":"horizontal",...u,ref:m,style:{...u.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:w=>{const N=b(w.clientX);o==null||o(N)},onSlideMove:w=>{const N=b(w.clientX);l==null||l(N)},onSlideEnd:()=>{g.current=void 0,c==null||c()},onStepKeyDown:w=>{const j=xie[v?"from-left":"from-right"].includes(w.key);d==null||d({event:w,direction:j?-1:1})}})})}),EOe=p.forwardRef((e,t)=>{const{min:r,max:s,inverted:a,onSlideStart:i,onSlideMove:o,onSlideEnd:l,onStepKeyDown:c,...d}=e,u=p.useRef(null),f=rn(t,u),h=p.useRef(void 0),m=!a;function g(x){const y=h.current||u.current.getBoundingClientRect(),v=[0,y.height],w=YE(v,m?[s,r]:[r,s]);return h.current=y,w(x-y.top)}return n.jsx(bie,{scope:e.__scopeSlider,startEdge:m?"bottom":"top",endEdge:m?"top":"bottom",size:"height",direction:m?1:-1,children:n.jsx(jie,{"data-orientation":"vertical",...d,ref:f,style:{...d.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:x=>{const y=g(x.clientY);i==null||i(y)},onSlideMove:x=>{const y=g(x.clientY);o==null||o(y)},onSlideEnd:()=>{h.current=void 0,l==null||l()},onStepKeyDown:x=>{const v=xie[m?"from-bottom":"from-top"].includes(x.key);c==null||c({event:x,direction:v?-1:1})}})})}),jie=p.forwardRef((e,t)=>{const{__scopeSlider:r,onSlideStart:s,onSlideMove:a,onSlideEnd:i,onHomeKeyDown:o,onEndKeyDown:l,onStepKeyDown:c,...d}=e,u=Z4(tg,r);return n.jsx(ht.span,{...d,ref:t,onKeyDown:ut(e.onKeyDown,f=>{f.key==="Home"?(o(f),f.preventDefault()):f.key==="End"?(l(f),f.preventDefault()):pie.concat(gie).includes(f.key)&&(c(f),f.preventDefault())}),onPointerDown:ut(e.onPointerDown,f=>{const h=f.target;h.setPointerCapture(f.pointerId),f.preventDefault(),u.thumbs.has(h)?h.focus():s(f)}),onPointerMove:ut(e.onPointerMove,f=>{f.target.hasPointerCapture(f.pointerId)&&a(f)}),onPointerUp:ut(e.onPointerUp,f=>{const h=f.target;h.hasPointerCapture(f.pointerId)&&(h.releasePointerCapture(f.pointerId),i(f))})})}),Nie="SliderTrack",Sie=p.forwardRef((e,t)=>{const{__scopeSlider:r,...s}=e,a=Z4(Nie,r);return n.jsx(ht.span,{"data-disabled":a.disabled?"":void 0,"data-orientation":a.orientation,...s,ref:t})});Sie.displayName=Nie;var s_="SliderRange",Cie=p.forwardRef((e,t)=>{const{__scopeSlider:r,...s}=e,a=Z4(s_,r),i=wie(s_,r),o=p.useRef(null),l=rn(t,o),c=a.values.length,d=a.values.map(h=>Mie(h,a.min,a.max)),u=c>1?Math.min(...d):0,f=100-Math.max(...d);return n.jsx(ht.span,{"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,...s,ref:l,style:{...e.style,[i.startEdge]:u+"%",[i.endEdge]:f+"%"}})});Cie.displayName=s_;var a_="SliderThumb",kie=p.forwardRef((e,t)=>{const r=_Oe(e.__scopeSlider),[s,a]=p.useState(null),i=rn(t,l=>a(l)),o=p.useMemo(()=>s?r().findIndex(l=>l.ref.current===s):-1,[r,s]);return n.jsx(IOe,{...e,ref:i,index:o})}),IOe=p.forwardRef((e,t)=>{const{__scopeSlider:r,index:s,name:a,...i}=e,o=Z4(a_,r),l=wie(a_,r),[c,d]=p.useState(null),u=rn(t,b=>d(b)),f=c?o.form||!!c.closest("form"):!0,h=i1(c),m=o.values[s],g=m===void 0?0:Mie(m,o.min,o.max),x=$Oe(s,o.values.length),y=h==null?void 0:h[l.size],v=y?ROe(y,g,l.direction):0;return p.useEffect(()=>{if(c)return o.thumbs.add(c),()=>{o.thumbs.delete(c)}},[c,o.thumbs]),n.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[l.startEdge]:`calc(${g}% + ${v}px)`},children:[n.jsx(r_.ItemSlot,{scope:e.__scopeSlider,children:n.jsx(ht.span,{role:"slider","aria-label":e["aria-label"]||x,"aria-valuemin":o.min,"aria-valuenow":m,"aria-valuemax":o.max,"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,tabIndex:o.disabled?void 0:0,...i,ref:u,style:m===void 0?{display:"none"}:e.style,onFocus:ut(e.onFocus,()=>{o.valueIndexToChangeRef.current=s})})}),f&&n.jsx(LOe,{name:a??(o.name?o.name+(o.values.length>1?"[]":""):void 0),form:o.form,value:m},s)]})});kie.displayName=a_;var LOe=e=>{const{value:t,...r}=e,s=p.useRef(null),a=a1(t);return p.useEffect(()=>{const i=s.current,o=window.HTMLInputElement.prototype,c=Object.getOwnPropertyDescriptor(o,"value").set;if(a!==t&&c){const d=new Event("input",{bubbles:!0});c.call(i,t),i.dispatchEvent(d)}},[a,t]),n.jsx("input",{style:{display:"none"},...r,ref:s,defaultValue:t})};function DOe(e=[],t,r){const s=[...e];return s[r]=t,s.sort((a,i)=>a-i)}function Mie(e,t,r){const i=100/(r-t)*(e-t);return yy(i,[0,100])}function $Oe(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function OOe(e,t){if(e.length===1)return 0;const r=e.map(a=>Math.abs(a-t)),s=Math.min(...r);return r.indexOf(s)}function ROe(e,t,r){const s=e/2,i=YE([0,50],[0,s]);return(s-i(t)*r)*r}function FOe(e){return e.slice(0,-1).map((t,r)=>e[r+1]-t)}function zOe(e,t){if(t>0){const r=FOe(e);return Math.min(...r)>=t}return!0}function YE(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const s=(t[1]-t[0])/(e[1]-e[0]);return t[0]+s*(r-e[0])}}function BOe(e){return(String(e).split(".")[1]||"").length}function UOe(e,t){const r=Math.pow(10,t);return Math.round(e*r)/r}var _ie=vie,VOe=Sie,HOe=Cie,WOe=kie;const ai=p.forwardRef(({className:e,...t},r)=>n.jsxs(_ie,{ref:r,className:Le("relative flex w-full touch-none select-none items-center",e),...t,children:[n.jsx(VOe,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:n.jsx(HOe,{className:"absolute h-full bg-primary"})}),n.jsx(WOe,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));ai.displayName=_ie.displayName;function qOe({url:e,onEnded:t}){const r=p.useRef(null),[s,a]=p.useState(!1),[i,o]=p.useState(0),[l,c]=p.useState(0),[d,u]=p.useState(1);p.useEffect(()=>{const x=r.current;if(!x)return;const y=()=>o(x.currentTime),v=()=>c(x.duration),b=()=>{a(!1),o(0),t==null||t()};return x.addEventListener("timeupdate",y),x.addEventListener("loadedmetadata",v),x.addEventListener("ended",b),()=>{x.removeEventListener("timeupdate",y),x.removeEventListener("loadedmetadata",v),x.removeEventListener("ended",b)}},[t]);const f=()=>{const x=r.current;x&&(s?x.pause():x.play(),a(!s))},h=x=>{const y=r.current;y&&(y.currentTime=x[0],o(x[0]))},m=x=>{const y=r.current;y&&(y.volume=x[0],u(x[0]))},g=x=>{const y=Math.floor(x/60),v=Math.floor(x%60);return`${y}:${v.toString().padStart(2,"0")}`};return n.jsxs("div",{className:"space-y-2",children:[n.jsx("audio",{ref:r,src:e,preload:"metadata"}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(_,{variant:s?"default":"outline",size:"sm",onClick:f,className:"rounded-full h-10 w-10 p-0 flex-shrink-0","data-testid":"button-audio-play",children:s?n.jsx(Cp,{className:"h-4 w-4"}):n.jsx(A0,{className:"h-4 w-4 ml-0.5"})}),n.jsxs("div",{className:"flex-1 space-y-1",children:[n.jsx(ai,{value:[i],max:l||100,step:.1,onValueChange:h,className:"cursor-pointer","data-testid":"audio-seekbar"}),n.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[n.jsx("span",{children:g(i)}),n.jsx("span",{children:g(l)})]})]}),n.jsxs("div",{className:"flex items-center gap-2 w-24",children:[n.jsx(vQ,{className:"h-4 w-4 text-muted-foreground"}),n.jsx(ai,{value:[d],max:1,step:.01,onValueChange:m,className:"cursor-pointer","data-testid":"audio-volume"})]})]})]})}function GOe(){const[e,t]=p.useState(null),{toast:r}=Ee(),s=cs(),[,a]=zt(),{data:i,isLoading:o,isError:l,error:c,refetch:d}=be({queryKey:["/api/voicemail/inbox"],retry:3}),u=je({mutationFn:async b=>await Ne("DELETE",`/api/voicemail/${b}`),onSuccess:()=>{s.invalidateQueries({queryKey:["/api/voicemail/inbox"]}),r({title:"Voicemail deleted"})}}),f=je({mutationFn:async b=>await Ne("POST",`/api/voicemail/${b}/mark-read`),onSuccess:()=>{s.invalidateQueries({queryKey:["/api/voicemail/inbox"]})}}),h=(i==null?void 0:i.voicemails)||[],m=h.filter(b=>b.isNew).length,g=b=>{e===b.id?t(null):(t(b.id),b.isNew&&f.mutate(b.id))},x=je({mutationFn:async b=>await Ne("POST","/api/calls/initiate",{to:b}),onSuccess:(b,w)=>{r({title:"Calling...",description:`Connecting to ${w}`})},onError:b=>{r({title:"Call failed",description:b.message||"Unable to initiate call",variant:"destructive"})}}),y=b=>{x.mutate(b)},v=b=>{a(`/messages?new=${encodeURIComponent(b)}`)};return o?n.jsx("div",{className:"h-full flex flex-col",children:n.jsx(ia,{className:"flex-1",children:n.jsx(NOe,{})})}):l?n.jsx("div",{className:"flex items-center justify-center h-full",children:n.jsxs("div",{className:"text-center px-4",children:[n.jsx(Yd,{className:"h-16 w-16 mx-auto mb-4 text-destructive"}),n.jsx("h3",{className:"text-lg font-semibold mb-2 dark:text-white",children:"Unable to load voicemail"}),n.jsx("p",{className:"text-muted-foreground mb-4",children:c instanceof Error?c.message:"Connection error. Please check your internet."}),n.jsx(_,{variant:"outline",onClick:()=>d(),"data-testid":"button-retry-voicemail",children:"Retry"})]})}):h.length===0?n.jsx("div",{className:"flex items-center justify-center h-full",children:n.jsxs("div",{className:"text-center px-4",children:[n.jsx(Yd,{className:"h-16 w-16 mx-auto mb-4 text-muted-foreground"}),n.jsx("h3",{className:"text-lg font-semibold mb-2 dark:text-white",children:"No voicemails"}),n.jsx("p",{className:"text-muted-foreground",children:"Voicemail messages will appear here"})]})}):n.jsxs("div",{className:"h-full flex flex-col bg-gradient-to-br from-gray-50/30 to-gray-100/20 dark:from-gray-950/50 dark:to-gray-900/30",children:[n.jsx("div",{className:"glass-card m-4 mb-0 p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-2 rounded-full bg-gradient-to-br from-blue-500 to-purple-500",children:n.jsx(Yd,{className:"h-5 w-5 text-white"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-lg dark:text-white",children:"Voicemail"}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:[h.length," message",h.length!==1?"s":"",m>0&&`  ${m} new`]})]})]}),m>0&&n.jsxs(ge,{className:"bg-gradient-to-br from-blue-600 to-purple-600 text-white border-0",children:[m," New"]})]})}),n.jsx(ia,{className:"flex-1",children:n.jsx("div",{className:"p-4 space-y-3",children:h.map(b=>n.jsx("div",{className:`glass-card p-4 transition-all duration-200 hover:scale-[1.01] ${b.isNew?"bg-gradient-to-br from-blue-50/30 to-purple-50/20 dark:from-blue-900/20 dark:to-purple-900/10":""}`,"data-testid":`voicemail-${b.id}`,children:n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("p",{className:"font-medium dark:text-white",children:b.from}),b.isNew&&n.jsx(ge,{className:"bg-gradient-to-br from-blue-600 to-purple-600 text-white border-0 text-xs",children:"New"})]}),n.jsx("p",{className:"text-sm text-muted-foreground",children:Ie(new Date(b.timestamp),"MMM d, h:mm a")})]}),e===b.id?n.jsx(qOe,{url:b.recordingUrl,onEnded:()=>t(null)}):n.jsxs(_,{variant:"outline",size:"lg",onClick:()=>g(b),className:"w-full gap-2 transition-all duration-200 hover:scale-[1.02]","data-testid":`button-play-${b.id}`,children:[n.jsx(A0,{className:"h-5 w-5"}),"Play Voicemail (",Math.floor(b.duration/60),":",(b.duration%60).toString().padStart(2,"0"),")"]}),b.transcription&&n.jsxs("div",{className:"glass-card p-3 bg-gradient-to-br from-white/80 to-gray-50/30 dark:from-gray-800/80 dark:to-gray-900/30",children:[n.jsx("p",{className:"text-xs text-muted-foreground mb-1 font-medium",children:"Transcription:"}),n.jsxs("p",{className:"text-sm dark:text-gray-300 italic",children:['"',b.transcription,'"']})]}),n.jsxs("div",{className:"flex items-center gap-2 pt-2 flex-wrap",children:[n.jsxs(_,{variant:"outline",size:"sm",onClick:()=>y(b.from),disabled:x.isPending,className:"gap-2 transition-all duration-200 hover:scale-105","data-testid":`button-callback-${b.id}`,children:[n.jsx(bt,{className:"h-3.5 w-3.5"}),"Call Back"]}),n.jsxs(_,{variant:"outline",size:"sm",onClick:()=>v(b.from),className:"gap-2 transition-all duration-200 hover:scale-105","data-testid":`button-message-${b.id}`,children:[n.jsx(wa,{className:"h-3.5 w-3.5"}),"Message"]}),n.jsx(_,{variant:"ghost",size:"sm",onClick:()=>window.open(b.recordingUrl,"_blank"),className:"gap-2 transition-all duration-200 hover:scale-105","data-testid":`button-download-${b.id}`,children:n.jsx(Qc,{className:"h-3.5 w-3.5"})}),n.jsx(_,{variant:"ghost",size:"sm",onClick:()=>u.mutate(b.id),disabled:u.isPending,className:"gap-2 text-red-600 hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-950 ml-auto transition-all duration-200 hover:scale-105","data-testid":`button-delete-${b.id}`,children:n.jsx(Nr,{className:"h-3.5 w-3.5"})})]})]})},b.id))})})]})}function YOe({callId:e,onEnd:t}){const[r,s]=p.useState(!1),[a,i]=p.useState(!1),[o,l]=p.useState(!1),[c,d]=p.useState(0),{toast:u}=Ee(),f=cs(),{data:h}=be({queryKey:["/api/calls",e],refetchInterval:1e3}),m=h==null?void 0:h.call;p.useEffect(()=>{if((m==null?void 0:m.status)==="in-progress"){const N=setInterval(()=>{d(j=>j+1)},1e3);return()=>clearInterval(N)}},[m==null?void 0:m.status]);const g=je({mutationFn:async()=>await Ne("POST",`/api/calls/${e}/end`),onSuccess:()=>{u({title:"Call ended"}),f.invalidateQueries({queryKey:["/api/calls/recent"]}),t()}}),x=je({mutationFn:async N=>await Ne("POST",`/api/calls/${e}/mute`,{muted:N}),onSuccess:(N,j)=>{s(j)}}),y=je({mutationFn:async N=>await Ne("POST",`/api/calls/${e}/hold`,{held:N}),onSuccess:(N,j)=>{l(j)}}),v=N=>{const j=Math.floor(N/60),S=N%60;return`${j.toString().padStart(2,"0")}:${S.toString().padStart(2,"0")}`},b=(m==null?void 0:m.direction)==="outbound"?m.to:m.from,w=(m==null?void 0:m.status)||"connecting";return n.jsx("div",{className:"fixed inset-0 bg-gradient-to-br from-blue-600 to-purple-700 z-50 flex items-center justify-center",children:n.jsxs("div",{className:"text-center text-white px-8 max-w-md w-full",children:[n.jsx("div",{className:"mb-8",children:n.jsx("div",{className:"w-32 h-32 bg-white/20 rounded-full mx-auto flex items-center justify-center backdrop-blur-sm",children:n.jsx(Fn,{className:"h-16 w-16"})})}),n.jsx("h2",{className:"text-3xl font-light mb-2 tracking-wide",children:b}),n.jsx("p",{className:"text-xl text-white/80 mb-8",children:w==="in-progress"?v(c):w==="ringing"?"Ringing...":w==="connecting"?"Connecting...":w}),n.jsxs("div",{className:"grid grid-cols-3 gap-6 mb-12 max-w-xs mx-auto",children:[n.jsxs("div",{className:"flex flex-col items-center gap-2",children:[n.jsx(_,{variant:r?"default":"secondary",size:"lg",onClick:()=>x.mutate(!r),disabled:x.isPending,className:`rounded-full h-16 w-16 p-0 ${r?"bg-white text-blue-600 hover:bg-white/90":"bg-white/20 hover:bg-white/30 backdrop-blur-sm"}`,"data-testid":"button-mute",children:r?n.jsx(dQ,{className:"h-6 w-6"}):n.jsx(Sp,{className:"h-6 w-6"})}),n.jsx("span",{className:"text-sm",children:"Mute"})]}),n.jsxs("div",{className:"flex flex-col items-center gap-2",children:[n.jsx(_,{variant:a?"default":"secondary",size:"lg",onClick:()=>i(!a),className:`rounded-full h-16 w-16 p-0 ${a?"bg-white text-blue-600 hover:bg-white/90":"bg-white/20 hover:bg-white/30 backdrop-blur-sm"}`,"data-testid":"button-speaker",children:a?n.jsx(vQ,{className:"h-6 w-6"}):n.jsx(wge,{className:"h-6 w-6"})}),n.jsx("span",{className:"text-sm",children:"Speaker"})]}),n.jsxs("div",{className:"flex flex-col items-center gap-2",children:[n.jsx(_,{variant:o?"default":"secondary",size:"lg",onClick:()=>y.mutate(!o),disabled:y.isPending,className:`rounded-full h-16 w-16 p-0 ${o?"bg-white text-blue-600 hover:bg-white/90":"bg-white/20 hover:bg-white/30 backdrop-blur-sm"}`,"data-testid":"button-hold",children:o?n.jsx(A0,{className:"h-6 w-6"}):n.jsx(Cp,{className:"h-6 w-6"})}),n.jsx("span",{className:"text-sm",children:"Hold"})]})]}),n.jsx(_,{onClick:()=>g.mutate(),disabled:g.isPending,className:"rounded-full h-20 w-20 bg-red-600 hover:bg-red-700 p-0 shadow-2xl mx-auto","data-testid":"button-end-call",children:n.jsx(sT,{className:"h-8 w-8"})})]})})}function QOe(e){const r={scheduled:{variant:"default",label:"Scheduled",className:"bg-green-600"},pending:{variant:"default",label:"Pending Approval",className:"bg-yellow-600"},recent_contact:{variant:"secondary",label:"Recent"}}[e]||{variant:"secondary",label:e};return n.jsx(ge,{variant:r.variant,className:`text-xs ${r.className||""}`,children:r.label})}function KOe(e){if(!e)return"";const t=new Date(e);return Ny(t)?`Today at ${Ie(t,"h:mm a")}`:A4e(t)?`Tomorrow at ${Ie(t,"h:mm a")}`:Ie(t,"MMM d, h:mm a")}function JOe(){const[,e]=zt(),{toast:t}=Ee(),[r,s]=p.useState(""),{data:a,isLoading:i,isError:o,error:l,refetch:c}=be({queryKey:["/api/calls/customers"],refetchInterval:3e4,retry:3}),d=(a==null?void 0:a.customers)||[],u=p.useMemo(()=>{if(!r.trim())return d;const y=r.toLowerCase();return d.filter(v=>{var j,S;const b=v.name.toLowerCase().includes(y),w=(j=v.phone)==null?void 0:j.toLowerCase().includes(y),N=(S=v.preview)==null?void 0:S.toLowerCase().includes(y);return b||w||N})},[d,r]),f=y=>{e(`/messages?new=${encodeURIComponent(y)}`)},h=je({mutationFn:async y=>await Ne("POST","/api/calls/initiate",{to:y}),onSuccess:(y,v)=>{t({title:"Calling...",description:`Connecting to ${v}`})},onError:y=>{t({title:"Call failed",description:y.message||"Unable to initiate call",variant:"destructive"})}}),m=y=>{h.mutate(y)};if(i)return n.jsx(ia,{className:"h-full",children:n.jsx(jOe,{})});if(o)return n.jsx("div",{className:"flex items-center justify-center h-full",children:n.jsxs("div",{className:"text-center px-4",children:[n.jsx(Wt,{className:"h-16 w-16 mx-auto mb-4 text-destructive"}),n.jsx("h3",{className:"text-lg font-semibold mb-2 dark:text-white",children:"Unable to load customers"}),n.jsx("p",{className:"text-muted-foreground mb-4",children:l instanceof Error?l.message:"Connection error. Please try again."}),n.jsx(_,{variant:"outline",onClick:()=>c(),"data-testid":"button-retry-customers",children:"Retry"})]})});const g=d.length>0,x=g&&u.length===0&&r.trim();return g?n.jsxs("div",{className:"h-full flex flex-col",children:[n.jsxs("div",{className:"p-3 border-b dark:border-gray-800 bg-white dark:bg-gray-900",children:[n.jsxs("div",{className:"relative",children:[n.jsx(Ga,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),n.jsx(se,{type:"text",placeholder:"Search customers...",value:r,onChange:y=>s(y.target.value),className:"pl-9 pr-9 dark:bg-gray-800 dark:text-white","data-testid":"input-search-customers"}),r&&n.jsx(_,{variant:"ghost",size:"sm",onClick:()=>s(""),className:"absolute right-1 top-1/2 -translate-y-1/2 h-7 w-7 p-0","data-testid":"button-clear-search",children:n.jsx(Jr,{className:"h-4 w-4"})})]}),r&&n.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:[u.length," result",u.length!==1?"s":""," found"]})]}),x?n.jsx("div",{className:"flex items-center justify-center flex-1",children:n.jsxs("div",{className:"text-center px-4",children:[n.jsx(Ga,{className:"h-12 w-12 mx-auto mb-3 text-muted-foreground"}),n.jsx("p",{className:"font-medium dark:text-white mb-1",children:"No customers found"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Try a different search term"})]})}):n.jsx(ia,{className:"flex-1",children:n.jsx("div",{className:"divide-y dark:divide-gray-800",children:u.map(y=>{const v=y.type==="appointment",b=y.status==="pending";return n.jsx("div",{className:`p-4 hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors ${b?"bg-yellow-50/30 dark:bg-yellow-950/20":""}`,"data-testid":`customer-${y.id}`,children:n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx("div",{className:"flex-shrink-0 mt-1",children:v?n.jsx(Dt,{className:`h-5 w-5 ${b?"text-yellow-600 dark:text-yellow-400":"text-blue-600 dark:text-blue-400"}`}):n.jsx(wa,{className:"h-5 w-5 text-gray-600 dark:text-gray-400"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx("p",{className:"font-medium dark:text-white truncate",children:y.name}),QOe(y.status)]}),y.phone&&n.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:y.phone}),v&&y.scheduledDate&&n.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground mb-1",children:[n.jsx(Rt,{className:"h-3 w-3"}),n.jsx("span",{children:KOe(y.scheduledDate)})]}),y.preview&&n.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:y.preview}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:bu(new Date(y.lastContact),{addSuffix:!0})})]}),y.phone&&n.jsxs("div",{className:"flex flex-col gap-2",children:[n.jsx(_,{variant:"ghost",size:"sm",onClick:()=>m(y.phone),disabled:h.isPending,className:"h-9 w-9 p-0 text-green-600 hover:text-green-700 hover:bg-green-50 dark:hover:bg-green-950",title:"Call customer","data-testid":`button-call-customer-${y.id}`,children:n.jsx(bt,{className:"h-4 w-4"})}),n.jsx(_,{variant:"ghost",size:"sm",onClick:()=>f(y.phone),className:"h-9 w-9 p-0",title:"Send message","data-testid":`button-message-customer-${y.id}`,children:n.jsx(wa,{className:"h-4 w-4"})})]})]})},`${y.type}-${y.id}`)})})})]}):n.jsx("div",{className:"flex items-center justify-center h-full",children:n.jsxs("div",{className:"text-center px-4",children:[n.jsx(Wt,{className:"h-16 w-16 mx-auto mb-4 text-muted-foreground"}),n.jsx("h3",{className:"text-lg font-semibold mb-2 dark:text-white",children:"No active customers"}),n.jsx("p",{className:"text-muted-foreground",children:"Customers with recent messages or scheduled services will appear here"})]})})}function ZOe(){const[e,t]=p.useState("dialer"),{data:r}=be({queryKey:["/api/calls/active"],refetchInterval:2e3}),s=(r==null?void 0:r.calls)||[];return s.length>0?n.jsx(xn,{title:"Phone",showSearch:!1,children:n.jsx(YOe,{callId:s[0].id,onEnd:()=>{}})}):n.jsx(xn,{title:"Phone",showSearch:!1,children:n.jsxs(js,{value:e,onValueChange:t,className:"flex flex-col h-full",children:[n.jsx("div",{className:"bg-white dark:bg-gray-900 border-b dark:border-gray-800 px-4",children:n.jsxs(ds,{className:"grid w-full max-w-2xl mx-auto grid-cols-4 bg-gray-100 dark:bg-gray-800",children:[n.jsxs(dt,{value:"dialer",className:"gap-2 data-[state=active]:bg-white dark:data-[state=active]:bg-gray-700","data-testid":"tab-dialer",children:[n.jsx(Y0e,{className:"h-4 w-4"}),n.jsx("span",{className:"hidden sm:inline",children:"Dialer"})]}),n.jsxs(dt,{value:"recents",className:"gap-2 data-[state=active]:bg-white dark:data-[state=active]:bg-gray-700","data-testid":"tab-recents",children:[n.jsx(Kc,{className:"h-4 w-4"}),n.jsx("span",{className:"hidden sm:inline",children:"Recents"})]}),n.jsxs(dt,{value:"customers",className:"gap-2 data-[state=active]:bg-white dark:data-[state=active]:bg-gray-700","data-testid":"tab-customers",children:[n.jsx(br,{className:"h-4 w-4"}),n.jsx("span",{className:"hidden sm:inline",children:"Customers"})]}),n.jsxs(dt,{value:"voicemail",className:"gap-2 data-[state=active]:bg-white dark:data-[state=active]:bg-gray-700","data-testid":"tab-voicemail",children:[n.jsx(Yd,{className:"h-4 w-4"}),n.jsx("span",{className:"hidden sm:inline",children:"Voicemail"})]})]})}),n.jsxs("div",{className:"flex-1 min-h-0",children:[n.jsx(pt,{value:"dialer",className:"h-full m-0",children:n.jsx(gOe,{})}),n.jsx(pt,{value:"recents",className:"h-full m-0",children:n.jsx(MOe,{})}),n.jsx(pt,{value:"customers",className:"h-full m-0",children:n.jsx(JOe,{})}),n.jsx(pt,{value:"voicemail",className:"h-full m-0",children:n.jsx(GOe,{})})]})]})})}const XOe=fe.object({name:fe.string().min(1,"Campaign name is required"),subject:fe.string().min(1,"Subject is required"),content:fe.string().min(1,"Content is required"),targetAudience:fe.enum(["all","vip","loyalty"]),scheduledDate:fe.string().optional()}),eRe=fe.object({name:fe.string().min(1,"Campaign name is required"),message:fe.string().min(1,"Message is required").max(300,"Message too long (300 chars max)"),targetAudience:fe.enum(["all","vip","loyalty"]),scheduledDate:fe.string().optional()});function Pie(){const[e,t]=p.useState("email");return Ee(),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold",children:"Campaign Management"}),n.jsx("p",{className:"text-muted-foreground",children:"Create and manage email and SMS campaigns"})]}),n.jsxs(js,{value:e,onValueChange:t,children:[n.jsxs(ds,{children:[n.jsxs(dt,{value:"email","data-testid":"tab-email-campaigns",children:[n.jsx(Cr,{className:"h-4 w-4 mr-2"}),"Email Campaigns"]}),n.jsxs(dt,{value:"sms","data-testid":"tab-sms-campaigns",children:[n.jsx(on,{className:"h-4 w-4 mr-2"}),"SMS Campaigns"]})]}),n.jsx(pt,{value:"email",children:n.jsx(rRe,{})}),n.jsx(pt,{value:"sms",children:n.jsx(sRe,{})})]}),n.jsx(tRe,{})]})}function tRe(){const[e,t]=p.useState(!0);return n.jsx(O,{className:"border-blue-200 dark:border-blue-800",children:n.jsxs(b1,{open:e,onOpenChange:t,children:[n.jsx(ee,{className:"cursor-pointer",onClick:()=>t(!e),children:n.jsx(w1,{className:"w-full",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(ln,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"}),n.jsxs("div",{className:"text-left",children:[n.jsx(te,{className:"text-xl",children:"Special Campaigns"}),n.jsx(ke,{children:"Advanced loyalty bonus campaigns and promotions"})]})]}),e?n.jsx(T0,{className:"h-5 w-5"}):n.jsx(Ui,{className:"h-5 w-5"})]})})}),n.jsx(j1,{children:n.jsx(H,{className:"space-y-4",children:n.jsx(nRe,{})})})]})})}function nRe(){var m,g;const{toast:e}=Ee(),[t,r]=p.useState(null),[s,a]=p.useState(!1),[i,o]=p.useState(!1),{data:l,isLoading:c}=be({queryKey:["/api/admin/campaigns/welcome-back"]}),d=l==null?void 0:l.config;je({mutationFn:async x=>(await Ne("PUT","/api/admin/campaigns/welcome-back",x)).json(),onSuccess:()=>{ze.invalidateQueries({queryKey:["/api/admin/campaigns/welcome-back"]}),e({title:"Campaign settings saved successfully"})},onError:x=>{e({title:"Error saving settings",description:x.message,variant:"destructive"})}});const u=je({mutationFn:async({audience:x,previewOnly:y,includeNonLoyalty:v})=>(await Ne("POST","/api/admin/campaigns/welcome-back/send",{audience:x,previewOnly:y,includeNonLoyalty:v})).json(),onSuccess:(x,y)=>{var v;if(y.previewOnly){const b=x.result;e({title:`Preview: ${y.audience.toUpperCase()} Campaign`,description:`Would send to ${b.total} customers. Sample message: ${(v=b.sampleMessage)==null?void 0:v.slice(0,100)}...`}),r(null)}else e({title:"Campaign sent successfully",description:`Sent to ${x.result.success} customers. ${x.result.failed} failed.`});a(!1)},onError:x=>{e({title:"Error sending campaign",description:x.message,variant:"destructive"}),a(!1),r(null)}}),f=x=>{r(x),u.mutate({audience:x,previewOnly:!0,includeNonLoyalty:i})},h=x=>{const y=i?"ALL customers":"loyalty opt-in customers only";confirm(`Are you sure you want to send the ${x.toUpperCase()} campaign to ${y}? This will award points and send messages.`)&&(a(!0),u.mutate({audience:x,previewOnly:!1,includeNonLoyalty:i}))};return c?n.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Loading campaign settings..."}):n.jsxs("div",{className:"space-y-6",id:"welcome-back-campaign",children:[n.jsxs("div",{className:"flex items-start gap-3 p-4 bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-950/20 dark:to-purple-950/20 rounded-lg border border-blue-200 dark:border-blue-800",children:[n.jsx(jr,{className:"h-6 w-6 text-blue-600 dark:text-blue-400 mt-0.5"}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-lg",children:"Welcome Back Campaign"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Reward your VIP and regular customers with bonus loyalty points to bring them back!"}),n.jsxs(ge,{className:"mt-2",variant:"secondary",children:[n.jsx(ln,{className:"h-3 w-3 mr-1"}),"New System Launch"]})]})]}),n.jsx(O,{className:"border-amber-200 dark:border-amber-800 bg-amber-50/50 dark:bg-amber-950/20",children:n.jsx(H,{className:"pt-4",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(as,{id:"include-non-loyalty",checked:i,onCheckedChange:x=>o(x===!0),"data-testid":"checkbox-include-non-loyalty"}),n.jsxs("div",{className:"space-y-1",children:[n.jsx(U,{htmlFor:"include-non-loyalty",className:"text-sm font-medium cursor-pointer",children:"Send to ALL customers (not just loyalty program members)"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"When checked, this campaign will be sent to all VIP or Regular customers, including those who haven't opted into the loyalty program yet. Bonus points will still be awarded to everyone who receives the campaign."})]})]})})}),n.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[n.jsxs(O,{className:"border-purple-200 dark:border-purple-800",children:[n.jsxs(ee,{children:[n.jsxs(te,{className:"flex items-center gap-2",children:[n.jsx(br,{className:"h-5 w-5 text-purple-600"}),"VIP Campaign"]}),n.jsxs(ke,{children:[(d==null?void 0:d.vipPointsBonus)||500," Bonus Points"]})]}),n.jsxs(H,{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx(U,{className:"text-xs text-muted-foreground",children:"SMS Template Preview"}),n.jsxs("div",{className:"mt-1 p-3 bg-gray-50 dark:bg-gray-900 rounded text-sm",children:[(m=d==null?void 0:d.smsTemplateVip)==null?void 0:m.slice(0,150),"..."]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(_,{size:"sm",variant:"outline",onClick:()=>f("vip"),disabled:t==="vip","data-testid":"button-preview-vip",children:t==="vip"?"Previewing...":"Preview"}),n.jsx(_,{size:"sm",onClick:()=>h("vip"),disabled:s,"data-testid":"button-send-vip",children:s?"Sending...":"Send VIP Campaign"})]})]})]}),n.jsxs(O,{className:"border-blue-200 dark:border-blue-800",children:[n.jsxs(ee,{children:[n.jsxs(te,{className:"flex items-center gap-2",children:[n.jsx(br,{className:"h-5 w-5 text-blue-600"}),"Regular Campaign"]}),n.jsxs(ke,{children:[(d==null?void 0:d.regularPointsBonus)||100," Bonus Points"]})]}),n.jsxs(H,{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx(U,{className:"text-xs text-muted-foreground",children:"SMS Template Preview"}),n.jsxs("div",{className:"mt-1 p-3 bg-gray-50 dark:bg-gray-900 rounded text-sm",children:[(g=d==null?void 0:d.smsTemplateRegular)==null?void 0:g.slice(0,150),"..."]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(_,{size:"sm",variant:"outline",onClick:()=>f("regular"),disabled:t==="regular","data-testid":"button-preview-regular",children:t==="regular"?"Previewing...":"Preview"}),n.jsx(_,{size:"sm",onClick:()=>h("regular"),disabled:s,"data-testid":"button-send-regular",children:s?"Sending...":"Send Regular Campaign"})]})]})]})]}),n.jsx(O,{children:n.jsx(H,{className:"p-4",children:n.jsxs("p",{className:"text-sm text-muted-foreground",children:["Need to customize points, templates, or URLs?"," ",n.jsx(_,{variant:"link",className:"p-0 h-auto",onClick:()=>{e({title:"Campaign configuration editor coming soon!"})},children:"Edit Campaign Settings "})]})})})]})}function rRe(){const{toast:e}=Ee(),[t,r]=p.useState(!1),{data:s,isLoading:a}=be({queryKey:["/api/campaigns/email"]}),i=je({mutationFn:async u=>Ne("POST","/api/campaigns/email",u),onSuccess:()=>{ze.invalidateQueries({queryKey:["/api/campaigns/email"]}),r(!1),e({title:"Campaign created successfully"})},onError:u=>{e({title:"Error creating campaign",description:u.message,variant:"destructive"})}}),o=je({mutationFn:async u=>Ne("POST",`/api/campaigns/email/${u}/send`),onSuccess:()=>{ze.invalidateQueries({queryKey:["/api/campaigns/email"]}),e({title:"Campaign is being sent"})}}),l=fi({resolver:hi(XOe),defaultValues:{name:"",subject:"",content:"",targetAudience:"all"}}),c=u=>{i.mutate(u)};if(a)return n.jsx("div",{className:"text-center py-8",children:"Loading campaigns..."});const d=(s==null?void 0:s.campaigns)||[];return n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{className:"text-sm text-muted-foreground",children:[d.length," campaign(s)"]}),n.jsxs(At,{open:t,onOpenChange:r,children:[n.jsx(pl,{asChild:!0,children:n.jsxs(_,{"data-testid":"button-create-email-campaign",children:[n.jsx(Un,{className:"h-4 w-4 mr-2"}),"Create Email Campaign"]})}),n.jsxs(_t,{className:"max-w-2xl",children:[n.jsxs($t,{children:[n.jsx(Et,{children:"Create Email Campaign"}),n.jsx(an,{children:"Send personalized emails to your customers"})]}),n.jsx(mi,{...l,children:n.jsxs("form",{onSubmit:l.handleSubmit(c),className:"space-y-4",children:[n.jsx(Ye,{control:l.control,name:"name",render:({field:u})=>n.jsxs(We,{children:[n.jsx(qe,{children:"Campaign Name"}),n.jsx(Qe,{children:n.jsx(se,{...u,placeholder:"Monthly Newsletter","data-testid":"input-campaign-name"})}),n.jsx(Ze,{})]})}),n.jsx(Ye,{control:l.control,name:"subject",render:({field:u})=>n.jsxs(We,{children:[n.jsx(qe,{children:"Email Subject"}),n.jsx(Qe,{children:n.jsx(se,{...u,placeholder:"Special Offer Inside!","data-testid":"input-email-subject"})}),n.jsx(Ze,{})]})}),n.jsx(Ye,{control:l.control,name:"content",render:({field:u})=>n.jsxs(We,{children:[n.jsx(qe,{children:"Email Content"}),n.jsx(Qe,{children:n.jsx(un,{...u,rows:6,placeholder:"Hi {name}, ...","data-testid":"textarea-email-content"})}),n.jsxs(cn,{children:["Use ","{name}"," to personalize with customer name"]}),n.jsx(Ze,{})]})}),n.jsx(Ye,{control:l.control,name:"targetAudience",render:({field:u})=>n.jsxs(We,{children:[n.jsx(qe,{children:"Target Audience"}),n.jsxs(Pt,{onValueChange:u.onChange,defaultValue:u.value,children:[n.jsx(Qe,{children:n.jsx(kt,{"data-testid":"select-target-audience",children:n.jsx(Tt,{})})}),n.jsxs(Mt,{children:[n.jsx(ve,{value:"all",children:"All Customers"}),n.jsx(ve,{value:"vip",children:"VIP Customers Only"}),n.jsx(ve,{value:"loyalty",children:"Loyalty Members"})]})]}),n.jsx(Ze,{})]})}),n.jsx(Ye,{control:l.control,name:"scheduledDate",render:({field:u})=>n.jsxs(We,{children:[n.jsx(qe,{children:"Schedule (Optional)"}),n.jsx(Qe,{children:n.jsx(se,{...u,type:"datetime-local","data-testid":"input-scheduled-date"})}),n.jsx(cn,{children:"Leave blank to send immediately"}),n.jsx(Ze,{})]})}),n.jsxs("div",{className:"flex justify-end gap-2",children:[n.jsx(_,{type:"button",variant:"outline",onClick:()=>r(!1),children:"Cancel"}),n.jsx(_,{type:"submit",disabled:i.isPending,"data-testid":"button-submit-campaign",children:i.isPending?"Creating...":"Create Campaign"})]})]})})]})]})]}),d.length===0?n.jsx(O,{children:n.jsxs(H,{className:"py-12 text-center",children:[n.jsx(Cr,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),n.jsx("p",{className:"text-muted-foreground",children:"No email campaigns yet"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Create your first campaign to get started"})]})}):n.jsx("div",{className:"grid gap-4",children:d.map(u=>n.jsxs(O,{children:[n.jsx(ee,{children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx(te,{className:"text-lg",children:u.name}),n.jsx(ke,{children:u.subject})]}),n.jsx(Tie,{status:u.status})]})}),n.jsxs(H,{children:[n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-muted-foreground",children:"Recipients"}),n.jsxs("div",{className:"font-medium flex items-center gap-1",children:[n.jsx(br,{className:"h-3 w-3"}),u.recipient_count||0]})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-muted-foreground",children:"Sent"}),n.jsxs("div",{className:"font-medium flex items-center gap-1",children:[n.jsx(Vi,{className:"h-3 w-3"}),u.sent_count||0]})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-muted-foreground",children:"Target"}),n.jsx("div",{className:"font-medium capitalize",children:u.target_audience})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-muted-foreground",children:"Created"}),n.jsx("div",{className:"font-medium",children:u.created_at?bu(new Date(u.created_at),{addSuffix:!0}):"N/A"})]})]}),u.status==="draft"&&n.jsx("div",{className:"mt-4",children:n.jsxs(_,{size:"sm",onClick:()=>o.mutate(u.id),disabled:o.isPending,"data-testid":`button-send-campaign-${u.id}`,children:[n.jsx(Vi,{className:"h-3 w-3 mr-1"}),"Send Now"]})})]})]},u.id))})]})}function sRe(){var f;const{toast:e}=Ee(),[t,r]=p.useState(!1),{data:s,isLoading:a}=be({queryKey:["/api/campaigns/sms"]}),i=je({mutationFn:async h=>Ne("POST","/api/campaigns/sms",h),onSuccess:()=>{ze.invalidateQueries({queryKey:["/api/campaigns/sms"]}),r(!1),e({title:"SMS campaign created successfully"})},onError:h=>{e({title:"Error creating campaign",description:h.message,variant:"destructive"})}}),o=je({mutationFn:async h=>Ne("POST",`/api/campaigns/sms/${h}/send`),onSuccess:()=>{ze.invalidateQueries({queryKey:["/api/campaigns/sms"]}),e({title:"SMS campaign is being sent"})}}),l=fi({resolver:hi(eRe),defaultValues:{name:"",message:"",targetAudience:"all"}}),c=h=>{i.mutate(h)},d=((f=l.watch("message"))==null?void 0:f.length)||0;if(a)return n.jsx("div",{className:"text-center py-8",children:"Loading SMS campaigns..."});const u=(s==null?void 0:s.campaigns)||[];return n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{className:"text-sm text-muted-foreground",children:[u.length," SMS campaign(s)"]}),n.jsxs(At,{open:t,onOpenChange:r,children:[n.jsx(pl,{asChild:!0,children:n.jsxs(_,{"data-testid":"button-create-sms-campaign",children:[n.jsx(Un,{className:"h-4 w-4 mr-2"}),"Create SMS Campaign"]})}),n.jsxs(_t,{className:"max-w-2xl",children:[n.jsxs($t,{children:[n.jsx(Et,{children:"Create SMS Campaign"}),n.jsx(an,{children:"Send bulk SMS with TCPA quiet hours protection"})]}),n.jsx(mi,{...l,children:n.jsxs("form",{onSubmit:l.handleSubmit(c),className:"space-y-4",children:[n.jsx(Ye,{control:l.control,name:"name",render:({field:h})=>n.jsxs(We,{children:[n.jsx(qe,{children:"Campaign Name"}),n.jsx(Qe,{children:n.jsx(se,{...h,placeholder:"Weekend Special","data-testid":"input-sms-campaign-name"})}),n.jsx(Ze,{})]})}),n.jsx(Ye,{control:l.control,name:"message",render:({field:h})=>n.jsxs(We,{children:[n.jsx(qe,{children:"SMS Message"}),n.jsx(Qe,{children:n.jsx(un,{...h,rows:4,placeholder:"Hi {name}, ...","data-testid":"textarea-sms-message"})}),n.jsxs(cn,{children:[d,"/300 characters  Use ","{name}"," to personalize"]}),n.jsx(Ze,{})]})}),n.jsx(Ye,{control:l.control,name:"targetAudience",render:({field:h})=>n.jsxs(We,{children:[n.jsx(qe,{children:"Target Audience"}),n.jsxs(Pt,{onValueChange:h.onChange,defaultValue:h.value,children:[n.jsx(Qe,{children:n.jsx(kt,{"data-testid":"select-sms-target-audience",children:n.jsx(Tt,{})})}),n.jsxs(Mt,{children:[n.jsx(ve,{value:"all",children:"All Customers (SMS Consent)"}),n.jsx(ve,{value:"vip",children:"VIP Customers Only"}),n.jsx(ve,{value:"loyalty",children:"Loyalty Members"})]})]}),n.jsx(Ze,{})]})}),n.jsxs("div",{className:"flex justify-end gap-2",children:[n.jsx(_,{type:"button",variant:"outline",onClick:()=>r(!1),children:"Cancel"}),n.jsx(_,{type:"submit",disabled:i.isPending,"data-testid":"button-submit-sms-campaign",children:i.isPending?"Creating...":"Create Campaign"})]})]})})]})]})]}),u.length===0?n.jsx(O,{children:n.jsxs(H,{className:"py-12 text-center",children:[n.jsx(on,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),n.jsx("p",{className:"text-muted-foreground",children:"No SMS campaigns yet"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Create your first campaign to get started"})]})}):n.jsx("div",{className:"grid gap-4",children:u.map(h=>n.jsxs(O,{children:[n.jsx(ee,{children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsx(te,{className:"text-lg",children:h.name}),n.jsx(Tie,{status:h.status})]})}),n.jsxs(H,{children:[n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-muted-foreground",children:"Recipients"}),n.jsx("div",{className:"font-medium",children:h.recipient_count||0})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-muted-foreground",children:"Sent"}),n.jsx("div",{className:"font-medium",children:h.sent_count||0})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-muted-foreground",children:"Target"}),n.jsx("div",{className:"font-medium capitalize",children:h.target_audience})]}),n.jsxs("div",{children:[n.jsx("div",{className:"text-muted-foreground",children:"Created"}),n.jsx("div",{className:"font-medium",children:h.created_at?bu(new Date(h.created_at),{addSuffix:!0}):"N/A"})]})]}),h.status==="draft"&&n.jsx("div",{className:"mt-4",children:n.jsxs(_,{size:"sm",onClick:()=>o.mutate(h.id),disabled:o.isPending,"data-testid":`button-send-sms-campaign-${h.id}`,children:[n.jsx(Vi,{className:"h-3 w-3 mr-1"}),"Send Now"]})})]})]},h.id))})]})}function Tie({status:e}){const r={draft:{label:"Draft",variant:"outline"},scheduled:{label:"Scheduled",variant:"secondary"},sending:{label:"Sending",variant:"default"},sent:{label:"Sent",variant:"default"},failed:{label:"Failed",variant:"destructive"}}[e]||{label:e,variant:"outline"};return n.jsx(ge,{variant:r.variant,children:r.label})}function Aie(){var P,T;const{toast:e}=Ee(),[t,r]=p.useState(null),[s,a]=p.useState(null),[i,o]=p.useState(null),[l,c]=p.useState({}),[d,u]=p.useState({body:"",changeDescription:""}),f=p.useRef(null),{data:h,isLoading:m}=be({queryKey:["/api/sms-templates"]}),g=(h==null?void 0:h.templates)||[],x=g.reduce((I,L)=>{const R=I.find(G=>G.category===L.category);return R?R.templates.push(L):I.push({category:L.category,templates:[L]}),I},[]),{data:y}=be({queryKey:["/api/sms-templates",i==null?void 0:i.id,"versions"],enabled:!!i}),v=(y==null?void 0:y.versions)||[],b=je({mutationFn:async({key:I,payload:L})=>await Ne("POST",`/api/sms-templates/${I}/preview`,{payload:L}),onError:I=>{e({title:"Preview failed",description:I.message||"Unable to generate preview",variant:"destructive"})}}),w=je({mutationFn:async({id:I,body:L,changeDescription:R})=>await Ne("PUT",`/api/sms-templates/${I}`,{body:L,changeDescription:R}),onSuccess:()=>{e({title:"Template updated successfully",description:"A new version has been saved."}),ze.invalidateQueries({queryKey:["/api/sms-templates"]}),r(null),u({body:"",changeDescription:""})},onError:I=>{e({title:"Failed to update template",description:I.message||"Please try again",variant:"destructive"})}}),N=I=>{r(I),u({body:I.body,changeDescription:""})},j=()=>{t&&w.mutate({id:t.id,body:d.body,changeDescription:d.changeDescription})},S=I=>{if(!f.current)return;const L=f.current,R=L.selectionStart||0,G=d.body.slice(0,R)+`{${I}}`+d.body.slice(R);u({...d,body:G}),setTimeout(()=>{const $=R+I.length+2;L.setSelectionRange($,$),L.focus()},0)},C=I=>{a(I),c(I.defaultPayload||{})},k=()=>{if(!s)return;const L=(s.variables||[]).filter(R=>R.required).filter(R=>!l[R.name]||l[R.name].trim()==="");if(L.length>0){e({title:"Missing required fields",description:`Please provide values for: ${L.map(R=>R.name).join(", ")}`,variant:"destructive"});return}b.mutate({key:s.templateKey,payload:l})},M=I=>({booking:"",technician:"",payment:"",referrals:""})[I]||"",A=I=>I.charAt(0).toUpperCase()+I.slice(1);return m?n.jsx("div",{className:"flex items-center justify-center py-12",children:n.jsx("div",{className:"text-muted-foreground",children:"Loading templates..."})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{children:[n.jsxs("h2",{className:"text-2xl font-semibold flex items-center gap-2",children:[n.jsx(wa,{className:"h-6 w-6"}),"SMS Templates"]}),n.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Edit automatic SMS messages sent to customers. Changes are versioned for audit and rollback."})]}),n.jsxs(ge,{variant:"outline",className:"text-xs",children:[g.length," templates"]})]}),n.jsx("div",{className:"space-y-4",children:x.map(I=>n.jsx(aRe,{category:I.category,templates:I.templates,icon:M(I.category),label:A(I.category),onEdit:N,onPreview:C,onViewVersions:L=>o(L)},I.category))}),n.jsx(At,{open:!!t,onOpenChange:I=>!I&&r(null),children:n.jsxs(_t,{className:"max-w-2xl",children:[n.jsxs($t,{children:[n.jsxs(Et,{children:["Edit Template: ",t==null?void 0:t.name]}),n.jsx(an,{children:t==null?void 0:t.description})]}),t&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(U,{htmlFor:"template-body",children:"Message Template"}),n.jsx(un,{ref:f,id:"template-body","data-testid":"input-template-body",value:d.body,onChange:I=>u({...d,body:I.target.value}),rows:6,className:"font-mono text-sm",placeholder:"Enter template message..."}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:[d.body.length," characters"]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(U,{className:"text-sm font-medium",children:"Available Variables"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:t.variables.map(I=>n.jsxs(ge,{variant:I.required?"default":"secondary",className:"cursor-pointer",onClick:()=>S(I.name),"data-testid":`badge-variable-${I.name}`,children:[I.name,I.required&&"*"]},I.name))}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Click a variable to insert it at cursor position. * = required"})]}),n.jsx(Ot,{}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(U,{htmlFor:"change-description",children:"Change Description (Optional)"}),n.jsx(se,{id:"change-description","data-testid":"input-change-description",value:d.changeDescription,onChange:I=>u({...d,changeDescription:I.target.value}),placeholder:"What did you change in this version?"})]}),n.jsxs(Sn,{children:[n.jsx(_,{variant:"outline",onClick:()=>r(null),"data-testid":"button-cancel-edit",children:"Cancel"}),n.jsxs(_,{onClick:j,disabled:w.isPending||!d.body.trim(),"data-testid":"button-save-template",children:[n.jsx(fr,{className:"h-4 w-4 mr-2"}),w.isPending?"Saving...":"Save Changes"]})]})]})]})}),n.jsx(At,{open:!!s,onOpenChange:I=>{I||(b.reset(),a(null))},children:n.jsxs(_t,{className:"max-w-xl",children:[n.jsxs($t,{children:[n.jsxs(Et,{children:["Preview: ",s==null?void 0:s.name]}),n.jsx(an,{children:"See how the message will look with sample data"})]}),s&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(U,{className:"text-sm font-medium",children:"Sample Data"}),s.variables.map(I=>n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs(U,{htmlFor:`preview-${I.name}`,className:"w-32 text-sm",children:[I.name,I.required&&n.jsx("span",{className:"text-destructive ml-1",children:"*"})]}),n.jsx(se,{id:`preview-${I.name}`,"data-testid":`input-preview-${I.name}`,value:l[I.name]||"",onChange:L=>c({...l,[I.name]:L.target.value}),placeholder:I.sample})]},I.name))]}),n.jsxs(_,{onClick:k,disabled:b.isPending,variant:"secondary",size:"sm",className:"w-full","data-testid":"button-update-preview",children:[n.jsx(Kl,{className:"h-4 w-4 mr-2"}),"Update Preview"]}),n.jsx(Ot,{}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(U,{className:"text-sm font-medium",children:"Preview Output"}),n.jsx(O,{children:n.jsx(H,{className:"pt-6",children:(P=b.data)!=null&&P.renderedMessage?n.jsxs("div",{className:"bg-blue-50 dark:bg-blue-950 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:[n.jsx("p",{className:"text-sm whitespace-pre-wrap",children:b.data.renderedMessage}),n.jsxs("div",{className:"mt-2 flex items-center gap-2 text-xs text-muted-foreground",children:[n.jsx(nn,{className:"h-3 w-3 text-green-600"}),b.data.renderedMessage.length," characters"]})]}):n.jsx("div",{className:"text-sm text-muted-foreground italic",children:'Click "Update Preview" to see the rendered message'})})})]}),b.error&&n.jsxs("div",{className:"flex items-start gap-2 text-sm text-destructive bg-destructive/10 p-3 rounded-md",children:[n.jsx(Wt,{className:"h-4 w-4 mt-0.5"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:"Preview Error"}),n.jsx("p",{className:"text-xs",children:((T=b.error)==null?void 0:T.message)||"Failed to generate preview"})]})]})]})]})}),n.jsx(At,{open:!!i,onOpenChange:I=>!I&&o(null),children:n.jsxs(_t,{className:"max-w-2xl",children:[n.jsxs($t,{children:[n.jsxs(Et,{children:["Version History: ",i==null?void 0:i.name]}),n.jsx(an,{children:"View all changes made to this template"})]}),n.jsx(ia,{className:"h-[400px] pr-4",children:n.jsx("div",{className:"space-y-3",children:v.length===0?n.jsx("div",{className:"text-sm text-muted-foreground text-center py-8",children:"No version history available"}):v.map(I=>n.jsxs(O,{children:[n.jsx(ee,{className:"pb-3",children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{children:[n.jsxs(te,{className:"text-sm",children:["Version ",I.version]}),n.jsx(ke,{className:"text-xs",children:new Date(I.createdAt).toLocaleString()})]}),I.changeDescription&&n.jsx(ge,{variant:"outline",className:"text-xs",children:I.changeDescription})]})}),n.jsx(H,{children:n.jsx("div",{className:"bg-muted/50 rounded-md p-3",children:n.jsx("p",{className:"text-xs font-mono whitespace-pre-wrap",children:I.body})})})]},I.id))})})]})})]})}function aRe({category:e,templates:t,icon:r,label:s,onEdit:a,onPreview:i,onViewVersions:o}){const[l,c]=p.useState(!0);return n.jsx(O,{children:n.jsxs(b1,{open:l,onOpenChange:c,children:[n.jsx(ee,{className:"pb-3",children:n.jsx(w1,{className:"w-full","data-testid":`collapsible-trigger-${e}`,children:n.jsx("div",{className:"flex items-center justify-between",children:n.jsxs("div",{className:"flex items-center gap-2",children:[l?n.jsx(Ui,{className:"h-4 w-4 text-muted-foreground"}):n.jsx(vl,{className:"h-4 w-4 text-muted-foreground"}),n.jsx("span",{className:"text-2xl",children:r}),n.jsxs("div",{className:"text-left",children:[n.jsx("h3",{className:"text-lg font-semibold",children:s}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:[t.length," templates"]})]})]})})})}),n.jsx(j1,{children:n.jsx(H,{className:"space-y-3",children:t.map(d=>n.jsxs(O,{className:"border-l-4 border-l-primary/20","data-testid":`card-template-${d.templateKey}`,children:[n.jsx(ee,{className:"pb-3",children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs(te,{className:"text-sm flex items-center gap-2","data-testid":`text-template-name-${d.templateKey}`,children:[d.name,!d.enabled&&n.jsx(ge,{variant:"secondary",className:"text-xs",children:"Disabled"})]}),n.jsx(ke,{className:"text-xs mt-1",children:d.description})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(_,{size:"sm",variant:"ghost",onClick:()=>i(d),"data-testid":`button-preview-${d.templateKey}`,children:n.jsx(Kl,{className:"h-4 w-4"})}),n.jsx(_,{size:"sm",variant:"ghost",onClick:()=>a(d),"data-testid":`button-edit-${d.templateKey}`,children:n.jsx(kp,{className:"h-4 w-4"})}),n.jsx(_,{size:"sm",variant:"ghost",onClick:()=>o(d),"data-testid":`button-versions-${d.templateKey}`,children:n.jsx(Kc,{className:"h-4 w-4"})})]})]})}),n.jsx(H,{children:n.jsxs("div",{className:"space-y-2",children:[n.jsx("div",{className:"bg-muted/50 rounded-md p-3",children:n.jsx("p",{className:"text-xs font-mono whitespace-pre-wrap",children:d.body})}),d.variables.length>0&&n.jsx("div",{className:"flex flex-wrap gap-1",children:d.variables.map(u=>n.jsx(ge,{variant:"outline",className:"text-xs",children:u.name},u.name))})]})})]},d.id))})})]})})}function iRe(){const{toast:e}=Ee(),{data:t,isLoading:r}=be({queryKey:["/api/notification-preferences/me"]}),{data:s,isLoading:a}=be({queryKey:["/api/business-settings"]}),i=p.useMemo(()=>{var h,m,g;return{enabled:((h=s==null?void 0:s.data)==null?void 0:h.smsFallbackEnabled)||!1,phone:((m=s==null?void 0:s.data)==null?void 0:m.smsFallbackPhone)||"",autoReply:((g=s==null?void 0:s.data)==null?void 0:g.smsFallbackAutoReply)||"Thanks for your message! Our automated system is currently offline. You'll receive a personal response shortly."}},[s==null?void 0:s.data]),[o,l]=p.useState(i);p.useEffect(()=>{l(i)},[i]);const c=je({mutationFn:async h=>Ne("/api/notification-preferences/me",{method:"PUT",body:JSON.stringify(h)}),onSuccess:()=>{ze.invalidateQueries({queryKey:["/api/notification-preferences/me"]}),e({title:"Preferences updated",description:"Notification settings saved successfully"})}}),d=je({mutationFn:async h=>Ne("/api/business-settings",{method:"PUT",body:JSON.stringify({...s==null?void 0:s.data,smsFallbackEnabled:h.enabled,smsFallbackPhone:h.phone,smsFallbackAutoReply:h.autoReply})}),onSuccess:()=>{ze.invalidateQueries({queryKey:["/api/business-settings"]}),e({title:"SMS Fallback updated",description:"Emergency fallback settings saved successfully"})}}),u=(h,m)=>{c.mutate({...t,[h]:m})},f=()=>{d.mutate(o)};return r||a?n.jsx("div",{children:"Loading..."}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs(O,{children:[n.jsxs(ee,{children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(on,{className:"h-5 w-5"}),n.jsx(te,{children:"Voicemail Notifications"})]}),n.jsx(ke,{children:"Get notified when customers leave voicemails"})]}),n.jsxs(H,{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(U,{htmlFor:"voicemail-sms",children:"SMS Text Message"}),n.jsx(Vt,{id:"voicemail-sms","data-testid":"toggle-voicemail-sms",checked:(t==null?void 0:t.voicemailSms)??!0,onCheckedChange:h=>u("voicemailSms",h)})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(U,{htmlFor:"voicemail-push",children:"Push Notification"}),n.jsx(Vt,{id:"voicemail-push","data-testid":"toggle-voicemail-push",checked:(t==null?void 0:t.voicemailPush)??!0,onCheckedChange:h=>u("voicemailPush",h)})]})]})]}),n.jsxs(O,{children:[n.jsxs(ee,{children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ar,{className:"h-5 w-5"}),n.jsx(te,{children:"Cash Payment Notifications"})]}),n.jsx(ke,{children:"Alerts when technicians collect cash/check payments"})]}),n.jsxs(H,{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(U,{htmlFor:"cash-sms",children:"SMS Text Message"}),n.jsx(Vt,{id:"cash-sms","data-testid":"toggle-cash-sms",checked:(t==null?void 0:t.cashPaymentSms)??!0,onCheckedChange:h=>u("cashPaymentSms",h)})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(U,{htmlFor:"cash-push",children:"Push Notification"}),n.jsx(Vt,{id:"cash-push","data-testid":"toggle-cash-push",checked:(t==null?void 0:t.cashPaymentPush)??!0,onCheckedChange:h=>u("cashPaymentPush",h)})]})]})]}),n.jsxs(O,{children:[n.jsxs(ee,{children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ya,{className:"h-5 w-5"}),n.jsx(te,{children:"System Error Notifications"})]}),n.jsx(ke,{children:"Critical system alerts and errors"})]}),n.jsxs(H,{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(U,{htmlFor:"error-sms",children:"SMS Text Message"}),n.jsx(Vt,{id:"error-sms","data-testid":"toggle-error-sms",checked:(t==null?void 0:t.systemErrorSms)??!0,onCheckedChange:h=>u("systemErrorSms",h)})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(U,{htmlFor:"error-push",children:"Push Notification"}),n.jsx(Vt,{id:"error-push","data-testid":"toggle-error-push",checked:(t==null?void 0:t.systemErrorPush)??!0,onCheckedChange:h=>u("systemErrorPush",h)})]})]})]}),n.jsxs(O,{children:[n.jsx(ee,{children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Yc,{className:"h-5 w-5"}),n.jsx(te,{children:"Other Notifications"})]})}),n.jsx(H,{className:"space-y-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx(U,{htmlFor:"reminder-push",children:"Appointment Reminders (Push)"}),n.jsx(Vt,{id:"reminder-push","data-testid":"toggle-reminder-push",checked:(t==null?void 0:t.appointmentReminderPush)??!0,onCheckedChange:h=>u("appointmentReminderPush",h)})]})})]}),n.jsxs(O,{className:"border-orange-200 dark:border-orange-800",children:[n.jsxs(ee,{children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(uQ,{className:"h-5 w-5 text-orange-600"}),n.jsx(te,{className:"text-orange-600 dark:text-orange-400",children:"Emergency SMS Fallback"})]}),n.jsx(ke,{children:"When the main system is down, forward customer messages to your personal phone"})]}),n.jsxs(H,{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(U,{htmlFor:"sms-fallback-enabled",children:"Enable SMS Fallback System"}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Automatically forward messages when the system is offline"})]}),n.jsx(Vt,{id:"sms-fallback-enabled","data-testid":"toggle-sms-fallback-enabled",checked:o.enabled,onCheckedChange:h=>l({...o,enabled:h})})]}),o.enabled&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(U,{htmlFor:"sms-fallback-phone",children:"Forwarding Phone Number"}),n.jsx(se,{id:"sms-fallback-phone","data-testid":"input-sms-fallback-phone",type:"tel",placeholder:"+1 918-856-5304",value:o.phone,onChange:h=>l({...o,phone:h.target.value}),className:"font-mono"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Customer messages will be forwarded here when the system is down"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(U,{htmlFor:"sms-fallback-auto-reply",children:"Auto-Reply Message"}),n.jsx(un,{id:"sms-fallback-auto-reply","data-testid":"textarea-sms-fallback-auto-reply",placeholder:"Thanks for your message! Our automated system is currently offline...",value:o.autoReply,onChange:h=>l({...o,autoReply:h.target.value}),rows:3}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Customers receive this automatic response during system downtime"})]}),n.jsxs(_,{onClick:f,disabled:d.isPending,"data-testid":"button-save-sms-fallback",className:"w-full",children:[n.jsx(fr,{className:"h-4 w-4 mr-2"}),d.isPending?"Saving...":"Save Fallback Settings"]})]})]})]})]})}function oRe(){zt(),Ee();const[e,t]=p.useState("templates"),{data:r,isLoading:s}=be({queryKey:["/api/quick-replies/categories/with-templates"]}),a=(r==null?void 0:r.data)||[];return n.jsx(xn,{title:"Communications Settings",showSearch:!1,children:n.jsx("div",{className:"p-6 max-w-6xl mx-auto",children:n.jsxs(js,{value:e,onValueChange:t,className:"space-y-4",children:[n.jsxs(ds,{children:[n.jsxs(dt,{value:"templates","data-testid":"tab-templates",children:[n.jsx(on,{className:"h-4 w-4 mr-2"}),"Quick Reply Templates"]}),n.jsxs(dt,{value:"sms-templates","data-testid":"tab-sms-templates",children:[n.jsx(wa,{className:"h-4 w-4 mr-2"}),"SMS Templates"]}),n.jsxs(dt,{value:"communications","data-testid":"tab-communications",children:[n.jsx(Vi,{className:"h-4 w-4 mr-2"}),"Campaigns"]}),n.jsxs(dt,{value:"notifications","data-testid":"tab-notifications",children:[n.jsx(Yc,{className:"h-4 w-4 mr-2"}),"Notifications"]}),n.jsxs(dt,{value:"security","data-testid":"tab-security",children:[n.jsx(zn,{className:"h-4 w-4 mr-2"}),"Security"]})]}),n.jsx(pt,{value:"templates",className:"space-y-4",children:n.jsx(lRe,{categories:a,isLoading:s})}),n.jsx(pt,{value:"sms-templates",className:"space-y-4",children:n.jsx(Aie,{})}),n.jsx(pt,{value:"communications",className:"space-y-4",children:n.jsx(Pie,{})}),n.jsx(pt,{value:"notifications",className:"space-y-4",children:n.jsx(cRe,{})}),n.jsx(pt,{value:"security",className:"space-y-4",children:n.jsx(dRe,{})})]})})})}function lRe({categories:e,isLoading:t}){const{toast:r}=Ee(),[s,a]=p.useState(null),[i,o]=p.useState(null),[l,c]=p.useState(!1),[d,u]=p.useState(null),[f,h]=p.useState({name:"",icon:""}),[m,g]=p.useState({content:"",categoryId:0}),x=je({mutationFn:async j=>await Ne("/api/quick-replies/categories","POST",j),onSuccess:()=>{r({title:"Category created successfully"}),ze.invalidateQueries({queryKey:["/api/quick-replies/categories/with-templates"]}),c(!1),h({name:"",icon:""})}}),y=je({mutationFn:async({id:j,...S})=>await Ne(`/api/quick-replies/categories/${j}`,"PUT",S),onSuccess:()=>{r({title:"Category updated successfully"}),ze.invalidateQueries({queryKey:["/api/quick-replies/categories/with-templates"]}),a(null)}}),v=je({mutationFn:async j=>{const S=await fetch(`/api/quick-replies/categories/${j}`,{method:"DELETE"});if(!S.ok)throw new Error("Failed to delete category");return S.json()},onSuccess:()=>{r({title:"Category deleted successfully"}),ze.invalidateQueries({queryKey:["/api/quick-replies/categories/with-templates"]})}}),b=je({mutationFn:async j=>await Ne("/api/quick-replies/templates","POST",j),onSuccess:()=>{r({title:"Template created successfully"}),ze.invalidateQueries({queryKey:["/api/quick-replies/categories/with-templates"]}),u(null),g({content:"",categoryId:0})}}),w=je({mutationFn:async({id:j,...S})=>await Ne(`/api/quick-replies/templates/${j}`,"PUT",S),onSuccess:()=>{r({title:"Template updated successfully"}),ze.invalidateQueries({queryKey:["/api/quick-replies/categories/with-templates"]}),o(null)}}),N=je({mutationFn:async j=>{const S=await fetch(`/api/quick-replies/templates/${j}`,{method:"DELETE"});if(!S.ok)throw new Error("Failed to delete template");return S.json()},onSuccess:()=>{r({title:"Template deleted successfully"}),ze.invalidateQueries({queryKey:["/api/quick-replies/categories/with-templates"]})}});return t?n.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Loading templates..."}):n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Create and organize quick reply templates for faster customer responses"}),n.jsxs(At,{open:l,onOpenChange:c,children:[n.jsx(pl,{asChild:!0,children:n.jsxs(_,{"data-testid":"button-add-category",children:[n.jsx(Un,{className:"h-4 w-4 mr-2"}),"Add Category"]})}),n.jsxs(_t,{children:[n.jsxs($t,{children:[n.jsx(Et,{children:"Create New Category"}),n.jsx(an,{children:"Add a new category to organize your quick replies"})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(U,{htmlFor:"categoryName",children:"Category Name"}),n.jsx(se,{id:"categoryName",value:f.name,onChange:j=>h({...f,name:j.target.value}),placeholder:"e.g., Greetings, Booking, Pricing","data-testid":"input-category-name"})]}),n.jsxs("div",{children:[n.jsx(U,{htmlFor:"categoryIcon",children:"Icon (emoji)"}),n.jsx(se,{id:"categoryIcon",value:f.icon,onChange:j=>h({...f,icon:j.target.value}),placeholder:"e.g., , , ",maxLength:2,"data-testid":"input-category-icon"})]})]}),n.jsx(Sn,{children:n.jsxs(_,{onClick:()=>x.mutate(f),disabled:!f.name||x.isPending,"data-testid":"button-save-category",children:[n.jsx(fr,{className:"h-4 w-4 mr-2"}),x.isPending?"Creating...":"Create Category"]})})]})]})]}),e.length===0?n.jsx(O,{children:n.jsxs(H,{className:"py-12 text-center text-muted-foreground",children:[n.jsx(on,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),n.jsx("p",{children:"No quick reply categories yet"}),n.jsx("p",{className:"text-sm mt-2",children:"Create your first category to get started"})]})}):n.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:e.map(j=>n.jsxs(O,{"data-testid":`category-${j.id}`,children:[n.jsxs(ee,{children:[n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[j.icon&&n.jsx("span",{className:"text-xl",children:j.icon}),n.jsx(te,{className:"text-lg",children:j.name})]}),n.jsxs("div",{className:"flex gap-1",children:[n.jsx(_,{variant:"ghost",size:"sm",onClick:()=>a(j),"data-testid":`button-edit-category-${j.id}`,children:n.jsx(kp,{className:"h-4 w-4"})}),n.jsx(_,{variant:"ghost",size:"sm",onClick:()=>{confirm("Delete this category and all its templates?")&&v.mutate(j.id)},"data-testid":`button-delete-category-${j.id}`,children:n.jsx(Nr,{className:"h-4 w-4 text-destructive"})})]})]}),n.jsxs(ke,{children:[j.templates.length," templates"]})]}),n.jsxs(H,{className:"space-y-2",children:[j.templates.map(S=>n.jsxs("div",{className:"flex justify-between items-start gap-2 p-2 rounded border bg-card hover:bg-accent/50 transition-colors","data-testid":`template-${S.id}`,children:[n.jsx("p",{className:"text-sm flex-1",children:S.content}),n.jsxs("div",{className:"flex gap-1 flex-shrink-0",children:[n.jsx(_,{variant:"ghost",size:"sm",onClick:()=>o({template:S,categoryId:j.id}),"data-testid":`button-edit-template-${S.id}`,children:n.jsx(kp,{className:"h-3 w-3"})}),n.jsx(_,{variant:"ghost",size:"sm",onClick:()=>{confirm("Delete this template?")&&N.mutate(S.id)},"data-testid":`button-delete-template-${S.id}`,children:n.jsx(Nr,{className:"h-3 w-3 text-destructive"})})]})]},S.id)),n.jsxs(_,{variant:"outline",size:"sm",onClick:()=>{u(j.id),g({content:"",categoryId:j.id})},className:"w-full mt-2","data-testid":`button-add-template-${j.id}`,children:[n.jsx(Un,{className:"h-4 w-4 mr-2"}),"Add Template"]})]})]},j.id))}),s&&n.jsx(At,{open:!!s,onOpenChange:()=>a(null),children:n.jsxs(_t,{children:[n.jsx($t,{children:n.jsx(Et,{children:"Edit Category"})}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(U,{children:"Category Name"}),n.jsx(se,{value:s.name,onChange:j=>a({...s,name:j.target.value}),"data-testid":"input-edit-category-name"})]}),n.jsxs("div",{children:[n.jsx(U,{children:"Icon (emoji)"}),n.jsx(se,{value:s.icon||"",onChange:j=>a({...s,icon:j.target.value}),maxLength:2,"data-testid":"input-edit-category-icon"})]})]}),n.jsx(Sn,{children:n.jsxs(_,{onClick:()=>y.mutate({id:s.id,name:s.name,icon:s.icon||""}),disabled:y.isPending,"data-testid":"button-update-category",children:[n.jsx(fr,{className:"h-4 w-4 mr-2"}),y.isPending?"Saving...":"Save Changes"]})})]})}),d!==null&&n.jsx(At,{open:d!==null,onOpenChange:()=>u(null),children:n.jsxs(_t,{children:[n.jsx($t,{children:n.jsx(Et,{children:"Add New Template"})}),n.jsx("div",{className:"space-y-4",children:n.jsxs("div",{children:[n.jsx(U,{children:"Template Content"}),n.jsx(un,{value:m.content,onChange:j=>g({...m,content:j.target.value}),placeholder:"Enter your quick reply message...",rows:4,"data-testid":"input-template-content"})]})}),n.jsx(Sn,{children:n.jsxs(_,{onClick:()=>b.mutate(m),disabled:!m.content||b.isPending,"data-testid":"button-save-template",children:[n.jsx(fr,{className:"h-4 w-4 mr-2"}),b.isPending?"Creating...":"Create Template"]})})]})}),i&&n.jsx(At,{open:!!i,onOpenChange:()=>o(null),children:n.jsxs(_t,{children:[n.jsx($t,{children:n.jsx(Et,{children:"Edit Template"})}),n.jsx("div",{className:"space-y-4",children:n.jsxs("div",{children:[n.jsx(U,{children:"Template Content"}),n.jsx(un,{value:i.template.content,onChange:j=>o({...i,template:{...i.template,content:j.target.value}}),rows:4,"data-testid":"input-edit-template-content"})]})}),n.jsx(Sn,{children:n.jsxs(_,{onClick:()=>w.mutate({id:i.template.id,content:i.template.content}),disabled:w.isPending,"data-testid":"button-update-template",children:[n.jsx(fr,{className:"h-4 w-4 mr-2"}),w.isPending?"Saving...":"Save Changes"]})})]})})]})}function cRe(){return n.jsxs("div",{className:"space-y-4",children:[n.jsx(iRe,{}),n.jsxs(O,{children:[n.jsxs(ee,{children:[n.jsx(te,{children:"Quick Settings (Legacy)"}),n.jsx(ke,{children:"Basic notification preferences"})]}),n.jsxs(H,{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(U,{htmlFor:"businessPhone",children:"Business Owner Phone (for SMS notifications)"}),n.jsx(se,{id:"businessPhone",value:"",disabled:!0,placeholder:"Configured via environment variable",className:"mt-1","data-testid":"input-business-phone"}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Configured via environment variable BUSINESS_PHONE_NUMBER"})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(U,{children:"SMS Handoff Notifications"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Get notified when AI hands off to human"})]}),n.jsx(_,{variant:"outline",size:"sm",children:settings.handoffSmsEnabled?"Enabled":"Disabled"})]}),n.jsxs("div",{children:[n.jsx(U,{htmlFor:"timeoutHours",children:"Auto-Return Timeout (hours)"}),n.jsx(se,{id:"timeoutHours",type:"number",value:settings.timeoutHours,onChange:e=>setSettings({...settings,timeoutHours:parseInt(e.target.value)}),min:1,max:48,className:"mt-1","data-testid":"input-timeout-hours"}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"After this time of inactivity, conversations return to AI mode"})]}),n.jsxs("div",{children:[n.jsx(U,{htmlFor:"aiModel",children:"AI Model for Handoff Detection"}),n.jsx(se,{id:"aiModel",value:settings.aiModel,readOnly:!0,className:"mt-1 bg-muted","data-testid":"input-ai-model"}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Currently using GPT-4o-mini for cost-effective intent classification"})]}),n.jsxs("div",{className:"pt-4 border-t",children:[n.jsxs(_,{onClick:()=>{toast({title:"Settings updated",description:"Your notification preferences have been saved"})},"data-testid":"button-save-notifications",children:[n.jsx(fr,{className:"h-4 w-4 mr-2"}),"Save Notification Settings"]}),n.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:" Note: These settings are currently hardcoded. Full configuration coming in cleanup phase."})]})]})]})]})}function dRe(){const{toast:e}=Ee(),[t,r]=p.useState({currentPassword:"",newPassword:"",confirmPassword:""}),{data:s}=be({queryKey:["/api/webauthn/credentials"]}),a=je({mutationFn:async o=>await Ne("/api/auth/change-password","POST",o),onSuccess:()=>{e({title:"Password changed successfully",description:"Your password has been updated"}),r({currentPassword:"",newPassword:"",confirmPassword:""})},onError:o=>{e({title:"Password change failed",description:o.message||"Invalid current password",variant:"destructive"})}}),i=o=>{if(o.preventDefault(),t.newPassword!==t.confirmPassword){e({title:"Passwords do not match",description:"New password and confirmation must match",variant:"destructive"});return}if(t.newPassword.length<6){e({title:"Password too short",description:"Password must be at least 6 characters",variant:"destructive"});return}a.mutate({currentPassword:t.currentPassword,newPassword:t.newPassword})};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs(O,{children:[n.jsxs(ee,{children:[n.jsxs(te,{className:"flex items-center gap-2",children:[n.jsx(fy,{className:"h-5 w-5"}),"Change Password"]}),n.jsx(ke,{children:"Update your account password for enhanced security"})]}),n.jsx(H,{children:n.jsxs("form",{onSubmit:i,className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(U,{htmlFor:"currentPassword",children:"Current Password"}),n.jsx(se,{id:"currentPassword",type:"password",value:t.currentPassword,onChange:o=>r({...t,currentPassword:o.target.value}),required:!0,className:"mt-1","data-testid":"input-current-password"})]}),n.jsxs("div",{children:[n.jsx(U,{htmlFor:"newPassword",children:"New Password"}),n.jsx(se,{id:"newPassword",type:"password",value:t.newPassword,onChange:o=>r({...t,newPassword:o.target.value}),required:!0,minLength:6,className:"mt-1","data-testid":"input-new-password"}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Minimum 6 characters"})]}),n.jsxs("div",{children:[n.jsx(U,{htmlFor:"confirmPassword",children:"Confirm New Password"}),n.jsx(se,{id:"confirmPassword",type:"password",value:t.confirmPassword,onChange:o=>r({...t,confirmPassword:o.target.value}),required:!0,className:"mt-1","data-testid":"input-confirm-password"})]}),n.jsxs(_,{type:"submit",disabled:a.isPending,"data-testid":"button-change-password",children:[n.jsx(fr,{className:"h-4 w-4 mr-2"}),a.isPending?"Changing...":"Change Password"]})]})})]}),n.jsxs(O,{children:[n.jsxs(ee,{children:[n.jsxs(te,{className:"flex items-center gap-2",children:[n.jsx(zn,{className:"h-5 w-5"}),"Biometric Authentication"]}),n.jsx(ke,{children:"Use fingerprint or face recognition to log in securely"})]}),n.jsx(H,{children:n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{className:"bg-blue-50 dark:bg-blue-950 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:n.jsxs("p",{className:"text-sm text-blue-900 dark:text-blue-100",children:[n.jsx("strong",{children:"Note:"})," Biometric login requires HTTPS (secure connection). This feature will be available when you publish your app to production."]})}),s!=null&&s.credentials&&s.credentials.length>0?n.jsxs("div",{className:"space-y-2",children:[n.jsx("h4",{className:"font-medium",children:"Registered Devices"}),s.credentials.map(o=>n.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:o.deviceName}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:["Added ",new Date(o.createdAt).toLocaleDateString()]})]}),n.jsx(_,{variant:"destructive",size:"sm",onClick:async()=>{await fetch(`/api/webauthn/credentials/${o.id}`,{method:"DELETE",credentials:"include"}),ze.invalidateQueries({queryKey:["/api/webauthn/credentials"]}),e({title:"Device removed"})},children:n.jsx(Nr,{className:"h-4 w-4"})})]},o.id))]}):n.jsx("p",{className:"text-sm text-muted-foreground",children:"No biometric devices registered yet"}),n.jsxs(_,{variant:"outline",disabled:!0,className:"w-full","data-testid":"button-add-biometric",children:[n.jsx(zn,{className:"h-4 w-4 mr-2"}),"Add Biometric Device (Available in Production)"]})]})})]})]})}var fd="Accordion",uRe=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[QE,fRe,hRe]=qv(fd),[X4]=ws(fd,[hRe,lne]),KE=lne(),Eie=Q.forwardRef((e,t)=>{const{type:r,...s}=e,a=s,i=s;return n.jsx(QE.Provider,{scope:e.__scopeAccordion,children:r==="multiple"?n.jsx(xRe,{...i,ref:t}):n.jsx(gRe,{...a,ref:t})})});Eie.displayName=fd;var[Iie,mRe]=X4(fd),[Lie,pRe]=X4(fd,{collapsible:!1}),gRe=Q.forwardRef((e,t)=>{const{value:r,defaultValue:s,onValueChange:a=()=>{},collapsible:i=!1,...o}=e,[l,c]=qa({prop:r,defaultProp:s,onChange:a});return n.jsx(Iie,{scope:e.__scopeAccordion,value:l?[l]:[],onItemOpen:c,onItemClose:Q.useCallback(()=>i&&c(""),[i,c]),children:n.jsx(Lie,{scope:e.__scopeAccordion,collapsible:i,children:n.jsx(Die,{...o,ref:t})})})}),xRe=Q.forwardRef((e,t)=>{const{value:r,defaultValue:s,onValueChange:a=()=>{},...i}=e,[o=[],l]=qa({prop:r,defaultProp:s,onChange:a}),c=Q.useCallback(u=>l((f=[])=>[...f,u]),[l]),d=Q.useCallback(u=>l((f=[])=>f.filter(h=>h!==u)),[l]);return n.jsx(Iie,{scope:e.__scopeAccordion,value:o,onItemOpen:c,onItemClose:d,children:n.jsx(Lie,{scope:e.__scopeAccordion,collapsible:!0,children:n.jsx(Die,{...i,ref:t})})})}),[yRe,e3]=X4(fd),Die=Q.forwardRef((e,t)=>{const{__scopeAccordion:r,disabled:s,dir:a,orientation:i="vertical",...o}=e,l=Q.useRef(null),c=rn(l,t),d=fRe(r),f=Ch(a)==="ltr",h=ut(e.onKeyDown,m=>{var k;if(!uRe.includes(m.key))return;const g=m.target,x=d().filter(M=>{var A;return!((A=M.ref.current)!=null&&A.disabled)}),y=x.findIndex(M=>M.ref.current===g),v=x.length;if(y===-1)return;m.preventDefault();let b=y;const w=0,N=v-1,j=()=>{b=y+1,b>N&&(b=w)},S=()=>{b=y-1,b<w&&(b=N)};switch(m.key){case"Home":b=w;break;case"End":b=N;break;case"ArrowRight":i==="horizontal"&&(f?j():S());break;case"ArrowDown":i==="vertical"&&j();break;case"ArrowLeft":i==="horizontal"&&(f?S():j());break;case"ArrowUp":i==="vertical"&&S();break}const C=b%v;(k=x[C].ref.current)==null||k.focus()});return n.jsx(yRe,{scope:r,disabled:s,direction:a,orientation:i,children:n.jsx(QE.Slot,{scope:r,children:n.jsx(ht.div,{...o,"data-orientation":i,ref:c,onKeyDown:s?void 0:h})})})}),p2="AccordionItem",[vRe,JE]=X4(p2),$ie=Q.forwardRef((e,t)=>{const{__scopeAccordion:r,value:s,...a}=e,i=e3(p2,r),o=mRe(p2,r),l=KE(r),c=Gs(),d=s&&o.value.includes(s)||!1,u=i.disabled||e.disabled;return n.jsx(vRe,{scope:r,open:d,disabled:u,triggerId:c,children:n.jsx(une,{"data-orientation":i.orientation,"data-state":Uie(d),...l,...a,ref:t,disabled:u,open:d,onOpenChange:f=>{f?o.onItemOpen(s):o.onItemClose(s)}})})});$ie.displayName=p2;var Oie="AccordionHeader",Rie=Q.forwardRef((e,t)=>{const{__scopeAccordion:r,...s}=e,a=e3(fd,r),i=JE(Oie,r);return n.jsx(ht.h3,{"data-orientation":a.orientation,"data-state":Uie(i.open),"data-disabled":i.disabled?"":void 0,...s,ref:t})});Rie.displayName=Oie;var i_="AccordionTrigger",Fie=Q.forwardRef((e,t)=>{const{__scopeAccordion:r,...s}=e,a=e3(fd,r),i=JE(i_,r),o=pRe(i_,r),l=KE(r);return n.jsx(QE.ItemSlot,{scope:r,children:n.jsx(k5e,{"aria-disabled":i.open&&!o.collapsible||void 0,"data-orientation":a.orientation,id:i.triggerId,...l,...s,ref:t})})});Fie.displayName=i_;var zie="AccordionContent",Bie=Q.forwardRef((e,t)=>{const{__scopeAccordion:r,...s}=e,a=e3(fd,r),i=JE(zie,r),o=KE(r);return n.jsx(M5e,{role:"region","aria-labelledby":i.triggerId,"data-orientation":a.orientation,...o,...s,ref:t,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...e.style}})});Bie.displayName=zie;function Uie(e){return e?"open":"closed"}var bRe=Eie,wRe=$ie,jRe=Rie,Vie=Fie,Hie=Bie;const t3=bRe,zf=p.forwardRef(({className:e,...t},r)=>n.jsx(wRe,{ref:r,className:Le("border-b",e),...t}));zf.displayName="AccordionItem";const Bf=p.forwardRef(({className:e,children:t,...r},s)=>n.jsx(jRe,{className:"flex",children:n.jsxs(Vie,{ref:s,className:Le("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",e),...r,children:[t,n.jsx(Ui,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));Bf.displayName=Vie.displayName;const Uf=p.forwardRef(({className:e,children:t,...r},s)=>n.jsx(Hie,{ref:s,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...r,children:n.jsx("div",{className:Le("pb-4 pt-0",e),children:t})}));Uf.displayName=Hie.displayName;const ZO=[{name:"New Year's Day",date:"01-01",greeting:"Happy New Year! Here's to a fresh start for your vehicle in {year}!",enabled:!0},{name:"Valentine's Day",date:"02-14",greeting:"Happy Valentine's Day! Give your car some love with our premium detailing services!",enabled:!0},{name:"St. Patrick's Day",date:"03-17",greeting:"Happy St. Patrick's Day! Your luck just got better with our special cleaning services!",enabled:!0},{name:"Easter",date:"04-09",greeting:"Happy Easter! Spring into a fresh start with a professionally detailed vehicle!",enabled:!0},{name:"Mother's Day",date:"05-14",greeting:"Happy Mother's Day! Treat Mom to a sparkling clean vehicle this year!",enabled:!0},{name:"Memorial Day",date:"05-29",greeting:"Happy Memorial Day weekend! Remember to book your detail before the summer rush!",enabled:!0},{name:"Father's Day",date:"06-18",greeting:"Happy Father's Day! Dad deserves a fresh, clean ride - book a detail today!",enabled:!0},{name:"Independence Day",date:"07-04",greeting:"Happy 4th of July! Celebrate freedom with a freshly detailed vehicle!",enabled:!0},{name:"Labor Day",date:"09-04",greeting:"Happy Labor Day weekend! End summer with a professionally detailed vehicle!",enabled:!0},{name:"Halloween",date:"10-31",greeting:"Happy Halloween! No tricks, just treats for your vehicle with our premium services!",enabled:!0},{name:"Thanksgiving",date:"11-23",greeting:"Happy Thanksgiving! We're thankful for customers like you. Book your holiday detail now!",enabled:!0},{name:"Christmas",date:"12-25",greeting:"Merry Christmas! Give your vehicle the gift of a professional detail this holiday season!",enabled:!0}];function NRe({holidays:e,onToggle:t,onUpdateGreeting:r}){return n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full bg-white shadow-md rounded-lg overflow-hidden",children:[n.jsx("thead",{className:"bg-blue-600 text-white",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-3 text-left",children:"Holiday"}),n.jsx("th",{className:"px-4 py-3 text-left",children:"Date"}),n.jsx("th",{className:"px-4 py-3 text-left",children:"Greeting"}),n.jsx("th",{className:"px-4 py-3 text-center",children:"Enabled"})]})}),n.jsx("tbody",{children:e.map((s,a)=>n.jsxs("tr",{className:a%2===0?"bg-gray-50":"bg-white",children:[n.jsx("td",{className:"px-4 py-3 text-gray-800 font-medium",children:s.name}),n.jsx("td",{className:"px-4 py-3 text-gray-600",children:s.date}),n.jsx("td",{className:"px-4 py-3 text-gray-600",children:n.jsx("textarea",{value:s.greeting,onChange:i=>r(a,i.target.value),className:"w-full p-2 border border-gray-300 rounded text-sm",rows:2})}),n.jsx("td",{className:"px-4 py-3 text-center",children:n.jsx("input",{type:"checkbox",checked:s.enabled,onChange:()=>t(a),className:"h-5 w-5 text-blue-600 rounded"})})]},s.name))})]})})}function SRe({onSave:e}){const{toast:t}=Ee(),{data:r,isLoading:s}=be({queryKey:["/api/agent-preferences"]}),a=r==null?void 0:r.preferences,[i,o]=p.useState({professionalismLevel:4,friendliness:4,detailOrientation:3,humorLevel:2,enthusiasm:3}),[l,c]=p.useState({useCustomerName:!0,askFollowUpQuestions:!0,offerSuggestions:!0,sendConfirmationMessages:!0,proactiveServiceReminders:!0,holidayGreetings:!0}),[d,u]=p.useState({formality:3,technicalTerms:2,messageLength:3,defaultLanguage:"en",useEmojis:!0}),[f,h]=p.useState(ZO),[m,g]=p.useState({smsOpeningMessage:"Hi! Thanks for reaching out to Clean Machine Auto Detail. How can I help you today?",websiteOpeningMessage:"Welcome to Clean Machine! I'm here to help you schedule a detailing appointment or answer any questions.",facebookOpeningMessage:"Hey there! Thanks for messaging Clean Machine. What can I do for you?"});p.useEffect(()=>{a&&(o({professionalismLevel:a.professionalismLevel||4,friendliness:a.friendliness||4,detailOrientation:a.detailOrientation||3,humorLevel:a.humorLevel||2,enthusiasm:a.enthusiasm||3}),c({useCustomerName:a.useCustomerName??!0,askFollowUpQuestions:a.askFollowUpQuestions??!0,offerSuggestions:a.offerSuggestions??!0,sendConfirmationMessages:a.sendConfirmationMessages??!0,proactiveServiceReminders:a.proactiveServiceReminders??!0,holidayGreetings:a.holidayGreetings??!0}),u({formality:a.formality||3,technicalTerms:a.technicalTerms||2,messageLength:a.messageLength||3,defaultLanguage:a.defaultLanguage||"en",useEmojis:a.useEmojis??!0}),g({smsOpeningMessage:a.smsOpeningMessage||"Hi! Thanks for reaching out to Clean Machine Auto Detail. How can I help you today?",websiteOpeningMessage:a.websiteOpeningMessage||"Welcome to Clean Machine! I'm here to help you schedule a detailing appointment or answer any questions.",facebookOpeningMessage:a.facebookOpeningMessage||"Hey there! Thanks for messaging Clean Machine. What can I do for you?"}),a.knownHolidays&&Array.isArray(a.knownHolidays)&&h(a.knownHolidays))},[a]);const x=je({mutationFn:async j=>await Ne("PUT","/api/agent-preferences",j),onSuccess:()=>{ze.invalidateQueries({queryKey:["/api/agent-preferences"]}),t({title:"Settings Saved",description:"Your agent preferences have been updated successfully."}),e&&e({personality:i,behavior:l,language:d,messaging:m,holidays:f})},onError:()=>{t({title:"Error",description:"Failed to save agent preferences. Please try again.",variant:"destructive"})}}),y=()=>{o({professionalismLevel:4,friendliness:4,detailOrientation:3,humorLevel:2,enthusiasm:3}),c({useCustomerName:!0,askFollowUpQuestions:!0,offerSuggestions:!0,sendConfirmationMessages:!0,proactiveServiceReminders:!0,holidayGreetings:!0}),u({formality:3,technicalTerms:2,messageLength:3,defaultLanguage:"en",useEmojis:!0}),h(ZO),g({smsOpeningMessage:"Hi! Thanks for reaching out to Clean Machine Auto Detail. How can I help you today?",websiteOpeningMessage:"Welcome to Clean Machine! I'm here to help you schedule a detailing appointment or answer any questions.",facebookOpeningMessage:"Hey there! Thanks for messaging Clean Machine. What can I do for you?"})},v=j=>{const S=[...f];S[j].enabled=!S[j].enabled,h(S)},b=(j,S)=>{const C=[...f];C[j].greeting=S,h(C)},w=()=>{const j={professionalismLevel:i.professionalismLevel,friendliness:i.friendliness,detailOrientation:i.detailOrientation,humorLevel:i.humorLevel,enthusiasm:i.enthusiasm,useCustomerName:l.useCustomerName,askFollowUpQuestions:l.askFollowUpQuestions,offerSuggestions:l.offerSuggestions,sendConfirmationMessages:l.sendConfirmationMessages,proactiveServiceReminders:l.proactiveServiceReminders,holidayGreetings:l.holidayGreetings,formality:d.formality,technicalTerms:d.technicalTerms,messageLength:d.messageLength,defaultLanguage:d.defaultLanguage,useEmojis:d.useEmojis,smsOpeningMessage:m.smsOpeningMessage,websiteOpeningMessage:m.websiteOpeningMessage,facebookOpeningMessage:m.facebookOpeningMessage,knownHolidays:f};x.mutate(j)},N=(j,S)=>{switch(j){case"professionalism":return["Very Casual","Casual","Balanced","Professional","Very Professional"][S-1];case"friendliness":return["Neutral","Friendly","Warm","Very Friendly","Extremely Friendly"][S-1];case"detailOrientation":return["Minimal Detail","Basic Detail","Moderate Detail","Detailed","Very Detailed"][S-1];case"humor":return["No Humor","Subtle Humor","Moderate Humor","Playful","Very Humorous"][S-1];case"enthusiasm":return["Subdued","Calm","Balanced","Enthusiastic","Very Enthusiastic"][S-1];case"formality":return["Very Casual","Casual","Neutral","Formal","Very Formal"][S-1];case"technicalTerms":return["Simple Language","Basic Terms","Moderate Terms","Technical","Very Technical"][S-1];case"messageLength":return["Very Concise","Concise","Moderate","Detailed","Very Detailed"][S-1];default:return S.toString()}};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-white",children:"Agent Settings"}),n.jsx("p",{className:"text-blue-200",children:"Customize how your AI agent interacts with customers"})]}),n.jsxs("div",{className:"flex space-x-3",children:[n.jsxs(_,{variant:"outline",onClick:y,children:[n.jsx(E0,{className:"mr-2 h-4 w-4"}),"Reset to Defaults"]}),n.jsxs(_,{className:"bg-blue-600 hover:bg-blue-700",onClick:w,children:[n.jsx(fr,{className:"mr-2 h-4 w-4"}),"Save Changes"]})]})]}),n.jsxs(js,{defaultValue:"personality",className:"w-full",children:[n.jsxs(ds,{className:"bg-blue-900/20 border border-blue-800/30 p-1",children:[n.jsxs(dt,{value:"personality",className:"data-[state=active]:bg-blue-600",children:[n.jsx($f,{className:"mr-2 h-4 w-4"}),"Personality"]}),n.jsxs(dt,{value:"behavior",className:"data-[state=active]:bg-blue-600",children:[n.jsx(gQ,{className:"mr-2 h-4 w-4"}),"Behavior"]}),n.jsxs(dt,{value:"language",className:"data-[state=active]:bg-blue-600",children:[n.jsx(on,{className:"mr-2 h-4 w-4"}),"Language"]}),n.jsxs(dt,{value:"messaging",className:"data-[state=active]:bg-blue-600",children:[n.jsx(on,{className:"mr-2 h-4 w-4"}),"Messaging"]}),n.jsxs(dt,{value:"holidays",className:"data-[state=active]:bg-blue-600",children:[n.jsx(Dt,{className:"mr-2 h-4 w-4"}),"Holiday Awareness"]})]}),n.jsx(pt,{value:"personality",children:n.jsxs(O,{className:"bg-white/10 backdrop-blur-sm border-blue-500/20 shadow-lg",children:[n.jsxs(ee,{children:[n.jsx(te,{children:"Personality Settings"}),n.jsx(ke,{className:"text-blue-200",children:"Adjust how your agent's personality comes across in communications"})]}),n.jsxs(H,{className:"space-y-6",children:[n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx(U,{children:"Professionalism Level"}),n.jsx("span",{className:"text-sm text-blue-300",children:N("professionalism",i.professionalismLevel)})]}),n.jsx(ai,{value:[i.professionalismLevel],min:1,max:5,step:1,onValueChange:j=>o({...i,professionalismLevel:j[0]}),className:"py-2"}),n.jsx("p",{className:"text-xs text-blue-200",children:"Adjust how professionally the agent presents information to customers"})]}),n.jsx(Ot,{className:"bg-blue-500/20"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx(U,{children:"Friendliness"}),n.jsx("span",{className:"text-sm text-blue-300",children:N("friendliness",i.friendliness)})]}),n.jsx(ai,{value:[i.friendliness],min:1,max:5,step:1,onValueChange:j=>o({...i,friendliness:j[0]}),className:"py-2"}),n.jsx("p",{className:"text-xs text-blue-200",children:"Controls how warm and friendly the agent's tone will be"})]}),n.jsx(Ot,{className:"bg-blue-500/20"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx(U,{children:"Detail Orientation"}),n.jsx("span",{className:"text-sm text-blue-300",children:N("detailOrientation",i.detailOrientation)})]}),n.jsx(ai,{value:[i.detailOrientation],min:1,max:5,step:1,onValueChange:j=>o({...i,detailOrientation:j[0]}),className:"py-2"}),n.jsx("p",{className:"text-xs text-blue-200",children:"How detailed the agent will be when explaining services"})]}),n.jsx(Ot,{className:"bg-blue-500/20"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx(U,{children:"Humor Level"}),n.jsx("span",{className:"text-sm text-blue-300",children:N("humor",i.humorLevel)})]}),n.jsx(ai,{value:[i.humorLevel],min:1,max:5,step:1,onValueChange:j=>o({...i,humorLevel:j[0]}),className:"py-2"}),n.jsx("p",{className:"text-xs text-blue-200",children:"How much light humor the agent will include in responses"})]}),n.jsx(Ot,{className:"bg-blue-500/20"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx(U,{children:"Enthusiasm"}),n.jsx("span",{className:"text-sm text-blue-300",children:N("enthusiasm",i.enthusiasm)})]}),n.jsx(ai,{value:[i.enthusiasm],min:1,max:5,step:1,onValueChange:j=>o({...i,enthusiasm:j[0]}),className:"py-2"}),n.jsx("p",{className:"text-xs text-blue-200",children:"How enthusiastic the agent will be when speaking about services"})]})]})]})}),n.jsx(pt,{value:"behavior",children:n.jsxs(O,{className:"bg-white/10 backdrop-blur-sm border-blue-500/20 shadow-lg",children:[n.jsxs(ee,{children:[n.jsx(te,{children:"Behavior Settings"}),n.jsx(ke,{className:"text-blue-200",children:"Control how the agent interacts with customers. The AI automatically keeps conversations focused on auto detailing topics and steers discussions back to Clean Machine services when needed."})]}),n.jsx(H,{className:"space-y-6",children:n.jsxs("div",{className:"grid gap-6 sm:grid-cols-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(U,{className:"text-base",children:"Use Customer Names"}),n.jsx("p",{className:"text-xs text-blue-200 mt-1",children:"Agent will personalize messages with customer's name"})]}),n.jsx(Vt,{checked:l.useCustomerName,onCheckedChange:j=>c({...l,useCustomerName:j})})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(U,{className:"text-base",children:"Ask Follow-up Questions"}),n.jsx("p",{className:"text-xs text-blue-200 mt-1",children:"Agent will ask relevant follow-up questions"})]}),n.jsx(Vt,{checked:l.askFollowUpQuestions,onCheckedChange:j=>c({...l,askFollowUpQuestions:j})})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(U,{className:"text-base",children:"Offer Suggestions"}),n.jsx("p",{className:"text-xs text-blue-200 mt-1",children:"Agent will suggest related services"})]}),n.jsx(Vt,{checked:l.offerSuggestions,onCheckedChange:j=>c({...l,offerSuggestions:j})})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(U,{className:"text-base",children:"Send Confirmations"}),n.jsx("p",{className:"text-xs text-blue-200 mt-1",children:"Agent will confirm bookings and requests"})]}),n.jsx(Vt,{checked:l.sendConfirmationMessages,onCheckedChange:j=>c({...l,sendConfirmationMessages:j})})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(U,{className:"text-base",children:"Service Reminders"}),n.jsx("p",{className:"text-xs text-blue-200 mt-1",children:"Send proactive reminders for upcoming services"})]}),n.jsx(Vt,{checked:l.proactiveServiceReminders,onCheckedChange:j=>c({...l,proactiveServiceReminders:j})})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(U,{className:"text-base",children:"Holiday Greetings"}),n.jsx("p",{className:"text-xs text-blue-200 mt-1",children:"Include holiday greetings when appropriate"})]}),n.jsx(Vt,{checked:l.holidayGreetings,onCheckedChange:j=>c({...l,holidayGreetings:j})})]})]})})]})}),n.jsx(pt,{value:"language",children:n.jsxs(O,{className:"bg-white/10 backdrop-blur-sm border-blue-500/20 shadow-lg",children:[n.jsxs(ee,{children:[n.jsx(te,{children:"Language Settings"}),n.jsx(ke,{className:"text-blue-200",children:"Customize the language and communication style"})]}),n.jsxs(H,{className:"space-y-6",children:[n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx(U,{children:"Formality"}),n.jsx("span",{className:"text-sm text-blue-300",children:N("formality",d.formality)})]}),n.jsx(ai,{value:[d.formality],min:1,max:5,step:1,onValueChange:j=>u({...d,formality:j[0]}),className:"py-2"}),n.jsx("p",{className:"text-xs text-blue-200",children:"How formal the agent's language will be"})]}),n.jsx(Ot,{className:"bg-blue-500/20"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx(U,{children:"Technical Language"}),n.jsx("span",{className:"text-sm text-blue-300",children:N("technicalTerms",d.technicalTerms)})]}),n.jsx(ai,{value:[d.technicalTerms],min:1,max:5,step:1,onValueChange:j=>u({...d,technicalTerms:j[0]}),className:"py-2"}),n.jsx("p",{className:"text-xs text-blue-200",children:"How much technical car terminology to use"})]}),n.jsx(Ot,{className:"bg-blue-500/20"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx(U,{children:"Message Length"}),n.jsx("span",{className:"text-sm text-blue-300",children:N("messageLength",d.messageLength)})]}),n.jsx(ai,{value:[d.messageLength],min:1,max:5,step:1,onValueChange:j=>u({...d,messageLength:j[0]}),className:"py-2"}),n.jsx("p",{className:"text-xs text-blue-200",children:"How lengthy the agent responses will be"})]}),n.jsx(Ot,{className:"bg-blue-500/20"}),n.jsxs("div",{className:"flex items-center justify-between pt-2",children:[n.jsxs("div",{children:[n.jsx(U,{className:"text-base",children:"Use Emojis"}),n.jsx("p",{className:"text-xs text-blue-200 mt-1",children:"Include emojis in messages for a friendly touch"})]}),n.jsx(Vt,{checked:d.useEmojis,onCheckedChange:j=>u({...d,useEmojis:j})})]})]})]})}),n.jsx(pt,{value:"messaging",children:n.jsxs(O,{className:"bg-white/10 backdrop-blur-sm border-blue-500/20 shadow-lg",children:[n.jsxs(ee,{children:[n.jsx(te,{children:"Opening Messages by Channel"}),n.jsx(ke,{className:"text-blue-200",children:"Customize the first message customers receive on each communication channel"})]}),n.jsxs(H,{className:"space-y-8",children:[n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(bt,{className:"h-5 w-5 text-blue-400"}),n.jsx(U,{htmlFor:"smsOpeningMessage",className:"text-base font-semibold",children:"SMS Opening Message"})]}),n.jsx("p",{className:"text-xs text-blue-200",children:"First message sent when a customer texts your business number"}),n.jsx("textarea",{id:"smsOpeningMessage",value:m.smsOpeningMessage,onChange:j=>g({...m,smsOpeningMessage:j.target.value}),className:"w-full min-h-[100px] p-3 rounded-md bg-blue-900/40 border border-blue-700/30 text-white placeholder:text-blue-300/50 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter your SMS opening message..."}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("p",{className:"text-xs text-blue-200",children:["Character count: ",m.smsOpeningMessage.length]}),n.jsx(ge,{variant:"outline",className:"text-xs",children:"SMS"})]}),n.jsx("div",{className:"p-3 bg-blue-900/30 rounded-lg border border-blue-700/30",children:n.jsx("p",{className:"text-sm text-white",children:m.smsOpeningMessage})})]}),n.jsx(Ot,{className:"bg-blue-500/20"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(on,{className:"h-5 w-5 text-blue-400"}),n.jsx(U,{htmlFor:"websiteOpeningMessage",className:"text-base font-semibold",children:"Website Chat Opening Message"})]}),n.jsx("p",{className:"text-xs text-blue-200",children:"First message customers see when they open the chat widget on your website"}),n.jsx("textarea",{id:"websiteOpeningMessage",value:m.websiteOpeningMessage,onChange:j=>g({...m,websiteOpeningMessage:j.target.value}),className:"w-full min-h-[100px] p-3 rounded-md bg-blue-900/40 border border-blue-700/30 text-white placeholder:text-blue-300/50 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter your website chat opening message..."}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("p",{className:"text-xs text-blue-200",children:["Character count: ",m.websiteOpeningMessage.length]}),n.jsx(ge,{variant:"outline",className:"text-xs",children:"Website"})]}),n.jsx("div",{className:"p-3 bg-blue-900/30 rounded-lg border border-blue-700/30",children:n.jsx("p",{className:"text-sm text-white",children:m.websiteOpeningMessage})})]}),n.jsx(Ot,{className:"bg-blue-500/20"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(wa,{className:"h-5 w-5 text-blue-400"}),n.jsx(U,{htmlFor:"facebookOpeningMessage",className:"text-base font-semibold",children:"Facebook / Embedded Widget Opening Message"})]}),n.jsx("p",{className:"text-xs text-blue-200",children:"First message for customers reaching out via Facebook Messenger or embedded chat widgets"}),n.jsx("textarea",{id:"facebookOpeningMessage",value:m.facebookOpeningMessage,onChange:j=>g({...m,facebookOpeningMessage:j.target.value}),className:"w-full min-h-[100px] p-3 rounded-md bg-blue-900/40 border border-blue-700/30 text-white placeholder:text-blue-300/50 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter your Facebook/widget opening message..."}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("p",{className:"text-xs text-blue-200",children:["Character count: ",m.facebookOpeningMessage.length]}),n.jsx(ge,{variant:"outline",className:"text-xs",children:"Facebook / Widget"})]}),n.jsx("div",{className:"p-3 bg-blue-900/30 rounded-lg border border-blue-700/30",children:n.jsx("p",{className:"text-sm text-white",children:m.facebookOpeningMessage})})]}),n.jsx(Ot,{className:"bg-blue-500/20"}),n.jsxs("div",{className:"p-4 bg-blue-900/30 rounded-lg",children:[n.jsxs("h3",{className:"font-medium mb-2 text-white flex items-center gap-2",children:[n.jsx(Wt,{className:"h-4 w-4"}),"Channel-Specific Customization"]}),n.jsx("p",{className:"text-sm text-blue-200",children:"Each channel displays its own customized opening message. This allows you to tailor your tone and content based on where customers are reaching out from - keeping SMS concise, website chat professional, and Facebook/widget friendly."})]})]})]})}),n.jsx(pt,{value:"holidays",children:n.jsxs(O,{className:"bg-white/10 backdrop-blur-sm border-blue-500/20 shadow-lg",children:[n.jsxs(ee,{children:[n.jsx(te,{children:"Holiday Awareness"}),n.jsx(ke,{className:"text-blue-200",children:"Customize how the agent recognizes holidays in conversations"})]}),n.jsxs(H,{className:"space-y-6",children:[n.jsxs("div",{className:"p-4 bg-blue-900/30 rounded-lg mb-4",children:[n.jsx("h3",{className:"font-medium mb-2",children:"How Holiday Awareness Works"}),n.jsx("p",{className:"text-sm text-blue-200 mb-2",children:"When enabled, the agent will automatically include holiday greetings in conversations that occur on or near major holidays. This helps create a more personalized and human-like interaction experience for your customers."}),n.jsx("p",{className:"text-sm text-blue-200",children:"Customize which holidays to recognize and what greetings to use for each one below."})]}),n.jsxs("div",{className:"mb-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx(U,{className:"text-base font-medium",children:"Enable Holiday Awareness"}),n.jsx(Vt,{checked:l.holidayGreetings,onCheckedChange:j=>c({...l,holidayGreetings:j})})]}),n.jsx("p",{className:"text-sm text-blue-200 mb-4",children:"When a conversation happens during an enabled holiday, the agent will include the appropriate greeting."})]}),n.jsx("div",{className:"rounded-lg overflow-hidden",children:n.jsx(NRe,{holidays:f,onToggle:v,onUpdateGreeting:b})})]})]})})]})]})}function CRe(){const[e,t]=p.useState({permission:"default",isSubscribed:!1,isLoading:!0,error:null});p.useEffect(()=>{r()},[]);const r=async()=>{if(!("Notification"in window)){console.log("[Push] Notifications not supported in this browser"),t(o=>({...o,isLoading:!1,error:"Notifications not supported"}));return}if(!("serviceWorker"in navigator)){console.log("[Push] Service Worker not supported in this browser"),t(o=>({...o,isLoading:!1,error:"Service Worker not supported"}));return}try{const o=Notification.permission;console.log("[Push] Current browser notification permission:",o);const c=await(await navigator.serviceWorker.ready).pushManager.getSubscription();console.log("[Push] Existing subscription:",c?"Found":"None"),t({permission:o,isSubscribed:!!c,isLoading:!1,error:null})}catch(o){console.error("[Push] Error checking subscription:",o),t(l=>({...l,isLoading:!1,error:"Failed to check subscription status"}))}};return{...e,subscribe:async()=>{t(o=>({...o,isLoading:!0,error:null}));try{const o=await Notification.requestPermission();if(o!=="granted")return t(h=>({...h,permission:o,isLoading:!1,error:"Notification permission denied"})),!1;const l=await fetch("/api/push/vapid-public-key",{credentials:"include"});if(!l.ok)throw new Error("Failed to get VAPID public key");const{publicKey:c}=await l.json(),u=await(await navigator.serviceWorker.ready).pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:kRe(c)});if(!(await fetch("/api/push/subscribe",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({endpoint:u.endpoint,p256dh:XO(u.getKey("p256dh")),auth:XO(u.getKey("auth")),userAgent:navigator.userAgent})})).ok)throw new Error("Failed to save subscription");return t({permission:"granted",isSubscribed:!0,isLoading:!1,error:null}),!0}catch(o){return console.error("[Push] Subscription error:",o),t(l=>({...l,isLoading:!1,error:o.message||"Failed to subscribe"})),!1}},unsubscribe:async()=>{t(o=>({...o,isLoading:!0,error:null}));try{const l=await(await navigator.serviceWorker.ready).pushManager.getSubscription();return l?(await fetch("/api/push/unsubscribe",{method:"DELETE",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({endpoint:l.endpoint})}),await l.unsubscribe(),t({permission:Notification.permission,isSubscribed:!1,isLoading:!1,error:null}),!0):(t(c=>({...c,isLoading:!1,error:"No active subscription"})),!1)}catch(o){return console.error("[Push] Unsubscribe error:",o),t(l=>({...l,isLoading:!1,error:o.message||"Failed to unsubscribe"})),!1}},sendTestNotification:async()=>{try{if(!(await fetch("/api/push/test",{method:"POST",credentials:"include"})).ok)throw new Error("Failed to send test notification");return!0}catch(o){return console.error("[Push] Test notification error:",o),!1}},refresh:r}}function kRe(e){const t="=".repeat((4-e.length%4)%4),r=(e+t).replace(/\-/g,"+").replace(/_/g,"/"),s=window.atob(r),a=new Uint8Array(s.length);for(let i=0;i<s.length;++i)a[i]=s.charCodeAt(i);return a}function XO(e){if(!e)return"";const t=new Uint8Array(e);let r="";for(let s=0;s<t.byteLength;s++)r+=String.fromCharCode(t[s]);return window.btoa(r)}function g2({showBackButton:e=!1,backUrl:t="/messages",backLabel:r="Back"}){const[s,a]=zt(),i=s.split("?")[0],o=i==="/messages"||i.startsWith("/messages/"),l=i==="/phone"||i.startsWith("/phone/");return n.jsx("div",{className:"bg-white dark:bg-gray-900 border-b dark:border-gray-800 px-4 py-3",children:n.jsxs("div",{className:"flex items-center justify-between max-w-7xl mx-auto",children:[n.jsx("div",{className:"flex items-center gap-4",children:e?n.jsxs(_,{variant:"ghost",size:"sm",onClick:()=>a(t),className:"gap-2","data-testid":"button-back",children:[n.jsx(pi,{className:"h-4 w-4"}),r]}):n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"bg-primary/10 p-2 rounded-lg",children:n.jsx(wa,{className:"h-5 w-5 text-primary"})}),n.jsx("h1",{className:"text-xl font-bold dark:text-white",children:"Communications Hub"})]})}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs(_,{variant:o?"default":"ghost",size:"sm",onClick:()=>a("/messages"),className:"gap-2","data-testid":"nav-messages",children:[n.jsx(wa,{className:"h-4 w-4"}),n.jsx("span",{className:"hidden sm:inline",children:"Messages"})]}),n.jsxs(_,{variant:l?"default":"ghost",size:"sm",onClick:()=>a("/phone"),className:"gap-2","data-testid":"nav-phone",children:[n.jsx(bt,{className:"h-4 w-4"}),n.jsx("span",{className:"hidden sm:inline",children:"Phone"})]}),o&&n.jsxs(_,{variant:"ghost",size:"sm",onClick:()=>a("/notifications-settings"),className:"gap-2","data-testid":"nav-settings",children:[n.jsx(ja,{className:"h-4 w-4"}),n.jsx("span",{className:"hidden sm:inline",children:"Settings"})]})]})]})})}function Wie(){const{toast:e}=Ee(),[t,r]=p.useState(!1),[s,a]=p.useState(!1),i=CRe(),[o,l]=p.useState(!1),[c,d]=p.useState({creativity:50,tone:"friendly",length:"same"}),{data:u,isLoading:f}=be({queryKey:["/api/notifications/settings/voice_webhook"]}),{data:h,isLoading:m}=be({queryKey:["/api/critical-monitoring/settings"]}),[g,x]=p.useState({enabled:!0,ringDuration:20,autoReplyMessage:"",offerVoicemail:!0,voicemailGreeting:"",enableVoicemailTranscription:!0,forwardingEnabled:!0,useAIConversation:!0}),[y,v]=p.useState({alertChannels:{sms:!0,push:!0,email:!1},smsRecipients:[],emailRecipients:[],pushRoles:["owner","manager"],failureThreshold:3,cooldownMinutes:30}),[b,w]=p.useState(""),[N,j]=p.useState("");p.useEffect(()=>{u!=null&&u.settings&&x({enabled:u.settings.enabled,ringDuration:u.settings.config.ringDuration,autoReplyMessage:u.settings.config.autoReplyMessage,offerVoicemail:u.settings.config.offerVoicemail,voicemailGreeting:u.settings.config.voicemailGreeting,enableVoicemailTranscription:u.settings.config.enableVoicemailTranscription,forwardingEnabled:u.settings.config.forwardingEnabled,useAIConversation:u.settings.config.useAIConversation!==!1})},[u]),p.useEffect(()=>{h!=null&&h.settings&&v({alertChannels:h.settings.alertChannels,smsRecipients:h.settings.smsRecipients,emailRecipients:h.settings.emailRecipients,pushRoles:h.settings.pushRoles,failureThreshold:h.settings.failureThreshold,cooldownMinutes:h.settings.cooldownMinutes})},[h]);const S=je({mutationFn:async E=>{const F=await fetch("/api/notifications/settings/voice_webhook",{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({enabled:E.enabled,config:{ringDuration:E.ringDuration,autoReplyMessage:E.autoReplyMessage,offerVoicemail:E.offerVoicemail,voicemailGreeting:E.voicemailGreeting,enableVoicemailTranscription:E.enableVoicemailTranscription,forwardingEnabled:E.forwardingEnabled,useAIConversation:E.useAIConversation}})});if(!F.ok)throw new Error("Failed to update settings");return F.json()},onSuccess:()=>{ze.invalidateQueries({queryKey:["/api/notifications/settings/voice_webhook"]}),r(!1),e({title:"Settings Saved",description:"Your notification settings have been updated successfully."})},onError:()=>{e({title:"Error",description:"Failed to update notification settings. Please try again.",variant:"destructive"})}}),C=je({mutationFn:async()=>{const E=await fetch("/api/notifications/rephrase",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({text:g.autoReplyMessage,creativity:c.creativity,tone:c.tone,length:c.length})});if(!E.ok)throw new Error("Failed to rephrase");return E.json()},onSuccess:E=>{k("autoReplyMessage",E.rephrased),e({title:"Message Rephrased",description:"Your message has been rephrased by AI!"})},onError:()=>{e({title:"Error",description:"Failed to rephrase message. Please try again.",variant:"destructive"})}}),k=(E,F)=>{x(B=>({...B,[E]:F})),r(!0)},M=()=>{S.mutate(g)},A=je({mutationFn:async E=>{const F=await fetch("/api/critical-monitoring/settings",{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(E)});if(!F.ok)throw new Error("Failed to update critical monitoring settings");return F.json()},onSuccess:()=>{ze.invalidateQueries({queryKey:["/api/critical-monitoring/settings"]}),a(!1),e({title:"Critical Alert Settings Saved",description:"Your critical monitoring settings have been updated successfully."})},onError:()=>{e({title:"Error",description:"Failed to update critical monitoring settings. Please try again.",variant:"destructive"})}}),P=(E,F)=>{v(B=>({...B,[E]:F})),a(!0)},T=(E,F)=>{v(B=>({...B,alertChannels:{...B.alertChannels,[E]:F}})),a(!0)},I=(E,F)=>{v(B=>({...B,pushRoles:F?[...B.pushRoles,E]:B.pushRoles.filter(Z=>Z!==E)})),a(!0)},L=()=>{const E=b.trim();E&&!y.smsRecipients.includes(E)&&(v(F=>({...F,smsRecipients:[...F.smsRecipients,E]})),w(""),a(!0))},R=E=>{v(F=>({...F,smsRecipients:F.smsRecipients.filter(B=>B!==E)})),a(!0)},G=()=>{const E=N.trim();E&&!y.emailRecipients.includes(E)&&(v(F=>({...F,emailRecipients:[...F.emailRecipients,E]})),j(""),a(!0))},$=E=>{v(F=>({...F,emailRecipients:F.emailRecipients.filter(B=>B!==E)})),a(!0)},D=()=>{A.mutate(y)},W=()=>{h!=null&&h.settings&&(v({alertChannels:h.settings.alertChannels,smsRecipients:h.settings.smsRecipients,emailRecipients:h.settings.emailRecipients,pushRoles:h.settings.pushRoles,failureThreshold:h.settings.failureThreshold,cooldownMinutes:h.settings.cooldownMinutes}),a(!1))};return f?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsx("div",{className:"text-muted-foreground",children:"Loading settings..."})}):n.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-950",children:[n.jsx(g2,{showBackButton:!0,backUrl:"/messages",backLabel:"Back to Messages"}),n.jsxs("div",{className:"container mx-auto py-8 px-4 max-w-4xl",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h1",{className:"text-3xl font-bold mb-2 dark:text-white",children:"Notification Settings"}),n.jsx("p",{className:"text-muted-foreground",children:"Configure how your business communicates with customers through voice calls, SMS, and email."})]}),n.jsxs(O,{className:"mb-6",children:[n.jsxs(ee,{children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(bt,{className:"w-5 h-5"}),n.jsx(te,{children:"Missed Call Auto-Response"})]}),n.jsx(ke,{children:"Automatically text customers when you miss their call with service information and pricing."})]}),n.jsxs(H,{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"space-y-0.5",children:[n.jsx(U,{htmlFor:"voice-enabled",children:"Enable Missed Call Auto-Response"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Send automatic text messages when calls are missed"})]}),n.jsx(Vt,{id:"voice-enabled",checked:g.enabled,onCheckedChange:E=>k("enabled",E),"data-testid":"switch-voice-enabled"})]}),n.jsx(Ot,{}),n.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-950/20 dark:to-purple-950/20",children:[n.jsxs("div",{className:"space-y-0.5 flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(ln,{className:"w-4 h-4 text-blue-600"}),n.jsx(U,{htmlFor:"use-ai-conversation",className:"font-semibold",children:"AI-Powered Scheduling (Recommended)"})]}),n.jsx("p",{className:"text-sm text-muted-foreground",children:g.useAIConversation?" AI will check your calendar and provide real available appointment times instantly":" Using static template - customers will NOT see real availability"}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:g.useAIConversation?"Customers can book appointments through automated SMS conversation":"Switch to AI mode for automated scheduling with real calendar times"})]}),n.jsx(Vt,{id:"use-ai-conversation",checked:g.useAIConversation,onCheckedChange:E=>k("useAIConversation",E),"data-testid":"switch-use-ai-conversation"})]}),n.jsx(Ot,{}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(U,{htmlFor:"ring-duration",children:"Ring Duration (seconds)"}),n.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:'How long to ring your phone before considering the call "missed"'}),n.jsx(se,{id:"ring-duration",type:"number",min:"10",max:"60",value:g.ringDuration,onChange:E=>k("ringDuration",parseInt(E.target.value)),"data-testid":"input-ring-duration"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Recommended: 20-30 seconds (too short may miss calls, too long frustrates customers)"}),t&&n.jsx(_,{onClick:M,disabled:S.isPending,size:"sm",className:"mt-2",children:S.isPending?"Saving...":"Save Ring Duration"})]}),n.jsx(Ot,{}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(U,{htmlFor:"auto-reply-message",children:g.useAIConversation?"Static Template Message (Backup)":"Auto-Reply Text Message"}),n.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:g.useAIConversation?"This template is NOT used when AI mode is enabled. AI generates dynamic responses with real calendar data.":"The static message customers receive when you miss their call"}),n.jsx(un,{id:"auto-reply-message",value:g.autoReplyMessage,onChange:E=>k("autoReplyMessage",E.target.value),rows:18,className:"font-mono text-sm",placeholder:"Enter your auto-reply message...","data-testid":"textarea-auto-reply-message"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Tip: Include your services, pricing, and website link. Keep it friendly and professional!"}),n.jsxs("div",{className:"text-xs text-muted-foreground mt-2",children:["Character count: ",g.autoReplyMessage.length,g.autoReplyMessage.length>1600&&n.jsx("span",{className:"text-destructive ml-2",children:"(Warning: Long messages may be split into multiple texts)"})]}),n.jsxs("div",{className:"mt-4 p-4 border rounded-lg bg-gradient-to-r from-purple-50 to-blue-50 dark:from-purple-950/20 dark:to-blue-950/20",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(ln,{className:"w-4 h-4 text-purple-600"}),n.jsx(U,{className:"text-sm font-semibold",children:"AI Rephrase Assistant"})]}),n.jsxs(_,{variant:"ghost",size:"sm",onClick:()=>l(!o),"data-testid":"button-toggle-rephrase",children:[o?"Hide":"Show"," Controls"]})]}),o&&n.jsxs("div",{className:"space-y-4 mt-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs(U,{className:"text-sm",children:["Creativity Level: ",c.creativity,"%"]}),n.jsx("span",{className:"text-xs text-muted-foreground",children:c.creativity<30?"Minimal changes":c.creativity<70?"Moderate rewrite":"Creative rewrite"})]}),n.jsx(ai,{value:[c.creativity],onValueChange:([E])=>d(F=>({...F,creativity:E})),min:0,max:100,step:10,className:"w-full","data-testid":"slider-creativity"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"0% = Keep your exact words, just fix grammar  100% = Completely rewrite with fresh language"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(U,{className:"text-sm",children:"Tone"}),n.jsxs(Pt,{value:c.tone,onValueChange:E=>d(F=>({...F,tone:E})),children:[n.jsx(kt,{"data-testid":"select-tone",children:n.jsx(Tt,{})}),n.jsxs(Mt,{children:[n.jsx(ve,{value:"friendly",children:"Friendly"}),n.jsx(ve,{value:"professional",children:"Professional"}),n.jsx(ve,{value:"casual",children:"Casual"}),n.jsx(ve,{value:"formal",children:"Formal"})]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(U,{className:"text-sm",children:"Message Length"}),n.jsxs(Pt,{value:c.length,onValueChange:E=>d(F=>({...F,length:E})),children:[n.jsx(kt,{"data-testid":"select-length",children:n.jsx(Tt,{})}),n.jsxs(Mt,{children:[n.jsx(ve,{value:"shorter",children:"Shorter (more concise)"}),n.jsx(ve,{value:"same",children:"Same length"}),n.jsx(ve,{value:"longer",children:"Longer (more detailed)"})]})]})]}),n.jsx(_,{onClick:()=>C.mutate(),disabled:C.isPending||!g.autoReplyMessage,className:"w-full",variant:"default","data-testid":"button-rephrase",children:C.isPending?n.jsxs(n.Fragment,{children:[n.jsx(nt,{className:"w-4 h-4 mr-2 animate-spin"}),"Rephrasing..."]}):n.jsxs(n.Fragment,{children:[n.jsx(ln,{className:"w-4 h-4 mr-2"}),"Rephrase with AI"]})}),n.jsx("p",{className:"text-xs text-muted-foreground italic",children:"AI will rephrase your message based on your preferences. You can always undo changes manually."})]})]})]}),n.jsx(Ot,{}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"space-y-0.5",children:[n.jsx(U,{htmlFor:"offer-voicemail",children:"Offer Voicemail Option"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Allow customers to leave a voicemail message"})]}),n.jsx(Vt,{id:"offer-voicemail",checked:g.offerVoicemail,onCheckedChange:E=>k("offerVoicemail",E),"data-testid":"switch-offer-voicemail"})]}),g.offerVoicemail&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"space-y-2 pl-4",children:[n.jsx(U,{htmlFor:"voicemail-greeting",children:"Voicemail Greeting"}),n.jsx(un,{id:"voicemail-greeting",value:g.voicemailGreeting,onChange:E=>k("voicemailGreeting",E.target.value),rows:3,placeholder:"Sorry we missed your call...","data-testid":"textarea-voicemail-greeting"})]}),n.jsxs("div",{className:"flex items-center justify-between pl-4",children:[n.jsxs("div",{className:"space-y-0.5",children:[n.jsx(U,{htmlFor:"voicemail-transcription",children:"Enable Voicemail Transcription"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Convert voicemails to text and receive via SMS"})]}),n.jsx(Vt,{id:"voicemail-transcription",checked:g.enableVoicemailTranscription,onCheckedChange:E=>k("enableVoicemailTranscription",E),"data-testid":"switch-voicemail-transcription"})]})]})]}),n.jsx(Ot,{}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"space-y-0.5",children:[n.jsx(U,{htmlFor:"forwarding-enabled",children:"Forward Calls to Your Phone"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Ring your personal phone when customers call"})]}),n.jsx(Vt,{id:"forwarding-enabled",checked:g.forwardingEnabled,onCheckedChange:E=>k("forwardingEnabled",E),"data-testid":"switch-forwarding-enabled"})]})]})]}),n.jsxs(O,{className:"mb-6",children:[n.jsxs(ee,{children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Yc,{className:"w-5 h-5"}),n.jsx(te,{children:"Push Notifications"}),i.isSubscribed&&n.jsx("span",{className:"text-xs bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-100 px-2 py-1 rounded",children:"Active"})]}),n.jsx(ke,{children:"Receive real-time notifications for new messages, appointments, and important updates."})]}),n.jsxs(H,{className:"space-y-4",children:[i.error&&n.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:n.jsx("p",{className:"text-sm text-red-800 dark:text-red-200",children:i.error})}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-3",children:n.jsxs("p",{className:"text-xs font-mono",children:[n.jsx("strong",{children:"DEBUG:"})," permission=",i.permission," | isSubscribed=",i.isSubscribed.toString()," | isLoading=",i.isLoading.toString()," | buttonDisabled=",(i.isLoading||i.permission==="denied").toString()]})}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"space-y-0.5",children:[n.jsx(U,{children:"Notification Status"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:i.isLoading?"Checking...":i.isSubscribed?"You are subscribed to push notifications":"Not subscribed"})]}),n.jsx("div",{className:"flex gap-2",children:i.isSubscribed?n.jsxs(n.Fragment,{children:[n.jsxs(_,{variant:"outline",onClick:async()=>{const E=await i.sendTestNotification();e(E?{title:"Test Sent",description:"Check your notifications!"}:{title:"Failed",description:"Could not send test notification.",variant:"destructive"})},disabled:i.isLoading,"data-testid":"button-test-push",children:[n.jsx(Vi,{className:"w-4 h-4 mr-2"}),"Send Test"]}),n.jsx(_,{variant:"outline",onClick:async()=>{await i.unsubscribe()&&e({title:"Unsubscribed",description:"You will no longer receive push notifications."})},disabled:i.isLoading,"data-testid":"button-unsubscribe-push",children:"Disable"})]}):n.jsxs(_,{onClick:async()=>{await i.subscribe()&&e({title:"Subscribed!",description:"You will now receive push notifications."})},disabled:i.isLoading||i.permission==="denied","data-testid":"button-subscribe-push",children:[n.jsx(Yc,{className:"w-4 h-4 mr-2"}),i.isLoading?"Loading...":"Enable Notifications"]})})]}),i.permission==="denied"&&n.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg p-4",children:n.jsxs("p",{className:"text-sm text-amber-800 dark:text-amber-200",children:[n.jsx("strong",{children:"Notifications Blocked:"})," You have blocked notifications for this site. To enable them, click the lock icon in your browser's address bar and allow notifications."]})}),n.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg border border-blue-200 dark:border-blue-800",children:n.jsxs("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:[n.jsx("strong",{children:"What are push notifications?"})," Push notifications allow you to receive real-time alerts for new customer messages, appointments, and important updates even when the app is not open. They work on desktop and mobile devices."]})})]})]})]}),n.jsxs(O,{className:"mb-6",children:[n.jsxs(ee,{children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(on,{className:"w-5 h-5"}),n.jsx(te,{children:"SMS Appointment Reminders"})]}),n.jsx(ke,{children:"Automatic reminders are sent the day before appointments at 4:00 PM."})]}),n.jsx(H,{children:n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg border border-blue-200 dark:border-blue-800",children:n.jsxs("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:[n.jsx("strong",{children:"How it works:"})," When customers book appointments, SMS reminders are automatically scheduled for 4:00 PM the day before their appointment. The reminders include appointment details, service information, and options to reschedule or cancel. Email reminders are also sent if the customer provided an email address."]})}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("p",{className:"text-sm font-medium",children:"Reminder Message Preview:"}),n.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 p-3 rounded border border-gray-200 dark:border-gray-700 text-sm font-mono",children:["Hi [Name], this is Clean Machine Auto Detail reminding you of your appointment tomorrow at [Time] at [Address].",n.jsx("br",{}),n.jsx("br",{}),"Services: [Service List]",n.jsx("br",{}),"Vehicle: [Vehicle Info]",n.jsx("br",{}),n.jsx("br",{}),"Please ensure vehicle is accessible and keys available. Remove valuables.",n.jsx("br",{}),n.jsx("br",{}),'To reschedule: Reply "RESCHEDULE"',n.jsx("br",{}),'To cancel: Reply "CANCEL"',n.jsx("br",{}),"Questions? Text back or call (918) 856-5304"]})]}),n.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 p-4 rounded-lg border border-green-200 dark:border-green-800",children:n.jsxs("p",{className:"text-sm text-green-800 dark:text-green-200",children:[n.jsx("strong",{children:"Status:"})," SMS appointment reminders are active and working. All new appointments automatically receive reminders. No additional configuration needed."]})})]})})]}),n.jsxs(O,{className:"mb-6",children:[n.jsxs(ee,{children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(zn,{className:"w-5 h-5 text-orange-500"}),n.jsx(te,{children:"Critical System Alerts"})]}),n.jsx(ke,{children:"Configure multi-channel alerts for critical system failures (calendar, payments, SMS, email integrations)"})]}),n.jsx(H,{className:"space-y-6",children:m?n.jsx("div",{className:"text-center py-4 text-muted-foreground",children:"Loading critical monitoring settings..."}):n.jsxs(n.Fragment,{children:[(h==null?void 0:h.monitoring)&&n.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg border border-blue-200 dark:border-blue-800",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-blue-900 dark:text-blue-100",children:"Monitoring Status"}),n.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300 mt-1",children:["Currently monitoring ",h.monitoring.integrationsCount," critical integrations"]})]}),n.jsx(Ya,{className:"w-8 h-8 text-blue-500"})]})}),n.jsxs("div",{className:"space-y-4",children:[n.jsx(U,{className:"text-base font-semibold",children:"Alert Channels"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[n.jsxs("div",{className:"space-y-0.5",children:[n.jsx(U,{htmlFor:"critical-sms",children:"SMS Alerts"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Send text messages"})]}),n.jsx(Vt,{id:"critical-sms",checked:y.alertChannels.sms,onCheckedChange:E=>T("sms",E),"data-testid":"switch-critical-sms"})]}),n.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[n.jsxs("div",{className:"space-y-0.5",children:[n.jsx(U,{htmlFor:"critical-push",children:"Push Notifications"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Browser notifications"})]}),n.jsx(Vt,{id:"critical-push",checked:y.alertChannels.push,onCheckedChange:E=>T("push",E),"data-testid":"switch-critical-push"})]}),n.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[n.jsxs("div",{className:"space-y-0.5",children:[n.jsx(U,{htmlFor:"critical-email",children:"Email Alerts"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Future feature"})]}),n.jsx(Vt,{id:"critical-email",checked:y.alertChannels.email,onCheckedChange:E=>T("email",E),disabled:!0,"data-testid":"switch-critical-email"})]})]})]}),n.jsx(Ot,{}),y.alertChannels.sms&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(U,{className:"text-base font-semibold",children:"SMS Recipients"}),n.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Phone numbers to receive SMS alerts (include country code, e.g., +19185551234)"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(se,{placeholder:"+19185551234",value:b,onChange:E=>w(E.target.value),onKeyPress:E=>E.key==="Enter"&&L(),"data-testid":"input-new-sms-recipient"}),n.jsx(_,{onClick:L,variant:"outline","data-testid":"button-add-sms",children:n.jsx(Un,{className:"w-4 h-4"})})]}),y.smsRecipients.length>0&&n.jsx("div",{className:"space-y-2",children:y.smsRecipients.map(E=>n.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 dark:bg-gray-800 rounded",children:[n.jsx("span",{className:"text-sm font-mono",children:E}),n.jsx(_,{variant:"ghost",size:"sm",onClick:()=>R(E),"data-testid":`button-remove-sms-${E}`,children:n.jsx(Nr,{className:"w-4 h-4 text-red-500"})})]},E))})]}),y.alertChannels.email&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(U,{className:"text-base font-semibold",children:"Email Recipients"}),n.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Email addresses to receive alert emails"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(se,{type:"email",placeholder:"email@example.com",value:N,onChange:E=>j(E.target.value),onKeyPress:E=>E.key==="Enter"&&G(),"data-testid":"input-new-email-recipient"}),n.jsx(_,{onClick:G,variant:"outline","data-testid":"button-add-email",children:n.jsx(Un,{className:"w-4 h-4"})})]}),y.emailRecipients.length>0&&n.jsx("div",{className:"space-y-2",children:y.emailRecipients.map(E=>n.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 dark:bg-gray-800 rounded",children:[n.jsx("span",{className:"text-sm",children:E}),n.jsx(_,{variant:"ghost",size:"sm",onClick:()=>$(E),"data-testid":`button-remove-email-${E}`,children:n.jsx(Nr,{className:"w-4 h-4 text-red-500"})})]},E))})]}),y.alertChannels.push&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(U,{className:"text-base font-semibold",children:"Push Notification Roles"}),n.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"User roles that will receive browser push notifications"})]}),n.jsxs("div",{className:"flex gap-4",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("input",{type:"checkbox",id:"role-owner",checked:y.pushRoles.includes("owner"),onChange:E=>I("owner",E.target.checked),className:"w-4 h-4","data-testid":"checkbox-role-owner"}),n.jsx(U,{htmlFor:"role-owner",children:"Owner"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("input",{type:"checkbox",id:"role-manager",checked:y.pushRoles.includes("manager"),onChange:E=>I("manager",E.target.checked),className:"w-4 h-4","data-testid":"checkbox-role-manager"}),n.jsx(U,{htmlFor:"role-manager",children:"Manager"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("input",{type:"checkbox",id:"role-employee",checked:y.pushRoles.includes("employee"),onChange:E=>I("employee",E.target.checked),className:"w-4 h-4","data-testid":"checkbox-role-employee"}),n.jsx(U,{htmlFor:"role-employee",children:"Employee"})]})]})]}),n.jsx(Ot,{}),n.jsxs("div",{className:"space-y-4",children:[n.jsx(U,{className:"text-base font-semibold",children:"Alert Thresholds"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(U,{htmlFor:"failure-threshold",children:"Failure Threshold"}),n.jsx(se,{id:"failure-threshold",type:"number",min:"1",max:"10",value:y.failureThreshold,onChange:E=>P("failureThreshold",parseInt(E.target.value)),"data-testid":"input-failure-threshold"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Number of consecutive failures before sending alert"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(U,{htmlFor:"cooldown-minutes",children:"Cooldown (minutes)"}),n.jsx(se,{id:"cooldown-minutes",type:"number",min:"5",max:"1440",value:y.cooldownMinutes,onChange:E=>P("cooldownMinutes",parseInt(E.target.value)),"data-testid":"input-cooldown-minutes"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Minimum time between repeat alerts"})]})]})]}),n.jsxs("div",{className:"flex gap-2 pt-4",children:[n.jsx(_,{onClick:D,disabled:!s||A.isPending,"data-testid":"button-save-critical",children:A.isPending?n.jsxs(n.Fragment,{children:[n.jsx(nt,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):n.jsxs(n.Fragment,{children:[n.jsx(fr,{className:"mr-2 h-4 w-4"}),"Save Critical Alert Settings"]})}),n.jsxs(_,{variant:"outline",onClick:W,disabled:!s,"data-testid":"button-reset-critical",children:[n.jsx(E0,{className:"mr-2 h-4 w-4"}),"Reset"]})]})]})})]})]})]})}const MRe=fe.object({name:fe.string().min(1,{message:"Name is required"}),description:fe.string().min(1,{message:"Description is required"}),serviceId:fe.number().optional(),addOnService:fe.boolean().default(!1),discountPercentage:fe.number().min(0).max(100).optional().nullable().transform(e=>e===null?void 0:e),discountAmount:fe.number().min(0).optional().nullable().transform(e=>e===null?void 0:e),active:fe.boolean().default(!0),displayOrder:fe.number().default(0),minimumPurchaseAmount:fe.number().min(0).optional().nullable().transform(e=>e===null?void 0:e),applicableServiceIds:fe.array(fe.string()).default([]),validityDays:fe.number().min(1).default(3)}).refine(e=>e.discountPercentage!==void 0||e.discountAmount!==void 0,{message:"Either discount percentage or discount amount must be provided",path:["discountPercentage"]});function _Re(){const{toast:e}=Ee(),t=cs(),[r,s]=p.useState(!1),[a,i]=p.useState(!1),[o,l]=p.useState(null),c=fi({resolver:hi(MRe),defaultValues:{name:"",description:"",serviceId:void 0,addOnService:!1,discountPercentage:void 0,discountAmount:void 0,active:!0,displayOrder:0,minimumPurchaseAmount:void 0,applicableServiceIds:[],validityDays:3}}),{data:d,isLoading:u,isError:f,refetch:h}=be({queryKey:["/api/upsell/offers"],queryFn:async()=>{const M=await fetch("/api/upsell/offers");if(!M.ok)throw new Error("Failed to fetch upsell offers");return(await M.json()).offers}}),{data:m,isLoading:g}=be({queryKey:["/api/services"],queryFn:async()=>{const M=await fetch("/api/services");if(!M.ok)throw new Error("Failed to fetch services");return(await M.json()).services}}),x=je({mutationFn:async M=>await Ne("/api/upsell/offers",{method:"POST",body:JSON.stringify(M)}),onSuccess:()=>{e({title:"Success",description:"Upsell offer created successfully",duration:5e3}),t.invalidateQueries({queryKey:["/api/upsell/offers"]}),s(!1),c.reset()},onError:M=>{e({title:"Error",description:`Failed to create upsell offer: ${M.message}`,variant:"destructive",duration:5e3})}}),y=je({mutationFn:async({id:M,data:A})=>await Ne(`/api/upsell/offers/${M}`,{method:"PUT",body:JSON.stringify(A)}),onSuccess:()=>{e({title:"Success",description:"Upsell offer updated successfully",duration:5e3}),t.invalidateQueries({queryKey:["/api/upsell/offers"]}),s(!1),c.reset()},onError:M=>{e({title:"Error",description:`Failed to update upsell offer: ${M.message}`,variant:"destructive",duration:5e3})}}),v=je({mutationFn:async M=>await Ne(`/api/upsell/offers/${M}`,{method:"DELETE"}),onSuccess:()=>{e({title:"Success",description:"Upsell offer deleted successfully",duration:5e3}),t.invalidateQueries({queryKey:["/api/upsell/offers"]}),i(!1),l(null)},onError:M=>{e({title:"Error",description:`Failed to delete upsell offer: ${M.message}`,variant:"destructive",duration:5e3})}});p.useEffect(()=>{o&&r&&c.reset({name:o.name,description:o.description,serviceId:o.serviceId,addOnService:o.addOnService,discountPercentage:o.discountPercentage,discountAmount:o.discountAmount,active:o.active,displayOrder:o.displayOrder,minimumPurchaseAmount:o.minimumPurchaseAmount,applicableServiceIds:o.applicableServiceIds||[],validityDays:o.validityDays})},[o,r,c]);const b=M=>{o?y.mutate({id:o.id,data:M}):x.mutate(M)},w=()=>{l(null),c.reset({name:"",description:"",serviceId:void 0,addOnService:!1,discountPercentage:void 0,discountAmount:void 0,active:!0,displayOrder:0,minimumPurchaseAmount:void 0,applicableServiceIds:[],validityDays:3}),s(!0)},N=M=>{l(M),s(!0)},j=M=>{l(M),i(!0)},S=()=>{o&&v.mutate(o.id)},C=M=>M===void 0?"":`$${M.toFixed(2)}`,k=M=>M===void 0?"":`${M}%`;return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("h2",{className:"text-2xl font-bold",children:"Upsell Offers Management"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(_,{onClick:()=>h(),variant:"outline",className:"flex items-center gap-1",children:[n.jsx(Jc,{className:"w-4 h-4"}),"Refresh"]}),n.jsxs(_,{onClick:w,className:"flex items-center gap-1",children:[n.jsx(Un,{className:"w-4 h-4"}),"Create New Offer"]})]})]}),u?n.jsx(O,{children:n.jsx(H,{className:"pt-6",children:n.jsx("p",{className:"text-center",children:"Loading upsell offers..."})})}):f?n.jsx(O,{children:n.jsx(H,{className:"pt-6",children:n.jsx("p",{className:"text-center text-red-500",children:"Error loading upsell offers"})})}):n.jsx(n.Fragment,{children:d&&d.length>0?n.jsxs(hs,{children:[n.jsx(Xte,{children:"List of upsell offers that can be applied after purchase"}),n.jsx(ms,{children:n.jsxs(vn,{children:[n.jsx(Ve,{children:"Name"}),n.jsx(Ve,{children:"Service"}),n.jsx(Ve,{children:"Discount"}),n.jsx(Ve,{children:"Status"}),n.jsx(Ve,{children:"Validity"}),n.jsx(Ve,{className:"text-right",children:"Actions"})]})}),n.jsx(ps,{children:d.map(M=>{var A;return n.jsxs(vn,{children:[n.jsx(Ue,{className:"font-medium",children:M.name}),n.jsx(Ue,{children:((A=m==null?void 0:m.find(P=>P.id===M.serviceId))==null?void 0:A.name)||"Add-on Service"}),n.jsx(Ue,{children:M.discountPercentage?k(M.discountPercentage):C(M.discountAmount)}),n.jsx(Ue,{children:n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${M.active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:M.active?"Active":"Inactive"})}),n.jsxs(Ue,{children:[M.validityDays," days"]}),n.jsxs(Ue,{className:"text-right flex justify-end gap-2",children:[n.jsxs(_,{onClick:()=>N(M),variant:"outline",size:"sm",className:"h-8 w-8 p-0",children:[n.jsx(No,{className:"h-4 w-4"}),n.jsx("span",{className:"sr-only",children:"Edit"})]}),n.jsxs(_,{onClick:()=>j(M),variant:"outline",size:"sm",className:"h-8 w-8 p-0 text-red-500 hover:text-red-600",children:[n.jsx(Nr,{className:"h-4 w-4"}),n.jsx("span",{className:"sr-only",children:"Delete"})]})]})]},M.id)})})]}):n.jsx(O,{children:n.jsx(H,{className:"pt-6",children:n.jsx("p",{className:"text-center",children:"No upsell offers found. Create your first offer!"})})})}),n.jsx(At,{open:r,onOpenChange:s,children:n.jsxs(_t,{className:"sm:max-w-[625px] max-h-[90vh] overflow-y-auto",children:[n.jsxs($t,{children:[n.jsx(Et,{children:o?"Edit Upsell Offer":"Create New Upsell Offer"}),n.jsx(an,{children:o?"Update the details of this upsell offer":"Create a new upsell offer to present to customers after booking"})]}),n.jsx(mi,{...c,children:n.jsxs("form",{onSubmit:c.handleSubmit(b),className:"space-y-6",children:[n.jsx(Ye,{control:c.control,name:"name",render:({field:M})=>n.jsxs(We,{children:[n.jsx(qe,{children:"Offer Name"}),n.jsx(Qe,{children:n.jsx(se,{placeholder:"e.g., 20% Off Headlight Restoration",...M})}),n.jsx(cn,{children:"A descriptive name for the upsell offer"}),n.jsx(Ze,{})]})}),n.jsx(Ye,{control:c.control,name:"description",render:({field:M})=>n.jsxs(We,{children:[n.jsx(qe,{children:"Description"}),n.jsx(Qe,{children:n.jsx(un,{placeholder:"Describe the value proposition of this offer...",rows:3,...M})}),n.jsx(cn,{children:"A compelling description of what the customer will get"}),n.jsx(Ze,{})]})}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsx(Ye,{control:c.control,name:"addOnService",render:({field:M})=>n.jsxs(We,{children:[n.jsxs("div",{className:"flex flex-row items-center justify-between rounded-lg border p-3 shadow-sm",children:[n.jsxs("div",{className:"space-y-0.5",children:[n.jsx(qe,{children:"Add-on Service"}),n.jsx(cn,{children:"Is this an add-on rather than a full service?"})]}),n.jsx(Qe,{children:n.jsx(Vt,{checked:M.value,onCheckedChange:M.onChange})})]}),n.jsx(Ze,{})]})}),n.jsx(Ye,{control:c.control,name:"active",render:({field:M})=>n.jsxs(We,{children:[n.jsxs("div",{className:"flex flex-row items-center justify-between rounded-lg border p-3 shadow-sm",children:[n.jsxs("div",{className:"space-y-0.5",children:[n.jsx(qe,{children:"Active"}),n.jsx(cn,{children:"Make this offer available to customers"})]}),n.jsx(Qe,{children:n.jsx(Vt,{checked:M.value,onCheckedChange:M.onChange})})]}),n.jsx(Ze,{})]})})]}),n.jsx(Ye,{control:c.control,name:"serviceId",render:({field:M})=>{var A;return n.jsxs(We,{children:[n.jsx(qe,{children:"Service"}),n.jsxs(Pt,{onValueChange:P=>M.onChange(parseInt(P)),value:((A=M.value)==null?void 0:A.toString())||"",children:[n.jsx(Qe,{children:n.jsx(kt,{children:n.jsx(Tt,{placeholder:"Select a service"})})}),n.jsx(Mt,{children:g?n.jsx(ve,{value:"loading",disabled:!0,children:"Loading services..."}):m==null?void 0:m.map(P=>n.jsxs(ve,{value:P.id.toString(),children:[P.name," - ",P.priceRange]},P.id))})]}),n.jsx(cn,{children:"The service this upsell offers at a discount"}),n.jsx(Ze,{})]})}}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsx(Ye,{control:c.control,name:"discountPercentage",render:({field:M})=>n.jsxs(We,{children:[n.jsx(qe,{children:"Discount Percentage"}),n.jsx(Qe,{children:n.jsx(se,{type:"number",min:"0",max:"100",placeholder:"e.g., 15",...M,value:M.value===void 0?"":M.value,onChange:A=>{const P=A.target.value===""?void 0:parseFloat(A.target.value);M.onChange(P),P!==void 0&&c.setValue("discountAmount",void 0)}})}),n.jsx(cn,{children:"Percentage discount (e.g., 15 for 15% off)"}),n.jsx(Ze,{})]})}),n.jsx(Ye,{control:c.control,name:"discountAmount",render:({field:M})=>n.jsxs(We,{children:[n.jsx(qe,{children:"Discount Amount"}),n.jsx(Qe,{children:n.jsx(se,{type:"number",min:"0",placeholder:"e.g., 25",...M,value:M.value===void 0?"":M.value,onChange:A=>{const P=A.target.value===""?void 0:parseFloat(A.target.value);M.onChange(P),P!==void 0&&c.setValue("discountPercentage",void 0)}})}),n.jsx(cn,{children:"Fixed amount discount (e.g., $25 off)"}),n.jsx(Ze,{})]})})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsx(Ye,{control:c.control,name:"validityDays",render:({field:M})=>n.jsxs(We,{children:[n.jsx(qe,{children:"Validity (Days)"}),n.jsx(Qe,{children:n.jsx(se,{type:"number",min:"1",placeholder:"e.g., 3",...M,value:M.value===void 0?"3":M.value,onChange:A=>M.onChange(parseInt(A.target.value))})}),n.jsx(cn,{children:"How many days the offer is valid after booking"}),n.jsx(Ze,{})]})}),n.jsx(Ye,{control:c.control,name:"displayOrder",render:({field:M})=>n.jsxs(We,{children:[n.jsx(qe,{children:"Display Order"}),n.jsx(Qe,{children:n.jsx(se,{type:"number",min:"0",placeholder:"e.g., 1",...M,value:M.value===void 0?"0":M.value,onChange:A=>M.onChange(parseInt(A.target.value))})}),n.jsx(cn,{children:"Order priority (higher numbers shown first)"}),n.jsx(Ze,{})]})})]}),n.jsx(Ye,{control:c.control,name:"minimumPurchaseAmount",render:({field:M})=>n.jsxs(We,{children:[n.jsx(qe,{children:"Minimum Purchase Amount"}),n.jsx(Qe,{children:n.jsx(se,{type:"number",min:"0",placeholder:"e.g., 150",...M,value:M.value===void 0?"":M.value,onChange:A=>{const P=A.target.value===""?void 0:parseFloat(A.target.value);M.onChange(P)}})}),n.jsx(cn,{children:"Minimum purchase amount required to qualify for this offer (optional)"}),n.jsx(Ze,{})]})}),n.jsx(Ye,{control:c.control,name:"applicableServiceIds",render:({field:M})=>n.jsxs(We,{children:[n.jsx(qe,{children:"Applicable Services"}),n.jsx(cn,{className:"mb-2",children:"Select services this upsell can be offered with (none selected means all services)"}),n.jsx("div",{className:"grid grid-cols-2 gap-2 mt-1",children:g?n.jsx("p",{children:"Loading services..."}):m==null?void 0:m.map(A=>n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(as,{id:`service-${A.id}`,checked:M.value.includes(A.name),onCheckedChange:P=>{P?M.onChange([...M.value,A.name]):M.onChange(M.value.filter(T=>T!==A.name))}}),n.jsx("label",{htmlFor:`service-${A.id}`,className:"text-sm leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:A.name})]},A.id))}),n.jsx(Ze,{})]})}),n.jsxs(Sn,{children:[n.jsx(_,{type:"button",variant:"outline",onClick:()=>s(!1),children:"Cancel"}),n.jsx(_,{type:"submit",disabled:x.isPending||y.isPending,children:x.isPending||y.isPending?n.jsx(n.Fragment,{children:"Saving..."}):o?n.jsx(n.Fragment,{children:"Update Offer"}):n.jsx(n.Fragment,{children:"Create Offer"})})]})]})})]})}),n.jsx(At,{open:a,onOpenChange:i,children:n.jsxs(_t,{className:"sm:max-w-[425px]",children:[n.jsxs($t,{children:[n.jsx(Et,{children:"Confirm Deletion"}),n.jsxs(an,{children:['Are you sure you want to delete the upsell offer "',o==null?void 0:o.name,'"? This action cannot be undone.']})]}),n.jsxs(Sn,{className:"gap-2 sm:gap-0 mt-4",children:[n.jsx(_,{type:"button",variant:"outline",onClick:()=>i(!1),children:"Cancel"}),n.jsx(_,{type:"button",variant:"destructive",onClick:S,disabled:v.isPending,children:v.isPending?"Deleting...":"Delete"})]})]})})]})}const PRe=fe.object({customerId:fe.number().min(1,"Customer is required"),serviceId:fe.number().min(1,"Service is required"),frequency:fe.string().min(1,"Frequency is required"),nextScheduledDate:fe.string().min(1,"Next scheduled date is required"),preferredTime:fe.string().optional(),preferredDayOfWeek:fe.number().optional(),preferredDayOfMonth:fe.number().optional(),notes:fe.string().optional(),autoRenew:fe.boolean().default(!0)});function TRe(){const[e,t]=p.useState(!1),[r,s]=p.useState(""),a=cs(),{data:i,isLoading:o}=be({queryKey:["/api/recurring-services"]}),{data:l}=be({queryKey:["/api/customers"]}),{data:c}=be({queryKey:["/api/services"]}),d=(i==null?void 0:i.data)||[],u=(l==null?void 0:l.data)||[],f=(c==null?void 0:c.data)||[],h=fi({resolver:hi(PRe),defaultValues:{autoRenew:!0}}),m=je({mutationFn:async k=>await Ne("POST","/api/recurring-services",k),onSuccess:()=>{a.invalidateQueries({queryKey:["/api/recurring-services"]}),t(!1),h.reset()}}),g=je({mutationFn:async({id:k,reason:M})=>await Ne("POST",`/api/recurring-services/${k}/pause`,{reason:M}),onSuccess:()=>{a.invalidateQueries({queryKey:["/api/recurring-services"]})}}),x=je({mutationFn:async k=>await Ne("POST",`/api/recurring-services/${k}/resume`,{}),onSuccess:()=>{a.invalidateQueries({queryKey:["/api/recurring-services"]})}}),y=je({mutationFn:async k=>await Ne("POST",`/api/recurring-services/${k}/cancel`,{}),onSuccess:()=>{a.invalidateQueries({queryKey:["/api/recurring-services"]})}}),v=d.filter(k=>{var M,A,P;return((M=k.customerName)==null?void 0:M.toLowerCase().includes(r.toLowerCase()))||((A=k.serviceName)==null?void 0:A.toLowerCase().includes(r.toLowerCase()))||((P=k.customerPhone)==null?void 0:P.includes(r))}),b=v.filter(k=>k.status==="active"),w=v.filter(k=>k.status==="paused"),N=v.filter(k=>k.status==="cancelled"),j=k=>{m.mutate(k)},S=k=>{const M={active:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",paused:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200",cancelled:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"};return n.jsx(ge,{className:M[k]||M.active,children:k.toUpperCase()})},C=k=>({weekly:"Weekly",biweekly:"Every 2 Weeks",monthly:"Monthly",quarterly:"Quarterly",every_3_months:"Every 3 Months",every_6_months:"Every 6 Months",yearly:"Yearly"})[k]||k;return o?n.jsx("div",{className:"p-6 text-center",children:"Loading recurring services..."}):n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold",children:"Recurring Services"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage customer subscription schedules"})]}),n.jsxs(At,{open:e,onOpenChange:t,children:[n.jsx(pl,{asChild:!0,children:n.jsxs(_,{"data-testid":"button-create-recurring-service",children:[n.jsx(Un,{className:"h-4 w-4 mr-2"}),"New Recurring Service"]})}),n.jsxs(_t,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[n.jsx($t,{children:n.jsx(Et,{children:"Create Recurring Service"})}),n.jsx(mi,{...h,children:n.jsxs("form",{onSubmit:h.handleSubmit(j),className:"space-y-4",children:[n.jsx(Ye,{control:h.control,name:"customerId",render:({field:k})=>{var M;return n.jsxs(We,{children:[n.jsx(qe,{children:"Customer"}),n.jsxs(Pt,{onValueChange:A=>k.onChange(parseInt(A)),value:(M=k.value)==null?void 0:M.toString(),children:[n.jsx(Qe,{children:n.jsx(kt,{"data-testid":"select-customer",children:n.jsx(Tt,{placeholder:"Select customer"})})}),n.jsx(Mt,{children:u.map(A=>n.jsxs(ve,{value:A.id.toString(),children:[A.name," - ",A.phone]},A.id))})]}),n.jsx(Ze,{})]})}}),n.jsx(Ye,{control:h.control,name:"serviceId",render:({field:k})=>{var M;return n.jsxs(We,{children:[n.jsx(qe,{children:"Service"}),n.jsxs(Pt,{onValueChange:A=>k.onChange(parseInt(A)),value:(M=k.value)==null?void 0:M.toString(),children:[n.jsx(Qe,{children:n.jsx(kt,{"data-testid":"select-service",children:n.jsx(Tt,{placeholder:"Select service"})})}),n.jsx(Mt,{children:f.map(A=>n.jsx(ve,{value:A.id.toString(),children:A.name},A.id))})]}),n.jsx(Ze,{})]})}}),n.jsx(Ye,{control:h.control,name:"frequency",render:({field:k})=>n.jsxs(We,{children:[n.jsx(qe,{children:"Frequency"}),n.jsxs(Pt,{onValueChange:k.onChange,value:k.value,children:[n.jsx(Qe,{children:n.jsx(kt,{"data-testid":"select-frequency",children:n.jsx(Tt,{placeholder:"Select frequency"})})}),n.jsxs(Mt,{children:[n.jsx(ve,{value:"weekly",children:"Weekly"}),n.jsx(ve,{value:"biweekly",children:"Every 2 Weeks"}),n.jsx(ve,{value:"monthly",children:"Monthly"}),n.jsx(ve,{value:"quarterly",children:"Quarterly"}),n.jsx(ve,{value:"every_3_months",children:"Every 3 Months"}),n.jsx(ve,{value:"every_6_months",children:"Every 6 Months"}),n.jsx(ve,{value:"yearly",children:"Yearly"})]})]}),n.jsx(Ze,{})]})}),n.jsx(Ye,{control:h.control,name:"nextScheduledDate",render:({field:k})=>n.jsxs(We,{children:[n.jsx(qe,{children:"Next Scheduled Date"}),n.jsx(Qe,{children:n.jsx(se,{type:"date",...k,"data-testid":"input-next-date"})}),n.jsx(Ze,{})]})}),n.jsx(Ye,{control:h.control,name:"preferredTime",render:({field:k})=>n.jsxs(We,{children:[n.jsx(qe,{children:"Preferred Time (Optional)"}),n.jsx(Qe,{children:n.jsx(se,{placeholder:"e.g., 9:00 AM",...k,"data-testid":"input-preferred-time"})}),n.jsx(Ze,{})]})}),n.jsx(Ye,{control:h.control,name:"notes",render:({field:k})=>n.jsxs(We,{children:[n.jsx(qe,{children:"Notes (Optional)"}),n.jsx(Qe,{children:n.jsx(un,{placeholder:"Special instructions...",...k,"data-testid":"textarea-notes"})}),n.jsx(Ze,{})]})}),n.jsxs("div",{className:"flex justify-end gap-2",children:[n.jsx(_,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Cancel"}),n.jsx(_,{type:"submit",disabled:m.isPending,"data-testid":"button-submit-recurring",children:m.isPending?"Creating...":"Create Recurring Service"})]})]})})]})]})]}),n.jsx(se,{placeholder:"Search by customer name, phone, or service...",value:r,onChange:k=>s(k.target.value),"data-testid":"input-search-recurring"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsx(O,{children:n.jsxs(H,{className:"pt-6",children:[n.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:b.length}),n.jsx("div",{className:"text-sm text-muted-foreground",children:"Active Subscriptions"})]})}),n.jsx(O,{children:n.jsxs(H,{className:"pt-6",children:[n.jsx("div",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400",children:w.length}),n.jsx("div",{className:"text-sm text-muted-foreground",children:"Paused"})]})}),n.jsx(O,{children:n.jsxs(H,{className:"pt-6",children:[n.jsx("div",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:N.length}),n.jsx("div",{className:"text-sm text-muted-foreground",children:"Cancelled"})]})})]}),n.jsx("div",{className:"grid grid-cols-1 gap-4",children:v.length===0?n.jsx(O,{children:n.jsx(H,{className:"py-8 text-center text-muted-foreground",children:"No recurring services found. Create one to get started!"})}):v.map(k=>n.jsxs(O,{"data-testid":`recurring-service-${k.id}`,children:[n.jsx(ee,{children:n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs(te,{className:"text-lg flex items-center gap-2",children:[n.jsx(Fn,{className:"h-5 w-5"}),k.customerName]}),n.jsx("p",{className:"text-sm text-muted-foreground",children:k.customerPhone})]}),S(k.status)]})}),n.jsxs(H,{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[n.jsx(nh,{className:"h-4 w-4 text-muted-foreground"}),n.jsx("span",{className:"font-medium",children:k.serviceName})]}),n.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[n.jsx(Rt,{className:"h-4 w-4 text-muted-foreground"}),n.jsx("span",{children:C(k.frequency)})]}),n.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[n.jsx(Dt,{className:"h-4 w-4 text-muted-foreground"}),n.jsxs("span",{children:["Next: ",Ie(new Date(k.nextScheduledDate),"MMM d, yyyy")]}),k.preferredTime&&n.jsxs("span",{className:"text-muted-foreground",children:["at ",k.preferredTime]})]}),k.notes&&n.jsx("div",{className:"text-sm text-muted-foreground bg-muted p-2 rounded",children:k.notes}),k.pauseReason&&n.jsxs("div",{className:"text-sm text-yellow-600 dark:text-yellow-400 bg-yellow-50 dark:bg-yellow-950 p-2 rounded",children:["Paused: ",k.pauseReason]}),n.jsxs("div",{className:"flex gap-2 pt-2",children:[k.status==="active"&&n.jsxs(_,{size:"sm",variant:"outline",onClick:()=>g.mutate({id:k.id,reason:"Paused by user"}),disabled:g.isPending,"data-testid":`button-pause-${k.id}`,children:[n.jsx(Cp,{className:"h-4 w-4 mr-1"}),"Pause"]}),k.status==="paused"&&n.jsxs(_,{size:"sm",variant:"outline",onClick:()=>x.mutate(k.id),disabled:x.isPending,"data-testid":`button-resume-${k.id}`,children:[n.jsx(A0,{className:"h-4 w-4 mr-1"}),"Resume"]}),k.status!=="cancelled"&&n.jsxs(_,{size:"sm",variant:"destructive",onClick:()=>y.mutate(k.id),disabled:y.isPending,"data-testid":`button-cancel-${k.id}`,children:[n.jsx(Ws,{className:"h-4 w-4 mr-1"}),"Cancel"]})]})]})]},k.id))})]})}function ARe(){const{toast:e}=Ee(),[t,r]=p.useState(null),[s,a]=p.useState(!1),[i,o]=p.useState(!1),[l,c]=p.useState("all"),[d,u]=p.useState({name:"",subject:"",content:"",category:"general"}),{data:f,isLoading:h}=be({queryKey:["/api/email-templates"]}),m=je({mutationFn:async M=>await Ne("POST","/api/email-templates",M),onSuccess:()=>{ze.invalidateQueries({queryKey:["/api/email-templates"]}),a(!1),y(),e({title:"Template created",description:"Email template has been successfully created"})},onError:M=>{e({title:"Create failed",description:M.message||"Failed to create email template",variant:"destructive"})}}),g=je({mutationFn:async M=>await Ne("PUT",`/api/email-templates/${M.id}`,M.updates),onSuccess:()=>{ze.invalidateQueries({queryKey:["/api/email-templates"]}),a(!1),y(),e({title:"Template updated",description:"Email template has been successfully updated"})},onError:M=>{e({title:"Update failed",description:M.message||"Failed to update email template",variant:"destructive"})}}),x=je({mutationFn:async M=>await Ne("DELETE",`/api/email-templates/${M}`),onSuccess:()=>{ze.invalidateQueries({queryKey:["/api/email-templates"]}),e({title:"Template deleted",description:"Email template has been successfully deleted"})},onError:M=>{e({title:"Delete failed",description:M.message||"Failed to delete email template",variant:"destructive"})}}),y=()=>{u({name:"",subject:"",content:"",category:"general"}),r(null),o(!1)},v=()=>{y(),o(!1),a(!0)},b=M=>{r(M),u({name:M.name,subject:M.subject,content:M.content,category:M.category}),o(!0),a(!0)},w=()=>{if(!d.name.trim()||!d.subject.trim()||!d.content.trim()){e({title:"Missing required fields",description:"Please fill in all required fields",variant:"destructive"});return}i&&t?g.mutate({id:t.id,updates:d}):m.mutate(d)},N=M=>{confirm(`Are you sure you want to delete the template "${M.name}"?`)&&x.mutate(M.id)},j=(f==null?void 0:f.templates)||[],S=Array.from(new Set(j.map(M=>M.category))),k=(l==="all"?j:j.filter(M=>M.category===l)).reduce((M,A)=>(M[A.category]||(M[A.category]=[]),M[A.category].push(A),M),{});return h?n.jsx("div",{className:"flex items-center justify-center p-12",children:n.jsx(nt,{className:"h-8 w-8 animate-spin text-primary"})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[n.jsx(Cr,{className:"h-6 w-6"}),"Email Templates Manager"]}),n.jsx("p",{className:"text-muted-foreground mt-1",children:"Create and manage reusable email templates for campaigns"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs(Pt,{value:l,onValueChange:c,children:[n.jsx(kt,{className:"w-[200px]","data-testid":"select-category-filter",children:n.jsx(Tt,{placeholder:"Filter by category"})}),n.jsxs(Mt,{children:[n.jsx(ve,{value:"all",children:"All Categories"}),S.map(M=>n.jsx(ve,{value:M,children:M.charAt(0).toUpperCase()+M.slice(1)},M))]})]}),n.jsxs(_,{onClick:v,"data-testid":"button-create-template",children:[n.jsx(Un,{className:"h-4 w-4 mr-2"}),"New Template"]})]})]}),n.jsxs(Ln,{children:[n.jsx(vo,{className:"h-4 w-4"}),n.jsx(Dn,{children:"Templates can be used when creating email campaigns. They're reusable patterns that save time and ensure consistency."})]}),j.length===0?n.jsx(O,{children:n.jsxs(H,{className:"flex flex-col items-center justify-center p-12 text-center",children:[n.jsx(Cr,{className:"h-12 w-12 text-muted-foreground mb-4"}),n.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No email templates yet"}),n.jsx("p",{className:"text-muted-foreground mb-4",children:"Create your first email template to get started"}),n.jsxs(_,{onClick:v,children:[n.jsx(Un,{className:"h-4 w-4 mr-2"}),"Create Template"]})]})}):n.jsx(t3,{type:"single",collapsible:!0,className:"space-y-4",children:Object.entries(k).map(([M,A])=>n.jsxs(zf,{value:M,className:"border rounded-lg",children:[n.jsx(Bf,{className:"px-4 hover:no-underline",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(ge,{variant:"outline",children:A.length}),n.jsx("span",{className:"font-semibold",children:M.charAt(0).toUpperCase()+M.slice(1)})]})}),n.jsx(Uf,{className:"px-4 pb-4",children:n.jsx("div",{className:"space-y-3 mt-3",children:A.map(P=>n.jsxs(O,{"data-testid":`template-card-${P.id}`,children:[n.jsx(ee,{className:"pb-3",children:n.jsx("div",{className:"flex items-start justify-between",children:n.jsxs("div",{className:"flex-1",children:[n.jsx(te,{className:"text-lg",children:P.name}),n.jsxs(ke,{className:"mt-1",children:[n.jsx("strong",{children:"Subject:"})," ",P.subject]}),P.lastUsed&&n.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["Last used: ",new Date(P.lastUsed).toLocaleDateString()]})]})})}),n.jsxs(H,{className:"space-y-3",children:[n.jsx("div",{className:"bg-muted p-3 rounded-md max-h-32 overflow-y-auto",children:n.jsx("p",{className:"text-sm whitespace-pre-wrap",children:P.content})}),n.jsxs("div",{className:"flex gap-2 pt-2",children:[n.jsxs(_,{size:"sm",variant:"outline",onClick:()=>b(P),"data-testid":`button-edit-${P.id}`,children:[n.jsx(No,{className:"h-4 w-4 mr-1"}),"Edit"]}),n.jsxs(_,{size:"sm",variant:"outline",onClick:()=>N(P),disabled:x.isPending,"data-testid":`button-delete-${P.id}`,children:[n.jsx(Nr,{className:"h-4 w-4 mr-1"}),"Delete"]})]})]})]},P.id))})})]},M))}),n.jsx(At,{open:s,onOpenChange:a,children:n.jsxs(_t,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[n.jsxs($t,{children:[n.jsxs(Et,{children:[i?"Edit":"Create"," Email Template"]}),n.jsx(an,{children:i?"Update the template details":"Create a new reusable email template"})]}),n.jsxs("div",{className:"space-y-4 py-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs(U,{htmlFor:"template-name",children:["Template Name ",n.jsx("span",{className:"text-destructive",children:"*"})]}),n.jsx(se,{id:"template-name",value:d.name,onChange:M=>u({...d,name:M.target.value}),placeholder:"e.g., Summer Promotion","data-testid":"input-template-name"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(U,{htmlFor:"template-category",children:"Category"}),n.jsxs(Pt,{value:d.category,onValueChange:M=>u({...d,category:M}),children:[n.jsx(kt,{id:"template-category","data-testid":"select-template-category",children:n.jsx(Tt,{})}),n.jsxs(Mt,{children:[n.jsx(ve,{value:"general",children:"General"}),n.jsx(ve,{value:"promotional",children:"Promotional"}),n.jsx(ve,{value:"transactional",children:"Transactional"}),n.jsx(ve,{value:"seasonal",children:"Seasonal"}),n.jsx(ve,{value:"holiday",children:"Holiday"})]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs(U,{htmlFor:"template-subject",children:["Email Subject ",n.jsx("span",{className:"text-destructive",children:"*"})]}),n.jsx(se,{id:"template-subject",value:d.subject,onChange:M=>u({...d,subject:M.target.value}),placeholder:"e.g., Special Summer Offer - 20% Off!","data-testid":"input-template-subject"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs(U,{htmlFor:"template-content",children:["Email Content ",n.jsx("span",{className:"text-destructive",children:"*"})]}),n.jsx(un,{id:"template-content",value:d.content,onChange:M=>u({...d,content:M.target.value}),rows:12,placeholder:"Write your email content here...",className:"font-mono text-sm","data-testid":"textarea-template-content"}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:["Character count: ",d.content.length]})]})]}),n.jsxs(Sn,{children:[n.jsx(_,{variant:"outline",onClick:()=>{a(!1),y()},"data-testid":"button-cancel",children:"Cancel"}),n.jsx(_,{onClick:w,disabled:m.isPending||g.isPending,"data-testid":"button-save",children:m.isPending||g.isPending?n.jsxs(n.Fragment,{children:[n.jsx(nt,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):n.jsxs(n.Fragment,{children:[i?"Update":"Create"," Template"]})})]})]})})]})}const ERe=[{category:"scheduling",label:"Scheduling Issues",reasons:["The appointment time no longer works for me","I need to reschedule for a different date","Unexpected schedule conflict came up","Weather concerns for the appointment day"]},{category:"pricing",label:"Pricing Concerns",reasons:["Service cost is higher than expected","Found a more affordable alternative","Budget constraints at this time","Unclear about what's included in the service"]},{category:"service_concerns",label:"Service Concerns",reasons:["Not sure if this service meets my needs","Want to research more before committing","Concerned about the process or methods used","Vehicle condition changed since booking"]},{category:"personal",label:"Personal Reasons",reasons:["Family emergency or personal situation","Vehicle is no longer available","Travel plans changed","Health-related concerns"]},{category:"found_alternative",label:"Found Alternative",reasons:["Decided to do it myself","Found another service provider","Friend/family offered to help","Dealership will handle it instead"]}];function IRe({isOpen:e,onClose:t,onConfirmCancellation:r,appointmentDetails:s}){const[a,i]=p.useState(""),[o,l]=p.useState("other"),[c,d]=p.useState(""),[u,f]=p.useState(!1),[h,m]=p.useState(!1),[g,x]=p.useState(""),{toast:y}=Ee(),v=(N,j="")=>{const S=`Totally understand, ${N}thanks for the update! I really appreciate you letting us know.`;let C="";return j.toLowerCase().includes("someone")&&j.toLowerCase().includes("today")?C="Glad you were able to get it taken care of today!":["reschedule","another time","not ready","wait","later"].some(M=>j.toLowerCase().includes(M))?C="No worries at alljust let us know when you're ready and we'll be here!":j.toLowerCase().includes("found another")||j.toLowerCase().includes("found a more")?C="Thanks again for sharing that with us!":j.toLowerCase().includes("budget")||j.toLowerCase().includes("cost")||j.toLowerCase().includes("afford")?C="I completely understandwe appreciate you being upfront about that!":j.toLowerCase().includes("emergency")||j.toLowerCase().includes("personal")||j.toLowerCase().includes("family")?C="Hope everything works out well for you and your family.":j.trim()===""?C="Thanks again for reaching outwe always appreciate clear communication.":C="Thanks again for sharing that with us!",`${S}

${C}

Either way, I look forward to another chance to help you out soon.`},b=async()=>{if(!a.trim()){y({title:"Please select a reason",description:"We'd appreciate knowing why you're cancelling to help us improve.",variant:"destructive"});return}m(!0);const N=s.customerName.split(" ")[0],j=v(N,a+" "+c),S={reason:a,category:o,additionalComments:c.trim(),wouldReschedule:u,timestamp:new Date().toISOString(),suggestedResponse:j};try{await fetch("/api/cancellation-feedback",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({appointmentDetails:s,feedback:S})}),r(S),y({title:"Thank you for your feedback",description:"Your appointment has been cancelled. We appreciate you taking the time to help us improve."})}catch(C){console.error("Error submitting cancellation feedback:",C),r(S),y({title:"Appointment cancelled",description:"Your appointment has been cancelled successfully."})}finally{m(!1)}},w=(N,j)=>{i(N),l(j);const S=s.customerName.split(" ")[0],C=v(S,N);x(C)};return n.jsx(At,{open:e,onOpenChange:t,children:n.jsxs(_t,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[n.jsx($t,{children:n.jsx(Et,{className:"text-lg font-semibold text-center",children:"We're sorry to see you cancel"})}),n.jsxs("div",{className:"space-y-6",children:[n.jsx(O,{className:"bg-blue-50 border-blue-200",children:n.jsxs(H,{className:"p-4",children:[n.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Cancelling Appointment:"}),n.jsxs("div",{className:"text-sm text-blue-800",children:[n.jsxs("p",{children:[n.jsx("strong",{children:"Service:"})," ",s.service]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Date:"})," ",s.date]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Time:"})," ",s.time]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Customer:"})," ",s.customerName]})]})]})}),n.jsxs("div",{className:"text-center space-y-2",children:[n.jsx("p",{className:"text-gray-700",children:"To help us provide the best possible experience for our customers, could you share what led to this cancellation?"}),n.jsx("p",{className:"text-sm text-gray-500",children:"Your feedback is valuable and helps us improve our services."})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx(U,{className:"text-base font-medium",children:"What's the main reason for cancelling?"}),ERe.map(N=>n.jsxs("div",{className:"space-y-2",children:[n.jsx("h4",{className:"font-medium text-gray-900 text-sm",children:N.label}),n.jsx(mo,{value:a,onValueChange:j=>w(j,N.category),className:"space-y-2",children:N.reasons.map(j=>n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Kn,{value:j,id:j}),n.jsx(U,{htmlFor:j,className:"text-sm cursor-pointer",children:j})]},j))})]},N.category)),n.jsxs("div",{className:"space-y-2",children:[n.jsx("h4",{className:"font-medium text-gray-900 text-sm",children:"Other"}),n.jsx(mo,{value:a,onValueChange:N=>w(N,"other"),children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Kn,{value:"other_reason",id:"other_reason"}),n.jsx(U,{htmlFor:"other_reason",className:"text-sm cursor-pointer",children:"Other reason (please specify below)"})]})})]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsx(U,{className:"text-base font-medium",children:"Would you be interested in rescheduling?"}),n.jsxs(mo,{value:u?"yes":"no",onValueChange:N=>f(N==="yes"),className:"flex space-x-6",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Kn,{value:"yes",id:"reschedule_yes"}),n.jsx(U,{htmlFor:"reschedule_yes",className:"cursor-pointer",children:"Yes, I'd like to reschedule"})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Kn,{value:"no",id:"reschedule_no"}),n.jsx(U,{htmlFor:"reschedule_no",className:"cursor-pointer",children:"No, not at this time"})]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(U,{htmlFor:"comments",className:"text-base font-medium",children:"Additional comments (optional)"}),n.jsx(un,{id:"comments",placeholder:"Is there anything else you'd like us to know? Any suggestions for improvement?",value:c,onChange:N=>d(N.target.value),rows:3,className:"resize-none"})]}),g&&n.jsx(O,{className:"bg-green-50 border-green-200",children:n.jsxs(H,{className:"p-4",children:[n.jsxs("h4",{className:"font-medium text-green-900 mb-2 flex items-center",children:[n.jsx("svg",{className:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:n.jsx("path",{fillRule:"evenodd",d:"M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7zM7 9H5v2h2V9zm8 0h-2v2h2V9zM9 9h2v2H9V9z",clipRule:"evenodd"})}),"Suggested Response for Customer Service Team"]}),n.jsx("div",{className:"bg-white rounded-md p-3 border border-green-100",children:n.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-wrap",children:g})}),n.jsxs("p",{className:"text-xs text-green-700 mt-2",children:[" This personalized response will be saved with the cancellation feedback for your team to use when following up with ",s.customerName,"."]})]})}),n.jsxs("div",{className:"flex space-x-3 pt-4",children:[n.jsx(_,{variant:"outline",onClick:t,className:"flex-1",disabled:h,children:"Keep Appointment"}),n.jsx(_,{onClick:b,variant:"destructive",className:"flex-1",disabled:h,children:h?"Cancelling...":"Confirm Cancellation"})]})]})]})})}function LRe(){const[e,t]=p.useState(!1),r={service:"Full Detail",date:"May 26, 2025",time:"2:00 PM",customerName:"John Smith"},s=a=>{console.log("Cancellation feedback received:",a),t(!1)};return n.jsxs(O,{className:"w-full max-w-md mx-auto",children:[n.jsx(ee,{children:n.jsx(te,{children:"Cancellation Feedback Demo"})}),n.jsxs(H,{className:"space-y-4",children:[n.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[n.jsx("h4",{className:"font-medium mb-2",children:"Sample Appointment:"}),n.jsxs("p",{children:[n.jsx("strong",{children:"Service:"})," ",r.service]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Date:"})," ",r.date]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Time:"})," ",r.time]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Customer:"})," ",r.customerName]})]}),n.jsx(_,{onClick:()=>t(!0),variant:"destructive",className:"w-full",children:"Cancel Appointment (Demo)"}),n.jsx(IRe,{isOpen:e,onClose:()=>t(!1),onConfirmCancellation:s,appointmentDetails:r})]})]})}function DRe(){const[e,t]=p.useState(!1),[r,s]=p.useState(null),[a,i]=p.useState(null),[o,l]=p.useState({serviceName:"",description:"",monthlyCost:"",billingCycle:"monthly",status:"active",renewalDate:"",website:"",notes:""}),{toast:c}=Ee(),d=cs(),{data:u,isLoading:f}=be({queryKey:["/api/subscriptions"],queryFn:async()=>{const C=await fetch("/api/subscriptions");if(!C.ok)throw new Error("Failed to fetch subscriptions");return C.json()}}),h=(u==null?void 0:u.subscriptions)||[],m=(u==null?void 0:u.totalMonthlyCost)||"0.00",g=je({mutationFn:async C=>await Ne("POST","/api/subscriptions",C),onSuccess:()=>{c({title:"Success",description:"Subscription added successfully"}),t(!1),b(),d.invalidateQueries({queryKey:["/api/subscriptions"]})},onError:C=>{c({title:"Error",description:C.message||"Failed to create subscription",variant:"destructive"})}}),x=je({mutationFn:async({id:C,data:k})=>await Ne("PATCH",`/api/subscriptions/${C}`,k),onSuccess:()=>{c({title:"Success",description:"Subscription updated successfully"}),s(null),b(),d.invalidateQueries({queryKey:["/api/subscriptions"]})},onError:C=>{c({title:"Error",description:C.message||"Failed to update subscription",variant:"destructive"})}}),y=je({mutationFn:async C=>await Ne("DELETE",`/api/subscriptions/${C}`),onSuccess:()=>{c({title:"Success",description:"Subscription deleted successfully"}),i(null),d.invalidateQueries({queryKey:["/api/subscriptions"]})},onError:C=>{c({title:"Error",description:C.message||"Failed to delete subscription",variant:"destructive"})}}),v=je({mutationFn:async()=>await Ne("POST","/api/subscriptions/seed"),onSuccess:C=>{c({title:"Success",description:C.message||"Subscriptions populated successfully"}),d.invalidateQueries({queryKey:["/api/subscriptions"]})},onError:C=>{c({title:"Error",description:C.message||"Failed to populate subscriptions",variant:"destructive"})}}),b=()=>{l({serviceName:"",description:"",monthlyCost:"",billingCycle:"monthly",status:"active",renewalDate:"",website:"",notes:""})},w=()=>{t(!0),b()},N=C=>{s(C),l({serviceName:C.serviceName,description:C.description||"",monthlyCost:C.monthlyCost,billingCycle:C.billingCycle,status:C.status,renewalDate:C.renewalDate||"",website:C.website||"",notes:C.notes||""})},j=()=>{r?x.mutate({id:r.id,data:o}):g.mutate(o)},S=C=>{switch(C){case"active":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200";case"cancelled":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200";case"paused":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200"}};return n.jsxs(O,{className:"bg-blue-50/95 dark:bg-gray-800/95 text-gray-800 dark:text-gray-100 shadow-lg",children:[n.jsx(ee,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs(te,{className:"flex items-center text-blue-800 dark:text-blue-200",children:[n.jsx(Ar,{className:"mr-2 h-5 w-5 text-blue-600 dark:text-blue-400"}),"Subscription Cost Manager"]}),n.jsx(ke,{children:"Track all monthly/yearly subscription costs for website services"})]}),n.jsxs("div",{className:"flex gap-2",children:[h.length===0&&n.jsxs(_,{onClick:()=>v.mutate(),size:"sm",variant:"outline",disabled:v.isPending,"data-testid":"button-populate-subscriptions",children:[v.isPending?n.jsx(nt,{className:"h-4 w-4 mr-2 animate-spin"}):n.jsx(na,{className:"h-4 w-4 mr-2"}),"Auto-Populate"]}),n.jsxs(_,{onClick:w,size:"sm","data-testid":"button-add-subscription",children:[n.jsx(Un,{className:"h-4 w-4 mr-2"}),"Add Subscription"]})]})]})}),n.jsxs(H,{className:"space-y-6",children:[n.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 p-6 rounded-lg text-white",children:[n.jsx("div",{className:"text-sm font-medium opacity-90",children:"Total Monthly Cost"}),n.jsxs("div",{className:"text-4xl font-bold mt-2",children:["$",m]}),n.jsxs("div",{className:"text-xs opacity-75 mt-1",children:[h.filter(C=>C.isActive).length," active subscriptions"]})]}),f?n.jsx("div",{className:"flex items-center justify-center py-12",children:n.jsx(nt,{className:"h-8 w-8 animate-spin text-gray-400"})}):h.length===0?n.jsxs("div",{className:"text-center py-12",children:[n.jsx(Wt,{className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),n.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:"No subscriptions added yet"}),n.jsxs(_,{onClick:w,variant:"outline",size:"sm",children:[n.jsx(Un,{className:"h-4 w-4 mr-2"}),"Add Your First Subscription"]})]}):n.jsx("div",{className:"rounded-lg border bg-white dark:bg-gray-900 overflow-hidden",children:n.jsxs(hs,{children:[n.jsx(ms,{children:n.jsxs(vn,{children:[n.jsx(Ve,{children:"Service"}),n.jsx(Ve,{children:"Cost/Month"}),n.jsx(Ve,{children:"Billing"}),n.jsx(Ve,{children:"Status"}),n.jsx(Ve,{children:"Renewal Date"}),n.jsx(Ve,{className:"text-right",children:"Actions"})]})}),n.jsx(ps,{children:h.map(C=>n.jsxs(vn,{children:[n.jsx(Ue,{children:n.jsxs("div",{className:"space-y-1",children:[n.jsx("div",{className:"font-medium",children:C.serviceName}),C.description&&n.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:C.description}),C.website&&n.jsxs("a",{href:C.website,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-600 hover:text-blue-800 flex items-center gap-1",children:["Visit site ",n.jsx(xa,{className:"h-3 w-3"})]})]})}),n.jsxs(Ue,{className:"font-semibold",children:["$",C.billingCycle==="yearly"?(parseFloat(C.monthlyCost)/12).toFixed(2):parseFloat(C.monthlyCost).toFixed(2)]}),n.jsx(Ue,{children:n.jsx(ge,{variant:"outline",className:"capitalize",children:C.billingCycle})}),n.jsx(Ue,{children:n.jsx(ge,{className:S(C.status),children:C.status})}),n.jsx(Ue,{children:C.renewalDate?n.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[n.jsx(Dt,{className:"h-3 w-3"}),new Date(C.renewalDate).toLocaleDateString()]}):n.jsx("span",{className:"text-gray-400",children:""})}),n.jsx(Ue,{className:"text-right",children:n.jsxs("div",{className:"flex items-center justify-end gap-2",children:[n.jsx(_,{variant:"ghost",size:"icon",onClick:()=>N(C),"data-testid":`button-edit-${C.id}`,children:n.jsx(kp,{className:"h-4 w-4"})}),n.jsx(_,{variant:"ghost",size:"icon",onClick:()=>i(C.id),"data-testid":`button-delete-${C.id}`,children:n.jsx(Nr,{className:"h-4 w-4 text-red-600"})})]})})]},C.id))})]})})]}),n.jsx(At,{open:e||r!==null,onOpenChange:C=>{C||(t(!1),s(null),b())},children:n.jsxs(_t,{className:"max-w-md",children:[n.jsxs($t,{children:[n.jsx(Et,{children:r?"Edit Subscription":"Add New Subscription"}),n.jsx(an,{children:r?"Update subscription details":"Add a new service subscription to track costs"})]}),n.jsxs("div",{className:"space-y-4 py-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(U,{htmlFor:"serviceName",children:"Service Name *"}),n.jsx(se,{id:"serviceName",value:o.serviceName,onChange:C=>l({...o,serviceName:C.target.value}),placeholder:"e.g., Stripe, Twilio, SendGrid","data-testid":"input-service-name"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(U,{htmlFor:"description",children:"Description"}),n.jsx(un,{id:"description",value:o.description,onChange:C=>l({...o,description:C.target.value}),placeholder:"What this service is used for",rows:2,"data-testid":"input-description"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(U,{htmlFor:"monthlyCost",children:"Cost *"}),n.jsx(se,{id:"monthlyCost",type:"number",step:"0.01",value:o.monthlyCost,onChange:C=>l({...o,monthlyCost:C.target.value}),placeholder:"0.00","data-testid":"input-cost"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(U,{htmlFor:"billingCycle",children:"Billing Cycle *"}),n.jsxs(Pt,{value:o.billingCycle,onValueChange:C=>l({...o,billingCycle:C}),children:[n.jsx(kt,{"data-testid":"select-billing-cycle",children:n.jsx(Tt,{})}),n.jsxs(Mt,{children:[n.jsx(ve,{value:"monthly",children:"Monthly"}),n.jsx(ve,{value:"yearly",children:"Yearly"})]})]})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(U,{htmlFor:"status",children:"Status"}),n.jsxs(Pt,{value:o.status,onValueChange:C=>l({...o,status:C}),children:[n.jsx(kt,{"data-testid":"select-status",children:n.jsx(Tt,{})}),n.jsxs(Mt,{children:[n.jsx(ve,{value:"active",children:"Active"}),n.jsx(ve,{value:"cancelled",children:"Cancelled"}),n.jsx(ve,{value:"paused",children:"Paused"})]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(U,{htmlFor:"renewalDate",children:"Renewal Date"}),n.jsx(se,{id:"renewalDate",type:"date",value:o.renewalDate,onChange:C=>l({...o,renewalDate:C.target.value}),"data-testid":"input-renewal-date"})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(U,{htmlFor:"website",children:"Website URL"}),n.jsx(se,{id:"website",type:"url",value:o.website,onChange:C=>l({...o,website:C.target.value}),placeholder:"https://example.com","data-testid":"input-website"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(U,{htmlFor:"notes",children:"Notes"}),n.jsx(un,{id:"notes",value:o.notes,onChange:C=>l({...o,notes:C.target.value}),placeholder:"Additional notes or account info",rows:2,"data-testid":"input-notes"})]})]}),n.jsxs(Sn,{children:[n.jsx(_,{variant:"outline",onClick:()=>{t(!1),s(null),b()},children:"Cancel"}),n.jsxs(_,{onClick:j,disabled:!o.serviceName||!o.monthlyCost||g.isPending||x.isPending,"data-testid":"button-save-subscription",children:[(g.isPending||x.isPending)&&n.jsx(nt,{className:"h-4 w-4 mr-2 animate-spin"}),r?"Update":"Add"," Subscription"]})]})]})}),n.jsx(V0,{open:a!==null,onOpenChange:C=>!C&&i(null),children:n.jsxs(kh,{children:[n.jsxs(wu,{children:[n.jsx(Nu,{children:"Delete Subscription?"}),n.jsx(Rc,{children:"This will permanently delete this subscription from your records. This action cannot be undone."})]}),n.jsxs(ju,{children:[n.jsx(_h,{children:"Cancel"}),n.jsx(Mh,{onClick:()=>a&&y.mutate(a),className:"bg-red-600 hover:bg-red-700",children:"Delete"})]})]})})]})}function $Re(){const{toast:e}=Ee(),t=cs(),{data:r,isLoading:s}=be({queryKey:["/api/phone-settings/lines"]}),a=(r==null?void 0:r.lines)||[],i=je({mutationFn:async({id:o,data:l})=>Ne(`/api/phone-settings/lines/${o}`,{method:"PATCH",body:JSON.stringify(l)}),onSuccess:()=>{t.invalidateQueries({queryKey:["/api/phone-settings/lines"]}),e({title:"Settings saved",description:"Phone line settings updated successfully"})},onError:o=>{e({title:"Error",description:o.message||"Failed to update settings",variant:"destructive"})}});return s?n.jsx(O,{children:n.jsxs(ee,{children:[n.jsx(te,{children:"Phone & Voice Settings"}),n.jsx(ke,{children:"Loading..."})]})}):n.jsx("div",{className:"space-y-6",children:n.jsxs(O,{children:[n.jsxs(ee,{children:[n.jsxs(te,{className:"flex items-center gap-2",children:[n.jsx(bt,{className:"h-5 w-5"}),"Phone Lines & Call Routing"]}),n.jsx(ke,{children:"Configure business hours, call forwarding, and voicemail settings for your Twilio phone lines"})]}),n.jsx(H,{className:"space-y-6",children:a.map(o=>n.jsx(ORe,{line:o,onUpdate:l=>i.mutate({id:o.id,data:l}),isSaving:i.isPending},o.id))})]})})}function ORe({line:e,onUpdate:t,isSaving:r}){const[s,a]=p.useState(e),[i,o]=p.useState(!1),l=(u,f)=>{a(h=>({...h,[u]:f})),o(!0)},c=()=>{const u={};s.forwardingEnabled!==e.forwardingEnabled&&(u.forwardingEnabled=s.forwardingEnabled),s.forwardingNumber!==e.forwardingNumber&&(u.forwardingNumber=s.forwardingNumber),s.voicemailGreeting!==e.voicemailGreeting&&(u.voicemailGreeting=s.voicemailGreeting),s.label!==e.label&&(u.label=s.label),s.ringDuration!==e.ringDuration&&(u.ringDuration=s.ringDuration),s.sipEndpoint!==e.sipEndpoint&&(u.sipEndpoint=s.sipEndpoint),s.voicemailGreetingUrl!==e.voicemailGreetingUrl&&(u.voicemailGreetingUrl=s.voicemailGreetingUrl),s.sipEnabled!==e.sipEnabled&&(u.sipEnabled=s.sipEnabled),Object.keys(u).length>0&&(t(u),o(!1))},d=u=>{if(u.length===0)return"No schedule configured";const f=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],h=u.reduce((m,g)=>{const x=`${g.startTime}-${g.endTime}`;return m[x]||(m[x]=[]),m[x].push(g.dayOfWeek),m},{});return Object.entries(h).map(([m,g])=>{const[x,y]=m.split("-");return`${g.sort().map(b=>f[b]).join(", ")}: ${x} - ${y}`}).join(`
`)};return n.jsxs("div",{className:"border rounded-lg p-4 space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-lg",children:s.label}),n.jsx("p",{className:"text-sm text-muted-foreground",children:s.phoneNumber})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(U,{htmlFor:`forwarding-${e.id}`,className:"text-sm",children:"Call Forwarding"}),n.jsx(Vt,{id:`forwarding-${e.id}`,checked:s.forwardingEnabled,onCheckedChange:u=>l("forwardingEnabled",u),"data-testid":`switch-forwarding-${e.phoneNumber}`})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(U,{htmlFor:`forward-number-${e.id}`,children:"Forward Calls To"}),n.jsx(se,{id:`forward-number-${e.id}`,type:"tel",placeholder:"+1 (918) 555-0100",value:s.forwardingNumber||"",onChange:u=>l("forwardingNumber",u.target.value),disabled:!s.forwardingEnabled,"data-testid":`input-forwarding-number-${e.phoneNumber}`}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Your personal cell phone number for call forwarding"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs(U,{className:"flex items-center gap-2",children:[n.jsx(Rt,{className:"h-4 w-4"}),"Business Hours"]}),n.jsx("div",{className:"bg-muted rounded-md p-3 min-h-[2.5rem]",children:e.schedules.length>0?n.jsx("pre",{className:"text-xs whitespace-pre-wrap font-mono",children:d(e.schedules)}):n.jsx("p",{className:"text-sm text-muted-foreground",children:"No business hours configured"})}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Calls forward during these hours, otherwise go to voicemail"})]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs(U,{htmlFor:`ring-duration-${e.id}`,className:"flex items-center justify-between",children:[n.jsx("span",{children:"Ring Duration"}),n.jsxs("span",{className:"text-sm font-semibold text-blue-600 bg-blue-50 px-3 py-1 rounded-full",children:[s.ringDuration||10,"s"]})]}),n.jsx(ai,{id:`ring-duration-${e.id}`,min:10,max:60,step:5,value:[s.ringDuration||10],onValueChange:u=>l("ringDuration",u[0]),className:"w-full","data-testid":`slider-ring-duration-${e.phoneNumber}`}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"How long to ring your phone before going to voicemail (10-60 seconds)"})]}),n.jsxs("div",{className:"flex items-center gap-2 p-3 bg-blue-50 rounded-lg mb-2",children:[n.jsx(Vt,{id:`sip-enabled-${e.id}`,checked:s.sipEnabled||!1,onCheckedChange:u=>l("sipEnabled",u),"data-testid":`switch-sip-enabled-${e.phoneNumber}`}),n.jsxs(U,{htmlFor:`sip-enabled-${e.id}`,className:"cursor-pointer flex-1",children:[n.jsx("span",{className:"font-semibold",children:"Enable SIP Routing"}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Route calls through SIP for custom ringtones on your Samsung phone with Groundwire"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(U,{htmlFor:`sip-endpoint-${e.id}`,children:"SIP Endpoint (Groundwire)"}),n.jsx(se,{id:`sip-endpoint-${e.id}`,type:"text",placeholder:"jody@cleanmachinetulsa.sip.twilio.com",value:s.sipEndpoint||"",onChange:u=>l("sipEndpoint",u.target.value),disabled:!s.sipEnabled,"data-testid":`input-sip-endpoint-${e.phoneNumber}`}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"SIP address for Groundwire (format: username@cleanmachinetulsa.sip.twilio.com)"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(U,{htmlFor:`greeting-url-${e.id}`,children:"Voicemail Greeting Audio URL"}),n.jsx(se,{id:`greeting-url-${e.id}`,type:"text",placeholder:"/assets/voicemail-greeting.mp3",value:s.voicemailGreetingUrl||"",onChange:u=>l("voicemailGreetingUrl",u.target.value),"data-testid":`input-greeting-url-${e.phoneNumber}`}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"URL to MP3 file played when customer leaves voicemail (e.g., /assets/voicemail-greeting.mp3)"})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(U,{htmlFor:`greeting-${e.id}`,children:"Voicemail / IVR Greeting (Text)"}),n.jsx(un,{id:`greeting-${e.id}`,placeholder:"Thank you for calling Clean Machine Auto Detail...",value:s.voicemailGreeting||"",onChange:u=>l("voicemailGreeting",u.target.value),rows:3,"data-testid":`textarea-voicemail-greeting-${e.phoneNumber}`}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Message played to callers after hours or when forwarding is disabled (used if no audio URL is set)"})]}),i&&n.jsxs("div",{className:"flex items-center gap-3 pt-2",children:[n.jsx(_,{onClick:c,disabled:r,"data-testid":`button-save-${e.phoneNumber}`,children:r?n.jsx(n.Fragment,{children:"Saving..."}):n.jsxs(n.Fragment,{children:[n.jsx(fr,{className:"h-4 w-4 mr-2"}),"Save Changes"]})}),n.jsx(_,{variant:"ghost",onClick:()=>{a(e),o(!1)},disabled:r,"data-testid":`button-cancel-${e.phoneNumber}`,children:"Cancel"})]}),!i&&!r&&n.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[n.jsx(nn,{className:"h-4 w-4 text-green-600"}),n.jsx("span",{children:"Settings saved"})]})]})}function RRe(){const[e,t]=p.useState([]),[r,s]=p.useState(null),[a,i]=p.useState(!1),[o,l]=p.useState("main"),{toast:c}=Ee();p.useEffect(()=>{d()},[]);const d=async()=>{try{const[g,x]=await Promise.all([fetch("/api/services"),fetch("/api/addon-services")]),y=await g.json(),v=await x.json();if(y.success&&v.success){const b=y.services.map(N=>({...N,isAddon:!1,priceRange:N.priceRange||N.price,overview:N.overview||N.description})),w=v.addOns.map(N=>({name:N.name,priceRange:N.price,description:N.description||N.overview,overview:N.overview,detailedDescription:N.detailedDescription||"",duration:"30 minutes",durationHours:.5,isAddon:!0,imageUrl:N.imageUrl}));t([...b,...w])}}catch{c({title:"Error loading services",description:"Failed to fetch services data",variant:"destructive"})}},u=()=>{i(!0)},f=async()=>{if(r)try{const g=r.isAddon?"/api/addon-services/update":"/api/services/update";(await fetch(g,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:r.name,priceRange:r.priceRange,overview:r.overview,detailedDescription:r.detailedDescription})})).ok&&(c({title:"Service updated",description:"Changes have been saved successfully"}),i(!1),s(null),await d())}catch{c({title:"Update failed",description:"Failed to save service changes",variant:"destructive"})}},h=async(g,x)=>{const y=new FormData;y.append("image",x);try{const b=await(await fetch("/api/upload-service-image",{method:"POST",body:y})).json();b.success&&(await fetch("/api/save-service-image",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({serviceName:g.name,imageUrl:b.imageUrl})}),t(e.map(w=>w.name===g.name?{...w,imageUrl:b.imageUrl}:w)),c({title:"Image uploaded",description:`${g.isAddon?"Add-on":"Service"} image has been updated`}))}catch{c({title:"Upload failed",description:"Failed to upload image",variant:"destructive"})}},m=e.filter(g=>o==="main"?!g.isAddon:g.isAddon);return n.jsx("div",{className:"space-y-6",children:n.jsxs(O,{className:"bg-blue-50/95 dark:bg-gray-800/95",children:[n.jsxs(ee,{children:[n.jsxs(te,{className:"flex items-center text-blue-800 dark:text-blue-200",children:[n.jsx(Ar,{className:"mr-2 h-5 w-5 text-blue-600 dark:text-blue-400"}),"Manage Services & Add-ons"]}),n.jsx(ke,{children:"View and update your service offerings, pricing, and descriptions"}),n.jsxs("div",{className:"flex items-center justify-between pt-4",children:[n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{className:`px-3 py-1 text-sm rounded-md transition-colors ${o==="main"?"bg-blue-600 text-white":"bg-transparent text-blue-800 dark:text-blue-200 hover:bg-blue-200 dark:hover:bg-gray-600"}`,onClick:()=>l("main"),children:"Main Services"}),n.jsx("button",{className:`px-3 py-1 text-sm rounded-md transition-colors ${o==="addon"?"bg-blue-600 text-white":"bg-transparent text-blue-800 dark:text-blue-200 hover:bg-blue-200 dark:hover:bg-gray-600"}`,onClick:()=>l("addon"),children:"Add-ons"})]}),a?n.jsxs(_,{onClick:f,className:"bg-blue-600 hover:bg-blue-700",children:[n.jsx(fr,{className:"h-4 w-4 mr-2"}),"Save Changes"]}):n.jsxs(_,{onClick:u,className:"bg-blue-600 hover:bg-blue-700",children:[n.jsx(oge,{className:"h-4 w-4 mr-2"}),"Edit Services"]})]})]}),n.jsx(H,{children:n.jsxs(hs,{children:[n.jsx(ms,{children:n.jsxs(vn,{children:[n.jsx(Ve,{className:"text-blue-900 dark:text-blue-100",children:"Image"}),n.jsx(Ve,{className:"text-blue-900 dark:text-blue-100",children:"Service Name"}),n.jsx(Ve,{className:"text-blue-900 dark:text-blue-100",children:"Price Range"}),n.jsx(Ve,{className:"text-blue-900 dark:text-blue-100",children:"Overview"}),n.jsx(Ve,{className:"text-blue-900 dark:text-blue-100",children:"Detailed Description"})]})}),n.jsx(ps,{children:m.map(g=>n.jsxs(vn,{className:(r==null?void 0:r.name)===g.name?"bg-blue-100 dark:bg-gray-700":"transition-all hover:shadow-md hover:bg-black/5 dark:hover:bg-white/5 cursor-pointer",onClick:()=>s(g),children:[n.jsx(Ue,{onClick:x=>x.stopPropagation(),children:n.jsxs("div",{className:"flex flex-col gap-2 items-center",children:[g.imageUrl&&n.jsx("img",{src:g.imageUrl,alt:g.name,className:"w-20 h-20 object-cover rounded-md"}),n.jsx("input",{id:`file-upload-${g.name}`,type:"file",accept:"image/*",className:"hidden",onChange:x=>{var v;const y=(v=x.target.files)==null?void 0:v[0];y&&h(g,y)}}),n.jsxs(_,{size:"sm",variant:"outline",className:"text-xs",type:"button",onClick:()=>{var x;return(x=document.getElementById(`file-upload-${g.name}`))==null?void 0:x.click()},"data-testid":`button-upload-image-${g.name}`,children:[g.imageUrl?"Change":"Upload"," Image"]})]})}),n.jsx(Ue,{className:"font-medium",children:a&&(r==null?void 0:r.name)===g.name?n.jsx(se,{value:r.name,onChange:x=>s({...r,name:x.target.value})}):g.name}),n.jsx(Ue,{children:a&&(r==null?void 0:r.name)===g.name?n.jsx(se,{value:r.priceRange,onChange:x=>s({...r,priceRange:x.target.value})}):g.priceRange}),n.jsx(Ue,{children:a&&(r==null?void 0:r.name)===g.name?n.jsx(se,{value:r.overview,onChange:x=>s({...r,overview:x.target.value}),placeholder:"Brief overview for service card"}):g.overview}),n.jsx(Ue,{children:a&&(r==null?void 0:r.name)===g.name?n.jsx("textarea",{className:"w-full min-h-[100px] p-2 border rounded-md",value:r.detailedDescription,onChange:x=>s({...r,detailedDescription:x.target.value}),placeholder:"Detailed description with bullet points (use  or - for bullets)"}):n.jsx("div",{className:"max-w-md text-sm whitespace-pre-line",children:g.detailedDescription})})]},g.name))})]})})]})})}function FRe(){const{toast:e}=Ee(),[t,r]=p.useState(""),[s,a]=p.useState(null),[i,o]=p.useState(!1),[l,c]=p.useState(null),[d,u]=p.useState("details"),{data:f,isLoading:h,refetch:m}=be({queryKey:["/api/enhanced/customers"],enabled:!0,refetchInterval:3e4}),{data:g,isLoading:x,refetch:y}=be({queryKey:["/api/enhanced/customers/search",t],enabled:!1}),v=je({mutationFn:async M=>{const A=await fetch("/api/customers/update",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(M)});if(!A.ok)throw new Error("Failed to update customer");return A.json()},onSuccess:()=>{e({title:"Customer Updated",description:"Customer information has been successfully updated."}),m(),o(!1),c(null)},onError:()=>{e({title:"Update Failed",description:"Failed to update customer information. Please try again.",variant:"destructive"})}}),b=async M=>{try{const P=await(await fetch(`/api/enhanced/customers/${encodeURIComponent(M)}`)).json();P.success&&P.customer&&(a(P.customer),c(P.customer))}catch(A){console.error("Error fetching customer details:",A),e({title:"Error",description:"Failed to load customer details",variant:"destructive"})}},w=()=>{t.trim()&&y()},N=()=>{o(!0),c(s)},j=()=>{o(!1),c(s)},S=()=>{l&&v.mutate(l)},C=(M,A)=>{l&&c({...l,[M]:A})},k=t&&(g!=null&&g.results)?g.results:(f==null?void 0:f.customers)||[];return n.jsxs("div",{className:"space-y-6",children:[n.jsxs(O,{className:"bg-gradient-to-br from-gray-900 to-gray-800 border-gray-700",children:[n.jsxs(ee,{children:[n.jsxs(te,{className:"text-2xl font-bold text-white flex items-center gap-2",children:[n.jsx(Fn,{className:"h-6 w-6"}),"Customer Management"]}),n.jsx(ke,{className:"text-gray-300",children:"View and manage customer information from your Google Sheets database"})]}),n.jsx(H,{children:n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("div",{className:"relative flex-1",children:[n.jsx(Ga,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),n.jsx(se,{placeholder:"Search by name, phone, email, or vehicle...",value:t,onChange:M=>r(M.target.value),onKeyPress:M=>M.key==="Enter"&&w(),className:"pl-10 bg-gray-800 border-gray-600 text-white placeholder-gray-400"})]}),n.jsx(_,{onClick:w,className:"bg-blue-600 hover:bg-blue-700 text-white",disabled:x,children:x?n.jsx(nt,{className:"h-4 w-4 animate-spin"}):"Search"}),n.jsx(_,{onClick:()=>{r(""),m()},variant:"outline",className:"border-gray-600 text-gray-300 hover:bg-gray-700",children:"Clear"})]})})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[n.jsxs(O,{className:"lg:col-span-1 bg-gray-900 border-gray-700",children:[n.jsx(ee,{children:n.jsxs(te,{className:"text-white",children:["Customers (",k.length,")"]})}),n.jsx(H,{children:n.jsx(ia,{className:"h-[600px] pr-4",children:h?n.jsx("div",{className:"flex items-center justify-center h-32",children:n.jsx(nt,{className:"h-8 w-8 animate-spin text-blue-500"})}):k.length===0?n.jsxs("div",{className:"text-center text-gray-400 py-8",children:[n.jsx(Fn,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),n.jsx("p",{children:"No customers found"})]}):n.jsx("div",{className:"space-y-2",children:k.map((M,A)=>n.jsx("button",{onClick:()=>b(M.phone),className:`w-full text-left p-3 rounded-lg transition-all ${(s==null?void 0:s.phone)===M.phone?"bg-blue-600/20 border border-blue-500":"bg-gray-800 hover:bg-gray-700 border border-gray-700"}`,"data-testid":`customer-card-${M.phone}`,children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"font-semibold text-white",children:M.name||"Unknown"}),n.jsxs("p",{className:"text-sm text-gray-400 flex items-center gap-1 mt-1",children:[n.jsx(bt,{className:"h-3 w-3"}),M.phone]}),M.email&&n.jsxs("p",{className:"text-sm text-gray-400 flex items-center gap-1",children:[n.jsx(Cr,{className:"h-3 w-3"}),M.email]}),M.vehicleInfo&&n.jsxs("p",{className:"text-sm text-gray-400 flex items-center gap-1",children:[n.jsx(Ys,{className:"h-3 w-3"}),M.vehicleInfo]})]}),M.loyaltyTier&&n.jsx(ge,{className:"bg-yellow-600/20 text-yellow-400 border-yellow-500",children:M.loyaltyTier})]})},M.phone||A))})})})]}),n.jsx(O,{className:"lg:col-span-2 bg-gray-900 border-gray-700",children:s?n.jsxs(n.Fragment,{children:[n.jsx(ee,{children:n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{children:[n.jsx(te,{className:"text-2xl text-white",children:i&&l?n.jsx(se,{value:l.name||"",onChange:M=>C("name",M.target.value),className:"text-2xl font-bold bg-gray-800 border-gray-600","data-testid":"input-customer-name"}):s.name||"Unknown Customer"}),n.jsxs(ke,{className:"text-gray-400 mt-2",children:["Customer since ",s.lastServiceDate?new Date(s.lastServiceDate).toLocaleDateString():"N/A"]})]}),n.jsx("div",{className:"flex gap-2",children:i?n.jsxs(n.Fragment,{children:[n.jsx(_,{onClick:S,size:"sm",className:"bg-green-600 hover:bg-green-700",disabled:v.isPending,"data-testid":"button-save-customer",children:v.isPending?n.jsx(nt,{className:"h-4 w-4 animate-spin"}):n.jsx(fr,{className:"h-4 w-4"})}),n.jsx(_,{onClick:j,size:"sm",variant:"outline",className:"border-gray-600 hover:bg-gray-700","data-testid":"button-cancel-edit",children:n.jsx(Jr,{className:"h-4 w-4"})})]}):n.jsxs(_,{onClick:N,size:"sm",variant:"outline",className:"border-gray-600 hover:bg-gray-700 text-white","data-testid":"button-edit-customer",children:[n.jsx(No,{className:"h-4 w-4 mr-1"}),"Edit"]})})]})}),n.jsx(H,{children:n.jsxs(js,{value:d,onValueChange:u,children:[n.jsxs(ds,{className:"grid w-full grid-cols-3 bg-gray-800",children:[n.jsx(dt,{value:"details",className:"data-[state=active]:bg-gray-700",children:"Details"}),n.jsx(dt,{value:"history",className:"data-[state=active]:bg-gray-700",children:"Service History"}),n.jsx(dt,{value:"loyalty",className:"data-[state=active]:bg-gray-700",children:"Loyalty"})]}),n.jsxs(pt,{value:"details",className:"space-y-4 mt-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx(U,{className:"text-gray-400",children:"Phone"}),i&&l?n.jsx(se,{value:l.phone,onChange:M=>C("phone",M.target.value),className:"bg-gray-800 border-gray-600 text-white","data-testid":"input-customer-phone"}):n.jsxs("p",{className:"text-white flex items-center gap-2 mt-1",children:[n.jsx(bt,{className:"h-4 w-4 text-gray-400"}),s.phone]})]}),n.jsxs("div",{children:[n.jsx(U,{className:"text-gray-400",children:"Email"}),i&&l?n.jsx(se,{value:l.email||"",onChange:M=>C("email",M.target.value),className:"bg-gray-800 border-gray-600 text-white",placeholder:"customer@example.com","data-testid":"input-customer-email"}):n.jsxs("p",{className:"text-white flex items-center gap-2 mt-1",children:[n.jsx(Cr,{className:"h-4 w-4 text-gray-400"}),s.email||"Not provided"]})]}),n.jsxs("div",{children:[n.jsx(U,{className:"text-gray-400",children:"Address"}),i&&l?n.jsx(se,{value:l.address||"",onChange:M=>C("address",M.target.value),className:"bg-gray-800 border-gray-600 text-white",placeholder:"Enter address","data-testid":"input-customer-address"}):n.jsxs("p",{className:"text-white flex items-center gap-2 mt-1",children:[n.jsx(zr,{className:"h-4 w-4 text-gray-400"}),s.address||"Not provided"]})]}),n.jsxs("div",{children:[n.jsx(U,{className:"text-gray-400",children:"Vehicle Information"}),i&&l?n.jsx(se,{value:l.vehicleInfo||"",onChange:M=>C("vehicleInfo",M.target.value),className:"bg-gray-800 border-gray-600 text-white",placeholder:"Year Make Model Color","data-testid":"input-customer-vehicle"}):n.jsxs("p",{className:"text-white flex items-center gap-2 mt-1",children:[n.jsx(Ys,{className:"h-4 w-4 text-gray-400"}),s.vehicleInfo||"Not provided"]})]})]}),n.jsxs("div",{children:[n.jsx(U,{className:"text-gray-400",children:"Notes"}),i&&l?n.jsx(un,{value:l.notes||"",onChange:M=>C("notes",M.target.value),className:"bg-gray-800 border-gray-600 text-white mt-1",rows:4,placeholder:"Add notes about this customer...","data-testid":"textarea-customer-notes"}):n.jsx("div",{className:"bg-gray-800 rounded-lg p-3 mt-1",children:n.jsx("p",{className:"text-gray-300",children:s.notes||"No notes available"})})]}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx(U,{className:"text-gray-400",children:"SMS Consent"}),i&&l?n.jsx("input",{type:"checkbox",checked:l.smsConsent||!1,onChange:M=>C("smsConsent",M.target.checked),className:"h-4 w-4 rounded border-gray-600","data-testid":"checkbox-sms-consent"}):n.jsx(ge,{className:s.smsConsent?"bg-green-600/20 text-green-400 border-green-500":"bg-gray-600/20 text-gray-400 border-gray-500",children:s.smsConsent?"Consented":"Not Consented"})]})]}),n.jsx(pt,{value:"history",className:"mt-4",children:n.jsx("div",{className:"space-y-4",children:s.serviceHistory&&s.serviceHistory.length>0?n.jsx("div",{className:"space-y-3",children:s.serviceHistory.map((M,A)=>n.jsx("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700","data-testid":`service-history-${A}`,children:n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold text-white",children:M.service}),n.jsxs("p",{className:"text-sm text-gray-400 mt-1",children:[n.jsx(Dt,{className:"inline h-3 w-3 mr-1"}),new Date(M.date).toLocaleDateString()]}),M.notes&&n.jsx("p",{className:"text-sm text-gray-300 mt-2",children:M.notes})]}),M.price&&n.jsxs(ge,{className:"bg-green-600/20 text-green-400 border-green-500",children:["$",M.price]})]})},A))}):n.jsxs("div",{className:"text-center py-8 text-gray-400",children:[n.jsx(Kc,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),n.jsx("p",{children:"No service history available"})]})})}),n.jsx(pt,{value:"loyalty",className:"mt-4",children:n.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 border border-gray-700",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx(U,{className:"text-gray-400",children:"Loyalty Points"}),n.jsxs("p",{className:"text-3xl font-bold text-white mt-2 flex items-center gap-2",children:[n.jsx(Qr,{className:"h-6 w-6 text-yellow-500"}),s.loyaltyPoints||0]})]}),n.jsxs("div",{children:[n.jsx(U,{className:"text-gray-400",children:"Loyalty Tier"}),n.jsx("p",{className:"text-2xl font-semibold text-white mt-2",children:s.loyaltyTier||"Standard"})]})]}),s.totalSpent&&n.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-700",children:[n.jsx(U,{className:"text-gray-400",children:"Total Spent"}),n.jsxs("p",{className:"text-2xl font-bold text-green-400 mt-2 flex items-center gap-2",children:[n.jsx(Ar,{className:"h-5 w-5"}),s.totalSpent.toFixed(2)]})]})]})})]})})]}):n.jsx(H,{className:"flex items-center justify-center h-96",children:n.jsxs("div",{className:"text-center text-gray-400",children:[n.jsx(Fn,{className:"h-16 w-16 mx-auto mb-4 opacity-50"}),n.jsx("p",{className:"text-lg",children:"Select a customer to view details"}),n.jsx("p",{className:"text-sm mt-2",children:"Search or browse the customer list on the left"})]})})})]})]})}const zRe=fe.object({customerId:fe.number({required_error:"Customer is required"}),points:fe.number({required_error:"Points are required"}).min(1,"Points must be at least 1"),source:fe.string({required_error:"Source is required"}),description:fe.string().optional()}),BRe=fe.object({name:fe.string().min(1,"Name is required"),description:fe.string().min(1,"Description is required"),pointCost:fe.number().min(1,"Point cost must be at least 1"),tier:fe.enum(["tier_500","tier_1000","tier_2000","tier_5000"],{required_error:"Tier is required"}),active:fe.boolean().default(!0)}),URe=fe.object({name:fe.string().min(1,"Name is required"),description:fe.string().min(1,"Description is required"),pointValue:fe.number().min(0,"Point value must be at least 0"),criteria:fe.string().min(1,"Criteria is required"),level:fe.number().min(1,"Level must be at least 1"),icon:fe.string().optional()});function VRe(){var rt;const[,e]=zt(),{toast:t}=Ee(),r=cs(),[s,a]=p.useState("customers"),[i,o]=p.useState(!1),[l,c]=p.useState(!1),[d,u]=p.useState(!1),[f,h]=p.useState(!1),[m,g]=p.useState(null),[x,y]=p.useState(null),[v,b]=p.useState(null),[w,N]=p.useState(null),j=fi({resolver:hi(zRe),defaultValues:{points:0,source:"manual",description:"Manual points adjustment"}}),S=fi({resolver:hi(BRe),defaultValues:{name:"",description:"",pointCost:500,tier:"tier_500",active:!0}}),C=fi({resolver:hi(URe),defaultValues:{name:"",description:"",pointValue:100,criteria:"",level:1,icon:"trophy"}}),{data:k,isLoading:M}=be({queryKey:["/api/loyalty/customers"],queryFn:async()=>{const z=await fetch("/api/loyalty/customers");if(!z.ok)throw new Error("Failed to fetch customers");return(await z.json()).customers}}),{data:A,isLoading:P}=be({queryKey:["/api/loyalty/points"],queryFn:async()=>{const z=await fetch("/api/loyalty/points");if(!z.ok)throw new Error("Failed to fetch loyalty points");return(await z.json()).loyaltyPoints}}),{data:T,isLoading:I}=be({queryKey:["/api/loyalty/transactions"],queryFn:async()=>{const z=await fetch("/api/loyalty/transactions");if(!z.ok)throw new Error("Failed to fetch transactions");return(await z.json()).transactions}}),{data:L,isLoading:R}=be({queryKey:["/api/loyalty/tiers"],queryFn:async()=>{const z=await fetch("/api/loyalty/tiers");if(!z.ok)throw new Error("Failed to fetch loyalty tiers");return(await z.json()).tiers}}),{data:G,isLoading:$}=be({queryKey:["/api/loyalty/achievements"],queryFn:async()=>{const z=await fetch("/api/loyalty/achievements");if(!z.ok)throw new Error("Failed to fetch achievements");return(await z.json()).achievements}}),{data:D,isLoading:W}=be({queryKey:["/api/loyalty/customer-achievements"],queryFn:async()=>{const z=await fetch("/api/loyalty/customer-achievements");if(!z.ok)throw new Error("Failed to fetch customer achievements");return(await z.json()).customerAchievements}}),{data:E,isLoading:F}=be({queryKey:["/api/loyalty/reward-services"],queryFn:async()=>{const z=await fetch("/api/loyalty/reward-services");if(!z.ok)throw new Error("Failed to fetch reward services");return(await z.json()).rewardServices}}),{data:B,isLoading:Z}=be({queryKey:["/api/loyalty/redeemed-rewards"],queryFn:async()=>{const z=await fetch("/api/loyalty/redeemed-rewards");if(!z.ok)throw new Error("Failed to fetch redeemed rewards");return(await z.json()).redeemedRewards}}),ne=je({mutationFn:async z=>await Ne("/api/loyalty/add-points",{method:"POST",body:JSON.stringify(z)}),onSuccess:()=>{t({title:"Success",description:"Points added successfully",duration:5e3}),r.invalidateQueries({queryKey:["/api/loyalty/points"]}),r.invalidateQueries({queryKey:["/api/loyalty/transactions"]}),o(!1),j.reset()},onError:z=>{t({title:"Error",description:`Failed to add points: ${z.message}`,variant:"destructive",duration:5e3})}}),Y=je({mutationFn:async z=>await Ne("/api/loyalty/reward-services",{method:"POST",body:JSON.stringify(z)}),onSuccess:()=>{t({title:"Success",description:"Reward service created successfully",duration:5e3}),r.invalidateQueries({queryKey:["/api/loyalty/reward-services"]}),c(!1),S.reset()},onError:z=>{t({title:"Error",description:`Failed to create reward service: ${z.message}`,variant:"destructive",duration:5e3})}}),me=je({mutationFn:async({id:z,data:Se})=>await Ne(`/api/loyalty/reward-services/${z}`,{method:"PUT",body:JSON.stringify(Se)}),onSuccess:()=>{t({title:"Success",description:"Reward service updated successfully",duration:5e3}),r.invalidateQueries({queryKey:["/api/loyalty/reward-services"]}),c(!1),b(null),S.reset()},onError:z=>{t({title:"Error",description:`Failed to update reward service: ${z.message}`,variant:"destructive",duration:5e3})}}),pe=je({mutationFn:async z=>await Ne("/api/loyalty/achievements",{method:"POST",body:JSON.stringify(z)}),onSuccess:()=>{t({title:"Success",description:"Achievement created successfully",duration:5e3}),r.invalidateQueries({queryKey:["/api/loyalty/achievements"]}),u(!1),C.reset()},onError:z=>{t({title:"Error",description:`Failed to create achievement: ${z.message}`,variant:"destructive",duration:5e3})}}),Me=je({mutationFn:async({id:z,data:Se})=>await Ne(`/api/loyalty/achievements/${z}`,{method:"PUT",body:JSON.stringify(Se)}),onSuccess:()=>{t({title:"Success",description:"Achievement updated successfully",duration:5e3}),r.invalidateQueries({queryKey:["/api/loyalty/achievements"]}),u(!1),N(null),C.reset()},onError:z=>{t({title:"Error",description:`Failed to update achievement: ${z.message}`,variant:"destructive",duration:5e3})}}),re=z=>{g(z),j.setValue("customerId",z.id),o(!0)},de=z=>{ne.mutate(z)},he=(z=null)=>{z?(b(z),S.reset({name:z.name,description:z.description,pointCost:z.pointCost,tier:z.tier,active:z.active})):(b(null),S.reset({name:"",description:"",pointCost:500,tier:"tier_500",active:!0})),c(!0)},ce=z=>{v?me.mutate({id:v.id,data:z}):Y.mutate(z)},Be=(z=null)=>{z?(N(z),C.reset({name:z.name,description:z.description,pointValue:z.pointValue,criteria:z.criteria,level:z.level,icon:z.icon||"trophy"})):(N(null),C.reset({name:"",description:"",pointValue:100,criteria:"",level:1,icon:"trophy"})),u(!0)},le=z=>{w?Me.mutate({id:w.id,data:z}):pe.mutate(z)},$e=z=>L&&[...L].sort((J,oe)=>oe.pointThreshold-J.pointThreshold).find(J=>z>=J.pointThreshold)||null,et=z=>new Date(z).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),_e=()=>T?[...T].sort((z,Se)=>new Date(Se.transactionDate).getTime()-new Date(z.transactionDate).getTime()).slice(0,10):[],ot=z=>{if(!A||!k)return"Unknown Customer";const Se=A.find(oe=>oe.id===z);if(!Se)return"Unknown Customer";const J=k.find(oe=>oe.id===Se.customerId);return J?J.name:"Unknown Customer"};return n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"flex justify-between items-center",children:n.jsx("h2",{className:"text-2xl font-bold",children:"Loyalty Points System"})}),n.jsxs(js,{value:s,onValueChange:a,className:"w-full",children:[n.jsxs(ds,{className:"grid grid-cols-4 mb-4",children:[n.jsxs(dt,{value:"customers",className:"flex items-center gap-2",children:[n.jsx(br,{className:"h-4 w-4"}),n.jsx("span",{children:"Customers"})]}),n.jsxs(dt,{value:"transactions",className:"flex items-center gap-2",children:[n.jsx(nQ,{className:"h-4 w-4"}),n.jsx("span",{children:"Transactions"})]}),n.jsxs(dt,{value:"rewards",className:"flex items-center gap-2",children:[n.jsx(jr,{className:"h-4 w-4"}),n.jsx("span",{children:"Loyalty Offers"})]}),n.jsxs(dt,{value:"achievements",className:"flex items-center gap-2",children:[n.jsx(yQ,{className:"h-4 w-4"}),n.jsx("span",{children:"Achievements"})]})]}),n.jsx(pt,{value:"customers",className:"space-y-4",children:n.jsxs(O,{children:[n.jsxs(ee,{children:[n.jsx(te,{children:"Loyalty Program Members"}),n.jsx(ke,{children:"View and manage customers enrolled in the loyalty program"})]}),n.jsx(H,{children:M||P?n.jsx("div",{className:"flex justify-center items-center py-8",children:n.jsx(nt,{className:"h-8 w-8 animate-spin text-blue-500"})}):A&&A.length>0?n.jsxs(hs,{children:[n.jsx(ms,{children:n.jsxs(vn,{children:[n.jsx(Ve,{children:"Customer"}),n.jsx(Ve,{children:"Points"}),n.jsx(Ve,{children:"Tier"}),n.jsx(Ve,{children:"Join Date"}),n.jsx(Ve,{children:"Last Updated"}),n.jsx(Ve,{children:"Actions"})]})}),n.jsx(ps,{children:A.map(z=>{const Se=k==null?void 0:k.find(oe=>oe.id===z.customerId),J=$e(z.points);return n.jsxs(vn,{children:[n.jsxs(Ue,{className:"font-medium cursor-pointer hover:text-blue-600",onClick:()=>{Se&&(g(Se),y(z),h(!0))},children:[Se?Se.name:"Unknown Customer",n.jsx("div",{className:"text-xs text-gray-500",children:Se==null?void 0:Se.phone})]}),n.jsx(Ue,{children:z.points}),n.jsx(Ue,{children:J?n.jsx(ge,{variant:"outline",className:"bg-blue-50 text-blue-700",children:J.name}):n.jsx(ge,{variant:"outline",className:"bg-gray-50",children:"No Tier"})}),n.jsx(Ue,{children:Se!=null&&Se.loyaltyProgramJoinDate?et(Se.loyaltyProgramJoinDate):"Unknown"}),n.jsx(Ue,{children:et(z.lastUpdated)}),n.jsx(Ue,{children:n.jsx(_,{variant:"outline",size:"sm",onClick:()=>Se&&re(Se),disabled:!Se,children:"Add Points"})})]},z.id)})})]}):n.jsx("div",{className:"text-center py-8",children:n.jsx("p",{className:"text-gray-500",children:"No customers enrolled in the loyalty program yet."})})})]})}),n.jsx(pt,{value:"transactions",className:"space-y-4",children:n.jsxs(O,{children:[n.jsxs(ee,{children:[n.jsx(te,{children:"Recent Points Transactions"}),n.jsx(ke,{children:"View recent points earning and redemption activity"})]}),n.jsx(H,{children:I?n.jsx("div",{className:"flex justify-center items-center py-8",children:n.jsx(nt,{className:"h-8 w-8 animate-spin text-blue-500"})}):T&&T.length>0?n.jsxs(hs,{children:[n.jsx(ms,{children:n.jsxs(vn,{children:[n.jsx(Ve,{children:"Customer"}),n.jsx(Ve,{children:"Type"}),n.jsx(Ve,{children:"Points"}),n.jsx(Ve,{children:"Source"}),n.jsx(Ve,{children:"Description"}),n.jsx(Ve,{children:"Date"})]})}),n.jsx(ps,{children:_e().map(z=>n.jsxs(vn,{children:[n.jsx(Ue,{className:"font-medium",children:ot(z.loyaltyPointsId)}),n.jsx(Ue,{children:n.jsx(ge,{variant:"outline",className:z.transactionType==="earn"?"bg-green-50 text-green-700":"bg-purple-50 text-purple-700",children:z.transactionType==="earn"?"Earned":"Redeemed"})}),n.jsx(Ue,{children:n.jsxs("span",{className:z.transactionType==="earn"?"text-green-600":"text-purple-600",children:[z.transactionType==="earn"?"+":"-",z.amount]})}),n.jsx(Ue,{children:z.source}),n.jsx(Ue,{children:z.description}),n.jsx(Ue,{children:et(z.transactionDate)})]},z.id))})]}):n.jsx("div",{className:"text-center py-8",children:n.jsx("p",{className:"text-gray-500",children:"No transaction history available."})})})]})}),n.jsxs(pt,{value:"rewards",className:"space-y-4",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("h3",{className:"text-lg font-medium",children:"Loyalty Point Offers"}),n.jsxs(_,{onClick:()=>he(),className:"flex items-center gap-2",children:[n.jsx(Un,{className:"h-4 w-4"}),n.jsx("span",{children:"Add Loyalty Offer"})]})]}),n.jsx(O,{children:n.jsx(H,{className:"pt-6",children:F?n.jsx("div",{className:"flex justify-center items-center py-8",children:n.jsx(nt,{className:"h-8 w-8 animate-spin text-blue-500"})}):E&&E.length>0?n.jsxs(hs,{children:[n.jsx(ms,{children:n.jsxs(vn,{children:[n.jsx(Ve,{children:"Name"}),n.jsx(Ve,{children:"Description"}),n.jsx(Ve,{children:"Point Cost"}),n.jsx(Ve,{children:"Tier"}),n.jsx(Ve,{children:"Status"}),n.jsx(Ve,{children:"Actions"})]})}),n.jsx(ps,{children:E.map(z=>n.jsxs(vn,{children:[n.jsx(Ue,{className:"font-medium",children:z.name}),n.jsx(Ue,{children:z.description}),n.jsx(Ue,{children:z.pointCost}),n.jsx(Ue,{children:n.jsx(ge,{variant:"outline",className:"capitalize",children:z.tier.replace("_"," ")})}),n.jsx(Ue,{children:n.jsx(ge,{variant:"outline",className:z.active?"bg-green-50 text-green-700":"bg-gray-100 text-gray-700",children:z.active?"Active":"Inactive"})}),n.jsx(Ue,{children:n.jsx(_,{variant:"ghost",size:"sm",onClick:()=>he(z),children:n.jsx(No,{className:"h-4 w-4"})})})]},z.id))})]}):n.jsxs("div",{className:"text-center py-8",children:[n.jsx("p",{className:"text-gray-500",children:"No reward services have been created yet."}),n.jsx(_,{onClick:()=>he(),variant:"outline",className:"mt-4",children:"Add Your First Reward"})]})})}),n.jsxs("div",{className:"mt-8",children:[n.jsx("h3",{className:"text-lg font-medium mb-4",children:"Redeemed Loyalty Points"}),n.jsx(O,{children:n.jsx(H,{className:"pt-6",children:Z?n.jsx("div",{className:"flex justify-center items-center py-8",children:n.jsx(nt,{className:"h-8 w-8 animate-spin text-blue-500"})}):B&&B.length>0?n.jsxs(hs,{children:[n.jsx(ms,{children:n.jsxs(vn,{children:[n.jsx(Ve,{children:"Customer"}),n.jsx(Ve,{children:"Loyalty Offer"}),n.jsx(Ve,{children:"Points Spent"}),n.jsx(Ve,{children:"Redeemed Date"}),n.jsx(Ve,{children:"Status"}),n.jsx(Ve,{children:"Expiry"})]})}),n.jsx(ps,{children:B.map(z=>{var Se,J;return n.jsxs(vn,{children:[n.jsx(Ue,{className:"font-medium",children:((Se=z.customer)==null?void 0:Se.name)||"Unknown Customer"}),n.jsx(Ue,{children:((J=z.rewardService)==null?void 0:J.name)||"Unknown Offer"}),n.jsx(Ue,{children:z.pointsSpent}),n.jsx(Ue,{children:et(z.redeemedDate)}),n.jsx(Ue,{children:n.jsx(ge,{variant:"outline",className:`capitalize ${z.status==="completed"?"bg-green-50 text-green-700":z.status==="pending"?"bg-yellow-50 text-yellow-700":z.status==="scheduled"?"bg-blue-50 text-blue-700":"bg-red-50 text-red-700"}`,children:z.status})}),n.jsx(Ue,{children:z.expiryDate?et(z.expiryDate):"N/A"})]},z.id)})})]}):n.jsx("div",{className:"text-center py-8",children:n.jsx("p",{className:"text-gray-500",children:"No rewards have been redeemed yet."})})})})]})]}),n.jsxs(pt,{value:"achievements",className:"space-y-4",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("h3",{className:"text-lg font-medium",children:"Achievements"}),n.jsxs(_,{onClick:()=>Be(),className:"flex items-center gap-2",children:[n.jsx(Un,{className:"h-4 w-4"}),n.jsx("span",{children:"Add Achievement"})]})]}),n.jsx(O,{children:n.jsx(H,{className:"pt-6",children:$?n.jsx("div",{className:"flex justify-center items-center py-8",children:n.jsx(nt,{className:"h-8 w-8 animate-spin text-blue-500"})}):G&&G.length>0?n.jsxs(hs,{children:[n.jsx(ms,{children:n.jsxs(vn,{children:[n.jsx(Ve,{children:"Name"}),n.jsx(Ve,{children:"Description"}),n.jsx(Ve,{children:"Point Value"}),n.jsx(Ve,{children:"Level"}),n.jsx(Ve,{children:"Criteria"}),n.jsx(Ve,{children:"Actions"})]})}),n.jsx(ps,{children:G.map(z=>n.jsxs(vn,{children:[n.jsx(Ue,{className:"font-medium",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Yr,{className:"h-4 w-4 text-amber-500"}),n.jsx("span",{children:z.name})]})}),n.jsx(Ue,{children:z.description}),n.jsx(Ue,{children:z.pointValue}),n.jsx(Ue,{children:n.jsx("div",{className:"flex items-center",children:Array.from({length:z.level}).map((Se,J)=>n.jsx(Qr,{className:"h-3 w-3 text-amber-400 fill-amber-400"},J))})}),n.jsx(Ue,{children:z.criteria}),n.jsx(Ue,{children:n.jsx(_,{variant:"ghost",size:"sm",onClick:()=>Be(z),children:n.jsx(No,{className:"h-4 w-4"})})})]},z.id))})]}):n.jsxs("div",{className:"text-center py-8",children:[n.jsx("p",{className:"text-gray-500",children:"No achievements have been created yet."}),n.jsx(_,{onClick:()=>Be(),variant:"outline",className:"mt-4",children:"Add Your First Achievement"})]})})}),n.jsxs("div",{className:"mt-8",children:[n.jsx("h3",{className:"text-lg font-medium mb-4",children:"Recent Achievement Unlocks"}),n.jsx(O,{children:n.jsx(H,{className:"pt-6",children:W?n.jsx("div",{className:"flex justify-center items-center py-8",children:n.jsx(nt,{className:"h-8 w-8 animate-spin text-blue-500"})}):D&&D.length>0?n.jsxs(hs,{children:[n.jsx(ms,{children:n.jsxs(vn,{children:[n.jsx(Ve,{children:"Customer"}),n.jsx(Ve,{children:"Achievement"}),n.jsx(Ve,{children:"Points"}),n.jsx(Ve,{children:"Date Earned"}),n.jsx(Ve,{children:"Notified"})]})}),n.jsx(ps,{children:D.slice(0,10).map(z=>{var Se,J,oe;return n.jsxs(vn,{children:[n.jsx(Ue,{className:"font-medium",children:((Se=z.customer)==null?void 0:Se.name)||"Unknown Customer"}),n.jsx(Ue,{children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Yr,{className:"h-4 w-4 text-amber-500"}),n.jsx("span",{children:((J=z.achievement)==null?void 0:J.name)||"Unknown Achievement"})]})}),n.jsxs(Ue,{children:["+",((oe=z.achievement)==null?void 0:oe.pointValue)||0]}),n.jsx(Ue,{children:et(z.dateEarned)}),n.jsx(Ue,{children:n.jsx(ge,{variant:"outline",className:z.notified?"bg-green-50 text-green-700":"bg-yellow-50 text-yellow-700",children:z.notified?"Notified":"Pending"})})]},z.id)})})]}):n.jsx("div",{className:"text-center py-8",children:n.jsx("p",{className:"text-gray-500",children:"No achievements have been unlocked yet."})})})})]})]})]}),n.jsx(At,{open:i,onOpenChange:o,children:n.jsxs(_t,{className:"sm:max-w-[500px]",children:[n.jsxs($t,{children:[n.jsx(Et,{children:"Add Points to Customer"}),n.jsx(an,{children:m&&n.jsxs("span",{children:["Add loyalty points to ",m.name]})})]}),n.jsx(mi,{...j,children:n.jsxs("form",{onSubmit:j.handleSubmit(de),className:"space-y-4",children:[n.jsx(Ye,{control:j.control,name:"points",render:({field:z})=>n.jsxs(We,{children:[n.jsx(qe,{children:"Points"}),n.jsx(Qe,{children:n.jsx(se,{type:"number",min:"1",step:"1",...z,onChange:Se=>z.onChange(parseInt(Se.target.value))})}),n.jsx(Ze,{})]})}),n.jsx(Ye,{control:j.control,name:"source",render:({field:z})=>n.jsxs(We,{children:[n.jsx(qe,{children:"Source"}),n.jsxs(Pt,{onValueChange:z.onChange,defaultValue:z.value,children:[n.jsx(Qe,{children:n.jsx(kt,{children:n.jsx(Tt,{placeholder:"Select source"})})}),n.jsxs(Mt,{children:[n.jsx(ve,{value:"manual",children:"Manual Adjustment"}),n.jsx(ve,{value:"referral",children:"Referral Bonus"}),n.jsx(ve,{value:"appointment",children:"Appointment Completion"}),n.jsx(ve,{value:"review",children:"Customer Review"}),n.jsx(ve,{value:"promotion",children:"Special Promotion"})]})]}),n.jsx(Ze,{})]})}),n.jsx(Ye,{control:j.control,name:"description",render:({field:z})=>n.jsxs(We,{children:[n.jsx(qe,{children:"Description"}),n.jsx(Qe,{children:n.jsx(se,{...z})}),n.jsx(cn,{children:"Brief description of why points are being added"}),n.jsx(Ze,{})]})}),n.jsxs(Sn,{className:"pt-4",children:[n.jsx(_,{type:"button",variant:"outline",onClick:()=>o(!1),children:"Cancel"}),n.jsx(_,{type:"submit",disabled:ne.isPending,children:ne.isPending?n.jsxs(n.Fragment,{children:[n.jsx(nt,{className:"mr-2 h-4 w-4 animate-spin"}),"Adding..."]}):"Add Points"})]})]})})]})}),n.jsx(At,{open:l,onOpenChange:c,children:n.jsxs(_t,{className:"sm:max-w-[600px]",children:[n.jsxs($t,{children:[n.jsx(Et,{children:v?"Edit Reward Service":"Create Reward Service"}),n.jsx(an,{children:v?"Modify the details of this reward service":"Create a new reward service for your loyalty program"})]}),n.jsx(mi,{...S,children:n.jsxs("form",{onSubmit:S.handleSubmit(ce),className:"space-y-4",children:[n.jsx(Ye,{control:S.control,name:"name",render:({field:z})=>n.jsxs(We,{children:[n.jsx(qe,{children:"Service Name"}),n.jsx(Qe,{children:n.jsx(se,{...z})}),n.jsx(Ze,{})]})}),n.jsx(Ye,{control:S.control,name:"description",render:({field:z})=>n.jsxs(We,{children:[n.jsx(qe,{children:"Description"}),n.jsx(Qe,{children:n.jsx(se,{...z})}),n.jsx(Ze,{})]})}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsx(Ye,{control:S.control,name:"pointCost",render:({field:z})=>n.jsxs(We,{children:[n.jsx(qe,{children:"Point Cost"}),n.jsx(Qe,{children:n.jsx(se,{type:"number",min:"1",step:"1",...z,onChange:Se=>z.onChange(parseInt(Se.target.value))})}),n.jsx(Ze,{})]})}),n.jsx(Ye,{control:S.control,name:"tier",render:({field:z})=>n.jsxs(We,{children:[n.jsx(qe,{children:"Tier"}),n.jsxs(Pt,{onValueChange:z.onChange,defaultValue:z.value,children:[n.jsx(Qe,{children:n.jsx(kt,{children:n.jsx(Tt,{placeholder:"Select tier"})})}),n.jsxs(Mt,{children:[n.jsx(ve,{value:"tier_500",children:"Tier 500"}),n.jsx(ve,{value:"tier_1000",children:"Tier 1000"}),n.jsx(ve,{value:"tier_2000",children:"Tier 2000"}),n.jsx(ve,{value:"tier_5000",children:"Tier 5000"})]})]}),n.jsx(Ze,{})]})})]}),n.jsx(Ye,{control:S.control,name:"active",render:({field:z})=>n.jsxs(We,{className:"flex flex-row items-center justify-between rounded-lg border p-3 shadow-sm",children:[n.jsxs("div",{className:"space-y-0.5",children:[n.jsx(qe,{children:"Active"}),n.jsx(cn,{children:"Make this reward available to customers"})]}),n.jsx(Qe,{children:n.jsx("input",{type:"checkbox",checked:z.value,onChange:z.onChange,className:"w-4 h-4"})})]})}),n.jsxs(Sn,{className:"pt-4",children:[n.jsx(_,{type:"button",variant:"outline",onClick:()=>c(!1),children:"Cancel"}),n.jsx(_,{type:"submit",disabled:Y.isPending||me.isPending,children:Y.isPending||me.isPending?n.jsxs(n.Fragment,{children:[n.jsx(nt,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):v?"Update Reward":"Create Reward"})]})]})})]})}),n.jsx(At,{open:d,onOpenChange:u,children:n.jsxs(_t,{className:"sm:max-w-[600px]",children:[n.jsxs($t,{children:[n.jsx(Et,{children:w?"Edit Achievement":"Create Achievement"}),n.jsx(an,{children:w?"Modify the details of this achievement":"Create a new achievement for your loyalty program"})]}),n.jsx(mi,{...C,children:n.jsxs("form",{onSubmit:C.handleSubmit(le),className:"space-y-4",children:[n.jsx(Ye,{control:C.control,name:"name",render:({field:z})=>n.jsxs(We,{children:[n.jsx(qe,{children:"Achievement Name"}),n.jsx(Qe,{children:n.jsx(se,{...z})}),n.jsx(Ze,{})]})}),n.jsx(Ye,{control:C.control,name:"description",render:({field:z})=>n.jsxs(We,{children:[n.jsx(qe,{children:"Description"}),n.jsx(Qe,{children:n.jsx(se,{...z})}),n.jsx(Ze,{})]})}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsx(Ye,{control:C.control,name:"pointValue",render:({field:z})=>n.jsxs(We,{children:[n.jsx(qe,{children:"Point Value"}),n.jsx(Qe,{children:n.jsx(se,{type:"number",min:"0",step:"1",...z,onChange:Se=>z.onChange(parseInt(Se.target.value))})}),n.jsx(cn,{children:"Points awarded when achievement is unlocked"}),n.jsx(Ze,{})]})}),n.jsx(Ye,{control:C.control,name:"level",render:({field:z})=>n.jsxs(We,{children:[n.jsx(qe,{children:"Level"}),n.jsx(Qe,{children:n.jsx(se,{type:"number",min:"1",max:"5",step:"1",...z,onChange:Se=>z.onChange(parseInt(Se.target.value))})}),n.jsx(cn,{children:"Achievement difficulty (1-5)"}),n.jsx(Ze,{})]})})]}),n.jsx(Ye,{control:C.control,name:"criteria",render:({field:z})=>n.jsxs(We,{children:[n.jsx(qe,{children:"Criteria"}),n.jsx(Qe,{children:n.jsx(se,{...z})}),n.jsx(cn,{children:"How customers can unlock this achievement"}),n.jsx(Ze,{})]})}),n.jsx(Ye,{control:C.control,name:"icon",render:({field:z})=>n.jsxs(We,{children:[n.jsx(qe,{children:"Icon"}),n.jsxs(Pt,{onValueChange:z.onChange,defaultValue:z.value,children:[n.jsx(Qe,{children:n.jsx(kt,{children:n.jsx(Tt,{placeholder:"Select icon"})})}),n.jsxs(Mt,{children:[n.jsx(ve,{value:"trophy",children:"Trophy"}),n.jsx(ve,{value:"star",children:"Star"}),n.jsx(ve,{value:"award",children:"Award"}),n.jsx(ve,{value:"gift",children:"Gift"}),n.jsx(ve,{value:"calendar",children:"Calendar"}),n.jsx(ve,{value:"zap",children:"Lightning"})]})]}),n.jsx(Ze,{})]})}),n.jsxs(Sn,{className:"pt-4",children:[n.jsx(_,{type:"button",variant:"outline",onClick:()=>u(!1),children:"Cancel"}),n.jsx(_,{type:"submit",disabled:pe.isPending||Me.isPending,children:pe.isPending||Me.isPending?n.jsxs(n.Fragment,{children:[n.jsx(nt,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):w?"Update Achievement":"Create Achievement"})]})]})})]})}),n.jsx(At,{open:f,onOpenChange:h,children:n.jsxs(_t,{className:"sm:max-w-[700px]",children:[n.jsxs($t,{children:[n.jsx(Et,{children:"Customer Loyalty Profile"}),n.jsx(an,{children:m&&`Viewing loyalty program details for ${m.name}`})]}),m&&x&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Contact Information"}),n.jsxs("div",{className:"mt-2",children:[n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:"Name:"})," ",m.name]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:"Phone:"})," ",m.phone]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:"Email:"})," ",m.email||"Not provided"]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:"Vehicle:"})," ",m.vehicle_info||"Not specified"]})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Loyalty Status"}),n.jsxs("div",{className:"mt-2",children:[n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:"Points Balance:"})," ",n.jsx("span",{className:"text-lg font-bold text-blue-600",children:x.points})]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:"Current Tier:"})," "," ",n.jsx(ge,{variant:"outline",className:"bg-blue-50 text-blue-700",children:((rt=$e(x.points))==null?void 0:rt.name)||"No Tier"})]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:"Member Since:"})," ",et(m.loyaltyProgramJoinDate||new Date)]}),n.jsxs("p",{children:[n.jsx("span",{className:"font-medium",children:"Points Expiry:"})," ",et(x.expiryDate||new Date)]})]})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-2",children:"Recent Transactions"}),n.jsx("div",{className:"border rounded-md overflow-hidden",children:n.jsxs(hs,{children:[n.jsx(ms,{children:n.jsxs(vn,{children:[n.jsx(Ve,{children:"Date"}),n.jsx(Ve,{children:"Description"}),n.jsx(Ve,{children:"Points"}),n.jsx(Ve,{children:"Type"})]})}),n.jsxs(ps,{children:[T==null?void 0:T.filter(z=>z.loyaltyPointsId===x.id).slice(0,5).map(z=>n.jsxs(vn,{children:[n.jsx(Ue,{children:et(z.transactionDate)}),n.jsx(Ue,{children:z.description}),n.jsx(Ue,{className:z.amount>0?"text-green-600":"text-red-600",children:z.amount>0?`+${z.amount}`:z.amount}),n.jsx(Ue,{children:n.jsx(ge,{variant:z.transactionType==="earn"?"default":"outline",children:z.transactionType==="earn"?"Earned":"Redeemed"})})]},z.id)),(!T||T.filter(z=>z.loyaltyPointsId===x.id).length===0)&&n.jsx(vn,{children:n.jsx(Ue,{colSpan:4,className:"text-center py-4 text-gray-500",children:"No transactions found"})})]})]})})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-2",children:"Available Rewards"}),n.jsx("div",{className:"border rounded-md p-4",children:(E==null?void 0:E.filter(z=>z.pointCost<=x.points).length)>0?n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:E==null?void 0:E.filter(z=>z.pointCost<=x.points).map(z=>n.jsxs("div",{className:"border rounded-md p-3 bg-blue-50",children:[n.jsx("h4",{className:"font-medium",children:z.name}),n.jsx("p",{className:"text-sm text-gray-600",children:z.description}),n.jsxs("div",{className:"flex justify-between items-center mt-2",children:[n.jsxs(ge,{children:[z.pointCost," points"]}),n.jsx(_,{size:"sm",variant:"outline",onClick:()=>{e(`/book?service=${encodeURIComponent(z.name)}&redeem=true&customerId=${m.id}&rewardId=${z.id}`)},children:"Schedule & Redeem"})]})]},z.id))}):n.jsx("div",{className:"text-center py-4 text-gray-500",children:"No rewards available at current point level"})})]}),n.jsxs("div",{className:"flex justify-end space-x-2",children:[n.jsx(_,{onClick:()=>m&&re(m),variant:"outline",children:"Add Points"}),n.jsx(_,{onClick:()=>h(!1),children:"Close"})]})]})]})})]})}const HRe=fe.object({enabled:fe.boolean(),referrerRewardType:fe.string(),referrerRewardAmount:fe.string(),referrerRewardExpiry:fe.union([fe.number().int().positive(),fe.null()]).optional().transform(e=>e??null),refereeRewardType:fe.string(),refereeRewardAmount:fe.string(),refereeRewardExpiry:fe.union([fe.number().int().positive(),fe.null()]).optional().transform(e=>e??null),allowStackableRewards:fe.boolean()}),Yh=[{value:"loyalty_points",label:"Loyalty Points",amountLabel:"Points",placeholder:"500"},{value:"fixed_discount",label:"Fixed Dollar Discount",amountLabel:"Amount ($)",placeholder:"10.00"},{value:"percent_discount",label:"Percentage Discount",amountLabel:"Percentage",placeholder:"15"},{value:"service_credit",label:"Service Credit",amountLabel:"Amount ($)",placeholder:"25.00"},{value:"free_addon",label:"Free Add-on",amountLabel:"Add-on Name",placeholder:"Tire Shine"},{value:"tier_upgrade",label:"Tier Upgrade",amountLabel:"Tier Name",placeholder:"Gold"},{value:"priority_booking",label:"Priority Booking",amountLabel:"Days Valid",placeholder:"90"},{value:"milestone_reward",label:"Milestone Reward",amountLabel:"Threshold",placeholder:"5"},{value:"gift_card",label:"Gift Card",amountLabel:"Amount ($)",placeholder:"50.00"}];function WRe(){const{toast:e}=Ee(),{data:t,isLoading:r}=be({queryKey:["/api/admin/referral-config"]}),s=t==null?void 0:t.config,a=fi({resolver:hi(HRe),defaultValues:{enabled:(s==null?void 0:s.enabled)??!0,referrerRewardType:(s==null?void 0:s.referrerRewardType)??"loyalty_points",referrerRewardAmount:(s==null?void 0:s.referrerRewardAmount)??"500",referrerRewardExpiry:(s==null?void 0:s.referrerRewardExpiry)??null,refereeRewardType:(s==null?void 0:s.refereeRewardType)??"loyalty_points",refereeRewardAmount:(s==null?void 0:s.refereeRewardAmount)??"250",refereeRewardExpiry:(s==null?void 0:s.refereeRewardExpiry)??null,allowStackableRewards:(s==null?void 0:s.allowStackableRewards)??!1}});Q.useEffect(()=>{s&&a.reset({enabled:s.enabled,referrerRewardType:s.referrerRewardType,referrerRewardAmount:s.referrerRewardAmount,referrerRewardExpiry:s.referrerRewardExpiry,refereeRewardType:s.refereeRewardType,refereeRewardAmount:s.refereeRewardAmount,refereeRewardExpiry:s.refereeRewardExpiry,allowStackableRewards:s.allowStackableRewards})},[s,a]);const i=je({mutationFn:async c=>(await Ne("POST","/api/admin/referral-config",c)).json(),onSuccess:()=>{e({title:"Referral configuration updated successfully"}),ze.invalidateQueries({queryKey:["/api/admin/referral-config"]}),ze.invalidateQueries({queryKey:["/api/admin/referral-stats"]}),a.reset(a.getValues())},onError:c=>{e({title:"Failed to update configuration",description:c.message,variant:"destructive"})}}),o=c=>{i.mutate(c)},l=()=>{const c=a.watch(),d=Yh.find(m=>m.value===c.referrerRewardType),u=Yh.find(m=>m.value===c.refereeRewardType);let f=`${c.referrerRewardAmount} ${(d==null?void 0:d.label)||""}`,h=`${c.refereeRewardAmount} ${(u==null?void 0:u.label)||""}`;return`"Share your referral code! You get ${f}, they get ${h}!"`};return r?n.jsxs(O,{children:[n.jsx(ee,{children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(ja,{className:"h-5 w-5"}),n.jsx(te,{children:"Referral Program Configuration"})]})}),n.jsx(H,{children:n.jsx("div",{className:"text-center py-4 text-muted-foreground",children:"Loading configuration..."})})]}):n.jsxs(O,{"data-testid":"card-referral-config",children:[n.jsxs(ee,{children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(ja,{className:"h-5 w-5"}),n.jsx(te,{children:"Referral Program Configuration"})]}),n.jsx(ke,{children:"Configure rewards for referrers and referees. Changes apply to new referrals immediately."})]}),n.jsx(H,{children:n.jsx(mi,{...a,children:n.jsxs("form",{onSubmit:a.handleSubmit(o),className:"space-y-6",children:[n.jsx(Ye,{control:a.control,name:"enabled",render:({field:c})=>n.jsxs(We,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[n.jsxs("div",{className:"space-y-0.5",children:[n.jsx(qe,{className:"text-base",children:"Enable Referral Program"}),n.jsx(cn,{children:"Allow customers to generate and share referral codes"})]}),n.jsx(Qe,{children:n.jsx(Vt,{checked:c.value,onCheckedChange:c.onChange,"data-testid":"switch-referral-enabled"})})]})}),n.jsxs("div",{className:"space-y-4 rounded-lg border p-4",children:[n.jsx("h3",{className:"font-semibold text-sm",children:"Referrer Reward (Person Sharing)"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsx(Ye,{control:a.control,name:"referrerRewardType",render:({field:c})=>n.jsxs(We,{children:[n.jsx(qe,{children:"Reward Type"}),n.jsxs(Pt,{onValueChange:c.onChange,value:c.value,children:[n.jsx(Qe,{children:n.jsx(kt,{"data-testid":"select-referrer-reward-type",children:n.jsx(Tt,{placeholder:"Select reward type"})})}),n.jsx(Mt,{children:Yh.map(d=>n.jsx(ve,{value:d.value,children:d.label},d.value))})]}),n.jsx(Ze,{})]})}),n.jsx(Ye,{control:a.control,name:"referrerRewardAmount",render:({field:c})=>{const d=Yh.find(u=>u.value===a.watch("referrerRewardType"));return n.jsxs(We,{children:[n.jsx(qe,{children:(d==null?void 0:d.amountLabel)||"Amount"}),n.jsx(Qe,{children:n.jsx(se,{...c,placeholder:(d==null?void 0:d.placeholder)||"","data-testid":"input-referrer-reward-amount"})}),n.jsx(Ze,{})]})}}),n.jsx(Ye,{control:a.control,name:"referrerRewardExpiry",render:({field:c})=>n.jsxs(We,{children:[n.jsx(qe,{children:"Expiry (Days)"}),n.jsx(Qe,{children:n.jsx(se,{type:"number",value:c.value===null||c.value===void 0?"":c.value,onChange:d=>{const u=d.target.value.trim();c.onChange(u===""?null:Number(u))},placeholder:"Never","data-testid":"input-referrer-expiry"})}),n.jsx(cn,{className:"text-xs",children:"Leave empty for no expiration"}),n.jsx(Ze,{})]})})]})]}),n.jsxs("div",{className:"space-y-4 rounded-lg border p-4",children:[n.jsx("h3",{className:"font-semibold text-sm",children:"Referee Reward (New Customer)"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsx(Ye,{control:a.control,name:"refereeRewardType",render:({field:c})=>n.jsxs(We,{children:[n.jsx(qe,{children:"Reward Type"}),n.jsxs(Pt,{onValueChange:c.onChange,value:c.value,children:[n.jsx(Qe,{children:n.jsx(kt,{"data-testid":"select-referee-reward-type",children:n.jsx(Tt,{placeholder:"Select reward type"})})}),n.jsx(Mt,{children:Yh.map(d=>n.jsx(ve,{value:d.value,children:d.label},d.value))})]}),n.jsx(Ze,{})]})}),n.jsx(Ye,{control:a.control,name:"refereeRewardAmount",render:({field:c})=>{const d=Yh.find(u=>u.value===a.watch("refereeRewardType"));return n.jsxs(We,{children:[n.jsx(qe,{children:(d==null?void 0:d.amountLabel)||"Amount"}),n.jsx(Qe,{children:n.jsx(se,{...c,placeholder:(d==null?void 0:d.placeholder)||"","data-testid":"input-referee-reward-amount"})}),n.jsx(Ze,{})]})}}),n.jsx(Ye,{control:a.control,name:"refereeRewardExpiry",render:({field:c})=>n.jsxs(We,{children:[n.jsx(qe,{children:"Expiry (Days)"}),n.jsx(Qe,{children:n.jsx(se,{type:"number",value:c.value===null||c.value===void 0?"":c.value,onChange:d=>{const u=d.target.value.trim();c.onChange(u===""?null:Number(u))},placeholder:"Never","data-testid":"input-referee-expiry"})}),n.jsx(cn,{className:"text-xs",children:"Leave empty for no expiration"}),n.jsx(Ze,{})]})})]})]}),n.jsxs("div",{className:"rounded-lg bg-muted p-4",children:[n.jsx("p",{className:"text-sm font-medium mb-2",children:"SMS Message Preview:"}),n.jsx("p",{className:"text-sm text-muted-foreground italic",children:l()})]}),n.jsx(Ye,{control:a.control,name:"allowStackableRewards",render:({field:c})=>n.jsxs(We,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[n.jsxs("div",{className:"space-y-0.5",children:[n.jsx(qe,{className:"text-base",children:"Allow Stackable Rewards"}),n.jsx(cn,{children:"Permit customers to receive multiple referral rewards simultaneously"})]}),n.jsx(Qe,{children:n.jsx(Vt,{checked:c.value,onCheckedChange:c.onChange,"data-testid":"switch-stackable-rewards"})})]})}),n.jsx("div",{className:"flex justify-end",children:n.jsx(_,{type:"submit",disabled:!a.formState.isDirty||i.isPending,"data-testid":"button-save-config",children:i.isPending?n.jsxs(n.Fragment,{children:[n.jsx(nt,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):n.jsxs(n.Fragment,{children:[n.jsx(fr,{className:"h-4 w-4 mr-2"}),"Save Configuration"]})})})]})})})]})}function qRe(){const{data:e,isLoading:t}=be({queryKey:["/api/admin/referral-stats"]}),r=e==null?void 0:e.data,s=a=>{const i={pending:"secondary",signed_up:"default",first_service_completed:"default",rewarded:"default"},o={pending:"Pending",signed_up:"Signed Up",first_service_completed:"Service Completed",rewarded:"Rewarded"};return n.jsx(ge,{variant:i[a]||"secondary",children:o[a]||a})};return t?n.jsx("div",{className:"text-center py-10",children:n.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading referral statistics..."})}):r?n.jsxs("div",{className:"space-y-6",children:[n.jsx(WRe,{}),n.jsxs("section",{className:"space-y-6",children:[n.jsx(O,{children:n.jsxs(ee,{children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Yr,{className:"h-5 w-5"}),n.jsx(te,{children:"Referral Program Summary"})]}),n.jsx(ke,{children:"Track referral performance and conversion metrics"})]})}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:[n.jsx(O,{children:n.jsxs(H,{className:"pt-6 text-center",children:[n.jsx(jr,{className:"h-6 w-6 mx-auto mb-2 text-purple-600"}),n.jsx("div",{className:"text-2xl font-bold",children:r.totalReferrals}),n.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Total Referrals"})]})}),n.jsx(O,{children:n.jsxs(H,{className:"pt-6 text-center",children:[n.jsx(Rt,{className:"h-6 w-6 mx-auto mb-2 text-yellow-600"}),n.jsx("div",{className:"text-2xl font-bold",children:r.pending}),n.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Pending"})]})}),n.jsx(O,{children:n.jsxs(H,{className:"pt-6 text-center",children:[n.jsx(br,{className:"h-6 w-6 mx-auto mb-2 text-blue-600"}),n.jsx("div",{className:"text-2xl font-bold",children:r.signedUp}),n.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Signed Up"})]})}),n.jsx(O,{children:n.jsxs(H,{className:"pt-6 text-center",children:[n.jsx(nn,{className:"h-6 w-6 mx-auto mb-2 text-green-600"}),n.jsx("div",{className:"text-2xl font-bold",children:r.completed}),n.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Completed"})]})}),n.jsx(O,{children:n.jsxs(H,{className:"pt-6 text-center",children:[n.jsx(Yr,{className:"h-6 w-6 mx-auto mb-2 text-orange-600"}),n.jsx("div",{className:"text-2xl font-bold",children:r.rewarded}),n.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Rewarded"})]})}),n.jsx(O,{children:n.jsxs(H,{className:"pt-6 text-center",children:[n.jsx(Mp,{className:"h-6 w-6 mx-auto mb-2 text-indigo-600"}),n.jsxs("div",{className:"text-2xl font-bold",children:[r.conversionRate,"%"]}),n.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Conversion"})]})})]}),n.jsxs(O,{children:[n.jsx(ee,{children:n.jsxs(te,{className:"flex items-center gap-2",children:[n.jsx(ya,{className:"h-5 w-5"}),"Referral Program Summary"]})}),n.jsx(H,{children:n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Points Awarded"}),n.jsxs("span",{className:"font-semibold",children:[r.totalPointsAwarded.toLocaleString()," points"]})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Success Rate (Rewarded / Total)"}),n.jsxs("span",{className:"font-semibold",children:[r.totalReferrals>0?Math.round(r.rewarded/r.totalReferrals*100):0,"%"]})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Signup Rate (Signed Up / Total)"}),n.jsxs("span",{className:"font-semibold",children:[r.totalReferrals>0?Math.round((r.signedUp+r.completed+r.rewarded)/r.totalReferrals*100):0,"%"]})]})]})})]}),r.topReferrers&&r.topReferrers.length>0&&n.jsxs(O,{children:[n.jsxs(ee,{children:[n.jsx(te,{children:"Top Referrers"}),n.jsx(ke,{children:"Customers with the most successful referrals"})]}),n.jsx(H,{children:n.jsxs(hs,{children:[n.jsx(ms,{children:n.jsxs(vn,{children:[n.jsx(Ve,{children:"Rank"}),n.jsx(Ve,{children:"Customer"}),n.jsx(Ve,{className:"text-right",children:"Total Referrals"}),n.jsx(Ve,{className:"text-right",children:"Completed"}),n.jsx(Ve,{className:"text-right",children:"Points Earned"})]})}),n.jsx(ps,{children:r.topReferrers.map((a,i)=>n.jsxs(vn,{children:[n.jsx(Ue,{children:n.jsxs("div",{className:"flex items-center gap-2",children:[i===0&&n.jsx(Yr,{className:"h-5 w-5 text-yellow-500"}),i===1&&n.jsx(Yr,{className:"h-5 w-5 text-gray-400"}),i===2&&n.jsx(Yr,{className:"h-5 w-5 text-orange-600"}),n.jsxs("span",{className:"font-semibold",children:["#",i+1]})]})}),n.jsx(Ue,{className:"font-medium",children:a.customerName}),n.jsx(Ue,{className:"text-right",children:a.referralCount}),n.jsx(Ue,{className:"text-right",children:a.completedCount}),n.jsx(Ue,{className:"text-right font-semibold text-green-600",children:a.totalPoints.toLocaleString()})]},a.customerId))})]})})]}),r.recentReferrals&&r.recentReferrals.length>0&&n.jsxs(O,{children:[n.jsxs(ee,{children:[n.jsx(te,{children:"Recent Referrals"}),n.jsx(ke,{children:"Latest referral activity across all customers"})]}),n.jsx(H,{children:n.jsxs(hs,{children:[n.jsx(ms,{children:n.jsxs(vn,{children:[n.jsx(Ve,{children:"Date"}),n.jsx(Ve,{children:"Referrer"}),n.jsx(Ve,{children:"Code"}),n.jsx(Ve,{children:"Referee"}),n.jsx(Ve,{children:"Status"}),n.jsx(Ve,{className:"text-right",children:"Points"})]})}),n.jsx(ps,{children:r.recentReferrals.map(a=>n.jsxs(vn,{"data-testid":`admin-referral-${a.id}`,children:[n.jsx(Ue,{className:"text-sm",children:new Date(a.createdAt).toLocaleDateString()}),n.jsx(Ue,{className:"font-medium",children:a.referrerName}),n.jsx(Ue,{children:n.jsx(ge,{variant:"outline",children:a.referralCode})}),n.jsx(Ue,{children:a.refereeName||a.refereePhone||a.refereeEmail||"Pending"}),n.jsx(Ue,{children:s(a.status)}),n.jsx(Ue,{className:"text-right",children:a.status==="rewarded"?n.jsxs("span",{className:"font-semibold text-green-600",children:["+",a.pointsAwarded]}):n.jsx("span",{className:"text-gray-400",children:"-"})})]},a.id))})]})})]})]})]}):n.jsx("div",{className:"text-center py-10",children:n.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No referral data available"})})}const GRe={current:{id:"current",name:"Current Default",description:"The existing homepage design with blue gradient background and centered layout",variant:"glassmorphism",layout:{heroStyle:"centered",servicesLayout:"carousel",showReviews:!0,showFooter:!0},styling:{primaryGradient:"from-gray-900 via-blue-950/10 to-black",accentGradient:"from-blue-600 to-blue-800",backgroundStyle:"gradient",glassEffect:!1,borderRadius:"md"},animations:{speed:"medium",parallax:!1,floatingElements:!0,hoverEffects:!0},features:{chatWidget:!0,bookingCTA:!0,phoneNumber:!0,socialProof:!0}},luminous_concierge:{id:"luminous_concierge",name:"Luminous Concierge",description:"Premium glassmorphism design with floating cards, AI assistant spotlight, and sophisticated animations",variant:"glassmorphism",layout:{heroStyle:"centered",servicesLayout:"grid",showReviews:!0,showFooter:!0},styling:{primaryGradient:"from-slate-900 via-blue-900/20 to-slate-950",accentGradient:"from-blue-500 to-cyan-500",backgroundStyle:"gradient",glassEffect:!0,borderRadius:"xl"},animations:{speed:"slow",parallax:!0,floatingElements:!0,hoverEffects:!0},features:{chatWidget:!0,bookingCTA:!0,phoneNumber:!0,socialProof:!0}},dynamic_spotlight:{id:"dynamic_spotlight",name:"Dynamic Spotlight",description:"Bold split-screen layout with kinetic service carousel, video hero, and stacked CTAs",variant:"split-screen",layout:{heroStyle:"split",servicesLayout:"carousel",showReviews:!0,showFooter:!0},styling:{primaryGradient:"from-black via-gray-900 to-black",accentGradient:"from-orange-500 to-red-600",backgroundStyle:"video",glassEffect:!1,borderRadius:"sm"},animations:{speed:"fast",parallax:!1,floatingElements:!1,hoverEffects:!0},features:{chatWidget:!0,bookingCTA:!0,phoneNumber:!0,socialProof:!0}},prestige_grid:{id:"prestige_grid",name:"Prestige Grid",description:"Modular grid system with service cards, testimonials, badges, and subtle parallax effects",variant:"grid",layout:{heroStyle:"asymmetric",servicesLayout:"grid",showReviews:!0,showFooter:!0},styling:{primaryGradient:"from-gray-950 via-slate-900 to-gray-950",accentGradient:"from-amber-500 to-yellow-600",backgroundStyle:"gradient",glassEffect:!1,borderRadius:"lg"},animations:{speed:"medium",parallax:!0,floatingElements:!1,hoverEffects:!0},features:{chatWidget:!0,bookingCTA:!0,phoneNumber:!0,socialProof:!0}},night_drive_neon:{id:"night_drive_neon",name:"Night Drive Neon",description:"Cyberpunk aesthetic with dark neon gradients, animated elements, and social proof marquee",variant:"neon",layout:{heroStyle:"full-bleed",servicesLayout:"marquee",showReviews:!0,showFooter:!0},styling:{primaryGradient:"from-black via-purple-950/30 to-black",accentGradient:"from-fuchsia-500 to-purple-600",backgroundStyle:"gradient",glassEffect:!1,borderRadius:"none"},animations:{speed:"fast",parallax:!1,floatingElements:!0,hoverEffects:!0},features:{chatWidget:!0,bookingCTA:!0,phoneNumber:!0,socialProof:!0}},executive_minimal:{id:"executive_minimal",name:"Executive Minimal",description:"Clean typographic hero with spotlight metrics, condensed navigation, and luxury minimalism",variant:"minimal",layout:{heroStyle:"minimal",servicesLayout:"list",showReviews:!0,showFooter:!0},styling:{primaryGradient:"from-white to-gray-50",accentGradient:"from-gray-900 to-black",backgroundStyle:"solid",glassEffect:!1,borderRadius:"none"},animations:{speed:"slow",parallax:!1,floatingElements:!1,hoverEffects:!1},features:{chatWidget:!0,bookingCTA:!0,phoneNumber:!0,socialProof:!0}}};function YRe(){return Object.values(GRe)}function qie(){const{toast:e}=Ee(),[t,r]=p.useState({}),[s,a]=p.useState(null),[i,o]=p.useState(null),{data:l,isLoading:c}=be({queryKey:["/api/homepage-content"]});p.useEffect(()=>{l!=null&&l.content&&(r(l.content),o(l.content.logoUrl))},[l]);const d=je({mutationFn:async()=>{let g=t.logoUrl;if(s){const x=new FormData;x.append("logo",s);const y=await fetch("/api/upload-logo",{method:"POST",body:x});if(!y.ok){const b=await y.json();throw new Error(b.message||"Logo upload failed")}g=(await y.json()).logoUrl}return await Ne("PUT","/api/homepage-content",{...t,logoUrl:g})},onSuccess:()=>{e({title:"Saved!",description:"Homepage content updated successfully"}),ze.invalidateQueries({queryKey:["/api/homepage-content"]}),a(null)},onError:g=>{e({title:"Error",description:g.message||"Failed to save changes",variant:"destructive"})}}),u=je({mutationFn:async g=>await Ne("PUT","/api/homepage-content/template",{templateId:g}),onSuccess:()=>{e({title:"Template Applied!",description:"Homepage template updated successfully"}),ze.invalidateQueries({queryKey:["/api/homepage-content"]})},onError:g=>{e({title:"Error",description:g.message||"Failed to apply template",variant:"destructive"})}}),f=g=>{var y;const x=(y=g.target.files)==null?void 0:y[0];if(x){a(x);const v=new FileReader;v.onloadend=()=>{o(v.result)},v.readAsDataURL(x)}},h=()=>{a(null),o(null),r({...t,logoUrl:null})};if(c)return n.jsx(xn,{title:"Homepage Editor",children:n.jsx("div",{className:"p-6",children:"Loading..."})});const m=n.jsxs(n.Fragment,{children:[n.jsxs(_,{variant:"outline",onClick:()=>window.open("/","_blank"),"data-testid":"button-preview",size:"sm",children:[n.jsx(xa,{className:"mr-2 h-4 w-4"}),"Preview"]}),n.jsxs(_,{onClick:()=>d.mutate(),disabled:d.isPending,"data-testid":"button-save",size:"sm",children:[n.jsx(fr,{className:"mr-2 h-4 w-4"}),d.isPending?"Saving...":"Save Changes"]})]});return n.jsxs(xn,{title:"Homepage Editor",pageActions:m,children:[n.jsx("div",{className:"p-6",children:n.jsxs("div",{className:"hidden flex gap-2",children:[n.jsxs(_,{variant:"outline",onClick:()=>window.open("/","_blank"),"data-testid":"button-preview-hidden",children:[n.jsx(xa,{className:"w-4 h-4 mr-2"}),"Preview"]}),n.jsxs(_,{onClick:()=>d.mutate(),disabled:d.isPending,"data-testid":"button-save",children:[n.jsx(fr,{className:"w-4 h-4 mr-2"}),"Save Changes"]})]})}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs(O,{children:[n.jsx(ee,{children:n.jsx(te,{children:"Content Editor"})}),n.jsx(H,{children:n.jsxs(js,{defaultValue:"hero",children:[n.jsxs(ds,{className:"grid grid-cols-4 lg:grid-cols-7",children:[n.jsx(dt,{value:"hero",children:"Hero"}),n.jsx(dt,{value:"about",children:"About"}),n.jsx(dt,{value:"services",children:"Services"}),n.jsx(dt,{value:"colors",children:"Colors"}),n.jsx(dt,{value:"logo",children:"Logo"}),n.jsx(dt,{value:"seo",children:"SEO"}),n.jsxs(dt,{value:"templates",children:[n.jsx(au,{className:"w-4 h-4 mr-1"}),"Templates"]})]}),n.jsxs(pt,{value:"hero",className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(U,{children:"Hero Heading"}),n.jsx(se,{value:t.heroHeading||"",onChange:g=>r({...t,heroHeading:g.target.value}),"data-testid":"input-hero-heading"})]}),n.jsxs("div",{children:[n.jsx(U,{children:"Hero Subheading"}),n.jsx(se,{value:t.heroSubheading||"",onChange:g=>r({...t,heroSubheading:g.target.value}),"data-testid":"input-hero-subheading"})]}),n.jsxs("div",{children:[n.jsx(U,{children:"CTA Button Text"}),n.jsx(se,{value:t.heroCtaText||"",onChange:g=>r({...t,heroCtaText:g.target.value}),"data-testid":"input-cta-text"})]}),n.jsxs("div",{children:[n.jsx(U,{children:"CTA Button Link"}),n.jsx(se,{value:t.heroCtaLink||"",onChange:g=>r({...t,heroCtaLink:g.target.value}),"data-testid":"input-cta-link"})]})]}),n.jsxs(pt,{value:"about",className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(U,{children:"About Heading"}),n.jsx(se,{value:t.aboutHeading||"",onChange:g=>r({...t,aboutHeading:g.target.value}),"data-testid":"input-about-heading"})]}),n.jsxs("div",{children:[n.jsx(U,{children:"About Text"}),n.jsx(un,{rows:6,value:t.aboutText||"",onChange:g=>r({...t,aboutText:g.target.value}),"data-testid":"textarea-about-text"})]})]}),n.jsxs(pt,{value:"services",className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(U,{children:"Services Heading"}),n.jsx(se,{value:t.servicesHeading||"",onChange:g=>r({...t,servicesHeading:g.target.value}),"data-testid":"input-services-heading"})]}),n.jsxs("div",{children:[n.jsx(U,{children:"Services Subheading (Optional)"}),n.jsx(se,{value:t.servicesSubheading||"",onChange:g=>r({...t,servicesSubheading:g.target.value}),"data-testid":"input-services-subheading"})]})]}),n.jsxs(pt,{value:"colors",className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(U,{children:"Primary Color (HSL)"}),n.jsx(se,{value:t.primaryColor||"",onChange:g=>r({...t,primaryColor:g.target.value}),placeholder:"220 90% 56%","data-testid":"input-primary-color"}),n.jsx("div",{className:"mt-2 h-12 w-full rounded border",style:{backgroundColor:`hsl(${t.primaryColor})`}})]}),n.jsxs("div",{children:[n.jsx(U,{children:"Secondary Color (HSL)"}),n.jsx(se,{value:t.secondaryColor||"",onChange:g=>r({...t,secondaryColor:g.target.value}),placeholder:"280 80% 60%","data-testid":"input-secondary-color"}),n.jsx("div",{className:"mt-2 h-12 w-full rounded border",style:{backgroundColor:`hsl(${t.secondaryColor})`}})]}),n.jsxs("div",{children:[n.jsx(U,{children:"Accent Color (HSL)"}),n.jsx(se,{value:t.accentColor||"",onChange:g=>r({...t,accentColor:g.target.value}),placeholder:"340 80% 55%","data-testid":"input-accent-color"}),n.jsx("div",{className:"mt-2 h-12 w-full rounded border",style:{backgroundColor:`hsl(${t.accentColor})`}})]})]}),n.jsx(pt,{value:"logo",className:"space-y-4",children:n.jsxs("div",{children:[n.jsx(U,{children:"Logo Image"}),i&&n.jsxs("div",{className:"mt-2 relative inline-block",children:[n.jsx("img",{src:i,alt:"Logo preview",className:"h-24 w-auto border rounded"}),n.jsx(_,{variant:"destructive",size:"icon",className:"absolute -top-2 -right-2",onClick:h,"data-testid":"button-remove-logo",children:n.jsx(Jr,{className:"w-4 h-4"})})]}),n.jsx(se,{type:"file",accept:"image/*",onChange:f,className:"mt-2","data-testid":"input-logo-file"})]})}),n.jsxs(pt,{value:"seo",className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(U,{children:"Meta Title"}),n.jsx(se,{value:t.metaTitle||"",onChange:g=>r({...t,metaTitle:g.target.value}),"data-testid":"input-meta-title"})]}),n.jsxs("div",{children:[n.jsx(U,{children:"Meta Description"}),n.jsx(un,{rows:3,value:t.metaDescription||"",onChange:g=>r({...t,metaDescription:g.target.value}),"data-testid":"textarea-meta-description"})]})]}),n.jsx(pt,{value:"templates",className:"space-y-4",children:n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:YRe().map(g=>{const x=(t.templateId||"current")===g.id;return n.jsxs(O,{className:x?"border-primary shadow-lg":"","data-testid":`card-template-${g.id}`,children:[n.jsx(ee,{children:n.jsx("div",{className:"flex items-start justify-between",children:n.jsxs("div",{className:"flex-1",children:[n.jsx(te,{className:"text-lg",children:g.name}),x&&n.jsx(ge,{className:"mt-1","data-testid":`badge-current-${g.id}`,children:"Current"})]})})}),n.jsxs(H,{className:"space-y-4",children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:g.description}),n.jsxs("div",{className:"space-y-2 text-xs text-muted-foreground",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Hero Style:"}),n.jsx("span",{className:"font-medium",children:g.layout.heroStyle})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Services:"}),n.jsx("span",{className:"font-medium",children:g.layout.servicesLayout})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Animation:"}),n.jsx("span",{className:"font-medium",children:g.animations.speed})]})]}),n.jsx(_,{variant:x?"secondary":"default",className:"w-full",onClick:()=>u.mutate(g.id),disabled:u.isPending||x,"data-testid":`button-apply-template-${g.id}`,children:x?"Currently Active":"Apply Template"})]})]},g.id)})})})]})})]}),n.jsxs(O,{children:[n.jsx(ee,{children:n.jsx(te,{children:"Live Preview"})}),n.jsx(H,{children:n.jsxs("div",{className:"space-y-6 p-4 border rounded bg-background",children:[i&&n.jsx("div",{className:"flex justify-center",children:n.jsx("img",{src:i,alt:"Logo",className:"h-16 w-auto"})}),n.jsxs("div",{className:"text-center space-y-2",children:[n.jsx("h1",{className:"text-3xl font-bold",style:{color:`hsl(${t.primaryColor})`},children:t.heroHeading||"Hero Heading"}),n.jsx("p",{className:"text-lg text-muted-foreground",children:t.heroSubheading||"Hero Subheading"}),n.jsx(_,{style:{backgroundColor:`hsl(${t.primaryColor})`,color:"white"},children:t.heroCtaText||"CTA Button"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("h2",{className:"text-2xl font-bold",style:{color:`hsl(${t.secondaryColor})`},children:t.aboutHeading||"About Heading"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:t.aboutText||"About text goes here..."})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("h2",{className:"text-2xl font-bold",style:{color:`hsl(${t.accentColor})`},children:t.servicesHeading||"Services Heading"}),t.servicesSubheading&&n.jsx("p",{className:"text-sm text-muted-foreground",children:t.servicesSubheading})]})]})})]})]})]})}function QRe(){const{toast:e}=Ee(),{data:t,isLoading:r}=be({queryKey:["/api/admin/demo-settings"]}),s=je({mutationFn:async i=>Ne("/api/admin/demo-settings","PUT",{demoModeEnabled:i}),onSuccess:i=>{e({title:i.demoModeEnabled?"Demo Mode Enabled":"Demo Mode Disabled",description:i.demoModeEnabled?"Demo access is now available. Visitors can explore the platform safely.":"Demo access has been disabled."}),ze.invalidateQueries({queryKey:["/api/admin/demo-settings"]})},onError:i=>{e({title:"Error",description:i.message||"Failed to update demo mode settings",variant:"destructive"})}}),a=i=>{s.mutate(i)};return r?n.jsxs(O,{children:[n.jsxs(ee,{children:[n.jsxs(te,{className:"flex items-center gap-2",children:[n.jsx(zn,{className:"h-5 w-5"}),"Demo Mode"]}),n.jsx(ke,{children:n.jsx(Lt,{className:"h-4 w-full"})})]}),n.jsx(H,{className:"space-y-4",children:n.jsx(Lt,{className:"h-20 w-full"})})]}):n.jsxs(O,{children:[n.jsxs(ee,{children:[n.jsxs(te,{className:"flex items-center gap-2",children:[n.jsx(zn,{className:"h-5 w-5"}),"Demo Mode"]}),n.jsx(ke,{children:"Control white-label demonstration access for potential customers"})]}),n.jsxs(H,{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between space-x-4",children:[n.jsxs("div",{className:"flex-1 space-y-1",children:[n.jsx(U,{htmlFor:"demo-mode-toggle",className:"text-base font-medium",children:"Enable Demo Access"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Allow visitors to explore the platform with safe, isolated demo data"})]}),n.jsx(Vt,{id:"demo-mode-toggle","data-testid":"switch-demo-mode",checked:(t==null?void 0:t.demoModeEnabled)||!1,onCheckedChange:a,disabled:s.isPending})]}),(t==null?void 0:t.demoModeEnabled)&&n.jsxs(Ln,{children:[n.jsx(vo,{className:"h-4 w-4"}),n.jsxs(Dn,{children:["Demo mode is ",n.jsx("strong",{children:"enabled"}),". Visitors can access a secure sandbox environment with mock data. Demo sessions expire after 2 hours and cannot modify real data or send communications."]})]}),!(t!=null&&t.demoModeEnabled)&&n.jsxs(Ln,{children:[n.jsx(Ya,{className:"h-4 w-4"}),n.jsxs(Dn,{children:["Demo mode is ",n.jsx("strong",{children:"disabled"}),". Visitors cannot access the demo environment."]})]}),n.jsxs("div",{className:"space-y-3 rounded-lg border p-4",children:[n.jsx("h4",{className:"text-sm font-semibold",children:"Security Features"}),n.jsxs("ul",{className:"space-y-2 text-sm text-muted-foreground",children:[n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx(zn,{className:"h-4 w-4 mt-0.5 text-green-600"}),n.jsx("span",{children:"Demo users are isolated from real customer data and files"})]}),n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx(zn,{className:"h-4 w-4 mt-0.5 text-green-600"}),n.jsx("span",{children:"All mutation operations (SMS, email, payments) are blocked"})]}),n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx(zn,{className:"h-4 w-4 mt-0.5 text-green-600"}),n.jsx("span",{children:"Sessions automatically expire after 2 hours"})]}),n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx(zn,{className:"h-4 w-4 mt-0.5 text-green-600"}),n.jsx("span",{children:"AI interactions are rate-limited for demo users"})]})]})]})]})]})}const Vf=[{id:"operations",label:"Operations",icon:n.jsx(nh,{className:"h-4 w-4"}),items:[{id:"services",label:"Services & Add-ons",component:RRe},{id:"recurring",label:"Recurring Services",component:TRe},{id:"phone-settings",label:"Phone & Voice",component:$Re}]},{id:"customers",label:"Customer Management",icon:n.jsx(br,{className:"h-4 w-4"}),items:[{id:"customer-management",label:"Customer Database",component:FRe},{id:"loyalty",label:"Loyalty Program",component:VRe},{id:"referrals",label:"Referral Program",component:qRe}]},{id:"communications",label:"Communications",icon:n.jsx(on,{className:"h-4 w-4"}),items:[{id:"notifications",label:"Notifications",component:Wie},{id:"sms-templates",label:"SMS Templates",component:Aie},{id:"email-templates",label:"Email Templates",component:ARe},{id:"campaigns",label:"Campaigns",component:Pie},{id:"upsell",label:"Upsell Offers",component:_Re},{id:"cancellation",label:"Cancellation Feedback",component:LRe}]},{id:"business",label:"Business",icon:n.jsx(qN,{className:"h-4 w-4"}),items:[{id:"business-settings",label:"Business Settings",component:Qne},{id:"agent-settings",label:"Agent Settings",component:SRe},{id:"subscriptions",label:"Subscription Plans",component:DRe}]},{id:"website",label:"Website & Branding",icon:n.jsx(au,{className:"h-4 w-4"}),items:[{id:"homepage-editor",label:"Homepage Editor",component:qie}]},{id:"security",label:"Security",icon:n.jsx(zn,{className:"h-4 w-4"}),items:[{id:"demo-mode",label:"Demo Mode",component:QRe}]}],KRe=e=>{for(const t of Vf)if(t.items.some(r=>r.id===e))return t.id;return null},JRe=(e,t)=>{const r=Vf.find(s=>s.id===e);return r?r.items.some(s=>s.id===t):!1},ZRe=e=>Vf.some(t=>t.id===e);function XRe({initialSection:e,initialItem:t}={}){var m;const[,r]=zt(),[s,a]=p.useState(e||"operations"),[i,o]=p.useState(t||"services"),[l,c]=p.useState(!1),[d,u]=p.useState(!1);p.useEffect(()=>{e&&e!==s&&a(e),t&&t!==i&&o(t)},[e,t]),p.useEffect(()=>{window.location.pathname.startsWith("/settings")&&r(`/settings/${s}/${i}`)},[s,i,r]);const f=((m=Vf.flatMap(g=>g.items).find(g=>g.id===i))==null?void 0:m.component)||null,h=({isMobile:g=!1,collapsed:x=!1})=>n.jsxs("div",{className:`space-y-2 ${g?"p-4":""}`,children:[n.jsxs("div",{className:`flex items-center mb-4 px-3 ${x?"justify-center":"gap-2"}`,children:[n.jsx(ja,{className:"h-5 w-5 text-primary"}),!x&&n.jsx("h2",{className:"text-lg font-semibold",children:"Settings"})]}),g?n.jsx(t3,{type:"single",collapsible:!0,className:"w-full",children:Vf.map(y=>n.jsxs(zf,{value:y.id,children:[n.jsx(Bf,{className:"hover:no-underline",children:n.jsxs("div",{className:"flex items-center gap-2",children:[y.icon,n.jsx("span",{children:y.label})]})}),n.jsx(Uf,{children:n.jsx("div",{className:"flex flex-col gap-1 pl-6",children:y.items.map(v=>n.jsx(_,{variant:i===v.id?"secondary":"ghost",className:"justify-start",onClick:()=>{o(v.id),a(y.id),c(!1)},"data-testid":`settings-item-${v.id}`,children:v.label},v.id))})})]},y.id))}):n.jsx("div",{className:"space-y-1",children:Vf.map(y=>n.jsxs("div",{className:"space-y-1",children:[n.jsxs("div",{className:`flex items-center gap-2 px-3 py-2 text-sm font-medium text-muted-foreground ${x?"justify-center":""}`,children:[y.icon,!x&&n.jsx("span",{children:y.label})]}),y.items.map(v=>n.jsx(_,{variant:i===v.id?"secondary":"ghost",className:`w-full ${x?"justify-center px-2":"justify-start pl-9"}`,onClick:()=>{o(v.id),a(y.id)},"data-testid":`settings-item-${v.id}`,title:x?v.label:void 0,children:x?v.label.charAt(0):v.label},v.id))]},y.id))})]});return n.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 w-full",children:[n.jsx("div",{className:"lg:hidden w-full",children:n.jsxs(tE,{open:l,onOpenChange:c,children:[n.jsx(zte,{asChild:!0,children:n.jsxs(_,{variant:"default",size:"default",className:"w-full bg-blue-600 hover:bg-blue-700 text-white",children:[n.jsx(Kv,{className:"h-5 w-5 mr-2"}),"Settings Menu - Click to Open"]})}),n.jsx(E4,{side:"left",className:"w-[280px] sm:w-[350px]",children:n.jsx(h,{isMobile:!0})})]})}),n.jsx("div",{className:`hidden lg:block flex-shrink-0 transition-all duration-300 ${d?"lg:w-20":"lg:w-72"}`,children:n.jsxs(O,{className:"sticky top-4 relative",children:[n.jsx(_,{variant:"ghost",size:"icon",className:"absolute -right-3 top-4 z-10 h-6 w-6 rounded-full border bg-background shadow-md",onClick:()=>u(!d),title:d?"Expand sidebar":"Collapse sidebar",children:d?n.jsx(vl,{className:"h-4 w-4"}):n.jsx(Lu,{className:"h-4 w-4"})}),n.jsx(ia,{className:"h-[calc(100vh-120px)]",children:n.jsx(h,{collapsed:d})})]})}),n.jsx("div",{className:"flex-1 w-full min-w-0",children:f?n.jsx(f,{}):n.jsx(O,{children:n.jsx(H,{className:"p-6",children:n.jsx("p",{className:"text-muted-foreground",children:"Select a settings item from the menu"})})})})]})}function e7e(){const[,e]=k0("/settings/:section?/:item?"),[t,r]=zt(),[s,a]=p.useState(),[i,o]=p.useState();return p.useEffect(()=>{if(!e){a("operations"),o("services");return}const{section:l,item:c}=e;if(l&&c){JRe(l,c)?(a(l),o(c)):(console.warn(`Invalid settings path: section=${l}, item=${c}`),r("/settings"));return}if(l&&!c){if(ZRe(l)){const d=Vf.find(u=>u.id===l);d&&d.items.length>0&&(a(l),o(d.items[0].id))}else{const d=KRe(l);d?(a(d),o(l)):(console.warn(`Invalid settings path: ${l}`),r("/settings"))}return}a("operations"),o("services")},[e,r]),n.jsxs("div",{className:"container mx-auto p-6 max-w-7xl",children:[n.jsx("div",{className:"mb-4",children:n.jsx(Eae,{fallbackPath:"/dashboard"})}),n.jsxs("div",{className:"mb-6",children:[n.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[n.jsx(ja,{className:"h-8 w-8"}),"Settings"]}),n.jsx("p",{className:"text-muted-foreground mt-2",children:"Manage your business operations, customers, communications, and more"})]}),n.jsx(XRe,{initialSection:s,initialItem:i})]})}function t7e(){const{toast:e}=Ee(),[t,r]=p.useState(!1),[s,a]=p.useState(null),[i,o]=p.useState(""),[l,c]=p.useState(""),[d,u]=p.useState(""),[f,h]=p.useState("facebook"),[m,g]=p.useState("clean_machine_verify_token_2025"),{data:x,isLoading:y}=be({queryKey:["/api/facebook/pages"]}),v=(x==null?void 0:x.pages)||[],b=je({mutationFn:async P=>await Ne("POST","/api/facebook/pages",P),onSuccess:()=>{ze.invalidateQueries({queryKey:["/api/facebook/pages"]}),e({title:"Success",description:"Facebook page added successfully"}),j(),r(!1)},onError:P=>{e({title:"Error",description:P.message||"Failed to add Facebook page",variant:"destructive"})}}),w=je({mutationFn:async({id:P,data:T})=>await Ne("PUT",`/api/facebook/pages/${P}`,T),onSuccess:()=>{ze.invalidateQueries({queryKey:["/api/facebook/pages"]}),e({title:"Success",description:"Page settings updated"}),a(null)},onError:P=>{e({title:"Error",description:P.message||"Failed to update page",variant:"destructive"})}}),N=je({mutationFn:async P=>await Ne("DELETE",`/api/facebook/pages/${P}`),onSuccess:()=>{ze.invalidateQueries({queryKey:["/api/facebook/pages"]}),e({title:"Success",description:"Facebook page removed"})},onError:P=>{e({title:"Error",description:P.message||"Failed to delete page",variant:"destructive"})}}),j=()=>{o(""),c(""),u(""),h("facebook"),g("clean_machine_verify_token_2025")},S=()=>{if(!i||!l||!d){e({title:"Validation Error",description:"Please fill in all required fields",variant:"destructive"});return}b.mutate({pageId:i,pageName:l,pageAccessToken:d,platform:f,webhookVerifyToken:m,isActive:!0})},C=P=>{w.mutate({id:P.id,data:{isActive:!P.isActive}})},k=()=>{const P=`${window.location.origin}/api/facebook/webhook`;navigator.clipboard.writeText(P),e({title:"Copied!",description:"Webhook URL copied to clipboard"})},M=`${window.location.origin}/api/facebook/webhook`,A=n.jsxs(_,{className:"gap-2",onClick:()=>r(!0),"data-testid":"add-facebook-page-button",children:[n.jsx(Un,{className:"h-4 w-4"}),"Add Page"]});return n.jsx(xn,{title:"Facebook & Instagram Integration",pageActions:A,children:n.jsxs("div",{className:"p-6",children:[n.jsx("p",{className:"text-sm text-muted-foreground mb-6",children:"Connect your Facebook Pages and Instagram accounts for messaging"}),n.jsx(At,{open:t,onOpenChange:r,children:n.jsxs(_t,{className:"sm:max-w-[600px]",children:[n.jsxs($t,{children:[n.jsx(Et,{children:"Add Facebook/Instagram Page"}),n.jsx(an,{children:"Connect a Facebook Page or Instagram Business account to receive messages"})]}),n.jsxs("div",{className:"space-y-4 py-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(U,{htmlFor:"platform",children:"Platform"}),n.jsxs(Pt,{value:f,onValueChange:P=>h(P),children:[n.jsx(kt,{"data-testid":"platform-select",children:n.jsx(Tt,{})}),n.jsxs(Mt,{children:[n.jsx(ve,{value:"facebook",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(FS,{className:"h-4 w-4"}),"Facebook"]})}),n.jsx(ve,{value:"instagram",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(iD,{className:"h-4 w-4"}),"Instagram"]})})]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(U,{htmlFor:"pageId",children:"Page ID *"}),n.jsx(se,{id:"pageId",placeholder:"1234567890",value:i,onChange:P=>o(P.target.value),"data-testid":"input-page-id"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Found in Meta Business Suite  Page Settings"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(U,{htmlFor:"pageName",children:"Page Name *"}),n.jsx(se,{id:"pageName",placeholder:"Clean Machine Auto Detail",value:l,onChange:P=>c(P.target.value),"data-testid":"input-page-name"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(U,{htmlFor:"pageAccessToken",children:"Page Access Token *"}),n.jsx(se,{id:"pageAccessToken",type:"password",placeholder:"EAAxxxxxxxxxxxxxxx",value:d,onChange:P=>u(P.target.value),"data-testid":"input-access-token"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Generate in Meta Developer App  Messenger  Settings"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(U,{htmlFor:"webhookVerifyToken",children:"Webhook Verify Token"}),n.jsx(se,{id:"webhookVerifyToken",value:m,onChange:P=>g(P.target.value),"data-testid":"input-webhook-token"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Use this token when setting up the webhook in Meta Developer Console"})]})]}),n.jsxs(Sn,{children:[n.jsx(_,{variant:"outline",onClick:()=>r(!1),children:"Cancel"}),n.jsx(_,{onClick:S,disabled:b.isPending,"data-testid":"button-submit-page",children:b.isPending?"Adding...":"Add Page"})]})]})}),n.jsxs("div",{className:"max-w-5xl mx-auto space-y-6",children:[n.jsxs(O,{className:"border-blue-200 dark:border-blue-900",children:[n.jsxs(ee,{children:[n.jsxs(te,{className:"flex items-center gap-2",children:[n.jsx(vo,{className:"h-5 w-5 text-blue-600"}),"Webhook Configuration"]}),n.jsx(ke,{children:"Use these settings when configuring your webhook in Meta Developer Console"})]}),n.jsxs(H,{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(U,{children:"Webhook URL"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(se,{value:M,readOnly:!0,className:"font-mono text-sm"}),n.jsx(_,{variant:"outline",size:"icon",onClick:k,"data-testid":"copy-webhook-url",children:n.jsx(Qv,{className:"h-4 w-4"})})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(U,{children:"Verify Token"}),n.jsx(se,{value:"clean_machine_verify_token_2025",readOnly:!0,className:"font-mono text-sm"})]}),n.jsxs("div",{className:"bg-blue-50 dark:bg-blue-950/30 p-4 rounded-lg border border-blue-200 dark:border-blue-900",children:[n.jsxs("h4",{className:"font-semibold mb-2 flex items-center gap-2",children:[n.jsx(xa,{className:"h-4 w-4"}),"Setup Instructions"]}),n.jsxs("ol",{className:"text-sm space-y-2 list-decimal list-inside text-muted-foreground",children:[n.jsx("li",{children:"Go to Meta Developer Console  Your App  Messenger  Settings"}),n.jsx("li",{children:'Click "Add Callback URL"'}),n.jsx("li",{children:"Paste the Webhook URL above"}),n.jsx("li",{children:"Enter the Verify Token above"}),n.jsx("li",{children:'Subscribe to "messages" webhook events'}),n.jsx("li",{children:"Generate a Page Access Token and add it below"})]})]})]})]}),n.jsxs(O,{children:[n.jsxs(ee,{children:[n.jsx(te,{children:"Connected Pages"}),n.jsx(ke,{children:"Manage your Facebook Pages and Instagram accounts"})]}),n.jsx(H,{children:y?n.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Loading pages..."}):v.length===0?n.jsxs("div",{className:"text-center py-12",children:[n.jsx(FS,{className:"h-12 w-12 mx-auto mb-3 text-muted-foreground opacity-50"}),n.jsx("p",{className:"text-muted-foreground mb-4",children:"No pages connected yet"}),n.jsxs(_,{onClick:()=>r(!0),"data-testid":"add-first-page",children:[n.jsx(Un,{className:"h-4 w-4 mr-2"}),"Add Your First Page"]})]}):n.jsx(ia,{className:"h-[400px]",children:n.jsx("div",{className:"space-y-3",children:v.map(P=>n.jsx("div",{className:"border rounded-lg p-4 hover:border-primary transition-colors","data-testid":`page-card-${P.id}`,children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[P.platform==="facebook"?n.jsx("div",{className:"bg-blue-100 dark:bg-blue-900/30 p-2 rounded-lg",children:n.jsx(FS,{className:"h-5 w-5 text-blue-600"})}):n.jsx("div",{className:"bg-gradient-to-br from-purple-500 to-pink-500 p-2 rounded-lg",children:n.jsx(iD,{className:"h-5 w-5 text-white"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-semibold",children:P.pageName}),n.jsxs("p",{className:"text-sm text-muted-foreground font-mono",children:["ID: ",P.pageId]}),n.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[n.jsx(ge,{variant:P.isActive?"default":"secondary",children:P.isActive?n.jsxs(n.Fragment,{children:[n.jsx(nn,{className:"h-3 w-3 mr-1"}),"Active"]}):n.jsxs(n.Fragment,{children:[n.jsx(Ws,{className:"h-3 w-3 mr-1"}),"Inactive"]})}),n.jsx(ge,{variant:"outline",className:"capitalize",children:P.platform})]})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(U,{className:"text-sm",children:"Active"}),n.jsx(Vt,{checked:P.isActive,onCheckedChange:()=>C(P),disabled:w.isPending,"data-testid":`toggle-active-${P.id}`})]}),n.jsx(_,{variant:"destructive",size:"icon",onClick:()=>{confirm(`Remove ${P.pageName}?`)&&N.mutate(P.id)},disabled:N.isPending,"data-testid":`delete-page-${P.id}`,children:n.jsx(Nr,{className:"h-4 w-4"})})]})]})},P.id))})})})]}),n.jsxs(O,{className:"border-amber-200 dark:border-amber-900 bg-amber-50/50 dark:bg-amber-950/20",children:[n.jsx(ee,{children:n.jsxs(te,{className:"flex items-center gap-2 text-amber-900 dark:text-amber-400",children:[n.jsx(Wt,{className:"h-5 w-5"}),"Need Help?"]})}),n.jsxs(H,{className:"space-y-2 text-sm text-muted-foreground",children:[n.jsxs("p",{children:[n.jsx("strong",{children:"Where to find Page ID:"})," Meta Business Suite  Settings  Page Info"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"How to get Access Token:"})," Meta Developer Console  Your App  Messenger  Settings  Generate Token"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Token Permissions:"})," Ensure your token has ",n.jsx("code",{className:"bg-white dark:bg-gray-800 px-1 rounded",children:"pages_messaging"})," and ",n.jsx("code",{className:"bg-white dark:bg-gray-800 px-1 rounded",children:"pages_read_engagement"})," permissions"]})]})]})]})]})})}function n7e(){const[,e]=zt(),{toast:t}=Ee(),[r,s]=p.useState(""),[a,i]=p.useState(""),[o,l]=p.useState(!1),[c,d]=p.useState(!1),[u,f]=p.useState(!1),[h,m]=p.useState(!1),[g,x]=p.useState(""),[y,v]=p.useState(!1);p.useEffect(()=>{window.PublicKeyCredential&&d(!0);const j=new URLSearchParams(window.location.search).get("error");j==="token_expired"?t({variant:"destructive",title:"Session Expired",description:"Your session has expired. Please log in again."}):j==="oauth_failed"?t({variant:"destructive",title:"Google Sign-In Failed",description:"Unable to sign in with Google. Please try again or use username/password."}):j==="account_inactive"&&t({variant:"destructive",title:"Account Pending Approval",description:"Your account has been created but is awaiting admin approval. Please contact your administrator."})},[t]);const b=async N=>{N.preventDefault(),l(!0);try{const S=await(await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:r,password:a}),credentials:"include"})).json();S.success?(t({title:"Login successful",description:"Welcome back!",duration:1e3}),document.activeElement instanceof HTMLElement&&document.activeElement.blur(),setTimeout(()=>{e("/launch")},100)):S.requires2FA?(m(!0),document.activeElement instanceof HTMLElement&&document.activeElement.blur(),t({title:"2FA Required",description:"Enter the code from your authenticator app"})):t({title:"Login failed",description:S.message||"Invalid credentials",variant:"destructive"})}catch{t({title:"Error",description:"Failed to login",variant:"destructive"})}finally{l(!1)}},w=async N=>{if(N.preventDefault(),!g||g.length!==6){t({title:"Invalid code",description:"Please enter a 6-digit code",variant:"destructive"});return}v(!0);try{const S=await(await fetch("/api/auth/login/verify-2fa",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:g}),credentials:"include"})).json();S.success?(t({title:"Verification successful",description:"Welcome back!",duration:1e3}),document.activeElement instanceof HTMLElement&&document.activeElement.blur(),setTimeout(()=>{e("/launch")},100)):(t({title:"Verification failed",description:S.message||"Invalid code",variant:"destructive"}),(S.expired||S.locked)&&(m(!1),x(""),i("")))}catch{t({title:"Error",description:"Failed to verify code",variant:"destructive"})}finally{v(!1)}};return n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-blue-100 p-4 relative z-50",children:n.jsxs(O,{className:"w-full max-w-md relative z-10",children:[n.jsxs(ee,{className:"text-center",children:[n.jsx("div",{className:"flex justify-center mb-4",children:n.jsx(rT,{className:"h-12 w-12 text-blue-600"})}),n.jsx(te,{className:"text-2xl",children:"Admin Login"}),n.jsx(ke,{children:"Sign in to access the admin dashboard"})]}),n.jsx(H,{children:h?n.jsxs("form",{onSubmit:w,className:"space-y-4",children:[n.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4 mb-4",children:n.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:"Enter the 6-digit code from your authenticator app"})}),n.jsxs("div",{children:[n.jsx(U,{htmlFor:"2fa-code",children:"Verification Code"}),n.jsx(se,{id:"2fa-code",type:"text",maxLength:6,placeholder:"000000",value:g,onChange:N=>x(N.target.value.replace(/\D/g,"")),required:!0,autoFocus:!0,className:"text-center text-2xl tracking-widest","data-testid":"input-2fa-code"})]}),n.jsx(_,{type:"submit",className:"w-full",disabled:y||g.length!==6,"data-testid":"button-verify-2fa",children:y?"Verifying...":"Verify"}),n.jsx("div",{className:"text-center",children:n.jsx(_,{type:"button",variant:"link",className:"text-sm text-slate-600",onClick:()=>{m(!1),x(""),i("")},"data-testid":"button-back-to-login",children:"Back to login"})})]}):n.jsxs("form",{onSubmit:b,className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(U,{htmlFor:"username",children:"Username"}),n.jsx(se,{id:"username",type:"text",value:r,onChange:N=>s(N.target.value),required:!0,"data-testid":"input-username"})]}),n.jsxs("div",{children:[n.jsx(U,{htmlFor:"password",children:"Password"}),n.jsx(se,{id:"password",type:"password",value:a,onChange:N=>i(N.target.value),required:!0,"data-testid":"input-password"})]}),n.jsx(_,{type:"submit",className:"w-full",disabled:o,"data-testid":"button-login",children:o?"Signing in...":"Sign In"}),n.jsx("div",{className:"text-center",children:n.jsx(_,{type:"button",variant:"link",className:"text-sm text-blue-600",onClick:()=>e("/forgot-password"),"data-testid":"link-forgot-password",children:"Forgot your password?"})}),n.jsxs("div",{className:"relative my-6",children:[n.jsx("div",{className:"absolute inset-0 flex items-center",children:n.jsx(Ot,{className:"w-full"})}),n.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:n.jsx("span",{className:"bg-white px-2 text-gray-500",children:"Or continue with"})})]}),n.jsxs(_,{type:"button",variant:"outline",className:"w-full flex items-center justify-center gap-2 hover:bg-gray-50",onClick:()=>window.location.href="/api/auth/google","data-testid":"button-login-google",children:[n.jsxs("svg",{className:"h-5 w-5",viewBox:"0 0 24 24",children:[n.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),n.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),n.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),n.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Sign in with Google"]}),n.jsxs("div",{className:"text-center text-sm mt-4 pt-4 border-t border-gray-200",children:[n.jsx("span",{className:"text-gray-600",children:"New to ServicePro? "}),n.jsx(_,{type:"button",variant:"link",className:"text-blue-600 font-medium p-0 h-auto",onClick:()=>e("/onboarding/industry"),"data-testid":"link-get-started",children:"Get started"})]})]})})]})})}function r7e(){const[,e]=zt(),{toast:t}=Ee(),[r,s]=p.useState(""),[a,i]=p.useState(!1),[o,l]=p.useState(!1),c=async d=>{d.preventDefault(),i(!0);try{const f=await(await fetch("/api/auth/forgot-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r})})).json();f.success?(l(!0),t({title:"Reset link sent",description:"Check your email for password reset instructions"})):t({title:"Error",description:f.message||"Failed to send reset link",variant:"destructive"})}catch{t({title:"Error",description:"Failed to process request",variant:"destructive"})}finally{i(!1)}};return n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-blue-100 p-4",children:n.jsxs(O,{className:"w-full max-w-md",children:[n.jsxs(ee,{className:"text-center",children:[n.jsx("div",{className:"flex justify-center mb-4",children:n.jsx(Cr,{className:"h-12 w-12 text-blue-600"})}),n.jsx(te,{className:"text-2xl",children:"Forgot Password"}),n.jsx(ke,{children:o?"Check your email for reset instructions":"Enter your email to receive a password reset link"})]}),n.jsx(H,{children:o?n.jsxs("div",{className:"space-y-4",children:[n.jsx("p",{className:"text-sm text-center text-muted-foreground",children:"If an account exists with that email, you'll receive reset instructions shortly."}),n.jsxs(_,{type:"button",variant:"outline",className:"w-full",onClick:()=>e("/login"),"data-testid":"button-return-to-login",children:[n.jsx(pi,{className:"h-4 w-4 mr-2"}),"Return to Login"]})]}):n.jsxs("form",{onSubmit:c,className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(U,{htmlFor:"email",children:"Email Address"}),n.jsx(se,{id:"email",type:"email",value:r,onChange:d=>s(d.target.value),required:!0,placeholder:"your@email.com","data-testid":"input-email"})]}),n.jsx(_,{type:"submit",className:"w-full",disabled:a,"data-testid":"button-submit",children:a?"Sending...":"Send Reset Link"}),n.jsxs(_,{type:"button",variant:"ghost",className:"w-full",onClick:()=>e("/login"),"data-testid":"button-back-to-login",children:[n.jsx(pi,{className:"h-4 w-4 mr-2"}),"Back to Login"]})]})})]})})}function s7e(){const[,e]=zt(),{toast:t}=Ee(),[r,s]=p.useState(""),[a,i]=p.useState(""),[o,l]=p.useState(""),[c,d]=p.useState(!1);p.useEffect(()=>{const h=new URLSearchParams(window.location.search).get("token");h?s(h):(t({title:"Invalid reset link",description:"This reset link is invalid or has expired",variant:"destructive"}),setTimeout(()=>e("/login"),2e3))},[t,e]);const u=async f=>{if(f.preventDefault(),a!==o){t({title:"Passwords do not match",description:"Please ensure both passwords are identical",variant:"destructive"});return}if(a.length<8){t({title:"Password too short",description:"Password must be at least 8 characters",variant:"destructive"});return}d(!0);try{const m=await(await fetch("/api/auth/reset-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:r,newPassword:a})})).json();m.success?(t({title:"Password reset successful",description:"You can now login with your new password"}),setTimeout(()=>e("/login"),2e3)):t({title:"Reset failed",description:m.message||"Failed to reset password",variant:"destructive"})}catch{t({title:"Error",description:"Failed to reset password",variant:"destructive"})}finally{d(!1)}};return n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-blue-100 p-4",children:n.jsxs(O,{className:"w-full max-w-md",children:[n.jsxs(ee,{className:"text-center",children:[n.jsx("div",{className:"flex justify-center mb-4",children:n.jsx(gj,{className:"h-12 w-12 text-blue-600"})}),n.jsx(te,{className:"text-2xl",children:"Reset Password"}),n.jsx(ke,{children:"Enter your new password below"})]}),n.jsx(H,{children:n.jsxs("form",{onSubmit:u,className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(U,{htmlFor:"newPassword",children:"New Password"}),n.jsx(se,{id:"newPassword",type:"password",value:a,onChange:f=>i(f.target.value),required:!0,minLength:8,placeholder:"At least 8 characters","data-testid":"input-new-password"})]}),n.jsxs("div",{children:[n.jsx(U,{htmlFor:"confirmPassword",children:"Confirm Password"}),n.jsx(se,{id:"confirmPassword",type:"password",value:o,onChange:f=>l(f.target.value),required:!0,minLength:8,placeholder:"Re-enter your password","data-testid":"input-confirm-password"})]}),n.jsx(_,{type:"submit",className:"w-full",disabled:c||!r,"data-testid":"button-reset-password",children:c?"Resetting...":"Reset Password"})]})})]})})}function a7e(){const[,e]=zt(),{toast:t}=Ee(),[r,s]=p.useState(""),[a,i]=p.useState(""),[o,l]=p.useState(""),[c,d]=p.useState(!1),u=async f=>{if(f.preventDefault(),a.length<8){t({title:"Password too short",description:"New password must be at least 8 characters",variant:"destructive"});return}if(a!==o){t({title:"Passwords do not match",description:"Please make sure your new passwords match",variant:"destructive"});return}d(!0);try{const m=await(await fetch("/api/auth/change-password",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({currentPassword:r,newPassword:a})})).json();m.success?(t({title:"Password changed",description:"Your password has been updated successfully"}),s(""),i(""),l(""),setTimeout(()=>e("/dashboard"),1500)):t({title:"Failed to change password",description:m.message||"Please check your current password",variant:"destructive"})}catch{t({title:"Error",description:"Failed to change password",variant:"destructive"})}finally{d(!1)}};return n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-blue-100 p-4",children:n.jsxs(O,{className:"w-full max-w-md",children:[n.jsxs(ee,{className:"text-center",children:[n.jsx("div",{className:"flex justify-center mb-4",children:n.jsx(rT,{className:"h-12 w-12 text-blue-600"})}),n.jsx(te,{className:"text-2xl",children:"Change Password"}),n.jsx(ke,{children:"Update your account password"})]}),n.jsx(H,{children:n.jsxs("form",{onSubmit:u,className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(U,{htmlFor:"currentPassword",children:"Current Password"}),n.jsx(se,{id:"currentPassword",type:"password",value:r,onChange:f=>s(f.target.value),required:!0})]}),n.jsxs("div",{children:[n.jsx(U,{htmlFor:"newPassword",children:"New Password"}),n.jsx(se,{id:"newPassword",type:"password",value:a,onChange:f=>i(f.target.value),required:!0,minLength:8}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Must be at least 8 characters"})]}),n.jsxs("div",{children:[n.jsx(U,{htmlFor:"confirmPassword",children:"Confirm New Password"}),n.jsx(se,{id:"confirmPassword",type:"password",value:o,onChange:f=>l(f.target.value),required:!0,minLength:8})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(_,{type:"button",variant:"outline",className:"flex-1",onClick:()=>e("/dashboard"),children:"Cancel"}),n.jsx(_,{type:"submit",className:"flex-1",disabled:c,children:c?"Updating...":"Change Password"})]})]})})]})})}function i7e(){const e=cs(),{data:t,isLoading:r,error:s}=be({queryKey:["/api/auth/verify"],queryFn:async()=>{const l=await fetch("/api/auth/verify",{credentials:"include"});if(!l.ok)throw new Error("Not authenticated");return l.json()},staleTime:0,gcTime:5*60*1e3,refetchOnMount:"always",retry:!1}),a=r?"loading":s?"unauthenticated":"authenticated",i=t!=null&&t.success?{userId:t.userId}:null;return{status:a,user:i,invalidate:()=>{e.invalidateQueries({queryKey:["/api/auth/verify"]})},isAuthenticated:(t==null?void 0:t.success)===!0,isLoading:r,isError:!!s}}function en({children:e}){const[,t]=zt(),{isAuthenticated:r,isLoading:s}=i7e();return p.useEffect(()=>{!s&&!r&&t("/login")},[s,r,t]),s&&!r?n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:n.jsxs("div",{className:"flex flex-col items-center gap-3",children:[n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Verifying session..."})]})}):r?n.jsx(n.Fragment,{children:e}):null}function o7e(){zt();const{toast:e}=Ee(),[t,r]=p.useState(!1),[s,a]=p.useState(!1),[i,o]=p.useState(!1),[l,c]=p.useState(null),[d,u]=p.useState(""),[f,h]=p.useState({username:"",email:"",fullName:"",role:"employee"}),{data:m}=be({queryKey:["/api/users/me"]}),{data:g,isLoading:x}=be({queryKey:["/api/users/all"]}),y=(g==null?void 0:g.users)||[],v=m==null?void 0:m.user,b=je({mutationFn:async R=>Ne("POST","/api/users/create",R),onSuccess:R=>{ze.invalidateQueries({queryKey:["/api/users/all"]}),u(R.temporaryPassword),h({username:"",email:"",fullName:"",role:"employee"}),e({title:"User Created",description:"New user created successfully. Save the temporary password!"})},onError:R=>{e({title:"Creation Failed",description:R.message||"Failed to create user",variant:"destructive"})}}),w=je({mutationFn:async({id:R,data:G})=>Ne("PUT",`/api/users/${R}`,G),onSuccess:()=>{ze.invalidateQueries({queryKey:["/api/users/all"]}),a(!1),c(null),e({title:"User Updated",description:"User updated successfully"})},onError:R=>{e({title:"Update Failed",description:R.message||"Failed to update user",variant:"destructive"})}}),N=je({mutationFn:async R=>Ne("POST",`/api/users/${R}/reset-password`,{}),onSuccess:R=>{u(R.temporaryPassword),e({title:"Password Reset",description:"Password has been reset. Save the new temporary password!"})},onError:R=>{e({title:"Reset Failed",description:R.message||"Failed to reset password",variant:"destructive"})}}),j=je({mutationFn:async R=>Ne("DELETE",`/api/users/${R}`,{}),onSuccess:()=>{ze.invalidateQueries({queryKey:["/api/users/all"]}),e({title:"User Deleted",description:"User deleted successfully"})},onError:R=>{e({title:"Delete Failed",description:R.message||"Failed to delete user",variant:"destructive"})}}),S=R=>{const G={owner:"bg-purple-600",manager:"bg-blue-600",employee:"bg-green-600"};return n.jsx(ge,{className:`${G[R]||"bg-gray-600"} text-white`,children:R.charAt(0).toUpperCase()+R.slice(1)})},C=()=>{if(!f.username||!f.role){e({title:"Missing Fields",description:"Username and role are required",variant:"destructive"});return}b.mutate(f)},k=R=>{c(R),h({username:R.username,email:R.email||"",fullName:R.fullName||"",role:R.role}),a(!0)},M=()=>{l&&w.mutate({id:l.id,data:{email:f.email,fullName:f.fullName,role:f.role,isActive:l.isActive}})},A=R=>{c(R),o(!0)},P=()=>{l&&(N.mutate(l.id),o(!1))},T=R=>{w.mutate({id:R.id,data:{isActive:!R.isActive}})},I=R=>{confirm(`Are you sure you want to delete user "${R.username}"? This action cannot be undone.`)&&j.mutate(R.id)};if(!v||v.role!=="manager"&&v.role!=="owner")return n.jsx(xn,{title:"User Management",children:n.jsx("div",{className:"p-6 max-w-4xl mx-auto",children:n.jsxs(Ln,{variant:"destructive",children:[n.jsx(zn,{className:"h-4 w-4"}),n.jsx(Dn,{children:"You don't have permission to access user management. This area is restricted to managers and owners."})]})})});const L=n.jsxs(_,{onClick:()=>r(!0),"data-testid":"button-add-user",children:[n.jsx(Un,{className:"h-4 w-4 mr-2"}),"Add User"]});return n.jsx(xn,{title:"User Management",pageActions:L,children:n.jsxs("div",{className:"p-6 max-w-6xl mx-auto space-y-6",children:[n.jsx("p",{className:"text-muted-foreground",children:"Manage employee, manager, and system access"}),d&&n.jsxs(Ln,{className:"mb-6 bg-yellow-50 border-yellow-300",children:[n.jsx(fy,{className:"h-4 w-4"}),n.jsxs(Dn,{children:[n.jsx("strong",{children:"Temporary Password:"})," ",n.jsx("code",{className:"bg-yellow-100 px-2 py-1 rounded",children:d}),n.jsx("br",{}),n.jsx("span",{className:"text-sm",children:"Save this password securely. It won't be shown again. The user will be required to change it on first login."}),n.jsx(_,{size:"sm",variant:"outline",className:"ml-4",onClick:()=>u(""),children:"Dismiss"})]})]}),n.jsxs(O,{children:[n.jsxs(ee,{children:[n.jsxs(te,{children:["Users (",y.length,")"]}),n.jsx(ke,{children:"View and manage all system users and their access levels"})]}),n.jsx(H,{children:x?n.jsx("div",{className:"text-center py-8",children:"Loading users..."}):n.jsx("div",{className:"space-y-4",children:y.map(R=>n.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("h3",{className:"font-semibold",children:R.fullName||R.username}),S(R.role),!R.isActive&&n.jsx(ge,{variant:"outline",className:"border-red-300 text-red-600",children:"Inactive"}),R.id===v.id&&n.jsx(ge,{variant:"outline",children:"You"})]}),n.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:["Username: ",R.username," ",R.email&&` Email: ${R.email}`]}),n.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Created: ",new Date(R.createdAt).toLocaleDateString()]})]}),n.jsx("div",{className:"flex items-center gap-2",children:R.id!==v.id&&n.jsxs(n.Fragment,{children:[n.jsx(_,{variant:"outline",size:"sm",onClick:()=>T(R),"data-testid":`button-toggle-${R.id}`,children:R.isActive?n.jsxs(n.Fragment,{children:[n.jsx(bge,{className:"h-4 w-4 mr-1"})," Deactivate"]}):n.jsxs(n.Fragment,{children:[n.jsx(xge,{className:"h-4 w-4 mr-1"})," Activate"]})}),n.jsxs(_,{variant:"outline",size:"sm",onClick:()=>k(R),"data-testid":`button-edit-${R.id}`,children:[n.jsx(No,{className:"h-4 w-4 mr-1"}),"Edit"]}),n.jsxs(_,{variant:"outline",size:"sm",onClick:()=>A(R),"data-testid":`button-reset-${R.id}`,children:[n.jsx(fy,{className:"h-4 w-4 mr-1"}),"Reset Password"]}),v.role==="owner"&&R.role!=="owner"&&n.jsxs(_,{variant:"destructive",size:"sm",onClick:()=>I(R),"data-testid":`button-delete-${R.id}`,children:[n.jsx(Nr,{className:"h-4 w-4 mr-1"}),"Delete"]})]})})]},R.id))})})]}),n.jsx(At,{open:t,onOpenChange:r,children:n.jsxs(_t,{children:[n.jsxs($t,{children:[n.jsx(Et,{children:"Create New User"}),n.jsx(an,{children:"Add a new employee or manager account. They'll receive a temporary password and must change it on first login."})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(U,{htmlFor:"username",children:"Username *"}),n.jsx(se,{id:"username",value:f.username,onChange:R=>h({...f,username:R.target.value}),placeholder:"e.g., john.doe","data-testid":"input-username"})]}),n.jsxs("div",{children:[n.jsx(U,{htmlFor:"fullName",children:"Full Name"}),n.jsx(se,{id:"fullName",value:f.fullName,onChange:R=>h({...f,fullName:R.target.value}),placeholder:"e.g., John Doe","data-testid":"input-fullname"})]}),n.jsxs("div",{children:[n.jsx(U,{htmlFor:"email",children:"Email"}),n.jsx(se,{id:"email",type:"email",value:f.email,onChange:R=>h({...f,email:R.target.value}),placeholder:"e.g., john@example.com","data-testid":"input-email"})]}),n.jsxs("div",{children:[n.jsx(U,{htmlFor:"role",children:"Role *"}),n.jsxs(Pt,{value:f.role,onValueChange:R=>h({...f,role:R}),children:[n.jsx(kt,{"data-testid":"select-role",children:n.jsx(Tt,{})}),n.jsxs(Mt,{children:[n.jsx(ve,{value:"employee",children:"Employee"}),v.role==="owner"&&n.jsx(ve,{value:"manager",children:"Manager"})]})]}),n.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:[f.role==="employee"&&"Basic access to appointments and customer data",f.role==="manager"&&"Can manage employees and access advanced features"]})]})]}),n.jsxs(Sn,{children:[n.jsx(_,{variant:"outline",onClick:()=>r(!1),children:"Cancel"}),n.jsx(_,{onClick:C,disabled:b.isPending,"data-testid":"button-create-user",children:b.isPending?"Creating...":"Create User"})]})]})}),n.jsx(At,{open:s,onOpenChange:a,children:n.jsxs(_t,{children:[n.jsxs($t,{children:[n.jsx(Et,{children:"Edit User"}),n.jsx(an,{children:"Update user information and access level"})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(U,{children:"Username"}),n.jsx(se,{value:f.username,disabled:!0})]}),n.jsxs("div",{children:[n.jsx(U,{htmlFor:"edit-fullName",children:"Full Name"}),n.jsx(se,{id:"edit-fullName",value:f.fullName,onChange:R=>h({...f,fullName:R.target.value}),"data-testid":"input-edit-fullname"})]}),n.jsxs("div",{children:[n.jsx(U,{htmlFor:"edit-email",children:"Email"}),n.jsx(se,{id:"edit-email",type:"email",value:f.email,onChange:R=>h({...f,email:R.target.value}),"data-testid":"input-edit-email"})]}),v.role==="owner"&&n.jsxs("div",{children:[n.jsx(U,{htmlFor:"edit-role",children:"Role"}),n.jsxs(Pt,{value:f.role,onValueChange:R=>h({...f,role:R}),children:[n.jsx(kt,{"data-testid":"select-edit-role",children:n.jsx(Tt,{})}),n.jsxs(Mt,{children:[n.jsx(ve,{value:"employee",children:"Employee"}),n.jsx(ve,{value:"manager",children:"Manager"})]})]})]})]}),n.jsxs(Sn,{children:[n.jsx(_,{variant:"outline",onClick:()=>a(!1),children:"Cancel"}),n.jsx(_,{onClick:M,disabled:w.isPending,"data-testid":"button-update-user",children:w.isPending?"Updating...":"Update User"})]})]})}),n.jsx(At,{open:i,onOpenChange:o,children:n.jsxs(_t,{children:[n.jsxs($t,{children:[n.jsx(Et,{children:"Reset Password"}),n.jsxs(an,{children:["Generate a new temporary password for ",l==null?void 0:l.username,". They'll be required to change it on next login."]})]}),n.jsxs(Sn,{children:[n.jsx(_,{variant:"outline",onClick:()=>o(!1),children:"Cancel"}),n.jsx(_,{onClick:P,disabled:N.isPending,"data-testid":"button-confirm-reset",children:N.isPending?"Resetting...":"Reset Password"})]})]})})]})})}function l7e(){const{toast:e}=Ee(),[t]=zt(),[r,s]=p.useState(""),[a,i]=p.useState(""),[o,l]=p.useState(!1),d=["/login","/forgot-password","/reset-password","/change-password","/approve/","/quote-approval/","/sms-consent","/privacy-policy","/maintenance","/showcase","/chat","/directions","/service-history","/demo","/","/schedule","/quick-booking","/rewards","/gallery","/reviews","/recurring-service-booking","/tech-profile-public"].some(g=>t.startsWith(g))||t==="/",{data:u}=be({queryKey:["/api/users/me"],refetchInterval:5e3,enabled:!d}),f=u==null?void 0:u.user;p.useEffect(()=>{f!=null&&f.requirePasswordChange?l(!0):l(!1)},[f==null?void 0:f.requirePasswordChange]);const h=je({mutationFn:async g=>Ne("POST","/api/auth/change-password",g),onSuccess:()=>{ze.invalidateQueries({queryKey:["/api/users/me"]}),s(""),i(""),e({title:"Password Changed",description:"Your password has been changed successfully"})},onError:g=>{e({title:"Change Failed",description:g.message||"Failed to change password",variant:"destructive"})}}),m=()=>{if(!r){e({title:"Missing Password",description:"Please enter a new password",variant:"destructive"});return}if(r.length<8){e({title:"Weak Password",description:"Password must be at least 8 characters long",variant:"destructive"});return}if(r!==a){e({title:"Passwords Do Not Match",description:"Please make sure both passwords match",variant:"destructive"});return}h.mutate({newPassword:r})};return f!=null&&f.requirePasswordChange?n.jsx(At,{open:o,onOpenChange:()=>{},children:n.jsxs(_t,{className:"sm:max-w-md",onInteractOutside:g=>g.preventDefault(),children:[n.jsxs($t,{children:[n.jsxs(Et,{className:"flex items-center gap-2",children:[n.jsx(fy,{className:"h-5 w-5"}),"Change Password Required"]}),n.jsx(an,{children:"For security, you must change your temporary password before accessing the system."})]}),n.jsxs(Ln,{children:[n.jsx(Wt,{className:"h-4 w-4"}),n.jsx(Dn,{children:"Your administrator has set a temporary password. Please create a new, secure password now."})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(U,{htmlFor:"new-password",children:"New Password"}),n.jsx(se,{id:"new-password",type:"password",value:r,onChange:g=>s(g.target.value),placeholder:"At least 8 characters","data-testid":"input-new-password"})]}),n.jsxs("div",{children:[n.jsx(U,{htmlFor:"confirm-password",children:"Confirm New Password"}),n.jsx(se,{id:"confirm-password",type:"password",value:a,onChange:g=>i(g.target.value),placeholder:"Re-enter your new password","data-testid":"input-confirm-password"})]}),n.jsx(_,{className:"w-full",onClick:m,disabled:h.isPending,"data-testid":"button-change-password",children:h.isPending?"Changing Password...":"Change Password"})]})]})}):null}var c7e=Array.isArray,vi=c7e,d7e=typeof Yg=="object"&&Yg&&Yg.Object===Object&&Yg,Gie=d7e,u7e=Gie,f7e=typeof self=="object"&&self&&self.Object===Object&&self,h7e=u7e||f7e||Function("return this")(),ic=h7e,m7e=ic,p7e=m7e.Symbol,E1=p7e,eR=E1,Yie=Object.prototype,g7e=Yie.hasOwnProperty,x7e=Yie.toString,Og=eR?eR.toStringTag:void 0;function y7e(e){var t=g7e.call(e,Og),r=e[Og];try{e[Og]=void 0;var s=!0}catch{}var a=x7e.call(e);return s&&(t?e[Og]=r:delete e[Og]),a}var v7e=y7e,b7e=Object.prototype,w7e=b7e.toString;function j7e(e){return w7e.call(e)}var N7e=j7e,tR=E1,S7e=v7e,C7e=N7e,k7e="[object Null]",M7e="[object Undefined]",nR=tR?tR.toStringTag:void 0;function _7e(e){return e==null?e===void 0?M7e:k7e:nR&&nR in Object(e)?S7e(e):C7e(e)}var hd=_7e;function P7e(e){return e!=null&&typeof e=="object"}var md=P7e,T7e=hd,A7e=md,E7e="[object Symbol]";function I7e(e){return typeof e=="symbol"||A7e(e)&&T7e(e)==E7e}var ng=I7e,L7e=vi,D7e=ng,$7e=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,O7e=/^\w*$/;function R7e(e,t){if(L7e(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||D7e(e)?!0:O7e.test(e)||!$7e.test(e)||t!=null&&e in Object(t)}var ZE=R7e;function F7e(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Vu=F7e;const rg=qn(Vu);var z7e=hd,B7e=Vu,U7e="[object AsyncFunction]",V7e="[object Function]",H7e="[object GeneratorFunction]",W7e="[object Proxy]";function q7e(e){if(!B7e(e))return!1;var t=z7e(e);return t==V7e||t==H7e||t==U7e||t==W7e}var XE=q7e;const tn=qn(XE);var G7e=ic,Y7e=G7e["__core-js_shared__"],Q7e=Y7e,zC=Q7e,rR=function(){var e=/[^.]+$/.exec(zC&&zC.keys&&zC.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function K7e(e){return!!rR&&rR in e}var J7e=K7e,Z7e=Function.prototype,X7e=Z7e.toString;function eFe(e){if(e!=null){try{return X7e.call(e)}catch{}try{return e+""}catch{}}return""}var Qie=eFe,tFe=XE,nFe=J7e,rFe=Vu,sFe=Qie,aFe=/[\\^$.*+?()[\]{}|]/g,iFe=/^\[object .+?Constructor\]$/,oFe=Function.prototype,lFe=Object.prototype,cFe=oFe.toString,dFe=lFe.hasOwnProperty,uFe=RegExp("^"+cFe.call(dFe).replace(aFe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function fFe(e){if(!rFe(e)||nFe(e))return!1;var t=tFe(e)?uFe:iFe;return t.test(sFe(e))}var hFe=fFe;function mFe(e,t){return e==null?void 0:e[t]}var pFe=mFe,gFe=hFe,xFe=pFe;function yFe(e,t){var r=xFe(e,t);return gFe(r)?r:void 0}var Lh=yFe,vFe=Lh,bFe=vFe(Object,"create"),n3=bFe,sR=n3;function wFe(){this.__data__=sR?sR(null):{},this.size=0}var jFe=wFe;function NFe(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var SFe=NFe,CFe=n3,kFe="__lodash_hash_undefined__",MFe=Object.prototype,_Fe=MFe.hasOwnProperty;function PFe(e){var t=this.__data__;if(CFe){var r=t[e];return r===kFe?void 0:r}return _Fe.call(t,e)?t[e]:void 0}var TFe=PFe,AFe=n3,EFe=Object.prototype,IFe=EFe.hasOwnProperty;function LFe(e){var t=this.__data__;return AFe?t[e]!==void 0:IFe.call(t,e)}var DFe=LFe,$Fe=n3,OFe="__lodash_hash_undefined__";function RFe(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=$Fe&&t===void 0?OFe:t,this}var FFe=RFe,zFe=jFe,BFe=SFe,UFe=TFe,VFe=DFe,HFe=FFe;function sg(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var s=e[t];this.set(s[0],s[1])}}sg.prototype.clear=zFe;sg.prototype.delete=BFe;sg.prototype.get=UFe;sg.prototype.has=VFe;sg.prototype.set=HFe;var WFe=sg;function qFe(){this.__data__=[],this.size=0}var GFe=qFe;function YFe(e,t){return e===t||e!==e&&t!==t}var eI=YFe,QFe=eI;function KFe(e,t){for(var r=e.length;r--;)if(QFe(e[r][0],t))return r;return-1}var r3=KFe,JFe=r3,ZFe=Array.prototype,XFe=ZFe.splice;function eze(e){var t=this.__data__,r=JFe(t,e);if(r<0)return!1;var s=t.length-1;return r==s?t.pop():XFe.call(t,r,1),--this.size,!0}var tze=eze,nze=r3;function rze(e){var t=this.__data__,r=nze(t,e);return r<0?void 0:t[r][1]}var sze=rze,aze=r3;function ize(e){return aze(this.__data__,e)>-1}var oze=ize,lze=r3;function cze(e,t){var r=this.__data__,s=lze(r,e);return s<0?(++this.size,r.push([e,t])):r[s][1]=t,this}var dze=cze,uze=GFe,fze=tze,hze=sze,mze=oze,pze=dze;function ag(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var s=e[t];this.set(s[0],s[1])}}ag.prototype.clear=uze;ag.prototype.delete=fze;ag.prototype.get=hze;ag.prototype.has=mze;ag.prototype.set=pze;var s3=ag,gze=Lh,xze=ic,yze=gze(xze,"Map"),tI=yze,aR=WFe,vze=s3,bze=tI;function wze(){this.size=0,this.__data__={hash:new aR,map:new(bze||vze),string:new aR}}var jze=wze;function Nze(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var Sze=Nze,Cze=Sze;function kze(e,t){var r=e.__data__;return Cze(t)?r[typeof t=="string"?"string":"hash"]:r.map}var a3=kze,Mze=a3;function _ze(e){var t=Mze(this,e).delete(e);return this.size-=t?1:0,t}var Pze=_ze,Tze=a3;function Aze(e){return Tze(this,e).get(e)}var Eze=Aze,Ize=a3;function Lze(e){return Ize(this,e).has(e)}var Dze=Lze,$ze=a3;function Oze(e,t){var r=$ze(this,e),s=r.size;return r.set(e,t),this.size+=r.size==s?0:1,this}var Rze=Oze,Fze=jze,zze=Pze,Bze=Eze,Uze=Dze,Vze=Rze;function ig(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var s=e[t];this.set(s[0],s[1])}}ig.prototype.clear=Fze;ig.prototype.delete=zze;ig.prototype.get=Bze;ig.prototype.has=Uze;ig.prototype.set=Vze;var nI=ig,Kie=nI,Hze="Expected a function";function rI(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(Hze);var r=function(){var s=arguments,a=t?t.apply(this,s):s[0],i=r.cache;if(i.has(a))return i.get(a);var o=e.apply(this,s);return r.cache=i.set(a,o)||i,o};return r.cache=new(rI.Cache||Kie),r}rI.Cache=Kie;var Jie=rI;const Wze=qn(Jie);var qze=Jie,Gze=500;function Yze(e){var t=qze(e,function(s){return r.size===Gze&&r.clear(),s}),r=t.cache;return t}var Qze=Yze,Kze=Qze,Jze=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Zze=/\\(\\)?/g,Xze=Kze(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(Jze,function(r,s,a,i){t.push(a?i.replace(Zze,"$1"):s||r)}),t}),eBe=Xze;function tBe(e,t){for(var r=-1,s=e==null?0:e.length,a=Array(s);++r<s;)a[r]=t(e[r],r,e);return a}var sI=tBe,iR=E1,nBe=sI,rBe=vi,sBe=ng,oR=iR?iR.prototype:void 0,lR=oR?oR.toString:void 0;function Zie(e){if(typeof e=="string")return e;if(rBe(e))return nBe(e,Zie)+"";if(sBe(e))return lR?lR.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var aBe=Zie,iBe=aBe;function oBe(e){return e==null?"":iBe(e)}var Xie=oBe,lBe=vi,cBe=ZE,dBe=eBe,uBe=Xie;function fBe(e,t){return lBe(e)?e:cBe(e,t)?[e]:dBe(uBe(e))}var eoe=fBe,hBe=ng;function mBe(e){if(typeof e=="string"||hBe(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var i3=mBe,pBe=eoe,gBe=i3;function xBe(e,t){t=pBe(t,e);for(var r=0,s=t.length;e!=null&&r<s;)e=e[gBe(t[r++])];return r&&r==s?e:void 0}var aI=xBe,yBe=aI;function vBe(e,t,r){var s=e==null?void 0:yBe(e,t);return s===void 0?r:s}var toe=vBe;const Fi=qn(toe);function bBe(e){return e==null}var wBe=bBe;const dn=qn(wBe);var jBe=hd,NBe=vi,SBe=md,CBe="[object String]";function kBe(e){return typeof e=="string"||!NBe(e)&&SBe(e)&&jBe(e)==CBe}var MBe=kBe;const I1=qn(MBe);var noe={exports:{}},sr={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iI=Symbol.for("react.element"),oI=Symbol.for("react.portal"),o3=Symbol.for("react.fragment"),l3=Symbol.for("react.strict_mode"),c3=Symbol.for("react.profiler"),d3=Symbol.for("react.provider"),u3=Symbol.for("react.context"),_Be=Symbol.for("react.server_context"),f3=Symbol.for("react.forward_ref"),h3=Symbol.for("react.suspense"),m3=Symbol.for("react.suspense_list"),p3=Symbol.for("react.memo"),g3=Symbol.for("react.lazy"),PBe=Symbol.for("react.offscreen"),roe;roe=Symbol.for("react.module.reference");function To(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case iI:switch(e=e.type,e){case o3:case c3:case l3:case h3:case m3:return e;default:switch(e=e&&e.$$typeof,e){case _Be:case u3:case f3:case g3:case p3:case d3:return e;default:return t}}case oI:return t}}}sr.ContextConsumer=u3;sr.ContextProvider=d3;sr.Element=iI;sr.ForwardRef=f3;sr.Fragment=o3;sr.Lazy=g3;sr.Memo=p3;sr.Portal=oI;sr.Profiler=c3;sr.StrictMode=l3;sr.Suspense=h3;sr.SuspenseList=m3;sr.isAsyncMode=function(){return!1};sr.isConcurrentMode=function(){return!1};sr.isContextConsumer=function(e){return To(e)===u3};sr.isContextProvider=function(e){return To(e)===d3};sr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===iI};sr.isForwardRef=function(e){return To(e)===f3};sr.isFragment=function(e){return To(e)===o3};sr.isLazy=function(e){return To(e)===g3};sr.isMemo=function(e){return To(e)===p3};sr.isPortal=function(e){return To(e)===oI};sr.isProfiler=function(e){return To(e)===c3};sr.isStrictMode=function(e){return To(e)===l3};sr.isSuspense=function(e){return To(e)===h3};sr.isSuspenseList=function(e){return To(e)===m3};sr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===o3||e===c3||e===l3||e===h3||e===m3||e===PBe||typeof e=="object"&&e!==null&&(e.$$typeof===g3||e.$$typeof===p3||e.$$typeof===d3||e.$$typeof===u3||e.$$typeof===f3||e.$$typeof===roe||e.getModuleId!==void 0)};sr.typeOf=To;noe.exports=sr;var TBe=noe.exports,ABe=hd,EBe=md,IBe="[object Number]";function LBe(e){return typeof e=="number"||EBe(e)&&ABe(e)==IBe}var soe=LBe;const DBe=qn(soe);var $Be=soe;function OBe(e){return $Be(e)&&e!=+e}var RBe=OBe;const L1=qn(RBe);var Ba=function(t){return t===0?0:t>0?1:-1},wf=function(t){return I1(t)&&t.indexOf("%")===t.length-1},it=function(t){return DBe(t)&&!L1(t)},Ds=function(t){return it(t)||I1(t)},FBe=0,og=function(t){var r=++FBe;return"".concat(t||"").concat(r)},Ua=function(t,r){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!it(t)&&!I1(t))return s;var i;if(wf(t)){var o=t.indexOf("%");i=r*parseFloat(t.slice(0,o))/100}else i=+t;return L1(i)&&(i=s),a&&i>r&&(i=r),i},Dd=function(t){if(!t)return null;var r=Object.keys(t);return r&&r.length?t[r[0]]:null},zBe=function(t){if(!Array.isArray(t))return!1;for(var r=t.length,s={},a=0;a<r;a++)if(!s[t[a]])s[t[a]]=!0;else return!0;return!1},Ai=function(t,r){return it(t)&&it(r)?function(s){return t+s*(r-t)}:function(){return r}};function x2(e,t,r){return!e||!e.length?null:e.find(function(s){return s&&(typeof t=="function"?t(s):Fi(s,t))===r})}function Km(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var s in t)if({}.hasOwnProperty.call(t,s)&&!{}.hasOwnProperty.call(e,s))return!1;return!0}function o_(e){"@babel/helpers - typeof";return o_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o_(e)}var BBe=["viewBox","children"],UBe=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],cR=["points","pathLength"],BC={svg:BBe,polygon:cR,polyline:cR},lI=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],y2=function(t,r){if(!t||typeof t=="function"||typeof t=="boolean")return null;var s=t;if(p.isValidElement(t)&&(s=t.props),!rg(s))return null;var a={};return Object.keys(s).forEach(function(i){lI.includes(i)&&(a[i]=r||function(o){return s[i](s,o)})}),a},VBe=function(t,r,s){return function(a){return t(r,s,a),null}},ph=function(t,r,s){if(!rg(t)||o_(t)!=="object")return null;var a=null;return Object.keys(t).forEach(function(i){var o=t[i];lI.includes(i)&&typeof o=="function"&&(a||(a={}),a[i]=VBe(o,r,s))}),a},HBe=["children"],WBe=["children"];function dR(e,t){if(e==null)return{};var r=qBe(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function qBe(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}function l_(e){"@babel/helpers - typeof";return l_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l_(e)}var uR={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Fc=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},fR=null,UC=null,cI=function e(t){if(t===fR&&Array.isArray(UC))return UC;var r=[];return p.Children.forEach(t,function(s){dn(s)||(TBe.isFragment(s)?r=r.concat(e(s.props.children)):r.push(s))}),UC=r,fR=t,r};function zi(e,t){var r=[],s=[];return Array.isArray(t)?s=t.map(function(a){return Fc(a)}):s=[Fc(t)],cI(e).forEach(function(a){var i=Fi(a,"type.displayName")||Fi(a,"type.name");s.indexOf(i)!==-1&&r.push(a)}),r}function ki(e,t){var r=zi(e,t);return r&&r[0]}var hR=function(t){if(!t||!t.props)return!1;var r=t.props,s=r.width,a=r.height;return!(!it(s)||s<=0||!it(a)||a<=0)},GBe=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],YBe=function(t){return t&&t.type&&I1(t.type)&&GBe.indexOf(t.type)>=0},QBe=function(t){return t&&l_(t)==="object"&&"clipDot"in t},KBe=function(t,r,s,a){var i,o=(i=BC==null?void 0:BC[a])!==null&&i!==void 0?i:[];return r.startsWith("data-")||!tn(t)&&(a&&o.includes(r)||UBe.includes(r))||s&&lI.includes(r)},Ht=function(t,r,s){if(!t||typeof t=="function"||typeof t=="boolean")return null;var a=t;if(p.isValidElement(t)&&(a=t.props),!rg(a))return null;var i={};return Object.keys(a).forEach(function(o){var l;KBe((l=a)===null||l===void 0?void 0:l[o],o,r,s)&&(i[o]=a[o])}),i},c_=function e(t,r){if(t===r)return!0;var s=p.Children.count(t);if(s!==p.Children.count(r))return!1;if(s===0)return!0;if(s===1)return mR(Array.isArray(t)?t[0]:t,Array.isArray(r)?r[0]:r);for(var a=0;a<s;a++){var i=t[a],o=r[a];if(Array.isArray(i)||Array.isArray(o)){if(!e(i,o))return!1}else if(!mR(i,o))return!1}return!0},mR=function(t,r){if(dn(t)&&dn(r))return!0;if(!dn(t)&&!dn(r)){var s=t.props||{},a=s.children,i=dR(s,HBe),o=r.props||{},l=o.children,c=dR(o,WBe);return a&&l?Km(i,c)&&c_(a,l):!a&&!l?Km(i,c):!1}return!1},pR=function(t,r){var s=[],a={};return cI(t).forEach(function(i,o){if(YBe(i))s.push(i);else if(i){var l=Fc(i.type),c=r[l]||{},d=c.handler,u=c.once;if(d&&(!u||!a[l])){var f=d(i,l,o);s.push(f),a[l]=!0}}}),s},JBe=function(t){var r=t&&t.type;return r&&uR[r]?uR[r]:null},ZBe=function(t,r){return cI(r).indexOf(t)},XBe=["children","width","height","viewBox","className","style","title","desc"];function d_(){return d_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},d_.apply(this,arguments)}function eUe(e,t){if(e==null)return{};var r=tUe(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function tUe(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}function u_(e){var t=e.children,r=e.width,s=e.height,a=e.viewBox,i=e.className,o=e.style,l=e.title,c=e.desc,d=eUe(e,XBe),u=a||{width:r,height:s,x:0,y:0},f=mn("recharts-surface",i);return Q.createElement("svg",d_({},Ht(d,!0,"svg"),{className:f,width:r,height:s,style:o,viewBox:"".concat(u.x," ").concat(u.y," ").concat(u.width," ").concat(u.height)}),Q.createElement("title",null,l),Q.createElement("desc",null,c),t)}var nUe=["children","className"];function f_(){return f_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},f_.apply(this,arguments)}function rUe(e,t){if(e==null)return{};var r=sUe(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function sUe(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}var Bn=Q.forwardRef(function(e,t){var r=e.children,s=e.className,a=rUe(e,nUe),i=mn("recharts-layer",s);return Q.createElement("g",f_({className:i},Ht(a,!0),{ref:t}),r)}),ol=function(t,r){for(var s=arguments.length,a=new Array(s>2?s-2:0),i=2;i<s;i++)a[i-2]=arguments[i]};function aUe(e,t,r){var s=-1,a=e.length;t<0&&(t=-t>a?0:a+t),r=r>a?a:r,r<0&&(r+=a),a=t>r?0:r-t>>>0,t>>>=0;for(var i=Array(a);++s<a;)i[s]=e[s+t];return i}var iUe=aUe,oUe=iUe;function lUe(e,t,r){var s=e.length;return r=r===void 0?s:r,!t&&r>=s?e:oUe(e,t,r)}var cUe=lUe,dUe="\\ud800-\\udfff",uUe="\\u0300-\\u036f",fUe="\\ufe20-\\ufe2f",hUe="\\u20d0-\\u20ff",mUe=uUe+fUe+hUe,pUe="\\ufe0e\\ufe0f",gUe="\\u200d",xUe=RegExp("["+gUe+dUe+mUe+pUe+"]");function yUe(e){return xUe.test(e)}var aoe=yUe;function vUe(e){return e.split("")}var bUe=vUe,ioe="\\ud800-\\udfff",wUe="\\u0300-\\u036f",jUe="\\ufe20-\\ufe2f",NUe="\\u20d0-\\u20ff",SUe=wUe+jUe+NUe,CUe="\\ufe0e\\ufe0f",kUe="["+ioe+"]",h_="["+SUe+"]",m_="\\ud83c[\\udffb-\\udfff]",MUe="(?:"+h_+"|"+m_+")",ooe="[^"+ioe+"]",loe="(?:\\ud83c[\\udde6-\\uddff]){2}",coe="[\\ud800-\\udbff][\\udc00-\\udfff]",_Ue="\\u200d",doe=MUe+"?",uoe="["+CUe+"]?",PUe="(?:"+_Ue+"(?:"+[ooe,loe,coe].join("|")+")"+uoe+doe+")*",TUe=uoe+doe+PUe,AUe="(?:"+[ooe+h_+"?",h_,loe,coe,kUe].join("|")+")",EUe=RegExp(m_+"(?="+m_+")|"+AUe+TUe,"g");function IUe(e){return e.match(EUe)||[]}var LUe=IUe,DUe=bUe,$Ue=aoe,OUe=LUe;function RUe(e){return $Ue(e)?OUe(e):DUe(e)}var FUe=RUe,zUe=cUe,BUe=aoe,UUe=FUe,VUe=Xie;function HUe(e){return function(t){t=VUe(t);var r=BUe(t)?UUe(t):void 0,s=r?r[0]:t.charAt(0),a=r?zUe(r,1).join(""):t.slice(1);return s[e]()+a}}var WUe=HUe,qUe=WUe,GUe=qUe("toUpperCase"),YUe=GUe;const x3=qn(YUe);function dr(e){return function(){return e}}const foe=Math.cos,v2=Math.sin,wl=Math.sqrt,b2=Math.PI,y3=2*b2,p_=Math.PI,g_=2*p_,of=1e-6,QUe=g_-of;function hoe(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function KUe(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return hoe;const r=10**t;return function(s){this._+=s[0];for(let a=1,i=s.length;a<i;++a)this._+=Math.round(arguments[a]*r)/r+s[a]}}class JUe{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?hoe:KUe(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,s,a){this._append`Q${+t},${+r},${this._x1=+s},${this._y1=+a}`}bezierCurveTo(t,r,s,a,i,o){this._append`C${+t},${+r},${+s},${+a},${this._x1=+i},${this._y1=+o}`}arcTo(t,r,s,a,i){if(t=+t,r=+r,s=+s,a=+a,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,l=this._y1,c=s-t,d=a-r,u=o-t,f=l-r,h=u*u+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(h>of)if(!(Math.abs(f*c-d*u)>of)||!i)this._append`L${this._x1=t},${this._y1=r}`;else{let m=s-o,g=a-l,x=c*c+d*d,y=m*m+g*g,v=Math.sqrt(x),b=Math.sqrt(h),w=i*Math.tan((p_-Math.acos((x+h-y)/(2*v*b)))/2),N=w/b,j=w/v;Math.abs(N-1)>of&&this._append`L${t+N*u},${r+N*f}`,this._append`A${i},${i},0,0,${+(f*m>u*g)},${this._x1=t+j*c},${this._y1=r+j*d}`}}arc(t,r,s,a,i,o){if(t=+t,r=+r,s=+s,o=!!o,s<0)throw new Error(`negative radius: ${s}`);let l=s*Math.cos(a),c=s*Math.sin(a),d=t+l,u=r+c,f=1^o,h=o?a-i:i-a;this._x1===null?this._append`M${d},${u}`:(Math.abs(this._x1-d)>of||Math.abs(this._y1-u)>of)&&this._append`L${d},${u}`,s&&(h<0&&(h=h%g_+g_),h>QUe?this._append`A${s},${s},0,1,${f},${t-l},${r-c}A${s},${s},0,1,${f},${this._x1=d},${this._y1=u}`:h>of&&this._append`A${s},${s},0,${+(h>=p_)},${f},${this._x1=t+s*Math.cos(i)},${this._y1=r+s*Math.sin(i)}`)}rect(t,r,s,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${s=+s}v${+a}h${-s}Z`}toString(){return this._}}function dI(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const s=Math.floor(r);if(!(s>=0))throw new RangeError(`invalid digits: ${r}`);t=s}return e},()=>new JUe(t)}function uI(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function moe(e){this._context=e}moe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function v3(e){return new moe(e)}function poe(e){return e[0]}function goe(e){return e[1]}function xoe(e,t){var r=dr(!0),s=null,a=v3,i=null,o=dI(l);e=typeof e=="function"?e:e===void 0?poe:dr(e),t=typeof t=="function"?t:t===void 0?goe:dr(t);function l(c){var d,u=(c=uI(c)).length,f,h=!1,m;for(s==null&&(i=a(m=o())),d=0;d<=u;++d)!(d<u&&r(f=c[d],d,c))===h&&((h=!h)?i.lineStart():i.lineEnd()),h&&i.point(+e(f,d,c),+t(f,d,c));if(m)return i=null,m+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:dr(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:dr(+c),l):t},l.defined=function(c){return arguments.length?(r=typeof c=="function"?c:dr(!!c),l):r},l.curve=function(c){return arguments.length?(a=c,s!=null&&(i=a(s)),l):a},l.context=function(c){return arguments.length?(c==null?s=i=null:i=a(s=c),l):s},l}function Lb(e,t,r){var s=null,a=dr(!0),i=null,o=v3,l=null,c=dI(d);e=typeof e=="function"?e:e===void 0?poe:dr(+e),t=typeof t=="function"?t:dr(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?goe:dr(+r);function d(f){var h,m,g,x=(f=uI(f)).length,y,v=!1,b,w=new Array(x),N=new Array(x);for(i==null&&(l=o(b=c())),h=0;h<=x;++h){if(!(h<x&&a(y=f[h],h,f))===v)if(v=!v)m=h,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),g=h-1;g>=m;--g)l.point(w[g],N[g]);l.lineEnd(),l.areaEnd()}v&&(w[h]=+e(y,h,f),N[h]=+t(y,h,f),l.point(s?+s(y,h,f):w[h],r?+r(y,h,f):N[h]))}if(b)return l=null,b+""||null}function u(){return xoe().defined(a).curve(o).context(i)}return d.x=function(f){return arguments.length?(e=typeof f=="function"?f:dr(+f),s=null,d):e},d.x0=function(f){return arguments.length?(e=typeof f=="function"?f:dr(+f),d):e},d.x1=function(f){return arguments.length?(s=f==null?null:typeof f=="function"?f:dr(+f),d):s},d.y=function(f){return arguments.length?(t=typeof f=="function"?f:dr(+f),r=null,d):t},d.y0=function(f){return arguments.length?(t=typeof f=="function"?f:dr(+f),d):t},d.y1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:dr(+f),d):r},d.lineX0=d.lineY0=function(){return u().x(e).y(t)},d.lineY1=function(){return u().x(e).y(r)},d.lineX1=function(){return u().x(s).y(t)},d.defined=function(f){return arguments.length?(a=typeof f=="function"?f:dr(!!f),d):a},d.curve=function(f){return arguments.length?(o=f,i!=null&&(l=o(i)),d):o},d.context=function(f){return arguments.length?(f==null?i=l=null:l=o(i=f),d):i},d}class yoe{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function ZUe(e){return new yoe(e,!0)}function XUe(e){return new yoe(e,!1)}const fI={draw(e,t){const r=wl(t/b2);e.moveTo(r,0),e.arc(0,0,r,0,y3)}},eVe={draw(e,t){const r=wl(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},voe=wl(1/3),tVe=voe*2,nVe={draw(e,t){const r=wl(t/tVe),s=r*voe;e.moveTo(0,-r),e.lineTo(s,0),e.lineTo(0,r),e.lineTo(-s,0),e.closePath()}},rVe={draw(e,t){const r=wl(t),s=-r/2;e.rect(s,s,r,r)}},sVe=.8908130915292852,boe=v2(b2/10)/v2(7*b2/10),aVe=v2(y3/10)*boe,iVe=-foe(y3/10)*boe,oVe={draw(e,t){const r=wl(t*sVe),s=aVe*r,a=iVe*r;e.moveTo(0,-r),e.lineTo(s,a);for(let i=1;i<5;++i){const o=y3*i/5,l=foe(o),c=v2(o);e.lineTo(c*r,-l*r),e.lineTo(l*s-c*a,c*s+l*a)}e.closePath()}},VC=wl(3),lVe={draw(e,t){const r=-wl(t/(VC*3));e.moveTo(0,r*2),e.lineTo(-VC*r,-r),e.lineTo(VC*r,-r),e.closePath()}},eo=-.5,to=wl(3)/2,x_=1/wl(12),cVe=(x_/2+1)*3,dVe={draw(e,t){const r=wl(t/cVe),s=r/2,a=r*x_,i=s,o=r*x_+r,l=-i,c=o;e.moveTo(s,a),e.lineTo(i,o),e.lineTo(l,c),e.lineTo(eo*s-to*a,to*s+eo*a),e.lineTo(eo*i-to*o,to*i+eo*o),e.lineTo(eo*l-to*c,to*l+eo*c),e.lineTo(eo*s+to*a,eo*a-to*s),e.lineTo(eo*i+to*o,eo*o-to*i),e.lineTo(eo*l+to*c,eo*c-to*l),e.closePath()}};function uVe(e,t){let r=null,s=dI(a);e=typeof e=="function"?e:dr(e||fI),t=typeof t=="function"?t:dr(t===void 0?64:+t);function a(){let i;if(r||(r=i=s()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),i)return r=null,i+""||null}return a.type=function(i){return arguments.length?(e=typeof i=="function"?i:dr(i),a):e},a.size=function(i){return arguments.length?(t=typeof i=="function"?i:dr(+i),a):t},a.context=function(i){return arguments.length?(r=i??null,a):r},a}function w2(){}function j2(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function woe(e){this._context=e}woe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:j2(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:j2(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function fVe(e){return new woe(e)}function joe(e){this._context=e}joe.prototype={areaStart:w2,areaEnd:w2,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:j2(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function hVe(e){return new joe(e)}function Noe(e){this._context=e}Noe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,s=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,s):this._context.moveTo(r,s);break;case 3:this._point=4;default:j2(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function mVe(e){return new Noe(e)}function Soe(e){this._context=e}Soe.prototype={areaStart:w2,areaEnd:w2,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function pVe(e){return new Soe(e)}function gR(e){return e<0?-1:1}function xR(e,t,r){var s=e._x1-e._x0,a=t-e._x1,i=(e._y1-e._y0)/(s||a<0&&-0),o=(r-e._y1)/(a||s<0&&-0),l=(i*a+o*s)/(s+a);return(gR(i)+gR(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(l))||0}function yR(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function HC(e,t,r){var s=e._x0,a=e._y0,i=e._x1,o=e._y1,l=(i-s)/3;e._context.bezierCurveTo(s+l,a+l*t,i-l,o-l*r,i,o)}function N2(e){this._context=e}N2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:HC(this,this._t0,yR(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,HC(this,yR(this,r=xR(this,e,t)),r);break;default:HC(this,this._t0,r=xR(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function Coe(e){this._context=new koe(e)}(Coe.prototype=Object.create(N2.prototype)).point=function(e,t){N2.prototype.point.call(this,t,e)};function koe(e){this._context=e}koe.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,s,a,i){this._context.bezierCurveTo(t,e,s,r,i,a)}};function gVe(e){return new N2(e)}function xVe(e){return new Coe(e)}function Moe(e){this._context=e}Moe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var s=vR(e),a=vR(t),i=0,o=1;o<r;++i,++o)this._context.bezierCurveTo(s[0][i],a[0][i],s[1][i],a[1][i],e[o],t[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function vR(e){var t,r=e.length-1,s,a=new Array(r),i=new Array(r),o=new Array(r);for(a[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)a[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(a[r-1]=2,i[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)s=a[t]/i[t-1],i[t]-=s,o[t]-=s*o[t-1];for(a[r-1]=o[r-1]/i[r-1],t=r-2;t>=0;--t)a[t]=(o[t]-a[t+1])/i[t];for(i[r-1]=(e[r]+a[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-a[t+1];return[a,i]}function yVe(e){return new Moe(e)}function b3(e,t){this._context=e,this._t=t}b3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function vVe(e){return new b3(e,.5)}function bVe(e){return new b3(e,0)}function wVe(e){return new b3(e,1)}function Gp(e,t){if((o=e.length)>1)for(var r=1,s,a,i=e[t[0]],o,l=i.length;r<o;++r)for(a=i,i=e[t[r]],s=0;s<l;++s)i[s][1]+=i[s][0]=isNaN(a[s][1])?a[s][0]:a[s][1]}function y_(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function jVe(e,t){return e[t]}function NVe(e){const t=[];return t.key=e,t}function SVe(){var e=dr([]),t=y_,r=Gp,s=jVe;function a(i){var o=Array.from(e.apply(this,arguments),NVe),l,c=o.length,d=-1,u;for(const f of i)for(l=0,++d;l<c;++l)(o[l][d]=[0,+s(f,o[l].key,d,i)]).data=f;for(l=0,u=uI(t(o));l<c;++l)o[u[l]].index=l;return r(o,u),o}return a.keys=function(i){return arguments.length?(e=typeof i=="function"?i:dr(Array.from(i)),a):e},a.value=function(i){return arguments.length?(s=typeof i=="function"?i:dr(+i),a):s},a.order=function(i){return arguments.length?(t=i==null?y_:typeof i=="function"?i:dr(Array.from(i)),a):t},a.offset=function(i){return arguments.length?(r=i??Gp,a):r},a}function CVe(e,t){if((s=e.length)>0){for(var r,s,a=0,i=e[0].length,o;a<i;++a){for(o=r=0;r<s;++r)o+=e[r][a][1]||0;if(o)for(r=0;r<s;++r)e[r][a][1]/=o}Gp(e,t)}}function kVe(e,t){if((a=e.length)>0){for(var r=0,s=e[t[0]],a,i=s.length;r<i;++r){for(var o=0,l=0;o<a;++o)l+=e[o][r][1]||0;s[r][1]+=s[r][0]=-l/2}Gp(e,t)}}function MVe(e,t){if(!(!((o=e.length)>0)||!((i=(a=e[t[0]]).length)>0))){for(var r=0,s=1,a,i,o;s<i;++s){for(var l=0,c=0,d=0;l<o;++l){for(var u=e[t[l]],f=u[s][1]||0,h=u[s-1][1]||0,m=(f-h)/2,g=0;g<l;++g){var x=e[t[g]],y=x[s][1]||0,v=x[s-1][1]||0;m+=y-v}c+=f,d+=m*f}a[s-1][1]+=a[s-1][0]=r,c&&(r-=d/c)}a[s-1][1]+=a[s-1][0]=r,Gp(e,t)}}function ev(e){"@babel/helpers - typeof";return ev=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ev(e)}var _Ve=["type","size","sizeType"];function v_(){return v_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},v_.apply(this,arguments)}function bR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function wR(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bR(Object(r),!0).forEach(function(s){PVe(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bR(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function PVe(e,t,r){return t=TVe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function TVe(e){var t=AVe(e,"string");return ev(t)=="symbol"?t:t+""}function AVe(e,t){if(ev(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(ev(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function EVe(e,t){if(e==null)return{};var r=IVe(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function IVe(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}var _oe={symbolCircle:fI,symbolCross:eVe,symbolDiamond:nVe,symbolSquare:rVe,symbolStar:oVe,symbolTriangle:lVe,symbolWye:dVe},LVe=Math.PI/180,DVe=function(t){var r="symbol".concat(x3(t));return _oe[r]||fI},$Ve=function(t,r,s){if(r==="area")return t;switch(s){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var a=18*LVe;return 1.25*t*t*(Math.tan(a)-Math.tan(a*2)*Math.pow(Math.tan(a),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},OVe=function(t,r){_oe["symbol".concat(x3(t))]=r},hI=function(t){var r=t.type,s=r===void 0?"circle":r,a=t.size,i=a===void 0?64:a,o=t.sizeType,l=o===void 0?"area":o,c=EVe(t,_Ve),d=wR(wR({},c),{},{type:s,size:i,sizeType:l}),u=function(){var y=DVe(s),v=uVe().type(y).size($Ve(i,l,s));return v()},f=d.className,h=d.cx,m=d.cy,g=Ht(d,!0);return h===+h&&m===+m&&i===+i?Q.createElement("path",v_({},g,{className:mn("recharts-symbols",f),transform:"translate(".concat(h,", ").concat(m,")"),d:u()})):null};hI.registerSymbol=OVe;function Yp(e){"@babel/helpers - typeof";return Yp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yp(e)}function b_(){return b_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},b_.apply(this,arguments)}function jR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function RVe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jR(Object(r),!0).forEach(function(s){tv(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jR(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function FVe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zVe(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,Toe(s.key),s)}}function BVe(e,t,r){return t&&zVe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function UVe(e,t,r){return t=S2(t),VVe(e,Poe()?Reflect.construct(t,r||[],S2(e).constructor):t.apply(e,r))}function VVe(e,t){if(t&&(Yp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return HVe(e)}function HVe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Poe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Poe=function(){return!!e})()}function S2(e){return S2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},S2(e)}function WVe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&w_(e,t)}function w_(e,t){return w_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},w_(e,t)}function tv(e,t,r){return t=Toe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Toe(e){var t=qVe(e,"string");return Yp(t)=="symbol"?t:t+""}function qVe(e,t){if(Yp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(Yp(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var no=32,mI=function(e){function t(){return FVe(this,t),UVe(this,t,arguments)}return WVe(t,e),BVe(t,[{key:"renderIcon",value:function(s){var a=this.props.inactiveColor,i=no/2,o=no/6,l=no/3,c=s.inactive?a:s.color;if(s.type==="plainline")return Q.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:s.payload.strokeDasharray,x1:0,y1:i,x2:no,y2:i,className:"recharts-legend-icon"});if(s.type==="line")return Q.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(i,"h").concat(l,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*l,",").concat(i,`
            H`).concat(no,"M").concat(2*l,",").concat(i,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(l,",").concat(i),className:"recharts-legend-icon"});if(s.type==="rect")return Q.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(no/8,"h").concat(no,"v").concat(no*3/4,"h").concat(-no,"z"),className:"recharts-legend-icon"});if(Q.isValidElement(s.legendIcon)){var d=RVe({},s);return delete d.legendIcon,Q.cloneElement(s.legendIcon,d)}return Q.createElement(hI,{fill:c,cx:i,cy:i,size:no,sizeType:"diameter",type:s.type})}},{key:"renderItems",value:function(){var s=this,a=this.props,i=a.payload,o=a.iconSize,l=a.layout,c=a.formatter,d=a.inactiveColor,u={x:0,y:0,width:no,height:no},f={display:l==="horizontal"?"inline-block":"block",marginRight:10},h={display:"inline-block",verticalAlign:"middle",marginRight:4};return i.map(function(m,g){var x=m.formatter||c,y=mn(tv(tv({"recharts-legend-item":!0},"legend-item-".concat(g),!0),"inactive",m.inactive));if(m.type==="none")return null;var v=tn(m.value)?null:m.value;ol(!tn(m.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var b=m.inactive?d:m.color;return Q.createElement("li",b_({className:y,style:f,key:"legend-item-".concat(g)},ph(s.props,m,g)),Q.createElement(u_,{width:o,height:o,viewBox:u,style:h},s.renderIcon(m)),Q.createElement("span",{className:"recharts-legend-item-text",style:{color:b}},x?x(v,m,g):v))})}},{key:"render",value:function(){var s=this.props,a=s.payload,i=s.layout,o=s.align;if(!a||!a.length)return null;var l={padding:0,margin:0,textAlign:i==="horizontal"?o:"left"};return Q.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])}(p.PureComponent);tv(mI,"displayName","Legend");tv(mI,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var GVe=s3;function YVe(){this.__data__=new GVe,this.size=0}var QVe=YVe;function KVe(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var JVe=KVe;function ZVe(e){return this.__data__.get(e)}var XVe=ZVe;function eHe(e){return this.__data__.has(e)}var tHe=eHe,nHe=s3,rHe=tI,sHe=nI,aHe=200;function iHe(e,t){var r=this.__data__;if(r instanceof nHe){var s=r.__data__;if(!rHe||s.length<aHe-1)return s.push([e,t]),this.size=++r.size,this;r=this.__data__=new sHe(s)}return r.set(e,t),this.size=r.size,this}var oHe=iHe,lHe=s3,cHe=QVe,dHe=JVe,uHe=XVe,fHe=tHe,hHe=oHe;function lg(e){var t=this.__data__=new lHe(e);this.size=t.size}lg.prototype.clear=cHe;lg.prototype.delete=dHe;lg.prototype.get=uHe;lg.prototype.has=fHe;lg.prototype.set=hHe;var Aoe=lg,mHe="__lodash_hash_undefined__";function pHe(e){return this.__data__.set(e,mHe),this}var gHe=pHe;function xHe(e){return this.__data__.has(e)}var yHe=xHe,vHe=nI,bHe=gHe,wHe=yHe;function C2(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new vHe;++t<r;)this.add(e[t])}C2.prototype.add=C2.prototype.push=bHe;C2.prototype.has=wHe;var Eoe=C2;function jHe(e,t){for(var r=-1,s=e==null?0:e.length;++r<s;)if(t(e[r],r,e))return!0;return!1}var Ioe=jHe;function NHe(e,t){return e.has(t)}var Loe=NHe,SHe=Eoe,CHe=Ioe,kHe=Loe,MHe=1,_He=2;function PHe(e,t,r,s,a,i){var o=r&MHe,l=e.length,c=t.length;if(l!=c&&!(o&&c>l))return!1;var d=i.get(e),u=i.get(t);if(d&&u)return d==t&&u==e;var f=-1,h=!0,m=r&_He?new SHe:void 0;for(i.set(e,t),i.set(t,e);++f<l;){var g=e[f],x=t[f];if(s)var y=o?s(x,g,f,t,e,i):s(g,x,f,e,t,i);if(y!==void 0){if(y)continue;h=!1;break}if(m){if(!CHe(t,function(v,b){if(!kHe(m,b)&&(g===v||a(g,v,r,s,i)))return m.push(b)})){h=!1;break}}else if(!(g===x||a(g,x,r,s,i))){h=!1;break}}return i.delete(e),i.delete(t),h}var Doe=PHe,THe=ic,AHe=THe.Uint8Array,EHe=AHe;function IHe(e){var t=-1,r=Array(e.size);return e.forEach(function(s,a){r[++t]=[a,s]}),r}var LHe=IHe;function DHe(e){var t=-1,r=Array(e.size);return e.forEach(function(s){r[++t]=s}),r}var pI=DHe,NR=E1,SR=EHe,$He=eI,OHe=Doe,RHe=LHe,FHe=pI,zHe=1,BHe=2,UHe="[object Boolean]",VHe="[object Date]",HHe="[object Error]",WHe="[object Map]",qHe="[object Number]",GHe="[object RegExp]",YHe="[object Set]",QHe="[object String]",KHe="[object Symbol]",JHe="[object ArrayBuffer]",ZHe="[object DataView]",CR=NR?NR.prototype:void 0,WC=CR?CR.valueOf:void 0;function XHe(e,t,r,s,a,i,o){switch(r){case ZHe:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case JHe:return!(e.byteLength!=t.byteLength||!i(new SR(e),new SR(t)));case UHe:case VHe:case qHe:return $He(+e,+t);case HHe:return e.name==t.name&&e.message==t.message;case GHe:case QHe:return e==t+"";case WHe:var l=RHe;case YHe:var c=s&zHe;if(l||(l=FHe),e.size!=t.size&&!c)return!1;var d=o.get(e);if(d)return d==t;s|=BHe,o.set(e,t);var u=OHe(l(e),l(t),s,a,i,o);return o.delete(e),u;case KHe:if(WC)return WC.call(e)==WC.call(t)}return!1}var eWe=XHe;function tWe(e,t){for(var r=-1,s=t.length,a=e.length;++r<s;)e[a+r]=t[r];return e}var $oe=tWe,nWe=$oe,rWe=vi;function sWe(e,t,r){var s=t(e);return rWe(e)?s:nWe(s,r(e))}var aWe=sWe;function iWe(e,t){for(var r=-1,s=e==null?0:e.length,a=0,i=[];++r<s;){var o=e[r];t(o,r,e)&&(i[a++]=o)}return i}var oWe=iWe;function lWe(){return[]}var cWe=lWe,dWe=oWe,uWe=cWe,fWe=Object.prototype,hWe=fWe.propertyIsEnumerable,kR=Object.getOwnPropertySymbols,mWe=kR?function(e){return e==null?[]:(e=Object(e),dWe(kR(e),function(t){return hWe.call(e,t)}))}:uWe,pWe=mWe;function gWe(e,t){for(var r=-1,s=Array(e);++r<e;)s[r]=t(r);return s}var xWe=gWe,yWe=hd,vWe=md,bWe="[object Arguments]";function wWe(e){return vWe(e)&&yWe(e)==bWe}var jWe=wWe,MR=jWe,NWe=md,Ooe=Object.prototype,SWe=Ooe.hasOwnProperty,CWe=Ooe.propertyIsEnumerable,kWe=MR(function(){return arguments}())?MR:function(e){return NWe(e)&&SWe.call(e,"callee")&&!CWe.call(e,"callee")},gI=kWe,k2={exports:{}};function MWe(){return!1}var _We=MWe;k2.exports;(function(e,t){var r=ic,s=_We,a=t&&!t.nodeType&&t,i=a&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===a,l=o?r.Buffer:void 0,c=l?l.isBuffer:void 0,d=c||s;e.exports=d})(k2,k2.exports);var Roe=k2.exports,PWe=9007199254740991,TWe=/^(?:0|[1-9]\d*)$/;function AWe(e,t){var r=typeof e;return t=t??PWe,!!t&&(r=="number"||r!="symbol"&&TWe.test(e))&&e>-1&&e%1==0&&e<t}var xI=AWe,EWe=9007199254740991;function IWe(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=EWe}var yI=IWe,LWe=hd,DWe=yI,$We=md,OWe="[object Arguments]",RWe="[object Array]",FWe="[object Boolean]",zWe="[object Date]",BWe="[object Error]",UWe="[object Function]",VWe="[object Map]",HWe="[object Number]",WWe="[object Object]",qWe="[object RegExp]",GWe="[object Set]",YWe="[object String]",QWe="[object WeakMap]",KWe="[object ArrayBuffer]",JWe="[object DataView]",ZWe="[object Float32Array]",XWe="[object Float64Array]",eqe="[object Int8Array]",tqe="[object Int16Array]",nqe="[object Int32Array]",rqe="[object Uint8Array]",sqe="[object Uint8ClampedArray]",aqe="[object Uint16Array]",iqe="[object Uint32Array]",yr={};yr[ZWe]=yr[XWe]=yr[eqe]=yr[tqe]=yr[nqe]=yr[rqe]=yr[sqe]=yr[aqe]=yr[iqe]=!0;yr[OWe]=yr[RWe]=yr[KWe]=yr[FWe]=yr[JWe]=yr[zWe]=yr[BWe]=yr[UWe]=yr[VWe]=yr[HWe]=yr[WWe]=yr[qWe]=yr[GWe]=yr[YWe]=yr[QWe]=!1;function oqe(e){return $We(e)&&DWe(e.length)&&!!yr[LWe(e)]}var lqe=oqe;function cqe(e){return function(t){return e(t)}}var Foe=cqe,M2={exports:{}};M2.exports;(function(e,t){var r=Gie,s=t&&!t.nodeType&&t,a=s&&!0&&e&&!e.nodeType&&e,i=a&&a.exports===s,o=i&&r.process,l=function(){try{var c=a&&a.require&&a.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}}();e.exports=l})(M2,M2.exports);var dqe=M2.exports,uqe=lqe,fqe=Foe,_R=dqe,PR=_R&&_R.isTypedArray,hqe=PR?fqe(PR):uqe,zoe=hqe,mqe=xWe,pqe=gI,gqe=vi,xqe=Roe,yqe=xI,vqe=zoe,bqe=Object.prototype,wqe=bqe.hasOwnProperty;function jqe(e,t){var r=gqe(e),s=!r&&pqe(e),a=!r&&!s&&xqe(e),i=!r&&!s&&!a&&vqe(e),o=r||s||a||i,l=o?mqe(e.length,String):[],c=l.length;for(var d in e)(t||wqe.call(e,d))&&!(o&&(d=="length"||a&&(d=="offset"||d=="parent")||i&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||yqe(d,c)))&&l.push(d);return l}var Nqe=jqe,Sqe=Object.prototype;function Cqe(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||Sqe;return e===r}var kqe=Cqe;function Mqe(e,t){return function(r){return e(t(r))}}var Boe=Mqe,_qe=Boe,Pqe=_qe(Object.keys,Object),Tqe=Pqe,Aqe=kqe,Eqe=Tqe,Iqe=Object.prototype,Lqe=Iqe.hasOwnProperty;function Dqe(e){if(!Aqe(e))return Eqe(e);var t=[];for(var r in Object(e))Lqe.call(e,r)&&r!="constructor"&&t.push(r);return t}var $qe=Dqe,Oqe=XE,Rqe=yI;function Fqe(e){return e!=null&&Rqe(e.length)&&!Oqe(e)}var D1=Fqe,zqe=Nqe,Bqe=$qe,Uqe=D1;function Vqe(e){return Uqe(e)?zqe(e):Bqe(e)}var w3=Vqe,Hqe=aWe,Wqe=pWe,qqe=w3;function Gqe(e){return Hqe(e,qqe,Wqe)}var Yqe=Gqe,TR=Yqe,Qqe=1,Kqe=Object.prototype,Jqe=Kqe.hasOwnProperty;function Zqe(e,t,r,s,a,i){var o=r&Qqe,l=TR(e),c=l.length,d=TR(t),u=d.length;if(c!=u&&!o)return!1;for(var f=c;f--;){var h=l[f];if(!(o?h in t:Jqe.call(t,h)))return!1}var m=i.get(e),g=i.get(t);if(m&&g)return m==t&&g==e;var x=!0;i.set(e,t),i.set(t,e);for(var y=o;++f<c;){h=l[f];var v=e[h],b=t[h];if(s)var w=o?s(b,v,h,t,e,i):s(v,b,h,e,t,i);if(!(w===void 0?v===b||a(v,b,r,s,i):w)){x=!1;break}y||(y=h=="constructor")}if(x&&!y){var N=e.constructor,j=t.constructor;N!=j&&"constructor"in e&&"constructor"in t&&!(typeof N=="function"&&N instanceof N&&typeof j=="function"&&j instanceof j)&&(x=!1)}return i.delete(e),i.delete(t),x}var Xqe=Zqe,eGe=Lh,tGe=ic,nGe=eGe(tGe,"DataView"),rGe=nGe,sGe=Lh,aGe=ic,iGe=sGe(aGe,"Promise"),oGe=iGe,lGe=Lh,cGe=ic,dGe=lGe(cGe,"Set"),Uoe=dGe,uGe=Lh,fGe=ic,hGe=uGe(fGe,"WeakMap"),mGe=hGe,j_=rGe,N_=tI,S_=oGe,C_=Uoe,k_=mGe,Voe=hd,cg=Qie,AR="[object Map]",pGe="[object Object]",ER="[object Promise]",IR="[object Set]",LR="[object WeakMap]",DR="[object DataView]",gGe=cg(j_),xGe=cg(N_),yGe=cg(S_),vGe=cg(C_),bGe=cg(k_),lf=Voe;(j_&&lf(new j_(new ArrayBuffer(1)))!=DR||N_&&lf(new N_)!=AR||S_&&lf(S_.resolve())!=ER||C_&&lf(new C_)!=IR||k_&&lf(new k_)!=LR)&&(lf=function(e){var t=Voe(e),r=t==pGe?e.constructor:void 0,s=r?cg(r):"";if(s)switch(s){case gGe:return DR;case xGe:return AR;case yGe:return ER;case vGe:return IR;case bGe:return LR}return t});var wGe=lf,qC=Aoe,jGe=Doe,NGe=eWe,SGe=Xqe,$R=wGe,OR=vi,RR=Roe,CGe=zoe,kGe=1,FR="[object Arguments]",zR="[object Array]",Db="[object Object]",MGe=Object.prototype,BR=MGe.hasOwnProperty;function _Ge(e,t,r,s,a,i){var o=OR(e),l=OR(t),c=o?zR:$R(e),d=l?zR:$R(t);c=c==FR?Db:c,d=d==FR?Db:d;var u=c==Db,f=d==Db,h=c==d;if(h&&RR(e)){if(!RR(t))return!1;o=!0,u=!1}if(h&&!u)return i||(i=new qC),o||CGe(e)?jGe(e,t,r,s,a,i):NGe(e,t,c,r,s,a,i);if(!(r&kGe)){var m=u&&BR.call(e,"__wrapped__"),g=f&&BR.call(t,"__wrapped__");if(m||g){var x=m?e.value():e,y=g?t.value():t;return i||(i=new qC),a(x,y,r,s,i)}}return h?(i||(i=new qC),SGe(e,t,r,s,a,i)):!1}var PGe=_Ge,TGe=PGe,UR=md;function Hoe(e,t,r,s,a){return e===t?!0:e==null||t==null||!UR(e)&&!UR(t)?e!==e&&t!==t:TGe(e,t,r,s,Hoe,a)}var vI=Hoe,AGe=Aoe,EGe=vI,IGe=1,LGe=2;function DGe(e,t,r,s){var a=r.length,i=a,o=!s;if(e==null)return!i;for(e=Object(e);a--;){var l=r[a];if(o&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++a<i;){l=r[a];var c=l[0],d=e[c],u=l[1];if(o&&l[2]){if(d===void 0&&!(c in e))return!1}else{var f=new AGe;if(s)var h=s(d,u,c,e,t,f);if(!(h===void 0?EGe(u,d,IGe|LGe,s,f):h))return!1}}return!0}var $Ge=DGe,OGe=Vu;function RGe(e){return e===e&&!OGe(e)}var Woe=RGe,FGe=Woe,zGe=w3;function BGe(e){for(var t=zGe(e),r=t.length;r--;){var s=t[r],a=e[s];t[r]=[s,a,FGe(a)]}return t}var UGe=BGe;function VGe(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}var qoe=VGe,HGe=$Ge,WGe=UGe,qGe=qoe;function GGe(e){var t=WGe(e);return t.length==1&&t[0][2]?qGe(t[0][0],t[0][1]):function(r){return r===e||HGe(r,e,t)}}var YGe=GGe;function QGe(e,t){return e!=null&&t in Object(e)}var KGe=QGe,JGe=eoe,ZGe=gI,XGe=vi,eYe=xI,tYe=yI,nYe=i3;function rYe(e,t,r){t=JGe(t,e);for(var s=-1,a=t.length,i=!1;++s<a;){var o=nYe(t[s]);if(!(i=e!=null&&r(e,o)))break;e=e[o]}return i||++s!=a?i:(a=e==null?0:e.length,!!a&&tYe(a)&&eYe(o,a)&&(XGe(e)||ZGe(e)))}var sYe=rYe,aYe=KGe,iYe=sYe;function oYe(e,t){return e!=null&&iYe(e,t,aYe)}var lYe=oYe,cYe=vI,dYe=toe,uYe=lYe,fYe=ZE,hYe=Woe,mYe=qoe,pYe=i3,gYe=1,xYe=2;function yYe(e,t){return fYe(e)&&hYe(t)?mYe(pYe(e),t):function(r){var s=dYe(r,e);return s===void 0&&s===t?uYe(r,e):cYe(t,s,gYe|xYe)}}var vYe=yYe;function bYe(e){return e}var dg=bYe;function wYe(e){return function(t){return t==null?void 0:t[e]}}var jYe=wYe,NYe=aI;function SYe(e){return function(t){return NYe(t,e)}}var CYe=SYe,kYe=jYe,MYe=CYe,_Ye=ZE,PYe=i3;function TYe(e){return _Ye(e)?kYe(PYe(e)):MYe(e)}var AYe=TYe,EYe=YGe,IYe=vYe,LYe=dg,DYe=vi,$Ye=AYe;function OYe(e){return typeof e=="function"?e:e==null?LYe:typeof e=="object"?DYe(e)?IYe(e[0],e[1]):EYe(e):$Ye(e)}var oc=OYe;function RYe(e,t,r,s){for(var a=e.length,i=r+(s?1:-1);s?i--:++i<a;)if(t(e[i],i,e))return i;return-1}var Goe=RYe;function FYe(e){return e!==e}var zYe=FYe;function BYe(e,t,r){for(var s=r-1,a=e.length;++s<a;)if(e[s]===t)return s;return-1}var UYe=BYe,VYe=Goe,HYe=zYe,WYe=UYe;function qYe(e,t,r){return t===t?WYe(e,t,r):VYe(e,HYe,r)}var GYe=qYe,YYe=GYe;function QYe(e,t){var r=e==null?0:e.length;return!!r&&YYe(e,t,0)>-1}var KYe=QYe;function JYe(e,t,r){for(var s=-1,a=e==null?0:e.length;++s<a;)if(r(t,e[s]))return!0;return!1}var ZYe=JYe;function XYe(){}var eQe=XYe,GC=Uoe,tQe=eQe,nQe=pI,rQe=1/0,sQe=GC&&1/nQe(new GC([,-0]))[1]==rQe?function(e){return new GC(e)}:tQe,aQe=sQe,iQe=Eoe,oQe=KYe,lQe=ZYe,cQe=Loe,dQe=aQe,uQe=pI,fQe=200;function hQe(e,t,r){var s=-1,a=oQe,i=e.length,o=!0,l=[],c=l;if(r)o=!1,a=lQe;else if(i>=fQe){var d=t?null:dQe(e);if(d)return uQe(d);o=!1,a=cQe,c=new iQe}else c=t?[]:l;e:for(;++s<i;){var u=e[s],f=t?t(u):u;if(u=r||u!==0?u:0,o&&f===f){for(var h=c.length;h--;)if(c[h]===f)continue e;t&&c.push(f),l.push(u)}else a(c,f,r)||(c!==l&&c.push(f),l.push(u))}return l}var mQe=hQe,pQe=oc,gQe=mQe;function xQe(e,t){return e&&e.length?gQe(e,pQe(t)):[]}var yQe=xQe;const VR=qn(yQe);function Yoe(e,t,r){return t===!0?VR(e,r):tn(t)?VR(e,t):e}function Qp(e){"@babel/helpers - typeof";return Qp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qp(e)}var vQe=["ref"];function HR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function gc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?HR(Object(r),!0).forEach(function(s){j3(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):HR(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function bQe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function WR(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,Koe(s.key),s)}}function wQe(e,t,r){return t&&WR(e.prototype,t),r&&WR(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function jQe(e,t,r){return t=_2(t),NQe(e,Qoe()?Reflect.construct(t,r||[],_2(e).constructor):t.apply(e,r))}function NQe(e,t){if(t&&(Qp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return SQe(e)}function SQe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Qoe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Qoe=function(){return!!e})()}function _2(e){return _2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},_2(e)}function CQe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&M_(e,t)}function M_(e,t){return M_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},M_(e,t)}function j3(e,t,r){return t=Koe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Koe(e){var t=kQe(e,"string");return Qp(t)=="symbol"?t:t+""}function kQe(e,t){if(Qp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(Qp(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function MQe(e,t){if(e==null)return{};var r=_Qe(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function _Qe(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}function PQe(e){return e.value}function TQe(e,t){if(Q.isValidElement(e))return Q.cloneElement(e,t);if(typeof e=="function")return Q.createElement(e,t);t.ref;var r=MQe(t,vQe);return Q.createElement(mI,r)}var qR=1,Zo=function(e){function t(){var r;bQe(this,t);for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return r=jQe(this,t,[].concat(a)),j3(r,"lastBoundingBox",{width:-1,height:-1}),r}return CQe(t,e),wQe(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var s=this.wrapperNode.getBoundingClientRect();return s.height=this.wrapperNode.offsetHeight,s.width=this.wrapperNode.offsetWidth,s}return null}},{key:"updateBBox",value:function(){var s=this.props.onBBoxUpdate,a=this.getBBox();a?(Math.abs(a.width-this.lastBoundingBox.width)>qR||Math.abs(a.height-this.lastBoundingBox.height)>qR)&&(this.lastBoundingBox.width=a.width,this.lastBoundingBox.height=a.height,s&&s(a)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,s&&s(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?gc({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(s){var a=this.props,i=a.layout,o=a.align,l=a.verticalAlign,c=a.margin,d=a.chartWidth,u=a.chartHeight,f,h;if(!s||(s.left===void 0||s.left===null)&&(s.right===void 0||s.right===null))if(o==="center"&&i==="vertical"){var m=this.getBBoxSnapshot();f={left:((d||0)-m.width)/2}}else f=o==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!s||(s.top===void 0||s.top===null)&&(s.bottom===void 0||s.bottom===null))if(l==="middle"){var g=this.getBBoxSnapshot();h={top:((u||0)-g.height)/2}}else h=l==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return gc(gc({},f),h)}},{key:"render",value:function(){var s=this,a=this.props,i=a.content,o=a.width,l=a.height,c=a.wrapperStyle,d=a.payloadUniqBy,u=a.payload,f=gc(gc({position:"absolute",width:o||"auto",height:l||"auto"},this.getDefaultPosition(c)),c);return Q.createElement("div",{className:"recharts-legend-wrapper",style:f,ref:function(m){s.wrapperNode=m}},TQe(i,gc(gc({},this.props),{},{payload:Yoe(u,d,PQe)})))}}],[{key:"getWithHeight",value:function(s,a){var i=gc(gc({},this.defaultProps),s.props),o=i.layout;return o==="vertical"&&it(s.props.height)?{height:s.props.height}:o==="horizontal"?{width:s.props.width||a}:null}}])}(p.PureComponent);j3(Zo,"displayName","Legend");j3(Zo,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var GR=E1,AQe=gI,EQe=vi,YR=GR?GR.isConcatSpreadable:void 0;function IQe(e){return EQe(e)||AQe(e)||!!(YR&&e&&e[YR])}var LQe=IQe,DQe=$oe,$Qe=LQe;function Joe(e,t,r,s,a){var i=-1,o=e.length;for(r||(r=$Qe),a||(a=[]);++i<o;){var l=e[i];t>0&&r(l)?t>1?Joe(l,t-1,r,s,a):DQe(a,l):s||(a[a.length]=l)}return a}var Zoe=Joe;function OQe(e){return function(t,r,s){for(var a=-1,i=Object(t),o=s(t),l=o.length;l--;){var c=o[e?l:++a];if(r(i[c],c,i)===!1)break}return t}}var RQe=OQe,FQe=RQe,zQe=FQe(),BQe=zQe,UQe=BQe,VQe=w3;function HQe(e,t){return e&&UQe(e,t,VQe)}var Xoe=HQe,WQe=D1;function qQe(e,t){return function(r,s){if(r==null)return r;if(!WQe(r))return e(r,s);for(var a=r.length,i=t?a:-1,o=Object(r);(t?i--:++i<a)&&s(o[i],i,o)!==!1;);return r}}var GQe=qQe,YQe=Xoe,QQe=GQe,KQe=QQe(YQe),bI=KQe,JQe=bI,ZQe=D1;function XQe(e,t){var r=-1,s=ZQe(e)?Array(e.length):[];return JQe(e,function(a,i,o){s[++r]=t(a,i,o)}),s}var ele=XQe;function eKe(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}var tKe=eKe,QR=ng;function nKe(e,t){if(e!==t){var r=e!==void 0,s=e===null,a=e===e,i=QR(e),o=t!==void 0,l=t===null,c=t===t,d=QR(t);if(!l&&!d&&!i&&e>t||i&&o&&c&&!l&&!d||s&&o&&c||!r&&c||!a)return 1;if(!s&&!i&&!d&&e<t||d&&r&&a&&!s&&!i||l&&r&&a||!o&&a||!c)return-1}return 0}var rKe=nKe,sKe=rKe;function aKe(e,t,r){for(var s=-1,a=e.criteria,i=t.criteria,o=a.length,l=r.length;++s<o;){var c=sKe(a[s],i[s]);if(c){if(s>=l)return c;var d=r[s];return c*(d=="desc"?-1:1)}}return e.index-t.index}var iKe=aKe,YC=sI,oKe=aI,lKe=oc,cKe=ele,dKe=tKe,uKe=Foe,fKe=iKe,hKe=dg,mKe=vi;function pKe(e,t,r){t.length?t=YC(t,function(i){return mKe(i)?function(o){return oKe(o,i.length===1?i[0]:i)}:i}):t=[hKe];var s=-1;t=YC(t,uKe(lKe));var a=cKe(e,function(i,o,l){var c=YC(t,function(d){return d(i)});return{criteria:c,index:++s,value:i}});return dKe(a,function(i,o){return fKe(i,o,r)})}var gKe=pKe;function xKe(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var yKe=xKe,vKe=yKe,KR=Math.max;function bKe(e,t,r){return t=KR(t===void 0?e.length-1:t,0),function(){for(var s=arguments,a=-1,i=KR(s.length-t,0),o=Array(i);++a<i;)o[a]=s[t+a];a=-1;for(var l=Array(t+1);++a<t;)l[a]=s[a];return l[t]=r(o),vKe(e,this,l)}}var wKe=bKe;function jKe(e){return function(){return e}}var NKe=jKe,SKe=Lh,CKe=function(){try{var e=SKe(Object,"defineProperty");return e({},"",{}),e}catch{}}(),tle=CKe,kKe=NKe,JR=tle,MKe=dg,_Ke=JR?function(e,t){return JR(e,"toString",{configurable:!0,enumerable:!1,value:kKe(t),writable:!0})}:MKe,PKe=_Ke,TKe=800,AKe=16,EKe=Date.now;function IKe(e){var t=0,r=0;return function(){var s=EKe(),a=AKe-(s-r);if(r=s,a>0){if(++t>=TKe)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var LKe=IKe,DKe=PKe,$Ke=LKe,OKe=$Ke(DKe),RKe=OKe,FKe=dg,zKe=wKe,BKe=RKe;function UKe(e,t){return BKe(zKe(e,t,FKe),e+"")}var VKe=UKe,HKe=eI,WKe=D1,qKe=xI,GKe=Vu;function YKe(e,t,r){if(!GKe(r))return!1;var s=typeof t;return(s=="number"?WKe(r)&&qKe(t,r.length):s=="string"&&t in r)?HKe(r[t],e):!1}var N3=YKe,QKe=Zoe,KKe=gKe,JKe=VKe,ZR=N3,ZKe=JKe(function(e,t){if(e==null)return[];var r=t.length;return r>1&&ZR(e,t[0],t[1])?t=[]:r>2&&ZR(t[0],t[1],t[2])&&(t=[t[0]]),KKe(e,QKe(t,1),[])}),XKe=ZKe;const wI=qn(XKe);function nv(e){"@babel/helpers - typeof";return nv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nv(e)}function __(){return __=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},__.apply(this,arguments)}function eJe(e,t){return sJe(e)||rJe(e,t)||nJe(e,t)||tJe()}function tJe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nJe(e,t){if(e){if(typeof e=="string")return XR(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return XR(e,t)}}function XR(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function rJe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s,a,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(s=i.call(r)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function sJe(e){if(Array.isArray(e))return e}function e7(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function QC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?e7(Object(r),!0).forEach(function(s){aJe(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):e7(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function aJe(e,t,r){return t=iJe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function iJe(e){var t=oJe(e,"string");return nv(t)=="symbol"?t:t+""}function oJe(e,t){if(nv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(nv(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function lJe(e){return Array.isArray(e)&&Ds(e[0])&&Ds(e[1])?e.join(" ~ "):e}var cJe=function(t){var r=t.separator,s=r===void 0?" : ":r,a=t.contentStyle,i=a===void 0?{}:a,o=t.itemStyle,l=o===void 0?{}:o,c=t.labelStyle,d=c===void 0?{}:c,u=t.payload,f=t.formatter,h=t.itemSorter,m=t.wrapperClassName,g=t.labelClassName,x=t.label,y=t.labelFormatter,v=t.accessibilityLayer,b=v===void 0?!1:v,w=function(){if(u&&u.length){var T={padding:0,margin:0},I=(h?wI(u,h):u).map(function(L,R){if(L.type==="none")return null;var G=QC({display:"block",paddingTop:4,paddingBottom:4,color:L.color||"#000"},l),$=L.formatter||f||lJe,D=L.value,W=L.name,E=D,F=W;if($&&E!=null&&F!=null){var B=$(D,W,L,R,u);if(Array.isArray(B)){var Z=eJe(B,2);E=Z[0],F=Z[1]}else E=B}return Q.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(R),style:G},Ds(F)?Q.createElement("span",{className:"recharts-tooltip-item-name"},F):null,Ds(F)?Q.createElement("span",{className:"recharts-tooltip-item-separator"},s):null,Q.createElement("span",{className:"recharts-tooltip-item-value"},E),Q.createElement("span",{className:"recharts-tooltip-item-unit"},L.unit||""))});return Q.createElement("ul",{className:"recharts-tooltip-item-list",style:T},I)}return null},N=QC({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),j=QC({margin:0},d),S=!dn(x),C=S?x:"",k=mn("recharts-default-tooltip",m),M=mn("recharts-tooltip-label",g);S&&y&&u!==void 0&&u!==null&&(C=y(x,u));var A=b?{role:"status","aria-live":"assertive"}:{};return Q.createElement("div",__({className:k,style:N},A),Q.createElement("p",{className:M,style:j},Q.isValidElement(C)?C:"".concat(C)),w())};function rv(e){"@babel/helpers - typeof";return rv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rv(e)}function $b(e,t,r){return t=dJe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dJe(e){var t=uJe(e,"string");return rv(t)=="symbol"?t:t+""}function uJe(e,t){if(rv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(rv(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Rg="recharts-tooltip-wrapper",fJe={visibility:"hidden"};function hJe(e){var t=e.coordinate,r=e.translateX,s=e.translateY;return mn(Rg,$b($b($b($b({},"".concat(Rg,"-right"),it(r)&&t&&it(t.x)&&r>=t.x),"".concat(Rg,"-left"),it(r)&&t&&it(t.x)&&r<t.x),"".concat(Rg,"-bottom"),it(s)&&t&&it(t.y)&&s>=t.y),"".concat(Rg,"-top"),it(s)&&t&&it(t.y)&&s<t.y))}function t7(e){var t=e.allowEscapeViewBox,r=e.coordinate,s=e.key,a=e.offsetTopLeft,i=e.position,o=e.reverseDirection,l=e.tooltipDimension,c=e.viewBox,d=e.viewBoxDimension;if(i&&it(i[s]))return i[s];var u=r[s]-l-a,f=r[s]+a;if(t[s])return o[s]?u:f;if(o[s]){var h=u,m=c[s];return h<m?Math.max(f,c[s]):Math.max(u,c[s])}var g=f+l,x=c[s]+d;return g>x?Math.max(u,c[s]):Math.max(f,c[s])}function mJe(e){var t=e.translateX,r=e.translateY,s=e.useTranslate3d;return{transform:s?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function pJe(e){var t=e.allowEscapeViewBox,r=e.coordinate,s=e.offsetTopLeft,a=e.position,i=e.reverseDirection,o=e.tooltipBox,l=e.useTranslate3d,c=e.viewBox,d,u,f;return o.height>0&&o.width>0&&r?(u=t7({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:s,position:a,reverseDirection:i,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),f=t7({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:s,position:a,reverseDirection:i,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),d=mJe({translateX:u,translateY:f,useTranslate3d:l})):d=fJe,{cssProperties:d,cssClasses:hJe({translateX:u,translateY:f,coordinate:r})}}function Kp(e){"@babel/helpers - typeof";return Kp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kp(e)}function n7(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function r7(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?n7(Object(r),!0).forEach(function(s){T_(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n7(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function gJe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xJe(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,rle(s.key),s)}}function yJe(e,t,r){return t&&xJe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function vJe(e,t,r){return t=P2(t),bJe(e,nle()?Reflect.construct(t,r||[],P2(e).constructor):t.apply(e,r))}function bJe(e,t){if(t&&(Kp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return wJe(e)}function wJe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nle(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(nle=function(){return!!e})()}function P2(e){return P2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},P2(e)}function jJe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&P_(e,t)}function P_(e,t){return P_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},P_(e,t)}function T_(e,t,r){return t=rle(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rle(e){var t=NJe(e,"string");return Kp(t)=="symbol"?t:t+""}function NJe(e,t){if(Kp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(Kp(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var s7=1,SJe=function(e){function t(){var r;gJe(this,t);for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return r=vJe(this,t,[].concat(a)),T_(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),T_(r,"handleKeyDown",function(o){if(o.key==="Escape"){var l,c,d,u;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(c=r.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&l!==void 0?l:0,y:(d=(u=r.props.coordinate)===null||u===void 0?void 0:u.y)!==null&&d!==void 0?d:0}})}}),r}return jJe(t,e),yJe(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var s=this.wrapperNode.getBoundingClientRect();(Math.abs(s.width-this.state.lastBoundingBox.width)>s7||Math.abs(s.height-this.state.lastBoundingBox.height)>s7)&&this.setState({lastBoundingBox:{width:s.width,height:s.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var s,a;this.props.active&&this.updateBBox(),this.state.dismissed&&(((s=this.props.coordinate)===null||s===void 0?void 0:s.x)!==this.state.dismissedAtCoordinate.x||((a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var s=this,a=this.props,i=a.active,o=a.allowEscapeViewBox,l=a.animationDuration,c=a.animationEasing,d=a.children,u=a.coordinate,f=a.hasPayload,h=a.isAnimationActive,m=a.offset,g=a.position,x=a.reverseDirection,y=a.useTranslate3d,v=a.viewBox,b=a.wrapperStyle,w=pJe({allowEscapeViewBox:o,coordinate:u,offsetTopLeft:m,position:g,reverseDirection:x,tooltipBox:this.state.lastBoundingBox,useTranslate3d:y,viewBox:v}),N=w.cssClasses,j=w.cssProperties,S=r7(r7({transition:h&&i?"transform ".concat(l,"ms ").concat(c):void 0},j),{},{pointerEvents:"none",visibility:!this.state.dismissed&&i&&f?"visible":"hidden",position:"absolute",top:0,left:0},b);return Q.createElement("div",{tabIndex:-1,className:N,style:S,ref:function(k){s.wrapperNode=k}},d)}}])}(p.PureComponent),CJe=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Dh={isSsr:CJe()};function Jp(e){"@babel/helpers - typeof";return Jp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jp(e)}function a7(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function i7(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?a7(Object(r),!0).forEach(function(s){jI(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a7(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function kJe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function MJe(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,ale(s.key),s)}}function _Je(e,t,r){return t&&MJe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function PJe(e,t,r){return t=T2(t),TJe(e,sle()?Reflect.construct(t,r||[],T2(e).constructor):t.apply(e,r))}function TJe(e,t){if(t&&(Jp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return AJe(e)}function AJe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function sle(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(sle=function(){return!!e})()}function T2(e){return T2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},T2(e)}function EJe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&A_(e,t)}function A_(e,t){return A_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},A_(e,t)}function jI(e,t,r){return t=ale(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ale(e){var t=IJe(e,"string");return Jp(t)=="symbol"?t:t+""}function IJe(e,t){if(Jp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(Jp(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function LJe(e){return e.dataKey}function DJe(e,t){return Q.isValidElement(e)?Q.cloneElement(e,t):typeof e=="function"?Q.createElement(e,t):Q.createElement(cJe,t)}var ha=function(e){function t(){return kJe(this,t),PJe(this,t,arguments)}return EJe(t,e),_Je(t,[{key:"render",value:function(){var s=this,a=this.props,i=a.active,o=a.allowEscapeViewBox,l=a.animationDuration,c=a.animationEasing,d=a.content,u=a.coordinate,f=a.filterNull,h=a.isAnimationActive,m=a.offset,g=a.payload,x=a.payloadUniqBy,y=a.position,v=a.reverseDirection,b=a.useTranslate3d,w=a.viewBox,N=a.wrapperStyle,j=g??[];f&&j.length&&(j=Yoe(g.filter(function(C){return C.value!=null&&(C.hide!==!0||s.props.includeHidden)}),x,LJe));var S=j.length>0;return Q.createElement(SJe,{allowEscapeViewBox:o,animationDuration:l,animationEasing:c,isAnimationActive:h,active:i,coordinate:u,hasPayload:S,offset:m,position:y,reverseDirection:v,useTranslate3d:b,viewBox:w,wrapperStyle:N},DJe(d,i7(i7({},this.props),{},{payload:j})))}}])}(p.PureComponent);jI(ha,"displayName","Tooltip");jI(ha,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Dh.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var $Je=ic,OJe=function(){return $Je.Date.now()},RJe=OJe,FJe=/\s/;function zJe(e){for(var t=e.length;t--&&FJe.test(e.charAt(t)););return t}var BJe=zJe,UJe=BJe,VJe=/^\s+/;function HJe(e){return e&&e.slice(0,UJe(e)+1).replace(VJe,"")}var WJe=HJe,qJe=WJe,o7=Vu,GJe=ng,l7=NaN,YJe=/^[-+]0x[0-9a-f]+$/i,QJe=/^0b[01]+$/i,KJe=/^0o[0-7]+$/i,JJe=parseInt;function ZJe(e){if(typeof e=="number")return e;if(GJe(e))return l7;if(o7(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=o7(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=qJe(e);var r=QJe.test(e);return r||KJe.test(e)?JJe(e.slice(2),r?2:8):YJe.test(e)?l7:+e}var ile=ZJe,XJe=Vu,KC=RJe,c7=ile,eZe="Expected a function",tZe=Math.max,nZe=Math.min;function rZe(e,t,r){var s,a,i,o,l,c,d=0,u=!1,f=!1,h=!0;if(typeof e!="function")throw new TypeError(eZe);t=c7(t)||0,XJe(r)&&(u=!!r.leading,f="maxWait"in r,i=f?tZe(c7(r.maxWait)||0,t):i,h="trailing"in r?!!r.trailing:h);function m(S){var C=s,k=a;return s=a=void 0,d=S,o=e.apply(k,C),o}function g(S){return d=S,l=setTimeout(v,t),u?m(S):o}function x(S){var C=S-c,k=S-d,M=t-C;return f?nZe(M,i-k):M}function y(S){var C=S-c,k=S-d;return c===void 0||C>=t||C<0||f&&k>=i}function v(){var S=KC();if(y(S))return b(S);l=setTimeout(v,x(S))}function b(S){return l=void 0,h&&s?m(S):(s=a=void 0,o)}function w(){l!==void 0&&clearTimeout(l),d=0,s=c=a=l=void 0}function N(){return l===void 0?o:b(KC())}function j(){var S=KC(),C=y(S);if(s=arguments,a=this,c=S,C){if(l===void 0)return g(c);if(f)return clearTimeout(l),l=setTimeout(v,t),m(c)}return l===void 0&&(l=setTimeout(v,t)),o}return j.cancel=w,j.flush=N,j}var sZe=rZe,aZe=sZe,iZe=Vu,oZe="Expected a function";function lZe(e,t,r){var s=!0,a=!0;if(typeof e!="function")throw new TypeError(oZe);return iZe(r)&&(s="leading"in r?!!r.leading:s,a="trailing"in r?!!r.trailing:a),aZe(e,t,{leading:s,maxWait:t,trailing:a})}var cZe=lZe;const ole=qn(cZe);function sv(e){"@babel/helpers - typeof";return sv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sv(e)}function d7(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function Ob(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?d7(Object(r),!0).forEach(function(s){dZe(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d7(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function dZe(e,t,r){return t=uZe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uZe(e){var t=fZe(e,"string");return sv(t)=="symbol"?t:t+""}function fZe(e,t){if(sv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(sv(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function hZe(e,t){return xZe(e)||gZe(e,t)||pZe(e,t)||mZe()}function mZe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pZe(e,t){if(e){if(typeof e=="string")return u7(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u7(e,t)}}function u7(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function gZe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s,a,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(s=i.call(r)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function xZe(e){if(Array.isArray(e))return e}var uf=p.forwardRef(function(e,t){var r=e.aspect,s=e.initialDimension,a=s===void 0?{width:-1,height:-1}:s,i=e.width,o=i===void 0?"100%":i,l=e.height,c=l===void 0?"100%":l,d=e.minWidth,u=d===void 0?0:d,f=e.minHeight,h=e.maxHeight,m=e.children,g=e.debounce,x=g===void 0?0:g,y=e.id,v=e.className,b=e.onResize,w=e.style,N=w===void 0?{}:w,j=p.useRef(null),S=p.useRef();S.current=b,p.useImperativeHandle(t,function(){return Object.defineProperty(j.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),j.current},configurable:!0})});var C=p.useState({containerWidth:a.width,containerHeight:a.height}),k=hZe(C,2),M=k[0],A=k[1],P=p.useCallback(function(I,L){A(function(R){var G=Math.round(I),$=Math.round(L);return R.containerWidth===G&&R.containerHeight===$?R:{containerWidth:G,containerHeight:$}})},[]);p.useEffect(function(){var I=function(W){var E,F=W[0].contentRect,B=F.width,Z=F.height;P(B,Z),(E=S.current)===null||E===void 0||E.call(S,B,Z)};x>0&&(I=ole(I,x,{trailing:!0,leading:!1}));var L=new ResizeObserver(I),R=j.current.getBoundingClientRect(),G=R.width,$=R.height;return P(G,$),L.observe(j.current),function(){L.disconnect()}},[P,x]);var T=p.useMemo(function(){var I=M.containerWidth,L=M.containerHeight;if(I<0||L<0)return null;ol(wf(o)||wf(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,c),ol(!r||r>0,"The aspect(%s) must be greater than zero.",r);var R=wf(o)?I:o,G=wf(c)?L:c;r&&r>0&&(R?G=R/r:G&&(R=G*r),h&&G>h&&(G=h)),ol(R>0||G>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,R,G,o,c,u,f,r);var $=!Array.isArray(m)&&Fc(m.type).endsWith("Chart");return Q.Children.map(m,function(D){return Q.isValidElement(D)?p.cloneElement(D,Ob({width:R,height:G},$?{style:Ob({height:"100%",width:"100%",maxHeight:G,maxWidth:R},D.props.style)}:{})):D})},[r,m,c,h,f,u,M,o]);return Q.createElement("div",{id:y?"".concat(y):void 0,className:mn("recharts-responsive-container",v),style:Ob(Ob({},N),{},{width:o,height:c,minWidth:u,minHeight:f,maxHeight:h}),ref:j},T)}),S3=function(t){return null};S3.displayName="Cell";function av(e){"@babel/helpers - typeof";return av=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},av(e)}function f7(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function E_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?f7(Object(r),!0).forEach(function(s){yZe(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f7(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function yZe(e,t,r){return t=vZe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vZe(e){var t=bZe(e,"string");return av(t)=="symbol"?t:t+""}function bZe(e,t){if(av(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(av(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Qh={widthCache:{},cacheCount:0},wZe=2e3,jZe={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},h7="recharts_measurement_span";function NZe(e){var t=E_({},e);return Object.keys(t).forEach(function(r){t[r]||delete t[r]}),t}var Ox=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Dh.isSsr)return{width:0,height:0};var s=NZe(r),a=JSON.stringify({text:t,copyStyle:s});if(Qh.widthCache[a])return Qh.widthCache[a];try{var i=document.getElementById(h7);i||(i=document.createElement("span"),i.setAttribute("id",h7),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var o=E_(E_({},jZe),s);Object.assign(i.style,o),i.textContent="".concat(t);var l=i.getBoundingClientRect(),c={width:l.width,height:l.height};return Qh.widthCache[a]=c,++Qh.cacheCount>wZe&&(Qh.cacheCount=0,Qh.widthCache={}),c}catch{return{width:0,height:0}}},SZe=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function iv(e){"@babel/helpers - typeof";return iv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},iv(e)}function A2(e,t){return _Ze(e)||MZe(e,t)||kZe(e,t)||CZe()}function CZe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kZe(e,t){if(e){if(typeof e=="string")return m7(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return m7(e,t)}}function m7(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function MZe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s,a,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(s=i.call(r)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function _Ze(e){if(Array.isArray(e))return e}function PZe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p7(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,AZe(s.key),s)}}function TZe(e,t,r){return t&&p7(e.prototype,t),r&&p7(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function AZe(e){var t=EZe(e,"string");return iv(t)=="symbol"?t:t+""}function EZe(e,t){if(iv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(iv(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var g7=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,x7=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,IZe=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,LZe=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,lle={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},DZe=Object.keys(lle),Nm="NaN";function $Ze(e,t){return e*lle[t]}var Rb=function(){function e(t,r){PZe(this,e),this.num=t,this.unit=r,this.num=t,this.unit=r,Number.isNaN(t)&&(this.unit=""),r!==""&&!IZe.test(r)&&(this.num=NaN,this.unit=""),DZe.includes(r)&&(this.num=$Ze(t,r),this.unit="px")}return TZe(e,[{key:"add",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var s,a=(s=LZe.exec(r))!==null&&s!==void 0?s:[],i=A2(a,3),o=i[1],l=i[2];return new e(parseFloat(o),l??"")}}])}();function cle(e){if(e.includes(Nm))return Nm;for(var t=e;t.includes("*")||t.includes("/");){var r,s=(r=g7.exec(t))!==null&&r!==void 0?r:[],a=A2(s,4),i=a[1],o=a[2],l=a[3],c=Rb.parse(i??""),d=Rb.parse(l??""),u=o==="*"?c.multiply(d):c.divide(d);if(u.isNaN())return Nm;t=t.replace(g7,u.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var f,h=(f=x7.exec(t))!==null&&f!==void 0?f:[],m=A2(h,4),g=m[1],x=m[2],y=m[3],v=Rb.parse(g??""),b=Rb.parse(y??""),w=x==="+"?v.add(b):v.subtract(b);if(w.isNaN())return Nm;t=t.replace(x7,w.toString())}return t}var y7=/\(([^()]*)\)/;function OZe(e){for(var t=e;t.includes("(");){var r=y7.exec(t),s=A2(r,2),a=s[1];t=t.replace(y7,cle(a))}return t}function RZe(e){var t=e.replace(/\s+/g,"");return t=OZe(t),t=cle(t),t}function FZe(e){try{return RZe(e)}catch{return Nm}}function JC(e){var t=FZe(e.slice(5,-1));return t===Nm?"":t}var zZe=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],BZe=["dx","dy","angle","className","breakAll"];function I_(){return I_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},I_.apply(this,arguments)}function v7(e,t){if(e==null)return{};var r=UZe(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function UZe(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}function b7(e,t){return qZe(e)||WZe(e,t)||HZe(e,t)||VZe()}function VZe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function HZe(e,t){if(e){if(typeof e=="string")return w7(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return w7(e,t)}}function w7(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function WZe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s,a,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(s=i.call(r)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function qZe(e){if(Array.isArray(e))return e}var dle=/[ \f\n\r\t\v\u2028\u2029]+/,ule=function(t){var r=t.children,s=t.breakAll,a=t.style;try{var i=[];dn(r)||(s?i=r.toString().split(""):i=r.toString().split(dle));var o=i.map(function(c){return{word:c,width:Ox(c,a).width}}),l=s?0:Ox(" ",a).width;return{wordsWithComputedWidth:o,spaceWidth:l}}catch{return null}},GZe=function(t,r,s,a,i){var o=t.maxLines,l=t.children,c=t.style,d=t.breakAll,u=it(o),f=l,h=function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return R.reduce(function(G,$){var D=$.word,W=$.width,E=G[G.length-1];if(E&&(a==null||i||E.width+W+s<Number(a)))E.words.push(D),E.width+=W+s;else{var F={words:[D],width:W};G.push(F)}return G},[])},m=h(r),g=function(R){return R.reduce(function(G,$){return G.width>$.width?G:$})};if(!u)return m;for(var x="",y=function(R){var G=f.slice(0,R),$=ule({breakAll:d,style:c,children:G+x}).wordsWithComputedWidth,D=h($),W=D.length>o||g(D).width>Number(a);return[W,D]},v=0,b=f.length-1,w=0,N;v<=b&&w<=f.length-1;){var j=Math.floor((v+b)/2),S=j-1,C=y(S),k=b7(C,2),M=k[0],A=k[1],P=y(j),T=b7(P,1),I=T[0];if(!M&&!I&&(v=j+1),M&&I&&(b=j-1),!M&&I){N=A;break}w++}return N||m},j7=function(t){var r=dn(t)?[]:t.toString().split(dle);return[{words:r}]},YZe=function(t){var r=t.width,s=t.scaleToFit,a=t.children,i=t.style,o=t.breakAll,l=t.maxLines;if((r||s)&&!Dh.isSsr){var c,d,u=ule({breakAll:o,children:a,style:i});if(u){var f=u.wordsWithComputedWidth,h=u.spaceWidth;c=f,d=h}else return j7(a);return GZe({breakAll:o,children:a,maxLines:l,style:i},c,d,r,s)}return j7(a)},N7="#808080",gh=function(t){var r=t.x,s=r===void 0?0:r,a=t.y,i=a===void 0?0:a,o=t.lineHeight,l=o===void 0?"1em":o,c=t.capHeight,d=c===void 0?"0.71em":c,u=t.scaleToFit,f=u===void 0?!1:u,h=t.textAnchor,m=h===void 0?"start":h,g=t.verticalAnchor,x=g===void 0?"end":g,y=t.fill,v=y===void 0?N7:y,b=v7(t,zZe),w=p.useMemo(function(){return YZe({breakAll:b.breakAll,children:b.children,maxLines:b.maxLines,scaleToFit:f,style:b.style,width:b.width})},[b.breakAll,b.children,b.maxLines,f,b.style,b.width]),N=b.dx,j=b.dy,S=b.angle,C=b.className,k=b.breakAll,M=v7(b,BZe);if(!Ds(s)||!Ds(i))return null;var A=s+(it(N)?N:0),P=i+(it(j)?j:0),T;switch(x){case"start":T=JC("calc(".concat(d,")"));break;case"middle":T=JC("calc(".concat((w.length-1)/2," * -").concat(l," + (").concat(d," / 2))"));break;default:T=JC("calc(".concat(w.length-1," * -").concat(l,")"));break}var I=[];if(f){var L=w[0].width,R=b.width;I.push("scale(".concat((it(R)?R/L:1)/L,")"))}return S&&I.push("rotate(".concat(S,", ").concat(A,", ").concat(P,")")),I.length&&(M.transform=I.join(" ")),Q.createElement("text",I_({},Ht(M,!0),{x:A,y:P,className:mn("recharts-text",C),textAnchor:m,fill:v.includes("url")?N7:v}),w.map(function(G,$){var D=G.words.join(k?"":" ");return Q.createElement("tspan",{x:A,dy:$===0?T:l,key:"".concat(D,"-").concat($)},D)}))};function du(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function QZe(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function NI(e){let t,r,s;e.length!==2?(t=du,r=(l,c)=>du(e(l),c),s=(l,c)=>e(l)-c):(t=e===du||e===QZe?e:KZe,r=e,s=e);function a(l,c,d=0,u=l.length){if(d<u){if(t(c,c)!==0)return u;do{const f=d+u>>>1;r(l[f],c)<0?d=f+1:u=f}while(d<u)}return d}function i(l,c,d=0,u=l.length){if(d<u){if(t(c,c)!==0)return u;do{const f=d+u>>>1;r(l[f],c)<=0?d=f+1:u=f}while(d<u)}return d}function o(l,c,d=0,u=l.length){const f=a(l,c,d,u-1);return f>d&&s(l[f-1],c)>-s(l[f],c)?f-1:f}return{left:a,center:o,right:i}}function KZe(){return 0}function fle(e){return e===null?NaN:+e}function*JZe(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const ZZe=NI(du),$1=ZZe.right;NI(fle).center;class S7 extends Map{constructor(t,r=tXe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[s,a]of t)this.set(s,a)}get(t){return super.get(C7(this,t))}has(t){return super.has(C7(this,t))}set(t,r){return super.set(XZe(this,t),r)}delete(t){return super.delete(eXe(this,t))}}function C7({_intern:e,_key:t},r){const s=t(r);return e.has(s)?e.get(s):r}function XZe({_intern:e,_key:t},r){const s=t(r);return e.has(s)?e.get(s):(e.set(s,r),r)}function eXe({_intern:e,_key:t},r){const s=t(r);return e.has(s)&&(r=e.get(s),e.delete(s)),r}function tXe(e){return e!==null&&typeof e=="object"?e.valueOf():e}function nXe(e=du){if(e===du)return hle;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const s=e(t,r);return s||s===0?s:(e(r,r)===0)-(e(t,t)===0)}}function hle(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const rXe=Math.sqrt(50),sXe=Math.sqrt(10),aXe=Math.sqrt(2);function E2(e,t,r){const s=(t-e)/Math.max(0,r),a=Math.floor(Math.log10(s)),i=s/Math.pow(10,a),o=i>=rXe?10:i>=sXe?5:i>=aXe?2:1;let l,c,d;return a<0?(d=Math.pow(10,-a)/o,l=Math.round(e*d),c=Math.round(t*d),l/d<e&&++l,c/d>t&&--c,d=-d):(d=Math.pow(10,a)*o,l=Math.round(e/d),c=Math.round(t/d),l*d<e&&++l,c*d>t&&--c),c<l&&.5<=r&&r<2?E2(e,t,r*2):[l,c,d]}function L_(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const s=t<e,[a,i,o]=s?E2(t,e,r):E2(e,t,r);if(!(i>=a))return[];const l=i-a+1,c=new Array(l);if(s)if(o<0)for(let d=0;d<l;++d)c[d]=(i-d)/-o;else for(let d=0;d<l;++d)c[d]=(i-d)*o;else if(o<0)for(let d=0;d<l;++d)c[d]=(a+d)/-o;else for(let d=0;d<l;++d)c[d]=(a+d)*o;return c}function D_(e,t,r){return t=+t,e=+e,r=+r,E2(e,t,r)[2]}function $_(e,t,r){t=+t,e=+e,r=+r;const s=t<e,a=s?D_(t,e,r):D_(e,t,r);return(s?-1:1)*(a<0?1/-a:a)}function k7(e,t){let r;for(const s of e)s!=null&&(r<s||r===void 0&&s>=s)&&(r=s);return r}function M7(e,t){let r;for(const s of e)s!=null&&(r>s||r===void 0&&s>=s)&&(r=s);return r}function mle(e,t,r=0,s=1/0,a){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),s=Math.floor(Math.min(e.length-1,s)),!(r<=t&&t<=s))return e;for(a=a===void 0?hle:nXe(a);s>r;){if(s-r>600){const c=s-r+1,d=t-r+1,u=Math.log(c),f=.5*Math.exp(2*u/3),h=.5*Math.sqrt(u*f*(c-f)/c)*(d-c/2<0?-1:1),m=Math.max(r,Math.floor(t-d*f/c+h)),g=Math.min(s,Math.floor(t+(c-d)*f/c+h));mle(e,t,m,g,a)}const i=e[t];let o=r,l=s;for(Fg(e,r,t),a(e[s],i)>0&&Fg(e,r,s);o<l;){for(Fg(e,o,l),++o,--l;a(e[o],i)<0;)++o;for(;a(e[l],i)>0;)--l}a(e[r],i)===0?Fg(e,r,l):(++l,Fg(e,l,s)),l<=t&&(r=l+1),t<=l&&(s=l-1)}return e}function Fg(e,t,r){const s=e[t];e[t]=e[r],e[r]=s}function iXe(e,t,r){if(e=Float64Array.from(JZe(e)),!(!(s=e.length)||isNaN(t=+t))){if(t<=0||s<2)return M7(e);if(t>=1)return k7(e);var s,a=(s-1)*t,i=Math.floor(a),o=k7(mle(e,i).subarray(0,i+1)),l=M7(e.subarray(i+1));return o+(l-o)*(a-i)}}function oXe(e,t,r=fle){if(!(!(s=e.length)||isNaN(t=+t))){if(t<=0||s<2)return+r(e[0],0,e);if(t>=1)return+r(e[s-1],s-1,e);var s,a=(s-1)*t,i=Math.floor(a),o=+r(e[i],i,e),l=+r(e[i+1],i+1,e);return o+(l-o)*(a-i)}}function lXe(e,t,r){e=+e,t=+t,r=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+r;for(var s=-1,a=Math.max(0,Math.ceil((t-e)/r))|0,i=new Array(a);++s<a;)i[s]=e+s*r;return i}function Ao(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function pd(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const O_=Symbol("implicit");function SI(){var e=new S7,t=[],r=[],s=O_;function a(i){let o=e.get(i);if(o===void 0){if(s!==O_)return s;e.set(i,o=t.push(i)-1)}return r[o%r.length]}return a.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new S7;for(const o of i)e.has(o)||e.set(o,t.push(o)-1);return a},a.range=function(i){return arguments.length?(r=Array.from(i),a):r.slice()},a.unknown=function(i){return arguments.length?(s=i,a):s},a.copy=function(){return SI(t,r).unknown(s)},Ao.apply(a,arguments),a}function ov(){var e=SI().unknown(void 0),t=e.domain,r=e.range,s=0,a=1,i,o,l=!1,c=0,d=0,u=.5;delete e.unknown;function f(){var h=t().length,m=a<s,g=m?a:s,x=m?s:a;i=(x-g)/Math.max(1,h-c+d*2),l&&(i=Math.floor(i)),g+=(x-g-i*(h-c))*u,o=i*(1-c),l&&(g=Math.round(g),o=Math.round(o));var y=lXe(h).map(function(v){return g+i*v});return r(m?y.reverse():y)}return e.domain=function(h){return arguments.length?(t(h),f()):t()},e.range=function(h){return arguments.length?([s,a]=h,s=+s,a=+a,f()):[s,a]},e.rangeRound=function(h){return[s,a]=h,s=+s,a=+a,l=!0,f()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(h){return arguments.length?(l=!!h,f()):l},e.padding=function(h){return arguments.length?(c=Math.min(1,d=+h),f()):c},e.paddingInner=function(h){return arguments.length?(c=Math.min(1,h),f()):c},e.paddingOuter=function(h){return arguments.length?(d=+h,f()):d},e.align=function(h){return arguments.length?(u=Math.max(0,Math.min(1,h)),f()):u},e.copy=function(){return ov(t(),[s,a]).round(l).paddingInner(c).paddingOuter(d).align(u)},Ao.apply(f(),arguments)}function ple(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return ple(t())},e}function Rx(){return ple(ov.apply(null,arguments).paddingInner(1))}function CI(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function gle(e,t){var r=Object.create(e.prototype);for(var s in t)r[s]=t[s];return r}function O1(){}var lv=.7,I2=1/lv,Jm="\\s*([+-]?\\d+)\\s*",cv="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ql="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",cXe=/^#([0-9a-f]{3,8})$/,dXe=new RegExp(`^rgb\\(${Jm},${Jm},${Jm}\\)$`),uXe=new RegExp(`^rgb\\(${ql},${ql},${ql}\\)$`),fXe=new RegExp(`^rgba\\(${Jm},${Jm},${Jm},${cv}\\)$`),hXe=new RegExp(`^rgba\\(${ql},${ql},${ql},${cv}\\)$`),mXe=new RegExp(`^hsl\\(${cv},${ql},${ql}\\)$`),pXe=new RegExp(`^hsla\\(${cv},${ql},${ql},${cv}\\)$`),_7={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};CI(O1,dv,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:P7,formatHex:P7,formatHex8:gXe,formatHsl:xXe,formatRgb:T7,toString:T7});function P7(){return this.rgb().formatHex()}function gXe(){return this.rgb().formatHex8()}function xXe(){return xle(this).formatHsl()}function T7(){return this.rgb().formatRgb()}function dv(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=cXe.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?A7(t):r===3?new li(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?Fb(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?Fb(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=dXe.exec(e))?new li(t[1],t[2],t[3],1):(t=uXe.exec(e))?new li(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=fXe.exec(e))?Fb(t[1],t[2],t[3],t[4]):(t=hXe.exec(e))?Fb(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=mXe.exec(e))?L7(t[1],t[2]/100,t[3]/100,1):(t=pXe.exec(e))?L7(t[1],t[2]/100,t[3]/100,t[4]):_7.hasOwnProperty(e)?A7(_7[e]):e==="transparent"?new li(NaN,NaN,NaN,0):null}function A7(e){return new li(e>>16&255,e>>8&255,e&255,1)}function Fb(e,t,r,s){return s<=0&&(e=t=r=NaN),new li(e,t,r,s)}function yXe(e){return e instanceof O1||(e=dv(e)),e?(e=e.rgb(),new li(e.r,e.g,e.b,e.opacity)):new li}function R_(e,t,r,s){return arguments.length===1?yXe(e):new li(e,t,r,s??1)}function li(e,t,r,s){this.r=+e,this.g=+t,this.b=+r,this.opacity=+s}CI(li,R_,gle(O1,{brighter(e){return e=e==null?I2:Math.pow(I2,e),new li(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?lv:Math.pow(lv,e),new li(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new li(Hf(this.r),Hf(this.g),Hf(this.b),L2(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:E7,formatHex:E7,formatHex8:vXe,formatRgb:I7,toString:I7}));function E7(){return`#${jf(this.r)}${jf(this.g)}${jf(this.b)}`}function vXe(){return`#${jf(this.r)}${jf(this.g)}${jf(this.b)}${jf((isNaN(this.opacity)?1:this.opacity)*255)}`}function I7(){const e=L2(this.opacity);return`${e===1?"rgb(":"rgba("}${Hf(this.r)}, ${Hf(this.g)}, ${Hf(this.b)}${e===1?")":`, ${e})`}`}function L2(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Hf(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function jf(e){return e=Hf(e),(e<16?"0":"")+e.toString(16)}function L7(e,t,r,s){return s<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Xo(e,t,r,s)}function xle(e){if(e instanceof Xo)return new Xo(e.h,e.s,e.l,e.opacity);if(e instanceof O1||(e=dv(e)),!e)return new Xo;if(e instanceof Xo)return e;e=e.rgb();var t=e.r/255,r=e.g/255,s=e.b/255,a=Math.min(t,r,s),i=Math.max(t,r,s),o=NaN,l=i-a,c=(i+a)/2;return l?(t===i?o=(r-s)/l+(r<s)*6:r===i?o=(s-t)/l+2:o=(t-r)/l+4,l/=c<.5?i+a:2-i-a,o*=60):l=c>0&&c<1?0:o,new Xo(o,l,c,e.opacity)}function bXe(e,t,r,s){return arguments.length===1?xle(e):new Xo(e,t,r,s??1)}function Xo(e,t,r,s){this.h=+e,this.s=+t,this.l=+r,this.opacity=+s}CI(Xo,bXe,gle(O1,{brighter(e){return e=e==null?I2:Math.pow(I2,e),new Xo(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?lv:Math.pow(lv,e),new Xo(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,s=r+(r<.5?r:1-r)*t,a=2*r-s;return new li(ZC(e>=240?e-240:e+120,a,s),ZC(e,a,s),ZC(e<120?e+240:e-120,a,s),this.opacity)},clamp(){return new Xo(D7(this.h),zb(this.s),zb(this.l),L2(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=L2(this.opacity);return`${e===1?"hsl(":"hsla("}${D7(this.h)}, ${zb(this.s)*100}%, ${zb(this.l)*100}%${e===1?")":`, ${e})`}`}}));function D7(e){return e=(e||0)%360,e<0?e+360:e}function zb(e){return Math.max(0,Math.min(1,e||0))}function ZC(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const kI=e=>()=>e;function wXe(e,t){return function(r){return e+r*t}}function jXe(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(s){return Math.pow(e+s*t,r)}}function NXe(e){return(e=+e)==1?yle:function(t,r){return r-t?jXe(t,r,e):kI(isNaN(t)?r:t)}}function yle(e,t){var r=t-e;return r?wXe(e,r):kI(isNaN(e)?t:e)}const $7=function e(t){var r=NXe(t);function s(a,i){var o=r((a=R_(a)).r,(i=R_(i)).r),l=r(a.g,i.g),c=r(a.b,i.b),d=yle(a.opacity,i.opacity);return function(u){return a.r=o(u),a.g=l(u),a.b=c(u),a.opacity=d(u),a+""}}return s.gamma=e,s}(1);function SXe(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,s=t.slice(),a;return function(i){for(a=0;a<r;++a)s[a]=e[a]*(1-i)+t[a]*i;return s}}function CXe(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function kXe(e,t){var r=t?t.length:0,s=e?Math.min(r,e.length):0,a=new Array(s),i=new Array(r),o;for(o=0;o<s;++o)a[o]=ug(e[o],t[o]);for(;o<r;++o)i[o]=t[o];return function(l){for(o=0;o<s;++o)i[o]=a[o](l);return i}}function MXe(e,t){var r=new Date;return e=+e,t=+t,function(s){return r.setTime(e*(1-s)+t*s),r}}function D2(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function _Xe(e,t){var r={},s={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?r[a]=ug(e[a],t[a]):s[a]=t[a];return function(i){for(a in r)s[a]=r[a](i);return s}}var F_=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,XC=new RegExp(F_.source,"g");function PXe(e){return function(){return e}}function TXe(e){return function(t){return e(t)+""}}function AXe(e,t){var r=F_.lastIndex=XC.lastIndex=0,s,a,i,o=-1,l=[],c=[];for(e=e+"",t=t+"";(s=F_.exec(e))&&(a=XC.exec(t));)(i=a.index)>r&&(i=t.slice(r,i),l[o]?l[o]+=i:l[++o]=i),(s=s[0])===(a=a[0])?l[o]?l[o]+=a:l[++o]=a:(l[++o]=null,c.push({i:o,x:D2(s,a)})),r=XC.lastIndex;return r<t.length&&(i=t.slice(r),l[o]?l[o]+=i:l[++o]=i),l.length<2?c[0]?TXe(c[0].x):PXe(t):(t=c.length,function(d){for(var u=0,f;u<t;++u)l[(f=c[u]).i]=f.x(d);return l.join("")})}function ug(e,t){var r=typeof t,s;return t==null||r==="boolean"?kI(t):(r==="number"?D2:r==="string"?(s=dv(t))?(t=s,$7):AXe:t instanceof dv?$7:t instanceof Date?MXe:CXe(t)?SXe:Array.isArray(t)?kXe:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?_Xe:D2)(e,t)}function MI(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function EXe(e,t){t===void 0&&(t=e,e=ug);for(var r=0,s=t.length-1,a=t[0],i=new Array(s<0?0:s);r<s;)i[r]=e(a,a=t[++r]);return function(o){var l=Math.max(0,Math.min(s-1,Math.floor(o*=s)));return i[l](o-l)}}function IXe(e){return function(){return e}}function $2(e){return+e}var O7=[0,1];function Va(e){return e}function z_(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:IXe(isNaN(t)?NaN:.5)}function LXe(e,t){var r;return e>t&&(r=e,e=t,t=r),function(s){return Math.max(e,Math.min(t,s))}}function DXe(e,t,r){var s=e[0],a=e[1],i=t[0],o=t[1];return a<s?(s=z_(a,s),i=r(o,i)):(s=z_(s,a),i=r(i,o)),function(l){return i(s(l))}}function $Xe(e,t,r){var s=Math.min(e.length,t.length)-1,a=new Array(s),i=new Array(s),o=-1;for(e[s]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<s;)a[o]=z_(e[o],e[o+1]),i[o]=r(t[o],t[o+1]);return function(l){var c=$1(e,l,1,s)-1;return i[c](a[c](l))}}function R1(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function C3(){var e=O7,t=O7,r=ug,s,a,i,o=Va,l,c,d;function u(){var h=Math.min(e.length,t.length);return o!==Va&&(o=LXe(e[0],e[h-1])),l=h>2?$Xe:DXe,c=d=null,f}function f(h){return h==null||isNaN(h=+h)?i:(c||(c=l(e.map(s),t,r)))(s(o(h)))}return f.invert=function(h){return o(a((d||(d=l(t,e.map(s),D2)))(h)))},f.domain=function(h){return arguments.length?(e=Array.from(h,$2),u()):e.slice()},f.range=function(h){return arguments.length?(t=Array.from(h),u()):t.slice()},f.rangeRound=function(h){return t=Array.from(h),r=MI,u()},f.clamp=function(h){return arguments.length?(o=h?!0:Va,u()):o!==Va},f.interpolate=function(h){return arguments.length?(r=h,u()):r},f.unknown=function(h){return arguments.length?(i=h,f):i},function(h,m){return s=h,a=m,u()}}function _I(){return C3()(Va,Va)}function OXe(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function O2(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,s=e.slice(0,r);return[s.length>1?s[0]+s.slice(2):s,+e.slice(r+1)]}function Zp(e){return e=O2(Math.abs(e)),e?e[1]:NaN}function RXe(e,t){return function(r,s){for(var a=r.length,i=[],o=0,l=e[0],c=0;a>0&&l>0&&(c+l+1>s&&(l=Math.max(1,s-c)),i.push(r.substring(a-=l,a+l)),!((c+=l+1)>s));)l=e[o=(o+1)%e.length];return i.reverse().join(t)}}function FXe(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var zXe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function uv(e){if(!(t=zXe.exec(e)))throw new Error("invalid format: "+e);var t;return new PI({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}uv.prototype=PI.prototype;function PI(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}PI.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function BXe(e){e:for(var t=e.length,r=1,s=-1,a;r<t;++r)switch(e[r]){case".":s=a=r;break;case"0":s===0&&(s=r),a=r;break;default:if(!+e[r])break e;s>0&&(s=0);break}return s>0?e.slice(0,s)+e.slice(a+1):e}var vle;function UXe(e,t){var r=O2(e,t);if(!r)return e+"";var s=r[0],a=r[1],i=a-(vle=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,o=s.length;return i===o?s:i>o?s+new Array(i-o+1).join("0"):i>0?s.slice(0,i)+"."+s.slice(i):"0."+new Array(1-i).join("0")+O2(e,Math.max(0,t+i-1))[0]}function R7(e,t){var r=O2(e,t);if(!r)return e+"";var s=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+s:s.length>a+1?s.slice(0,a+1)+"."+s.slice(a+1):s+new Array(a-s.length+2).join("0")}const F7={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:OXe,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>R7(e*100,t),r:R7,s:UXe,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function z7(e){return e}var B7=Array.prototype.map,U7=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function VXe(e){var t=e.grouping===void 0||e.thousands===void 0?z7:RXe(B7.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",s=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?z7:FXe(B7.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function d(f){f=uv(f);var h=f.fill,m=f.align,g=f.sign,x=f.symbol,y=f.zero,v=f.width,b=f.comma,w=f.precision,N=f.trim,j=f.type;j==="n"?(b=!0,j="g"):F7[j]||(w===void 0&&(w=12),N=!0,j="g"),(y||h==="0"&&m==="=")&&(y=!0,h="0",m="=");var S=x==="$"?r:x==="#"&&/[boxX]/.test(j)?"0"+j.toLowerCase():"",C=x==="$"?s:/[%p]/.test(j)?o:"",k=F7[j],M=/[defgprs%]/.test(j);w=w===void 0?6:/[gprs]/.test(j)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function A(P){var T=S,I=C,L,R,G;if(j==="c")I=k(P)+I,P="";else{P=+P;var $=P<0||1/P<0;if(P=isNaN(P)?c:k(Math.abs(P),w),N&&(P=BXe(P)),$&&+P==0&&g!=="+"&&($=!1),T=($?g==="("?g:l:g==="-"||g==="("?"":g)+T,I=(j==="s"?U7[8+vle/3]:"")+I+($&&g==="("?")":""),M){for(L=-1,R=P.length;++L<R;)if(G=P.charCodeAt(L),48>G||G>57){I=(G===46?a+P.slice(L+1):P.slice(L))+I,P=P.slice(0,L);break}}}b&&!y&&(P=t(P,1/0));var D=T.length+P.length+I.length,W=D<v?new Array(v-D+1).join(h):"";switch(b&&y&&(P=t(W+P,W.length?v-I.length:1/0),W=""),m){case"<":P=T+P+I+W;break;case"=":P=T+W+P+I;break;case"^":P=W.slice(0,D=W.length>>1)+T+P+I+W.slice(D);break;default:P=W+T+P+I;break}return i(P)}return A.toString=function(){return f+""},A}function u(f,h){var m=d((f=uv(f),f.type="f",f)),g=Math.max(-8,Math.min(8,Math.floor(Zp(h)/3)))*3,x=Math.pow(10,-g),y=U7[8+g/3];return function(v){return m(x*v)+y}}return{format:d,formatPrefix:u}}var Bb,TI,ble;HXe({thousands:",",grouping:[3],currency:["$",""]});function HXe(e){return Bb=VXe(e),TI=Bb.format,ble=Bb.formatPrefix,Bb}function WXe(e){return Math.max(0,-Zp(Math.abs(e)))}function qXe(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Zp(t)/3)))*3-Zp(Math.abs(e)))}function GXe(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Zp(t)-Zp(e))+1}function wle(e,t,r,s){var a=$_(e,t,r),i;switch(s=uv(s??",f"),s.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return s.precision==null&&!isNaN(i=qXe(a,o))&&(s.precision=i),ble(s,o)}case"":case"e":case"g":case"p":case"r":{s.precision==null&&!isNaN(i=GXe(a,Math.max(Math.abs(e),Math.abs(t))))&&(s.precision=i-(s.type==="e"));break}case"f":case"%":{s.precision==null&&!isNaN(i=WXe(a))&&(s.precision=i-(s.type==="%")*2);break}}return TI(s)}function Hu(e){var t=e.domain;return e.ticks=function(r){var s=t();return L_(s[0],s[s.length-1],r??10)},e.tickFormat=function(r,s){var a=t();return wle(a[0],a[a.length-1],r??10,s)},e.nice=function(r){r==null&&(r=10);var s=t(),a=0,i=s.length-1,o=s[a],l=s[i],c,d,u=10;for(l<o&&(d=o,o=l,l=d,d=a,a=i,i=d);u-- >0;){if(d=D_(o,l,r),d===c)return s[a]=o,s[i]=l,t(s);if(d>0)o=Math.floor(o/d)*d,l=Math.ceil(l/d)*d;else if(d<0)o=Math.ceil(o*d)/d,l=Math.floor(l*d)/d;else break;c=d}return e},e}function R2(){var e=_I();return e.copy=function(){return R1(e,R2())},Ao.apply(e,arguments),Hu(e)}function jle(e){var t;function r(s){return s==null||isNaN(s=+s)?t:s}return r.invert=r,r.domain=r.range=function(s){return arguments.length?(e=Array.from(s,$2),r):e.slice()},r.unknown=function(s){return arguments.length?(t=s,r):t},r.copy=function(){return jle(e).unknown(t)},e=arguments.length?Array.from(e,$2):[0,1],Hu(r)}function Nle(e,t){e=e.slice();var r=0,s=e.length-1,a=e[r],i=e[s],o;return i<a&&(o=r,r=s,s=o,o=a,a=i,i=o),e[r]=t.floor(a),e[s]=t.ceil(i),e}function V7(e){return Math.log(e)}function H7(e){return Math.exp(e)}function YXe(e){return-Math.log(-e)}function QXe(e){return-Math.exp(-e)}function KXe(e){return isFinite(e)?+("1e"+e):e<0?0:e}function JXe(e){return e===10?KXe:e===Math.E?Math.exp:t=>Math.pow(e,t)}function ZXe(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function W7(e){return(t,r)=>-e(-t,r)}function AI(e){const t=e(V7,H7),r=t.domain;let s=10,a,i;function o(){return a=ZXe(s),i=JXe(s),r()[0]<0?(a=W7(a),i=W7(i),e(YXe,QXe)):e(V7,H7),t}return t.base=function(l){return arguments.length?(s=+l,o()):s},t.domain=function(l){return arguments.length?(r(l),o()):r()},t.ticks=l=>{const c=r();let d=c[0],u=c[c.length-1];const f=u<d;f&&([d,u]=[u,d]);let h=a(d),m=a(u),g,x;const y=l==null?10:+l;let v=[];if(!(s%1)&&m-h<y){if(h=Math.floor(h),m=Math.ceil(m),d>0){for(;h<=m;++h)for(g=1;g<s;++g)if(x=h<0?g/i(-h):g*i(h),!(x<d)){if(x>u)break;v.push(x)}}else for(;h<=m;++h)for(g=s-1;g>=1;--g)if(x=h>0?g/i(-h):g*i(h),!(x<d)){if(x>u)break;v.push(x)}v.length*2<y&&(v=L_(d,u,y))}else v=L_(h,m,Math.min(m-h,y)).map(i);return f?v.reverse():v},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=s===10?"s":","),typeof c!="function"&&(!(s%1)&&(c=uv(c)).precision==null&&(c.trim=!0),c=TI(c)),l===1/0)return c;const d=Math.max(1,s*l/t.ticks().length);return u=>{let f=u/i(Math.round(a(u)));return f*s<s-.5&&(f*=s),f<=d?c(u):""}},t.nice=()=>r(Nle(r(),{floor:l=>i(Math.floor(a(l))),ceil:l=>i(Math.ceil(a(l)))})),t}function Sle(){const e=AI(C3()).domain([1,10]);return e.copy=()=>R1(e,Sle()).base(e.base()),Ao.apply(e,arguments),e}function q7(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function G7(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function EI(e){var t=1,r=e(q7(t),G7(t));return r.constant=function(s){return arguments.length?e(q7(t=+s),G7(t)):t},Hu(r)}function Cle(){var e=EI(C3());return e.copy=function(){return R1(e,Cle()).constant(e.constant())},Ao.apply(e,arguments)}function Y7(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function XXe(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function eet(e){return e<0?-e*e:e*e}function II(e){var t=e(Va,Va),r=1;function s(){return r===1?e(Va,Va):r===.5?e(XXe,eet):e(Y7(r),Y7(1/r))}return t.exponent=function(a){return arguments.length?(r=+a,s()):r},Hu(t)}function LI(){var e=II(C3());return e.copy=function(){return R1(e,LI()).exponent(e.exponent())},Ao.apply(e,arguments),e}function tet(){return LI.apply(null,arguments).exponent(.5)}function Q7(e){return Math.sign(e)*e*e}function net(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function kle(){var e=_I(),t=[0,1],r=!1,s;function a(i){var o=net(e(i));return isNaN(o)?s:r?Math.round(o):o}return a.invert=function(i){return e.invert(Q7(i))},a.domain=function(i){return arguments.length?(e.domain(i),a):e.domain()},a.range=function(i){return arguments.length?(e.range((t=Array.from(i,$2)).map(Q7)),a):t.slice()},a.rangeRound=function(i){return a.range(i).round(!0)},a.round=function(i){return arguments.length?(r=!!i,a):r},a.clamp=function(i){return arguments.length?(e.clamp(i),a):e.clamp()},a.unknown=function(i){return arguments.length?(s=i,a):s},a.copy=function(){return kle(e.domain(),t).round(r).clamp(e.clamp()).unknown(s)},Ao.apply(a,arguments),Hu(a)}function Mle(){var e=[],t=[],r=[],s;function a(){var o=0,l=Math.max(1,t.length);for(r=new Array(l-1);++o<l;)r[o-1]=oXe(e,o/l);return i}function i(o){return o==null||isNaN(o=+o)?s:t[$1(r,o)]}return i.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?r[l-1]:e[0],l<r.length?r[l]:e[e.length-1]]},i.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(du),a()},i.range=function(o){return arguments.length?(t=Array.from(o),a()):t.slice()},i.unknown=function(o){return arguments.length?(s=o,i):s},i.quantiles=function(){return r.slice()},i.copy=function(){return Mle().domain(e).range(t).unknown(s)},Ao.apply(i,arguments)}function _le(){var e=0,t=1,r=1,s=[.5],a=[0,1],i;function o(c){return c!=null&&c<=c?a[$1(s,c,0,r)]:i}function l(){var c=-1;for(s=new Array(r);++c<r;)s[c]=((c+1)*t-(c-r)*e)/(r+1);return o}return o.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},o.range=function(c){return arguments.length?(r=(a=Array.from(c)).length-1,l()):a.slice()},o.invertExtent=function(c){var d=a.indexOf(c);return d<0?[NaN,NaN]:d<1?[e,s[0]]:d>=r?[s[r-1],t]:[s[d-1],s[d]]},o.unknown=function(c){return arguments.length&&(i=c),o},o.thresholds=function(){return s.slice()},o.copy=function(){return _le().domain([e,t]).range(a).unknown(i)},Ao.apply(Hu(o),arguments)}function Ple(){var e=[.5],t=[0,1],r,s=1;function a(i){return i!=null&&i<=i?t[$1(e,i,0,s)]:r}return a.domain=function(i){return arguments.length?(e=Array.from(i),s=Math.min(e.length,t.length-1),a):e.slice()},a.range=function(i){return arguments.length?(t=Array.from(i),s=Math.min(e.length,t.length-1),a):t.slice()},a.invertExtent=function(i){var o=t.indexOf(i);return[e[o-1],e[o]]},a.unknown=function(i){return arguments.length?(r=i,a):r},a.copy=function(){return Ple().domain(e).range(t).unknown(r)},Ao.apply(a,arguments)}const ek=new Date,tk=new Date;function Os(e,t,r,s){function a(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return a.floor=i=>(e(i=new Date(+i)),i),a.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),a.round=i=>{const o=a(i),l=a.ceil(i);return i-o<l-i?o:l},a.offset=(i,o)=>(t(i=new Date(+i),o==null?1:Math.floor(o)),i),a.range=(i,o,l)=>{const c=[];if(i=a.ceil(i),l=l==null?1:Math.floor(l),!(i<o)||!(l>0))return c;let d;do c.push(d=new Date(+i)),t(i,l),e(i);while(d<i&&i<o);return c},a.filter=i=>Os(o=>{if(o>=o)for(;e(o),!i(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!i(o););else for(;--l>=0;)for(;t(o,1),!i(o););}),r&&(a.count=(i,o)=>(ek.setTime(+i),tk.setTime(+o),e(ek),e(tk),Math.floor(r(ek,tk))),a.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?a.filter(s?o=>s(o)%i===0:o=>a.count(0,o)%i===0):a)),a}const F2=Os(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);F2.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Os(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):F2);F2.range;const Ec=1e3,go=Ec*60,Ic=go*60,sd=Ic*24,DI=sd*7,K7=sd*30,nk=sd*365,Nf=Os(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Ec)},(e,t)=>(t-e)/Ec,e=>e.getUTCSeconds());Nf.range;const $I=Os(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ec)},(e,t)=>{e.setTime(+e+t*go)},(e,t)=>(t-e)/go,e=>e.getMinutes());$I.range;const OI=Os(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*go)},(e,t)=>(t-e)/go,e=>e.getUTCMinutes());OI.range;const RI=Os(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ec-e.getMinutes()*go)},(e,t)=>{e.setTime(+e+t*Ic)},(e,t)=>(t-e)/Ic,e=>e.getHours());RI.range;const FI=Os(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Ic)},(e,t)=>(t-e)/Ic,e=>e.getUTCHours());FI.range;const F1=Os(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*go)/sd,e=>e.getDate()-1);F1.range;const k3=Os(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/sd,e=>e.getUTCDate()-1);k3.range;const Tle=Os(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/sd,e=>Math.floor(e/sd));Tle.range;function $h(e){return Os(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*go)/DI)}const M3=$h(0),z2=$h(1),ret=$h(2),set=$h(3),Xp=$h(4),aet=$h(5),iet=$h(6);M3.range;z2.range;ret.range;set.range;Xp.range;aet.range;iet.range;function Oh(e){return Os(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/DI)}const _3=Oh(0),B2=Oh(1),oet=Oh(2),cet=Oh(3),e0=Oh(4),det=Oh(5),uet=Oh(6);_3.range;B2.range;oet.range;cet.range;e0.range;det.range;uet.range;const zI=Os(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());zI.range;const BI=Os(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());BI.range;const ad=Os(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());ad.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Os(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});ad.range;const id=Os(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());id.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Os(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});id.range;function Ale(e,t,r,s,a,i){const o=[[Nf,1,Ec],[Nf,5,5*Ec],[Nf,15,15*Ec],[Nf,30,30*Ec],[i,1,go],[i,5,5*go],[i,15,15*go],[i,30,30*go],[a,1,Ic],[a,3,3*Ic],[a,6,6*Ic],[a,12,12*Ic],[s,1,sd],[s,2,2*sd],[r,1,DI],[t,1,K7],[t,3,3*K7],[e,1,nk]];function l(d,u,f){const h=u<d;h&&([d,u]=[u,d]);const m=f&&typeof f.range=="function"?f:c(d,u,f),g=m?m.range(d,+u+1):[];return h?g.reverse():g}function c(d,u,f){const h=Math.abs(u-d)/f,m=NI(([,,y])=>y).right(o,h);if(m===o.length)return e.every($_(d/nk,u/nk,f));if(m===0)return F2.every(Math.max($_(d,u,f),1));const[g,x]=o[h/o[m-1][2]<o[m][2]/h?m-1:m];return g.every(x)}return[l,c]}const[fet,het]=Ale(id,BI,_3,Tle,FI,OI),[met,pet]=Ale(ad,zI,M3,F1,RI,$I);function rk(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function sk(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function zg(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function get(e){var t=e.dateTime,r=e.date,s=e.time,a=e.periods,i=e.days,o=e.shortDays,l=e.months,c=e.shortMonths,d=Bg(a),u=Ug(a),f=Bg(i),h=Ug(i),m=Bg(o),g=Ug(o),x=Bg(l),y=Ug(l),v=Bg(c),b=Ug(c),w={a:$,A:D,b:W,B:E,c:null,d:nF,e:nF,f:zet,g:Ket,G:Zet,H:Oet,I:Ret,j:Fet,L:Ele,m:Bet,M:Uet,p:F,q:B,Q:aF,s:iF,S:Vet,u:Het,U:Wet,V:qet,w:Get,W:Yet,x:null,X:null,y:Qet,Y:Jet,Z:Xet,"%":sF},N={a:Z,A:ne,b:Y,B:me,c:null,d:rF,e:rF,f:rtt,g:htt,G:ptt,H:ett,I:ttt,j:ntt,L:Lle,m:stt,M:att,p:pe,q:Me,Q:aF,s:iF,S:itt,u:ott,U:ltt,V:ctt,w:dtt,W:utt,x:null,X:null,y:ftt,Y:mtt,Z:gtt,"%":sF},j={a:A,A:P,b:T,B:I,c:L,d:eF,e:eF,f:Iet,g:X7,G:Z7,H:tF,I:tF,j:Pet,L:Eet,m:_et,M:Tet,p:M,q:Met,Q:Det,s:$et,S:Aet,u:wet,U:jet,V:Net,w:bet,W:Cet,x:R,X:G,y:X7,Y:Z7,Z:ket,"%":Let};w.x=S(r,w),w.X=S(s,w),w.c=S(t,w),N.x=S(r,N),N.X=S(s,N),N.c=S(t,N);function S(re,de){return function(he){var ce=[],Be=-1,le=0,$e=re.length,et,_e,ot;for(he instanceof Date||(he=new Date(+he));++Be<$e;)re.charCodeAt(Be)===37&&(ce.push(re.slice(le,Be)),(_e=J7[et=re.charAt(++Be)])!=null?et=re.charAt(++Be):_e=et==="e"?" ":"0",(ot=de[et])&&(et=ot(he,_e)),ce.push(et),le=Be+1);return ce.push(re.slice(le,Be)),ce.join("")}}function C(re,de){return function(he){var ce=zg(1900,void 0,1),Be=k(ce,re,he+="",0),le,$e;if(Be!=he.length)return null;if("Q"in ce)return new Date(ce.Q);if("s"in ce)return new Date(ce.s*1e3+("L"in ce?ce.L:0));if(de&&!("Z"in ce)&&(ce.Z=0),"p"in ce&&(ce.H=ce.H%12+ce.p*12),ce.m===void 0&&(ce.m="q"in ce?ce.q:0),"V"in ce){if(ce.V<1||ce.V>53)return null;"w"in ce||(ce.w=1),"Z"in ce?(le=sk(zg(ce.y,0,1)),$e=le.getUTCDay(),le=$e>4||$e===0?B2.ceil(le):B2(le),le=k3.offset(le,(ce.V-1)*7),ce.y=le.getUTCFullYear(),ce.m=le.getUTCMonth(),ce.d=le.getUTCDate()+(ce.w+6)%7):(le=rk(zg(ce.y,0,1)),$e=le.getDay(),le=$e>4||$e===0?z2.ceil(le):z2(le),le=F1.offset(le,(ce.V-1)*7),ce.y=le.getFullYear(),ce.m=le.getMonth(),ce.d=le.getDate()+(ce.w+6)%7)}else("W"in ce||"U"in ce)&&("w"in ce||(ce.w="u"in ce?ce.u%7:"W"in ce?1:0),$e="Z"in ce?sk(zg(ce.y,0,1)).getUTCDay():rk(zg(ce.y,0,1)).getDay(),ce.m=0,ce.d="W"in ce?(ce.w+6)%7+ce.W*7-($e+5)%7:ce.w+ce.U*7-($e+6)%7);return"Z"in ce?(ce.H+=ce.Z/100|0,ce.M+=ce.Z%100,sk(ce)):rk(ce)}}function k(re,de,he,ce){for(var Be=0,le=de.length,$e=he.length,et,_e;Be<le;){if(ce>=$e)return-1;if(et=de.charCodeAt(Be++),et===37){if(et=de.charAt(Be++),_e=j[et in J7?de.charAt(Be++):et],!_e||(ce=_e(re,he,ce))<0)return-1}else if(et!=he.charCodeAt(ce++))return-1}return ce}function M(re,de,he){var ce=d.exec(de.slice(he));return ce?(re.p=u.get(ce[0].toLowerCase()),he+ce[0].length):-1}function A(re,de,he){var ce=m.exec(de.slice(he));return ce?(re.w=g.get(ce[0].toLowerCase()),he+ce[0].length):-1}function P(re,de,he){var ce=f.exec(de.slice(he));return ce?(re.w=h.get(ce[0].toLowerCase()),he+ce[0].length):-1}function T(re,de,he){var ce=v.exec(de.slice(he));return ce?(re.m=b.get(ce[0].toLowerCase()),he+ce[0].length):-1}function I(re,de,he){var ce=x.exec(de.slice(he));return ce?(re.m=y.get(ce[0].toLowerCase()),he+ce[0].length):-1}function L(re,de,he){return k(re,t,de,he)}function R(re,de,he){return k(re,r,de,he)}function G(re,de,he){return k(re,s,de,he)}function $(re){return o[re.getDay()]}function D(re){return i[re.getDay()]}function W(re){return c[re.getMonth()]}function E(re){return l[re.getMonth()]}function F(re){return a[+(re.getHours()>=12)]}function B(re){return 1+~~(re.getMonth()/3)}function Z(re){return o[re.getUTCDay()]}function ne(re){return i[re.getUTCDay()]}function Y(re){return c[re.getUTCMonth()]}function me(re){return l[re.getUTCMonth()]}function pe(re){return a[+(re.getUTCHours()>=12)]}function Me(re){return 1+~~(re.getUTCMonth()/3)}return{format:function(re){var de=S(re+="",w);return de.toString=function(){return re},de},parse:function(re){var de=C(re+="",!1);return de.toString=function(){return re},de},utcFormat:function(re){var de=S(re+="",N);return de.toString=function(){return re},de},utcParse:function(re){var de=C(re+="",!0);return de.toString=function(){return re},de}}}var J7={"-":"",_:" ",0:"0"},Ks=/^\s*\d+/,xet=/^%/,yet=/[\\^$*+?|[\]().{}]/g;function Vn(e,t,r){var s=e<0?"-":"",a=(s?-e:e)+"",i=a.length;return s+(i<r?new Array(r-i+1).join(t)+a:a)}function vet(e){return e.replace(yet,"\\$&")}function Bg(e){return new RegExp("^(?:"+e.map(vet).join("|")+")","i")}function Ug(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function bet(e,t,r){var s=Ks.exec(t.slice(r,r+1));return s?(e.w=+s[0],r+s[0].length):-1}function wet(e,t,r){var s=Ks.exec(t.slice(r,r+1));return s?(e.u=+s[0],r+s[0].length):-1}function jet(e,t,r){var s=Ks.exec(t.slice(r,r+2));return s?(e.U=+s[0],r+s[0].length):-1}function Net(e,t,r){var s=Ks.exec(t.slice(r,r+2));return s?(e.V=+s[0],r+s[0].length):-1}function Cet(e,t,r){var s=Ks.exec(t.slice(r,r+2));return s?(e.W=+s[0],r+s[0].length):-1}function Z7(e,t,r){var s=Ks.exec(t.slice(r,r+4));return s?(e.y=+s[0],r+s[0].length):-1}function X7(e,t,r){var s=Ks.exec(t.slice(r,r+2));return s?(e.y=+s[0]+(+s[0]>68?1900:2e3),r+s[0].length):-1}function ket(e,t,r){var s=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return s?(e.Z=s[1]?0:-(s[2]+(s[3]||"00")),r+s[0].length):-1}function Met(e,t,r){var s=Ks.exec(t.slice(r,r+1));return s?(e.q=s[0]*3-3,r+s[0].length):-1}function _et(e,t,r){var s=Ks.exec(t.slice(r,r+2));return s?(e.m=s[0]-1,r+s[0].length):-1}function eF(e,t,r){var s=Ks.exec(t.slice(r,r+2));return s?(e.d=+s[0],r+s[0].length):-1}function Pet(e,t,r){var s=Ks.exec(t.slice(r,r+3));return s?(e.m=0,e.d=+s[0],r+s[0].length):-1}function tF(e,t,r){var s=Ks.exec(t.slice(r,r+2));return s?(e.H=+s[0],r+s[0].length):-1}function Tet(e,t,r){var s=Ks.exec(t.slice(r,r+2));return s?(e.M=+s[0],r+s[0].length):-1}function Aet(e,t,r){var s=Ks.exec(t.slice(r,r+2));return s?(e.S=+s[0],r+s[0].length):-1}function Eet(e,t,r){var s=Ks.exec(t.slice(r,r+3));return s?(e.L=+s[0],r+s[0].length):-1}function Iet(e,t,r){var s=Ks.exec(t.slice(r,r+6));return s?(e.L=Math.floor(s[0]/1e3),r+s[0].length):-1}function Let(e,t,r){var s=xet.exec(t.slice(r,r+1));return s?r+s[0].length:-1}function Det(e,t,r){var s=Ks.exec(t.slice(r));return s?(e.Q=+s[0],r+s[0].length):-1}function $et(e,t,r){var s=Ks.exec(t.slice(r));return s?(e.s=+s[0],r+s[0].length):-1}function nF(e,t){return Vn(e.getDate(),t,2)}function Oet(e,t){return Vn(e.getHours(),t,2)}function Ret(e,t){return Vn(e.getHours()%12||12,t,2)}function Fet(e,t){return Vn(1+F1.count(ad(e),e),t,3)}function Ele(e,t){return Vn(e.getMilliseconds(),t,3)}function zet(e,t){return Ele(e,t)+"000"}function Bet(e,t){return Vn(e.getMonth()+1,t,2)}function Uet(e,t){return Vn(e.getMinutes(),t,2)}function Vet(e,t){return Vn(e.getSeconds(),t,2)}function Het(e){var t=e.getDay();return t===0?7:t}function Wet(e,t){return Vn(M3.count(ad(e)-1,e),t,2)}function Ile(e){var t=e.getDay();return t>=4||t===0?Xp(e):Xp.ceil(e)}function qet(e,t){return e=Ile(e),Vn(Xp.count(ad(e),e)+(ad(e).getDay()===4),t,2)}function Get(e){return e.getDay()}function Yet(e,t){return Vn(z2.count(ad(e)-1,e),t,2)}function Qet(e,t){return Vn(e.getFullYear()%100,t,2)}function Ket(e,t){return e=Ile(e),Vn(e.getFullYear()%100,t,2)}function Jet(e,t){return Vn(e.getFullYear()%1e4,t,4)}function Zet(e,t){var r=e.getDay();return e=r>=4||r===0?Xp(e):Xp.ceil(e),Vn(e.getFullYear()%1e4,t,4)}function Xet(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Vn(t/60|0,"0",2)+Vn(t%60,"0",2)}function rF(e,t){return Vn(e.getUTCDate(),t,2)}function ett(e,t){return Vn(e.getUTCHours(),t,2)}function ttt(e,t){return Vn(e.getUTCHours()%12||12,t,2)}function ntt(e,t){return Vn(1+k3.count(id(e),e),t,3)}function Lle(e,t){return Vn(e.getUTCMilliseconds(),t,3)}function rtt(e,t){return Lle(e,t)+"000"}function stt(e,t){return Vn(e.getUTCMonth()+1,t,2)}function att(e,t){return Vn(e.getUTCMinutes(),t,2)}function itt(e,t){return Vn(e.getUTCSeconds(),t,2)}function ott(e){var t=e.getUTCDay();return t===0?7:t}function ltt(e,t){return Vn(_3.count(id(e)-1,e),t,2)}function Dle(e){var t=e.getUTCDay();return t>=4||t===0?e0(e):e0.ceil(e)}function ctt(e,t){return e=Dle(e),Vn(e0.count(id(e),e)+(id(e).getUTCDay()===4),t,2)}function dtt(e){return e.getUTCDay()}function utt(e,t){return Vn(B2.count(id(e)-1,e),t,2)}function ftt(e,t){return Vn(e.getUTCFullYear()%100,t,2)}function htt(e,t){return e=Dle(e),Vn(e.getUTCFullYear()%100,t,2)}function mtt(e,t){return Vn(e.getUTCFullYear()%1e4,t,4)}function ptt(e,t){var r=e.getUTCDay();return e=r>=4||r===0?e0(e):e0.ceil(e),Vn(e.getUTCFullYear()%1e4,t,4)}function gtt(){return"+0000"}function sF(){return"%"}function aF(e){return+e}function iF(e){return Math.floor(+e/1e3)}var Kh,$le,Ole;xtt({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function xtt(e){return Kh=get(e),$le=Kh.format,Kh.parse,Ole=Kh.utcFormat,Kh.utcParse,Kh}function ytt(e){return new Date(e)}function vtt(e){return e instanceof Date?+e:+new Date(+e)}function UI(e,t,r,s,a,i,o,l,c,d){var u=_I(),f=u.invert,h=u.domain,m=d(".%L"),g=d(":%S"),x=d("%I:%M"),y=d("%I %p"),v=d("%a %d"),b=d("%b %d"),w=d("%B"),N=d("%Y");function j(S){return(c(S)<S?m:l(S)<S?g:o(S)<S?x:i(S)<S?y:s(S)<S?a(S)<S?v:b:r(S)<S?w:N)(S)}return u.invert=function(S){return new Date(f(S))},u.domain=function(S){return arguments.length?h(Array.from(S,vtt)):h().map(ytt)},u.ticks=function(S){var C=h();return e(C[0],C[C.length-1],S??10)},u.tickFormat=function(S,C){return C==null?j:d(C)},u.nice=function(S){var C=h();return(!S||typeof S.range!="function")&&(S=t(C[0],C[C.length-1],S??10)),S?h(Nle(C,S)):u},u.copy=function(){return R1(u,UI(e,t,r,s,a,i,o,l,c,d))},u}function btt(){return Ao.apply(UI(met,pet,ad,zI,M3,F1,RI,$I,Nf,$le).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function wtt(){return Ao.apply(UI(fet,het,id,BI,_3,k3,FI,OI,Nf,Ole).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function P3(){var e=0,t=1,r,s,a,i,o=Va,l=!1,c;function d(f){return f==null||isNaN(f=+f)?c:o(a===0?.5:(f=(i(f)-r)*a,l?Math.max(0,Math.min(1,f)):f))}d.domain=function(f){return arguments.length?([e,t]=f,r=i(e=+e),s=i(t=+t),a=r===s?0:1/(s-r),d):[e,t]},d.clamp=function(f){return arguments.length?(l=!!f,d):l},d.interpolator=function(f){return arguments.length?(o=f,d):o};function u(f){return function(h){var m,g;return arguments.length?([m,g]=h,o=f(m,g),d):[o(0),o(1)]}}return d.range=u(ug),d.rangeRound=u(MI),d.unknown=function(f){return arguments.length?(c=f,d):c},function(f){return i=f,r=f(e),s=f(t),a=r===s?0:1/(s-r),d}}function Wu(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function Rle(){var e=Hu(P3()(Va));return e.copy=function(){return Wu(e,Rle())},pd.apply(e,arguments)}function Fle(){var e=AI(P3()).domain([1,10]);return e.copy=function(){return Wu(e,Fle()).base(e.base())},pd.apply(e,arguments)}function zle(){var e=EI(P3());return e.copy=function(){return Wu(e,zle()).constant(e.constant())},pd.apply(e,arguments)}function VI(){var e=II(P3());return e.copy=function(){return Wu(e,VI()).exponent(e.exponent())},pd.apply(e,arguments)}function jtt(){return VI.apply(null,arguments).exponent(.5)}function Ble(){var e=[],t=Va;function r(s){if(s!=null&&!isNaN(s=+s))return t(($1(e,s,1)-1)/(e.length-1))}return r.domain=function(s){if(!arguments.length)return e.slice();e=[];for(let a of s)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(du),r},r.interpolator=function(s){return arguments.length?(t=s,r):t},r.range=function(){return e.map((s,a)=>t(a/(e.length-1)))},r.quantiles=function(s){return Array.from({length:s+1},(a,i)=>iXe(e,i/s))},r.copy=function(){return Ble(t).domain(e)},pd.apply(r,arguments)}function T3(){var e=0,t=.5,r=1,s=1,a,i,o,l,c,d=Va,u,f=!1,h;function m(x){return isNaN(x=+x)?h:(x=.5+((x=+u(x))-i)*(s*x<s*i?l:c),d(f?Math.max(0,Math.min(1,x)):x))}m.domain=function(x){return arguments.length?([e,t,r]=x,a=u(e=+e),i=u(t=+t),o=u(r=+r),l=a===i?0:.5/(i-a),c=i===o?0:.5/(o-i),s=i<a?-1:1,m):[e,t,r]},m.clamp=function(x){return arguments.length?(f=!!x,m):f},m.interpolator=function(x){return arguments.length?(d=x,m):d};function g(x){return function(y){var v,b,w;return arguments.length?([v,b,w]=y,d=EXe(x,[v,b,w]),m):[d(0),d(.5),d(1)]}}return m.range=g(ug),m.rangeRound=g(MI),m.unknown=function(x){return arguments.length?(h=x,m):h},function(x){return u=x,a=x(e),i=x(t),o=x(r),l=a===i?0:.5/(i-a),c=i===o?0:.5/(o-i),s=i<a?-1:1,m}}function Ule(){var e=Hu(T3()(Va));return e.copy=function(){return Wu(e,Ule())},pd.apply(e,arguments)}function Vle(){var e=AI(T3()).domain([.1,1,10]);return e.copy=function(){return Wu(e,Vle()).base(e.base())},pd.apply(e,arguments)}function Hle(){var e=EI(T3());return e.copy=function(){return Wu(e,Hle()).constant(e.constant())},pd.apply(e,arguments)}function HI(){var e=II(T3());return e.copy=function(){return Wu(e,HI()).exponent(e.exponent())},pd.apply(e,arguments)}function Ntt(){return HI.apply(null,arguments).exponent(.5)}const oF=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:ov,scaleDiverging:Ule,scaleDivergingLog:Vle,scaleDivergingPow:HI,scaleDivergingSqrt:Ntt,scaleDivergingSymlog:Hle,scaleIdentity:jle,scaleImplicit:O_,scaleLinear:R2,scaleLog:Sle,scaleOrdinal:SI,scalePoint:Rx,scalePow:LI,scaleQuantile:Mle,scaleQuantize:_le,scaleRadial:kle,scaleSequential:Rle,scaleSequentialLog:Fle,scaleSequentialPow:VI,scaleSequentialQuantile:Ble,scaleSequentialSqrt:jtt,scaleSequentialSymlog:zle,scaleSqrt:tet,scaleSymlog:Cle,scaleThreshold:Ple,scaleTime:btt,scaleUtc:wtt,tickFormat:wle},Symbol.toStringTag,{value:"Module"}));var Stt=ng;function Ctt(e,t,r){for(var s=-1,a=e.length;++s<a;){var i=e[s],o=t(i);if(o!=null&&(l===void 0?o===o&&!Stt(o):r(o,l)))var l=o,c=i}return c}var A3=Ctt;function ktt(e,t){return e>t}var Wle=ktt,Mtt=A3,_tt=Wle,Ptt=dg;function Ttt(e){return e&&e.length?Mtt(e,Ptt,_tt):void 0}var Att=Ttt;const E3=qn(Att);function Ett(e,t){return e<t}var qle=Ett,Itt=A3,Ltt=qle,Dtt=dg;function $tt(e){return e&&e.length?Itt(e,Dtt,Ltt):void 0}var Ott=$tt;const I3=qn(Ott);var Rtt=sI,Ftt=oc,ztt=ele,Btt=vi;function Utt(e,t){var r=Btt(e)?Rtt:ztt;return r(e,Ftt(t))}var Vtt=Utt,Htt=Zoe,Wtt=Vtt;function qtt(e,t){return Htt(Wtt(e,t),1)}var Gtt=qtt;const Ytt=qn(Gtt);var Qtt=vI;function Ktt(e,t){return Qtt(e,t)}var Jtt=Ktt;const z1=qn(Jtt);var fg=1e9,Ztt={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},qI,Tr=!0,ko="[DecimalError] ",Wf=ko+"Invalid argument: ",WI=ko+"Exponent out of range: ",hg=Math.floor,cf=Math.pow,Xtt=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Ei,zs=1e7,vr=7,Gle=9007199254740991,U2=hg(Gle/vr),Nt={};Nt.absoluteValue=Nt.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Nt.comparedTo=Nt.cmp=function(e){var t,r,s,a,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(s=i.d.length,a=e.d.length,t=0,r=s<a?s:a;t<r;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return s===a?0:s>a^i.s<0?1:-1};Nt.decimalPlaces=Nt.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*vr;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};Nt.dividedBy=Nt.div=function(e){return zc(this,new this.constructor(e))};Nt.dividedToIntegerBy=Nt.idiv=function(e){var t=this,r=t.constructor;return lr(zc(t,new r(e),0,1),r.precision)};Nt.equals=Nt.eq=function(e){return!this.cmp(e)};Nt.exponent=function(){return vs(this)};Nt.greaterThan=Nt.gt=function(e){return this.cmp(e)>0};Nt.greaterThanOrEqualTo=Nt.gte=function(e){return this.cmp(e)>=0};Nt.isInteger=Nt.isint=function(){return this.e>this.d.length-2};Nt.isNegative=Nt.isneg=function(){return this.s<0};Nt.isPositive=Nt.ispos=function(){return this.s>0};Nt.isZero=function(){return this.s===0};Nt.lessThan=Nt.lt=function(e){return this.cmp(e)<0};Nt.lessThanOrEqualTo=Nt.lte=function(e){return this.cmp(e)<1};Nt.logarithm=Nt.log=function(e){var t,r=this,s=r.constructor,a=s.precision,i=a+5;if(e===void 0)e=new s(10);else if(e=new s(e),e.s<1||e.eq(Ei))throw Error(ko+"NaN");if(r.s<1)throw Error(ko+(r.s?"NaN":"-Infinity"));return r.eq(Ei)?new s(0):(Tr=!1,t=zc(fv(r,i),fv(e,i),i),Tr=!0,lr(t,a))};Nt.minus=Nt.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?Kle(t,e):Yle(t,(e.s=-e.s,e))};Nt.modulo=Nt.mod=function(e){var t,r=this,s=r.constructor,a=s.precision;if(e=new s(e),!e.s)throw Error(ko+"NaN");return r.s?(Tr=!1,t=zc(r,e,0,1).times(e),Tr=!0,r.minus(t)):lr(new s(r),a)};Nt.naturalExponential=Nt.exp=function(){return Qle(this)};Nt.naturalLogarithm=Nt.ln=function(){return fv(this)};Nt.negated=Nt.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Nt.plus=Nt.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?Yle(t,e):Kle(t,(e.s=-e.s,e))};Nt.precision=Nt.sd=function(e){var t,r,s,a=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Wf+e);if(t=vs(a)+1,s=a.d.length-1,r=s*vr+1,s=a.d[s],s){for(;s%10==0;s/=10)r--;for(s=a.d[0];s>=10;s/=10)r++}return e&&t>r?t:r};Nt.squareRoot=Nt.sqrt=function(){var e,t,r,s,a,i,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(ko+"NaN")}for(e=vs(l),Tr=!1,a=Math.sqrt(+l),a==0||a==1/0?(t=Fl(l.d),(t.length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=hg((e+1)/2)-(e<0||e%2),a==1/0?t="5e"+e:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),s=new c(t)):s=new c(a.toString()),r=c.precision,a=o=r+3;;)if(i=s,s=i.plus(zc(l,i,o+2)).times(.5),Fl(i.d).slice(0,o)===(t=Fl(s.d)).slice(0,o)){if(t=t.slice(o-3,o+1),a==o&&t=="4999"){if(lr(i,r+1,0),i.times(i).eq(l)){s=i;break}}else if(t!="9999")break;o+=4}return Tr=!0,lr(s,r)};Nt.times=Nt.mul=function(e){var t,r,s,a,i,o,l,c,d,u=this,f=u.constructor,h=u.d,m=(e=new f(e)).d;if(!u.s||!e.s)return new f(0);for(e.s*=u.s,r=u.e+e.e,c=h.length,d=m.length,c<d&&(i=h,h=m,m=i,o=c,c=d,d=o),i=[],o=c+d,s=o;s--;)i.push(0);for(s=d;--s>=0;){for(t=0,a=c+s;a>s;)l=i[a]+m[s]*h[a-s-1]+t,i[a--]=l%zs|0,t=l/zs|0;i[a]=(i[a]+t)%zs|0}for(;!i[--o];)i.pop();return t?++r:i.shift(),e.d=i,e.e=r,Tr?lr(e,f.precision):e};Nt.toDecimalPlaces=Nt.todp=function(e,t){var r=this,s=r.constructor;return r=new s(r),e===void 0?r:(nc(e,0,fg),t===void 0?t=s.rounding:nc(t,0,8),lr(r,e+vs(r)+1,t))};Nt.toExponential=function(e,t){var r,s=this,a=s.constructor;return e===void 0?r=xh(s,!0):(nc(e,0,fg),t===void 0?t=a.rounding:nc(t,0,8),s=lr(new a(s),e+1,t),r=xh(s,!0,e+1)),r};Nt.toFixed=function(e,t){var r,s,a=this,i=a.constructor;return e===void 0?xh(a):(nc(e,0,fg),t===void 0?t=i.rounding:nc(t,0,8),s=lr(new i(a),e+vs(a)+1,t),r=xh(s.abs(),!1,e+vs(s)+1),a.isneg()&&!a.isZero()?"-"+r:r)};Nt.toInteger=Nt.toint=function(){var e=this,t=e.constructor;return lr(new t(e),vs(e)+1,t.rounding)};Nt.toNumber=function(){return+this};Nt.toPower=Nt.pow=function(e){var t,r,s,a,i,o,l=this,c=l.constructor,d=12,u=+(e=new c(e));if(!e.s)return new c(Ei);if(l=new c(l),!l.s){if(e.s<1)throw Error(ko+"Infinity");return l}if(l.eq(Ei))return l;if(s=c.precision,e.eq(Ei))return lr(l,s);if(t=e.e,r=e.d.length-1,o=t>=r,i=l.s,o){if((r=u<0?-u:u)<=Gle){for(a=new c(Ei),t=Math.ceil(s/vr+4),Tr=!1;r%2&&(a=a.times(l),cF(a.d,t)),r=hg(r/2),r!==0;)l=l.times(l),cF(l.d,t);return Tr=!0,e.s<0?new c(Ei).div(a):lr(a,s)}}else if(i<0)throw Error(ko+"NaN");return i=i<0&&e.d[Math.max(t,r)]&1?-1:1,l.s=1,Tr=!1,a=e.times(fv(l,s+d)),Tr=!0,a=Qle(a),a.s=i,a};Nt.toPrecision=function(e,t){var r,s,a=this,i=a.constructor;return e===void 0?(r=vs(a),s=xh(a,r<=i.toExpNeg||r>=i.toExpPos)):(nc(e,1,fg),t===void 0?t=i.rounding:nc(t,0,8),a=lr(new i(a),e,t),r=vs(a),s=xh(a,e<=r||r<=i.toExpNeg,e)),s};Nt.toSignificantDigits=Nt.tosd=function(e,t){var r=this,s=r.constructor;return e===void 0?(e=s.precision,t=s.rounding):(nc(e,1,fg),t===void 0?t=s.rounding:nc(t,0,8)),lr(new s(r),e,t)};Nt.toString=Nt.valueOf=Nt.val=Nt.toJSON=Nt[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=vs(e),r=e.constructor;return xh(e,t<=r.toExpNeg||t>=r.toExpPos)};function Yle(e,t){var r,s,a,i,o,l,c,d,u=e.constructor,f=u.precision;if(!e.s||!t.s)return t.s||(t=new u(e)),Tr?lr(t,f):t;if(c=e.d,d=t.d,o=e.e,a=t.e,c=c.slice(),i=o-a,i){for(i<0?(s=c,i=-i,l=d.length):(s=d,a=o,l=c.length),o=Math.ceil(f/vr),l=o>l?o+1:l+1,i>l&&(i=l,s.length=1),s.reverse();i--;)s.push(0);s.reverse()}for(l=c.length,i=d.length,l-i<0&&(i=l,s=d,d=c,c=s),r=0;i;)r=(c[--i]=c[i]+d[i]+r)/zs|0,c[i]%=zs;for(r&&(c.unshift(r),++a),l=c.length;c[--l]==0;)c.pop();return t.d=c,t.e=a,Tr?lr(t,f):t}function nc(e,t,r){if(e!==~~e||e<t||e>r)throw Error(Wf+e)}function Fl(e){var t,r,s,a=e.length-1,i="",o=e[0];if(a>0){for(i+=o,t=1;t<a;t++)s=e[t]+"",r=vr-s.length,r&&(i+=Ad(r)),i+=s;o=e[t],s=o+"",r=vr-s.length,r&&(i+=Ad(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var zc=function(){function e(s,a){var i,o=0,l=s.length;for(s=s.slice();l--;)i=s[l]*a+o,s[l]=i%zs|0,o=i/zs|0;return o&&s.unshift(o),s}function t(s,a,i,o){var l,c;if(i!=o)c=i>o?1:-1;else for(l=c=0;l<i;l++)if(s[l]!=a[l]){c=s[l]>a[l]?1:-1;break}return c}function r(s,a,i){for(var o=0;i--;)s[i]-=o,o=s[i]<a[i]?1:0,s[i]=o*zs+s[i]-a[i];for(;!s[0]&&s.length>1;)s.shift()}return function(s,a,i,o){var l,c,d,u,f,h,m,g,x,y,v,b,w,N,j,S,C,k,M=s.constructor,A=s.s==a.s?1:-1,P=s.d,T=a.d;if(!s.s)return new M(s);if(!a.s)throw Error(ko+"Division by zero");for(c=s.e-a.e,C=T.length,j=P.length,m=new M(A),g=m.d=[],d=0;T[d]==(P[d]||0);)++d;if(T[d]>(P[d]||0)&&--c,i==null?b=i=M.precision:o?b=i+(vs(s)-vs(a))+1:b=i,b<0)return new M(0);if(b=b/vr+2|0,d=0,C==1)for(u=0,T=T[0],b++;(d<j||u)&&b--;d++)w=u*zs+(P[d]||0),g[d]=w/T|0,u=w%T|0;else{for(u=zs/(T[0]+1)|0,u>1&&(T=e(T,u),P=e(P,u),C=T.length,j=P.length),N=C,x=P.slice(0,C),y=x.length;y<C;)x[y++]=0;k=T.slice(),k.unshift(0),S=T[0],T[1]>=zs/2&&++S;do u=0,l=t(T,x,C,y),l<0?(v=x[0],C!=y&&(v=v*zs+(x[1]||0)),u=v/S|0,u>1?(u>=zs&&(u=zs-1),f=e(T,u),h=f.length,y=x.length,l=t(f,x,h,y),l==1&&(u--,r(f,C<h?k:T,h))):(u==0&&(l=u=1),f=T.slice()),h=f.length,h<y&&f.unshift(0),r(x,f,y),l==-1&&(y=x.length,l=t(T,x,C,y),l<1&&(u++,r(x,C<y?k:T,y))),y=x.length):l===0&&(u++,x=[0]),g[d++]=u,l&&x[0]?x[y++]=P[N]||0:(x=[P[N]],y=1);while((N++<j||x[0]!==void 0)&&b--)}return g[0]||g.shift(),m.e=c,lr(m,o?i+vs(m)+1:i)}}();function Qle(e,t){var r,s,a,i,o,l,c=0,d=0,u=e.constructor,f=u.precision;if(vs(e)>16)throw Error(WI+vs(e));if(!e.s)return new u(Ei);for(Tr=!1,l=f,o=new u(.03125);e.abs().gte(.1);)e=e.times(o),d+=5;for(s=Math.log(cf(2,d))/Math.LN10*2+5|0,l+=s,r=a=i=new u(Ei),u.precision=l;;){if(a=lr(a.times(e),l),r=r.times(++c),o=i.plus(zc(a,r,l)),Fl(o.d).slice(0,l)===Fl(i.d).slice(0,l)){for(;d--;)i=lr(i.times(i),l);return u.precision=f,t==null?(Tr=!0,lr(i,f)):i}i=o}}function vs(e){for(var t=e.e*vr,r=e.d[0];r>=10;r/=10)t++;return t}function ak(e,t,r){if(t>e.LN10.sd())throw Tr=!0,r&&(e.precision=r),Error(ko+"LN10 precision limit exceeded");return lr(new e(e.LN10),t)}function Ad(e){for(var t="";e--;)t+="0";return t}function fv(e,t){var r,s,a,i,o,l,c,d,u,f=1,h=10,m=e,g=m.d,x=m.constructor,y=x.precision;if(m.s<1)throw Error(ko+(m.s?"NaN":"-Infinity"));if(m.eq(Ei))return new x(0);if(t==null?(Tr=!1,d=y):d=t,m.eq(10))return t==null&&(Tr=!0),ak(x,d);if(d+=h,x.precision=d,r=Fl(g),s=r.charAt(0),i=vs(m),Math.abs(i)<15e14){for(;s<7&&s!=1||s==1&&r.charAt(1)>3;)m=m.times(e),r=Fl(m.d),s=r.charAt(0),f++;i=vs(m),s>1?(m=new x("0."+r),i++):m=new x(s+"."+r.slice(1))}else return c=ak(x,d+2,y).times(i+""),m=fv(new x(s+"."+r.slice(1)),d-h).plus(c),x.precision=y,t==null?(Tr=!0,lr(m,y)):m;for(l=o=m=zc(m.minus(Ei),m.plus(Ei),d),u=lr(m.times(m),d),a=3;;){if(o=lr(o.times(u),d),c=l.plus(zc(o,new x(a),d)),Fl(c.d).slice(0,d)===Fl(l.d).slice(0,d))return l=l.times(2),i!==0&&(l=l.plus(ak(x,d+2,y).times(i+""))),l=zc(l,new x(f),d),x.precision=y,t==null?(Tr=!0,lr(l,y)):l;l=c,a+=2}}function lF(e,t){var r,s,a;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(s=t.search(/e/i))>0?(r<0&&(r=s),r+=+t.slice(s+1),t=t.substring(0,s)):r<0&&(r=t.length),s=0;t.charCodeAt(s)===48;)++s;for(a=t.length;t.charCodeAt(a-1)===48;)--a;if(t=t.slice(s,a),t){if(a-=s,r=r-s-1,e.e=hg(r/vr),e.d=[],s=(r+1)%vr,r<0&&(s+=vr),s<a){for(s&&e.d.push(+t.slice(0,s)),a-=vr;s<a;)e.d.push(+t.slice(s,s+=vr));t=t.slice(s),s=vr-t.length}else s-=a;for(;s--;)t+="0";if(e.d.push(+t),Tr&&(e.e>U2||e.e<-U2))throw Error(WI+r)}else e.s=0,e.e=0,e.d=[0];return e}function lr(e,t,r){var s,a,i,o,l,c,d,u,f=e.d;for(o=1,i=f[0];i>=10;i/=10)o++;if(s=t-o,s<0)s+=vr,a=t,d=f[u=0];else{if(u=Math.ceil((s+1)/vr),i=f.length,u>=i)return e;for(d=i=f[u],o=1;i>=10;i/=10)o++;s%=vr,a=s-vr+o}if(r!==void 0&&(i=cf(10,o-a-1),l=d/i%10|0,c=t<0||f[u+1]!==void 0||d%i,c=r<4?(l||c)&&(r==0||r==(e.s<0?3:2)):l>5||l==5&&(r==4||c||r==6&&(s>0?a>0?d/cf(10,o-a):0:f[u-1])%10&1||r==(e.s<0?8:7))),t<1||!f[0])return c?(i=vs(e),f.length=1,t=t-i-1,f[0]=cf(10,(vr-t%vr)%vr),e.e=hg(-t/vr)||0):(f.length=1,f[0]=e.e=e.s=0),e;if(s==0?(f.length=u,i=1,u--):(f.length=u+1,i=cf(10,vr-s),f[u]=a>0?(d/cf(10,o-a)%cf(10,a)|0)*i:0),c)for(;;)if(u==0){(f[0]+=i)==zs&&(f[0]=1,++e.e);break}else{if(f[u]+=i,f[u]!=zs)break;f[u--]=0,i=1}for(s=f.length;f[--s]===0;)f.pop();if(Tr&&(e.e>U2||e.e<-U2))throw Error(WI+vs(e));return e}function Kle(e,t){var r,s,a,i,o,l,c,d,u,f,h=e.constructor,m=h.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new h(e),Tr?lr(t,m):t;if(c=e.d,f=t.d,s=t.e,d=e.e,c=c.slice(),o=d-s,o){for(u=o<0,u?(r=c,o=-o,l=f.length):(r=f,s=d,l=c.length),a=Math.max(Math.ceil(m/vr),l)+2,o>a&&(o=a,r.length=1),r.reverse(),a=o;a--;)r.push(0);r.reverse()}else{for(a=c.length,l=f.length,u=a<l,u&&(l=a),a=0;a<l;a++)if(c[a]!=f[a]){u=c[a]<f[a];break}o=0}for(u&&(r=c,c=f,f=r,t.s=-t.s),l=c.length,a=f.length-l;a>0;--a)c[l++]=0;for(a=f.length;a>o;){if(c[--a]<f[a]){for(i=a;i&&c[--i]===0;)c[i]=zs-1;--c[i],c[a]+=zs}c[a]-=f[a]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--s;return c[0]?(t.d=c,t.e=s,Tr?lr(t,m):t):new h(0)}function xh(e,t,r){var s,a=vs(e),i=Fl(e.d),o=i.length;return t?(r&&(s=r-o)>0?i=i.charAt(0)+"."+i.slice(1)+Ad(s):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(a<0?"e":"e+")+a):a<0?(i="0."+Ad(-a-1)+i,r&&(s=r-o)>0&&(i+=Ad(s))):a>=o?(i+=Ad(a+1-o),r&&(s=r-a-1)>0&&(i=i+"."+Ad(s))):((s=a+1)<o&&(i=i.slice(0,s)+"."+i.slice(s)),r&&(s=r-o)>0&&(a+1===o&&(i+="."),i+=Ad(s))),e.s<0?"-"+i:i}function cF(e,t){if(e.length>t)return e.length=t,!0}function Jle(e){var t,r,s;function a(i){var o=this;if(!(o instanceof a))return new a(i);if(o.constructor=a,i instanceof a){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(Wf+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return lF(o,i.toString())}else if(typeof i!="string")throw Error(Wf+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,Xtt.test(i))lF(o,i);else throw Error(Wf+i)}if(a.prototype=Nt,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=Jle,a.config=a.set=ent,e===void 0&&(e={}),e)for(s=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<s.length;)e.hasOwnProperty(r=s[t++])||(e[r]=this[r]);return a.config(e),a}function ent(e){if(!e||typeof e!="object")throw Error(ko+"Object expected");var t,r,s,a=["precision",1,fg,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if((s=e[r=a[t]])!==void 0)if(hg(s)===s&&s>=a[t+1]&&s<=a[t+2])this[r]=s;else throw Error(Wf+r+": "+s);if((s=e[r="LN10"])!==void 0)if(s==Math.LN10)this[r]=new this(s);else throw Error(Wf+r+": "+s);return this}var qI=Jle(Ztt);Ei=new qI(1);const ar=qI;function tnt(e){return ant(e)||snt(e)||rnt(e)||nnt()}function nnt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rnt(e,t){if(e){if(typeof e=="string")return B_(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return B_(e,t)}}function snt(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function ant(e){if(Array.isArray(e))return B_(e)}function B_(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}var int=function(t){return t},Zle={},Xle=function(t){return t===Zle},dF=function(t){return function r(){return arguments.length===0||arguments.length===1&&Xle(arguments.length<=0?void 0:arguments[0])?r:t.apply(void 0,arguments)}},ont=function e(t,r){return t===1?r:dF(function(){for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];var o=a.filter(function(l){return l!==Zle}).length;return o>=t?r.apply(void 0,a):e(t-o,dF(function(){for(var l=arguments.length,c=new Array(l),d=0;d<l;d++)c[d]=arguments[d];var u=a.map(function(f){return Xle(f)?c.shift():f});return r.apply(void 0,tnt(u).concat(c))}))})},L3=function(t){return ont(t.length,t)},U_=function(t,r){for(var s=[],a=t;a<r;++a)s[a-t]=a;return s},lnt=L3(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(r){return t[r]}).map(e)}),cnt=function(){for(var t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];if(!r.length)return int;var a=r.reverse(),i=a[0],o=a.slice(1);return function(){return o.reduce(function(l,c){return c(l)},i.apply(void 0,arguments))}},V_=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},ece=function(t){var r=null,s=null;return function(){for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r&&i.every(function(l,c){return l===r[c]})||(r=i,s=t.apply(void 0,i)),s}};function dnt(e){var t;return e===0?t=1:t=Math.floor(new ar(e).abs().log(10).toNumber())+1,t}function unt(e,t,r){for(var s=new ar(e),a=0,i=[];s.lt(t)&&a<1e5;)i.push(s.toNumber()),s=s.add(r),a++;return i}var fnt=L3(function(e,t,r){var s=+e,a=+t;return s+r*(a-s)}),hnt=L3(function(e,t,r){var s=t-+e;return s=s||1/0,(r-e)/s}),mnt=L3(function(e,t,r){var s=t-+e;return s=s||1/0,Math.max(0,Math.min(1,(r-e)/s))});const D3={rangeStep:unt,getDigitCount:dnt,interpolateNumber:fnt,uninterpolateNumber:hnt,uninterpolateTruncation:mnt};function H_(e){return xnt(e)||gnt(e)||tce(e)||pnt()}function pnt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gnt(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function xnt(e){if(Array.isArray(e))return W_(e)}function hv(e,t){return bnt(e)||vnt(e,t)||tce(e,t)||ynt()}function ynt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tce(e,t){if(e){if(typeof e=="string")return W_(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return W_(e,t)}}function W_(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function vnt(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var r=[],s=!0,a=!1,i=void 0;try{for(var o=e[Symbol.iterator](),l;!(s=(l=o.next()).done)&&(r.push(l.value),!(t&&r.length===t));s=!0);}catch(c){a=!0,i=c}finally{try{!s&&o.return!=null&&o.return()}finally{if(a)throw i}}return r}}function bnt(e){if(Array.isArray(e))return e}function nce(e){var t=hv(e,2),r=t[0],s=t[1],a=r,i=s;return r>s&&(a=s,i=r),[a,i]}function rce(e,t,r){if(e.lte(0))return new ar(0);var s=D3.getDigitCount(e.toNumber()),a=new ar(10).pow(s),i=e.div(a),o=s!==1?.05:.1,l=new ar(Math.ceil(i.div(o).toNumber())).add(r).mul(o),c=l.mul(a);return t?c:new ar(Math.ceil(c))}function wnt(e,t,r){var s=1,a=new ar(e);if(!a.isint()&&r){var i=Math.abs(e);i<1?(s=new ar(10).pow(D3.getDigitCount(e)-1),a=new ar(Math.floor(a.div(s).toNumber())).mul(s)):i>1&&(a=new ar(Math.floor(e)))}else e===0?a=new ar(Math.floor((t-1)/2)):r||(a=new ar(Math.floor(e)));var o=Math.floor((t-1)/2),l=cnt(lnt(function(c){return a.add(new ar(c-o).mul(s)).toNumber()}),U_);return l(0,t)}function sce(e,t,r,s){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(r-1)))return{step:new ar(0),tickMin:new ar(0),tickMax:new ar(0)};var i=rce(new ar(t).sub(e).div(r-1),s,a),o;e<=0&&t>=0?o=new ar(0):(o=new ar(e).add(t).div(2),o=o.sub(new ar(o).mod(i)));var l=Math.ceil(o.sub(e).div(i).toNumber()),c=Math.ceil(new ar(t).sub(o).div(i).toNumber()),d=l+c+1;return d>r?sce(e,t,r,s,a+1):(d<r&&(c=t>0?c+(r-d):c,l=t>0?l:l+(r-d)),{step:i,tickMin:o.sub(new ar(l).mul(i)),tickMax:o.add(new ar(c).mul(i))})}function jnt(e){var t=hv(e,2),r=t[0],s=t[1],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(a,2),l=nce([r,s]),c=hv(l,2),d=c[0],u=c[1];if(d===-1/0||u===1/0){var f=u===1/0?[d].concat(H_(U_(0,a-1).map(function(){return 1/0}))):[].concat(H_(U_(0,a-1).map(function(){return-1/0})),[u]);return r>s?V_(f):f}if(d===u)return wnt(d,a,i);var h=sce(d,u,o,i),m=h.step,g=h.tickMin,x=h.tickMax,y=D3.rangeStep(g,x.add(new ar(.1).mul(m)),m);return r>s?V_(y):y}function Nnt(e,t){var r=hv(e,2),s=r[0],a=r[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=nce([s,a]),l=hv(o,2),c=l[0],d=l[1];if(c===-1/0||d===1/0)return[s,a];if(c===d)return[c];var u=Math.max(t,2),f=rce(new ar(d).sub(c).div(u-1),i,0),h=[].concat(H_(D3.rangeStep(new ar(c),new ar(d).sub(new ar(.99).mul(f)),f)),[d]);return s>a?V_(h):h}var Snt=ece(jnt),Cnt=ece(Nnt),knt="Invariant failed";function yh(e,t){throw new Error(knt)}var Mnt=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function t0(e){"@babel/helpers - typeof";return t0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t0(e)}function V2(){return V2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},V2.apply(this,arguments)}function _nt(e,t){return Ent(e)||Ant(e,t)||Tnt(e,t)||Pnt()}function Pnt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Tnt(e,t){if(e){if(typeof e=="string")return uF(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return uF(e,t)}}function uF(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function Ant(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s,a,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(s=i.call(r)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function Ent(e){if(Array.isArray(e))return e}function Int(e,t){if(e==null)return{};var r=Lnt(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function Lnt(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}function Dnt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $nt(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,oce(s.key),s)}}function Ont(e,t,r){return t&&$nt(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Rnt(e,t,r){return t=H2(t),Fnt(e,ace()?Reflect.construct(t,r||[],H2(e).constructor):t.apply(e,r))}function Fnt(e,t){if(t&&(t0(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return znt(e)}function znt(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ace(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ace=function(){return!!e})()}function H2(e){return H2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},H2(e)}function Bnt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&q_(e,t)}function q_(e,t){return q_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},q_(e,t)}function ice(e,t,r){return t=oce(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oce(e){var t=Unt(e,"string");return t0(t)=="symbol"?t:t+""}function Unt(e,t){if(t0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(t0(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var B1=function(e){function t(){return Dnt(this,t),Rnt(this,t,arguments)}return Bnt(t,e),Ont(t,[{key:"render",value:function(){var s=this.props,a=s.offset,i=s.layout,o=s.width,l=s.dataKey,c=s.data,d=s.dataPointFormatter,u=s.xAxis,f=s.yAxis,h=Int(s,Mnt),m=Ht(h,!1);this.props.direction==="x"&&u.type!=="number"&&yh();var g=c.map(function(x){var y=d(x,l),v=y.x,b=y.y,w=y.value,N=y.errorVal;if(!N)return null;var j=[],S,C;if(Array.isArray(N)){var k=_nt(N,2);S=k[0],C=k[1]}else S=C=N;if(i==="vertical"){var M=u.scale,A=b+a,P=A+o,T=A-o,I=M(w-S),L=M(w+C);j.push({x1:L,y1:P,x2:L,y2:T}),j.push({x1:I,y1:A,x2:L,y2:A}),j.push({x1:I,y1:P,x2:I,y2:T})}else if(i==="horizontal"){var R=f.scale,G=v+a,$=G-o,D=G+o,W=R(w-S),E=R(w+C);j.push({x1:$,y1:E,x2:D,y2:E}),j.push({x1:G,y1:W,x2:G,y2:E}),j.push({x1:$,y1:W,x2:D,y2:W})}return Q.createElement(Bn,V2({className:"recharts-errorBar",key:"bar-".concat(j.map(function(F){return"".concat(F.x1,"-").concat(F.x2,"-").concat(F.y1,"-").concat(F.y2)}))},m),j.map(function(F){return Q.createElement("line",V2({},F,{key:"line-".concat(F.x1,"-").concat(F.x2,"-").concat(F.y1,"-").concat(F.y2)}))}))});return Q.createElement(Bn,{className:"recharts-errorBars"},g)}}])}(Q.Component);ice(B1,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});ice(B1,"displayName","ErrorBar");function mv(e){"@babel/helpers - typeof";return mv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mv(e)}function fF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function Ju(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?fF(Object(r),!0).forEach(function(s){Vnt(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fF(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function Vnt(e,t,r){return t=Hnt(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Hnt(e){var t=Wnt(e,"string");return mv(t)=="symbol"?t:t+""}function Wnt(e,t){if(mv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(mv(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var lce=function(t){var r=t.children,s=t.formattedGraphicalItems,a=t.legendWidth,i=t.legendContent,o=ki(r,Zo);if(!o)return null;var l=Zo.defaultProps,c=l!==void 0?Ju(Ju({},l),o.props):{},d;return o.props&&o.props.payload?d=o.props&&o.props.payload:i==="children"?d=(s||[]).reduce(function(u,f){var h=f.item,m=f.props,g=m.sectors||m.data||[];return u.concat(g.map(function(x){return{type:o.props.iconType||h.props.legendType,value:x.name,color:x.fill,payload:x}}))},[]):d=(s||[]).map(function(u){var f=u.item,h=f.type.defaultProps,m=h!==void 0?Ju(Ju({},h),f.props):{},g=m.dataKey,x=m.name,y=m.legendType,v=m.hide;return{inactive:v,dataKey:g,type:c.iconType||y||"square",color:GI(f),value:x||g,payload:m}}),Ju(Ju(Ju({},c),Zo.getWithHeight(o,a)),{},{payload:d,item:o})};function pv(e){"@babel/helpers - typeof";return pv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pv(e)}function hF(e){return Qnt(e)||Ynt(e)||Gnt(e)||qnt()}function qnt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Gnt(e,t){if(e){if(typeof e=="string")return G_(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return G_(e,t)}}function Ynt(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Qnt(e){if(Array.isArray(e))return G_(e)}function G_(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function mF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function qr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mF(Object(r),!0).forEach(function(s){Zm(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mF(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function Zm(e,t,r){return t=Knt(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Knt(e){var t=Jnt(e,"string");return pv(t)=="symbol"?t:t+""}function Jnt(e,t){if(pv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(pv(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function As(e,t,r){return dn(e)||dn(t)?r:Ds(t)?Fi(e,t,r):tn(t)?t(e):r}function Fx(e,t,r,s){var a=Ytt(e,function(l){return As(l,t)});if(r==="number"){var i=a.filter(function(l){return it(l)||parseFloat(l)});return i.length?[I3(i),E3(i)]:[1/0,-1/0]}var o=s?a.filter(function(l){return!dn(l)}):a;return o.map(function(l){return Ds(l)||l instanceof Date?l:""})}var Znt=function(t){var r,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=-1,l=(r=s==null?void 0:s.length)!==null&&r!==void 0?r:0;if(l<=1)return 0;if(i&&i.axisType==="angleAxis"&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var c=i.range,d=0;d<l;d++){var u=d>0?a[d-1].coordinate:a[l-1].coordinate,f=a[d].coordinate,h=d>=l-1?a[0].coordinate:a[d+1].coordinate,m=void 0;if(Ba(f-u)!==Ba(h-f)){var g=[];if(Ba(h-f)===Ba(c[1]-c[0])){m=h;var x=f+c[1]-c[0];g[0]=Math.min(x,(x+u)/2),g[1]=Math.max(x,(x+u)/2)}else{m=u;var y=h+c[1]-c[0];g[0]=Math.min(f,(y+f)/2),g[1]=Math.max(f,(y+f)/2)}var v=[Math.min(f,(m+f)/2),Math.max(f,(m+f)/2)];if(t>v[0]&&t<=v[1]||t>=g[0]&&t<=g[1]){o=a[d].index;break}}else{var b=Math.min(u,h),w=Math.max(u,h);if(t>(b+f)/2&&t<=(w+f)/2){o=a[d].index;break}}}else for(var N=0;N<l;N++)if(N===0&&t<=(s[N].coordinate+s[N+1].coordinate)/2||N>0&&N<l-1&&t>(s[N].coordinate+s[N-1].coordinate)/2&&t<=(s[N].coordinate+s[N+1].coordinate)/2||N===l-1&&t>(s[N].coordinate+s[N-1].coordinate)/2){o=s[N].index;break}return o},GI=function(t){var r,s=t,a=s.type.displayName,i=(r=t.type)!==null&&r!==void 0&&r.defaultProps?qr(qr({},t.type.defaultProps),t.props):t.props,o=i.stroke,l=i.fill,c;switch(a){case"Line":c=o;break;case"Area":case"Radar":c=o&&o!=="none"?o:l;break;default:c=l;break}return c},Xnt=function(t){var r=t.barSize,s=t.totalSize,a=t.stackGroups,i=a===void 0?{}:a;if(!i)return{};for(var o={},l=Object.keys(i),c=0,d=l.length;c<d;c++)for(var u=i[l[c]].stackGroups,f=Object.keys(u),h=0,m=f.length;h<m;h++){var g=u[f[h]],x=g.items,y=g.cateAxisId,v=x.filter(function(C){return Fc(C.type).indexOf("Bar")>=0});if(v&&v.length){var b=v[0].type.defaultProps,w=b!==void 0?qr(qr({},b),v[0].props):v[0].props,N=w.barSize,j=w[y];o[j]||(o[j]=[]);var S=dn(N)?r:N;o[j].push({item:v[0],stackList:v.slice(1),barSize:dn(S)?void 0:Ua(S,s,0)})}}return o},ert=function(t){var r=t.barGap,s=t.barCategoryGap,a=t.bandSize,i=t.sizeList,o=i===void 0?[]:i,l=t.maxBarSize,c=o.length;if(c<1)return null;var d=Ua(r,a,0,!0),u,f=[];if(o[0].barSize===+o[0].barSize){var h=!1,m=a/c,g=o.reduce(function(N,j){return N+j.barSize||0},0);g+=(c-1)*d,g>=a&&(g-=(c-1)*d,d=0),g>=a&&m>0&&(h=!0,m*=.9,g=c*m);var x=(a-g)/2>>0,y={offset:x-d,size:0};u=o.reduce(function(N,j){var S={item:j.item,position:{offset:y.offset+y.size+d,size:h?m:j.barSize}},C=[].concat(hF(N),[S]);return y=C[C.length-1].position,j.stackList&&j.stackList.length&&j.stackList.forEach(function(k){C.push({item:k,position:y})}),C},f)}else{var v=Ua(s,a,0,!0);a-2*v-(c-1)*d<=0&&(d=0);var b=(a-2*v-(c-1)*d)/c;b>1&&(b>>=0);var w=l===+l?Math.min(b,l):b;u=o.reduce(function(N,j,S){var C=[].concat(hF(N),[{item:j.item,position:{offset:v+(b+d)*S+(b-w)/2,size:w}}]);return j.stackList&&j.stackList.length&&j.stackList.forEach(function(k){C.push({item:k,position:C[C.length-1].position})}),C},f)}return u},trt=function(t,r,s,a){var i=s.children,o=s.width,l=s.margin,c=o-(l.left||0)-(l.right||0),d=lce({children:i,legendWidth:c});if(d){var u=a||{},f=u.width,h=u.height,m=d.align,g=d.verticalAlign,x=d.layout;if((x==="vertical"||x==="horizontal"&&g==="middle")&&m!=="center"&&it(t[m]))return qr(qr({},t),{},Zm({},m,t[m]+(f||0)));if((x==="horizontal"||x==="vertical"&&m==="center")&&g!=="middle"&&it(t[g]))return qr(qr({},t),{},Zm({},g,t[g]+(h||0)))}return t},nrt=function(t,r,s){return dn(r)?!0:t==="horizontal"?r==="yAxis":t==="vertical"||s==="x"?r==="xAxis":s==="y"?r==="yAxis":!0},cce=function(t,r,s,a,i){var o=r.props.children,l=zi(o,B1).filter(function(d){return nrt(a,i,d.props.direction)});if(l&&l.length){var c=l.map(function(d){return d.props.dataKey});return t.reduce(function(d,u){var f=As(u,s);if(dn(f))return d;var h=Array.isArray(f)?[I3(f),E3(f)]:[f,f],m=c.reduce(function(g,x){var y=As(u,x,0),v=h[0]-Math.abs(Array.isArray(y)?y[0]:y),b=h[1]+Math.abs(Array.isArray(y)?y[1]:y);return[Math.min(v,g[0]),Math.max(b,g[1])]},[1/0,-1/0]);return[Math.min(m[0],d[0]),Math.max(m[1],d[1])]},[1/0,-1/0])}return null},rrt=function(t,r,s,a,i){var o=r.map(function(l){return cce(t,l,s,i,a)}).filter(function(l){return!dn(l)});return o&&o.length?o.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]):null},dce=function(t,r,s,a,i){var o=r.map(function(c){var d=c.props.dataKey;return s==="number"&&d&&cce(t,c,d,a)||Fx(t,d,s,i)});if(s==="number")return o.reduce(function(c,d){return[Math.min(c[0],d[0]),Math.max(c[1],d[1])]},[1/0,-1/0]);var l={};return o.reduce(function(c,d){for(var u=0,f=d.length;u<f;u++)l[d[u]]||(l[d[u]]=!0,c.push(d[u]));return c},[])},uce=function(t,r){return t==="horizontal"&&r==="xAxis"||t==="vertical"&&r==="yAxis"||t==="centric"&&r==="angleAxis"||t==="radial"&&r==="radiusAxis"},fce=function(t,r,s,a){if(a)return t.map(function(c){return c.coordinate});var i,o,l=t.map(function(c){return c.coordinate===r&&(i=!0),c.coordinate===s&&(o=!0),c.coordinate});return i||l.push(r),o||l.push(s),l},Lc=function(t,r,s){if(!t)return null;var a=t.scale,i=t.duplicateDomain,o=t.type,l=t.range,c=t.realScaleType==="scaleBand"?a.bandwidth()/2:2,d=(r||s)&&o==="category"&&a.bandwidth?a.bandwidth()/c:0;if(d=t.axisType==="angleAxis"&&(l==null?void 0:l.length)>=2?Ba(l[0]-l[1])*2*d:d,r&&(t.ticks||t.niceTicks)){var u=(t.ticks||t.niceTicks).map(function(f){var h=i?i.indexOf(f):f;return{coordinate:a(h)+d,value:f,offset:d}});return u.filter(function(f){return!L1(f.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(f,h){return{coordinate:a(f)+d,value:f,index:h,offset:d}}):a.ticks&&!s?a.ticks(t.tickCount).map(function(f){return{coordinate:a(f)+d,value:f,offset:d}}):a.domain().map(function(f,h){return{coordinate:a(f)+d,value:i?i[f]:f,index:h,offset:d}})},ik=new WeakMap,Ub=function(t,r){if(typeof r!="function")return t;ik.has(t)||ik.set(t,new WeakMap);var s=ik.get(t);if(s.has(r))return s.get(r);var a=function(){t.apply(void 0,arguments),r.apply(void 0,arguments)};return s.set(r,a),a},hce=function(t,r,s){var a=t.scale,i=t.type,o=t.layout,l=t.axisType;if(a==="auto")return o==="radial"&&l==="radiusAxis"?{scale:ov(),realScaleType:"band"}:o==="radial"&&l==="angleAxis"?{scale:R2(),realScaleType:"linear"}:i==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!s)?{scale:Rx(),realScaleType:"point"}:i==="category"?{scale:ov(),realScaleType:"band"}:{scale:R2(),realScaleType:"linear"};if(I1(a)){var c="scale".concat(x3(a));return{scale:(oF[c]||Rx)(),realScaleType:oF[c]?c:"point"}}return tn(a)?{scale:a}:{scale:Rx(),realScaleType:"point"}},pF=1e-4,mce=function(t){var r=t.domain();if(!(!r||r.length<=2)){var s=r.length,a=t.range(),i=Math.min(a[0],a[1])-pF,o=Math.max(a[0],a[1])+pF,l=t(r[0]),c=t(r[s-1]);(l<i||l>o||c<i||c>o)&&t.domain([r[0],r[s-1]])}},srt=function(t,r){if(!t)return null;for(var s=0,a=t.length;s<a;s++)if(t[s].item===r)return t[s].position;return null},art=function(t,r){if(!r||r.length!==2||!it(r[0])||!it(r[1]))return t;var s=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]),i=[t[0],t[1]];return(!it(t[0])||t[0]<s)&&(i[0]=s),(!it(t[1])||t[1]>a)&&(i[1]=a),i[0]>a&&(i[0]=a),i[1]<s&&(i[1]=s),i},irt=function(t){var r=t.length;if(!(r<=0))for(var s=0,a=t[0].length;s<a;++s)for(var i=0,o=0,l=0;l<r;++l){var c=L1(t[l][s][1])?t[l][s][0]:t[l][s][1];c>=0?(t[l][s][0]=i,t[l][s][1]=i+c,i=t[l][s][1]):(t[l][s][0]=o,t[l][s][1]=o+c,o=t[l][s][1])}},ort=function(t){var r=t.length;if(!(r<=0))for(var s=0,a=t[0].length;s<a;++s)for(var i=0,o=0;o<r;++o){var l=L1(t[o][s][1])?t[o][s][0]:t[o][s][1];l>=0?(t[o][s][0]=i,t[o][s][1]=i+l,i=t[o][s][1]):(t[o][s][0]=0,t[o][s][1]=0)}},lrt={sign:irt,expand:CVe,none:Gp,silhouette:kVe,wiggle:MVe,positive:ort},crt=function(t,r,s){var a=r.map(function(l){return l.props.dataKey}),i=lrt[s],o=SVe().keys(a).value(function(l,c){return+As(l,c,0)}).order(y_).offset(i);return o(t)},drt=function(t,r,s,a,i,o){if(!t)return null;var l=o?r.reverse():r,c={},d=l.reduce(function(f,h){var m,g=(m=h.type)!==null&&m!==void 0&&m.defaultProps?qr(qr({},h.type.defaultProps),h.props):h.props,x=g.stackId,y=g.hide;if(y)return f;var v=g[s],b=f[v]||{hasStack:!1,stackGroups:{}};if(Ds(x)){var w=b.stackGroups[x]||{numericAxisId:s,cateAxisId:a,items:[]};w.items.push(h),b.hasStack=!0,b.stackGroups[x]=w}else b.stackGroups[og("_stackId_")]={numericAxisId:s,cateAxisId:a,items:[h]};return qr(qr({},f),{},Zm({},v,b))},c),u={};return Object.keys(d).reduce(function(f,h){var m=d[h];if(m.hasStack){var g={};m.stackGroups=Object.keys(m.stackGroups).reduce(function(x,y){var v=m.stackGroups[y];return qr(qr({},x),{},Zm({},y,{numericAxisId:s,cateAxisId:a,items:v.items,stackedData:crt(t,v.items,i)}))},g)}return qr(qr({},f),{},Zm({},h,m))},u)},pce=function(t,r){var s=r.realScaleType,a=r.type,i=r.tickCount,o=r.originalDomain,l=r.allowDecimals,c=s||r.scale;if(c!=="auto"&&c!=="linear")return null;if(i&&a==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var d=t.domain();if(!d.length)return null;var u=Snt(d,i,l);return t.domain([I3(u),E3(u)]),{niceTicks:u}}if(i&&a==="number"){var f=t.domain(),h=Cnt(f,i,l);return{niceTicks:h}}return null};function gF(e){var t=e.axis,r=e.ticks,s=e.bandSize,a=e.entry,i=e.index,o=e.dataKey;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!dn(a[t.dataKey])){var l=x2(r,"value",a[t.dataKey]);if(l)return l.coordinate+s/2}return r[i]?r[i].coordinate+s/2:null}var c=As(a,dn(o)?t.dataKey:o);return dn(c)?null:t.scale(c)}var xF=function(t){var r=t.axis,s=t.ticks,a=t.offset,i=t.bandSize,o=t.entry,l=t.index;if(r.type==="category")return s[l]?s[l].coordinate+a:null;var c=As(o,r.dataKey,r.domain[l]);return dn(c)?null:r.scale(c)-i/2+a},urt=function(t){var r=t.numericAxis,s=r.scale.domain();if(r.type==="number"){var a=Math.min(s[0],s[1]),i=Math.max(s[0],s[1]);return a<=0&&i>=0?0:i<0?i:a}return s[0]},frt=function(t,r){var s,a=(s=t.type)!==null&&s!==void 0&&s.defaultProps?qr(qr({},t.type.defaultProps),t.props):t.props,i=a.stackId;if(Ds(i)){var o=r[i];if(o){var l=o.items.indexOf(t);return l>=0?o.stackedData[l]:null}}return null},hrt=function(t){return t.reduce(function(r,s){return[I3(s.concat([r[0]]).filter(it)),E3(s.concat([r[1]]).filter(it))]},[1/0,-1/0])},gce=function(t,r,s){return Object.keys(t).reduce(function(a,i){var o=t[i],l=o.stackedData,c=l.reduce(function(d,u){var f=hrt(u.slice(r,s+1));return[Math.min(d[0],f[0]),Math.max(d[1],f[1])]},[1/0,-1/0]);return[Math.min(c[0],a[0]),Math.max(c[1],a[1])]},[1/0,-1/0]).map(function(a){return a===1/0||a===-1/0?0:a})},yF=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,vF=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Y_=function(t,r,s){if(tn(t))return t(r,s);if(!Array.isArray(t))return r;var a=[];if(it(t[0]))a[0]=s?t[0]:Math.min(t[0],r[0]);else if(yF.test(t[0])){var i=+yF.exec(t[0])[1];a[0]=r[0]-i}else tn(t[0])?a[0]=t[0](r[0]):a[0]=r[0];if(it(t[1]))a[1]=s?t[1]:Math.max(t[1],r[1]);else if(vF.test(t[1])){var o=+vF.exec(t[1])[1];a[1]=r[1]+o}else tn(t[1])?a[1]=t[1](r[1]):a[1]=r[1];return a},W2=function(t,r,s){if(t&&t.scale&&t.scale.bandwidth){var a=t.scale.bandwidth();if(!s||a>0)return a}if(t&&r&&r.length>=2){for(var i=wI(r,function(f){return f.coordinate}),o=1/0,l=1,c=i.length;l<c;l++){var d=i[l],u=i[l-1];o=Math.min((d.coordinate||0)-(u.coordinate||0),o)}return o===1/0?0:o}return s?void 0:0},bF=function(t,r,s){return!t||!t.length||z1(t,Fi(s,"type.defaultProps.domain"))?r:t},xce=function(t,r){var s=t.type.defaultProps?qr(qr({},t.type.defaultProps),t.props):t.props,a=s.dataKey,i=s.name,o=s.unit,l=s.formatter,c=s.tooltipType,d=s.chartType,u=s.hide;return qr(qr({},Ht(t,!1)),{},{dataKey:a,unit:o,formatter:l,name:i||a,color:GI(t),value:As(r,a),type:c,payload:r,chartType:d,hide:u})};function gv(e){"@babel/helpers - typeof";return gv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gv(e)}function wF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function bc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wF(Object(r),!0).forEach(function(s){yce(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wF(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function yce(e,t,r){return t=mrt(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mrt(e){var t=prt(e,"string");return gv(t)=="symbol"?t:t+""}function prt(e,t){if(gv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(gv(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function grt(e,t){return brt(e)||vrt(e,t)||yrt(e,t)||xrt()}function xrt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yrt(e,t){if(e){if(typeof e=="string")return jF(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return jF(e,t)}}function jF(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function vrt(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s,a,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(s=i.call(r)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function brt(e){if(Array.isArray(e))return e}var q2=Math.PI/180,wrt=function(t){return t*180/Math.PI},hr=function(t,r,s,a){return{x:t+Math.cos(-q2*a)*s,y:r+Math.sin(-q2*a)*s}},vce=function(t,r){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(s.left||0)-(s.right||0)),Math.abs(r-(s.top||0)-(s.bottom||0)))/2},jrt=function(t,r,s,a,i){var o=t.width,l=t.height,c=t.startAngle,d=t.endAngle,u=Ua(t.cx,o,o/2),f=Ua(t.cy,l,l/2),h=vce(o,l,s),m=Ua(t.innerRadius,h,0),g=Ua(t.outerRadius,h,h*.8),x=Object.keys(r);return x.reduce(function(y,v){var b=r[v],w=b.domain,N=b.reversed,j;if(dn(b.range))a==="angleAxis"?j=[c,d]:a==="radiusAxis"&&(j=[m,g]),N&&(j=[j[1],j[0]]);else{j=b.range;var S=j,C=grt(S,2);c=C[0],d=C[1]}var k=hce(b,i),M=k.realScaleType,A=k.scale;A.domain(w).range(j),mce(A);var P=pce(A,bc(bc({},b),{},{realScaleType:M})),T=bc(bc(bc({},b),P),{},{range:j,radius:g,realScaleType:M,scale:A,cx:u,cy:f,innerRadius:m,outerRadius:g,startAngle:c,endAngle:d});return bc(bc({},y),{},yce({},v,T))},{})},Nrt=function(t,r){var s=t.x,a=t.y,i=r.x,o=r.y;return Math.sqrt(Math.pow(s-i,2)+Math.pow(a-o,2))},Srt=function(t,r){var s=t.x,a=t.y,i=r.cx,o=r.cy,l=Nrt({x:s,y:a},{x:i,y:o});if(l<=0)return{radius:l};var c=(s-i)/l,d=Math.acos(c);return a>o&&(d=2*Math.PI-d),{radius:l,angle:wrt(d),angleInRadian:d}},Crt=function(t){var r=t.startAngle,s=t.endAngle,a=Math.floor(r/360),i=Math.floor(s/360),o=Math.min(a,i);return{startAngle:r-o*360,endAngle:s-o*360}},krt=function(t,r){var s=r.startAngle,a=r.endAngle,i=Math.floor(s/360),o=Math.floor(a/360),l=Math.min(i,o);return t+l*360},NF=function(t,r){var s=t.x,a=t.y,i=Srt({x:s,y:a},r),o=i.radius,l=i.angle,c=r.innerRadius,d=r.outerRadius;if(o<c||o>d)return!1;if(o===0)return!0;var u=Crt(r),f=u.startAngle,h=u.endAngle,m=l,g;if(f<=h){for(;m>h;)m-=360;for(;m<f;)m+=360;g=m>=f&&m<=h}else{for(;m>f;)m-=360;for(;m<h;)m+=360;g=m>=h&&m<=f}return g?bc(bc({},r),{},{radius:o,angle:krt(m,r)}):null},bce=function(t){return!p.isValidElement(t)&&!tn(t)&&typeof t!="boolean"?t.className:""};function xv(e){"@babel/helpers - typeof";return xv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xv(e)}var Mrt=["offset"];function _rt(e){return Ert(e)||Art(e)||Trt(e)||Prt()}function Prt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Trt(e,t){if(e){if(typeof e=="string")return Q_(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Q_(e,t)}}function Art(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Ert(e){if(Array.isArray(e))return Q_(e)}function Q_(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function Irt(e,t){if(e==null)return{};var r=Lrt(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function Lrt(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}function SF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function Ss(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?SF(Object(r),!0).forEach(function(s){Drt(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):SF(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function Drt(e,t,r){return t=$rt(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $rt(e){var t=Ort(e,"string");return xv(t)=="symbol"?t:t+""}function Ort(e,t){if(xv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(xv(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function yv(){return yv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},yv.apply(this,arguments)}var Rrt=function(t){var r=t.value,s=t.formatter,a=dn(t.children)?r:t.children;return tn(s)?s(a):a},Frt=function(t,r){var s=Ba(r-t),a=Math.min(Math.abs(r-t),360);return s*a},zrt=function(t,r,s){var a=t.position,i=t.viewBox,o=t.offset,l=t.className,c=i,d=c.cx,u=c.cy,f=c.innerRadius,h=c.outerRadius,m=c.startAngle,g=c.endAngle,x=c.clockWise,y=(f+h)/2,v=Frt(m,g),b=v>=0?1:-1,w,N;a==="insideStart"?(w=m+b*o,N=x):a==="insideEnd"?(w=g-b*o,N=!x):a==="end"&&(w=g+b*o,N=x),N=v<=0?N:!N;var j=hr(d,u,y,w),S=hr(d,u,y,w+(N?1:-1)*359),C="M".concat(j.x,",").concat(j.y,`
    A`).concat(y,",").concat(y,",0,1,").concat(N?0:1,`,
    `).concat(S.x,",").concat(S.y),k=dn(t.id)?og("recharts-radial-line-"):t.id;return Q.createElement("text",yv({},s,{dominantBaseline:"central",className:mn("recharts-radial-bar-label",l)}),Q.createElement("defs",null,Q.createElement("path",{id:k,d:C})),Q.createElement("textPath",{xlinkHref:"#".concat(k)},r))},Brt=function(t){var r=t.viewBox,s=t.offset,a=t.position,i=r,o=i.cx,l=i.cy,c=i.innerRadius,d=i.outerRadius,u=i.startAngle,f=i.endAngle,h=(u+f)/2;if(a==="outside"){var m=hr(o,l,d+s,h),g=m.x,x=m.y;return{x:g,y:x,textAnchor:g>=o?"start":"end",verticalAnchor:"middle"}}if(a==="center")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(a==="centerTop")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"start"};if(a==="centerBottom")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"end"};var y=(c+d)/2,v=hr(o,l,y,h),b=v.x,w=v.y;return{x:b,y:w,textAnchor:"middle",verticalAnchor:"middle"}},Urt=function(t){var r=t.viewBox,s=t.parentViewBox,a=t.offset,i=t.position,o=r,l=o.x,c=o.y,d=o.width,u=o.height,f=u>=0?1:-1,h=f*a,m=f>0?"end":"start",g=f>0?"start":"end",x=d>=0?1:-1,y=x*a,v=x>0?"end":"start",b=x>0?"start":"end";if(i==="top"){var w={x:l+d/2,y:c-f*a,textAnchor:"middle",verticalAnchor:m};return Ss(Ss({},w),s?{height:Math.max(c-s.y,0),width:d}:{})}if(i==="bottom"){var N={x:l+d/2,y:c+u+h,textAnchor:"middle",verticalAnchor:g};return Ss(Ss({},N),s?{height:Math.max(s.y+s.height-(c+u),0),width:d}:{})}if(i==="left"){var j={x:l-y,y:c+u/2,textAnchor:v,verticalAnchor:"middle"};return Ss(Ss({},j),s?{width:Math.max(j.x-s.x,0),height:u}:{})}if(i==="right"){var S={x:l+d+y,y:c+u/2,textAnchor:b,verticalAnchor:"middle"};return Ss(Ss({},S),s?{width:Math.max(s.x+s.width-S.x,0),height:u}:{})}var C=s?{width:d,height:u}:{};return i==="insideLeft"?Ss({x:l+y,y:c+u/2,textAnchor:b,verticalAnchor:"middle"},C):i==="insideRight"?Ss({x:l+d-y,y:c+u/2,textAnchor:v,verticalAnchor:"middle"},C):i==="insideTop"?Ss({x:l+d/2,y:c+h,textAnchor:"middle",verticalAnchor:g},C):i==="insideBottom"?Ss({x:l+d/2,y:c+u-h,textAnchor:"middle",verticalAnchor:m},C):i==="insideTopLeft"?Ss({x:l+y,y:c+h,textAnchor:b,verticalAnchor:g},C):i==="insideTopRight"?Ss({x:l+d-y,y:c+h,textAnchor:v,verticalAnchor:g},C):i==="insideBottomLeft"?Ss({x:l+y,y:c+u-h,textAnchor:b,verticalAnchor:m},C):i==="insideBottomRight"?Ss({x:l+d-y,y:c+u-h,textAnchor:v,verticalAnchor:m},C):rg(i)&&(it(i.x)||wf(i.x))&&(it(i.y)||wf(i.y))?Ss({x:l+Ua(i.x,d),y:c+Ua(i.y,u),textAnchor:"end",verticalAnchor:"end"},C):Ss({x:l+d/2,y:c+u/2,textAnchor:"middle",verticalAnchor:"middle"},C)},Vrt=function(t){return"cx"in t&&it(t.cx)};function Vs(e){var t=e.offset,r=t===void 0?5:t,s=Irt(e,Mrt),a=Ss({offset:r},s),i=a.viewBox,o=a.position,l=a.value,c=a.children,d=a.content,u=a.className,f=u===void 0?"":u,h=a.textBreakAll;if(!i||dn(l)&&dn(c)&&!p.isValidElement(d)&&!tn(d))return null;if(p.isValidElement(d))return p.cloneElement(d,a);var m;if(tn(d)){if(m=p.createElement(d,a),p.isValidElement(m))return m}else m=Rrt(a);var g=Vrt(i),x=Ht(a,!0);if(g&&(o==="insideStart"||o==="insideEnd"||o==="end"))return zrt(a,m,x);var y=g?Brt(a):Urt(a);return Q.createElement(gh,yv({className:mn("recharts-label",f)},x,y,{breakAll:h}),m)}Vs.displayName="Label";var wce=function(t){var r=t.cx,s=t.cy,a=t.angle,i=t.startAngle,o=t.endAngle,l=t.r,c=t.radius,d=t.innerRadius,u=t.outerRadius,f=t.x,h=t.y,m=t.top,g=t.left,x=t.width,y=t.height,v=t.clockWise,b=t.labelViewBox;if(b)return b;if(it(x)&&it(y)){if(it(f)&&it(h))return{x:f,y:h,width:x,height:y};if(it(m)&&it(g))return{x:m,y:g,width:x,height:y}}return it(f)&&it(h)?{x:f,y:h,width:0,height:0}:it(r)&&it(s)?{cx:r,cy:s,startAngle:i||a||0,endAngle:o||a||0,innerRadius:d||0,outerRadius:u||c||l||0,clockWise:v}:t.viewBox?t.viewBox:{}},Hrt=function(t,r){return t?t===!0?Q.createElement(Vs,{key:"label-implicit",viewBox:r}):Ds(t)?Q.createElement(Vs,{key:"label-implicit",viewBox:r,value:t}):p.isValidElement(t)?t.type===Vs?p.cloneElement(t,{key:"label-implicit",viewBox:r}):Q.createElement(Vs,{key:"label-implicit",content:t,viewBox:r}):tn(t)?Q.createElement(Vs,{key:"label-implicit",content:t,viewBox:r}):rg(t)?Q.createElement(Vs,yv({viewBox:r},t,{key:"label-implicit"})):null:null},Wrt=function(t,r){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&s&&!t.label)return null;var a=t.children,i=wce(t),o=zi(a,Vs).map(function(c,d){return p.cloneElement(c,{viewBox:r||i,key:"label-".concat(d)})});if(!s)return o;var l=Hrt(t.label,r||i);return[l].concat(_rt(o))};Vs.parseViewBox=wce;Vs.renderCallByParent=Wrt;function qrt(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var Grt=qrt;const Yrt=qn(Grt);function vv(e){"@babel/helpers - typeof";return vv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vv(e)}var Qrt=["valueAccessor"],Krt=["data","dataKey","clockWise","id","textBreakAll"];function Jrt(e){return tst(e)||est(e)||Xrt(e)||Zrt()}function Zrt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xrt(e,t){if(e){if(typeof e=="string")return K_(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return K_(e,t)}}function est(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function tst(e){if(Array.isArray(e))return K_(e)}function K_(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function G2(){return G2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},G2.apply(this,arguments)}function CF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function kF(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?CF(Object(r),!0).forEach(function(s){nst(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):CF(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function nst(e,t,r){return t=rst(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rst(e){var t=sst(e,"string");return vv(t)=="symbol"?t:t+""}function sst(e,t){if(vv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(vv(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function MF(e,t){if(e==null)return{};var r=ast(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function ast(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}var ist=function(t){return Array.isArray(t.value)?Yrt(t.value):t.value};function Bc(e){var t=e.valueAccessor,r=t===void 0?ist:t,s=MF(e,Qrt),a=s.data,i=s.dataKey,o=s.clockWise,l=s.id,c=s.textBreakAll,d=MF(s,Krt);return!a||!a.length?null:Q.createElement(Bn,{className:"recharts-label-list"},a.map(function(u,f){var h=dn(i)?r(u,f):As(u&&u.payload,i),m=dn(l)?{}:{id:"".concat(l,"-").concat(f)};return Q.createElement(Vs,G2({},Ht(u,!0),d,m,{parentViewBox:u.parentViewBox,value:h,textBreakAll:c,viewBox:Vs.parseViewBox(dn(o)?u:kF(kF({},u),{},{clockWise:o})),key:"label-".concat(f),index:f}))}))}Bc.displayName="LabelList";function ost(e,t){return e?e===!0?Q.createElement(Bc,{key:"labelList-implicit",data:t}):Q.isValidElement(e)||tn(e)?Q.createElement(Bc,{key:"labelList-implicit",data:t,content:e}):rg(e)?Q.createElement(Bc,G2({data:t},e,{key:"labelList-implicit"})):null:null}function lst(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var s=e.children,a=zi(s,Bc).map(function(o,l){return p.cloneElement(o,{data:t,key:"labelList-".concat(l)})});if(!r)return a;var i=ost(e.label,t);return[i].concat(Jrt(a))}Bc.renderCallByParent=lst;function bv(e){"@babel/helpers - typeof";return bv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bv(e)}function J_(){return J_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},J_.apply(this,arguments)}function _F(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function PF(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_F(Object(r),!0).forEach(function(s){cst(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_F(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function cst(e,t,r){return t=dst(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dst(e){var t=ust(e,"string");return bv(t)=="symbol"?t:t+""}function ust(e,t){if(bv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(bv(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var fst=function(t,r){var s=Ba(r-t),a=Math.min(Math.abs(r-t),359.999);return s*a},Vb=function(t){var r=t.cx,s=t.cy,a=t.radius,i=t.angle,o=t.sign,l=t.isExternal,c=t.cornerRadius,d=t.cornerIsExternal,u=c*(l?1:-1)+a,f=Math.asin(c/u)/q2,h=d?i:i+o*f,m=hr(r,s,u,h),g=hr(r,s,a,h),x=d?i-o*f:i,y=hr(r,s,u*Math.cos(f*q2),x);return{center:m,circleTangency:g,lineTangency:y,theta:f}},jce=function(t){var r=t.cx,s=t.cy,a=t.innerRadius,i=t.outerRadius,o=t.startAngle,l=t.endAngle,c=fst(o,l),d=o+c,u=hr(r,s,i,o),f=hr(r,s,i,d),h="M ".concat(u.x,",").concat(u.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(o>d),`,
    `).concat(f.x,",").concat(f.y,`
  `);if(a>0){var m=hr(r,s,a,o),g=hr(r,s,a,d);h+="L ".concat(g.x,",").concat(g.y,`
            A `).concat(a,",").concat(a,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(o<=d),`,
            `).concat(m.x,",").concat(m.y," Z")}else h+="L ".concat(r,",").concat(s," Z");return h},hst=function(t){var r=t.cx,s=t.cy,a=t.innerRadius,i=t.outerRadius,o=t.cornerRadius,l=t.forceCornerRadius,c=t.cornerIsExternal,d=t.startAngle,u=t.endAngle,f=Ba(u-d),h=Vb({cx:r,cy:s,radius:i,angle:d,sign:f,cornerRadius:o,cornerIsExternal:c}),m=h.circleTangency,g=h.lineTangency,x=h.theta,y=Vb({cx:r,cy:s,radius:i,angle:u,sign:-f,cornerRadius:o,cornerIsExternal:c}),v=y.circleTangency,b=y.lineTangency,w=y.theta,N=c?Math.abs(d-u):Math.abs(d-u)-x-w;if(N<0)return l?"M ".concat(g.x,",").concat(g.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):jce({cx:r,cy:s,innerRadius:a,outerRadius:i,startAngle:d,endAngle:u});var j="M ".concat(g.x,",").concat(g.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(m.x,",").concat(m.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(N>180),",").concat(+(f<0),",").concat(v.x,",").concat(v.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(b.x,",").concat(b.y,`
  `);if(a>0){var S=Vb({cx:r,cy:s,radius:a,angle:d,sign:f,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),C=S.circleTangency,k=S.lineTangency,M=S.theta,A=Vb({cx:r,cy:s,radius:a,angle:u,sign:-f,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),P=A.circleTangency,T=A.lineTangency,I=A.theta,L=c?Math.abs(d-u):Math.abs(d-u)-M-I;if(L<0&&o===0)return"".concat(j,"L").concat(r,",").concat(s,"Z");j+="L".concat(T.x,",").concat(T.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(P.x,",").concat(P.y,`
      A`).concat(a,",").concat(a,",0,").concat(+(L>180),",").concat(+(f>0),",").concat(C.x,",").concat(C.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(k.x,",").concat(k.y,"Z")}else j+="L".concat(r,",").concat(s,"Z");return j},mst={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},Nce=function(t){var r=PF(PF({},mst),t),s=r.cx,a=r.cy,i=r.innerRadius,o=r.outerRadius,l=r.cornerRadius,c=r.forceCornerRadius,d=r.cornerIsExternal,u=r.startAngle,f=r.endAngle,h=r.className;if(o<i||u===f)return null;var m=mn("recharts-sector",h),g=o-i,x=Ua(l,g,0,!0),y;return x>0&&Math.abs(u-f)<360?y=hst({cx:s,cy:a,innerRadius:i,outerRadius:o,cornerRadius:Math.min(x,g/2),forceCornerRadius:c,cornerIsExternal:d,startAngle:u,endAngle:f}):y=jce({cx:s,cy:a,innerRadius:i,outerRadius:o,startAngle:u,endAngle:f}),Q.createElement("path",J_({},Ht(r,!0),{className:m,d:y,role:"img"}))};function wv(e){"@babel/helpers - typeof";return wv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wv(e)}function Z_(){return Z_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Z_.apply(this,arguments)}function TF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function AF(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?TF(Object(r),!0).forEach(function(s){pst(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):TF(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function pst(e,t,r){return t=gst(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gst(e){var t=xst(e,"string");return wv(t)=="symbol"?t:t+""}function xst(e,t){if(wv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(wv(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var EF={curveBasisClosed:hVe,curveBasisOpen:mVe,curveBasis:fVe,curveBumpX:ZUe,curveBumpY:XUe,curveLinearClosed:pVe,curveLinear:v3,curveMonotoneX:gVe,curveMonotoneY:xVe,curveNatural:yVe,curveStep:vVe,curveStepAfter:wVe,curveStepBefore:bVe},Hb=function(t){return t.x===+t.x&&t.y===+t.y},Vg=function(t){return t.x},Hg=function(t){return t.y},yst=function(t,r){if(tn(t))return t;var s="curve".concat(x3(t));return(s==="curveMonotone"||s==="curveBump")&&r?EF["".concat(s).concat(r==="vertical"?"Y":"X")]:EF[s]||v3},vst=function(t){var r=t.type,s=r===void 0?"linear":r,a=t.points,i=a===void 0?[]:a,o=t.baseLine,l=t.layout,c=t.connectNulls,d=c===void 0?!1:c,u=yst(s,l),f=d?i.filter(function(x){return Hb(x)}):i,h;if(Array.isArray(o)){var m=d?o.filter(function(x){return Hb(x)}):o,g=f.map(function(x,y){return AF(AF({},x),{},{base:m[y]})});return l==="vertical"?h=Lb().y(Hg).x1(Vg).x0(function(x){return x.base.x}):h=Lb().x(Vg).y1(Hg).y0(function(x){return x.base.y}),h.defined(Hb).curve(u),h(g)}return l==="vertical"&&it(o)?h=Lb().y(Hg).x1(Vg).x0(o):it(o)?h=Lb().x(Vg).y1(Hg).y0(o):h=xoe().x(Vg).y(Hg),h.defined(Hb).curve(u),h(f)},Y2=function(t){var r=t.className,s=t.points,a=t.path,i=t.pathRef;if((!s||!s.length)&&!a)return null;var o=s&&s.length?vst(t):a;return Q.createElement("path",Z_({},Ht(t,!1),y2(t),{className:mn("recharts-curve",r),d:o,ref:i}))},Sce={exports:{}},bst="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",wst=bst,jst=wst;function Cce(){}function kce(){}kce.resetWarningCache=Cce;var Nst=function(){function e(s,a,i,o,l,c){if(c!==jst){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:kce,resetWarningCache:Cce};return r.PropTypes=r,r};Sce.exports=Nst();var Sst=Sce.exports;const Gn=qn(Sst);var Cst=Object.getOwnPropertyNames,kst=Object.getOwnPropertySymbols,Mst=Object.prototype.hasOwnProperty;function IF(e,t){return function(s,a,i){return e(s,a,i)&&t(s,a,i)}}function Wb(e){return function(r,s,a){if(!r||!s||typeof r!="object"||typeof s!="object")return e(r,s,a);var i=a.cache,o=i.get(r),l=i.get(s);if(o&&l)return o===s&&l===r;i.set(r,s),i.set(s,r);var c=e(r,s,a);return i.delete(r),i.delete(s),c}}function LF(e){return Cst(e).concat(kst(e))}var _st=Object.hasOwn||function(e,t){return Mst.call(e,t)};function Rh(e,t){return e===t||!e&&!t&&e!==e&&t!==t}var Pst="__v",Tst="__o",Ast="_owner",DF=Object.getOwnPropertyDescriptor,$F=Object.keys;function Est(e,t,r){var s=e.length;if(t.length!==s)return!1;for(;s-- >0;)if(!r.equals(e[s],t[s],s,s,e,t,r))return!1;return!0}function Ist(e,t){return Rh(e.getTime(),t.getTime())}function Lst(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function Dst(e,t){return e===t}function OF(e,t,r){var s=e.size;if(s!==t.size)return!1;if(!s)return!0;for(var a=new Array(s),i=e.entries(),o,l,c=0;(o=i.next())&&!o.done;){for(var d=t.entries(),u=!1,f=0;(l=d.next())&&!l.done;){if(a[f]){f++;continue}var h=o.value,m=l.value;if(r.equals(h[0],m[0],c,f,e,t,r)&&r.equals(h[1],m[1],h[0],m[0],e,t,r)){u=a[f]=!0;break}f++}if(!u)return!1;c++}return!0}var $st=Rh;function Ost(e,t,r){var s=$F(e),a=s.length;if($F(t).length!==a)return!1;for(;a-- >0;)if(!Mce(e,t,r,s[a]))return!1;return!0}function Wg(e,t,r){var s=LF(e),a=s.length;if(LF(t).length!==a)return!1;for(var i,o,l;a-- >0;)if(i=s[a],!Mce(e,t,r,i)||(o=DF(e,i),l=DF(t,i),(o||l)&&(!o||!l||o.configurable!==l.configurable||o.enumerable!==l.enumerable||o.writable!==l.writable)))return!1;return!0}function Rst(e,t){return Rh(e.valueOf(),t.valueOf())}function Fst(e,t){return e.source===t.source&&e.flags===t.flags}function RF(e,t,r){var s=e.size;if(s!==t.size)return!1;if(!s)return!0;for(var a=new Array(s),i=e.values(),o,l;(o=i.next())&&!o.done;){for(var c=t.values(),d=!1,u=0;(l=c.next())&&!l.done;){if(!a[u]&&r.equals(o.value,l.value,o.value,l.value,e,t,r)){d=a[u]=!0;break}u++}if(!d)return!1}return!0}function zst(e,t){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}function Bst(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function Mce(e,t,r,s){return(s===Ast||s===Tst||s===Pst)&&(e.$$typeof||t.$$typeof)?!0:_st(t,s)&&r.equals(e[s],t[s],s,s,e,t,r)}var Ust="[object Arguments]",Vst="[object Boolean]",Hst="[object Date]",Wst="[object Error]",qst="[object Map]",Gst="[object Number]",Yst="[object Object]",Qst="[object RegExp]",Kst="[object Set]",Jst="[object String]",Zst="[object URL]",Xst=Array.isArray,FF=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,zF=Object.assign,eat=Object.prototype.toString.call.bind(Object.prototype.toString);function tat(e){var t=e.areArraysEqual,r=e.areDatesEqual,s=e.areErrorsEqual,a=e.areFunctionsEqual,i=e.areMapsEqual,o=e.areNumbersEqual,l=e.areObjectsEqual,c=e.arePrimitiveWrappersEqual,d=e.areRegExpsEqual,u=e.areSetsEqual,f=e.areTypedArraysEqual,h=e.areUrlsEqual;return function(g,x,y){if(g===x)return!0;if(g==null||x==null)return!1;var v=typeof g;if(v!==typeof x)return!1;if(v!=="object")return v==="number"?o(g,x,y):v==="function"?a(g,x,y):!1;var b=g.constructor;if(b!==x.constructor)return!1;if(b===Object)return l(g,x,y);if(Xst(g))return t(g,x,y);if(FF!=null&&FF(g))return f(g,x,y);if(b===Date)return r(g,x,y);if(b===RegExp)return d(g,x,y);if(b===Map)return i(g,x,y);if(b===Set)return u(g,x,y);var w=eat(g);return w===Hst?r(g,x,y):w===Qst?d(g,x,y):w===qst?i(g,x,y):w===Kst?u(g,x,y):w===Yst?typeof g.then!="function"&&typeof x.then!="function"&&l(g,x,y):w===Zst?h(g,x,y):w===Wst?s(g,x,y):w===Ust?l(g,x,y):w===Vst||w===Gst||w===Jst?c(g,x,y):!1}}function nat(e){var t=e.circular,r=e.createCustomConfig,s=e.strict,a={areArraysEqual:s?Wg:Est,areDatesEqual:Ist,areErrorsEqual:Lst,areFunctionsEqual:Dst,areMapsEqual:s?IF(OF,Wg):OF,areNumbersEqual:$st,areObjectsEqual:s?Wg:Ost,arePrimitiveWrappersEqual:Rst,areRegExpsEqual:Fst,areSetsEqual:s?IF(RF,Wg):RF,areTypedArraysEqual:s?Wg:zst,areUrlsEqual:Bst};if(r&&(a=zF({},a,r(a))),t){var i=Wb(a.areArraysEqual),o=Wb(a.areMapsEqual),l=Wb(a.areObjectsEqual),c=Wb(a.areSetsEqual);a=zF({},a,{areArraysEqual:i,areMapsEqual:o,areObjectsEqual:l,areSetsEqual:c})}return a}function rat(e){return function(t,r,s,a,i,o,l){return e(t,r,l)}}function sat(e){var t=e.circular,r=e.comparator,s=e.createState,a=e.equals,i=e.strict;if(s)return function(c,d){var u=s(),f=u.cache,h=f===void 0?t?new WeakMap:void 0:f,m=u.meta;return r(c,d,{cache:h,equals:a,meta:m,strict:i})};if(t)return function(c,d){return r(c,d,{cache:new WeakMap,equals:a,meta:void 0,strict:i})};var o={cache:void 0,equals:a,meta:void 0,strict:i};return function(c,d){return r(c,d,o)}}var aat=qu();qu({strict:!0});qu({circular:!0});qu({circular:!0,strict:!0});qu({createInternalComparator:function(){return Rh}});qu({strict:!0,createInternalComparator:function(){return Rh}});qu({circular:!0,createInternalComparator:function(){return Rh}});qu({circular:!0,createInternalComparator:function(){return Rh},strict:!0});function qu(e){e===void 0&&(e={});var t=e.circular,r=t===void 0?!1:t,s=e.createInternalComparator,a=e.createState,i=e.strict,o=i===void 0?!1:i,l=nat(e),c=tat(l),d=s?s(c):rat(c);return sat({circular:r,comparator:c,createState:a,equals:d,strict:o})}function iat(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function BF(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,s=function a(i){r<0&&(r=i),i-r>t?(e(i),r=-1):iat(a)};requestAnimationFrame(s)}function X_(e){"@babel/helpers - typeof";return X_=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},X_(e)}function oat(e){return uat(e)||dat(e)||cat(e)||lat()}function lat(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cat(e,t){if(e){if(typeof e=="string")return UF(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return UF(e,t)}}function UF(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function dat(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function uat(e){if(Array.isArray(e))return e}function fat(){var e={},t=function(){return null},r=!1,s=function a(i){if(!r){if(Array.isArray(i)){if(!i.length)return;var o=i,l=oat(o),c=l[0],d=l.slice(1);if(typeof c=="number"){BF(a.bind(null,d),c);return}a(c),BF(a.bind(null,d));return}X_(i)==="object"&&(e=i,t(e)),typeof i=="function"&&i()}};return{stop:function(){r=!0},start:function(i){r=!1,s(i)},subscribe:function(i){return t=i,function(){t=function(){return null}}}}}function jv(e){"@babel/helpers - typeof";return jv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jv(e)}function VF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function HF(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?VF(Object(r),!0).forEach(function(s){_ce(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):VF(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function _ce(e,t,r){return t=hat(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hat(e){var t=mat(e,"string");return jv(t)==="symbol"?t:String(t)}function mat(e,t){if(jv(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(jv(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var pat=function(t,r){return[Object.keys(t),Object.keys(r)].reduce(function(s,a){return s.filter(function(i){return a.includes(i)})})},gat=function(t){return t},xat=function(t){return t.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},zx=function(t,r){return Object.keys(r).reduce(function(s,a){return HF(HF({},s),{},_ce({},a,t(a,r[a])))},{})},WF=function(t,r,s){return t.map(function(a){return"".concat(xat(a)," ").concat(r,"ms ").concat(s)}).join(",")};function yat(e,t){return wat(e)||bat(e,t)||Pce(e,t)||vat()}function vat(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bat(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s,a,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(s=i.call(r)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function wat(e){if(Array.isArray(e))return e}function jat(e){return Cat(e)||Sat(e)||Pce(e)||Nat()}function Nat(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Pce(e,t){if(e){if(typeof e=="string")return e5(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return e5(e,t)}}function Sat(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Cat(e){if(Array.isArray(e))return e5(e)}function e5(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}var Q2=1e-4,Tce=function(t,r){return[0,3*t,3*r-6*t,3*t-3*r+1]},Ace=function(t,r){return t.map(function(s,a){return s*Math.pow(r,a)}).reduce(function(s,a){return s+a})},qF=function(t,r){return function(s){var a=Tce(t,r);return Ace(a,s)}},kat=function(t,r){return function(s){var a=Tce(t,r),i=[].concat(jat(a.map(function(o,l){return o*l}).slice(1)),[0]);return Ace(i,s)}},GF=function(){for(var t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];var a=r[0],i=r[1],o=r[2],l=r[3];if(r.length===1)switch(r[0]){case"linear":a=0,i=0,o=1,l=1;break;case"ease":a=.25,i=.1,o=.25,l=1;break;case"ease-in":a=.42,i=0,o=1,l=1;break;case"ease-out":a=.42,i=0,o=.58,l=1;break;case"ease-in-out":a=0,i=0,o=.58,l=1;break;default:{var c=r[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var d=c[1].split(")")[0].split(",").map(function(y){return parseFloat(y)}),u=yat(d,4);a=u[0],i=u[1],o=u[2],l=u[3]}}}var f=qF(a,o),h=qF(i,l),m=kat(a,o),g=function(v){return v>1?1:v<0?0:v},x=function(v){for(var b=v>1?1:v,w=b,N=0;N<8;++N){var j=f(w)-b,S=m(w);if(Math.abs(j-b)<Q2||S<Q2)return h(w);w=g(w-j/S)}return h(w)};return x.isStepper=!1,x},Mat=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.stiff,s=r===void 0?100:r,a=t.damping,i=a===void 0?8:a,o=t.dt,l=o===void 0?17:o,c=function(u,f,h){var m=-(u-f)*s,g=h*i,x=h+(m-g)*l/1e3,y=h*l/1e3+u;return Math.abs(y-f)<Q2&&Math.abs(x)<Q2?[f,0]:[y,x]};return c.isStepper=!0,c.dt=l,c},_at=function(){for(var t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];var a=r[0];if(typeof a=="string")switch(a){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return GF(a);case"spring":return Mat();default:if(a.split("(")[0]==="cubic-bezier")return GF(a)}return typeof a=="function"?a:null};function Nv(e){"@babel/helpers - typeof";return Nv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nv(e)}function YF(e){return Aat(e)||Tat(e)||Ece(e)||Pat()}function Pat(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Tat(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Aat(e){if(Array.isArray(e))return n5(e)}function QF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function ea(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?QF(Object(r),!0).forEach(function(s){t5(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):QF(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function t5(e,t,r){return t=Eat(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Eat(e){var t=Iat(e,"string");return Nv(t)==="symbol"?t:String(t)}function Iat(e,t){if(Nv(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(Nv(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Lat(e,t){return Oat(e)||$at(e,t)||Ece(e,t)||Dat()}function Dat(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ece(e,t){if(e){if(typeof e=="string")return n5(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return n5(e,t)}}function n5(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function $at(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s,a,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(s=i.call(r)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function Oat(e){if(Array.isArray(e))return e}var K2=function(t,r,s){return t+(r-t)*s},r5=function(t){var r=t.from,s=t.to;return r!==s},Rat=function e(t,r,s){var a=zx(function(i,o){if(r5(o)){var l=t(o.from,o.to,o.velocity),c=Lat(l,2),d=c[0],u=c[1];return ea(ea({},o),{},{from:d,velocity:u})}return o},r);return s<1?zx(function(i,o){return r5(o)?ea(ea({},o),{},{velocity:K2(o.velocity,a[i].velocity,s),from:K2(o.from,a[i].from,s)}):o},r):e(t,a,s-1)};const Fat=function(e,t,r,s,a){var i=pat(e,t),o=i.reduce(function(y,v){return ea(ea({},y),{},t5({},v,[e[v],t[v]]))},{}),l=i.reduce(function(y,v){return ea(ea({},y),{},t5({},v,{from:e[v],velocity:0,to:t[v]}))},{}),c=-1,d,u,f=function(){return null},h=function(){return zx(function(v,b){return b.from},l)},m=function(){return!Object.values(l).filter(r5).length},g=function(v){d||(d=v);var b=v-d,w=b/r.dt;l=Rat(r,l,w),a(ea(ea(ea({},e),t),h())),d=v,m()||(c=requestAnimationFrame(f))},x=function(v){u||(u=v);var b=(v-u)/s,w=zx(function(j,S){return K2.apply(void 0,YF(S).concat([r(b)]))},o);if(a(ea(ea(ea({},e),t),w)),b<1)c=requestAnimationFrame(f);else{var N=zx(function(j,S){return K2.apply(void 0,YF(S).concat([r(1)]))},o);a(ea(ea(ea({},e),t),N))}};return f=r.isStepper?g:x,function(){return requestAnimationFrame(f),function(){cancelAnimationFrame(c)}}};function n0(e){"@babel/helpers - typeof";return n0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n0(e)}var zat=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function Bat(e,t){if(e==null)return{};var r=Uat(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function Uat(e,t){if(e==null)return{};var r={},s=Object.keys(e),a,i;for(i=0;i<s.length;i++)a=s[i],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function ok(e){return qat(e)||Wat(e)||Hat(e)||Vat()}function Vat(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Hat(e,t){if(e){if(typeof e=="string")return s5(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s5(e,t)}}function Wat(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function qat(e){if(Array.isArray(e))return s5(e)}function s5(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function KF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function $o(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?KF(Object(r),!0).forEach(function(s){cx(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):KF(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function cx(e,t,r){return t=Ice(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Gat(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Yat(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,Ice(s.key),s)}}function Qat(e,t,r){return t&&Yat(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ice(e){var t=Kat(e,"string");return n0(t)==="symbol"?t:String(t)}function Kat(e,t){if(n0(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(n0(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Jat(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a5(e,t)}function a5(e,t){return a5=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},a5(e,t)}function Zat(e){var t=Xat();return function(){var s=J2(e),a;if(t){var i=J2(this).constructor;a=Reflect.construct(s,arguments,i)}else a=s.apply(this,arguments);return i5(this,a)}}function i5(e,t){if(t&&(n0(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return o5(e)}function o5(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Xat(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function J2(e){return J2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},J2(e)}var rc=function(e){Jat(r,e);var t=Zat(r);function r(s,a){var i;Gat(this,r),i=t.call(this,s,a);var o=i.props,l=o.isActive,c=o.attributeName,d=o.from,u=o.to,f=o.steps,h=o.children,m=o.duration;if(i.handleStyleChange=i.handleStyleChange.bind(o5(i)),i.changeStyle=i.changeStyle.bind(o5(i)),!l||m<=0)return i.state={style:{}},typeof h=="function"&&(i.state={style:u}),i5(i);if(f&&f.length)i.state={style:f[0].style};else if(d){if(typeof h=="function")return i.state={style:d},i5(i);i.state={style:c?cx({},c,d):d}}else i.state={style:{}};return i}return Qat(r,[{key:"componentDidMount",value:function(){var a=this.props,i=a.isActive,o=a.canBegin;this.mounted=!0,!(!i||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(a){var i=this.props,o=i.isActive,l=i.canBegin,c=i.attributeName,d=i.shouldReAnimate,u=i.to,f=i.from,h=this.state.style;if(l){if(!o){var m={style:c?cx({},c,u):u};this.state&&h&&(c&&h[c]!==u||!c&&h!==u)&&this.setState(m);return}if(!(aat(a.to,u)&&a.canBegin&&a.isActive)){var g=!a.canBegin||!a.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var x=g||d?f:a.to;if(this.state&&h){var y={style:c?cx({},c,x):x};(c&&h[c]!==x||!c&&h!==x)&&this.setState(y)}this.runAnimation($o($o({},this.props),{},{from:x,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var a=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),a&&a()}},{key:"handleStyleChange",value:function(a){this.changeStyle(a)}},{key:"changeStyle",value:function(a){this.mounted&&this.setState({style:a})}},{key:"runJSAnimation",value:function(a){var i=this,o=a.from,l=a.to,c=a.duration,d=a.easing,u=a.begin,f=a.onAnimationEnd,h=a.onAnimationStart,m=Fat(o,l,_at(d),c,this.changeStyle),g=function(){i.stopJSAnimation=m()};this.manager.start([h,u,g,c,f])}},{key:"runStepAnimation",value:function(a){var i=this,o=a.steps,l=a.begin,c=a.onAnimationStart,d=o[0],u=d.style,f=d.duration,h=f===void 0?0:f,m=function(x,y,v){if(v===0)return x;var b=y.duration,w=y.easing,N=w===void 0?"ease":w,j=y.style,S=y.properties,C=y.onAnimationEnd,k=v>0?o[v-1]:y,M=S||Object.keys(j);if(typeof N=="function"||N==="spring")return[].concat(ok(x),[i.runJSAnimation.bind(i,{from:k.style,to:j,duration:b,easing:N}),b]);var A=WF(M,b,N),P=$o($o($o({},k.style),j),{},{transition:A});return[].concat(ok(x),[P,b,C]).filter(gat)};return this.manager.start([c].concat(ok(o.reduce(m,[u,Math.max(h,l)])),[a.onAnimationEnd]))}},{key:"runAnimation",value:function(a){this.manager||(this.manager=fat());var i=a.begin,o=a.duration,l=a.attributeName,c=a.to,d=a.easing,u=a.onAnimationStart,f=a.onAnimationEnd,h=a.steps,m=a.children,g=this.manager;if(this.unSubscribe=g.subscribe(this.handleStyleChange),typeof d=="function"||typeof m=="function"||d==="spring"){this.runJSAnimation(a);return}if(h.length>1){this.runStepAnimation(a);return}var x=l?cx({},l,c):c,y=WF(Object.keys(x),o,d);g.start([u,i,$o($o({},x),{},{transition:y}),o,f])}},{key:"render",value:function(){var a=this.props,i=a.children;a.begin;var o=a.duration;a.attributeName,a.easing;var l=a.isActive;a.steps,a.from,a.to,a.canBegin,a.onAnimationEnd,a.shouldReAnimate,a.onAnimationReStart;var c=Bat(a,zat),d=p.Children.count(i),u=this.state.style;if(typeof i=="function")return i(u);if(!l||d===0||o<=0)return i;var f=function(m){var g=m.props,x=g.style,y=x===void 0?{}:x,v=g.className,b=p.cloneElement(m,$o($o({},c),{},{style:$o($o({},y),u),className:v}));return b};return d===1?f(p.Children.only(i)):Q.createElement("div",null,p.Children.map(i,function(h){return f(h)}))}}]),r}(p.PureComponent);rc.displayName="Animate";rc.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};rc.propTypes={from:Gn.oneOfType([Gn.object,Gn.string]),to:Gn.oneOfType([Gn.object,Gn.string]),attributeName:Gn.string,duration:Gn.number,begin:Gn.number,easing:Gn.oneOfType([Gn.string,Gn.func]),steps:Gn.arrayOf(Gn.shape({duration:Gn.number.isRequired,style:Gn.object.isRequired,easing:Gn.oneOfType([Gn.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),Gn.func]),properties:Gn.arrayOf("string"),onAnimationEnd:Gn.func})),children:Gn.oneOfType([Gn.node,Gn.func]),isActive:Gn.bool,canBegin:Gn.bool,onAnimationEnd:Gn.func,shouldReAnimate:Gn.bool,onAnimationStart:Gn.func,onAnimationReStart:Gn.func};function Sv(e){"@babel/helpers - typeof";return Sv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sv(e)}function Z2(){return Z2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Z2.apply(this,arguments)}function eit(e,t){return sit(e)||rit(e,t)||nit(e,t)||tit()}function tit(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nit(e,t){if(e){if(typeof e=="string")return JF(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return JF(e,t)}}function JF(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function rit(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s,a,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(s=i.call(r)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function sit(e){if(Array.isArray(e))return e}function ZF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function XF(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ZF(Object(r),!0).forEach(function(s){ait(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ZF(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function ait(e,t,r){return t=iit(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function iit(e){var t=oit(e,"string");return Sv(t)=="symbol"?t:t+""}function oit(e,t){if(Sv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(Sv(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ez=function(t,r,s,a,i){var o=Math.min(Math.abs(s)/2,Math.abs(a)/2),l=a>=0?1:-1,c=s>=0?1:-1,d=a>=0&&s>=0||a<0&&s<0?1:0,u;if(o>0&&i instanceof Array){for(var f=[0,0,0,0],h=0,m=4;h<m;h++)f[h]=i[h]>o?o:i[h];u="M".concat(t,",").concat(r+l*f[0]),f[0]>0&&(u+="A ".concat(f[0],",").concat(f[0],",0,0,").concat(d,",").concat(t+c*f[0],",").concat(r)),u+="L ".concat(t+s-c*f[1],",").concat(r),f[1]>0&&(u+="A ".concat(f[1],",").concat(f[1],",0,0,").concat(d,`,
        `).concat(t+s,",").concat(r+l*f[1])),u+="L ".concat(t+s,",").concat(r+a-l*f[2]),f[2]>0&&(u+="A ".concat(f[2],",").concat(f[2],",0,0,").concat(d,`,
        `).concat(t+s-c*f[2],",").concat(r+a)),u+="L ".concat(t+c*f[3],",").concat(r+a),f[3]>0&&(u+="A ".concat(f[3],",").concat(f[3],",0,0,").concat(d,`,
        `).concat(t,",").concat(r+a-l*f[3])),u+="Z"}else if(o>0&&i===+i&&i>0){var g=Math.min(o,i);u="M ".concat(t,",").concat(r+l*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(d,",").concat(t+c*g,",").concat(r,`
            L `).concat(t+s-c*g,",").concat(r,`
            A `).concat(g,",").concat(g,",0,0,").concat(d,",").concat(t+s,",").concat(r+l*g,`
            L `).concat(t+s,",").concat(r+a-l*g,`
            A `).concat(g,",").concat(g,",0,0,").concat(d,",").concat(t+s-c*g,",").concat(r+a,`
            L `).concat(t+c*g,",").concat(r+a,`
            A `).concat(g,",").concat(g,",0,0,").concat(d,",").concat(t,",").concat(r+a-l*g," Z")}else u="M ".concat(t,",").concat(r," h ").concat(s," v ").concat(a," h ").concat(-s," Z");return u},lit=function(t,r){if(!t||!r)return!1;var s=t.x,a=t.y,i=r.x,o=r.y,l=r.width,c=r.height;if(Math.abs(l)>0&&Math.abs(c)>0){var d=Math.min(i,i+l),u=Math.max(i,i+l),f=Math.min(o,o+c),h=Math.max(o,o+c);return s>=d&&s<=u&&a>=f&&a<=h}return!1},cit={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},YI=function(t){var r=XF(XF({},cit),t),s=p.useRef(),a=p.useState(-1),i=eit(a,2),o=i[0],l=i[1];p.useEffect(function(){if(s.current&&s.current.getTotalLength)try{var N=s.current.getTotalLength();N&&l(N)}catch{}},[]);var c=r.x,d=r.y,u=r.width,f=r.height,h=r.radius,m=r.className,g=r.animationEasing,x=r.animationDuration,y=r.animationBegin,v=r.isAnimationActive,b=r.isUpdateAnimationActive;if(c!==+c||d!==+d||u!==+u||f!==+f||u===0||f===0)return null;var w=mn("recharts-rectangle",m);return b?Q.createElement(rc,{canBegin:o>0,from:{width:u,height:f,x:c,y:d},to:{width:u,height:f,x:c,y:d},duration:x,animationEasing:g,isActive:b},function(N){var j=N.width,S=N.height,C=N.x,k=N.y;return Q.createElement(rc,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:y,duration:x,isActive:v,easing:g},Q.createElement("path",Z2({},Ht(r,!0),{className:w,d:ez(C,k,j,S,h),ref:s})))}):Q.createElement("path",Z2({},Ht(r,!0),{className:w,d:ez(c,d,u,f,h)}))},dit=["points","className","baseLinePoints","connectNulls"];function Sm(){return Sm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Sm.apply(this,arguments)}function uit(e,t){if(e==null)return{};var r=fit(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function fit(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}function tz(e){return git(e)||pit(e)||mit(e)||hit()}function hit(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mit(e,t){if(e){if(typeof e=="string")return l5(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l5(e,t)}}function pit(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function git(e){if(Array.isArray(e))return l5(e)}function l5(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}var nz=function(t){return t&&t.x===+t.x&&t.y===+t.y},xit=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return t.forEach(function(s){nz(s)?r[r.length-1].push(s):r[r.length-1].length>0&&r.push([])}),nz(t[0])&&r[r.length-1].push(t[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},Bx=function(t,r){var s=xit(t);r&&(s=[s.reduce(function(i,o){return[].concat(tz(i),tz(o))},[])]);var a=s.map(function(i){return i.reduce(function(o,l,c){return"".concat(o).concat(c===0?"M":"L").concat(l.x,",").concat(l.y)},"")}).join("");return s.length===1?"".concat(a,"Z"):a},yit=function(t,r,s){var a=Bx(t,s);return"".concat(a.slice(-1)==="Z"?a.slice(0,-1):a,"L").concat(Bx(r.reverse(),s).slice(1))},vit=function(t){var r=t.points,s=t.className,a=t.baseLinePoints,i=t.connectNulls,o=uit(t,dit);if(!r||!r.length)return null;var l=mn("recharts-polygon",s);if(a&&a.length){var c=o.stroke&&o.stroke!=="none",d=yit(r,a,i);return Q.createElement("g",{className:l},Q.createElement("path",Sm({},Ht(o,!0),{fill:d.slice(-1)==="Z"?o.fill:"none",stroke:"none",d})),c?Q.createElement("path",Sm({},Ht(o,!0),{fill:"none",d:Bx(r,i)})):null,c?Q.createElement("path",Sm({},Ht(o,!0),{fill:"none",d:Bx(a,i)})):null)}var u=Bx(r,i);return Q.createElement("path",Sm({},Ht(o,!0),{fill:u.slice(-1)==="Z"?o.fill:"none",className:l,d:u}))};function c5(){return c5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},c5.apply(this,arguments)}var $3=function(t){var r=t.cx,s=t.cy,a=t.r,i=t.className,o=mn("recharts-dot",i);return r===+r&&s===+s&&a===+a?Q.createElement("circle",c5({},Ht(t,!1),y2(t),{className:o,cx:r,cy:s,r:a})):null};function Cv(e){"@babel/helpers - typeof";return Cv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cv(e)}var bit=["x","y","top","left","width","height","className"];function d5(){return d5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},d5.apply(this,arguments)}function rz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function wit(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?rz(Object(r),!0).forEach(function(s){jit(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rz(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function jit(e,t,r){return t=Nit(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Nit(e){var t=Sit(e,"string");return Cv(t)=="symbol"?t:t+""}function Sit(e,t){if(Cv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(Cv(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Cit(e,t){if(e==null)return{};var r=kit(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function kit(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}var Mit=function(t,r,s,a,i,o){return"M".concat(t,",").concat(i,"v").concat(a,"M").concat(o,",").concat(r,"h").concat(s)},_it=function(t){var r=t.x,s=r===void 0?0:r,a=t.y,i=a===void 0?0:a,o=t.top,l=o===void 0?0:o,c=t.left,d=c===void 0?0:c,u=t.width,f=u===void 0?0:u,h=t.height,m=h===void 0?0:h,g=t.className,x=Cit(t,bit),y=wit({x:s,y:i,top:l,left:d,width:f,height:m},x);return!it(s)||!it(i)||!it(f)||!it(m)||!it(l)||!it(d)?null:Q.createElement("path",d5({},Ht(y,!0),{className:mn("recharts-cross",g),d:Mit(s,i,f,m,l,d)}))},Pit=A3,Tit=Wle,Ait=oc;function Eit(e,t){return e&&e.length?Pit(e,Ait(t),Tit):void 0}var Iit=Eit;const Lit=qn(Iit);var Dit=A3,$it=oc,Oit=qle;function Rit(e,t){return e&&e.length?Dit(e,$it(t),Oit):void 0}var Fit=Rit;const zit=qn(Fit);var Bit=["cx","cy","angle","ticks","axisLine"],Uit=["ticks","tick","angle","tickFormatter","stroke"];function r0(e){"@babel/helpers - typeof";return r0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r0(e)}function Ux(){return Ux=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Ux.apply(this,arguments)}function sz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function Zu(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?sz(Object(r),!0).forEach(function(s){O3(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sz(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function az(e,t){if(e==null)return{};var r=Vit(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function Vit(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}function Hit(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function iz(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,Dce(s.key),s)}}function Wit(e,t,r){return t&&iz(e.prototype,t),r&&iz(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function qit(e,t,r){return t=X2(t),Git(e,Lce()?Reflect.construct(t,r||[],X2(e).constructor):t.apply(e,r))}function Git(e,t){if(t&&(r0(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Yit(e)}function Yit(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Lce(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Lce=function(){return!!e})()}function X2(e){return X2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},X2(e)}function Qit(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u5(e,t)}function u5(e,t){return u5=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},u5(e,t)}function O3(e,t,r){return t=Dce(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Dce(e){var t=Kit(e,"string");return r0(t)=="symbol"?t:t+""}function Kit(e,t){if(r0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(r0(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var R3=function(e){function t(){return Hit(this,t),qit(this,t,arguments)}return Qit(t,e),Wit(t,[{key:"getTickValueCoord",value:function(s){var a=s.coordinate,i=this.props,o=i.angle,l=i.cx,c=i.cy;return hr(l,c,a,o)}},{key:"getTickTextAnchor",value:function(){var s=this.props.orientation,a;switch(s){case"left":a="end";break;case"right":a="start";break;default:a="middle";break}return a}},{key:"getViewBox",value:function(){var s=this.props,a=s.cx,i=s.cy,o=s.angle,l=s.ticks,c=Lit(l,function(u){return u.coordinate||0}),d=zit(l,function(u){return u.coordinate||0});return{cx:a,cy:i,startAngle:o,endAngle:o,innerRadius:d.coordinate||0,outerRadius:c.coordinate||0}}},{key:"renderAxisLine",value:function(){var s=this.props,a=s.cx,i=s.cy,o=s.angle,l=s.ticks,c=s.axisLine,d=az(s,Bit),u=l.reduce(function(g,x){return[Math.min(g[0],x.coordinate),Math.max(g[1],x.coordinate)]},[1/0,-1/0]),f=hr(a,i,u[0],o),h=hr(a,i,u[1],o),m=Zu(Zu(Zu({},Ht(d,!1)),{},{fill:"none"},Ht(c,!1)),{},{x1:f.x,y1:f.y,x2:h.x,y2:h.y});return Q.createElement("line",Ux({className:"recharts-polar-radius-axis-line"},m))}},{key:"renderTicks",value:function(){var s=this,a=this.props,i=a.ticks,o=a.tick,l=a.angle,c=a.tickFormatter,d=a.stroke,u=az(a,Uit),f=this.getTickTextAnchor(),h=Ht(u,!1),m=Ht(o,!1),g=i.map(function(x,y){var v=s.getTickValueCoord(x),b=Zu(Zu(Zu(Zu({textAnchor:f,transform:"rotate(".concat(90-l,", ").concat(v.x,", ").concat(v.y,")")},h),{},{stroke:"none",fill:d},m),{},{index:y},v),{},{payload:x});return Q.createElement(Bn,Ux({className:mn("recharts-polar-radius-axis-tick",bce(o)),key:"tick-".concat(x.coordinate)},ph(s.props,x,y)),t.renderTickItem(o,b,c?c(x.value,y):x.value))});return Q.createElement(Bn,{className:"recharts-polar-radius-axis-ticks"},g)}},{key:"render",value:function(){var s=this.props,a=s.ticks,i=s.axisLine,o=s.tick;return!a||!a.length?null:Q.createElement(Bn,{className:mn("recharts-polar-radius-axis",this.props.className)},i&&this.renderAxisLine(),o&&this.renderTicks(),Vs.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(s,a,i){var o;return Q.isValidElement(s)?o=Q.cloneElement(s,a):tn(s)?o=s(a):o=Q.createElement(gh,Ux({},a,{className:"recharts-polar-radius-axis-tick-value"}),i),o}}])}(p.PureComponent);O3(R3,"displayName","PolarRadiusAxis");O3(R3,"axisType","radiusAxis");O3(R3,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function s0(e){"@babel/helpers - typeof";return s0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s0(e)}function ff(){return ff=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},ff.apply(this,arguments)}function oz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function Xu(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?oz(Object(r),!0).forEach(function(s){F3(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oz(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function Jit(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lz(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,Oce(s.key),s)}}function Zit(e,t,r){return t&&lz(e.prototype,t),r&&lz(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Xit(e,t,r){return t=eN(t),eot(e,$ce()?Reflect.construct(t,r||[],eN(e).constructor):t.apply(e,r))}function eot(e,t){if(t&&(s0(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return tot(e)}function tot(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $ce(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($ce=function(){return!!e})()}function eN(e){return eN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},eN(e)}function not(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f5(e,t)}function f5(e,t){return f5=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},f5(e,t)}function F3(e,t,r){return t=Oce(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Oce(e){var t=rot(e,"string");return s0(t)=="symbol"?t:t+""}function rot(e,t){if(s0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(s0(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var sot=Math.PI/180,cz=1e-5,z3=function(e){function t(){return Jit(this,t),Xit(this,t,arguments)}return not(t,e),Zit(t,[{key:"getTickLineCoord",value:function(s){var a=this.props,i=a.cx,o=a.cy,l=a.radius,c=a.orientation,d=a.tickSize,u=d||8,f=hr(i,o,l,s.coordinate),h=hr(i,o,l+(c==="inner"?-1:1)*u,s.coordinate);return{x1:f.x,y1:f.y,x2:h.x,y2:h.y}}},{key:"getTickTextAnchor",value:function(s){var a=this.props.orientation,i=Math.cos(-s.coordinate*sot),o;return i>cz?o=a==="outer"?"start":"end":i<-cz?o=a==="outer"?"end":"start":o="middle",o}},{key:"renderAxisLine",value:function(){var s=this.props,a=s.cx,i=s.cy,o=s.radius,l=s.axisLine,c=s.axisLineType,d=Xu(Xu({},Ht(this.props,!1)),{},{fill:"none"},Ht(l,!1));if(c==="circle")return Q.createElement($3,ff({className:"recharts-polar-angle-axis-line"},d,{cx:a,cy:i,r:o}));var u=this.props.ticks,f=u.map(function(h){return hr(a,i,o,h.coordinate)});return Q.createElement(vit,ff({className:"recharts-polar-angle-axis-line"},d,{points:f}))}},{key:"renderTicks",value:function(){var s=this,a=this.props,i=a.ticks,o=a.tick,l=a.tickLine,c=a.tickFormatter,d=a.stroke,u=Ht(this.props,!1),f=Ht(o,!1),h=Xu(Xu({},u),{},{fill:"none"},Ht(l,!1)),m=i.map(function(g,x){var y=s.getTickLineCoord(g),v=s.getTickTextAnchor(g),b=Xu(Xu(Xu({textAnchor:v},u),{},{stroke:"none",fill:d},f),{},{index:x,payload:g,x:y.x2,y:y.y2});return Q.createElement(Bn,ff({className:mn("recharts-polar-angle-axis-tick",bce(o)),key:"tick-".concat(g.coordinate)},ph(s.props,g,x)),l&&Q.createElement("line",ff({className:"recharts-polar-angle-axis-tick-line"},h,y)),o&&t.renderTickItem(o,b,c?c(g.value,x):g.value))});return Q.createElement(Bn,{className:"recharts-polar-angle-axis-ticks"},m)}},{key:"render",value:function(){var s=this.props,a=s.ticks,i=s.radius,o=s.axisLine;return i<=0||!a||!a.length?null:Q.createElement(Bn,{className:mn("recharts-polar-angle-axis",this.props.className)},o&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(s,a,i){var o;return Q.isValidElement(s)?o=Q.cloneElement(s,a):tn(s)?o=s(a):o=Q.createElement(gh,ff({},a,{className:"recharts-polar-angle-axis-tick-value"}),i),o}}])}(p.PureComponent);F3(z3,"displayName","PolarAngleAxis");F3(z3,"axisType","angleAxis");F3(z3,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var aot=Boe,iot=aot(Object.getPrototypeOf,Object),oot=iot,lot=hd,cot=oot,dot=md,uot="[object Object]",fot=Function.prototype,hot=Object.prototype,Rce=fot.toString,mot=hot.hasOwnProperty,pot=Rce.call(Object);function got(e){if(!dot(e)||lot(e)!=uot)return!1;var t=cot(e);if(t===null)return!0;var r=mot.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&Rce.call(r)==pot}var xot=got;const yot=qn(xot);var vot=hd,bot=md,wot="[object Boolean]";function jot(e){return e===!0||e===!1||bot(e)&&vot(e)==wot}var Not=jot;const Sot=qn(Not);function kv(e){"@babel/helpers - typeof";return kv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kv(e)}function tN(){return tN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},tN.apply(this,arguments)}function Cot(e,t){return Pot(e)||_ot(e,t)||Mot(e,t)||kot()}function kot(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Mot(e,t){if(e){if(typeof e=="string")return dz(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return dz(e,t)}}function dz(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function _ot(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s,a,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(s=i.call(r)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function Pot(e){if(Array.isArray(e))return e}function uz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function fz(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?uz(Object(r),!0).forEach(function(s){Tot(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uz(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function Tot(e,t,r){return t=Aot(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Aot(e){var t=Eot(e,"string");return kv(t)=="symbol"?t:t+""}function Eot(e,t){if(kv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(kv(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var hz=function(t,r,s,a,i){var o=s-a,l;return l="M ".concat(t,",").concat(r),l+="L ".concat(t+s,",").concat(r),l+="L ".concat(t+s-o/2,",").concat(r+i),l+="L ".concat(t+s-o/2-a,",").concat(r+i),l+="L ".concat(t,",").concat(r," Z"),l},Iot={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Lot=function(t){var r=fz(fz({},Iot),t),s=p.useRef(),a=p.useState(-1),i=Cot(a,2),o=i[0],l=i[1];p.useEffect(function(){if(s.current&&s.current.getTotalLength)try{var w=s.current.getTotalLength();w&&l(w)}catch{}},[]);var c=r.x,d=r.y,u=r.upperWidth,f=r.lowerWidth,h=r.height,m=r.className,g=r.animationEasing,x=r.animationDuration,y=r.animationBegin,v=r.isUpdateAnimationActive;if(c!==+c||d!==+d||u!==+u||f!==+f||h!==+h||u===0&&f===0||h===0)return null;var b=mn("recharts-trapezoid",m);return v?Q.createElement(rc,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:h,x:c,y:d},to:{upperWidth:u,lowerWidth:f,height:h,x:c,y:d},duration:x,animationEasing:g,isActive:v},function(w){var N=w.upperWidth,j=w.lowerWidth,S=w.height,C=w.x,k=w.y;return Q.createElement(rc,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:y,duration:x,easing:g},Q.createElement("path",tN({},Ht(r,!0),{className:b,d:hz(C,k,N,j,S),ref:s})))}):Q.createElement("g",null,Q.createElement("path",tN({},Ht(r,!0),{className:b,d:hz(c,d,u,f,h)})))},Dot=["option","shapeType","propTransformer","activeClassName","isActive"];function Mv(e){"@babel/helpers - typeof";return Mv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mv(e)}function $ot(e,t){if(e==null)return{};var r=Oot(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function Oot(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}function mz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function nN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mz(Object(r),!0).forEach(function(s){Rot(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mz(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function Rot(e,t,r){return t=Fot(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Fot(e){var t=zot(e,"string");return Mv(t)=="symbol"?t:t+""}function zot(e,t){if(Mv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(Mv(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Bot(e,t){return nN(nN({},t),e)}function Uot(e,t){return e==="symbols"}function pz(e){var t=e.shapeType,r=e.elementProps;switch(t){case"rectangle":return Q.createElement(YI,r);case"trapezoid":return Q.createElement(Lot,r);case"sector":return Q.createElement(Nce,r);case"symbols":if(Uot(t))return Q.createElement(hI,r);break;default:return null}}function Vot(e){return p.isValidElement(e)?e.props:e}function Fce(e){var t=e.option,r=e.shapeType,s=e.propTransformer,a=s===void 0?Bot:s,i=e.activeClassName,o=i===void 0?"recharts-active-shape":i,l=e.isActive,c=$ot(e,Dot),d;if(p.isValidElement(t))d=p.cloneElement(t,nN(nN({},c),Vot(t)));else if(tn(t))d=t(c);else if(yot(t)&&!Sot(t)){var u=a(t,c);d=Q.createElement(pz,{shapeType:r,elementProps:u})}else{var f=c;d=Q.createElement(pz,{shapeType:r,elementProps:f})}return l?Q.createElement(Bn,{className:o},d):d}function B3(e,t){return t!=null&&"trapezoids"in e.props}function U3(e,t){return t!=null&&"sectors"in e.props}function _v(e,t){return t!=null&&"points"in e.props}function Hot(e,t){var r,s,a=e.x===(t==null||(r=t.labelViewBox)===null||r===void 0?void 0:r.x)||e.x===t.x,i=e.y===(t==null||(s=t.labelViewBox)===null||s===void 0?void 0:s.y)||e.y===t.y;return a&&i}function Wot(e,t){var r=e.endAngle===t.endAngle,s=e.startAngle===t.startAngle;return r&&s}function qot(e,t){var r=e.x===t.x,s=e.y===t.y,a=e.z===t.z;return r&&s&&a}function Got(e,t){var r;return B3(e,t)?r=Hot:U3(e,t)?r=Wot:_v(e,t)&&(r=qot),r}function Yot(e,t){var r;return B3(e,t)?r="trapezoids":U3(e,t)?r="sectors":_v(e,t)&&(r="points"),r}function Qot(e,t){if(B3(e,t)){var r;return(r=t.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(U3(e,t)){var s;return(s=t.tooltipPayload)===null||s===void 0||(s=s[0])===null||s===void 0||(s=s.payload)===null||s===void 0?void 0:s.payload}return _v(e,t)?t.payload:{}}function Kot(e){var t=e.activeTooltipItem,r=e.graphicalItem,s=e.itemData,a=Yot(r,t),i=Qot(r,t),o=s.filter(function(c,d){var u=z1(i,c),f=r.props[a].filter(function(g){var x=Got(r,t);return x(g,t)}),h=r.props[a].indexOf(f[f.length-1]),m=d===h;return u&&m}),l=s.indexOf(o[o.length-1]);return l}var Ow;function a0(e){"@babel/helpers - typeof";return a0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a0(e)}function Cm(){return Cm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Cm.apply(this,arguments)}function gz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function cr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?gz(Object(r),!0).forEach(function(s){uo(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gz(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function Jot(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xz(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,Bce(s.key),s)}}function Zot(e,t,r){return t&&xz(e.prototype,t),r&&xz(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Xot(e,t,r){return t=rN(t),elt(e,zce()?Reflect.construct(t,r||[],rN(e).constructor):t.apply(e,r))}function elt(e,t){if(t&&(a0(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return tlt(e)}function tlt(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function zce(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(zce=function(){return!!e})()}function rN(e){return rN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},rN(e)}function nlt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h5(e,t)}function h5(e,t){return h5=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},h5(e,t)}function uo(e,t,r){return t=Bce(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Bce(e){var t=rlt(e,"string");return a0(t)=="symbol"?t:t+""}function rlt(e,t){if(a0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(a0(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var gd=function(e){function t(r){var s;return Jot(this,t),s=Xot(this,t,[r]),uo(s,"pieRef",null),uo(s,"sectorRefs",[]),uo(s,"id",og("recharts-pie-")),uo(s,"handleAnimationEnd",function(){var a=s.props.onAnimationEnd;s.setState({isAnimationFinished:!0}),tn(a)&&a()}),uo(s,"handleAnimationStart",function(){var a=s.props.onAnimationStart;s.setState({isAnimationFinished:!1}),tn(a)&&a()}),s.state={isAnimationFinished:!r.isAnimationActive,prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,sectorToFocus:0},s}return nlt(t,e),Zot(t,[{key:"isActiveIndex",value:function(s){var a=this.props.activeIndex;return Array.isArray(a)?a.indexOf(s)!==-1:s===a}},{key:"hasActiveIndex",value:function(){var s=this.props.activeIndex;return Array.isArray(s)?s.length!==0:s||s===0}},{key:"renderLabels",value:function(s){var a=this.props.isAnimationActive;if(a&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.label,l=i.labelLine,c=i.dataKey,d=i.valueKey,u=Ht(this.props,!1),f=Ht(o,!1),h=Ht(l,!1),m=o&&o.offsetRadius||20,g=s.map(function(x,y){var v=(x.startAngle+x.endAngle)/2,b=hr(x.cx,x.cy,x.outerRadius+m,v),w=cr(cr(cr(cr({},u),x),{},{stroke:"none"},f),{},{index:y,textAnchor:t.getTextAnchor(b.x,x.cx)},b),N=cr(cr(cr(cr({},u),x),{},{fill:"none",stroke:x.fill},h),{},{index:y,points:[hr(x.cx,x.cy,x.outerRadius,v),b]}),j=c;return dn(c)&&dn(d)?j="value":dn(c)&&(j=d),Q.createElement(Bn,{key:"label-".concat(x.startAngle,"-").concat(x.endAngle,"-").concat(x.midAngle,"-").concat(y)},l&&t.renderLabelLineItem(l,N,"line"),t.renderLabelItem(o,w,As(x,j)))});return Q.createElement(Bn,{className:"recharts-pie-labels"},g)}},{key:"renderSectorsStatically",value:function(s){var a=this,i=this.props,o=i.activeShape,l=i.blendStroke,c=i.inactiveShape;return s.map(function(d,u){if((d==null?void 0:d.startAngle)===0&&(d==null?void 0:d.endAngle)===0&&s.length!==1)return null;var f=a.isActiveIndex(u),h=c&&a.hasActiveIndex()?c:null,m=f?o:h,g=cr(cr({},d),{},{stroke:l?d.fill:d.stroke,tabIndex:-1});return Q.createElement(Bn,Cm({ref:function(y){y&&!a.sectorRefs.includes(y)&&a.sectorRefs.push(y)},tabIndex:-1,className:"recharts-pie-sector"},ph(a.props,d,u),{key:"sector-".concat(d==null?void 0:d.startAngle,"-").concat(d==null?void 0:d.endAngle,"-").concat(d.midAngle,"-").concat(u)}),Q.createElement(Fce,Cm({option:m,isActive:f,shapeType:"sector"},g)))})}},{key:"renderSectorsWithAnimation",value:function(){var s=this,a=this.props,i=a.sectors,o=a.isAnimationActive,l=a.animationBegin,c=a.animationDuration,d=a.animationEasing,u=a.animationId,f=this.state,h=f.prevSectors,m=f.prevIsAnimationActive;return Q.createElement(rc,{begin:l,duration:c,isActive:o,easing:d,from:{t:0},to:{t:1},key:"pie-".concat(u,"-").concat(m),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(g){var x=g.t,y=[],v=i&&i[0],b=v.startAngle;return i.forEach(function(w,N){var j=h&&h[N],S=N>0?Fi(w,"paddingAngle",0):0;if(j){var C=Ai(j.endAngle-j.startAngle,w.endAngle-w.startAngle),k=cr(cr({},w),{},{startAngle:b+S,endAngle:b+C(x)+S});y.push(k),b=k.endAngle}else{var M=w.endAngle,A=w.startAngle,P=Ai(0,M-A),T=P(x),I=cr(cr({},w),{},{startAngle:b+S,endAngle:b+T+S});y.push(I),b=I.endAngle}}),Q.createElement(Bn,null,s.renderSectorsStatically(y))})}},{key:"attachKeyboardHandlers",value:function(s){var a=this;s.onkeydown=function(i){if(!i.altKey)switch(i.key){case"ArrowLeft":{var o=++a.state.sectorToFocus%a.sectorRefs.length;a.sectorRefs[o].focus(),a.setState({sectorToFocus:o});break}case"ArrowRight":{var l=--a.state.sectorToFocus<0?a.sectorRefs.length-1:a.state.sectorToFocus%a.sectorRefs.length;a.sectorRefs[l].focus(),a.setState({sectorToFocus:l});break}case"Escape":{a.sectorRefs[a.state.sectorToFocus].blur(),a.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var s=this.props,a=s.sectors,i=s.isAnimationActive,o=this.state.prevSectors;return i&&a&&a.length&&(!o||!z1(o,a))?this.renderSectorsWithAnimation():this.renderSectorsStatically(a)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var s=this,a=this.props,i=a.hide,o=a.sectors,l=a.className,c=a.label,d=a.cx,u=a.cy,f=a.innerRadius,h=a.outerRadius,m=a.isAnimationActive,g=this.state.isAnimationFinished;if(i||!o||!o.length||!it(d)||!it(u)||!it(f)||!it(h))return null;var x=mn("recharts-pie",l);return Q.createElement(Bn,{tabIndex:this.props.rootTabIndex,className:x,ref:function(v){s.pieRef=v}},this.renderSectors(),c&&this.renderLabels(o),Vs.renderCallByParent(this.props,null,!1),(!m||g)&&Bc.renderCallByParent(this.props,o,!1))}}],[{key:"getDerivedStateFromProps",value:function(s,a){return a.prevIsAnimationActive!==s.isAnimationActive?{prevIsAnimationActive:s.isAnimationActive,prevAnimationId:s.animationId,curSectors:s.sectors,prevSectors:[],isAnimationFinished:!0}:s.isAnimationActive&&s.animationId!==a.prevAnimationId?{prevAnimationId:s.animationId,curSectors:s.sectors,prevSectors:a.curSectors,isAnimationFinished:!0}:s.sectors!==a.curSectors?{curSectors:s.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(s,a){return s>a?"start":s<a?"end":"middle"}},{key:"renderLabelLineItem",value:function(s,a,i){if(Q.isValidElement(s))return Q.cloneElement(s,a);if(tn(s))return s(a);var o=mn("recharts-pie-label-line",typeof s!="boolean"?s.className:"");return Q.createElement(Y2,Cm({},a,{key:i,type:"linear",className:o}))}},{key:"renderLabelItem",value:function(s,a,i){if(Q.isValidElement(s))return Q.cloneElement(s,a);var o=i;if(tn(s)&&(o=s(a),Q.isValidElement(o)))return o;var l=mn("recharts-pie-label-text",typeof s!="boolean"&&!tn(s)?s.className:"");return Q.createElement(gh,Cm({},a,{alignmentBaseline:"middle",className:l}),o)}}])}(p.PureComponent);Ow=gd;uo(gd,"displayName","Pie");uo(gd,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!Dh.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});uo(gd,"parseDeltaAngle",function(e,t){var r=Ba(t-e),s=Math.min(Math.abs(t-e),360);return r*s});uo(gd,"getRealPieData",function(e){var t=e.data,r=e.children,s=Ht(e,!1),a=zi(r,S3);return t&&t.length?t.map(function(i,o){return cr(cr(cr({payload:i},s),i),a&&a[o]&&a[o].props)}):a&&a.length?a.map(function(i){return cr(cr({},s),i.props)}):[]});uo(gd,"parseCoordinateOfPie",function(e,t){var r=t.top,s=t.left,a=t.width,i=t.height,o=vce(a,i),l=s+Ua(e.cx,a,a/2),c=r+Ua(e.cy,i,i/2),d=Ua(e.innerRadius,o,0),u=Ua(e.outerRadius,o,o*.8),f=e.maxRadius||Math.sqrt(a*a+i*i)/2;return{cx:l,cy:c,innerRadius:d,outerRadius:u,maxRadius:f}});uo(gd,"getComposedData",function(e){var t=e.item,r=e.offset,s=t.type.defaultProps!==void 0?cr(cr({},t.type.defaultProps),t.props):t.props,a=Ow.getRealPieData(s);if(!a||!a.length)return null;var i=s.cornerRadius,o=s.startAngle,l=s.endAngle,c=s.paddingAngle,d=s.dataKey,u=s.nameKey,f=s.valueKey,h=s.tooltipType,m=Math.abs(s.minAngle),g=Ow.parseCoordinateOfPie(s,r),x=Ow.parseDeltaAngle(o,l),y=Math.abs(x),v=d;dn(d)&&dn(f)?(ol(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),v="value"):dn(d)&&(ol(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),v=f);var b=a.filter(function(k){return As(k,v,0)!==0}).length,w=(y>=360?b:b-1)*c,N=y-b*m-w,j=a.reduce(function(k,M){var A=As(M,v,0);return k+(it(A)?A:0)},0),S;if(j>0){var C;S=a.map(function(k,M){var A=As(k,v,0),P=As(k,u,M),T=(it(A)?A:0)/j,I;M?I=C.endAngle+Ba(x)*c*(A!==0?1:0):I=o;var L=I+Ba(x)*((A!==0?m:0)+T*N),R=(I+L)/2,G=(g.innerRadius+g.outerRadius)/2,$=[{name:P,value:A,payload:k,dataKey:v,type:h}],D=hr(g.cx,g.cy,G,R);return C=cr(cr(cr({percent:T,cornerRadius:i,name:P,tooltipPayload:$,midAngle:R,middleRadius:G,tooltipPosition:D},k),g),{},{value:As(k,v),startAngle:I,endAngle:L,payload:k,paddingAngle:Ba(x)*c}),C})}return cr(cr({},g),{},{sectors:S,data:a})});var slt=Math.ceil,alt=Math.max;function ilt(e,t,r,s){for(var a=-1,i=alt(slt((t-e)/(r||1)),0),o=Array(i);i--;)o[s?i:++a]=e,e+=r;return o}var olt=ilt,llt=ile,yz=1/0,clt=17976931348623157e292;function dlt(e){if(!e)return e===0?e:0;if(e=llt(e),e===yz||e===-yz){var t=e<0?-1:1;return t*clt}return e===e?e:0}var Uce=dlt,ult=olt,flt=N3,lk=Uce;function hlt(e){return function(t,r,s){return s&&typeof s!="number"&&flt(t,r,s)&&(r=s=void 0),t=lk(t),r===void 0?(r=t,t=0):r=lk(r),s=s===void 0?t<r?1:-1:lk(s),ult(t,r,s,e)}}var mlt=hlt,plt=mlt,glt=plt(),xlt=glt;const sN=qn(xlt);function Pv(e){"@babel/helpers - typeof";return Pv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pv(e)}function vz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function bz(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?vz(Object(r),!0).forEach(function(s){Vce(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vz(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function Vce(e,t,r){return t=ylt(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ylt(e){var t=vlt(e,"string");return Pv(t)=="symbol"?t:t+""}function vlt(e,t){if(Pv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(Pv(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var blt=["Webkit","Moz","O","ms"],wlt=function(t,r){var s=t.replace(/(\w)/,function(i){return i.toUpperCase()}),a=blt.reduce(function(i,o){return bz(bz({},i),{},Vce({},o+s,r))},{});return a[t]=r,a};function i0(e){"@babel/helpers - typeof";return i0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i0(e)}function aN(){return aN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},aN.apply(this,arguments)}function wz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function ck(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wz(Object(r),!0).forEach(function(s){Si(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wz(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function jlt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jz(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,Wce(s.key),s)}}function Nlt(e,t,r){return t&&jz(e.prototype,t),r&&jz(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Slt(e,t,r){return t=iN(t),Clt(e,Hce()?Reflect.construct(t,r||[],iN(e).constructor):t.apply(e,r))}function Clt(e,t){if(t&&(i0(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return klt(e)}function klt(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Hce(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Hce=function(){return!!e})()}function iN(e){return iN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},iN(e)}function Mlt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m5(e,t)}function m5(e,t){return m5=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},m5(e,t)}function Si(e,t,r){return t=Wce(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Wce(e){var t=_lt(e,"string");return i0(t)=="symbol"?t:t+""}function _lt(e,t){if(i0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(i0(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Plt=function(t){var r=t.data,s=t.startIndex,a=t.endIndex,i=t.x,o=t.width,l=t.travellerWidth;if(!r||!r.length)return{};var c=r.length,d=Rx().domain(sN(0,c)).range([i,i+o-l]),u=d.domain().map(function(f){return d(f)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:d(s),endX:d(a),scale:d,scaleValues:u}},Nz=function(t){return t.changedTouches&&!!t.changedTouches.length},o0=function(e){function t(r){var s;return jlt(this,t),s=Slt(this,t,[r]),Si(s,"handleDrag",function(a){s.leaveTimer&&(clearTimeout(s.leaveTimer),s.leaveTimer=null),s.state.isTravellerMoving?s.handleTravellerMove(a):s.state.isSlideMoving&&s.handleSlideDrag(a)}),Si(s,"handleTouchMove",function(a){a.changedTouches!=null&&a.changedTouches.length>0&&s.handleDrag(a.changedTouches[0])}),Si(s,"handleDragEnd",function(){s.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var a=s.props,i=a.endIndex,o=a.onDragEnd,l=a.startIndex;o==null||o({endIndex:i,startIndex:l})}),s.detachDragEndListener()}),Si(s,"handleLeaveWrapper",function(){(s.state.isTravellerMoving||s.state.isSlideMoving)&&(s.leaveTimer=window.setTimeout(s.handleDragEnd,s.props.leaveTimeOut))}),Si(s,"handleEnterSlideOrTraveller",function(){s.setState({isTextActive:!0})}),Si(s,"handleLeaveSlideOrTraveller",function(){s.setState({isTextActive:!1})}),Si(s,"handleSlideDragStart",function(a){var i=Nz(a)?a.changedTouches[0]:a;s.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:i.pageX}),s.attachDragEndListener()}),s.travellerDragStartHandlers={startX:s.handleTravellerDragStart.bind(s,"startX"),endX:s.handleTravellerDragStart.bind(s,"endX")},s.state={},s}return Mlt(t,e),Nlt(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(s){var a=s.startX,i=s.endX,o=this.state.scaleValues,l=this.props,c=l.gap,d=l.data,u=d.length-1,f=Math.min(a,i),h=Math.max(a,i),m=t.getIndexInRange(o,f),g=t.getIndexInRange(o,h);return{startIndex:m-m%c,endIndex:g===u?u:g-g%c}}},{key:"getTextOfTick",value:function(s){var a=this.props,i=a.data,o=a.tickFormatter,l=a.dataKey,c=As(i[s],l,s);return tn(o)?o(c,s):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(s){var a=this.state,i=a.slideMoveStartX,o=a.startX,l=a.endX,c=this.props,d=c.x,u=c.width,f=c.travellerWidth,h=c.startIndex,m=c.endIndex,g=c.onChange,x=s.pageX-i;x>0?x=Math.min(x,d+u-f-l,d+u-f-o):x<0&&(x=Math.max(x,d-o,d-l));var y=this.getIndex({startX:o+x,endX:l+x});(y.startIndex!==h||y.endIndex!==m)&&g&&g(y),this.setState({startX:o+x,endX:l+x,slideMoveStartX:s.pageX})}},{key:"handleTravellerDragStart",value:function(s,a){var i=Nz(a)?a.changedTouches[0]:a;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:s,brushMoveStartX:i.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(s){var a=this.state,i=a.brushMoveStartX,o=a.movingTravellerId,l=a.endX,c=a.startX,d=this.state[o],u=this.props,f=u.x,h=u.width,m=u.travellerWidth,g=u.onChange,x=u.gap,y=u.data,v={startX:this.state.startX,endX:this.state.endX},b=s.pageX-i;b>0?b=Math.min(b,f+h-m-d):b<0&&(b=Math.max(b,f-d)),v[o]=d+b;var w=this.getIndex(v),N=w.startIndex,j=w.endIndex,S=function(){var k=y.length-1;return o==="startX"&&(l>c?N%x===0:j%x===0)||l<c&&j===k||o==="endX"&&(l>c?j%x===0:N%x===0)||l>c&&j===k};this.setState(Si(Si({},o,d+b),"brushMoveStartX",s.pageX),function(){g&&S()&&g(w)})}},{key:"handleTravellerMoveKeyboard",value:function(s,a){var i=this,o=this.state,l=o.scaleValues,c=o.startX,d=o.endX,u=this.state[a],f=l.indexOf(u);if(f!==-1){var h=f+s;if(!(h===-1||h>=l.length)){var m=l[h];a==="startX"&&m>=d||a==="endX"&&m<=c||this.setState(Si({},a,m),function(){i.props.onChange(i.getIndex({startX:i.state.startX,endX:i.state.endX}))})}}}},{key:"renderBackground",value:function(){var s=this.props,a=s.x,i=s.y,o=s.width,l=s.height,c=s.fill,d=s.stroke;return Q.createElement("rect",{stroke:d,fill:c,x:a,y:i,width:o,height:l})}},{key:"renderPanorama",value:function(){var s=this.props,a=s.x,i=s.y,o=s.width,l=s.height,c=s.data,d=s.children,u=s.padding,f=p.Children.only(d);return f?Q.cloneElement(f,{x:a,y:i,width:o,height:l,margin:u,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(s,a){var i,o,l=this,c=this.props,d=c.y,u=c.travellerWidth,f=c.height,h=c.traveller,m=c.ariaLabel,g=c.data,x=c.startIndex,y=c.endIndex,v=Math.max(s,this.props.x),b=ck(ck({},Ht(this.props,!1)),{},{x:v,y:d,width:u,height:f}),w=m||"Min value: ".concat((i=g[x])===null||i===void 0?void 0:i.name,", Max value: ").concat((o=g[y])===null||o===void 0?void 0:o.name);return Q.createElement(Bn,{tabIndex:0,role:"slider","aria-label":w,"aria-valuenow":s,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[a],onTouchStart:this.travellerDragStartHandlers[a],onKeyDown:function(j){["ArrowLeft","ArrowRight"].includes(j.key)&&(j.preventDefault(),j.stopPropagation(),l.handleTravellerMoveKeyboard(j.key==="ArrowRight"?1:-1,a))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(h,b))}},{key:"renderSlide",value:function(s,a){var i=this.props,o=i.y,l=i.height,c=i.stroke,d=i.travellerWidth,u=Math.min(s,a)+d,f=Math.max(Math.abs(a-s)-d,0);return Q.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:u,y:o,width:f,height:l})}},{key:"renderText",value:function(){var s=this.props,a=s.startIndex,i=s.endIndex,o=s.y,l=s.height,c=s.travellerWidth,d=s.stroke,u=this.state,f=u.startX,h=u.endX,m=5,g={pointerEvents:"none",fill:d};return Q.createElement(Bn,{className:"recharts-brush-texts"},Q.createElement(gh,aN({textAnchor:"end",verticalAnchor:"middle",x:Math.min(f,h)-m,y:o+l/2},g),this.getTextOfTick(a)),Q.createElement(gh,aN({textAnchor:"start",verticalAnchor:"middle",x:Math.max(f,h)+c+m,y:o+l/2},g),this.getTextOfTick(i)))}},{key:"render",value:function(){var s=this.props,a=s.data,i=s.className,o=s.children,l=s.x,c=s.y,d=s.width,u=s.height,f=s.alwaysShowText,h=this.state,m=h.startX,g=h.endX,x=h.isTextActive,y=h.isSlideMoving,v=h.isTravellerMoving,b=h.isTravellerFocused;if(!a||!a.length||!it(l)||!it(c)||!it(d)||!it(u)||d<=0||u<=0)return null;var w=mn("recharts-brush",i),N=Q.Children.count(o)===1,j=wlt("userSelect","none");return Q.createElement(Bn,{className:w,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:j},this.renderBackground(),N&&this.renderPanorama(),this.renderSlide(m,g),this.renderTravellerLayer(m,"startX"),this.renderTravellerLayer(g,"endX"),(x||y||v||b||f)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(s){var a=s.x,i=s.y,o=s.width,l=s.height,c=s.stroke,d=Math.floor(i+l/2)-1;return Q.createElement(Q.Fragment,null,Q.createElement("rect",{x:a,y:i,width:o,height:l,fill:c,stroke:"none"}),Q.createElement("line",{x1:a+1,y1:d,x2:a+o-1,y2:d,fill:"none",stroke:"#fff"}),Q.createElement("line",{x1:a+1,y1:d+2,x2:a+o-1,y2:d+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(s,a){var i;return Q.isValidElement(s)?i=Q.cloneElement(s,a):tn(s)?i=s(a):i=t.renderDefaultTraveller(a),i}},{key:"getDerivedStateFromProps",value:function(s,a){var i=s.data,o=s.width,l=s.x,c=s.travellerWidth,d=s.updateId,u=s.startIndex,f=s.endIndex;if(i!==a.prevData||d!==a.prevUpdateId)return ck({prevData:i,prevTravellerWidth:c,prevUpdateId:d,prevX:l,prevWidth:o},i&&i.length?Plt({data:i,width:o,x:l,travellerWidth:c,startIndex:u,endIndex:f}):{scale:null,scaleValues:null});if(a.scale&&(o!==a.prevWidth||l!==a.prevX||c!==a.prevTravellerWidth)){a.scale.range([l,l+o-c]);var h=a.scale.domain().map(function(m){return a.scale(m)});return{prevData:i,prevTravellerWidth:c,prevUpdateId:d,prevX:l,prevWidth:o,startX:a.scale(s.startIndex),endX:a.scale(s.endIndex),scaleValues:h}}return null}},{key:"getIndexInRange",value:function(s,a){for(var i=s.length,o=0,l=i-1;l-o>1;){var c=Math.floor((o+l)/2);s[c]>a?l=c:o=c}return a>=s[l]?l:o}}])}(p.PureComponent);Si(o0,"displayName","Brush");Si(o0,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var Tlt=bI;function Alt(e,t){var r;return Tlt(e,function(s,a,i){return r=t(s,a,i),!r}),!!r}var Elt=Alt,Ilt=Ioe,Llt=oc,Dlt=Elt,$lt=vi,Olt=N3;function Rlt(e,t,r){var s=$lt(e)?Ilt:Dlt;return r&&Olt(e,t,r)&&(t=void 0),s(e,Llt(t))}var Flt=Rlt;const zlt=qn(Flt);var Gl=function(t,r){var s=t.alwaysShow,a=t.ifOverflow;return s&&(a="extendDomain"),a===r},Sz=tle;function Blt(e,t,r){t=="__proto__"&&Sz?Sz(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var Ult=Blt,Vlt=Ult,Hlt=Xoe,Wlt=oc;function qlt(e,t){var r={};return t=Wlt(t),Hlt(e,function(s,a,i){Vlt(r,a,t(s,a,i))}),r}var Glt=qlt;const Ylt=qn(Glt);function Qlt(e,t){for(var r=-1,s=e==null?0:e.length;++r<s;)if(!t(e[r],r,e))return!1;return!0}var Klt=Qlt,Jlt=bI;function Zlt(e,t){var r=!0;return Jlt(e,function(s,a,i){return r=!!t(s,a,i),r}),r}var Xlt=Zlt,ect=Klt,tct=Xlt,nct=oc,rct=vi,sct=N3;function act(e,t,r){var s=rct(e)?ect:tct;return r&&sct(e,t,r)&&(t=void 0),s(e,nct(t))}var ict=act;const qce=qn(ict);var oct=["x","y"];function Tv(e){"@babel/helpers - typeof";return Tv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tv(e)}function p5(){return p5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},p5.apply(this,arguments)}function Cz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function qg(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Cz(Object(r),!0).forEach(function(s){lct(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Cz(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function lct(e,t,r){return t=cct(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cct(e){var t=dct(e,"string");return Tv(t)=="symbol"?t:t+""}function dct(e,t){if(Tv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(Tv(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function uct(e,t){if(e==null)return{};var r=fct(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function fct(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}function hct(e,t){var r=e.x,s=e.y,a=uct(e,oct),i="".concat(r),o=parseInt(i,10),l="".concat(s),c=parseInt(l,10),d="".concat(t.height||a.height),u=parseInt(d,10),f="".concat(t.width||a.width),h=parseInt(f,10);return qg(qg(qg(qg(qg({},t),a),o?{x:o}:{}),c?{y:c}:{}),{},{height:u,width:h,name:t.name,radius:t.radius})}function kz(e){return Q.createElement(Fce,p5({shapeType:"rectangle",propTransformer:hct,activeClassName:"recharts-active-bar"},e))}var mct=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(s,a){if(typeof t=="number")return t;var i=typeof s=="number";return i?t(s,a):(i||yh(),r)}},pct=["value","background"],Gce;function l0(e){"@babel/helpers - typeof";return l0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l0(e)}function gct(e,t){if(e==null)return{};var r=xct(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function xct(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}function oN(){return oN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},oN.apply(this,arguments)}function Mz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function us(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Mz(Object(r),!0).forEach(function(s){Qd(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Mz(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function yct(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _z(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,Qce(s.key),s)}}function vct(e,t,r){return t&&_z(e.prototype,t),r&&_z(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function bct(e,t,r){return t=lN(t),wct(e,Yce()?Reflect.construct(t,r||[],lN(e).constructor):t.apply(e,r))}function wct(e,t){if(t&&(l0(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return jct(e)}function jct(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Yce(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Yce=function(){return!!e})()}function lN(e){return lN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},lN(e)}function Nct(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g5(e,t)}function g5(e,t){return g5=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},g5(e,t)}function Qd(e,t,r){return t=Qce(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Qce(e){var t=Sct(e,"string");return l0(t)=="symbol"?t:t+""}function Sct(e,t){if(l0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(l0(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Oa=function(e){function t(){var r;yct(this,t);for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return r=bct(this,t,[].concat(a)),Qd(r,"state",{isAnimationFinished:!1}),Qd(r,"id",og("recharts-bar-")),Qd(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),o&&o()}),Qd(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),o&&o()}),r}return Nct(t,e),vct(t,[{key:"renderRectanglesStatically",value:function(s){var a=this,i=this.props,o=i.shape,l=i.dataKey,c=i.activeIndex,d=i.activeBar,u=Ht(this.props,!1);return s&&s.map(function(f,h){var m=h===c,g=m?d:o,x=us(us(us({},u),f),{},{isActive:m,option:g,index:h,dataKey:l,onAnimationStart:a.handleAnimationStart,onAnimationEnd:a.handleAnimationEnd});return Q.createElement(Bn,oN({className:"recharts-bar-rectangle"},ph(a.props,f,h),{key:"rectangle-".concat(f==null?void 0:f.x,"-").concat(f==null?void 0:f.y,"-").concat(f==null?void 0:f.value,"-").concat(h)}),Q.createElement(kz,x))})}},{key:"renderRectanglesWithAnimation",value:function(){var s=this,a=this.props,i=a.data,o=a.layout,l=a.isAnimationActive,c=a.animationBegin,d=a.animationDuration,u=a.animationEasing,f=a.animationId,h=this.state.prevData;return Q.createElement(rc,{begin:c,duration:d,isActive:l,easing:u,from:{t:0},to:{t:1},key:"bar-".concat(f),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(m){var g=m.t,x=i.map(function(y,v){var b=h&&h[v];if(b){var w=Ai(b.x,y.x),N=Ai(b.y,y.y),j=Ai(b.width,y.width),S=Ai(b.height,y.height);return us(us({},y),{},{x:w(g),y:N(g),width:j(g),height:S(g)})}if(o==="horizontal"){var C=Ai(0,y.height),k=C(g);return us(us({},y),{},{y:y.y+y.height-k,height:k})}var M=Ai(0,y.width),A=M(g);return us(us({},y),{},{width:A})});return Q.createElement(Bn,null,s.renderRectanglesStatically(x))})}},{key:"renderRectangles",value:function(){var s=this.props,a=s.data,i=s.isAnimationActive,o=this.state.prevData;return i&&a&&a.length&&(!o||!z1(o,a))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(a)}},{key:"renderBackground",value:function(){var s=this,a=this.props,i=a.data,o=a.dataKey,l=a.activeIndex,c=Ht(this.props.background,!1);return i.map(function(d,u){d.value;var f=d.background,h=gct(d,pct);if(!f)return null;var m=us(us(us(us(us({},h),{},{fill:"#eee"},f),c),ph(s.props,d,u)),{},{onAnimationStart:s.handleAnimationStart,onAnimationEnd:s.handleAnimationEnd,dataKey:o,index:u,className:"recharts-bar-background-rectangle"});return Q.createElement(kz,oN({key:"background-bar-".concat(u),option:s.props.background,isActive:u===l},m))})}},{key:"renderErrorBar",value:function(s,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.data,l=i.xAxis,c=i.yAxis,d=i.layout,u=i.children,f=zi(u,B1);if(!f)return null;var h=d==="vertical"?o[0].height/2:o[0].width/2,m=function(y,v){var b=Array.isArray(y.value)?y.value[1]:y.value;return{x:y.x,y:y.y,value:b,errorVal:As(y,v)}},g={clipPath:s?"url(#clipPath-".concat(a,")"):null};return Q.createElement(Bn,g,f.map(function(x){return Q.cloneElement(x,{key:"error-bar-".concat(a,"-").concat(x.props.dataKey),data:o,xAxis:l,yAxis:c,layout:d,offset:h,dataPointFormatter:m})}))}},{key:"render",value:function(){var s=this.props,a=s.hide,i=s.data,o=s.className,l=s.xAxis,c=s.yAxis,d=s.left,u=s.top,f=s.width,h=s.height,m=s.isAnimationActive,g=s.background,x=s.id;if(a||!i||!i.length)return null;var y=this.state.isAnimationFinished,v=mn("recharts-bar",o),b=l&&l.allowDataOverflow,w=c&&c.allowDataOverflow,N=b||w,j=dn(x)?this.id:x;return Q.createElement(Bn,{className:v},b||w?Q.createElement("defs",null,Q.createElement("clipPath",{id:"clipPath-".concat(j)},Q.createElement("rect",{x:b?d:d-f/2,y:w?u:u-h/2,width:b?f:f*2,height:w?h:h*2}))):null,Q.createElement(Bn,{className:"recharts-bar-rectangles",clipPath:N?"url(#clipPath-".concat(j,")"):null},g?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(N,j),(!m||y)&&Bc.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(s,a){return s.animationId!==a.prevAnimationId?{prevAnimationId:s.animationId,curData:s.data,prevData:a.curData}:s.data!==a.curData?{curData:s.data}:null}}])}(p.PureComponent);Gce=Oa;Qd(Oa,"displayName","Bar");Qd(Oa,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Dh.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});Qd(Oa,"getComposedData",function(e){var t=e.props,r=e.item,s=e.barPosition,a=e.bandSize,i=e.xAxis,o=e.yAxis,l=e.xAxisTicks,c=e.yAxisTicks,d=e.stackedData,u=e.dataStartIndex,f=e.displayedData,h=e.offset,m=srt(s,r);if(!m)return null;var g=t.layout,x=r.type.defaultProps,y=x!==void 0?us(us({},x),r.props):r.props,v=y.dataKey,b=y.children,w=y.minPointSize,N=g==="horizontal"?o:i,j=d?N.scale.domain():null,S=urt({numericAxis:N}),C=zi(b,S3),k=f.map(function(M,A){var P,T,I,L,R,G;d?P=art(d[u+A],j):(P=As(M,v),Array.isArray(P)||(P=[S,P]));var $=mct(w,Gce.defaultProps.minPointSize)(P[1],A);if(g==="horizontal"){var D,W=[o.scale(P[0]),o.scale(P[1])],E=W[0],F=W[1];T=xF({axis:i,ticks:l,bandSize:a,offset:m.offset,entry:M,index:A}),I=(D=F??E)!==null&&D!==void 0?D:void 0,L=m.size;var B=E-F;if(R=Number.isNaN(B)?0:B,G={x:T,y:o.y,width:L,height:o.height},Math.abs($)>0&&Math.abs(R)<Math.abs($)){var Z=Ba(R||$)*(Math.abs($)-Math.abs(R));I-=Z,R+=Z}}else{var ne=[i.scale(P[0]),i.scale(P[1])],Y=ne[0],me=ne[1];if(T=Y,I=xF({axis:o,ticks:c,bandSize:a,offset:m.offset,entry:M,index:A}),L=me-Y,R=m.size,G={x:i.x,y:I,width:i.width,height:R},Math.abs($)>0&&Math.abs(L)<Math.abs($)){var pe=Ba(L||$)*(Math.abs($)-Math.abs(L));L+=pe}}return us(us(us({},M),{},{x:T,y:I,width:L,height:R,value:d?P:P[1],payload:M,background:G},C&&C[A]&&C[A].props),{},{tooltipPayload:[xce(r,M)],tooltipPosition:{x:T+L/2,y:I+R/2}})});return us({data:k,layout:g},h)});function Av(e){"@babel/helpers - typeof";return Av=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Av(e)}function Cct(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Pz(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,Kce(s.key),s)}}function kct(e,t,r){return t&&Pz(e.prototype,t),r&&Pz(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Tz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function Wo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Tz(Object(r),!0).forEach(function(s){V3(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Tz(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function V3(e,t,r){return t=Kce(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Kce(e){var t=Mct(e,"string");return Av(t)=="symbol"?t:t+""}function Mct(e,t){if(Av(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(Av(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Jce=function(t,r,s,a,i){var o=t.width,l=t.height,c=t.layout,d=t.children,u=Object.keys(r),f={left:s.left,leftMirror:s.left,right:o-s.right,rightMirror:o-s.right,top:s.top,topMirror:s.top,bottom:l-s.bottom,bottomMirror:l-s.bottom},h=!!ki(d,Oa);return u.reduce(function(m,g){var x=r[g],y=x.orientation,v=x.domain,b=x.padding,w=b===void 0?{}:b,N=x.mirror,j=x.reversed,S="".concat(y).concat(N?"Mirror":""),C,k,M,A,P;if(x.type==="number"&&(x.padding==="gap"||x.padding==="no-gap")){var T=v[1]-v[0],I=1/0,L=x.categoricalDomain.sort();if(L.forEach(function(ne,Y){Y>0&&(I=Math.min((ne||0)-(L[Y-1]||0),I))}),Number.isFinite(I)){var R=I/T,G=x.layout==="vertical"?s.height:s.width;if(x.padding==="gap"&&(C=R*G/2),x.padding==="no-gap"){var $=Ua(t.barCategoryGap,R*G),D=R*G/2;C=D-$-(D-$)/G*$}}}a==="xAxis"?k=[s.left+(w.left||0)+(C||0),s.left+s.width-(w.right||0)-(C||0)]:a==="yAxis"?k=c==="horizontal"?[s.top+s.height-(w.bottom||0),s.top+(w.top||0)]:[s.top+(w.top||0)+(C||0),s.top+s.height-(w.bottom||0)-(C||0)]:k=x.range,j&&(k=[k[1],k[0]]);var W=hce(x,i,h),E=W.scale,F=W.realScaleType;E.domain(v).range(k),mce(E);var B=pce(E,Wo(Wo({},x),{},{realScaleType:F}));a==="xAxis"?(P=y==="top"&&!N||y==="bottom"&&N,M=s.left,A=f[S]-P*x.height):a==="yAxis"&&(P=y==="left"&&!N||y==="right"&&N,M=f[S]-P*x.width,A=s.top);var Z=Wo(Wo(Wo({},x),B),{},{realScaleType:F,x:M,y:A,scale:E,width:a==="xAxis"?s.width:x.width,height:a==="yAxis"?s.height:x.height});return Z.bandSize=W2(Z,B),!x.hide&&a==="xAxis"?f[S]+=(P?-1:1)*Z.height:x.hide||(f[S]+=(P?-1:1)*Z.width),Wo(Wo({},m),{},V3({},g,Z))},{})},Zce=function(t,r){var s=t.x,a=t.y,i=r.x,o=r.y;return{x:Math.min(s,i),y:Math.min(a,o),width:Math.abs(i-s),height:Math.abs(o-a)}},_ct=function(t){var r=t.x1,s=t.y1,a=t.x2,i=t.y2;return Zce({x:r,y:s},{x:a,y:i})},Xce=function(){function e(t){Cct(this,e),this.scale=t}return kct(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=s.bandAware,i=s.position;if(r!==void 0){if(i)switch(i){case"start":return this.scale(r);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+o}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(r)+l}default:return this.scale(r)}if(a){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+c}return this.scale(r)}}},{key:"isInRange",value:function(r){var s=this.range(),a=s[0],i=s[s.length-1];return a<=i?r>=a&&r<=i:r>=i&&r<=a}}],[{key:"create",value:function(r){return new e(r)}}])}();V3(Xce,"EPS",1e-4);var QI=function(t){var r=Object.keys(t).reduce(function(s,a){return Wo(Wo({},s),{},V3({},a,Xce.create(t[a])))},{});return Wo(Wo({},r),{},{apply:function(a){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=i.bandAware,l=i.position;return Ylt(a,function(c,d){return r[d].apply(c,{bandAware:o,position:l})})},isInRange:function(a){return qce(a,function(i,o){return r[o].isInRange(i)})}})};function Pct(e){return(e%180+180)%180}var Tct=function(t){var r=t.width,s=t.height,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=Pct(a),o=i*Math.PI/180,l=Math.atan(s/r),c=o>l&&o<Math.PI-l?s/Math.sin(o):r/Math.cos(o);return Math.abs(c)},Act=oc,Ect=D1,Ict=w3;function Lct(e){return function(t,r,s){var a=Object(t);if(!Ect(t)){var i=Act(r);t=Ict(t),r=function(l){return i(a[l],l,a)}}var o=e(t,r,s);return o>-1?a[i?t[o]:o]:void 0}}var Dct=Lct,$ct=Uce;function Oct(e){var t=$ct(e),r=t%1;return t===t?r?t-r:t:0}var Rct=Oct,Fct=Goe,zct=oc,Bct=Rct,Uct=Math.max;function Vct(e,t,r){var s=e==null?0:e.length;if(!s)return-1;var a=r==null?0:Bct(r);return a<0&&(a=Uct(s+a,0)),Fct(e,zct(t),a)}var Hct=Vct,Wct=Dct,qct=Hct,Gct=Wct(qct),Yct=Gct;const Qct=qn(Yct);var Kct=Wze(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),KI=p.createContext(void 0),JI=p.createContext(void 0),ede=p.createContext(void 0),tde=p.createContext({}),nde=p.createContext(void 0),rde=p.createContext(0),sde=p.createContext(0),Az=function(t){var r=t.state,s=r.xAxisMap,a=r.yAxisMap,i=r.offset,o=t.clipPathId,l=t.children,c=t.width,d=t.height,u=Kct(i);return Q.createElement(KI.Provider,{value:s},Q.createElement(JI.Provider,{value:a},Q.createElement(tde.Provider,{value:i},Q.createElement(ede.Provider,{value:u},Q.createElement(nde.Provider,{value:o},Q.createElement(rde.Provider,{value:d},Q.createElement(sde.Provider,{value:c},l)))))))},Jct=function(){return p.useContext(nde)},ade=function(t){var r=p.useContext(KI);r==null&&yh();var s=r[t];return s==null&&yh(),s},Zct=function(){var t=p.useContext(KI);return Dd(t)},Xct=function(){var t=p.useContext(JI),r=Qct(t,function(s){return qce(s.domain,Number.isFinite)});return r||Dd(t)},ide=function(t){var r=p.useContext(JI);r==null&&yh();var s=r[t];return s==null&&yh(),s},edt=function(){var t=p.useContext(ede);return t},tdt=function(){return p.useContext(tde)},ZI=function(){return p.useContext(sde)},XI=function(){return p.useContext(rde)};function c0(e){"@babel/helpers - typeof";return c0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c0(e)}function ndt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function rdt(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,lde(s.key),s)}}function sdt(e,t,r){return t&&rdt(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function adt(e,t,r){return t=cN(t),idt(e,ode()?Reflect.construct(t,r||[],cN(e).constructor):t.apply(e,r))}function idt(e,t){if(t&&(c0(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return odt(e)}function odt(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ode(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ode=function(){return!!e})()}function cN(e){return cN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},cN(e)}function ldt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&x5(e,t)}function x5(e,t){return x5=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},x5(e,t)}function Ez(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function Iz(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Ez(Object(r),!0).forEach(function(s){e9(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ez(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function e9(e,t,r){return t=lde(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lde(e){var t=cdt(e,"string");return c0(t)=="symbol"?t:t+""}function cdt(e,t){if(c0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(c0(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function ddt(e,t){return mdt(e)||hdt(e,t)||fdt(e,t)||udt()}function udt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fdt(e,t){if(e){if(typeof e=="string")return Lz(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Lz(e,t)}}function Lz(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function hdt(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s,a,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(s=i.call(r)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function mdt(e){if(Array.isArray(e))return e}function y5(){return y5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},y5.apply(this,arguments)}var pdt=function(t,r){var s;return Q.isValidElement(t)?s=Q.cloneElement(t,r):tn(t)?s=t(r):s=Q.createElement("line",y5({},r,{className:"recharts-reference-line-line"})),s},gdt=function(t,r,s,a,i,o,l,c,d){var u=i.x,f=i.y,h=i.width,m=i.height;if(s){var g=d.y,x=t.y.apply(g,{position:o});if(Gl(d,"discard")&&!t.y.isInRange(x))return null;var y=[{x:u+h,y:x},{x:u,y:x}];return c==="left"?y.reverse():y}if(r){var v=d.x,b=t.x.apply(v,{position:o});if(Gl(d,"discard")&&!t.x.isInRange(b))return null;var w=[{x:b,y:f+m},{x:b,y:f}];return l==="top"?w.reverse():w}if(a){var N=d.segment,j=N.map(function(S){return t.apply(S,{position:o})});return Gl(d,"discard")&&zlt(j,function(S){return!t.isInRange(S)})?null:j}return null};function xdt(e){var t=e.x,r=e.y,s=e.segment,a=e.xAxisId,i=e.yAxisId,o=e.shape,l=e.className,c=e.alwaysShow,d=Jct(),u=ade(a),f=ide(i),h=edt();if(!d||!h)return null;ol(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var m=QI({x:u.scale,y:f.scale}),g=Ds(t),x=Ds(r),y=s&&s.length===2,v=gdt(m,g,x,y,h,e.position,u.orientation,f.orientation,e);if(!v)return null;var b=ddt(v,2),w=b[0],N=w.x,j=w.y,S=b[1],C=S.x,k=S.y,M=Gl(e,"hidden")?"url(#".concat(d,")"):void 0,A=Iz(Iz({clipPath:M},Ht(e,!0)),{},{x1:N,y1:j,x2:C,y2:k});return Q.createElement(Bn,{className:mn("recharts-reference-line",l)},pdt(o,A),Vs.renderCallByParent(e,_ct({x1:N,y1:j,x2:C,y2:k})))}var t9=function(e){function t(){return ndt(this,t),adt(this,t,arguments)}return ldt(t,e),sdt(t,[{key:"render",value:function(){return Q.createElement(xdt,this.props)}}])}(Q.Component);e9(t9,"displayName","ReferenceLine");e9(t9,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function v5(){return v5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},v5.apply(this,arguments)}function d0(e){"@babel/helpers - typeof";return d0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d0(e)}function Dz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function $z(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Dz(Object(r),!0).forEach(function(s){H3(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Dz(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function ydt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function vdt(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,dde(s.key),s)}}function bdt(e,t,r){return t&&vdt(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function wdt(e,t,r){return t=dN(t),jdt(e,cde()?Reflect.construct(t,r||[],dN(e).constructor):t.apply(e,r))}function jdt(e,t){if(t&&(d0(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ndt(e)}function Ndt(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function cde(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(cde=function(){return!!e})()}function dN(e){return dN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},dN(e)}function Sdt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b5(e,t)}function b5(e,t){return b5=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},b5(e,t)}function H3(e,t,r){return t=dde(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dde(e){var t=Cdt(e,"string");return d0(t)=="symbol"?t:t+""}function Cdt(e,t){if(d0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(d0(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var kdt=function(t){var r=t.x,s=t.y,a=t.xAxis,i=t.yAxis,o=QI({x:a.scale,y:i.scale}),l=o.apply({x:r,y:s},{bandAware:!0});return Gl(t,"discard")&&!o.isInRange(l)?null:l},W3=function(e){function t(){return ydt(this,t),wdt(this,t,arguments)}return Sdt(t,e),bdt(t,[{key:"render",value:function(){var s=this.props,a=s.x,i=s.y,o=s.r,l=s.alwaysShow,c=s.clipPathId,d=Ds(a),u=Ds(i);if(ol(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!d||!u)return null;var f=kdt(this.props);if(!f)return null;var h=f.x,m=f.y,g=this.props,x=g.shape,y=g.className,v=Gl(this.props,"hidden")?"url(#".concat(c,")"):void 0,b=$z($z({clipPath:v},Ht(this.props,!0)),{},{cx:h,cy:m});return Q.createElement(Bn,{className:mn("recharts-reference-dot",y)},t.renderDot(x,b),Vs.renderCallByParent(this.props,{x:h-o,y:m-o,width:2*o,height:2*o}))}}])}(Q.Component);H3(W3,"displayName","ReferenceDot");H3(W3,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});H3(W3,"renderDot",function(e,t){var r;return Q.isValidElement(e)?r=Q.cloneElement(e,t):tn(e)?r=e(t):r=Q.createElement($3,v5({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),r});function w5(){return w5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},w5.apply(this,arguments)}function u0(e){"@babel/helpers - typeof";return u0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u0(e)}function Oz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function Rz(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Oz(Object(r),!0).forEach(function(s){q3(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Oz(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function Mdt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _dt(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,fde(s.key),s)}}function Pdt(e,t,r){return t&&_dt(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Tdt(e,t,r){return t=uN(t),Adt(e,ude()?Reflect.construct(t,r||[],uN(e).constructor):t.apply(e,r))}function Adt(e,t){if(t&&(u0(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Edt(e)}function Edt(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ude(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ude=function(){return!!e})()}function uN(e){return uN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},uN(e)}function Idt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&j5(e,t)}function j5(e,t){return j5=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},j5(e,t)}function q3(e,t,r){return t=fde(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fde(e){var t=Ldt(e,"string");return u0(t)=="symbol"?t:t+""}function Ldt(e,t){if(u0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(u0(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Ddt=function(t,r,s,a,i){var o=i.x1,l=i.x2,c=i.y1,d=i.y2,u=i.xAxis,f=i.yAxis;if(!u||!f)return null;var h=QI({x:u.scale,y:f.scale}),m={x:t?h.x.apply(o,{position:"start"}):h.x.rangeMin,y:s?h.y.apply(c,{position:"start"}):h.y.rangeMin},g={x:r?h.x.apply(l,{position:"end"}):h.x.rangeMax,y:a?h.y.apply(d,{position:"end"}):h.y.rangeMax};return Gl(i,"discard")&&(!h.isInRange(m)||!h.isInRange(g))?null:Zce(m,g)},G3=function(e){function t(){return Mdt(this,t),Tdt(this,t,arguments)}return Idt(t,e),Pdt(t,[{key:"render",value:function(){var s=this.props,a=s.x1,i=s.x2,o=s.y1,l=s.y2,c=s.className,d=s.alwaysShow,u=s.clipPathId;ol(d===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var f=Ds(a),h=Ds(i),m=Ds(o),g=Ds(l),x=this.props.shape;if(!f&&!h&&!m&&!g&&!x)return null;var y=Ddt(f,h,m,g,this.props);if(!y&&!x)return null;var v=Gl(this.props,"hidden")?"url(#".concat(u,")"):void 0;return Q.createElement(Bn,{className:mn("recharts-reference-area",c)},t.renderRect(x,Rz(Rz({clipPath:v},Ht(this.props,!0)),y)),Vs.renderCallByParent(this.props,y))}}])}(Q.Component);q3(G3,"displayName","ReferenceArea");q3(G3,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});q3(G3,"renderRect",function(e,t){var r;return Q.isValidElement(e)?r=Q.cloneElement(e,t):tn(e)?r=e(t):r=Q.createElement(YI,w5({},t,{className:"recharts-reference-area-rect"})),r});function hde(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var s=[],a=0;a<e.length;a+=t)s.push(e[a]);return s}function $dt(e,t,r){var s={width:e.width+t.width,height:e.height+t.height};return Tct(s,r)}function Odt(e,t,r){var s=r==="width",a=e.x,i=e.y,o=e.width,l=e.height;return t===1?{start:s?a:i,end:s?a+o:i+l}:{start:s?a+o:i+l,end:s?a:i}}function fN(e,t,r,s,a){if(e*t<e*s||e*t>e*a)return!1;var i=r();return e*(t-e*i/2-s)>=0&&e*(t+e*i/2-a)<=0}function Rdt(e,t){return hde(e,t+1)}function Fdt(e,t,r,s,a){for(var i=(s||[]).slice(),o=t.start,l=t.end,c=0,d=1,u=o,f=function(){var g=s==null?void 0:s[c];if(g===void 0)return{v:hde(s,d)};var x=c,y,v=function(){return y===void 0&&(y=r(g,x)),y},b=g.coordinate,w=c===0||fN(e,b,v,u,l);w||(c=0,u=o,d+=1),w&&(u=b+e*(v()/2+a),c+=d)},h;d<=i.length;)if(h=f(),h)return h.v;return[]}function Ev(e){"@babel/helpers - typeof";return Ev=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ev(e)}function Fz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function fa(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Fz(Object(r),!0).forEach(function(s){zdt(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Fz(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function zdt(e,t,r){return t=Bdt(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Bdt(e){var t=Udt(e,"string");return Ev(t)=="symbol"?t:t+""}function Udt(e,t){if(Ev(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(Ev(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Vdt(e,t,r,s,a){for(var i=(s||[]).slice(),o=i.length,l=t.start,c=t.end,d=function(h){var m=i[h],g,x=function(){return g===void 0&&(g=r(m,h)),g};if(h===o-1){var y=e*(m.coordinate+e*x()/2-c);i[h]=m=fa(fa({},m),{},{tickCoord:y>0?m.coordinate-y*e:m.coordinate})}else i[h]=m=fa(fa({},m),{},{tickCoord:m.coordinate});var v=fN(e,m.tickCoord,x,l,c);v&&(c=m.tickCoord-e*(x()/2+a),i[h]=fa(fa({},m),{},{isShow:!0}))},u=o-1;u>=0;u--)d(u);return i}function Hdt(e,t,r,s,a,i){var o=(s||[]).slice(),l=o.length,c=t.start,d=t.end;if(i){var u=s[l-1],f=r(u,l-1),h=e*(u.coordinate+e*f/2-d);o[l-1]=u=fa(fa({},u),{},{tickCoord:h>0?u.coordinate-h*e:u.coordinate});var m=fN(e,u.tickCoord,function(){return f},c,d);m&&(d=u.tickCoord-e*(f/2+a),o[l-1]=fa(fa({},u),{},{isShow:!0}))}for(var g=i?l-1:l,x=function(b){var w=o[b],N,j=function(){return N===void 0&&(N=r(w,b)),N};if(b===0){var S=e*(w.coordinate-e*j()/2-c);o[b]=w=fa(fa({},w),{},{tickCoord:S<0?w.coordinate-S*e:w.coordinate})}else o[b]=w=fa(fa({},w),{},{tickCoord:w.coordinate});var C=fN(e,w.tickCoord,j,c,d);C&&(c=w.tickCoord+e*(j()/2+a),o[b]=fa(fa({},w),{},{isShow:!0}))},y=0;y<g;y++)x(y);return o}function n9(e,t,r){var s=e.tick,a=e.ticks,i=e.viewBox,o=e.minTickGap,l=e.orientation,c=e.interval,d=e.tickFormatter,u=e.unit,f=e.angle;if(!a||!a.length||!s)return[];if(it(c)||Dh.isSsr)return Rdt(a,typeof c=="number"&&it(c)?c:0);var h=[],m=l==="top"||l==="bottom"?"width":"height",g=u&&m==="width"?Ox(u,{fontSize:t,letterSpacing:r}):{width:0,height:0},x=function(w,N){var j=tn(d)?d(w.value,N):w.value;return m==="width"?$dt(Ox(j,{fontSize:t,letterSpacing:r}),g,f):Ox(j,{fontSize:t,letterSpacing:r})[m]},y=a.length>=2?Ba(a[1].coordinate-a[0].coordinate):1,v=Odt(i,y,m);return c==="equidistantPreserveStart"?Fdt(y,v,x,a,o):(c==="preserveStart"||c==="preserveStartEnd"?h=Hdt(y,v,x,a,o,c==="preserveStartEnd"):h=Vdt(y,v,x,a,o),h.filter(function(b){return b.isShow}))}var Wdt=["viewBox"],qdt=["viewBox"],Gdt=["ticks"];function f0(e){"@babel/helpers - typeof";return f0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f0(e)}function km(){return km=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},km.apply(this,arguments)}function zz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function Ta(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?zz(Object(r),!0).forEach(function(s){r9(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zz(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function dk(e,t){if(e==null)return{};var r=Ydt(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function Ydt(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}function Qdt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Bz(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,pde(s.key),s)}}function Kdt(e,t,r){return t&&Bz(e.prototype,t),r&&Bz(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Jdt(e,t,r){return t=hN(t),Zdt(e,mde()?Reflect.construct(t,r||[],hN(e).constructor):t.apply(e,r))}function Zdt(e,t){if(t&&(f0(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Xdt(e)}function Xdt(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mde(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(mde=function(){return!!e})()}function hN(e){return hN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},hN(e)}function eut(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&N5(e,t)}function N5(e,t){return N5=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},N5(e,t)}function r9(e,t,r){return t=pde(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pde(e){var t=tut(e,"string");return f0(t)=="symbol"?t:t+""}function tut(e,t){if(f0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(f0(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var mg=function(e){function t(r){var s;return Qdt(this,t),s=Jdt(this,t,[r]),s.state={fontSize:"",letterSpacing:""},s}return eut(t,e),Kdt(t,[{key:"shouldComponentUpdate",value:function(s,a){var i=s.viewBox,o=dk(s,Wdt),l=this.props,c=l.viewBox,d=dk(l,qdt);return!Km(i,c)||!Km(o,d)||!Km(a,this.state)}},{key:"componentDidMount",value:function(){var s=this.layerReference;if(s){var a=s.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];a&&this.setState({fontSize:window.getComputedStyle(a).fontSize,letterSpacing:window.getComputedStyle(a).letterSpacing})}}},{key:"getTickLineCoord",value:function(s){var a=this.props,i=a.x,o=a.y,l=a.width,c=a.height,d=a.orientation,u=a.tickSize,f=a.mirror,h=a.tickMargin,m,g,x,y,v,b,w=f?-1:1,N=s.tickSize||u,j=it(s.tickCoord)?s.tickCoord:s.coordinate;switch(d){case"top":m=g=s.coordinate,y=o+ +!f*c,x=y-w*N,b=x-w*h,v=j;break;case"left":x=y=s.coordinate,g=i+ +!f*l,m=g-w*N,v=m-w*h,b=j;break;case"right":x=y=s.coordinate,g=i+ +f*l,m=g+w*N,v=m+w*h,b=j;break;default:m=g=s.coordinate,y=o+ +f*c,x=y+w*N,b=x+w*h,v=j;break}return{line:{x1:m,y1:x,x2:g,y2:y},tick:{x:v,y:b}}}},{key:"getTickTextAnchor",value:function(){var s=this.props,a=s.orientation,i=s.mirror,o;switch(a){case"left":o=i?"start":"end";break;case"right":o=i?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var s=this.props,a=s.orientation,i=s.mirror,o="end";switch(a){case"left":case"right":o="middle";break;case"top":o=i?"start":"end";break;default:o=i?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var s=this.props,a=s.x,i=s.y,o=s.width,l=s.height,c=s.orientation,d=s.mirror,u=s.axisLine,f=Ta(Ta(Ta({},Ht(this.props,!1)),Ht(u,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var h=+(c==="top"&&!d||c==="bottom"&&d);f=Ta(Ta({},f),{},{x1:a,y1:i+h*l,x2:a+o,y2:i+h*l})}else{var m=+(c==="left"&&!d||c==="right"&&d);f=Ta(Ta({},f),{},{x1:a+m*o,y1:i,x2:a+m*o,y2:i+l})}return Q.createElement("line",km({},f,{className:mn("recharts-cartesian-axis-line",Fi(u,"className"))}))}},{key:"renderTicks",value:function(s,a,i){var o=this,l=this.props,c=l.tickLine,d=l.stroke,u=l.tick,f=l.tickFormatter,h=l.unit,m=n9(Ta(Ta({},this.props),{},{ticks:s}),a,i),g=this.getTickTextAnchor(),x=this.getTickVerticalAnchor(),y=Ht(this.props,!1),v=Ht(u,!1),b=Ta(Ta({},y),{},{fill:"none"},Ht(c,!1)),w=m.map(function(N,j){var S=o.getTickLineCoord(N),C=S.line,k=S.tick,M=Ta(Ta(Ta(Ta({textAnchor:g,verticalAnchor:x},y),{},{stroke:"none",fill:d},v),k),{},{index:j,payload:N,visibleTicksCount:m.length,tickFormatter:f});return Q.createElement(Bn,km({className:"recharts-cartesian-axis-tick",key:"tick-".concat(N.value,"-").concat(N.coordinate,"-").concat(N.tickCoord)},ph(o.props,N,j)),c&&Q.createElement("line",km({},b,C,{className:mn("recharts-cartesian-axis-tick-line",Fi(c,"className"))})),u&&t.renderTickItem(u,M,"".concat(tn(f)?f(N.value,j):N.value).concat(h||"")))});return Q.createElement("g",{className:"recharts-cartesian-axis-ticks"},w)}},{key:"render",value:function(){var s=this,a=this.props,i=a.axisLine,o=a.width,l=a.height,c=a.ticksGenerator,d=a.className,u=a.hide;if(u)return null;var f=this.props,h=f.ticks,m=dk(f,Gdt),g=h;return tn(c)&&(g=h&&h.length>0?c(this.props):c(m)),o<=0||l<=0||!g||!g.length?null:Q.createElement(Bn,{className:mn("recharts-cartesian-axis",d),ref:function(y){s.layerReference=y}},i&&this.renderAxisLine(),this.renderTicks(g,this.state.fontSize,this.state.letterSpacing),Vs.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(s,a,i){var o;return Q.isValidElement(s)?o=Q.cloneElement(s,a):tn(s)?o=s(a):o=Q.createElement(gh,km({},a,{className:"recharts-cartesian-axis-tick-value"}),i),o}}])}(p.Component);r9(mg,"displayName","CartesianAxis");r9(mg,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var nut=["x1","y1","x2","y2","key"],rut=["offset"];function vh(e){"@babel/helpers - typeof";return vh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vh(e)}function Uz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function ga(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Uz(Object(r),!0).forEach(function(s){sut(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Uz(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function sut(e,t,r){return t=aut(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function aut(e){var t=iut(e,"string");return vh(t)=="symbol"?t:t+""}function iut(e,t){if(vh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(vh(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Sf(){return Sf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Sf.apply(this,arguments)}function Vz(e,t){if(e==null)return{};var r=out(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function out(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}var lut=function(t){var r=t.fill;if(!r||r==="none")return null;var s=t.fillOpacity,a=t.x,i=t.y,o=t.width,l=t.height,c=t.ry;return Q.createElement("rect",{x:a,y:i,ry:c,width:o,height:l,stroke:"none",fill:r,fillOpacity:s,className:"recharts-cartesian-grid-bg"})};function gde(e,t){var r;if(Q.isValidElement(e))r=Q.cloneElement(e,t);else if(tn(e))r=e(t);else{var s=t.x1,a=t.y1,i=t.x2,o=t.y2,l=t.key,c=Vz(t,nut),d=Ht(c,!1);d.offset;var u=Vz(d,rut);r=Q.createElement("line",Sf({},u,{x1:s,y1:a,x2:i,y2:o,fill:"none",key:l}))}return r}function cut(e){var t=e.x,r=e.width,s=e.horizontal,a=s===void 0?!0:s,i=e.horizontalPoints;if(!a||!i||!i.length)return null;var o=i.map(function(l,c){var d=ga(ga({},e),{},{x1:t,y1:l,x2:t+r,y2:l,key:"line-".concat(c),index:c});return gde(a,d)});return Q.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function dut(e){var t=e.y,r=e.height,s=e.vertical,a=s===void 0?!0:s,i=e.verticalPoints;if(!a||!i||!i.length)return null;var o=i.map(function(l,c){var d=ga(ga({},e),{},{x1:l,y1:t,x2:l,y2:t+r,key:"line-".concat(c),index:c});return gde(a,d)});return Q.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function uut(e){var t=e.horizontalFill,r=e.fillOpacity,s=e.x,a=e.y,i=e.width,o=e.height,l=e.horizontalPoints,c=e.horizontal,d=c===void 0?!0:c;if(!d||!t||!t.length)return null;var u=l.map(function(h){return Math.round(h+a-a)}).sort(function(h,m){return h-m});a!==u[0]&&u.unshift(0);var f=u.map(function(h,m){var g=!u[m+1],x=g?a+o-h:u[m+1]-h;if(x<=0)return null;var y=m%t.length;return Q.createElement("rect",{key:"react-".concat(m),y:h,x:s,height:x,width:i,stroke:"none",fill:t[y],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return Q.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},f)}function fut(e){var t=e.vertical,r=t===void 0?!0:t,s=e.verticalFill,a=e.fillOpacity,i=e.x,o=e.y,l=e.width,c=e.height,d=e.verticalPoints;if(!r||!s||!s.length)return null;var u=d.map(function(h){return Math.round(h+i-i)}).sort(function(h,m){return h-m});i!==u[0]&&u.unshift(0);var f=u.map(function(h,m){var g=!u[m+1],x=g?i+l-h:u[m+1]-h;if(x<=0)return null;var y=m%s.length;return Q.createElement("rect",{key:"react-".concat(m),x:h,y:o,width:x,height:c,stroke:"none",fill:s[y],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return Q.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},f)}var hut=function(t,r){var s=t.xAxis,a=t.width,i=t.height,o=t.offset;return fce(n9(ga(ga(ga({},mg.defaultProps),s),{},{ticks:Lc(s,!0),viewBox:{x:0,y:0,width:a,height:i}})),o.left,o.left+o.width,r)},mut=function(t,r){var s=t.yAxis,a=t.width,i=t.height,o=t.offset;return fce(n9(ga(ga(ga({},mg.defaultProps),s),{},{ticks:Lc(s,!0),viewBox:{x:0,y:0,width:a,height:i}})),o.top,o.top+o.height,r)},Jh={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function hf(e){var t,r,s,a,i,o,l=ZI(),c=XI(),d=tdt(),u=ga(ga({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:Jh.stroke,fill:(r=e.fill)!==null&&r!==void 0?r:Jh.fill,horizontal:(s=e.horizontal)!==null&&s!==void 0?s:Jh.horizontal,horizontalFill:(a=e.horizontalFill)!==null&&a!==void 0?a:Jh.horizontalFill,vertical:(i=e.vertical)!==null&&i!==void 0?i:Jh.vertical,verticalFill:(o=e.verticalFill)!==null&&o!==void 0?o:Jh.verticalFill,x:it(e.x)?e.x:d.left,y:it(e.y)?e.y:d.top,width:it(e.width)?e.width:d.width,height:it(e.height)?e.height:d.height}),f=u.x,h=u.y,m=u.width,g=u.height,x=u.syncWithTicks,y=u.horizontalValues,v=u.verticalValues,b=Zct(),w=Xct();if(!it(m)||m<=0||!it(g)||g<=0||!it(f)||f!==+f||!it(h)||h!==+h)return null;var N=u.verticalCoordinatesGenerator||hut,j=u.horizontalCoordinatesGenerator||mut,S=u.horizontalPoints,C=u.verticalPoints;if((!S||!S.length)&&tn(j)){var k=y&&y.length,M=j({yAxis:w?ga(ga({},w),{},{ticks:k?y:w.ticks}):void 0,width:l,height:c,offset:d},k?!0:x);ol(Array.isArray(M),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(vh(M),"]")),Array.isArray(M)&&(S=M)}if((!C||!C.length)&&tn(N)){var A=v&&v.length,P=N({xAxis:b?ga(ga({},b),{},{ticks:A?v:b.ticks}):void 0,width:l,height:c,offset:d},A?!0:x);ol(Array.isArray(P),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(vh(P),"]")),Array.isArray(P)&&(C=P)}return Q.createElement("g",{className:"recharts-cartesian-grid"},Q.createElement(lut,{fill:u.fill,fillOpacity:u.fillOpacity,x:u.x,y:u.y,width:u.width,height:u.height,ry:u.ry}),Q.createElement(cut,Sf({},u,{offset:d,horizontalPoints:S,xAxis:b,yAxis:w})),Q.createElement(dut,Sf({},u,{offset:d,verticalPoints:C,xAxis:b,yAxis:w})),Q.createElement(uut,Sf({},u,{horizontalPoints:S})),Q.createElement(fut,Sf({},u,{verticalPoints:C})))}hf.displayName="CartesianGrid";var put=["type","layout","connectNulls","ref"],gut=["key"];function h0(e){"@babel/helpers - typeof";return h0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h0(e)}function Hz(e,t){if(e==null)return{};var r=xut(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function xut(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}function Vx(){return Vx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Vx.apply(this,arguments)}function Wz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function ji(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Wz(Object(r),!0).forEach(function(s){qo(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Wz(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function Zh(e){return wut(e)||but(e)||vut(e)||yut()}function yut(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vut(e,t){if(e){if(typeof e=="string")return S5(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return S5(e,t)}}function but(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function wut(e){if(Array.isArray(e))return S5(e)}function S5(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function jut(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qz(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,yde(s.key),s)}}function Nut(e,t,r){return t&&qz(e.prototype,t),r&&qz(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Sut(e,t,r){return t=mN(t),Cut(e,xde()?Reflect.construct(t,r||[],mN(e).constructor):t.apply(e,r))}function Cut(e,t){if(t&&(h0(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return kut(e)}function kut(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xde(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(xde=function(){return!!e})()}function mN(e){return mN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},mN(e)}function Mut(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&C5(e,t)}function C5(e,t){return C5=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},C5(e,t)}function qo(e,t,r){return t=yde(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yde(e){var t=_ut(e,"string");return h0(t)=="symbol"?t:t+""}function _ut(e,t){if(h0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(h0(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var _c=function(e){function t(){var r;jut(this,t);for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return r=Sut(this,t,[].concat(a)),qo(r,"state",{isAnimationFinished:!0,totalLength:0}),qo(r,"generateSimpleStrokeDasharray",function(o,l){return"".concat(l,"px ").concat(o-l,"px")}),qo(r,"getStrokeDasharray",function(o,l,c){var d=c.reduce(function(v,b){return v+b});if(!d)return r.generateSimpleStrokeDasharray(l,o);for(var u=Math.floor(o/d),f=o%d,h=l-o,m=[],g=0,x=0;g<c.length;x+=c[g],++g)if(x+c[g]>f){m=[].concat(Zh(c.slice(0,g)),[f-x]);break}var y=m.length%2===0?[0,h]:[h];return[].concat(Zh(t.repeat(c,u)),Zh(m),y).map(function(v){return"".concat(v,"px")}).join(", ")}),qo(r,"id",og("recharts-line-")),qo(r,"pathRef",function(o){r.mainCurve=o}),qo(r,"handleAnimationEnd",function(){r.setState({isAnimationFinished:!0}),r.props.onAnimationEnd&&r.props.onAnimationEnd()}),qo(r,"handleAnimationStart",function(){r.setState({isAnimationFinished:!1}),r.props.onAnimationStart&&r.props.onAnimationStart()}),r}return Mut(t,e),Nut(t,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var s=this.getTotalLength();this.setState({totalLength:s})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var s=this.getTotalLength();s!==this.state.totalLength&&this.setState({totalLength:s})}}},{key:"getTotalLength",value:function(){var s=this.mainCurve;try{return s&&s.getTotalLength&&s.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(s,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.points,l=i.xAxis,c=i.yAxis,d=i.layout,u=i.children,f=zi(u,B1);if(!f)return null;var h=function(x,y){return{x:x.x,y:x.y,value:x.value,errorVal:As(x.payload,y)}},m={clipPath:s?"url(#clipPath-".concat(a,")"):null};return Q.createElement(Bn,m,f.map(function(g){return Q.cloneElement(g,{key:"bar-".concat(g.props.dataKey),data:o,xAxis:l,yAxis:c,layout:d,dataPointFormatter:h})}))}},{key:"renderDots",value:function(s,a,i){var o=this.props.isAnimationActive;if(o&&!this.state.isAnimationFinished)return null;var l=this.props,c=l.dot,d=l.points,u=l.dataKey,f=Ht(this.props,!1),h=Ht(c,!0),m=d.map(function(x,y){var v=ji(ji(ji({key:"dot-".concat(y),r:3},f),h),{},{index:y,cx:x.x,cy:x.y,value:x.value,dataKey:u,payload:x.payload,points:d});return t.renderDotItem(c,v)}),g={clipPath:s?"url(#clipPath-".concat(a?"":"dots-").concat(i,")"):null};return Q.createElement(Bn,Vx({className:"recharts-line-dots",key:"dots"},g),m)}},{key:"renderCurveStatically",value:function(s,a,i,o){var l=this.props,c=l.type,d=l.layout,u=l.connectNulls;l.ref;var f=Hz(l,put),h=ji(ji(ji({},Ht(f,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:a?"url(#clipPath-".concat(i,")"):null,points:s},o),{},{type:c,layout:d,connectNulls:u});return Q.createElement(Y2,Vx({},h,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(s,a){var i=this,o=this.props,l=o.points,c=o.strokeDasharray,d=o.isAnimationActive,u=o.animationBegin,f=o.animationDuration,h=o.animationEasing,m=o.animationId,g=o.animateNewValues,x=o.width,y=o.height,v=this.state,b=v.prevPoints,w=v.totalLength;return Q.createElement(rc,{begin:u,duration:f,isActive:d,easing:h,from:{t:0},to:{t:1},key:"line-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(N){var j=N.t;if(b){var S=b.length/l.length,C=l.map(function(T,I){var L=Math.floor(I*S);if(b[L]){var R=b[L],G=Ai(R.x,T.x),$=Ai(R.y,T.y);return ji(ji({},T),{},{x:G(j),y:$(j)})}if(g){var D=Ai(x*2,T.x),W=Ai(y/2,T.y);return ji(ji({},T),{},{x:D(j),y:W(j)})}return ji(ji({},T),{},{x:T.x,y:T.y})});return i.renderCurveStatically(C,s,a)}var k=Ai(0,w),M=k(j),A;if(c){var P="".concat(c).split(/[,\s]+/gim).map(function(T){return parseFloat(T)});A=i.getStrokeDasharray(M,w,P)}else A=i.generateSimpleStrokeDasharray(w,M);return i.renderCurveStatically(l,s,a,{strokeDasharray:A})})}},{key:"renderCurve",value:function(s,a){var i=this.props,o=i.points,l=i.isAnimationActive,c=this.state,d=c.prevPoints,u=c.totalLength;return l&&o&&o.length&&(!d&&u>0||!z1(d,o))?this.renderCurveWithAnimation(s,a):this.renderCurveStatically(o,s,a)}},{key:"render",value:function(){var s,a=this.props,i=a.hide,o=a.dot,l=a.points,c=a.className,d=a.xAxis,u=a.yAxis,f=a.top,h=a.left,m=a.width,g=a.height,x=a.isAnimationActive,y=a.id;if(i||!l||!l.length)return null;var v=this.state.isAnimationFinished,b=l.length===1,w=mn("recharts-line",c),N=d&&d.allowDataOverflow,j=u&&u.allowDataOverflow,S=N||j,C=dn(y)?this.id:y,k=(s=Ht(o,!1))!==null&&s!==void 0?s:{r:3,strokeWidth:2},M=k.r,A=M===void 0?3:M,P=k.strokeWidth,T=P===void 0?2:P,I=QBe(o)?o:{},L=I.clipDot,R=L===void 0?!0:L,G=A*2+T;return Q.createElement(Bn,{className:w},N||j?Q.createElement("defs",null,Q.createElement("clipPath",{id:"clipPath-".concat(C)},Q.createElement("rect",{x:N?h:h-m/2,y:j?f:f-g/2,width:N?m:m*2,height:j?g:g*2})),!R&&Q.createElement("clipPath",{id:"clipPath-dots-".concat(C)},Q.createElement("rect",{x:h-G/2,y:f-G/2,width:m+G,height:g+G}))):null,!b&&this.renderCurve(S,C),this.renderErrorBar(S,C),(b||o)&&this.renderDots(S,R,C),(!x||v)&&Bc.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(s,a){return s.animationId!==a.prevAnimationId?{prevAnimationId:s.animationId,curPoints:s.points,prevPoints:a.curPoints}:s.points!==a.curPoints?{curPoints:s.points}:null}},{key:"repeat",value:function(s,a){for(var i=s.length%2!==0?[].concat(Zh(s),[0]):s,o=[],l=0;l<a;++l)o=[].concat(Zh(o),Zh(i));return o}},{key:"renderDotItem",value:function(s,a){var i;if(Q.isValidElement(s))i=Q.cloneElement(s,a);else if(tn(s))i=s(a);else{var o=a.key,l=Hz(a,gut),c=mn("recharts-line-dot",typeof s!="boolean"?s.className:"");i=Q.createElement($3,Vx({key:o},l,{className:c}))}return i}}])}(p.PureComponent);qo(_c,"displayName","Line");qo(_c,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!Dh.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});qo(_c,"getComposedData",function(e){var t=e.props,r=e.xAxis,s=e.yAxis,a=e.xAxisTicks,i=e.yAxisTicks,o=e.dataKey,l=e.bandSize,c=e.displayedData,d=e.offset,u=t.layout,f=c.map(function(h,m){var g=As(h,o);return u==="horizontal"?{x:gF({axis:r,ticks:a,bandSize:l,entry:h,index:m}),y:dn(g)?null:s.scale(g),value:g,payload:h}:{x:dn(g)?null:r.scale(g),y:gF({axis:s,ticks:i,bandSize:l,entry:h,index:m}),value:g,payload:h}});return ji({points:f,layout:u},d)});function m0(e){"@babel/helpers - typeof";return m0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m0(e)}function Put(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Tut(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,wde(s.key),s)}}function Aut(e,t,r){return t&&Tut(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Eut(e,t,r){return t=pN(t),Iut(e,vde()?Reflect.construct(t,r||[],pN(e).constructor):t.apply(e,r))}function Iut(e,t){if(t&&(m0(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Lut(e)}function Lut(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vde(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(vde=function(){return!!e})()}function pN(e){return pN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},pN(e)}function Dut(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&k5(e,t)}function k5(e,t){return k5=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},k5(e,t)}function bde(e,t,r){return t=wde(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wde(e){var t=$ut(e,"string");return m0(t)=="symbol"?t:t+""}function $ut(e,t){if(m0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(m0(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function M5(){return M5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},M5.apply(this,arguments)}function Out(e){var t=e.xAxisId,r=ZI(),s=XI(),a=ade(t);return a==null?null:Q.createElement(mg,M5({},a,{className:mn("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:r,height:s},ticksGenerator:function(o){return Lc(o,!0)}}))}var Dl=function(e){function t(){return Put(this,t),Eut(this,t,arguments)}return Dut(t,e),Aut(t,[{key:"render",value:function(){return Q.createElement(Out,this.props)}}])}(Q.Component);bde(Dl,"displayName","XAxis");bde(Dl,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function p0(e){"@babel/helpers - typeof";return p0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p0(e)}function Rut(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Fut(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,Sde(s.key),s)}}function zut(e,t,r){return t&&Fut(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function But(e,t,r){return t=gN(t),Uut(e,jde()?Reflect.construct(t,r||[],gN(e).constructor):t.apply(e,r))}function Uut(e,t){if(t&&(p0(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Vut(e)}function Vut(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jde(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(jde=function(){return!!e})()}function gN(e){return gN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},gN(e)}function Hut(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_5(e,t)}function _5(e,t){return _5=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},_5(e,t)}function Nde(e,t,r){return t=Sde(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Sde(e){var t=Wut(e,"string");return p0(t)=="symbol"?t:t+""}function Wut(e,t){if(p0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(p0(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function P5(){return P5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},P5.apply(this,arguments)}var qut=function(t){var r=t.yAxisId,s=ZI(),a=XI(),i=ide(r);return i==null?null:Q.createElement(mg,P5({},i,{className:mn("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:s,height:a},ticksGenerator:function(l){return Lc(l,!0)}}))},Mi=function(e){function t(){return Rut(this,t),But(this,t,arguments)}return Hut(t,e),zut(t,[{key:"render",value:function(){return Q.createElement(qut,this.props)}}])}(Q.Component);Nde(Mi,"displayName","YAxis");Nde(Mi,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function Gz(e){return Kut(e)||Qut(e)||Yut(e)||Gut()}function Gut(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Yut(e,t){if(e){if(typeof e=="string")return T5(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return T5(e,t)}}function Qut(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Kut(e){if(Array.isArray(e))return T5(e)}function T5(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}var A5=function(t,r,s,a,i){var o=zi(t,t9),l=zi(t,W3),c=[].concat(Gz(o),Gz(l)),d=zi(t,G3),u="".concat(a,"Id"),f=a[0],h=r;if(c.length&&(h=c.reduce(function(x,y){if(y.props[u]===s&&Gl(y.props,"extendDomain")&&it(y.props[f])){var v=y.props[f];return[Math.min(x[0],v),Math.max(x[1],v)]}return x},h)),d.length){var m="".concat(f,"1"),g="".concat(f,"2");h=d.reduce(function(x,y){if(y.props[u]===s&&Gl(y.props,"extendDomain")&&it(y.props[m])&&it(y.props[g])){var v=y.props[m],b=y.props[g];return[Math.min(x[0],v,b),Math.max(x[1],v,b)]}return x},h)}return i&&i.length&&(h=i.reduce(function(x,y){return it(y)?[Math.min(x[0],y),Math.max(x[1],y)]:x},h)),h},Cde={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(r=!1));function a(c,d,u){this.fn=c,this.context=d,this.once=u||!1}function i(c,d,u,f,h){if(typeof u!="function")throw new TypeError("The listener must be a function");var m=new a(u,f||c,h),g=r?r+d:d;return c._events[g]?c._events[g].fn?c._events[g]=[c._events[g],m]:c._events[g].push(m):(c._events[g]=m,c._eventsCount++),c}function o(c,d){--c._eventsCount===0?c._events=new s:delete c._events[d]}function l(){this._events=new s,this._eventsCount=0}l.prototype.eventNames=function(){var d=[],u,f;if(this._eventsCount===0)return d;for(f in u=this._events)t.call(u,f)&&d.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(u)):d},l.prototype.listeners=function(d){var u=r?r+d:d,f=this._events[u];if(!f)return[];if(f.fn)return[f.fn];for(var h=0,m=f.length,g=new Array(m);h<m;h++)g[h]=f[h].fn;return g},l.prototype.listenerCount=function(d){var u=r?r+d:d,f=this._events[u];return f?f.fn?1:f.length:0},l.prototype.emit=function(d,u,f,h,m,g){var x=r?r+d:d;if(!this._events[x])return!1;var y=this._events[x],v=arguments.length,b,w;if(y.fn){switch(y.once&&this.removeListener(d,y.fn,void 0,!0),v){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,u),!0;case 3:return y.fn.call(y.context,u,f),!0;case 4:return y.fn.call(y.context,u,f,h),!0;case 5:return y.fn.call(y.context,u,f,h,m),!0;case 6:return y.fn.call(y.context,u,f,h,m,g),!0}for(w=1,b=new Array(v-1);w<v;w++)b[w-1]=arguments[w];y.fn.apply(y.context,b)}else{var N=y.length,j;for(w=0;w<N;w++)switch(y[w].once&&this.removeListener(d,y[w].fn,void 0,!0),v){case 1:y[w].fn.call(y[w].context);break;case 2:y[w].fn.call(y[w].context,u);break;case 3:y[w].fn.call(y[w].context,u,f);break;case 4:y[w].fn.call(y[w].context,u,f,h);break;default:if(!b)for(j=1,b=new Array(v-1);j<v;j++)b[j-1]=arguments[j];y[w].fn.apply(y[w].context,b)}}return!0},l.prototype.on=function(d,u,f){return i(this,d,u,f,!1)},l.prototype.once=function(d,u,f){return i(this,d,u,f,!0)},l.prototype.removeListener=function(d,u,f,h){var m=r?r+d:d;if(!this._events[m])return this;if(!u)return o(this,m),this;var g=this._events[m];if(g.fn)g.fn===u&&(!h||g.once)&&(!f||g.context===f)&&o(this,m);else{for(var x=0,y=[],v=g.length;x<v;x++)(g[x].fn!==u||h&&!g[x].once||f&&g[x].context!==f)&&y.push(g[x]);y.length?this._events[m]=y.length===1?y[0]:y:o(this,m)}return this},l.prototype.removeAllListeners=function(d){var u;return d?(u=r?r+d:d,this._events[u]&&o(this,u)):(this._events=new s,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,e.exports=l})(Cde);var Jut=Cde.exports;const Zut=qn(Jut);var uk=new Zut,fk="recharts.syncMouseEvents";function Iv(e){"@babel/helpers - typeof";return Iv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Iv(e)}function Xut(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function eft(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,kde(s.key),s)}}function tft(e,t,r){return t&&eft(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function hk(e,t,r){return t=kde(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kde(e){var t=nft(e,"string");return Iv(t)=="symbol"?t:t+""}function nft(e,t){if(Iv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(Iv(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var rft=function(){function e(){Xut(this,e),hk(this,"activeIndex",0),hk(this,"coordinateList",[]),hk(this,"layout","horizontal")}return tft(e,[{key:"setDetails",value:function(r){var s,a=r.coordinateList,i=a===void 0?null:a,o=r.container,l=o===void 0?null:o,c=r.layout,d=c===void 0?null:c,u=r.offset,f=u===void 0?null:u,h=r.mouseHandlerCallback,m=h===void 0?null:h;this.coordinateList=(s=i??this.coordinateList)!==null&&s!==void 0?s:[],this.container=l??this.container,this.layout=d??this.layout,this.offset=f??this.offset,this.mouseHandlerCallback=m??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,s;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var a=this.container.getBoundingClientRect(),i=a.x,o=a.y,l=a.height,c=this.coordinateList[this.activeIndex].coordinate,d=((r=window)===null||r===void 0?void 0:r.scrollX)||0,u=((s=window)===null||s===void 0?void 0:s.scrollY)||0,f=i+c+d,h=o+this.offset.top+l/2+u;this.mouseHandlerCallback({pageX:f,pageY:h})}}}])}();function sft(e,t,r){if(r==="number"&&t===!0&&Array.isArray(e)){var s=e==null?void 0:e[0],a=e==null?void 0:e[1];if(s&&a&&it(s)&&it(a))return!0}return!1}function aft(e,t,r,s){var a=s/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-a:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-a,width:e==="horizontal"?s:r.width-1,height:e==="horizontal"?r.height-1:s}}function Mde(e){var t=e.cx,r=e.cy,s=e.radius,a=e.startAngle,i=e.endAngle,o=hr(t,r,s,a),l=hr(t,r,s,i);return{points:[o,l],cx:t,cy:r,radius:s,startAngle:a,endAngle:i}}function ift(e,t,r){var s,a,i,o;if(e==="horizontal")s=t.x,i=s,a=r.top,o=r.top+r.height;else if(e==="vertical")a=t.y,o=a,s=r.left,i=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var l=t.cx,c=t.cy,d=t.innerRadius,u=t.outerRadius,f=t.angle,h=hr(l,c,d,f),m=hr(l,c,u,f);s=h.x,a=h.y,i=m.x,o=m.y}else return Mde(t);return[{x:s,y:a},{x:i,y:o}]}function Lv(e){"@babel/helpers - typeof";return Lv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lv(e)}function Yz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function qb(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Yz(Object(r),!0).forEach(function(s){oft(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Yz(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function oft(e,t,r){return t=lft(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lft(e){var t=cft(e,"string");return Lv(t)=="symbol"?t:t+""}function cft(e,t){if(Lv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(Lv(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function dft(e){var t,r,s=e.element,a=e.tooltipEventType,i=e.isActive,o=e.activeCoordinate,l=e.activePayload,c=e.offset,d=e.activeTooltipIndex,u=e.tooltipAxisBandSize,f=e.layout,h=e.chartName,m=(t=s.props.cursor)!==null&&t!==void 0?t:(r=s.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!s||!m||!i||!o||h!=="ScatterChart"&&a!=="axis")return null;var g,x=Y2;if(h==="ScatterChart")g=o,x=_it;else if(h==="BarChart")g=aft(f,o,c,u),x=YI;else if(f==="radial"){var y=Mde(o),v=y.cx,b=y.cy,w=y.radius,N=y.startAngle,j=y.endAngle;g={cx:v,cy:b,startAngle:N,endAngle:j,innerRadius:w,outerRadius:w},x=Nce}else g={points:ift(f,o,c)},x=Y2;var S=qb(qb(qb(qb({stroke:"#ccc",pointerEvents:"none"},c),g),Ht(m,!1)),{},{payload:l,payloadIndex:d,className:mn("recharts-tooltip-cursor",m.className)});return p.isValidElement(m)?p.cloneElement(m,S):p.createElement(x,S)}var uft=["item"],fft=["children","className","width","height","style","compact","title","desc"];function g0(e){"@babel/helpers - typeof";return g0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},g0(e)}function Mm(){return Mm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},Mm.apply(this,arguments)}function Qz(e,t){return pft(e)||mft(e,t)||Pde(e,t)||hft()}function hft(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mft(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s,a,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(s=i.call(r)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(u){d=!0,a=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function pft(e){if(Array.isArray(e))return e}function Kz(e,t){if(e==null)return{};var r=gft(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function gft(e,t){if(e==null)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}function xft(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yft(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,Tde(s.key),s)}}function vft(e,t,r){return t&&yft(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function bft(e,t,r){return t=xN(t),wft(e,_de()?Reflect.construct(t,r||[],xN(e).constructor):t.apply(e,r))}function wft(e,t){if(t&&(g0(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return jft(e)}function jft(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _de(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_de=function(){return!!e})()}function xN(e){return xN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},xN(e)}function Nft(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&E5(e,t)}function E5(e,t){return E5=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},E5(e,t)}function x0(e){return kft(e)||Cft(e)||Pde(e)||Sft()}function Sft(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Pde(e,t){if(e){if(typeof e=="string")return I5(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return I5(e,t)}}function Cft(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function kft(e){if(Array.isArray(e))return I5(e)}function I5(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,s=new Array(t);r<t;r++)s[r]=e[r];return s}function Jz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,s)}return r}function Pe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Jz(Object(r),!0).forEach(function(s){qt(e,s,r[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Jz(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))})}return e}function qt(e,t,r){return t=Tde(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Tde(e){var t=Mft(e,"string");return g0(t)=="symbol"?t:t+""}function Mft(e,t){if(g0(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var s=r.call(e,t);if(g0(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var _ft={xAxis:["bottom","top"],yAxis:["left","right"]},Pft={width:"100%",height:"100%"},Ade={x:0,y:0};function Gb(e){return e}var Tft=function(t,r){return r==="horizontal"?t.x:r==="vertical"?t.y:r==="centric"?t.angle:t.radius},Aft=function(t,r,s,a){var i=r.find(function(u){return u&&u.index===s});if(i){if(t==="horizontal")return{x:i.coordinate,y:a.y};if(t==="vertical")return{x:a.x,y:i.coordinate};if(t==="centric"){var o=i.coordinate,l=a.radius;return Pe(Pe(Pe({},a),hr(a.cx,a.cy,l,o)),{},{angle:o,radius:l})}var c=i.coordinate,d=a.angle;return Pe(Pe(Pe({},a),hr(a.cx,a.cy,c,d)),{},{angle:d,radius:c})}return Ade},Y3=function(t,r){var s=r.graphicalItems,a=r.dataStartIndex,i=r.dataEndIndex,o=(s??[]).reduce(function(l,c){var d=c.props.data;return d&&d.length?[].concat(x0(l),x0(d)):l},[]);return o.length>0?o:t&&t.length&&it(a)&&it(i)?t.slice(a,i+1):[]};function Ede(e){return e==="number"?[0,"auto"]:void 0}var L5=function(t,r,s,a){var i=t.graphicalItems,o=t.tooltipAxis,l=Y3(r,t);return s<0||!i||!i.length||s>=l.length?null:i.reduce(function(c,d){var u,f=(u=d.props.data)!==null&&u!==void 0?u:r;f&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=s&&(f=f.slice(t.dataStartIndex,t.dataEndIndex+1));var h;if(o.dataKey&&!o.allowDuplicatedCategory){var m=f===void 0?l:f;h=x2(m,o.dataKey,a)}else h=f&&f[s]||l[s];return h?[].concat(x0(c),[xce(d,h)]):c},[])},Zz=function(t,r,s,a){var i=a||{x:t.chartX,y:t.chartY},o=Tft(i,s),l=t.orderedTooltipTicks,c=t.tooltipAxis,d=t.tooltipTicks,u=Znt(o,l,d,c);if(u>=0&&d){var f=d[u]&&d[u].value,h=L5(t,r,u,f),m=Aft(s,l,u,i);return{activeTooltipIndex:u,activeLabel:f,activePayload:h,activeCoordinate:m}}return null},Eft=function(t,r){var s=r.axes,a=r.graphicalItems,i=r.axisType,o=r.axisIdKey,l=r.stackGroups,c=r.dataStartIndex,d=r.dataEndIndex,u=t.layout,f=t.children,h=t.stackOffset,m=uce(u,i);return s.reduce(function(g,x){var y,v=x.type.defaultProps!==void 0?Pe(Pe({},x.type.defaultProps),x.props):x.props,b=v.type,w=v.dataKey,N=v.allowDataOverflow,j=v.allowDuplicatedCategory,S=v.scale,C=v.ticks,k=v.includeHidden,M=v[o];if(g[M])return g;var A=Y3(t.data,{graphicalItems:a.filter(function(B){var Z,ne=o in B.props?B.props[o]:(Z=B.type.defaultProps)===null||Z===void 0?void 0:Z[o];return ne===M}),dataStartIndex:c,dataEndIndex:d}),P=A.length,T,I,L;sft(v.domain,N,b)&&(T=Y_(v.domain,null,N),m&&(b==="number"||S!=="auto")&&(L=Fx(A,w,"category")));var R=Ede(b);if(!T||T.length===0){var G,$=(G=v.domain)!==null&&G!==void 0?G:R;if(w){if(T=Fx(A,w,b),b==="category"&&m){var D=zBe(T);j&&D?(I=T,T=sN(0,P)):j||(T=bF($,T,x).reduce(function(B,Z){return B.indexOf(Z)>=0?B:[].concat(x0(B),[Z])},[]))}else if(b==="category")j?T=T.filter(function(B){return B!==""&&!dn(B)}):T=bF($,T,x).reduce(function(B,Z){return B.indexOf(Z)>=0||Z===""||dn(Z)?B:[].concat(x0(B),[Z])},[]);else if(b==="number"){var W=rrt(A,a.filter(function(B){var Z,ne,Y=o in B.props?B.props[o]:(Z=B.type.defaultProps)===null||Z===void 0?void 0:Z[o],me="hide"in B.props?B.props.hide:(ne=B.type.defaultProps)===null||ne===void 0?void 0:ne.hide;return Y===M&&(k||!me)}),w,i,u);W&&(T=W)}m&&(b==="number"||S!=="auto")&&(L=Fx(A,w,"category"))}else m?T=sN(0,P):l&&l[M]&&l[M].hasStack&&b==="number"?T=h==="expand"?[0,1]:gce(l[M].stackGroups,c,d):T=dce(A,a.filter(function(B){var Z=o in B.props?B.props[o]:B.type.defaultProps[o],ne="hide"in B.props?B.props.hide:B.type.defaultProps.hide;return Z===M&&(k||!ne)}),b,u,!0);if(b==="number")T=A5(f,T,M,i,C),$&&(T=Y_($,T,N));else if(b==="category"&&$){var E=$,F=T.every(function(B){return E.indexOf(B)>=0});F&&(T=E)}}return Pe(Pe({},g),{},qt({},M,Pe(Pe({},v),{},{axisType:i,domain:T,categoricalDomain:L,duplicateDomain:I,originalDomain:(y=v.domain)!==null&&y!==void 0?y:R,isCategorical:m,layout:u})))},{})},Ift=function(t,r){var s=r.graphicalItems,a=r.Axis,i=r.axisType,o=r.axisIdKey,l=r.stackGroups,c=r.dataStartIndex,d=r.dataEndIndex,u=t.layout,f=t.children,h=Y3(t.data,{graphicalItems:s,dataStartIndex:c,dataEndIndex:d}),m=h.length,g=uce(u,i),x=-1;return s.reduce(function(y,v){var b=v.type.defaultProps!==void 0?Pe(Pe({},v.type.defaultProps),v.props):v.props,w=b[o],N=Ede("number");if(!y[w]){x++;var j;return g?j=sN(0,m):l&&l[w]&&l[w].hasStack?(j=gce(l[w].stackGroups,c,d),j=A5(f,j,w,i)):(j=Y_(N,dce(h,s.filter(function(S){var C,k,M=o in S.props?S.props[o]:(C=S.type.defaultProps)===null||C===void 0?void 0:C[o],A="hide"in S.props?S.props.hide:(k=S.type.defaultProps)===null||k===void 0?void 0:k.hide;return M===w&&!A}),"number",u),a.defaultProps.allowDataOverflow),j=A5(f,j,w,i)),Pe(Pe({},y),{},qt({},w,Pe(Pe({axisType:i},a.defaultProps),{},{hide:!0,orientation:Fi(_ft,"".concat(i,".").concat(x%2),null),domain:j,originalDomain:N,isCategorical:g,layout:u})))}return y},{})},Lft=function(t,r){var s=r.axisType,a=s===void 0?"xAxis":s,i=r.AxisComp,o=r.graphicalItems,l=r.stackGroups,c=r.dataStartIndex,d=r.dataEndIndex,u=t.children,f="".concat(a,"Id"),h=zi(u,i),m={};return h&&h.length?m=Eft(t,{axes:h,graphicalItems:o,axisType:a,axisIdKey:f,stackGroups:l,dataStartIndex:c,dataEndIndex:d}):o&&o.length&&(m=Ift(t,{Axis:i,graphicalItems:o,axisType:a,axisIdKey:f,stackGroups:l,dataStartIndex:c,dataEndIndex:d})),m},Dft=function(t){var r=Dd(t),s=Lc(r,!1,!0);return{tooltipTicks:s,orderedTooltipTicks:wI(s,function(a){return a.coordinate}),tooltipAxis:r,tooltipAxisBandSize:W2(r,s)}},Xz=function(t){var r=t.children,s=t.defaultShowTooltip,a=ki(r,o0),i=0,o=0;return t.data&&t.data.length!==0&&(o=t.data.length-1),a&&a.props&&(a.props.startIndex>=0&&(i=a.props.startIndex),a.props.endIndex>=0&&(o=a.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!s}},$ft=function(t){return!t||!t.length?!1:t.some(function(r){var s=Fc(r&&r.type);return s&&s.indexOf("Bar")>=0})},eB=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},Oft=function(t,r){var s=t.props,a=t.graphicalItems,i=t.xAxisMap,o=i===void 0?{}:i,l=t.yAxisMap,c=l===void 0?{}:l,d=s.width,u=s.height,f=s.children,h=s.margin||{},m=ki(f,o0),g=ki(f,Zo),x=Object.keys(c).reduce(function(j,S){var C=c[S],k=C.orientation;return!C.mirror&&!C.hide?Pe(Pe({},j),{},qt({},k,j[k]+C.width)):j},{left:h.left||0,right:h.right||0}),y=Object.keys(o).reduce(function(j,S){var C=o[S],k=C.orientation;return!C.mirror&&!C.hide?Pe(Pe({},j),{},qt({},k,Fi(j,"".concat(k))+C.height)):j},{top:h.top||0,bottom:h.bottom||0}),v=Pe(Pe({},y),x),b=v.bottom;m&&(v.bottom+=m.props.height||o0.defaultProps.height),g&&r&&(v=trt(v,a,s,r));var w=d-v.left-v.right,N=u-v.top-v.bottom;return Pe(Pe({brushBottom:b},v),{},{width:Math.max(w,0),height:Math.max(N,0)})},Rft=function(t,r){if(r==="xAxis")return t[r].width;if(r==="yAxis")return t[r].height},s9=function(t){var r=t.chartName,s=t.GraphicalChild,a=t.defaultTooltipEventType,i=a===void 0?"axis":a,o=t.validateTooltipEventTypes,l=o===void 0?["axis"]:o,c=t.axisComponents,d=t.legendContent,u=t.formatAxisMap,f=t.defaultProps,h=function(v,b){var w=b.graphicalItems,N=b.stackGroups,j=b.offset,S=b.updateId,C=b.dataStartIndex,k=b.dataEndIndex,M=v.barSize,A=v.layout,P=v.barGap,T=v.barCategoryGap,I=v.maxBarSize,L=eB(A),R=L.numericAxisName,G=L.cateAxisName,$=$ft(w),D=[];return w.forEach(function(W,E){var F=Y3(v.data,{graphicalItems:[W],dataStartIndex:C,dataEndIndex:k}),B=W.type.defaultProps!==void 0?Pe(Pe({},W.type.defaultProps),W.props):W.props,Z=B.dataKey,ne=B.maxBarSize,Y=B["".concat(R,"Id")],me=B["".concat(G,"Id")],pe={},Me=c.reduce(function(Se,J){var oe=b["".concat(J.axisType,"Map")],ye=B["".concat(J.axisType,"Id")];oe&&oe[ye]||J.axisType==="zAxis"||yh();var Re=oe[ye];return Pe(Pe({},Se),{},qt(qt({},J.axisType,Re),"".concat(J.axisType,"Ticks"),Lc(Re)))},pe),re=Me[G],de=Me["".concat(G,"Ticks")],he=N&&N[Y]&&N[Y].hasStack&&frt(W,N[Y].stackGroups),ce=Fc(W.type).indexOf("Bar")>=0,Be=W2(re,de),le=[],$e=$&&Xnt({barSize:M,stackGroups:N,totalSize:Rft(Me,G)});if(ce){var et,_e,ot=dn(ne)?I:ne,rt=(et=(_e=W2(re,de,!0))!==null&&_e!==void 0?_e:ot)!==null&&et!==void 0?et:0;le=ert({barGap:P,barCategoryGap:T,bandSize:rt!==Be?rt:Be,sizeList:$e[me],maxBarSize:ot}),rt!==Be&&(le=le.map(function(Se){return Pe(Pe({},Se),{},{position:Pe(Pe({},Se.position),{},{offset:Se.position.offset-rt/2})})}))}var z=W&&W.type&&W.type.getComposedData;z&&D.push({props:Pe(Pe({},z(Pe(Pe({},Me),{},{displayedData:F,props:v,dataKey:Z,item:W,bandSize:Be,barPosition:le,offset:j,stackedData:he,layout:A,dataStartIndex:C,dataEndIndex:k}))),{},qt(qt(qt({key:W.key||"item-".concat(E)},R,Me[R]),G,Me[G]),"animationId",S)),childIndex:ZBe(W,v.children),item:W})}),D},m=function(v,b){var w=v.props,N=v.dataStartIndex,j=v.dataEndIndex,S=v.updateId;if(!hR({props:w}))return null;var C=w.children,k=w.layout,M=w.stackOffset,A=w.data,P=w.reverseStackOrder,T=eB(k),I=T.numericAxisName,L=T.cateAxisName,R=zi(C,s),G=drt(A,R,"".concat(I,"Id"),"".concat(L,"Id"),M,P),$=c.reduce(function(B,Z){var ne="".concat(Z.axisType,"Map");return Pe(Pe({},B),{},qt({},ne,Lft(w,Pe(Pe({},Z),{},{graphicalItems:R,stackGroups:Z.axisType===I&&G,dataStartIndex:N,dataEndIndex:j}))))},{}),D=Oft(Pe(Pe({},$),{},{props:w,graphicalItems:R}),b==null?void 0:b.legendBBox);Object.keys($).forEach(function(B){$[B]=u(w,$[B],D,B.replace("Map",""),r)});var W=$["".concat(L,"Map")],E=Dft(W),F=h(w,Pe(Pe({},$),{},{dataStartIndex:N,dataEndIndex:j,updateId:S,graphicalItems:R,stackGroups:G,offset:D}));return Pe(Pe({formattedGraphicalItems:F,graphicalItems:R,offset:D,stackGroups:G},E),$)},g=function(y){function v(b){var w,N,j;return xft(this,v),j=bft(this,v,[b]),qt(j,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),qt(j,"accessibilityManager",new rft),qt(j,"handleLegendBBoxUpdate",function(S){if(S){var C=j.state,k=C.dataStartIndex,M=C.dataEndIndex,A=C.updateId;j.setState(Pe({legendBBox:S},m({props:j.props,dataStartIndex:k,dataEndIndex:M,updateId:A},Pe(Pe({},j.state),{},{legendBBox:S}))))}}),qt(j,"handleReceiveSyncEvent",function(S,C,k){if(j.props.syncId===S){if(k===j.eventEmitterSymbol&&typeof j.props.syncMethod!="function")return;j.applySyncEvent(C)}}),qt(j,"handleBrushChange",function(S){var C=S.startIndex,k=S.endIndex;if(C!==j.state.dataStartIndex||k!==j.state.dataEndIndex){var M=j.state.updateId;j.setState(function(){return Pe({dataStartIndex:C,dataEndIndex:k},m({props:j.props,dataStartIndex:C,dataEndIndex:k,updateId:M},j.state))}),j.triggerSyncEvent({dataStartIndex:C,dataEndIndex:k})}}),qt(j,"handleMouseEnter",function(S){var C=j.getMouseInfo(S);if(C){var k=Pe(Pe({},C),{},{isTooltipActive:!0});j.setState(k),j.triggerSyncEvent(k);var M=j.props.onMouseEnter;tn(M)&&M(k,S)}}),qt(j,"triggeredAfterMouseMove",function(S){var C=j.getMouseInfo(S),k=C?Pe(Pe({},C),{},{isTooltipActive:!0}):{isTooltipActive:!1};j.setState(k),j.triggerSyncEvent(k);var M=j.props.onMouseMove;tn(M)&&M(k,S)}),qt(j,"handleItemMouseEnter",function(S){j.setState(function(){return{isTooltipActive:!0,activeItem:S,activePayload:S.tooltipPayload,activeCoordinate:S.tooltipPosition||{x:S.cx,y:S.cy}}})}),qt(j,"handleItemMouseLeave",function(){j.setState(function(){return{isTooltipActive:!1}})}),qt(j,"handleMouseMove",function(S){S.persist(),j.throttleTriggeredAfterMouseMove(S)}),qt(j,"handleMouseLeave",function(S){j.throttleTriggeredAfterMouseMove.cancel();var C={isTooltipActive:!1};j.setState(C),j.triggerSyncEvent(C);var k=j.props.onMouseLeave;tn(k)&&k(C,S)}),qt(j,"handleOuterEvent",function(S){var C=JBe(S),k=Fi(j.props,"".concat(C));if(C&&tn(k)){var M,A;/.*touch.*/i.test(C)?A=j.getMouseInfo(S.changedTouches[0]):A=j.getMouseInfo(S),k((M=A)!==null&&M!==void 0?M:{},S)}}),qt(j,"handleClick",function(S){var C=j.getMouseInfo(S);if(C){var k=Pe(Pe({},C),{},{isTooltipActive:!0});j.setState(k),j.triggerSyncEvent(k);var M=j.props.onClick;tn(M)&&M(k,S)}}),qt(j,"handleMouseDown",function(S){var C=j.props.onMouseDown;if(tn(C)){var k=j.getMouseInfo(S);C(k,S)}}),qt(j,"handleMouseUp",function(S){var C=j.props.onMouseUp;if(tn(C)){var k=j.getMouseInfo(S);C(k,S)}}),qt(j,"handleTouchMove",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&j.throttleTriggeredAfterMouseMove(S.changedTouches[0])}),qt(j,"handleTouchStart",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&j.handleMouseDown(S.changedTouches[0])}),qt(j,"handleTouchEnd",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&j.handleMouseUp(S.changedTouches[0])}),qt(j,"handleDoubleClick",function(S){var C=j.props.onDoubleClick;if(tn(C)){var k=j.getMouseInfo(S);C(k,S)}}),qt(j,"handleContextMenu",function(S){var C=j.props.onContextMenu;if(tn(C)){var k=j.getMouseInfo(S);C(k,S)}}),qt(j,"triggerSyncEvent",function(S){j.props.syncId!==void 0&&uk.emit(fk,j.props.syncId,S,j.eventEmitterSymbol)}),qt(j,"applySyncEvent",function(S){var C=j.props,k=C.layout,M=C.syncMethod,A=j.state.updateId,P=S.dataStartIndex,T=S.dataEndIndex;if(S.dataStartIndex!==void 0||S.dataEndIndex!==void 0)j.setState(Pe({dataStartIndex:P,dataEndIndex:T},m({props:j.props,dataStartIndex:P,dataEndIndex:T,updateId:A},j.state)));else if(S.activeTooltipIndex!==void 0){var I=S.chartX,L=S.chartY,R=S.activeTooltipIndex,G=j.state,$=G.offset,D=G.tooltipTicks;if(!$)return;if(typeof M=="function")R=M(D,S);else if(M==="value"){R=-1;for(var W=0;W<D.length;W++)if(D[W].value===S.activeLabel){R=W;break}}var E=Pe(Pe({},$),{},{x:$.left,y:$.top}),F=Math.min(I,E.x+E.width),B=Math.min(L,E.y+E.height),Z=D[R]&&D[R].value,ne=L5(j.state,j.props.data,R),Y=D[R]?{x:k==="horizontal"?D[R].coordinate:F,y:k==="horizontal"?B:D[R].coordinate}:Ade;j.setState(Pe(Pe({},S),{},{activeLabel:Z,activeCoordinate:Y,activePayload:ne,activeTooltipIndex:R}))}else j.setState(S)}),qt(j,"renderCursor",function(S){var C,k=j.state,M=k.isTooltipActive,A=k.activeCoordinate,P=k.activePayload,T=k.offset,I=k.activeTooltipIndex,L=k.tooltipAxisBandSize,R=j.getTooltipEventType(),G=(C=S.props.active)!==null&&C!==void 0?C:M,$=j.props.layout,D=S.key||"_recharts-cursor";return Q.createElement(dft,{key:D,activeCoordinate:A,activePayload:P,activeTooltipIndex:I,chartName:r,element:S,isActive:G,layout:$,offset:T,tooltipAxisBandSize:L,tooltipEventType:R})}),qt(j,"renderPolarAxis",function(S,C,k){var M=Fi(S,"type.axisType"),A=Fi(j.state,"".concat(M,"Map")),P=S.type.defaultProps,T=P!==void 0?Pe(Pe({},P),S.props):S.props,I=A&&A[T["".concat(M,"Id")]];return p.cloneElement(S,Pe(Pe({},I),{},{className:mn(M,I.className),key:S.key||"".concat(C,"-").concat(k),ticks:Lc(I,!0)}))}),qt(j,"renderPolarGrid",function(S){var C=S.props,k=C.radialLines,M=C.polarAngles,A=C.polarRadius,P=j.state,T=P.radiusAxisMap,I=P.angleAxisMap,L=Dd(T),R=Dd(I),G=R.cx,$=R.cy,D=R.innerRadius,W=R.outerRadius;return p.cloneElement(S,{polarAngles:Array.isArray(M)?M:Lc(R,!0).map(function(E){return E.coordinate}),polarRadius:Array.isArray(A)?A:Lc(L,!0).map(function(E){return E.coordinate}),cx:G,cy:$,innerRadius:D,outerRadius:W,key:S.key||"polar-grid",radialLines:k})}),qt(j,"renderLegend",function(){var S=j.state.formattedGraphicalItems,C=j.props,k=C.children,M=C.width,A=C.height,P=j.props.margin||{},T=M-(P.left||0)-(P.right||0),I=lce({children:k,formattedGraphicalItems:S,legendWidth:T,legendContent:d});if(!I)return null;var L=I.item,R=Kz(I,uft);return p.cloneElement(L,Pe(Pe({},R),{},{chartWidth:M,chartHeight:A,margin:P,onBBoxUpdate:j.handleLegendBBoxUpdate}))}),qt(j,"renderTooltip",function(){var S,C=j.props,k=C.children,M=C.accessibilityLayer,A=ki(k,ha);if(!A)return null;var P=j.state,T=P.isTooltipActive,I=P.activeCoordinate,L=P.activePayload,R=P.activeLabel,G=P.offset,$=(S=A.props.active)!==null&&S!==void 0?S:T;return p.cloneElement(A,{viewBox:Pe(Pe({},G),{},{x:G.left,y:G.top}),active:$,label:R,payload:$?L:[],coordinate:I,accessibilityLayer:M})}),qt(j,"renderBrush",function(S){var C=j.props,k=C.margin,M=C.data,A=j.state,P=A.offset,T=A.dataStartIndex,I=A.dataEndIndex,L=A.updateId;return p.cloneElement(S,{key:S.key||"_recharts-brush",onChange:Ub(j.handleBrushChange,S.props.onChange),data:M,x:it(S.props.x)?S.props.x:P.left,y:it(S.props.y)?S.props.y:P.top+P.height+P.brushBottom-(k.bottom||0),width:it(S.props.width)?S.props.width:P.width,startIndex:T,endIndex:I,updateId:"brush-".concat(L)})}),qt(j,"renderReferenceElement",function(S,C,k){if(!S)return null;var M=j,A=M.clipPathId,P=j.state,T=P.xAxisMap,I=P.yAxisMap,L=P.offset,R=S.type.defaultProps||{},G=S.props,$=G.xAxisId,D=$===void 0?R.xAxisId:$,W=G.yAxisId,E=W===void 0?R.yAxisId:W;return p.cloneElement(S,{key:S.key||"".concat(C,"-").concat(k),xAxis:T[D],yAxis:I[E],viewBox:{x:L.left,y:L.top,width:L.width,height:L.height},clipPathId:A})}),qt(j,"renderActivePoints",function(S){var C=S.item,k=S.activePoint,M=S.basePoint,A=S.childIndex,P=S.isRange,T=[],I=C.props.key,L=C.item.type.defaultProps!==void 0?Pe(Pe({},C.item.type.defaultProps),C.item.props):C.item.props,R=L.activeDot,G=L.dataKey,$=Pe(Pe({index:A,dataKey:G,cx:k.x,cy:k.y,r:4,fill:GI(C.item),strokeWidth:2,stroke:"#fff",payload:k.payload,value:k.value},Ht(R,!1)),y2(R));return T.push(v.renderActiveDot(R,$,"".concat(I,"-activePoint-").concat(A))),M?T.push(v.renderActiveDot(R,Pe(Pe({},$),{},{cx:M.x,cy:M.y}),"".concat(I,"-basePoint-").concat(A))):P&&T.push(null),T}),qt(j,"renderGraphicChild",function(S,C,k){var M=j.filterFormatItem(S,C,k);if(!M)return null;var A=j.getTooltipEventType(),P=j.state,T=P.isTooltipActive,I=P.tooltipAxis,L=P.activeTooltipIndex,R=P.activeLabel,G=j.props.children,$=ki(G,ha),D=M.props,W=D.points,E=D.isRange,F=D.baseLine,B=M.item.type.defaultProps!==void 0?Pe(Pe({},M.item.type.defaultProps),M.item.props):M.item.props,Z=B.activeDot,ne=B.hide,Y=B.activeBar,me=B.activeShape,pe=!!(!ne&&T&&$&&(Z||Y||me)),Me={};A!=="axis"&&$&&$.props.trigger==="click"?Me={onClick:Ub(j.handleItemMouseEnter,S.props.onClick)}:A!=="axis"&&(Me={onMouseLeave:Ub(j.handleItemMouseLeave,S.props.onMouseLeave),onMouseEnter:Ub(j.handleItemMouseEnter,S.props.onMouseEnter)});var re=p.cloneElement(S,Pe(Pe({},M.props),Me));function de(J){return typeof I.dataKey=="function"?I.dataKey(J.payload):null}if(pe)if(L>=0){var he,ce;if(I.dataKey&&!I.allowDuplicatedCategory){var Be=typeof I.dataKey=="function"?de:"payload.".concat(I.dataKey.toString());he=x2(W,Be,R),ce=E&&F&&x2(F,Be,R)}else he=W==null?void 0:W[L],ce=E&&F&&F[L];if(me||Y){var le=S.props.activeIndex!==void 0?S.props.activeIndex:L;return[p.cloneElement(S,Pe(Pe(Pe({},M.props),Me),{},{activeIndex:le})),null,null]}if(!dn(he))return[re].concat(x0(j.renderActivePoints({item:M,activePoint:he,basePoint:ce,childIndex:L,isRange:E})))}else{var $e,et=($e=j.getItemByXY(j.state.activeCoordinate))!==null&&$e!==void 0?$e:{graphicalItem:re},_e=et.graphicalItem,ot=_e.item,rt=ot===void 0?S:ot,z=_e.childIndex,Se=Pe(Pe(Pe({},M.props),Me),{},{activeIndex:z});return[p.cloneElement(rt,Se),null,null]}return E?[re,null,null]:[re,null]}),qt(j,"renderCustomized",function(S,C,k){return p.cloneElement(S,Pe(Pe({key:"recharts-customized-".concat(k)},j.props),j.state))}),qt(j,"renderMap",{CartesianGrid:{handler:Gb,once:!0},ReferenceArea:{handler:j.renderReferenceElement},ReferenceLine:{handler:Gb},ReferenceDot:{handler:j.renderReferenceElement},XAxis:{handler:Gb},YAxis:{handler:Gb},Brush:{handler:j.renderBrush,once:!0},Bar:{handler:j.renderGraphicChild},Line:{handler:j.renderGraphicChild},Area:{handler:j.renderGraphicChild},Radar:{handler:j.renderGraphicChild},RadialBar:{handler:j.renderGraphicChild},Scatter:{handler:j.renderGraphicChild},Pie:{handler:j.renderGraphicChild},Funnel:{handler:j.renderGraphicChild},Tooltip:{handler:j.renderCursor,once:!0},PolarGrid:{handler:j.renderPolarGrid,once:!0},PolarAngleAxis:{handler:j.renderPolarAxis},PolarRadiusAxis:{handler:j.renderPolarAxis},Customized:{handler:j.renderCustomized}}),j.clipPathId="".concat((w=b.id)!==null&&w!==void 0?w:og("recharts"),"-clip"),j.throttleTriggeredAfterMouseMove=ole(j.triggeredAfterMouseMove,(N=b.throttleDelay)!==null&&N!==void 0?N:1e3/60),j.state={},j}return Nft(v,y),vft(v,[{key:"componentDidMount",value:function(){var w,N;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(w=this.props.margin.left)!==null&&w!==void 0?w:0,top:(N=this.props.margin.top)!==null&&N!==void 0?N:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var w=this.props,N=w.children,j=w.data,S=w.height,C=w.layout,k=ki(N,ha);if(k){var M=k.props.defaultIndex;if(!(typeof M!="number"||M<0||M>this.state.tooltipTicks.length-1)){var A=this.state.tooltipTicks[M]&&this.state.tooltipTicks[M].value,P=L5(this.state,j,M,A),T=this.state.tooltipTicks[M].coordinate,I=(this.state.offset.top+S)/2,L=C==="horizontal",R=L?{x:T,y:I}:{y:T,x:I},G=this.state.formattedGraphicalItems.find(function(D){var W=D.item;return W.type.name==="Scatter"});G&&(R=Pe(Pe({},R),G.props.points[M].tooltipPosition),P=G.props.points[M].tooltipPayload);var $={activeTooltipIndex:M,isTooltipActive:!0,activeLabel:A,activePayload:P,activeCoordinate:R};this.setState($),this.renderCursor(k),this.accessibilityManager.setIndex(M)}}}},{key:"getSnapshotBeforeUpdate",value:function(w,N){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==N.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==w.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==w.margin){var j,S;this.accessibilityManager.setDetails({offset:{left:(j=this.props.margin.left)!==null&&j!==void 0?j:0,top:(S=this.props.margin.top)!==null&&S!==void 0?S:0}})}return null}},{key:"componentDidUpdate",value:function(w){c_([ki(w.children,ha)],[ki(this.props.children,ha)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var w=ki(this.props.children,ha);if(w&&typeof w.props.shared=="boolean"){var N=w.props.shared?"axis":"item";return l.indexOf(N)>=0?N:i}return i}},{key:"getMouseInfo",value:function(w){if(!this.container)return null;var N=this.container,j=N.getBoundingClientRect(),S=SZe(j),C={chartX:Math.round(w.pageX-S.left),chartY:Math.round(w.pageY-S.top)},k=j.width/N.offsetWidth||1,M=this.inRange(C.chartX,C.chartY,k);if(!M)return null;var A=this.state,P=A.xAxisMap,T=A.yAxisMap,I=this.getTooltipEventType(),L=Zz(this.state,this.props.data,this.props.layout,M);if(I!=="axis"&&P&&T){var R=Dd(P).scale,G=Dd(T).scale,$=R&&R.invert?R.invert(C.chartX):null,D=G&&G.invert?G.invert(C.chartY):null;return Pe(Pe({},C),{},{xValue:$,yValue:D},L)}return L?Pe(Pe({},C),L):null}},{key:"inRange",value:function(w,N){var j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,S=this.props.layout,C=w/j,k=N/j;if(S==="horizontal"||S==="vertical"){var M=this.state.offset,A=C>=M.left&&C<=M.left+M.width&&k>=M.top&&k<=M.top+M.height;return A?{x:C,y:k}:null}var P=this.state,T=P.angleAxisMap,I=P.radiusAxisMap;if(T&&I){var L=Dd(T);return NF({x:C,y:k},L)}return null}},{key:"parseEventsOfWrapper",value:function(){var w=this.props.children,N=this.getTooltipEventType(),j=ki(w,ha),S={};j&&N==="axis"&&(j.props.trigger==="click"?S={onClick:this.handleClick}:S={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var C=y2(this.props,this.handleOuterEvent);return Pe(Pe({},C),S)}},{key:"addListener",value:function(){uk.on(fk,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){uk.removeListener(fk,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(w,N,j){for(var S=this.state.formattedGraphicalItems,C=0,k=S.length;C<k;C++){var M=S[C];if(M.item===w||M.props.key===w.key||N===Fc(M.item.type)&&j===M.childIndex)return M}return null}},{key:"renderClipPath",value:function(){var w=this.clipPathId,N=this.state.offset,j=N.left,S=N.top,C=N.height,k=N.width;return Q.createElement("defs",null,Q.createElement("clipPath",{id:w},Q.createElement("rect",{x:j,y:S,height:C,width:k})))}},{key:"getXScales",value:function(){var w=this.state.xAxisMap;return w?Object.entries(w).reduce(function(N,j){var S=Qz(j,2),C=S[0],k=S[1];return Pe(Pe({},N),{},qt({},C,k.scale))},{}):null}},{key:"getYScales",value:function(){var w=this.state.yAxisMap;return w?Object.entries(w).reduce(function(N,j){var S=Qz(j,2),C=S[0],k=S[1];return Pe(Pe({},N),{},qt({},C,k.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(w){var N;return(N=this.state.xAxisMap)===null||N===void 0||(N=N[w])===null||N===void 0?void 0:N.scale}},{key:"getYScaleByAxisId",value:function(w){var N;return(N=this.state.yAxisMap)===null||N===void 0||(N=N[w])===null||N===void 0?void 0:N.scale}},{key:"getItemByXY",value:function(w){var N=this.state,j=N.formattedGraphicalItems,S=N.activeItem;if(j&&j.length)for(var C=0,k=j.length;C<k;C++){var M=j[C],A=M.props,P=M.item,T=P.type.defaultProps!==void 0?Pe(Pe({},P.type.defaultProps),P.props):P.props,I=Fc(P.type);if(I==="Bar"){var L=(A.data||[]).find(function(D){return lit(w,D)});if(L)return{graphicalItem:M,payload:L}}else if(I==="RadialBar"){var R=(A.data||[]).find(function(D){return NF(w,D)});if(R)return{graphicalItem:M,payload:R}}else if(B3(M,S)||U3(M,S)||_v(M,S)){var G=Kot({graphicalItem:M,activeTooltipItem:S,itemData:T.data}),$=T.activeIndex===void 0?G:T.activeIndex;return{graphicalItem:Pe(Pe({},M),{},{childIndex:$}),payload:_v(M,S)?T.data[G]:M.props.data[G]}}}return null}},{key:"render",value:function(){var w=this;if(!hR(this))return null;var N=this.props,j=N.children,S=N.className,C=N.width,k=N.height,M=N.style,A=N.compact,P=N.title,T=N.desc,I=Kz(N,fft),L=Ht(I,!1);if(A)return Q.createElement(Az,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},Q.createElement(u_,Mm({},L,{width:C,height:k,title:P,desc:T}),this.renderClipPath(),pR(j,this.renderMap)));if(this.props.accessibilityLayer){var R,G;L.tabIndex=(R=this.props.tabIndex)!==null&&R!==void 0?R:0,L.role=(G=this.props.role)!==null&&G!==void 0?G:"application",L.onKeyDown=function(D){w.accessibilityManager.keyboardEvent(D)},L.onFocus=function(){w.accessibilityManager.focus()}}var $=this.parseEventsOfWrapper();return Q.createElement(Az,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},Q.createElement("div",Mm({className:mn("recharts-wrapper",S),style:Pe({position:"relative",cursor:"default",width:C,height:k},M)},$,{ref:function(W){w.container=W}}),Q.createElement(u_,Mm({},L,{width:C,height:k,title:P,desc:T,style:Pft}),this.renderClipPath(),pR(j,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(p.Component);qt(g,"displayName",r),qt(g,"defaultProps",Pe({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},f)),qt(g,"getDerivedStateFromProps",function(y,v){var b=y.dataKey,w=y.data,N=y.children,j=y.width,S=y.height,C=y.layout,k=y.stackOffset,M=y.margin,A=v.dataStartIndex,P=v.dataEndIndex;if(v.updateId===void 0){var T=Xz(y);return Pe(Pe(Pe({},T),{},{updateId:0},m(Pe(Pe({props:y},T),{},{updateId:0}),v)),{},{prevDataKey:b,prevData:w,prevWidth:j,prevHeight:S,prevLayout:C,prevStackOffset:k,prevMargin:M,prevChildren:N})}if(b!==v.prevDataKey||w!==v.prevData||j!==v.prevWidth||S!==v.prevHeight||C!==v.prevLayout||k!==v.prevStackOffset||!Km(M,v.prevMargin)){var I=Xz(y),L={chartX:v.chartX,chartY:v.chartY,isTooltipActive:v.isTooltipActive},R=Pe(Pe({},Zz(v,w,C)),{},{updateId:v.updateId+1}),G=Pe(Pe(Pe({},I),L),R);return Pe(Pe(Pe({},G),m(Pe({props:y},G),v)),{},{prevDataKey:b,prevData:w,prevWidth:j,prevHeight:S,prevLayout:C,prevStackOffset:k,prevMargin:M,prevChildren:N})}if(!c_(N,v.prevChildren)){var $,D,W,E,F=ki(N,o0),B=F&&($=(D=F.props)===null||D===void 0?void 0:D.startIndex)!==null&&$!==void 0?$:A,Z=F&&(W=(E=F.props)===null||E===void 0?void 0:E.endIndex)!==null&&W!==void 0?W:P,ne=B!==A||Z!==P,Y=!dn(w),me=Y&&!ne?v.updateId:v.updateId+1;return Pe(Pe({updateId:me},m(Pe(Pe({props:y},v),{},{updateId:me,dataStartIndex:B,dataEndIndex:Z}),v)),{},{prevChildren:N,dataStartIndex:B,dataEndIndex:Z})}return null}),qt(g,"renderActiveDot",function(y,v,b){var w;return p.isValidElement(y)?w=p.cloneElement(y,v):tn(y)?w=y(v):w=Q.createElement($3,v),Q.createElement(Bn,{className:"recharts-active-dot",key:b},w)});var x=p.forwardRef(function(v,b){return Q.createElement(g,Mm({},v,{ref:b}))});return x.displayName=g.displayName,x},tB=s9({chartName:"LineChart",GraphicalChild:_c,axisComponents:[{axisType:"xAxis",AxisComp:Dl},{axisType:"yAxis",AxisComp:Mi}],formatAxisMap:Jce}),Rw=s9({chartName:"BarChart",GraphicalChild:Oa,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:Dl},{axisType:"yAxis",AxisComp:Mi}],formatAxisMap:Jce}),Fft=s9({chartName:"PieChart",GraphicalChild:gd,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:z3},{axisType:"radiusAxis",AxisComp:R3}],formatAxisMap:jrt,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});function zft(){var M,A,P,T,I,L,R,G;const[,e]=zt(),[t,r]=p.useState("12"),{data:s,isLoading:a}=be({queryKey:["/api/analytics/seasonal-trends",t]}),{data:i,isLoading:o}=be({queryKey:["/api/analytics/service-popularity",t]}),{data:l,isLoading:c}=be({queryKey:["/api/analytics/campaign-effectiveness"]}),{data:d,isLoading:u}=be({queryKey:["/api/analytics/financial-forecast"]}),{data:f,isLoading:h}=be({queryKey:["/api/analytics/upsell-performance",t]}),m=((M=s==null?void 0:s.appointments)==null?void 0:M.map($=>{var W;const D=(W=s==null?void 0:s.revenue)==null?void 0:W.find(E=>E.month===$.month);return{month:$.month,appointments:$.count,completed:$.completed,revenue:Number((D==null?void 0:D.paidRevenue)||0)}}))||[],g=((A=i==null?void 0:i.services)==null?void 0:A.map($=>({name:$.serviceName.length>20?$.serviceName.slice(0,20)+"...":$.serviceName,fullName:$.serviceName,total:$.count,completed:$.completed,cancelled:$.cancelled})))||[],x=((P=l==null?void 0:l.campaigns)==null?void 0:P.map($=>({name:$.campaignName.length>15?$.campaignName.slice(0,15)+"...":$.campaignName,fullName:$.campaignName,appointments:$.appointmentsGenerated,revenue:Number($.revenueGenerated),roi:$.recipientCount>0?(Number($.revenueGenerated)/$.recipientCount*100).toFixed(2):0})))||[],y=[...((T=d==null?void 0:d.historical)==null?void 0:T.map($=>({month:$.month,actual:Number($.revenue),type:"historical"})))||[],...((I=d==null?void 0:d.forecast)==null?void 0:I.map($=>({month:$.month,predicted:$.predictedRevenue,type:"forecast"})))||[]],v=((L=f==null?void 0:f.upsells)==null?void 0:L.map($=>({month:$.month,offered:$.offered,accepted:$.accepted,acceptanceRate:$.offered>0?($.accepted/$.offered*100).toFixed(1):0,revenue:Number($.revenue||0)})))||[],b=m.reduce(($,D)=>$+D.appointments,0),w=m.reduce(($,D)=>$+D.revenue,0),N=m.length>0?w/m.length:0,j=((R=m[m.length-1])==null?void 0:R.revenue)||0,S=((G=m[m.length-2])==null?void 0:G.revenue)||0,C=S>0?(j-S)/S*100:0,k=n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs(_,{variant:"ghost",size:"sm",onClick:()=>e("/dashboard"),className:"gap-2",children:[n.jsx(pi,{className:"h-4 w-4"}),"Back"]}),n.jsxs(Pt,{value:t,onValueChange:r,children:[n.jsx(kt,{className:"w-40",children:n.jsx(Tt,{})}),n.jsxs(Mt,{children:[n.jsx(ve,{value:"3",children:"Last 3 months"}),n.jsx(ve,{value:"6",children:"Last 6 months"}),n.jsx(ve,{value:"12",children:"Last 12 months"}),n.jsx(ve,{value:"24",children:"Last 24 months"})]})]})]});return n.jsx(xn,{title:"Business Analytics",pageActions:k,children:n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Insights into seasonal trends, service popularity, and financial forecasting"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[n.jsxs(O,{className:"bg-gradient-to-br from-blue-500 to-blue-600 text-white",children:[n.jsx(ee,{className:"pb-2",children:n.jsxs(te,{className:"text-sm font-medium flex items-center justify-between",children:["Total Revenue",n.jsx(Ar,{className:"h-5 w-5"})]})}),n.jsxs(H,{children:[n.jsxs("div",{className:"text-3xl font-bold",children:["$",w.toLocaleString()]}),n.jsxs("p",{className:"text-xs text-blue-100 mt-1",children:["Last ",t," months"]})]})]}),n.jsxs(O,{className:"bg-gradient-to-br from-purple-500 to-purple-600 text-white",children:[n.jsx(ee,{className:"pb-2",children:n.jsxs(te,{className:"text-sm font-medium flex items-center justify-between",children:["Total Appointments",n.jsx(Dt,{className:"h-5 w-5"})]})}),n.jsxs(H,{children:[n.jsx("div",{className:"text-3xl font-bold",children:b}),n.jsx("p",{className:"text-xs text-purple-100 mt-1",children:"Across all services"})]})]}),n.jsxs(O,{className:"bg-gradient-to-br from-green-500 to-green-600 text-white",children:[n.jsx(ee,{className:"pb-2",children:n.jsxs(te,{className:"text-sm font-medium flex items-center justify-between",children:["Avg Monthly Revenue",n.jsx(Mp,{className:"h-5 w-5"})]})}),n.jsxs(H,{children:[n.jsxs("div",{className:"text-3xl font-bold",children:["$",Math.round(N).toLocaleString()]}),n.jsx("p",{className:"text-xs text-green-100 mt-1",children:"Monthly average"})]})]}),n.jsxs(O,{className:`bg-gradient-to-br ${C>=0?"from-emerald-500 to-emerald-600":"from-red-500 to-red-600"} text-white`,children:[n.jsx(ee,{className:"pb-2",children:n.jsxs(te,{className:"text-sm font-medium flex items-center justify-between",children:["Revenue Growth",C>=0?n.jsx(O0e,{className:"h-5 w-5"}):n.jsx(D0e,{className:"h-5 w-5"})]})}),n.jsxs(H,{children:[n.jsxs("div",{className:"text-3xl font-bold",children:[C>=0?"+":"",C.toFixed(1),"%"]}),n.jsx("p",{className:"text-xs text-white/80 mt-1",children:"Month-over-month"})]})]})]}),n.jsxs(js,{defaultValue:"seasonal",className:"space-y-6",children:[n.jsxs(ds,{className:"grid grid-cols-5 w-full lg:w-auto",children:[n.jsx(dt,{value:"seasonal",children:"Seasonal Trends"}),n.jsx(dt,{value:"services",children:"Services"}),n.jsx(dt,{value:"campaigns",children:"Campaigns"}),n.jsx(dt,{value:"forecast",children:"Forecast"}),n.jsx(dt,{value:"upsells",children:"Upsells"})]}),n.jsx(pt,{value:"seasonal",className:"space-y-6",children:n.jsxs(O,{children:[n.jsxs(ee,{children:[n.jsx(te,{children:"Appointments & Revenue Over Time"}),n.jsx(ke,{children:"Track your busy and slow seasons to optimize scheduling and marketing"})]}),n.jsx(H,{children:a?n.jsx(Lt,{className:"h-80 w-full"}):n.jsx(uf,{width:"100%",height:400,children:n.jsxs(tB,{data:m,children:[n.jsx(hf,{strokeDasharray:"3 3"}),n.jsx(Dl,{dataKey:"month"}),n.jsx(Mi,{yAxisId:"left"}),n.jsx(Mi,{yAxisId:"right",orientation:"right"}),n.jsx(ha,{}),n.jsx(Zo,{}),n.jsx(_c,{yAxisId:"left",type:"monotone",dataKey:"appointments",stroke:"#3b82f6",strokeWidth:2,name:"Appointments"}),n.jsx(_c,{yAxisId:"left",type:"monotone",dataKey:"completed",stroke:"#10b981",strokeWidth:2,name:"Completed"}),n.jsx(_c,{yAxisId:"right",type:"monotone",dataKey:"revenue",stroke:"#8b5cf6",strokeWidth:2,name:"Revenue ($)"})]})})})]})}),n.jsx(pt,{value:"services",className:"space-y-6",children:n.jsxs(O,{children:[n.jsxs(ee,{children:[n.jsx(te,{children:"Service Popularity"}),n.jsx(ke,{children:"Identify your most booked services and optimize your offerings"})]}),n.jsx(H,{children:o?n.jsx(Lt,{className:"h-80 w-full"}):n.jsx(uf,{width:"100%",height:400,children:n.jsxs(Rw,{data:g,children:[n.jsx(hf,{strokeDasharray:"3 3"}),n.jsx(Dl,{dataKey:"name"}),n.jsx(Mi,{}),n.jsx(ha,{content:({active:$,payload:D})=>{if($&&D&&D.length){const W=D[0].payload;return n.jsxs("div",{className:"bg-white dark:bg-gray-800 p-3 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg",children:[n.jsx("p",{className:"font-semibold",children:W.fullName}),n.jsxs("p",{className:"text-sm text-blue-600",children:["Total: ",W.total]}),n.jsxs("p",{className:"text-sm text-green-600",children:["Completed: ",W.completed]}),n.jsxs("p",{className:"text-sm text-red-600",children:["Cancelled: ",W.cancelled]})]})}return null}}),n.jsx(Zo,{}),n.jsx(Oa,{dataKey:"total",fill:"#3b82f6",name:"Total Bookings"}),n.jsx(Oa,{dataKey:"completed",fill:"#10b981",name:"Completed"}),n.jsx(Oa,{dataKey:"cancelled",fill:"#ef4444",name:"Cancelled"})]})})})]})}),n.jsx(pt,{value:"campaigns",className:"space-y-6",children:n.jsxs(O,{children:[n.jsxs(ee,{children:[n.jsx(te,{children:"Marketing Campaign Performance"}),n.jsx(ke,{children:"Measure ROI and effectiveness of your email marketing campaigns"})]}),n.jsx(H,{children:c?n.jsx(Lt,{className:"h-80 w-full"}):x.length>0?n.jsx(uf,{width:"100%",height:400,children:n.jsxs(Rw,{data:x,children:[n.jsx(hf,{strokeDasharray:"3 3"}),n.jsx(Dl,{dataKey:"name"}),n.jsx(Mi,{yAxisId:"left"}),n.jsx(Mi,{yAxisId:"right",orientation:"right"}),n.jsx(ha,{content:({active:$,payload:D})=>{if($&&D&&D.length){const W=D[0].payload;return n.jsxs("div",{className:"bg-white dark:bg-gray-800 p-3 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg",children:[n.jsx("p",{className:"font-semibold",children:W.fullName}),n.jsxs("p",{className:"text-sm text-blue-600",children:["Appointments: ",W.appointments]}),n.jsxs("p",{className:"text-sm text-green-600",children:["Revenue: $",W.revenue]}),n.jsxs("p",{className:"text-sm text-purple-600",children:["ROI: ",W.roi,"%"]})]})}return null}}),n.jsx(Zo,{}),n.jsx(Oa,{yAxisId:"left",dataKey:"appointments",fill:"#3b82f6",name:"Appointments Generated"}),n.jsx(Oa,{yAxisId:"right",dataKey:"revenue",fill:"#10b981",name:"Revenue ($)"})]})}):n.jsx("div",{className:"h-80 flex items-center justify-center text-gray-500 dark:text-gray-400",children:n.jsxs("div",{className:"text-center",children:[n.jsx(Cr,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),n.jsx("p",{children:"No email campaigns sent yet"}),n.jsx("p",{className:"text-sm mt-2",children:"Send your first campaign to see performance data here"})]})})})]})}),n.jsxs(pt,{value:"forecast",className:"space-y-6",children:[n.jsxs(O,{children:[n.jsxs(ee,{children:[n.jsx(te,{children:"Revenue Forecast"}),n.jsx(ke,{children:"6-month revenue prediction based on historical trends"})]}),n.jsx(H,{children:u?n.jsx(Lt,{className:"h-80 w-full"}):n.jsx(uf,{width:"100%",height:400,children:n.jsxs(tB,{data:y,children:[n.jsx(hf,{strokeDasharray:"3 3"}),n.jsx(Dl,{dataKey:"month"}),n.jsx(Mi,{}),n.jsx(ha,{}),n.jsx(Zo,{}),n.jsx(_c,{type:"monotone",dataKey:"actual",stroke:"#3b82f6",strokeWidth:2,name:"Actual Revenue"}),n.jsx(_c,{type:"monotone",dataKey:"predicted",stroke:"#8b5cf6",strokeWidth:2,strokeDasharray:"5 5",name:"Predicted Revenue"})]})})})]}),(d==null?void 0:d.metrics)&&n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsxs(O,{children:[n.jsx(ee,{className:"pb-2",children:n.jsx(te,{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Avg Monthly Revenue"})}),n.jsx(H,{children:n.jsxs("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:["$",(d.metrics.avgMonthlyRevenue||0).toLocaleString()]})})]}),n.jsxs(O,{children:[n.jsx(ee,{className:"pb-2",children:n.jsx(te,{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Growth Rate"})}),n.jsx(H,{children:n.jsxs("div",{className:`text-2xl font-bold ${(d.metrics.growthRate||0)>=0?"text-green-600":"text-red-600"}`,children:[(d.metrics.growthRate||0)>=0?"+":"",((d.metrics.growthRate||0)*100).toFixed(1),"%"]})})]}),n.jsxs(O,{children:[n.jsx(ee,{className:"pb-2",children:n.jsx(te,{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Total Revenue (12mo)"})}),n.jsx(H,{children:n.jsxs("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:["$",Number(d.metrics.totalRevenue||0).toLocaleString()]})})]})]})]}),n.jsx(pt,{value:"upsells",className:"space-y-6",children:n.jsxs(O,{children:[n.jsxs(ee,{children:[n.jsx(te,{children:"Upsell Performance"}),n.jsx(ke,{children:"Track acceptance rates and revenue from upsell offers"})]}),n.jsx(H,{children:h?n.jsx(Lt,{className:"h-80 w-full"}):v.length>0?n.jsx(uf,{width:"100%",height:400,children:n.jsxs(Rw,{data:v,children:[n.jsx(hf,{strokeDasharray:"3 3"}),n.jsx(Dl,{dataKey:"month"}),n.jsx(Mi,{yAxisId:"left"}),n.jsx(Mi,{yAxisId:"right",orientation:"right"}),n.jsx(ha,{}),n.jsx(Zo,{}),n.jsx(Oa,{yAxisId:"left",dataKey:"offered",fill:"#3b82f6",name:"Offered"}),n.jsx(Oa,{yAxisId:"left",dataKey:"accepted",fill:"#10b981",name:"Accepted"}),n.jsx(Oa,{yAxisId:"right",dataKey:"revenue",fill:"#8b5cf6",name:"Revenue ($)"})]})}):n.jsx("div",{className:"h-80 flex items-center justify-center text-gray-500 dark:text-gray-400",children:n.jsxs("div",{className:"text-center",children:[n.jsx(Mp,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),n.jsx("p",{children:"No upsell data available"}),n.jsx("p",{className:"text-sm mt-2",children:"Create upsell offers to start tracking performance"})]})})})]})})]})]})})}function Bft(){const[,e]=zt(),{toast:t}=Ee(),[r,s]=p.useState(""),[a,i]=p.useState(!1),{data:o,isLoading:l}=be({queryKey:["/api/recurring-services/customer",r],queryFn:async()=>{const g=await fetch(`/api/recurring-services/customer/${encodeURIComponent(r)}`);if(!g.ok)throw new Error("Failed to fetch recurring services");return(await g.json()).data||[]},enabled:a&&!!r}),{data:c}=be({queryKey:["/api/appointments/customer",r],queryFn:async()=>{const g=await fetch(`/api/appointments/customer/${encodeURIComponent(r)}`);if(!g.ok)throw new Error("Failed to fetch appointments");return(await g.json()).data||[]},enabled:a&&!!r}),d=je({mutationFn:async g=>Ne("POST",`/api/recurring-services/customer/${encodeURIComponent(r)}/pause/${g}`,{reason:"Customer requested pause"}),onSuccess:()=>{ze.invalidateQueries({queryKey:["/api/recurring-services/customer",r]}),t({title:"Service Paused",description:"Your recurring service has been paused successfully."})},onError:()=>{t({title:"Error",description:"Failed to pause recurring service. Please try again.",variant:"destructive"})}}),u=je({mutationFn:async g=>Ne("POST",`/api/recurring-services/customer/${encodeURIComponent(r)}/resume/${g}`),onSuccess:()=>{ze.invalidateQueries({queryKey:["/api/recurring-services/customer",r]}),t({title:"Service Resumed",description:"Your recurring service has been resumed successfully."})},onError:()=>{t({title:"Error",description:"Failed to resume recurring service. Please try again.",variant:"destructive"})}}),f=()=>{if(!r||r.length<10){t({title:"Invalid Phone Number",description:"Please enter a valid phone number.",variant:"destructive"});return}i(!0)},h=g=>({weekly:"Weekly",biweekly:"Every 2 Weeks",monthly:"Monthly",quarterly:"Quarterly",yearly:"Yearly"})[g]||g,m=g=>({weekly:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",biweekly:"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200",monthly:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",quarterly:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200",yearly:"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200"})[g]||"bg-gray-100 text-gray-800";return a?n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-900 dark:to-slate-800 p-4",children:n.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-slate-100",children:"My Recurring Services"}),n.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Manage your auto detailing schedule"})]}),n.jsx(_,{variant:"outline",onClick:()=>i(!1),"data-testid":"button-logout",children:"Change Number"})]}),n.jsxs(js,{defaultValue:"active",className:"w-full",children:[n.jsxs(ds,{className:"grid w-full grid-cols-2",children:[n.jsx(dt,{value:"active","data-testid":"tab-active-services",children:"Active Services"}),n.jsx(dt,{value:"upcoming","data-testid":"tab-upcoming-appointments",children:"Upcoming Appointments"})]}),n.jsx(pt,{value:"active",className:"space-y-4",children:l?n.jsxs("div",{className:"text-center py-12",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-slate-900 dark:border-slate-100 mx-auto"}),n.jsx("p",{className:"mt-4 text-slate-600 dark:text-slate-400",children:"Loading your services..."})]}):!o||o.length===0?n.jsx(O,{children:n.jsxs(H,{className:"py-12 text-center",children:[n.jsx(Wt,{className:"h-12 w-12 text-slate-400 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-medium text-slate-900 dark:text-slate-100 mb-2",children:"No Recurring Services"}),n.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"You don't have any recurring services scheduled yet."}),n.jsx(_,{className:"mt-4",onClick:()=>e("/schedule"),"data-testid":"button-schedule-service",children:"Schedule a Service"})]})}):n.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:o.map(g=>{var x,y,v,b;return n.jsxs(O,{className:g.isActive?"":"opacity-60",children:[n.jsx(ee,{children:n.jsx("div",{className:"flex items-start justify-between",children:n.jsxs("div",{className:"flex-1",children:[n.jsxs(te,{className:"flex items-center gap-2",children:[((x=g.service)==null?void 0:x.name)||"Service",g.isActive?n.jsx(nn,{className:"h-5 w-5 text-green-600"}):n.jsx(Cp,{className:"h-5 w-5 text-orange-600"})]}),n.jsx(ke,{className:"mt-2",children:n.jsx(ge,{className:m(g.frequency),children:h(g.frequency)})})]})})}),n.jsxs(H,{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600 dark:text-slate-400",children:[n.jsx(Dt,{className:"h-4 w-4"}),n.jsxs("span",{children:["Next Service: ",Ie(new Date(g.nextScheduledDate),"PPP")]})]}),n.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600 dark:text-slate-400",children:[n.jsx(Rt,{className:"h-4 w-4"}),n.jsxs("span",{children:["Duration: ",(y=g.service)==null?void 0:y.minDuration,"-",(v=g.service)==null?void 0:v.maxDuration," min"]})]}),n.jsx("div",{className:"flex gap-2",children:g.isActive?n.jsxs(V0,{children:[n.jsx(YSe,{asChild:!0,children:n.jsxs(_,{variant:"outline",size:"sm",className:"flex-1","data-testid":`button-pause-${g.id}`,children:[n.jsx(Cp,{className:"h-4 w-4 mr-2"}),"Pause Service"]})}),n.jsxs(kh,{children:[n.jsxs(wu,{children:[n.jsx(Nu,{children:"Pause Recurring Service?"}),n.jsxs(Rc,{children:["This will pause your ",h(g.frequency).toLowerCase()," ",(b=g.service)==null?void 0:b.name," schedule. You can resume it anytime."]})]}),n.jsxs(ju,{children:[n.jsx(_h,{children:"Cancel"}),n.jsx(Mh,{onClick:()=>d.mutate(g.id),disabled:d.isPending,children:d.isPending?"Pausing...":"Pause Service"})]})]})]}):n.jsxs(_,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>u.mutate(g.id),disabled:u.isPending,"data-testid":`button-resume-${g.id}`,children:[n.jsx(A0,{className:"h-4 w-4 mr-2"}),u.isPending?"Resuming...":"Resume Service"]})})]})]},g.id)})})}),n.jsx(pt,{value:"upcoming",className:"space-y-4",children:!c||c.length===0?n.jsx(O,{children:n.jsxs(H,{className:"py-12 text-center",children:[n.jsx(Dt,{className:"h-12 w-12 text-slate-400 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-medium text-slate-900 dark:text-slate-100 mb-2",children:"No Upcoming Appointments"}),n.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"You don't have any appointments scheduled yet."})]})}):n.jsx("div",{className:"space-y-3",children:c.filter(g=>new Date(g.scheduledTime)>=new Date).sort((g,x)=>new Date(g.scheduledTime).getTime()-new Date(x.scheduledTime).getTime()).map(g=>n.jsx(O,{children:n.jsx(H,{className:"py-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-semibold text-slate-900 dark:text-slate-100",children:g.serviceName}),n.jsxs("div",{className:"flex items-center gap-4 mt-2 text-sm text-slate-600 dark:text-slate-400",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Dt,{className:"h-4 w-4"}),n.jsx("span",{children:Ie(new Date(g.scheduledTime),"PPP")})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Rt,{className:"h-4 w-4"}),n.jsx("span",{children:Ie(new Date(g.scheduledTime),"p")})]})]}),g.address&&n.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1",children:g.address})]}),n.jsx(ge,{variant:g.status==="confirmed"?"default":"secondary",children:g.status})]})})},g.id))})})]}),n.jsx(O,{className:"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800",children:n.jsx(H,{className:"py-4",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(Wt,{className:"h-5 w-5 text-blue-600 dark:text-blue-400 mt-0.5"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"font-medium text-blue-900 dark:text-blue-100 mb-1",children:"Need to make changes?"}),n.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:"To reschedule an appointment or cancel a recurring service, please contact us at (555) 123-4567 or message us on our website."})]})]})})})]})}):n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-900 dark:to-slate-800 p-4 flex items-center justify-center",children:n.jsxs(O,{className:"w-full max-w-md",children:[n.jsxs(ee,{children:[n.jsx(te,{className:"text-2xl",children:"My Recurring Services"}),n.jsx(ke,{children:"Enter your phone number to view your recurring service schedule"})]}),n.jsxs(H,{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(U,{htmlFor:"phone",children:"Phone Number"}),n.jsx(se,{id:"phone",type:"tel",placeholder:"(555) 123-4567",value:r,onChange:g=>s(g.target.value),"data-testid":"input-customer-phone"})]}),n.jsx(_,{onClick:f,className:"w-full","data-testid":"button-authenticate",children:"View My Services"})]})]})})}function Uft({serviceDurationMinutes:e,selectedDates:t=[],onDateSelect:r,onMultiDateSelect:s,multiSelectMode:a=!1,maxSelections:i=5,availabilityData:o=[],loading:l=!1}){const[c,d]=p.useState(new Date),[u,f]=p.useState(null),h=Wa(c),m=c1(c),g=_Ne({start:h,end:m}),x=()=>{d(S=>G4e(S))},y=()=>{d(S=>Wr(S,1))},v=(S,C)=>{if(C.isAvailable)if(a&&s){const k=t.includes(S)?t.filter(M=>M!==S):t.length<i?[...t,S]:t;s(k)}else r&&r(S)},b=S=>{const C=Ie(S,"yyyy-MM-dd");return o.find(k=>k.date===C)||{date:C,isAvailable:!1,reason:"loading"}},w=S=>l?n.jsx(Rt,{className:"h-4 w-4 text-gray-400"}):S.isAvailable?n.jsx(nn,{className:"h-4 w-4 text-green-500"}):S.reason==="closed"?n.jsx(Ws,{className:"h-4 w-4 text-gray-400"}):S.reason==="fully_booked"?n.jsx(Wt,{className:"h-4 w-4 text-yellow-500"}):null,N=(S,C)=>{const k=Ie(S,"yyyy-MM-dd"),M=t.includes(k),A=Ny(S);return Le("min-h-[80px] p-2 border rounded-lg transition-all cursor-pointer",!jy(S,c)&&"opacity-40",A&&"ring-2 ring-blue-500",M&&"bg-blue-100 dark:bg-blue-900 border-blue-500",C.isAvailable&&!M&&"hover:bg-green-50 dark:hover:bg-green-900/20 border-green-200",!C.isAvailable&&"bg-gray-50 dark:bg-gray-800 cursor-not-allowed",l&&"animate-pulse")},j=S=>S.timeSlots?S.timeSlots.filter(C=>C.available).length:0;return n.jsxs(O,{className:"w-full",children:[n.jsxs(ee,{children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs(te,{className:"flex items-center gap-2",children:[n.jsx(Dt,{className:"h-5 w-5"}),"Select ",a?"Dates":"Date"]}),n.jsx(ke,{children:a?`Choose up to ${i} dates for your recurring service`:"Choose a date for your service appointment"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(_,{variant:"outline",size:"icon",onClick:x,"data-testid":"button-prev-month",children:n.jsx(Lu,{className:"h-4 w-4"})}),n.jsx("div",{className:"text-lg font-semibold min-w-[140px] text-center",children:Ie(c,"MMMM yyyy")}),n.jsx(_,{variant:"outline",size:"icon",onClick:y,"data-testid":"button-next-month",children:n.jsx(vl,{className:"h-4 w-4"})})]})]}),a&&n.jsx("div",{className:"mt-4",children:n.jsxs(ge,{variant:"outline",className:"text-sm",children:[t.length," / ",i," dates selected"]})})]}),n.jsxs(H,{children:[n.jsxs("div",{className:"grid grid-cols-7 gap-2",children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(S=>n.jsx("div",{className:"text-center text-sm font-semibold text-gray-600 dark:text-gray-400 py-2",children:S},S)),g.map((S,C)=>{const k=b(S),M=Ie(S,"yyyy-MM-dd"),A=j(k);return n.jsxs("div",{className:N(S,k),onClick:()=>v(M,k),"data-testid":`calendar-day-${M}`,children:[n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsx("span",{className:Le("text-sm font-medium",!jy(S,c)&&"text-gray-400",Ny(S)&&"text-blue-600 dark:text-blue-400"),children:Ie(S,"d")}),w(k)]}),k.isAvailable&&A>0&&n.jsx("div",{className:"mt-1",children:n.jsxs("span",{className:"text-xs text-green-600 dark:text-green-400 font-medium",children:[A," slots"]})}),!k.isAvailable&&k.reason&&n.jsx("div",{className:"mt-1",children:n.jsx("span",{className:"text-xs text-gray-500 capitalize",children:k.reason.replace("_"," ")})})]},C)})]}),n.jsxs("div",{className:"mt-6 flex flex-wrap gap-4 text-sm",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(nn,{className:"h-4 w-4 text-green-500"}),n.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Available"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Wt,{className:"h-4 w-4 text-yellow-500"}),n.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Fully Booked"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ws,{className:"h-4 w-4 text-gray-400"}),n.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Closed"})]})]})]})]})}const Yb=[{value:"weekly",label:"Weekly",description:"Every week",category:"regular"},{value:"biweekly",label:"Every 2 Weeks",description:"Twice a month",category:"regular"},{value:"monthly",label:"Monthly",description:"Once a month",category:"regular"},{value:"every_2_months",label:"Every 2 Months",description:"Six times a year",category:"regular"},{value:"every_3_months",label:"Every 3 Months",description:"Four times a year",category:"regular"},{value:"quarterly",label:"Quarterly",description:"Every 3 months",category:"regular"},{value:"every_6_months",label:"Every 6 Months",description:"Twice a year",category:"regular"},{value:"yearly",label:"Yearly",description:"Once a year",category:"regular"},{value:"first_of_month",label:"1st of Each Month",description:"Always on the 1st",category:"monthly_anchor"},{value:"15th_of_month",label:"15th of Each Month",description:"Always on the 15th",category:"monthly_anchor"},{value:"last_of_month",label:"Last Day of Month",description:"End of each month",category:"monthly_anchor"},{value:"custom_dates",label:"Specific Dates",description:"Pick 1-5 custom dates",category:"custom"}];function Vft({value:e="monthly",onChange:t,onPreferredDayChange:r,preferredDay:s,showPreview:a=!0,className:i}){const[o,l]=p.useState(e),c=h=>{const m=h;l(m),t==null||t(m)},d=Yb.find(h=>h.value===o),f=a?(()=>{const h=new Date,m=[];switch(o){case"weekly":for(let g=0;g<4;g++)m.push(Ie(Hr(h,g*7),"MMM d, yyyy"));break;case"biweekly":for(let g=0;g<4;g++)m.push(Ie(Hr(h,g*14),"MMM d, yyyy"));break;case"monthly":for(let g=0;g<4;g++)m.push(Ie(Wr(h,g),"MMM d, yyyy"));break;case"every_2_months":for(let g=0;g<3;g++)m.push(Ie(Wr(h,g*2),"MMM d, yyyy"));break;case"every_3_months":case"quarterly":for(let g=0;g<4;g++)m.push(Ie(Wr(h,g*3),"MMM d, yyyy"));break;case"every_6_months":m.push(Ie(h,"MMM d, yyyy")),m.push(Ie(Wr(h,6),"MMM d, yyyy"));break;case"yearly":m.push(Ie(h,"MMM d, yyyy")),m.push(Ie(Wr(h,12),"MMM d, yyyy"));break;case"first_of_month":for(let g=0;g<4;g++){const x=Wr(h,g);x.setDate(1),m.push(Ie(x,"MMM d, yyyy"))}break;case"15th_of_month":for(let g=0;g<4;g++){const x=Wr(h,g);x.setDate(15),m.push(Ie(x,"MMM d, yyyy"))}break;case"last_of_month":for(let g=0;g<4;g++){const x=Wr(h,g+1);x.setDate(0),m.push(Ie(x,"MMM d, yyyy"))}break;case"custom_dates":m.push("Select dates from calendar ");break}return m})():[];return n.jsxs(O,{className:Le("w-full",i),children:[n.jsxs(ee,{children:[n.jsxs(te,{className:"flex items-center gap-2",children:[n.jsx(dge,{className:"h-5 w-5"}),"Recurring Schedule"]}),n.jsx(ke,{children:"Choose how often you'd like this service"})]}),n.jsxs(H,{className:"space-y-6",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(U,{htmlFor:"interval-select",children:"Frequency"}),n.jsxs(Pt,{value:o,onValueChange:c,children:[n.jsx(kt,{id:"interval-select","data-testid":"select-interval",children:n.jsx(Tt,{})}),n.jsxs(Mt,{children:[n.jsx("div",{className:"px-2 py-1.5 text-xs font-semibold text-gray-500",children:"Regular Intervals"}),Yb.filter(h=>h.category==="regular").map(h=>n.jsx(ve,{value:h.value,"data-testid":`interval-option-${h.value}`,children:n.jsxs("div",{className:"flex flex-col",children:[n.jsx("span",{className:"font-medium",children:h.label}),n.jsx("span",{className:"text-xs text-gray-500",children:h.description})]})},h.value)),n.jsx("div",{className:"px-2 py-1.5 text-xs font-semibold text-gray-500 mt-2",children:"Monthly Anchors"}),Yb.filter(h=>h.category==="monthly_anchor").map(h=>n.jsx(ve,{value:h.value,"data-testid":`interval-option-${h.value}`,children:n.jsxs("div",{className:"flex flex-col",children:[n.jsx("span",{className:"font-medium",children:h.label}),n.jsx("span",{className:"text-xs text-gray-500",children:h.description})]})},h.value)),n.jsx("div",{className:"px-2 py-1.5 text-xs font-semibold text-gray-500 mt-2",children:"Custom"}),Yb.filter(h=>h.category==="custom").map(h=>n.jsx(ve,{value:h.value,"data-testid":`interval-option-${h.value}`,children:n.jsxs("div",{className:"flex flex-col",children:[n.jsx("span",{className:"font-medium",children:h.label}),n.jsx("span",{className:"text-xs text-gray-500",children:h.description})]})},h.value))]})]})]}),a&&f.length>0&&n.jsxs("div",{className:"space-y-2",children:[n.jsxs(U,{className:"flex items-center gap-2 text-sm",children:[n.jsx(Dt,{className:"h-4 w-4"}),"Schedule Preview"]}),n.jsx("div",{className:"flex flex-wrap gap-2",children:f.map((h,m)=>n.jsxs(ge,{variant:"outline",className:"bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300",children:[m===0&&n.jsx(Rt,{className:"h-3 w-3 mr-1"}),h]},m))}),o!=="custom_dates"&&n.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["...and continues ",d==null?void 0:d.description]})]}),n.jsxs("div",{className:"rounded-lg bg-blue-50 dark:bg-blue-900/20 p-3 text-sm text-blue-700 dark:text-blue-300",children:[n.jsx("p",{className:"font-medium",children:" Tip"}),n.jsx("p",{className:"mt-1 text-xs",children:o==="custom_dates"?"Perfect for seasonal services! Pick specific dates from the calendar (up to 5 dates per year).":o.includes("_of_month")?"Your service will always happen on the same day each month, making it easy to remember.":"Your service will repeat automatically at the selected interval. You can pause or adjust anytime."})]})]})]})}const Hft=["8:00 AM","8:30 AM","9:00 AM","9:30 AM","10:00 AM","10:30 AM","11:00 AM","11:30 AM","12:00 PM","12:30 PM","1:00 PM","1:30 PM","2:00 PM","2:30 PM","3:00 PM","3:30 PM","4:00 PM","4:30 PM","5:00 PM","5:30 PM","6:00 PM"];function Wft(){const[e,t]=zt(),[,r]=k0("/recurring-booking/:serviceId"),{toast:s}=Ee(),[a,i]=p.useState("monthly"),[o,l]=p.useState([]),[c,d]=p.useState(!1),[u,f]=p.useState("interval"),[h,m]=p.useState(null),[g,x]=p.useState("9:00 AM"),y=r!=null&&r.serviceId?parseInt(r.serviceId):null;p.useEffect(()=>{const L=new URLSearchParams(window.location.search).get("phone")||sessionStorage.getItem("customerPhone");L&&fetch(`/api/customers/by-phone?phone=${encodeURIComponent(L)}`).then(R=>R.json()).then(R=>{R.data&&(m(R.data.id),sessionStorage.setItem("customerPhone",L))}).catch(R=>console.error("Failed to lookup customer:",R))},[]);const{data:v,isLoading:b}=be({queryKey:["/api/services",y],enabled:!!y}),{data:w,isLoading:N}=be({queryKey:["/api/calendar/availability",a,v==null?void 0:v.maxDurationHours],queryFn:async()=>{if(!v)return[];const I=new Date,L=new Date;L.setMonth(L.getMonth()+3);const R=await fetch(`/api/calendar/availability?startDate=${Ie(I,"yyyy-MM-dd")}&endDate=${Ie(L,"yyyy-MM-dd")}&serviceDurationMinutes=${(Number(v.maxDurationHours)||2)*60}`);if(!R.ok)throw new Error("Failed to fetch availability");return(await R.json()).data||[]},enabled:!!v&&u==="dates"}),j=je({mutationFn:async I=>Ne("POST","/api/recurring-services",I),onError:I=>{s({title:"Error",description:I.message||"Failed to create recurring service",variant:"destructive"})}}),S=je({mutationFn:async I=>Ne("POST",`/api/recurring-services/defer/${I}`,{deferredUntilDays:30}),onSuccess:I=>{s({title:"Scheduling Deferred",description:"We'll send you a reminder to schedule your appointments. Check your email and SMS!"}),t("/my-services")},onError:I=>{s({title:"Error",description:I.message||"Failed to defer scheduling",variant:"destructive"})}}),C=I=>{i(I),l([])},k=I=>{l([I])},M=I=>{l(I)},A=async()=>{if(!y||!h){s({title:"Error",description:"Customer information not found. Please try again.",variant:"destructive"});return}const I={serviceId:y,customerId:h,frequency:a,intervalType:a,autoRenew:!0,status:"active",preferredTime:g};a==="custom_dates"?I.intervalCustomDates=o:o.length>0&&(I.nextScheduledDate=o[0]);try{await j.mutateAsync(I),s({title:"Recurring Service Created",description:"Your recurring service has been set up successfully!"}),t("/my-services")}catch{}},P=async()=>{if(!y||!h){s({title:"Error",description:"Customer information not found. Please try again.",variant:"destructive"});return}const I={serviceId:y,customerId:h,frequency:a,intervalType:a,status:"deferred",autoRenew:!0};try{const R=(await j.mutateAsync(I)).data.id;await S.mutateAsync(R)}catch{}},T=a==="custom_dates";return u==="interval"||u==="dates"&&o.length>0,b||!v?n.jsx("div",{className:"min-h-screen flex items-center justify-center",children:n.jsx(nt,{className:"h-8 w-8 animate-spin text-blue-500"})}):n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-900 dark:to-slate-800 p-4",children:n.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-slate-100",children:"Set Up Recurring Service"}),n.jsxs("p",{className:"text-slate-600 dark:text-slate-400 mt-2",children:[v.name," - ",v.priceRange]})]}),n.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[n.jsxs("div",{className:`flex items-center gap-2 ${u==="interval"?"text-blue-600 font-semibold":"text-gray-400"}`,children:[n.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${u==="interval"?"bg-blue-600 text-white":"bg-gray-200"}`,children:"1"}),n.jsx("span",{children:"Choose Frequency"})]}),n.jsx("div",{className:"flex-1 h-0.5 bg-gray-200"}),n.jsxs("div",{className:`flex items-center gap-2 ${u==="dates"?"text-blue-600 font-semibold":"text-gray-400"}`,children:[n.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${u==="dates"?"bg-blue-600 text-white":"bg-gray-200"}`,children:"2"}),n.jsx("span",{children:"Select Dates"})]}),n.jsx("div",{className:"flex-1 h-0.5 bg-gray-200"}),n.jsxs("div",{className:`flex items-center gap-2 ${u==="confirm"?"text-blue-600 font-semibold":"text-gray-400"}`,children:[n.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${u==="confirm"?"bg-blue-600 text-white":"bg-gray-200"}`,children:"3"}),n.jsx("span",{children:"Confirm"})]})]}),u==="interval"&&n.jsxs("div",{className:"space-y-6",children:[n.jsx(Vft,{value:a,onChange:C,showPreview:!0}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx(_,{variant:"outline",onClick:()=>t("/my-services"),children:"Cancel"}),n.jsxs("div",{className:"space-x-2",children:[n.jsxs(_,{variant:"outline",onClick:P,disabled:S.isPending,children:[S.isPending&&n.jsx(nt,{className:"h-4 w-4 mr-2 animate-spin"}),n.jsx(Ql,{className:"h-4 w-4 mr-2"}),"Schedule Later"]}),n.jsx(_,{onClick:()=>f("dates"),"data-testid":"button-proceed-to-dates",children:"Continue to Dates"})]})]})]}),u==="dates"&&n.jsxs("div",{className:"space-y-6",children:[n.jsx(Uft,{serviceDurationMinutes:(Number(v.maxDurationHours)||2)*60,selectedDates:o,onDateSelect:k,onMultiDateSelect:M,multiSelectMode:T,maxSelections:5,availabilityData:w,loading:N}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx(_,{variant:"outline",onClick:()=>f("interval"),children:"Back"}),n.jsx(_,{onClick:()=>f("confirm"),disabled:o.length===0,"data-testid":"button-proceed-to-confirm",children:"Continue to Confirm"})]})]}),u==="confirm"&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs(O,{children:[n.jsxs(ee,{children:[n.jsxs(te,{className:"flex items-center gap-2",children:[n.jsx(bn,{className:"h-5 w-5 text-green-500"}),"Confirm Your Recurring Service"]}),n.jsx(ke,{children:"Review your selections before finalizing"})]}),n.jsxs(H,{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-sm text-gray-600 dark:text-gray-400",children:"Service"}),n.jsx("p",{className:"text-lg",children:v.name}),n.jsx("p",{className:"text-sm text-gray-500",children:v.priceRange})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-sm text-gray-600 dark:text-gray-400",children:"Frequency"}),n.jsx("p",{className:"text-lg capitalize",children:a.replace(/_/g," ")})]}),o.length>0&&n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-sm text-gray-600 dark:text-gray-400",children:T?"Selected Dates":"First Appointment"}),n.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:o.map((I,L)=>n.jsx(ge,{variant:"outline",className:"text-sm",children:Ie(new Date(I),"MMM d, yyyy")},L))})]}),n.jsxs("div",{children:[n.jsx(U,{htmlFor:"time-picker",className:"font-semibold text-sm text-gray-600 dark:text-gray-400",children:"Preferred Service Time"}),n.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:"We'll try to schedule around this time"}),n.jsxs(Pt,{value:g,onValueChange:x,children:[n.jsx(kt,{id:"time-picker",className:"w-full sm:w-64","data-testid":"select-time",children:n.jsx(Tt,{placeholder:"Select a time"})}),n.jsx(Mt,{children:Hft.map(I=>n.jsx(ve,{value:I,children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Rt,{className:"h-4 w-4 text-gray-500"}),I]})},I))})]})]}),n.jsxs(Ln,{children:[n.jsx(Wt,{className:"h-4 w-4"}),n.jsx(d2,{children:"Important"}),n.jsx(Dn,{children:"You'll receive SMS/email reminders before each appointment. You can pause or modify your recurring service anytime from your dashboard."})]})]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx(_,{variant:"outline",onClick:()=>f("dates"),children:"Back"}),n.jsxs(_,{onClick:A,disabled:j.isPending,"data-testid":"button-confirm-booking",children:[j.isPending&&n.jsx(nt,{className:"h-4 w-4 mr-2 animate-spin"}),"Confirm Recurring Service"]})]})]})]})})}var a9="Progress",i9=100,[qft]=ws(a9),[Gft,Yft]=qft(a9),Ide=p.forwardRef((e,t)=>{const{__scopeProgress:r,value:s=null,max:a,getValueLabel:i=Qft,...o}=e;(a||a===0)&&!nB(a)&&console.error(Kft(`${a}`,"Progress"));const l=nB(a)?a:i9;s!==null&&!rB(s,l)&&console.error(Jft(`${s}`,"Progress"));const c=rB(s,l)?s:null,d=yN(c)?i(c,l):void 0;return n.jsx(Gft,{scope:r,value:c,max:l,children:n.jsx(ht.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":yN(c)?c:void 0,"aria-valuetext":d,role:"progressbar","data-state":$de(c,l),"data-value":c??void 0,"data-max":l,...o,ref:t})})});Ide.displayName=a9;var Lde="ProgressIndicator",Dde=p.forwardRef((e,t)=>{const{__scopeProgress:r,...s}=e,a=Yft(Lde,r);return n.jsx(ht.div,{"data-state":$de(a.value,a.max),"data-value":a.value??void 0,"data-max":a.max,...s,ref:t})});Dde.displayName=Lde;function Qft(e,t){return`${Math.round(e/t*100)}%`}function $de(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function yN(e){return typeof e=="number"}function nB(e){return yN(e)&&!isNaN(e)&&e>0}function rB(e,t){return yN(e)&&!isNaN(e)&&e<=t&&e>=0}function Kft(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${i9}\`.`}function Jft(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${i9} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var Ode=Ide,Zft=Dde;const Xm=p.forwardRef(({className:e,value:t,...r},s)=>n.jsx(Ode,{ref:s,className:Le("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...r,children:n.jsx(Zft,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));Xm.displayName=Ode.displayName;const Xft=["Interior Specialist","Exterior Expert","Ceramic Coating","Paint Correction","Detailer","Mobile Service","Fleet Services","Luxury Vehicles","Classic Cars","Eco-Friendly"];function eht(){var Z;const[e,t]=zt(),{toast:r}=Ee(),s=p.useRef(null),[a,i]=p.useState(1),o=4,[l,c]=p.useState(null),[d,u]=p.useState(""),[f,h]=p.useState(null),[m,g]=p.useState(""),[x,y]=p.useState(""),[v,b]=p.useState([]),[w,N]=p.useState(""),[j,S]=p.useState(""),[C,k]=p.useState(!1),{data:M}=be({queryKey:["/api/tech/settings/ai_bio_coach_enabled"]}),A=M==null?void 0:M.settingValue,P=A===!0||(A==null?void 0:A.enabled)===!0,T=ne=>{if(ne.target.files&&ne.target.files[0]){const Y=ne.target.files[0];c(Y);const me=new FileReader;me.onloadend=()=>{u(me.result)},me.readAsDataURL(Y)}},I=je({mutationFn:async ne=>{const Y=new FormData;return Y.append("photo",ne),Ne("POST","/api/tech/profile/photo",Y,{headers:{}})},onSuccess:ne=>{h({thumb:ne.thumb96Url,card:ne.card320Url,mms:ne.mms640Url}),r({title:"Photo uploaded successfully",description:"Your photo has been processed and optimized."})},onError:ne=>{r({title:"Upload failed",description:ne.message||"Failed to upload photo. Please try a smaller image.",variant:"destructive"})}}),L=je({mutationFn:async()=>Ne("POST","/api/ai/bio/suggest",{preferred_name:m,city:x,tags:v,draft_notes:w}),onSuccess:ne=>{S(ne.suggestion),r({title:"AI suggestion generated",description:"Review the suggestion and decide if you want to use it."})},onError:ne=>{r({title:"AI suggestion failed",description:ne.message||"Failed to generate suggestion. Try again later.",variant:"destructive"})}}),R=je({mutationFn:async()=>Ne("POST","/api/tech/profile",{preferredName:m,city:x,bioAbout:w,bioTags:v,photoThumb96Url:f==null?void 0:f.thumb,photoCard320Url:f==null?void 0:f.card,photoMms640Url:f==null?void 0:f.mms,consent:C}),onSuccess:()=>{r({title:"Profile submitted for review",description:"Your profile is being reviewed by an administrator."}),t("/tech/profile")},onError:ne=>{r({title:"Submission failed",description:ne.message||"Failed to submit profile. Please try again.",variant:"destructive"})}}),G=()=>{if(a===1&&!l){r({title:"Photo required",description:"Please upload a photo to continue.",variant:"destructive"});return}if(a===1&&l&&!f){I.mutate(l);return}if(a===2&&!m){r({title:"Name required",description:"Please enter your preferred name.",variant:"destructive"});return}if(a===3&&!w&&!j){r({title:"Bio required",description:"Please write a bio or generate one with AI.",variant:"destructive"});return}a<o&&i(a+1)},$=()=>{a>1&&i(a-1)},D=ne=>{b(Y=>Y.includes(ne)?Y.filter(me=>me!==ne):[...Y,ne])},W=()=>{N(j),S("")},E=()=>{S("")},F=()=>{if(!C){r({title:"Consent required",description:"Please agree to the terms before submitting.",variant:"destructive"});return}R.mutate()},B=a/o*100;return n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-950 dark:to-slate-900 p-4",children:n.jsxs("div",{className:"max-w-3xl mx-auto py-8",children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("h1",{className:"text-4xl font-bold mb-2",children:"Welcome to Clean Machine! "}),n.jsx("p",{className:"text-muted-foreground",children:"Let's set up your technician profile in just a few steps"})]}),n.jsxs("div",{className:"mb-8",children:[n.jsxs("div",{className:"flex justify-between mb-2 text-sm text-muted-foreground",children:[n.jsxs("span",{children:["Step ",a," of ",o]}),n.jsxs("span",{children:[Math.round(B),"% Complete"]})]}),n.jsx(Xm,{value:B,className:"h-2"})]}),n.jsxs(O,{children:[n.jsxs(ee,{children:[n.jsxs(te,{children:[a===1&&"Upload Your Photo",a===2&&"Tell Us About Yourself",a===3&&"Create Your Bio",a===4&&"Review & Submit"]}),n.jsxs(ke,{children:[a===1&&"Upload a professional photo that customers will see",a===2&&"Add some basic information about you",a===3&&"Write a short bio or let AI help you",a===4&&"Review your profile before submitting for approval"]})]}),n.jsxs(H,{className:"space-y-6",children:[a===1&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"border-2 border-dashed rounded-lg p-8 text-center cursor-pointer hover:border-primary transition-colors",onClick:()=>{var ne;return(ne=s.current)==null?void 0:ne.click()},"data-testid":"photo-upload-zone",children:[n.jsx("input",{ref:s,type:"file",accept:"image/*",onChange:T,className:"hidden","data-testid":"input-photo"}),d?n.jsxs("div",{className:"space-y-4",children:[n.jsx("img",{src:d,alt:"Preview",className:"w-48 h-48 object-cover rounded-full mx-auto border-4 border-primary","data-testid":"img-photo-preview"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Click to change photo"}),l&&n.jsxs("div",{className:"text-xs text-muted-foreground",children:[(l.size/1024/1024).toFixed(2)," MB"]})]}):n.jsxs("div",{className:"space-y-4",children:[n.jsx(mu,{className:"w-16 h-16 mx-auto text-muted-foreground"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-lg font-medium",children:"Click to upload photo"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"JPG, PNG, or WebP (max 10MB)"})]})]})]}),f&&n.jsxs(Ln,{children:[n.jsx(nn,{className:"h-4 w-4"}),n.jsx(Dn,{children:"Photo uploaded and optimized for MMS delivery!"})]}),I.isPending&&n.jsxs(Ln,{children:[n.jsx(nt,{className:"h-4 w-4 animate-spin"}),n.jsx(Dn,{children:"Uploading and optimizing your photo..."})]}),I.isError&&n.jsxs(Ln,{variant:"destructive",children:[n.jsx(Wt,{className:"h-4 w-4"}),n.jsx(Dn,{children:((Z=I.error)==null?void 0:Z.message)||"Failed to upload photo"})]})]}),a===2&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs(U,{htmlFor:"preferred-name",className:"flex items-center gap-2",children:[n.jsx(Fn,{className:"w-4 h-4"}),"Preferred Name *"]}),n.jsx(se,{id:"preferred-name",value:m,onChange:ne=>g(ne.target.value),placeholder:"What should customers call you?","data-testid":"input-preferred-name"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:`This is how you'll appear to customers (e.g., "Mike", "Sarah")`})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs(U,{htmlFor:"city",className:"flex items-center gap-2",children:[n.jsx(zr,{className:"w-4 h-4"}),"City (Optional)"]}),n.jsx(se,{id:"city",value:x,onChange:ne=>y(ne.target.value),placeholder:"Your city","data-testid":"input-city"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs(U,{className:"flex items-center gap-2",children:[n.jsx(Jv,{className:"w-4 h-4"}),"Specialties (Select all that apply)"]}),n.jsx("div",{className:"flex flex-wrap gap-2",children:Xft.map(ne=>n.jsx(ge,{variant:v.includes(ne)?"default":"outline",className:"cursor-pointer",onClick:()=>D(ne),"data-testid":`tag-${ne.toLowerCase().replace(/\s+/g,"-")}`,children:ne},ne))})]})]}),a===3&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs(U,{htmlFor:"bio",className:"flex items-center gap-2",children:[n.jsx(bs,{className:"w-4 h-4"}),"Your Bio *"]}),n.jsx(un,{id:"bio",value:w,onChange:ne=>N(ne.target.value),placeholder:"Tell customers about yourself, your experience, or what you love about detailing...",rows:6,maxLength:140,"data-testid":"textarea-bio"}),n.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[n.jsx("span",{children:"Keep it short and friendly!"}),n.jsxs("span",{children:[w.length,"/140 characters"]})]})]}),P&&n.jsxs(n.Fragment,{children:[n.jsx(_,{variant:"outline",onClick:()=>L.mutate(),disabled:L.isPending||!w,className:"w-full","data-testid":"button-ai-improve",children:L.isPending?n.jsxs(n.Fragment,{children:[n.jsx(nt,{className:"w-4 h-4 mr-2 animate-spin"}),"Generating AI suggestion..."]}):n.jsxs(n.Fragment,{children:[n.jsx(ln,{className:"w-4 h-4 mr-2"}),"Get AI Suggestion"]})}),j&&n.jsxs(Ln,{children:[n.jsx(ln,{className:"h-4 w-4"}),n.jsxs(Dn,{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("strong",{children:"AI Suggestion:"}),n.jsx("p",{className:"mt-2 italic",children:j})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(_,{size:"sm",onClick:W,"data-testid":"button-use-suggestion",children:"Use This Bio"}),n.jsx(_,{size:"sm",variant:"outline",onClick:E,"data-testid":"button-dismiss-suggestion",children:"Keep My Original"})]})]})]})]})]}),a===4&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold mb-4",children:"Photo"}),f&&n.jsx("img",{src:f.card,alt:"Your photo",className:"w-full h-64 object-cover rounded-lg border","data-testid":"img-review-photo"})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold mb-2",children:"Preferred Name"}),n.jsx("p",{"data-testid":"text-review-name",children:m})]}),x&&n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold mb-2",children:"City"}),n.jsx("p",{"data-testid":"text-review-city",children:x})]}),v.length>0&&n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold mb-2",children:"Specialties"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:v.map(ne=>n.jsx(ge,{variant:"secondary","data-testid":`review-tag-${ne}`,children:ne},ne))})]})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold mb-2",children:"Bio"}),n.jsx("p",{className:"text-muted-foreground italic","data-testid":"text-review-bio",children:w})]}),n.jsxs("div",{className:"flex items-start space-x-2 pt-4 border-t",children:[n.jsx(as,{id:"consent",checked:C,onCheckedChange:ne=>k(ne),"data-testid":"checkbox-consent"}),n.jsx("label",{htmlFor:"consent",className:"text-sm leading-relaxed cursor-pointer",children:"I consent to having my photo, name, and bio shared with customers via SMS, web, and other channels to enhance their service experience."})]})]}),n.jsxs("div",{className:"flex justify-between pt-6 border-t",children:[n.jsxs(_,{variant:"outline",onClick:$,disabled:a===1,"data-testid":"button-previous",children:[n.jsx(Lu,{className:"w-4 h-4 mr-2"}),"Previous"]}),a<o?n.jsx(_,{onClick:G,disabled:I.isPending,"data-testid":"button-next",children:I.isPending?n.jsxs(n.Fragment,{children:[n.jsx(nt,{className:"w-4 h-4 mr-2 animate-spin"}),"Processing..."]}):n.jsxs(n.Fragment,{children:["Next",n.jsx(vl,{className:"w-4 h-4 ml-2"})]})}):n.jsx(_,{onClick:F,disabled:R.isPending||!C,"data-testid":"button-submit",children:R.isPending?n.jsxs(n.Fragment,{children:[n.jsx(nt,{className:"w-4 h-4 mr-2 animate-spin"}),"Submitting..."]}):n.jsxs(n.Fragment,{children:[n.jsx(nn,{className:"w-4 h-4 mr-2"}),"Submit for Review"]})})]})]})]})]})})}const tht=["Interior Specialist","Exterior Expert","Ceramic Coating","Paint Correction","Detailer","Mobile Service","Fleet Services","Luxury Vehicles","Classic Cars","Eco-Friendly"];function nht(){const[e,t]=zt(),{toast:r}=Ee(),s=p.useRef(null),[a,i]=p.useState(null),[o,l]=p.useState(""),[c,d]=p.useState(""),[u,f]=p.useState(""),[h,m]=p.useState([]),[g,x]=p.useState(""),[y,v]=p.useState(""),[b,w]=p.useState(!1),{data:N,isLoading:j}=be({queryKey:["/api/tech/profile"],refetchOnWindowFocus:!1}),S=N==null?void 0:N.profile;p.useEffect(()=>{S&&(d(S.preferredName||""),f(S.city||""),m(S.bioTags||[]),x(S.bioAbout||""),S.photoCard320Url&&l(S.photoCard320Url))},[S]),p.useEffect(()=>{!j&&!S&&(r({title:"No profile found",description:"Redirecting to first-run wizard..."}),setTimeout(()=>{t("/tech/wizard")},1500))},[j,S,t,r]);const{data:C}=be({queryKey:["/api/tech/settings/ai_bio_coach_enabled"]}),k=C==null?void 0:C.settingValue,M=k===!0||(k==null?void 0:k.enabled)===!0,A=W=>{if(W.target.files&&W.target.files[0]){const E=W.target.files[0];i(E);const F=new FileReader;F.onloadend=()=>{l(F.result)},F.readAsDataURL(E),w(!0)}},P=je({mutationFn:async W=>{const E=new FormData;return E.append("photo",W),Ne("POST","/api/tech/profile/photo",E,{headers:{}})},onSuccess:W=>{r({title:"Photo updated",description:"Your photo has been processed and will be reviewed."}),ze.invalidateQueries({queryKey:["/api/tech/profile"]}),i(null),w(!0)},onError:W=>{r({title:"Upload failed",description:W.message||"Failed to upload photo. Please try a smaller image.",variant:"destructive"})}}),T=je({mutationFn:async()=>Ne("POST","/api/ai/bio/suggest",{preferred_name:c,city:u,bio_raw:g,tags:h,service_context:"mobile auto detailing"}),onSuccess:W=>{W.bio_about&&(v(W.bio_about),W.tags&&W.tags.length>0&&m(E=>[...new Set([...E,...W.tags])])),r({title:"AI suggestion generated",description:"Review the suggestion and decide if you want to use it."})},onError:W=>{r({title:"AI suggestion failed",description:W.message||"Failed to generate suggestion. Try again later.",variant:"destructive"})}}),I=je({mutationFn:async()=>Ne("PATCH",`/api/tech/profile/${S.id}`,{preferredName:c,city:u,bioAbout:g,bioTags:h}),onSuccess:()=>{r({title:"Profile updated",description:"Your changes have been submitted for review."}),ze.invalidateQueries({queryKey:["/api/tech/profile"]}),w(!1)},onError:W=>{r({title:"Update failed",description:W.message||"Failed to update profile. Please try again.",variant:"destructive"})}}),L=W=>{m(E=>E.includes(W)?E.filter(F=>F!==W):[...E,W]),w(!0)},R=()=>{x(y),v(""),w(!0)},G=()=>{v("")},$=()=>{if(!c){r({title:"Name required",description:"Please enter your preferred name.",variant:"destructive"});return}if(!g){r({title:"Bio required",description:"Please write a bio.",variant:"destructive"});return}I.mutate()},D=()=>{a&&P.mutate(a)};return j?n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-950 dark:to-slate-900 flex items-center justify-center",children:n.jsx(nt,{className:"w-8 h-8 animate-spin"})}):S?n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-950 dark:to-slate-900 p-4",children:n.jsxs("div",{className:"max-w-4xl mx-auto py-8",children:[n.jsxs("div",{className:"flex items-center justify-between mb-8",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-4xl font-bold",children:"My Profile"}),n.jsx("p",{className:"text-muted-foreground mt-1",children:"Update your bio and photo. Changes require admin approval."})]}),n.jsxs(_,{variant:"outline",onClick:()=>t("/dashboard"),"data-testid":"button-back",children:[n.jsx(pi,{className:"w-4 h-4 mr-2"}),"Back"]})]}),S&&n.jsxs(Ln,{className:"mb-6",children:[n.jsx(nn,{className:"h-4 w-4"}),n.jsxs(Dn,{children:[n.jsx("strong",{children:"Status:"})," ",S.status==="approved"?" Approved":S.status==="pending"?" Pending Review":" Rejected",S.status==="rejected"&&S.adminNotes&&n.jsxs("div",{className:"mt-2 text-sm text-destructive",children:[n.jsx("strong",{children:"Admin notes:"})," ",S.adminNotes]})]})]}),n.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[n.jsxs(O,{children:[n.jsxs(ee,{children:[n.jsxs(te,{className:"flex items-center gap-2",children:[n.jsx(mu,{className:"w-5 h-5"}),"Profile Photo"]}),n.jsx(ke,{children:"Upload a professional photo"})]}),n.jsxs(H,{className:"space-y-4",children:[n.jsxs("div",{className:"border-2 border-dashed rounded-lg p-4 text-center cursor-pointer hover:border-primary transition-colors",onClick:()=>{var W;return(W=s.current)==null?void 0:W.click()},"data-testid":"photo-upload-zone",children:[n.jsx("input",{ref:s,type:"file",accept:"image/*",onChange:A,className:"hidden","data-testid":"input-photo"}),o?n.jsxs("div",{className:"space-y-2",children:[n.jsx("img",{src:o,alt:"Profile",className:"w-full h-48 object-cover rounded-lg","data-testid":"img-photo-preview"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Click to change"})]}):n.jsxs("div",{className:"space-y-2 py-8",children:[n.jsx(mu,{className:"w-12 h-12 mx-auto text-muted-foreground"}),n.jsx("p",{className:"text-sm",children:"Click to upload"})]})]}),a&&n.jsx(_,{onClick:D,disabled:P.isPending,className:"w-full","data-testid":"button-upload-photo",children:P.isPending?n.jsxs(n.Fragment,{children:[n.jsx(nt,{className:"w-4 h-4 mr-2 animate-spin"}),"Uploading..."]}):n.jsxs(n.Fragment,{children:[n.jsx(_p,{className:"w-4 h-4 mr-2"}),"Upload New Photo"]})})]})]}),n.jsxs("div",{className:"md:col-span-2 space-y-6",children:[n.jsxs(O,{children:[n.jsx(ee,{children:n.jsxs(te,{className:"flex items-center gap-2",children:[n.jsx(Fn,{className:"w-5 h-5"}),"Personal Details"]})}),n.jsxs(H,{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(U,{htmlFor:"preferred-name",children:"Preferred Name *"}),n.jsx(se,{id:"preferred-name",value:c,onChange:W=>{d(W.target.value),w(!0)},placeholder:"What should customers call you?","data-testid":"input-preferred-name"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs(U,{htmlFor:"city",className:"flex items-center gap-2",children:[n.jsx(zr,{className:"w-4 h-4"}),"City (Optional)"]}),n.jsx(se,{id:"city",value:u,onChange:W=>{f(W.target.value),w(!0)},placeholder:"Your city","data-testid":"input-city"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs(U,{className:"flex items-center gap-2",children:[n.jsx(Jv,{className:"w-4 h-4"}),"Specialties"]}),n.jsx("div",{className:"flex flex-wrap gap-2",children:tht.map(W=>n.jsx(ge,{variant:h.includes(W)?"default":"outline",className:"cursor-pointer",onClick:()=>L(W),"data-testid":`tag-${W.toLowerCase().replace(/\s+/g,"-")}`,children:W},W))})]})]})]}),n.jsxs(O,{children:[n.jsxs(ee,{children:[n.jsxs(te,{className:"flex items-center gap-2",children:[n.jsx(bs,{className:"w-5 h-5"}),"Your Bio"]}),n.jsx(ke,{children:"Write a short bio about yourself (max 140 characters)"})]}),n.jsxs(H,{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(un,{value:g,onChange:W=>{x(W.target.value),w(!0)},placeholder:"Tell customers about yourself...",rows:4,maxLength:140,"data-testid":"textarea-bio"}),n.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[n.jsx("span",{children:"Keep it short and friendly!"}),n.jsxs("span",{children:[g.length,"/140 characters"]})]})]}),M&&n.jsxs(n.Fragment,{children:[n.jsx(_,{variant:"outline",onClick:()=>T.mutate(),disabled:T.isPending||!g,className:"w-full","data-testid":"button-ai-improve",children:T.isPending?n.jsxs(n.Fragment,{children:[n.jsx(nt,{className:"w-4 h-4 mr-2 animate-spin"}),"Generating AI suggestion..."]}):n.jsxs(n.Fragment,{children:[n.jsx(ln,{className:"w-4 h-4 mr-2"}),"Get AI Suggestion"]})}),y&&n.jsxs(Ln,{children:[n.jsx(ln,{className:"h-4 w-4"}),n.jsxs(Dn,{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("strong",{children:"AI Suggestion:"}),n.jsx("p",{className:"mt-2 italic",children:y})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(_,{size:"sm",onClick:R,"data-testid":"button-use-suggestion",children:"Use This Bio"}),n.jsx(_,{size:"sm",variant:"outline",onClick:G,"data-testid":"button-dismiss-suggestion",children:"Keep My Current"})]})]})]})]})]})]}),n.jsxs("div",{className:"flex justify-end gap-4",children:[n.jsxs(_,{variant:"outline",onClick:()=>ze.invalidateQueries({queryKey:["/api/tech/profile"]}),disabled:I.isPending,"data-testid":"button-reset",children:[n.jsx(Jc,{className:"w-4 h-4 mr-2"}),"Reset Changes"]}),n.jsx(_,{onClick:$,disabled:I.isPending||!b,"data-testid":"button-save",children:I.isPending?n.jsxs(n.Fragment,{children:[n.jsx(nt,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving..."]}):n.jsxs(n.Fragment,{children:[n.jsx(fr,{className:"w-4 h-4 mr-2"}),"Save Changes"]})})]})]})]})]})}):n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-950 dark:to-slate-900 flex items-center justify-center",children:n.jsxs("div",{className:"text-center space-y-4",children:[n.jsx(nt,{className:"w-8 h-8 animate-spin mx-auto"}),n.jsx("p",{className:"text-muted-foreground",children:"Redirecting to wizard..."})]})})}function rht(){const[,e]=k0("/p/:publicId"),t=e==null?void 0:e.publicId,{data:r,isLoading:s,error:a}=be({queryKey:["/api/tech/profile/public",t],enabled:!!t}),i=r==null?void 0:r.profile;return s?n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-slate-950 dark:to-slate-900 flex items-center justify-center p-4",children:n.jsxs("div",{className:"text-center space-y-4",children:[n.jsx(nt,{className:"w-12 h-12 animate-spin mx-auto text-primary"}),n.jsx("p",{className:"text-muted-foreground",children:"Loading profile..."})]})}):a||!i?n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-slate-950 dark:to-slate-900 flex items-center justify-center p-4",children:n.jsx(O,{className:"max-w-md w-full",children:n.jsx(H,{className:"pt-6",children:n.jsxs("div",{className:"text-center space-y-4",children:[n.jsx(Wt,{className:"w-16 h-16 mx-auto text-destructive"}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Profile Not Found"}),n.jsx("p",{className:"text-muted-foreground",children:"This technician profile could not be found or is not yet approved."})]})]})})})}):n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-slate-950 dark:to-slate-900 p-4",children:n.jsxs("div",{className:"max-w-2xl mx-auto py-8",children:[n.jsxs("div",{className:"text-center mb-6",children:[n.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[n.jsx(Qr,{className:"w-6 h-6 text-amber-500 fill-amber-500"}),n.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-slate-100",children:"Clean Machine Auto Detail"}),n.jsx(Qr,{className:"w-6 h-6 text-amber-500 fill-amber-500"})]}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Meet Your Detailer"})]}),n.jsxs(O,{className:"overflow-hidden shadow-xl",children:[i.photoCard320Url&&n.jsxs("div",{className:"relative h-64 bg-gradient-to-br from-slate-200 to-slate-300 dark:from-slate-800 dark:to-slate-700",children:[n.jsx("img",{src:i.photoCard320Url,alt:i.preferredName,className:"w-full h-full object-cover","data-testid":"img-tech-photo"}),n.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"}),i.verified&&n.jsx("div",{className:"absolute top-4 right-4",children:n.jsx("div",{className:"bg-white dark:bg-slate-900 rounded-full p-2 shadow-lg",children:n.jsx(nn,{className:"w-6 h-6 text-green-500","data-testid":"icon-verified"})})})]}),n.jsxs(H,{className:"pt-6 space-y-6",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("h2",{className:"text-3xl font-bold mb-1","data-testid":"text-name",children:i.preferredName}),i.verified&&n.jsxs("div",{className:"flex items-center justify-center gap-1 text-green-600 dark:text-green-400",children:[n.jsx(nn,{className:"w-4 h-4"}),n.jsx("span",{className:"text-sm font-medium","data-testid":"text-verified",children:"Verified Technician"})]})]}),i.city&&n.jsxs(n.Fragment,{children:[n.jsx(Ot,{}),n.jsxs("div",{className:"flex items-center justify-center gap-2 text-muted-foreground",children:[n.jsx(zr,{className:"w-4 h-4"}),n.jsx("span",{"data-testid":"text-city",children:i.city})]})]}),i.bioAbout&&n.jsxs(n.Fragment,{children:[n.jsx(Ot,{}),n.jsx("div",{className:"text-center",children:n.jsxs("p",{className:"text-lg leading-relaxed text-slate-700 dark:text-slate-300 italic","data-testid":"text-bio",children:['"',i.bioAbout,'"']})})]}),i.bioTags&&i.bioTags.length>0&&n.jsxs(n.Fragment,{children:[n.jsx(Ot,{}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-center gap-2 mb-3 text-sm font-medium text-muted-foreground",children:[n.jsx(Jv,{className:"w-4 h-4"}),n.jsx("span",{children:"Specialties"})]}),n.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:i.bioTags.map(o=>n.jsx(ge,{variant:"secondary",className:"text-sm px-3 py-1","data-testid":`tag-${o.toLowerCase().replace(/\s+/g,"-")}`,children:o},o))})]})]}),n.jsx(Ot,{}),n.jsxs("div",{className:"text-center text-sm text-muted-foreground space-y-2",children:[n.jsx("p",{children:"This technician has been verified by Clean Machine Auto Detail"}),n.jsx("p",{className:"text-xs",children:"Questions? Contact us at (918) 555-0100"})]})]})]}),n.jsx("div",{className:"h-8"})]})})}function sht(){const{data:e,isLoading:t}=be({queryKey:["/api/tech/my-shifts"]}),{data:r}=be({queryKey:["/api/tech/hours-summary"]}),s=(e==null?void 0:e.shifts)||[],a=r==null?void 0:r.summary;return n.jsxs("div",{className:"container mx-auto p-4 md:p-6 space-y-4 md:space-y-6",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl md:text-3xl font-bold",children:"My Schedule"}),n.jsx("p",{className:"text-sm md:text-base text-muted-foreground",children:"Your upcoming shifts for the next 30 days"})]}),a&&a.isOvertime&&n.jsxs(Ln,{variant:"destructive","data-testid":"alert-overtime",children:[n.jsx(Wt,{className:"h-4 w-4"}),n.jsxs(Dn,{children:[n.jsx("strong",{children:"Overtime Warning:"})," You've worked ",a.totalHours," hours this week (40+ hours)"]})]}),t?n.jsx("div",{className:"text-center py-8",children:"Loading your schedule..."}):s.length===0?n.jsx(O,{className:"p-6 md:p-8 text-center text-muted-foreground",children:n.jsx("p",{children:"No shifts scheduled for the next 30 days"})}):n.jsx("div",{className:"grid gap-4",children:s.map(i=>{var o,l,c;return n.jsxs(O,{"data-testid":`card-shift-${i.id}`,children:[n.jsxs(ee,{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-2 sm:space-y-0 pb-2 p-4 md:p-6",children:[n.jsxs(te,{className:"text-sm md:text-base font-medium",children:[n.jsx(Dt,{className:"inline w-4 h-4 mr-2"}),n.jsx("span",{className:"break-words",children:Ie(new Date(i.shiftDate),"EEEE, MMMM dd, yyyy")})]}),n.jsx(ge,{variant:i.status==="scheduled"?"default":"secondary",children:i.status})]}),n.jsx(H,{className:"p-4 md:p-6 pt-0",children:n.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[n.jsx(Rt,{className:"w-4 h-4 flex-shrink-0"}),n.jsxs("span",{className:"break-words",children:[((o=i.template)==null?void 0:o.name)||"N/A",": ",(l=i.template)==null?void 0:l.startTime," - ",(c=i.template)==null?void 0:c.endTime]})]})})]},i.id)})})]})}var o9="Avatar",[aht]=ws(o9),[iht,Rde]=aht(o9),Fde=p.forwardRef((e,t)=>{const{__scopeAvatar:r,...s}=e,[a,i]=p.useState("idle");return n.jsx(iht,{scope:r,imageLoadingStatus:a,onImageLoadingStatusChange:i,children:n.jsx(ht.span,{...s,ref:t})})});Fde.displayName=o9;var zde="AvatarImage",Bde=p.forwardRef((e,t)=>{const{__scopeAvatar:r,src:s,onLoadingStatusChange:a=()=>{},...i}=e,o=Rde(zde,r),l=oht(s,i),c=Gr(d=>{a(d),o.onImageLoadingStatusChange(d)});return ls(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?n.jsx(ht.img,{...i,ref:t,src:s}):null});Bde.displayName=zde;var Ude="AvatarFallback",Vde=p.forwardRef((e,t)=>{const{__scopeAvatar:r,delayMs:s,...a}=e,i=Rde(Ude,r),[o,l]=p.useState(s===void 0);return p.useEffect(()=>{if(s!==void 0){const c=window.setTimeout(()=>l(!0),s);return()=>window.clearTimeout(c)}},[s]),o&&i.imageLoadingStatus!=="loaded"?n.jsx(ht.span,{...a,ref:t}):null});Vde.displayName=Ude;function sB(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function oht(e,{referrerPolicy:t,crossOrigin:r}){const s=cht(),a=p.useRef(null),i=s?(a.current||(a.current=new window.Image),a.current):null,[o,l]=p.useState(()=>sB(i,e));return ls(()=>{l(sB(i,e))},[i,e]),ls(()=>{const c=f=>()=>{l(f)};if(!i)return;const d=c("loaded"),u=c("error");return i.addEventListener("load",d),i.addEventListener("error",u),t&&(i.referrerPolicy=t),typeof r=="string"&&(i.crossOrigin=r),()=>{i.removeEventListener("load",d),i.removeEventListener("error",u)}},[i,r,t]),o}function lht(){return()=>{}}function cht(){return p.useSyncExternalStore(lht,()=>!0,()=>!1)}var Hde=Fde,Wde=Bde,qde=Vde;const vN=p.forwardRef(({className:e,...t},r)=>n.jsx(Hde,{ref:r,className:Le("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));vN.displayName=Hde.displayName;const bN=p.forwardRef(({className:e,...t},r)=>n.jsx(Wde,{ref:r,className:Le("aspect-square h-full w-full",e),...t}));bN.displayName=Wde.displayName;const wN=p.forwardRef(({className:e,...t},r)=>n.jsx(qde,{ref:r,className:Le("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));wN.displayName=qde.displayName;function dht(){const[e,t]=zt(),{toast:r}=Ee(),[s,a]=p.useState("overview"),[i,o]=p.useState(""),[l,c]=p.useState("all"),[d,u]=p.useState(null),[f,h]=p.useState(!1),{data:m,isLoading:g}=be({queryKey:["/api/admin/employees/overview"]}),{data:x,isLoading:y}=be({queryKey:["/api/admin/employees/directory",i,l],queryFn:async()=>{const T=new URLSearchParams;i&&T.append("search",i),l&&T.append("status",l);const I=`/api/admin/employees/directory${T.toString()?`?${T.toString()}`:""}`,L=await fetch(I,{credentials:"include"});if(!L.ok)throw new Error("Failed to fetch employee directory");return L.json()}}),{data:v,isLoading:b}=be({queryKey:["/api/admin/employees/profiles","pending"],queryFn:async()=>{const T=await fetch("/api/admin/employees/profiles?status=pending",{credentials:"include"});if(!T.ok)throw new Error("Failed to fetch employee profiles");return T.json()}}),w=je({mutationFn:async T=>{const I=await fetch(`/api/admin/employees/${T}/approve`,{method:"POST",credentials:"include"});if(!I.ok){const L=await I.json();throw new Error(L.error||"Failed to approve profile")}return I.json()},onSuccess:()=>{ze.invalidateQueries({queryKey:["/api/admin/employees/profiles"],exact:!1}),ze.invalidateQueries({queryKey:["/api/admin/employees/overview"],exact:!1}),ze.invalidateQueries({queryKey:["/api/admin/employees/directory"],exact:!1}),r({title:"Profile Approved",description:"The technician profile has been approved and is now live."})},onError:T=>{r({variant:"destructive",title:"Approval Failed",description:T.message||"Failed to approve profile. Please try again."})}}),N=je({mutationFn:async({employeeId:T,reason:I})=>{const L=await fetch(`/api/admin/employees/${T}/request-changes`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({reason:I})});if(!L.ok){const R=await L.json();throw new Error(R.error||"Failed to request changes")}return L.json()},onSuccess:()=>{ze.invalidateQueries({queryKey:["/api/admin/employees/profiles"],exact:!1}),ze.invalidateQueries({queryKey:["/api/admin/employees/overview"],exact:!1}),ze.invalidateQueries({queryKey:["/api/admin/employees/directory"],exact:!1}),r({title:"Changes Requested",description:"The technician will be notified to update their profile."})},onError:T=>{r({variant:"destructive",title:"Request Failed",description:T.message||"Failed to request changes. Please try again."})}}),j=je({mutationFn:async T=>{const I=await fetch(`/api/admin/employees/${T}/provision`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({})}),L=await I.json();if(!I.ok&&I.status!==207)throw new Error(L.error||"Failed to provision employee");return L},onSuccess:T=>{var I,L;ze.invalidateQueries({queryKey:["/api/admin/employees"],exact:!1}),T.success?r({title:"Employee Provisioned",description:`Email: ${(I=T.provisioning)==null?void 0:I.email} | Extension: ${(L=T.provisioning)==null?void 0:L.extension}`}):r({variant:"destructive",title:"Partial Provisioning",description:T.message||"Manual email setup required. Check employee details for instructions."})},onError:T=>{r({variant:"destructive",title:"Provisioning Failed",description:T.message||"Failed to provision employee. Please try again."})}}),S=je({mutationFn:async T=>{const I=await fetch(`/api/admin/employees/${T}/retry-provision`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({})});if(!I.ok){const L=await I.json();throw new Error(L.error||"Failed to retry provisioning")}return I.json()},onSuccess:()=>{ze.invalidateQueries({queryKey:["/api/admin/employees"],exact:!1}),r({title:"Provisioning Successful",description:"Email alias has been created in Google Workspace."})},onError:T=>{r({variant:"destructive",title:"Retry Failed",description:T.message||"Failed to retry provisioning. You may need to create the alias manually."})}}),C=(m==null?void 0:m.stats)||{totalTechnicians:0,activeTechnicians:0,pendingProfileApprovals:0,upcomingPTO:0,openShiftTrades:0,pendingApplicants:0},k=(x==null?void 0:x.employees)||[],M=(v==null?void 0:v.employees)||[],A=()=>n.jsxs("div",{className:"h-full flex flex-col",children:[n.jsxs("div",{className:"p-4 border-b border-border",children:[n.jsx("h2",{className:"text-lg font-semibold mb-3","data-testid":"text-sidebar-title",children:"Employee Directory"}),n.jsxs("div",{className:"relative mb-3",children:[n.jsx(Ga,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),n.jsx(se,{placeholder:"Search employees...",value:i,onChange:T=>o(T.target.value),className:"pl-9","data-testid":"input-search-employees"})]}),n.jsx("div",{className:"flex gap-1",children:["all","active","inactive","on_leave"].map(T=>n.jsx(_,{variant:l===T?"default":"outline",size:"sm",onClick:()=>c(T),className:"flex-1 text-xs capitalize","data-testid":`button-filter-${T}`,children:T.replace("_"," ")},T))})]}),n.jsx(ia,{className:"flex-1",children:n.jsx("div",{className:"p-2 space-y-1",children:y?n.jsx("p",{className:"text-sm text-muted-foreground p-4 text-center",children:"Loading..."}):k.length===0?n.jsx("p",{className:"text-sm text-muted-foreground p-4 text-center",children:"No employees found"}):k.map(T=>n.jsx("button",{onClick:()=>{u(T),h(!1)},className:`w-full p-3 rounded-lg text-left transition-colors ${(d==null?void 0:d.id)===T.id?"bg-primary text-primary-foreground":"hover:bg-accent"}`,"data-testid":`button-employee-${T.id}`,children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs(vN,{className:"w-10 h-10",children:[n.jsx(bN,{src:T.photoThumb96||void 0}),n.jsx(wN,{children:T.preferredName.substring(0,2).toUpperCase()})]}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("p",{className:"font-medium text-sm truncate",children:T.preferredName}),T.profileReviewed&&n.jsx(nn,{className:"w-3 h-3 text-green-500 flex-shrink-0"})]}),n.jsx("p",{className:"text-xs text-muted-foreground capitalize",children:T.role})]}),n.jsx(ge,{variant:T.employmentStatus==="active"?"default":"secondary",className:"text-xs flex-shrink-0",children:T.employmentStatus})]})},T.id))})})]}),P=n.jsxs(n.Fragment,{children:[n.jsxs(ge,{variant:"outline","data-testid":"badge-total-employees",children:[n.jsx(br,{className:"w-3 h-3 mr-1"}),C.totalTechnicians," Total"]}),n.jsxs(ge,{variant:"default","data-testid":"badge-active-employees",children:[n.jsx(nn,{className:"w-3 h-3 mr-1"}),C.activeTechnicians," Active"]})]});return n.jsx(xn,{title:"Employee Management",pageActions:P,children:n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-950 dark:to-slate-900",children:n.jsxs("div",{className:"flex h-screen",children:[n.jsx("aside",{className:"hidden lg:block w-80 bg-background border-r border-border","data-testid":"sidebar-desktop",children:n.jsx(A,{})}),n.jsx("div",{className:"flex-1 overflow-auto",children:n.jsxs("div",{className:"container mx-auto py-6 space-y-6",children:[n.jsx("div",{className:"lg:hidden mb-4",children:n.jsxs(tE,{open:f,onOpenChange:h,children:[n.jsx(zte,{asChild:!0,children:n.jsxs(_,{variant:"ghost",size:"sm","data-testid":"button-mobile-menu",children:[n.jsx(Kv,{className:"w-4 h-4 mr-2"}),"Menu"]})}),n.jsx(E4,{side:"left",className:"w-80 p-0",children:n.jsx(A,{})})]})}),s==="overview"&&n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[n.jsxs(O,{"data-testid":"card-stat-profiles",children:[n.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(te,{className:"text-sm font-medium",children:"Pending Profiles"}),n.jsx(br,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(H,{children:[n.jsx("div",{className:"text-2xl font-bold","data-testid":"text-pending-profiles",children:C.pendingProfileApprovals}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Awaiting review"})]})]}),n.jsxs(O,{"data-testid":"card-stat-pto",children:[n.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(te,{className:"text-sm font-medium",children:"Upcoming PTO"}),n.jsx(tx,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(H,{children:[n.jsx("div",{className:"text-2xl font-bold","data-testid":"text-upcoming-pto",children:C.upcomingPTO}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Next 30 days"})]})]}),n.jsxs(O,{"data-testid":"card-stat-trades",children:[n.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(te,{className:"text-sm font-medium",children:"Shift Trades"}),n.jsx(fb,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(H,{children:[n.jsx("div",{className:"text-2xl font-bold","data-testid":"text-open-trades",children:C.openShiftTrades}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Pending approval"})]})]}),n.jsxs(O,{"data-testid":"card-stat-applicants",children:[n.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(te,{className:"text-sm font-medium",children:"Applicants"}),n.jsx(Nc,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(H,{children:[n.jsx("div",{className:"text-2xl font-bold","data-testid":"text-pending-applicants",children:C.pendingApplicants}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"In pipeline"})]})]})]}),n.jsxs(js,{value:s,onValueChange:a,className:"space-y-6",children:[n.jsxs(ds,{className:"grid w-full grid-cols-2 lg:grid-cols-8 h-auto","data-testid":"tabs-navigation",children:[n.jsxs(dt,{value:"overview",className:"flex items-center gap-2","data-testid":"tab-overview",children:[n.jsx(oQ,{className:"w-4 h-4"}),n.jsx("span",{className:"hidden sm:inline",children:"Overview"})]}),n.jsxs(dt,{value:"profiles",className:"flex items-center gap-2","data-testid":"tab-profiles",children:[n.jsx(br,{className:"w-4 h-4"}),n.jsx("span",{className:"hidden sm:inline",children:"Profiles"}),C.pendingProfileApprovals>0&&n.jsx(ge,{variant:"destructive",className:"ml-1","data-testid":"badge-profiles-pending",children:C.pendingProfileApprovals})]}),n.jsxs(dt,{value:"scheduling",className:"flex items-center gap-2","data-testid":"tab-scheduling",children:[n.jsx(Dt,{className:"w-4 h-4"}),n.jsx("span",{className:"hidden sm:inline",children:"Scheduling"})]}),n.jsxs(dt,{value:"time-tracking",className:"flex items-center gap-2","data-testid":"tab-time-tracking",children:[n.jsx(Rt,{className:"w-4 h-4"}),n.jsx("span",{className:"hidden sm:inline",children:"Time"})]}),n.jsxs(dt,{value:"pto",className:"flex items-center gap-2","data-testid":"tab-pto",children:[n.jsx(tx,{className:"w-4 h-4"}),n.jsx("span",{className:"hidden sm:inline",children:"PTO"})]}),n.jsxs(dt,{value:"shift-trades",className:"flex items-center gap-2","data-testid":"tab-shift-trades",children:[n.jsx(fb,{className:"w-4 h-4"}),n.jsx("span",{className:"hidden sm:inline",children:"Trades"}),C.openShiftTrades>0&&n.jsx(ge,{variant:"secondary",className:"ml-1","data-testid":"badge-trades-pending",children:C.openShiftTrades})]}),n.jsxs(dt,{value:"applicants",className:"flex items-center gap-2","data-testid":"tab-applicants",children:[n.jsx(Nc,{className:"w-4 h-4"}),n.jsx("span",{className:"hidden sm:inline",children:"Applicants"})]}),n.jsxs(dt,{value:"analytics",className:"flex items-center gap-2","data-testid":"tab-analytics",children:[n.jsx(ya,{className:"w-4 h-4"}),n.jsx("span",{className:"hidden sm:inline",children:"Analytics"})]})]}),n.jsxs(pt,{value:"overview",className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs(O,{"data-testid":"card-workforce-capacity",children:[n.jsx(ee,{className:"pb-3",children:n.jsxs(te,{className:"text-sm font-medium flex items-center gap-2",children:[n.jsx(br,{className:"w-4 h-4"}),"Workforce Capacity"]})}),n.jsx(H,{children:n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm text-muted-foreground",children:"Total Staff"}),n.jsx("span",{className:"font-bold","data-testid":"text-total-staff",children:C.totalTechnicians})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm text-muted-foreground",children:"Active Today"}),n.jsx("span",{className:"font-bold text-green-600","data-testid":"text-active-today",children:C.activeTechnicians})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm text-muted-foreground",children:"On PTO"}),n.jsx("span",{className:"font-bold text-blue-600","data-testid":"text-on-pto",children:C.upcomingPTO})]}),n.jsx("div",{className:"w-full bg-secondary h-2 rounded-full mt-3",children:n.jsx("div",{className:"bg-primary h-2 rounded-full transition-all",style:{width:`${C.totalTechnicians>0?C.activeTechnicians/C.totalTechnicians*100:0}%`},"data-testid":"progress-capacity"})}),n.jsxs("p",{className:"text-xs text-muted-foreground text-center mt-1",children:[C.totalTechnicians>0?Math.round(C.activeTechnicians/C.totalTechnicians*100):0,"% capacity"]})]})})]}),n.jsxs(O,{"data-testid":"card-pending-actions",children:[n.jsx(ee,{className:"pb-3",children:n.jsxs(te,{className:"text-sm font-medium flex items-center gap-2",children:[n.jsx(Wt,{className:"w-4 h-4"}),"Pending Actions"]})}),n.jsx(H,{children:n.jsxs("div",{className:"space-y-3",children:[n.jsxs("button",{onClick:()=>a("profiles"),className:"w-full flex justify-between items-center p-2 rounded-lg hover:bg-accent transition-colors text-left","data-testid":"button-pending-profiles-action",children:[n.jsx("span",{className:"text-sm",children:"Profile Reviews"}),n.jsx(ge,{variant:C.pendingProfileApprovals>0?"destructive":"secondary",children:C.pendingProfileApprovals})]}),n.jsxs("button",{onClick:()=>a("shift-trades"),className:"w-full flex justify-between items-center p-2 rounded-lg hover:bg-accent transition-colors text-left","data-testid":"button-pending-trades-action",children:[n.jsx("span",{className:"text-sm",children:"Shift Trades"}),n.jsx(ge,{variant:C.openShiftTrades>0?"destructive":"secondary",children:C.openShiftTrades})]}),n.jsxs("button",{onClick:()=>a("applicants"),className:"w-full flex justify-between items-center p-2 rounded-lg hover:bg-accent transition-colors text-left","data-testid":"button-pending-applicants-action",children:[n.jsx("span",{className:"text-sm",children:"New Applicants"}),n.jsx(ge,{variant:C.pendingApplicants>0?"destructive":"secondary",children:C.pendingApplicants})]})]})})]}),n.jsxs(O,{"data-testid":"card-quick-actions",children:[n.jsx(ee,{className:"pb-3",children:n.jsxs(te,{className:"text-sm font-medium flex items-center gap-2",children:[n.jsx(ya,{className:"w-4 h-4"}),"Quick Actions"]})}),n.jsxs(H,{className:"space-y-2",children:[n.jsxs(_,{variant:"outline",size:"sm",className:"w-full justify-start",onClick:()=>a("scheduling"),"data-testid":"button-action-schedule",children:[n.jsx(Dt,{className:"w-4 h-4 mr-2"}),"Create Schedule"]}),n.jsxs(_,{variant:"outline",size:"sm",className:"w-full justify-start",onClick:()=>a("time-tracking"),"data-testid":"button-action-timesheets",children:[n.jsx(Rt,{className:"w-4 h-4 mr-2"}),"View Timesheets"]}),n.jsxs(_,{variant:"outline",size:"sm",className:"w-full justify-start",onClick:()=>a("analytics"),"data-testid":"button-action-analytics",children:[n.jsx(ya,{className:"w-4 h-4 mr-2"}),"View Analytics"]})]})]})]}),(C.pendingProfileApprovals>0||C.openShiftTrades>0||C.upcomingPTO>3)&&n.jsxs(O,{"data-testid":"card-alerts",children:[n.jsxs(ee,{children:[n.jsxs(te,{className:"flex items-center gap-2",children:[n.jsx(Wt,{className:"w-5 h-5 text-yellow-500"}),"Action Required"]}),n.jsx(ke,{children:"Items that need your attention"})]}),n.jsxs(H,{className:"space-y-3",children:[C.pendingProfileApprovals>0&&n.jsxs("div",{className:"flex items-start gap-3 p-3 bg-yellow-50 dark:bg-yellow-950/20 rounded-lg border border-yellow-200 dark:border-yellow-900",children:[n.jsx(br,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-500 mt-0.5"}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("p",{className:"font-medium text-sm",children:[C.pendingProfileApprovals," technician profile",C.pendingProfileApprovals>1?"s":""," awaiting review"]}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Review bio, photos, and approve for customer-facing display"})]}),n.jsx(_,{size:"sm",onClick:()=>a("profiles"),"data-testid":"button-alert-profiles",children:"Review"})]}),C.openShiftTrades>0&&n.jsxs("div",{className:"flex items-start gap-3 p-3 bg-blue-50 dark:bg-blue-950/20 rounded-lg border border-blue-200 dark:border-blue-900",children:[n.jsx(fb,{className:"w-5 h-5 text-blue-600 dark:text-blue-500 mt-0.5"}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("p",{className:"font-medium text-sm",children:[C.openShiftTrades," shift trade request",C.openShiftTrades>1?"s":""," pending"]}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Technicians need approval to swap or claim shifts"})]}),n.jsx(_,{size:"sm",onClick:()=>a("shift-trades"),"data-testid":"button-alert-trades",children:"Approve"})]}),C.upcomingPTO>3&&n.jsxs("div",{className:"flex items-start gap-3 p-3 bg-purple-50 dark:bg-purple-950/20 rounded-lg border border-purple-200 dark:border-purple-900",children:[n.jsx(tx,{className:"w-5 h-5 text-purple-600 dark:text-purple-500 mt-0.5"}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("p",{className:"font-medium text-sm",children:[C.upcomingPTO," upcoming PTO days in the next 30 days"]}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Review schedule coverage and plan accordingly"})]}),n.jsx(_,{size:"sm",variant:"outline",onClick:()=>a("pto"),"data-testid":"button-alert-pto",children:"View"})]})]})]}),n.jsxs(O,{"data-testid":"card-status-breakdown",children:[n.jsxs(ee,{children:[n.jsx(te,{children:"Employee Status Overview"}),n.jsx(ke,{children:"Current workforce distribution by employment status"})]}),n.jsx(H,{children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"}),n.jsx("span",{className:"text-sm font-medium",children:"Active"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-2xl font-bold","data-testid":"text-status-active",children:C.activeTechnicians}),n.jsxs("span",{className:"text-sm text-muted-foreground",children:["(",C.totalTechnicians>0?Math.round(C.activeTechnicians/C.totalTechnicians*100):0,"%)"]})]})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-3 h-3 rounded-full bg-gray-500"}),n.jsx("span",{className:"text-sm font-medium",children:"Inactive/Other"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-2xl font-bold","data-testid":"text-status-other",children:C.totalTechnicians-C.activeTechnicians}),n.jsxs("span",{className:"text-sm text-muted-foreground",children:["(",C.totalTechnicians>0?Math.round((C.totalTechnicians-C.activeTechnicians)/C.totalTechnicians*100):0,"%)"]})]})]})]})})]})]}),n.jsx(pt,{value:"profiles",className:"space-y-4",children:n.jsxs(O,{"data-testid":"card-profiles-queue",children:[n.jsx(ee,{children:n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[n.jsxs("div",{children:[n.jsx(te,{children:"Profile Review Queue"}),n.jsx(ke,{children:"Review and approve technician bio profiles before they go live"})]}),n.jsx("div",{className:"flex items-center gap-2",children:n.jsxs(ge,{variant:"destructive","data-testid":"badge-pending-count",children:[C.pendingProfileApprovals," Pending"]})})]})}),n.jsx(H,{children:b?n.jsx("div",{className:"text-center py-8",children:n.jsx("p",{className:"text-muted-foreground",children:"Loading profiles..."})}):M.length===0?n.jsxs("div",{className:"text-center py-8",children:[n.jsx(nn,{className:"w-12 h-12 text-green-500 mx-auto mb-3"}),n.jsx("p",{className:"font-medium",children:"All profiles reviewed!"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"No pending profiles need your attention"})]}):n.jsx("div",{className:"space-y-4",children:M.map(T=>n.jsxs("div",{className:"border rounded-lg p-4 space-y-4 hover:bg-accent/50 transition-colors","data-testid":`profile-review-${T.id}`,children:[n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsxs(vN,{className:"w-16 h-16",children:[n.jsx(bN,{src:T.photoThumb96||void 0}),n.jsx(wN,{className:"text-lg",children:T.preferredName.substring(0,2).toUpperCase()})]}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-start justify-between gap-2",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-lg","data-testid":`text-name-${T.id}`,children:T.preferredName}),n.jsxs("p",{className:"text-sm text-muted-foreground capitalize",children:[T.role,"  Hired ",T.hireDate?new Date(T.hireDate).toLocaleDateString():"N/A"]})]}),n.jsx(ge,{variant:"secondary",children:T.employmentStatus})]}),T.tags&&T.tags.length>0&&n.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:T.tags.map((I,L)=>n.jsx(ge,{variant:"outline",className:"text-xs",children:I},L))})]})]}),T.bioAbout&&n.jsxs("div",{className:"space-y-1",children:[n.jsx("label",{className:"text-xs font-medium text-muted-foreground uppercase",children:"Bio"}),n.jsx("p",{className:"text-sm leading-relaxed","data-testid":`text-bio-${T.id}`,children:T.bioAbout})]}),T.specialties&&T.specialties.length>0&&n.jsxs("div",{className:"space-y-1",children:[n.jsx("label",{className:"text-xs font-medium text-muted-foreground uppercase",children:"Specialties"}),n.jsx("div",{className:"flex flex-wrap gap-1",children:T.specialties.map((I,L)=>n.jsx(ge,{className:"text-xs",children:I},L))})]}),T.photoOriginal&&n.jsxs("div",{className:"space-y-1",children:[n.jsx("label",{className:"text-xs font-medium text-muted-foreground uppercase",children:"Profile Photo"}),n.jsx("div",{className:"flex gap-2",children:n.jsx("img",{src:T.photoThumb96||T.photoOriginal,alt:T.preferredName,className:"w-24 h-24 object-cover rounded border","data-testid":`img-photo-${T.id}`})})]}),n.jsxs("div",{className:"space-y-2 p-3 bg-muted/50 rounded border",children:[n.jsx("label",{className:"text-xs font-medium text-muted-foreground uppercase",children:"Employee Provisioning"}),T.provisioningStatus==="provisioned"&&n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(nn,{className:"w-4 h-4 text-green-500"}),n.jsx("span",{className:"text-sm font-medium text-green-700 dark:text-green-400",children:"Fully Provisioned"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-muted-foreground",children:"Email Alias"}),n.jsx("p",{className:"font-mono text-xs",children:T.generatedEmail||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-muted-foreground",children:"Phone Extension"}),n.jsxs("p",{className:"font-mono text-xs",children:["Ext. ",T.phoneExtension||"N/A"]})]})]}),T.provisionedAt&&n.jsxs("p",{className:"text-xs text-muted-foreground",children:["Provisioned ",new Date(T.provisionedAt).toLocaleDateString()]})]}),T.provisioningStatus==="failed"&&n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ws,{className:"w-4 h-4 text-red-500"}),n.jsx("span",{className:"text-sm font-medium text-red-700 dark:text-red-400",children:"Provisioning Failed"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-muted-foreground",children:"Email Alias"}),n.jsx("p",{className:"font-mono text-xs",children:T.generatedEmail||"N/A"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-muted-foreground",children:"Phone Extension"}),n.jsxs("p",{className:"font-mono text-xs",children:["Ext. ",T.phoneExtension||"N/A"]})]})]}),T.provisioningError&&n.jsx("div",{className:"p-2 bg-red-50 dark:bg-red-950/20 rounded border border-red-200 dark:border-red-900",children:n.jsx("p",{className:"text-xs text-red-700 dark:text-red-400",children:T.provisioningError})}),n.jsxs(_,{size:"sm",variant:"outline",onClick:()=>S.mutate(T.id),disabled:S.isPending,"data-testid":`button-retry-provision-${T.id}`,children:[n.jsx(Wt,{className:"w-4 h-4 mr-2"}),S.isPending?"Retrying...":"Retry Provisioning"]})]}),(!T.provisioningStatus||T.provisioningStatus==="pending")&&n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Wt,{className:"w-4 h-4 text-yellow-500"}),n.jsx("span",{className:"text-sm font-medium text-yellow-700 dark:text-yellow-400",children:"Not Provisioned"})]}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"This employee needs email and extension provisioning for full system access."}),n.jsxs(_,{size:"sm",onClick:()=>j.mutate(T.id),disabled:j.isPending,"data-testid":`button-provision-${T.id}`,children:[n.jsx(Nc,{className:"w-4 h-4 mr-2"}),j.isPending?"Provisioning...":"Provision Employee"]})]})]}),n.jsxs("div",{className:"flex gap-2 pt-2 border-t",children:[n.jsxs(_,{size:"sm",onClick:()=>w.mutate(T.id),disabled:w.isPending,"data-testid":`button-approve-${T.id}`,children:[n.jsx(nn,{className:"w-4 h-4 mr-2"}),w.isPending?"Approving...":"Approve Profile"]}),n.jsxs(_,{size:"sm",variant:"outline",onClick:()=>{t(`/tech/wizard?mode=edit&id=${T.id}`)},"data-testid":`button-edit-${T.id}`,children:[n.jsx(kp,{className:"w-4 h-4 mr-2"}),"Edit Profile"]}),n.jsxs(_,{size:"sm",variant:"destructive",onClick:()=>N.mutate({employeeId:T.id}),disabled:N.isPending,"data-testid":`button-reject-${T.id}`,children:[n.jsx(Ws,{className:"w-4 h-4 mr-2"}),N.isPending?"Requesting...":"Request Changes"]})]})]},T.id))})})]})}),n.jsx(pt,{value:"scheduling",children:n.jsxs("div",{className:"grid gap-4",children:[n.jsxs(O,{"data-testid":"card-scheduling",children:[n.jsx(ee,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(te,{children:"Weekly Schedule"}),n.jsx(ke,{children:"Current week's technician assignments"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(_,{variant:"outline",size:"sm","data-testid":"button-prev-week",children:[n.jsx(pi,{className:"w-4 h-4 mr-2"}),"Previous"]}),n.jsxs(_,{variant:"outline",size:"sm","data-testid":"button-next-week",children:["Next",n.jsx(vl,{className:"w-4 h-4 ml-2"})]}),n.jsxs(_,{size:"sm","data-testid":"button-auto-schedule",children:[n.jsx(Dt,{className:"w-4 h-4 mr-2"}),"Auto-Schedule"]})]})]})}),n.jsx(H,{children:n.jsxs("div",{className:"text-center py-12 bg-muted/20 rounded-lg border-2 border-dashed",children:[n.jsx(Dt,{className:"w-12 h-12 text-muted-foreground mx-auto mb-3"}),n.jsx("h3",{className:"font-semibold mb-1",children:"No Shifts Scheduled"}),n.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Get started by creating shift templates or using the auto-scheduler"}),n.jsxs("div",{className:"flex gap-2 justify-center",children:[n.jsx(_,{variant:"outline","data-testid":"button-create-shift",children:"Create Shift Template"}),n.jsx(_,{"data-testid":"button-manage-availability",children:"Manage Availability"})]})]})})]}),n.jsxs(O,{"data-testid":"card-shift-templates",children:[n.jsx(ee,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(te,{children:"Shift Templates"}),n.jsx(ke,{children:"Reusable shift patterns for quick scheduling"})]}),n.jsxs(_,{size:"sm","data-testid":"button-add-template",children:[n.jsx(Nc,{className:"w-4 h-4 mr-2"}),"New Template"]})]})}),n.jsx(H,{children:n.jsx("p",{className:"text-sm text-muted-foreground text-center py-8",children:"No shift templates created yet"})})]})]})}),n.jsx(pt,{value:"time-tracking",children:n.jsxs("div",{className:"grid gap-4",children:[n.jsxs(O,{"data-testid":"card-time-tracking",children:[n.jsx(ee,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(te,{children:"Today's Attendance"}),n.jsx(ke,{children:"Currently clocked in and geofencing status"})]}),n.jsx(ge,{variant:"secondary","data-testid":"badge-clocked-in-count",children:"0 Clocked In"})]})}),n.jsx(H,{children:n.jsxs("div",{className:"text-center py-12 bg-muted/20 rounded-lg",children:[n.jsx(Rt,{className:"w-12 h-12 text-muted-foreground mx-auto mb-3"}),n.jsx("h3",{className:"font-semibold mb-1",children:"No Active Clock-Ins"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Technicians will appear here when they clock in"})]})})]}),n.jsxs(O,{"data-testid":"card-recent-entries",children:[n.jsx(ee,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(te,{children:"Recent Time Entries"}),n.jsx(ke,{children:"Last 7 days of clock-in/out records"})]}),n.jsxs(_,{variant:"outline",size:"sm","data-testid":"button-view-timesheets",children:[n.jsx(bs,{className:"w-4 h-4 mr-2"}),"View Timesheets"]})]})}),n.jsx(H,{children:n.jsx("p",{className:"text-sm text-muted-foreground text-center py-8",children:"No time entries recorded"})})]}),n.jsxs(O,{"data-testid":"card-geofence-alerts",children:[n.jsxs(ee,{children:[n.jsx(te,{children:"Geofencing Alerts"}),n.jsx(ke,{children:"Out-of-zone clock-ins requiring review"})]}),n.jsx(H,{children:n.jsxs("div",{className:"text-center py-8",children:[n.jsx(nn,{className:"w-12 h-12 text-green-500 mx-auto mb-3"}),n.jsx("p",{className:"font-medium",children:"All Clear!"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"No geofencing violations to review"})]})})]})]})}),n.jsx(pt,{value:"pto",children:n.jsxs("div",{className:"grid gap-4",children:[n.jsxs(O,{"data-testid":"card-pto",children:[n.jsx(ee,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(te,{children:"Pending PTO Requests"}),n.jsx(ke,{children:"Time-off requests awaiting approval"})]}),n.jsxs(ge,{variant:"secondary","data-testid":"badge-pending-pto",children:[C.upcomingPTO," Pending"]})]})}),n.jsx(H,{children:n.jsxs("div",{className:"text-center py-12 bg-muted/20 rounded-lg",children:[n.jsx(tx,{className:"w-12 h-12 text-muted-foreground mx-auto mb-3"}),n.jsx("h3",{className:"font-semibold mb-1",children:"No Pending Requests"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"PTO requests will appear here for approval"})]})})]}),n.jsxs(O,{"data-testid":"card-upcoming-pto",children:[n.jsxs(ee,{children:[n.jsx(te,{children:"Upcoming Time Off"}),n.jsx(ke,{children:"Approved PTO in the next 30 days"})]}),n.jsx(H,{children:n.jsx("p",{className:"text-sm text-muted-foreground text-center py-8",children:"No upcoming time off scheduled"})})]}),n.jsxs(O,{"data-testid":"card-pto-balances",children:[n.jsx(ee,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(te,{children:"Employee PTO Balances"}),n.jsx(ke,{children:"Accrued and remaining time off by employee"})]}),n.jsx(_,{variant:"outline",size:"sm","data-testid":"button-export-balances",children:"Export Report"})]})}),n.jsx(H,{children:n.jsx("p",{className:"text-sm text-muted-foreground text-center py-8",children:"No PTO balances configured"})})]})]})}),n.jsx(pt,{value:"shift-trades",children:n.jsxs("div",{className:"grid gap-4",children:[n.jsxs(O,{"data-testid":"card-shift-trades",children:[n.jsx(ee,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(te,{children:"Pending Shift Trades"}),n.jsx(ke,{children:"Swap requests awaiting your approval"})]}),n.jsxs(ge,{variant:"secondary","data-testid":"badge-pending-trades",children:[C.openShiftTrades," Pending"]})]})}),n.jsx(H,{children:n.jsxs("div",{className:"text-center py-12 bg-muted/20 rounded-lg",children:[n.jsx(fb,{className:"w-12 h-12 text-muted-foreground mx-auto mb-3"}),n.jsx("h3",{className:"font-semibold mb-1",children:"No Pending Trades"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Shift swap requests will appear here for approval"})]})})]}),n.jsxs(O,{"data-testid":"card-available-shifts",children:[n.jsxs(ee,{children:[n.jsx(te,{children:"Available Shifts"}),n.jsx(ke,{children:"Open shifts technicians can claim"})]}),n.jsx(H,{children:n.jsx("p",{className:"text-sm text-muted-foreground text-center py-8",children:"No available shifts to claim"})})]}),n.jsxs(O,{"data-testid":"card-trade-history",children:[n.jsx(ee,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(te,{children:"Recent Trade History"}),n.jsx(ke,{children:"Last 30 days of approved/rejected swaps"})]}),n.jsx(_,{variant:"outline",size:"sm","data-testid":"button-view-all-trades",children:"View All"})]})}),n.jsx(H,{children:n.jsx("p",{className:"text-sm text-muted-foreground text-center py-8",children:"No trade history yet"})})]})]})}),n.jsx(pt,{value:"applicants",children:n.jsxs("div",{className:"grid gap-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsxs(O,{"data-testid":"card-new-applicants",children:[n.jsx(ee,{className:"pb-3",children:n.jsx(te,{className:"text-sm font-medium",children:"New Applications"})}),n.jsxs(H,{children:[n.jsx("div",{className:"text-2xl font-bold","data-testid":"text-new-count",children:"0"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Last 7 days"})]})]}),n.jsxs(O,{"data-testid":"card-screening-applicants",children:[n.jsx(ee,{className:"pb-3",children:n.jsx(te,{className:"text-sm font-medium",children:"Screening"})}),n.jsxs(H,{children:[n.jsx("div",{className:"text-2xl font-bold","data-testid":"text-screening-count",children:"0"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"In review"})]})]}),n.jsxs(O,{"data-testid":"card-interview-applicants",children:[n.jsx(ee,{className:"pb-3",children:n.jsx(te,{className:"text-sm font-medium",children:"Interviewing"})}),n.jsxs(H,{children:[n.jsx("div",{className:"text-2xl font-bold","data-testid":"text-interview-count",children:"0"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Scheduled"})]})]}),n.jsxs(O,{"data-testid":"card-offer-applicants",children:[n.jsx(ee,{className:"pb-3",children:n.jsx(te,{className:"text-sm font-medium",children:"Offers Extended"})}),n.jsxs(H,{children:[n.jsx("div",{className:"text-2xl font-bold","data-testid":"text-offer-count",children:"0"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Pending acceptance"})]})]})]}),n.jsxs(O,{"data-testid":"card-applicants",children:[n.jsx(ee,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(te,{children:"Recent Applications"}),n.jsx(ke,{children:"Latest job applications and their status"})]}),n.jsxs(_,{size:"sm","data-testid":"button-add-applicant",children:[n.jsx(Nc,{className:"w-4 h-4 mr-2"}),"Add Applicant"]})]})}),n.jsx(H,{children:n.jsxs("div",{className:"text-center py-12 bg-muted/20 rounded-lg border-2 border-dashed",children:[n.jsx(Nc,{className:"w-12 h-12 text-muted-foreground mx-auto mb-3"}),n.jsx("h3",{className:"font-semibold mb-1",children:"No Applications Yet"}),n.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Start building your talent pipeline by adding applicants"}),n.jsx(_,{variant:"outline","data-testid":"button-create-job-post",children:"Create Job Posting"})]})})]}),n.jsxs(O,{"data-testid":"card-upcoming-interviews",children:[n.jsxs(ee,{children:[n.jsx(te,{children:"Upcoming Interviews"}),n.jsx(ke,{children:"Scheduled interviews in the next 7 days"})]}),n.jsx(H,{children:n.jsx("p",{className:"text-sm text-muted-foreground text-center py-8",children:"No interviews scheduled"})})]})]})}),n.jsx(pt,{value:"analytics",children:n.jsxs(O,{"data-testid":"card-analytics",children:[n.jsxs(ee,{children:[n.jsx(te,{children:"Workforce Analytics"}),n.jsx(ke,{children:"Performance metrics, attendance trends, and productivity insights"})]}),n.jsx(H,{children:n.jsx("p",{className:"text-muted-foreground",children:"Analytics functionality coming soon..."})})]})})]})]})})]})})})}var aB=1,uht=.9,fht=.8,hht=.17,mk=.1,pk=.999,mht=.9999,pht=.99,ght=/[\\\/_+.#"@\[\(\{&]/,xht=/[\\\/_+.#"@\[\(\{&]/g,yht=/[\s-]/,Gde=/[\s-]/g;function D5(e,t,r,s,a,i,o){if(i===t.length)return a===e.length?aB:pht;var l=`${a},${i}`;if(o[l]!==void 0)return o[l];for(var c=s.charAt(i),d=r.indexOf(c,a),u=0,f,h,m,g;d>=0;)f=D5(e,t,r,s,d+1,i+1,o),f>u&&(d===a?f*=aB:ght.test(e.charAt(d-1))?(f*=fht,m=e.slice(a,d-1).match(xht),m&&a>0&&(f*=Math.pow(pk,m.length))):yht.test(e.charAt(d-1))?(f*=uht,g=e.slice(a,d-1).match(Gde),g&&a>0&&(f*=Math.pow(pk,g.length))):(f*=hht,a>0&&(f*=Math.pow(pk,d-a))),e.charAt(d)!==t.charAt(i)&&(f*=mht)),(f<mk&&r.charAt(d-1)===s.charAt(i+1)||s.charAt(i+1)===s.charAt(i)&&r.charAt(d-1)!==s.charAt(i))&&(h=D5(e,t,r,s,d+1,i+2,o),h*mk>f&&(f=h*mk)),f>u&&(u=f),d=r.indexOf(c,d+1);return o[l]=u,u}function iB(e){return e.toLowerCase().replace(Gde," ")}function vht(e,t,r){return e=r&&r.length>0?`${e+" "+r.join(" ")}`:e,D5(e,t,iB(e),iB(t),0,0,{})}var Gg='[cmdk-group=""]',gk='[cmdk-group-items=""]',bht='[cmdk-group-heading=""]',Yde='[cmdk-item=""]',oB=`${Yde}:not([aria-disabled="true"])`,$5="cmdk-item-select",nm="data-value",wht=(e,t,r)=>vht(e,t,r),Qde=p.createContext(void 0),U1=()=>p.useContext(Qde),Kde=p.createContext(void 0),l9=()=>p.useContext(Kde),Jde=p.createContext(void 0),Zde=p.forwardRef((e,t)=>{let r=rm(()=>{var B,Z;return{search:"",value:(Z=(B=e.value)!=null?B:e.defaultValue)!=null?Z:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),s=rm(()=>new Set),a=rm(()=>new Map),i=rm(()=>new Map),o=rm(()=>new Set),l=Xde(e),{label:c,children:d,value:u,onValueChange:f,filter:h,shouldFilter:m,loop:g,disablePointerSelection:x=!1,vimBindings:y=!0,...v}=e,b=Gs(),w=Gs(),N=Gs(),j=p.useRef(null),S=Eht();bh(()=>{if(u!==void 0){let B=u.trim();r.current.value=B,C.emit()}},[u]),bh(()=>{S(6,I)},[]);let C=p.useMemo(()=>({subscribe:B=>(o.current.add(B),()=>o.current.delete(B)),snapshot:()=>r.current,setState:(B,Z,ne)=>{var Y,me,pe,Me;if(!Object.is(r.current[B],Z)){if(r.current[B]=Z,B==="search")T(),A(),S(1,P);else if(B==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let re=document.getElementById(N);re?re.focus():(Y=document.getElementById(b))==null||Y.focus()}if(S(7,()=>{var re;r.current.selectedItemId=(re=L())==null?void 0:re.id,C.emit()}),ne||S(5,I),((me=l.current)==null?void 0:me.value)!==void 0){let re=Z??"";(Me=(pe=l.current).onValueChange)==null||Me.call(pe,re);return}}C.emit()}},emit:()=>{o.current.forEach(B=>B())}}),[]),k=p.useMemo(()=>({value:(B,Z,ne)=>{var Y;Z!==((Y=i.current.get(B))==null?void 0:Y.value)&&(i.current.set(B,{value:Z,keywords:ne}),r.current.filtered.items.set(B,M(Z,ne)),S(2,()=>{A(),C.emit()}))},item:(B,Z)=>(s.current.add(B),Z&&(a.current.has(Z)?a.current.get(Z).add(B):a.current.set(Z,new Set([B]))),S(3,()=>{T(),A(),r.current.value||P(),C.emit()}),()=>{i.current.delete(B),s.current.delete(B),r.current.filtered.items.delete(B);let ne=L();S(4,()=>{T(),(ne==null?void 0:ne.getAttribute("id"))===B&&P(),C.emit()})}),group:B=>(a.current.has(B)||a.current.set(B,new Set),()=>{i.current.delete(B),a.current.delete(B)}),filter:()=>l.current.shouldFilter,label:c||e["aria-label"],getDisablePointerSelection:()=>l.current.disablePointerSelection,listId:b,inputId:N,labelId:w,listInnerRef:j}),[]);function M(B,Z){var ne,Y;let me=(Y=(ne=l.current)==null?void 0:ne.filter)!=null?Y:wht;return B?me(B,r.current.search,Z):0}function A(){if(!r.current.search||l.current.shouldFilter===!1)return;let B=r.current.filtered.items,Z=[];r.current.filtered.groups.forEach(Y=>{let me=a.current.get(Y),pe=0;me.forEach(Me=>{let re=B.get(Me);pe=Math.max(re,pe)}),Z.push([Y,pe])});let ne=j.current;R().sort((Y,me)=>{var pe,Me;let re=Y.getAttribute("id"),de=me.getAttribute("id");return((pe=B.get(de))!=null?pe:0)-((Me=B.get(re))!=null?Me:0)}).forEach(Y=>{let me=Y.closest(gk);me?me.appendChild(Y.parentElement===me?Y:Y.closest(`${gk} > *`)):ne.appendChild(Y.parentElement===ne?Y:Y.closest(`${gk} > *`))}),Z.sort((Y,me)=>me[1]-Y[1]).forEach(Y=>{var me;let pe=(me=j.current)==null?void 0:me.querySelector(`${Gg}[${nm}="${encodeURIComponent(Y[0])}"]`);pe==null||pe.parentElement.appendChild(pe)})}function P(){let B=R().find(ne=>ne.getAttribute("aria-disabled")!=="true"),Z=B==null?void 0:B.getAttribute(nm);C.setState("value",Z||void 0)}function T(){var B,Z,ne,Y;if(!r.current.search||l.current.shouldFilter===!1){r.current.filtered.count=s.current.size;return}r.current.filtered.groups=new Set;let me=0;for(let pe of s.current){let Me=(Z=(B=i.current.get(pe))==null?void 0:B.value)!=null?Z:"",re=(Y=(ne=i.current.get(pe))==null?void 0:ne.keywords)!=null?Y:[],de=M(Me,re);r.current.filtered.items.set(pe,de),de>0&&me++}for(let[pe,Me]of a.current)for(let re of Me)if(r.current.filtered.items.get(re)>0){r.current.filtered.groups.add(pe);break}r.current.filtered.count=me}function I(){var B,Z,ne;let Y=L();Y&&(((B=Y.parentElement)==null?void 0:B.firstChild)===Y&&((ne=(Z=Y.closest(Gg))==null?void 0:Z.querySelector(bht))==null||ne.scrollIntoView({block:"nearest"})),Y.scrollIntoView({block:"nearest"}))}function L(){var B;return(B=j.current)==null?void 0:B.querySelector(`${Yde}[aria-selected="true"]`)}function R(){var B;return Array.from(((B=j.current)==null?void 0:B.querySelectorAll(oB))||[])}function G(B){let Z=R()[B];Z&&C.setState("value",Z.getAttribute(nm))}function $(B){var Z;let ne=L(),Y=R(),me=Y.findIndex(Me=>Me===ne),pe=Y[me+B];(Z=l.current)!=null&&Z.loop&&(pe=me+B<0?Y[Y.length-1]:me+B===Y.length?Y[0]:Y[me+B]),pe&&C.setState("value",pe.getAttribute(nm))}function D(B){let Z=L(),ne=Z==null?void 0:Z.closest(Gg),Y;for(;ne&&!Y;)ne=B>0?Tht(ne,Gg):Aht(ne,Gg),Y=ne==null?void 0:ne.querySelector(oB);Y?C.setState("value",Y.getAttribute(nm)):$(B)}let W=()=>G(R().length-1),E=B=>{B.preventDefault(),B.metaKey?W():B.altKey?D(1):$(1)},F=B=>{B.preventDefault(),B.metaKey?G(0):B.altKey?D(-1):$(-1)};return p.createElement(ht.div,{ref:t,tabIndex:-1,...v,"cmdk-root":"",onKeyDown:B=>{var Z;(Z=v.onKeyDown)==null||Z.call(v,B);let ne=B.nativeEvent.isComposing||B.keyCode===229;if(!(B.defaultPrevented||ne))switch(B.key){case"n":case"j":{y&&B.ctrlKey&&E(B);break}case"ArrowDown":{E(B);break}case"p":case"k":{y&&B.ctrlKey&&F(B);break}case"ArrowUp":{F(B);break}case"Home":{B.preventDefault(),G(0);break}case"End":{B.preventDefault(),W();break}case"Enter":{B.preventDefault();let Y=L();if(Y){let me=new Event($5);Y.dispatchEvent(me)}}}}},p.createElement("label",{"cmdk-label":"",htmlFor:k.inputId,id:k.labelId,style:Lht},c),Q3(e,B=>p.createElement(Kde.Provider,{value:C},p.createElement(Qde.Provider,{value:k},B))))}),jht=p.forwardRef((e,t)=>{var r,s;let a=Gs(),i=p.useRef(null),o=p.useContext(Jde),l=U1(),c=Xde(e),d=(s=(r=c.current)==null?void 0:r.forceMount)!=null?s:o==null?void 0:o.forceMount;bh(()=>{if(!d)return l.item(a,o==null?void 0:o.id)},[d]);let u=eue(a,i,[e.value,e.children,i],e.keywords),f=l9(),h=Tu(S=>S.value&&S.value===u.current),m=Tu(S=>d||l.filter()===!1?!0:S.search?S.filtered.items.get(a)>0:!0);p.useEffect(()=>{let S=i.current;if(!(!S||e.disabled))return S.addEventListener($5,g),()=>S.removeEventListener($5,g)},[m,e.onSelect,e.disabled]);function g(){var S,C;x(),(C=(S=c.current).onSelect)==null||C.call(S,u.current)}function x(){f.setState("value",u.current,!0)}if(!m)return null;let{disabled:y,value:v,onSelect:b,forceMount:w,keywords:N,...j}=e;return p.createElement(ht.div,{ref:eh(i,t),...j,id:a,"cmdk-item":"",role:"option","aria-disabled":!!y,"aria-selected":!!h,"data-disabled":!!y,"data-selected":!!h,onPointerMove:y||l.getDisablePointerSelection()?void 0:x,onClick:y?void 0:g},e.children)}),Nht=p.forwardRef((e,t)=>{let{heading:r,children:s,forceMount:a,...i}=e,o=Gs(),l=p.useRef(null),c=p.useRef(null),d=Gs(),u=U1(),f=Tu(m=>a||u.filter()===!1?!0:m.search?m.filtered.groups.has(o):!0);bh(()=>u.group(o),[]),eue(o,l,[e.value,e.heading,c]);let h=p.useMemo(()=>({id:o,forceMount:a}),[a]);return p.createElement(ht.div,{ref:eh(l,t),...i,"cmdk-group":"",role:"presentation",hidden:f?void 0:!0},r&&p.createElement("div",{ref:c,"cmdk-group-heading":"","aria-hidden":!0,id:d},r),Q3(e,m=>p.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":r?d:void 0},p.createElement(Jde.Provider,{value:h},m))))}),Sht=p.forwardRef((e,t)=>{let{alwaysRender:r,...s}=e,a=p.useRef(null),i=Tu(o=>!o.search);return!r&&!i?null:p.createElement(ht.div,{ref:eh(a,t),...s,"cmdk-separator":"",role:"separator"})}),Cht=p.forwardRef((e,t)=>{let{onValueChange:r,...s}=e,a=e.value!=null,i=l9(),o=Tu(d=>d.search),l=Tu(d=>d.selectedItemId),c=U1();return p.useEffect(()=>{e.value!=null&&i.setState("search",e.value)},[e.value]),p.createElement(ht.input,{ref:t,...s,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":c.listId,"aria-labelledby":c.labelId,"aria-activedescendant":l,id:c.inputId,type:"text",value:a?e.value:o,onChange:d=>{a||i.setState("search",d.target.value),r==null||r(d.target.value)}})}),kht=p.forwardRef((e,t)=>{let{children:r,label:s="Suggestions",...a}=e,i=p.useRef(null),o=p.useRef(null),l=Tu(d=>d.selectedItemId),c=U1();return p.useEffect(()=>{if(o.current&&i.current){let d=o.current,u=i.current,f,h=new ResizeObserver(()=>{f=requestAnimationFrame(()=>{let m=d.offsetHeight;u.style.setProperty("--cmdk-list-height",m.toFixed(1)+"px")})});return h.observe(d),()=>{cancelAnimationFrame(f),h.unobserve(d)}}},[]),p.createElement(ht.div,{ref:eh(i,t),...a,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":l,"aria-label":s,id:c.listId},Q3(e,d=>p.createElement("div",{ref:eh(o,c.listInnerRef),"cmdk-list-sizer":""},d)))}),Mht=p.forwardRef((e,t)=>{let{open:r,onOpenChange:s,overlayClassName:a,contentClassName:i,container:o,...l}=e;return p.createElement(g4,{open:r,onOpenChange:s},p.createElement(x4,{container:o},p.createElement(B0,{"cmdk-overlay":"",className:a}),p.createElement(U0,{"aria-label":e.label,"cmdk-dialog":"",className:i},p.createElement(Zde,{ref:t,...l}))))}),_ht=p.forwardRef((e,t)=>Tu(r=>r.filtered.count===0)?p.createElement(ht.div,{ref:t,...e,"cmdk-empty":"",role:"presentation"}):null),Pht=p.forwardRef((e,t)=>{let{progress:r,children:s,label:a="Loading...",...i}=e;return p.createElement(ht.div,{ref:t,...i,"cmdk-loading":"",role:"progressbar","aria-valuenow":r,"aria-valuemin":0,"aria-valuemax":100,"aria-label":a},Q3(e,o=>p.createElement("div",{"aria-hidden":!0},o)))}),bi=Object.assign(Zde,{List:kht,Item:jht,Input:Cht,Group:Nht,Separator:Sht,Dialog:Mht,Empty:_ht,Loading:Pht});function Tht(e,t){let r=e.nextElementSibling;for(;r;){if(r.matches(t))return r;r=r.nextElementSibling}}function Aht(e,t){let r=e.previousElementSibling;for(;r;){if(r.matches(t))return r;r=r.previousElementSibling}}function Xde(e){let t=p.useRef(e);return bh(()=>{t.current=e}),t}var bh=typeof window>"u"?p.useEffect:p.useLayoutEffect;function rm(e){let t=p.useRef();return t.current===void 0&&(t.current=e()),t}function Tu(e){let t=l9(),r=()=>e(t.snapshot());return p.useSyncExternalStore(t.subscribe,r,r)}function eue(e,t,r,s=[]){let a=p.useRef(),i=U1();return bh(()=>{var o;let l=(()=>{var d;for(let u of r){if(typeof u=="string")return u.trim();if(typeof u=="object"&&"current"in u)return u.current?(d=u.current.textContent)==null?void 0:d.trim():a.current}})(),c=s.map(d=>d.trim());i.value(e,l,c),(o=t.current)==null||o.setAttribute(nm,l),a.current=l}),a}var Eht=()=>{let[e,t]=p.useState(),r=rm(()=>new Map);return bh(()=>{r.current.forEach(s=>s()),r.current=new Map},[e]),(s,a)=>{r.current.set(s,a),t({})}};function Iht(e){let t=e.type;return typeof t=="function"?t(e.props):"render"in t?t.render(e.props):e}function Q3({asChild:e,children:t},r){return e&&p.isValidElement(t)?p.cloneElement(Iht(t),{ref:t.ref},r(t.props.children)):r(t)}var Lht={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const tue=p.forwardRef(({className:e,...t},r)=>n.jsx(bi,{ref:r,className:Le("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",e),...t}));tue.displayName=bi.displayName;const nue=p.forwardRef(({className:e,...t},r)=>n.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[n.jsx(Ga,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),n.jsx(bi.Input,{ref:r,className:Le("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",e),...t})]}));nue.displayName=bi.Input.displayName;const rue=p.forwardRef(({className:e,...t},r)=>n.jsx(bi.List,{ref:r,className:Le("max-h-[300px] overflow-y-auto overflow-x-hidden",e),...t}));rue.displayName=bi.List.displayName;const Fw=p.forwardRef((e,t)=>n.jsx(bi.Empty,{ref:t,className:"py-6 text-center text-sm",...e}));Fw.displayName=bi.Empty.displayName;const O5=p.forwardRef(({className:e,...t},r)=>n.jsx(bi.Group,{ref:r,className:Le("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",e),...t}));O5.displayName=bi.Group.displayName;const Dht=p.forwardRef(({className:e,...t},r)=>n.jsx(bi.Separator,{ref:r,className:Le("-mx-1 h-px bg-border",e),...t}));Dht.displayName=bi.Separator.displayName;const R5=p.forwardRef(({className:e,...t},r)=>n.jsx(bi.Item,{ref:r,className:Le("relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",e),...t}));R5.displayName=bi.Item.displayName;function dx({value:e,onChange:t,placeholder:r="Search or create contact...",suggestedRoles:s=[],disabled:a=!1,className:i}){var k;const[o,l]=p.useState(!1),[c,d]=p.useState(""),[u,f]=p.useState(!1),[h,m]=p.useState({name:"",phone:"",email:"",company:""}),[g,x]=p.useState([]),{toast:y}=Ee(),{data:v,isLoading:b}=be({queryKey:["/api/contacts/search",c],queryFn:async()=>{const M=await fetch(`/api/contacts/search?query=${encodeURIComponent(c)}&limit=10`,{credentials:"include"});if(!M.ok)throw new Error("Search failed");return M.json()},enabled:c.length>=2&&o}),w=je({mutationFn:async M=>(await Ne("POST","/api/contacts/upsert",{...M,roleTags:s})).json(),onSuccess:M=>{M.success&&(t(M.contact),f(!1),m({name:"",phone:"",email:"",company:""}),x([]),ze.invalidateQueries({queryKey:["/api/contacts/search"],exact:!1}),y({title:"Contact created",description:M.isNew?"New contact added successfully":"Contact updated"}))},onError:M=>{y({title:"Error creating contact",description:M.message||"Failed to create contact",variant:"destructive"})}}),N=je({mutationFn:async M=>(await Ne("POST","/api/contacts/find-duplicates",M)).json(),onSuccess:M=>{M.success&&M.duplicates&&M.duplicates.length>0?x(M.duplicates):x([])}});p.useEffect(()=>{if(h.phone.length>=10||h.email&&h.email.includes("@")){const M=setTimeout(()=>{N.mutate(h)},500);return()=>clearTimeout(M)}},[h.phone,h.email]);const j=M=>{t(M),l(!1)},S=()=>{f(!0),l(!1)},C=(M=!1)=>{if(!h.name||!h.phone){y({title:"Missing required fields",description:"Name and phone are required",variant:"destructive"});return}if(g.length>0&&!M){y({title:"Possible duplicates found",description:"Please review the warnings below",variant:"destructive"});return}w.mutate(h)};return n.jsxs(n.Fragment,{children:[n.jsxs(hh,{open:o,onOpenChange:l,children:[n.jsx(mh,{asChild:!0,children:n.jsxs(_,{variant:"outline",role:"combobox","aria-expanded":o,disabled:a,className:Le("w-full justify-between",i),"data-testid":"button-contact-picker",children:[e?n.jsxs("div",{className:"flex items-center gap-2 truncate",children:[n.jsx("span",{className:"font-medium truncate",children:e.name}),e.company&&n.jsxs("span",{className:"text-xs text-muted-foreground truncate",children:["(",e.company,")"]})]}):n.jsx("span",{className:"text-muted-foreground",children:r}),n.jsx(Ga,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),n.jsx(Pu,{className:"w-[400px] p-0",align:"start",children:n.jsxs(tue,{shouldFilter:!1,children:[n.jsx(nue,{placeholder:"Type to search...",value:c,onValueChange:d,"data-testid":"input-contact-search"}),n.jsxs(rue,{children:[b&&n.jsx(Fw,{children:"Searching..."}),!b&&c.length<2&&n.jsx(Fw,{children:"Type at least 2 characters to search"}),!b&&c.length>=2&&((k=v==null?void 0:v.contacts)==null?void 0:k.length)===0&&n.jsxs(Fw,{children:["No contacts found",n.jsxs(_,{variant:"ghost",size:"sm",className:"mt-2 w-full",onClick:S,"data-testid":"button-create-new-contact",children:[n.jsx(Nc,{className:"mr-2 h-4 w-4"}),"Create new contact"]})]}),(v==null?void 0:v.contacts)&&v.contacts.length>0&&n.jsx(O5,{heading:"Contacts",children:v.contacts.map(M=>n.jsxs(R5,{value:M.id.toString(),onSelect:()=>j(M),"data-testid":`item-contact-${M.id}`,children:[n.jsx(Mr,{className:Le("mr-2 h-4 w-4",(e==null?void 0:e.id)===M.id?"opacity-100":"opacity-0")}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"font-medium truncate",children:M.name}),M.smsOptOut&&n.jsx(ge,{variant:"destructive",className:"text-xs",children:"No SMS"})]}),n.jsxs("div",{className:"flex flex-col gap-0.5 text-xs text-muted-foreground",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(bt,{className:"h-3 w-3"}),n.jsx("span",{children:M.phone})]}),M.email&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Cr,{className:"h-3 w-3"}),n.jsx("span",{className:"truncate",children:M.email})]}),M.company&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(qN,{className:"h-3 w-3"}),n.jsx("span",{className:"truncate",children:M.company})]})]}),M.roleTags&&M.roleTags.length>0&&n.jsx("div",{className:"flex gap-1 mt-1 flex-wrap",children:M.roleTags.map(A=>n.jsx(ge,{variant:"secondary",className:"text-xs",children:A},A))})]})]},M.id))}),c.length>=2&&n.jsx(O5,{children:n.jsxs(R5,{onSelect:S,"data-testid":"button-create-contact-from-search",children:[n.jsx(Nc,{className:"mr-2 h-4 w-4"}),"Create new contact"]})})]})]})})]}),n.jsx(At,{open:u,onOpenChange:f,children:n.jsxs(_t,{className:"sm:max-w-[500px]",children:[n.jsxs($t,{children:[n.jsx(Et,{children:"Create New Contact"}),n.jsx(an,{children:"Add a new contact to the system. We'll check for duplicates automatically."})]}),g.length>0&&n.jsxs(Ln,{variant:"destructive","data-testid":"alert-duplicate-warnings",children:[n.jsx(Ya,{className:"h-4 w-4"}),n.jsxs(Dn,{children:[n.jsx("p",{className:"font-semibold mb-2",children:"Possible duplicates found:"}),n.jsx("div",{className:"space-y-2",children:g.map(M=>n.jsxs("div",{className:"text-sm bg-background p-2 rounded",children:[n.jsx("div",{className:"font-medium",children:M.name}),n.jsxs("div",{className:"text-xs text-muted-foreground",children:[M.phone," ",M.email&&` ${M.email}`]}),n.jsx(_,{variant:"link",size:"sm",className:"p-0 h-auto text-xs",onClick:()=>{j(M),f(!1)},"data-testid":`button-use-duplicate-${M.id}`,children:"Use this contact instead"})]},M.id))})]})]}),n.jsxs("div",{className:"grid gap-4 py-4",children:[n.jsxs("div",{className:"grid gap-2",children:[n.jsx(U,{htmlFor:"name",children:"Name *"}),n.jsx(se,{id:"name",value:h.name,onChange:M=>m({...h,name:M.target.value}),placeholder:"John Doe","data-testid":"input-contact-name"})]}),n.jsxs("div",{className:"grid gap-2",children:[n.jsx(U,{htmlFor:"phone",children:"Phone *"}),n.jsx(se,{id:"phone",type:"tel",value:h.phone,onChange:M=>m({...h,phone:M.target.value}),placeholder:"(918) 555-1234","data-testid":"input-contact-phone"})]}),n.jsxs("div",{className:"grid gap-2",children:[n.jsx(U,{htmlFor:"email",children:"Email"}),n.jsx(se,{id:"email",type:"email",value:h.email,onChange:M=>m({...h,email:M.target.value}),placeholder:"john@example.com","data-testid":"input-contact-email"})]}),n.jsxs("div",{className:"grid gap-2",children:[n.jsx(U,{htmlFor:"company",children:"Company"}),n.jsx(se,{id:"company",value:h.company,onChange:M=>m({...h,company:M.target.value}),placeholder:"Acme Corp","data-testid":"input-contact-company"})]})]}),n.jsxs(Sn,{children:[n.jsx(_,{variant:"outline",onClick:()=>{f(!1),x([])},"data-testid":"button-cancel-create-contact",children:"Cancel"}),g.length>0&&n.jsx(_,{variant:"destructive",onClick:()=>C(!0),disabled:w.isPending,"data-testid":"button-create-anyway",children:"Create Anyway"}),n.jsx(_,{onClick:()=>C(!1),disabled:w.isPending,"data-testid":"button-create-contact",children:w.isPending?"Creating...":"Create Contact"})]})]})})]})}function $ht({value:e,onChange:t,className:r}){var f;const[s,a]=p.useState(["basic"]),i=(h,m)=>{t({...e,[h]:m})},o=h=>{const m={billingType:h};h==="self"?(m.payer=e.serviceContact,m.sharePriceWithRequester=!0,m.shareLocationWithPayer=!0,m.isGift=!1):h==="gift"?(m.isGift=!0,m.sharePriceWithRequester=!1,m.shareLocationWithPayer=!1):h==="company_po"?(m.sharePriceWithRequester=!0,m.shareLocationWithPayer=!0,m.isGift=!1):(m.sharePriceWithRequester=!1,m.shareLocationWithPayer=!1,m.isGift=!1),t({...e,...m})},l=()=>{const h=e.requester||e.serviceContact;h&&t({...e,requester:h,serviceContact:h,vehicleOwner:h,payer:h,billingType:"self",sharePriceWithRequester:!0,shareLocationWithPayer:!0})},d=(()=>{const h={serviceContact:!!e.serviceContact,payer:!!e.payer},m={requester:!!e.requester,vehicleOwner:!!e.vehicleOwner};return{required:h,optional:m}})(),u=d.required.serviceContact&&d.required.payer;return n.jsxs("div",{className:Le("space-y-4",r),children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold",children:"Contact Roles"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Assign contacts to different roles for this appointment"})]}),n.jsxs(_,{variant:"outline",size:"sm",onClick:l,"data-testid":"button-quick-fill-roles",children:[n.jsx(Fn,{className:"mr-2 h-4 w-4"}),"Quick Fill (Same Person)"]})]}),n.jsxs(t3,{type:"multiple",value:s,onValueChange:a,className:"space-y-2",children:[n.jsxs(zf,{value:"basic",children:[n.jsx(Bf,{"data-testid":"trigger-basic-roles",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{children:"Basic Roles"}),u&&n.jsx(nn,{className:"h-4 w-4 text-green-600"})]})}),n.jsx(Uf,{children:n.jsx(O,{children:n.jsxs(H,{className:"pt-6 space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(bt,{className:"h-4 w-4"}),n.jsx(U,{children:"Service Contact *"}),n.jsx(ge,{variant:"secondary",className:"text-xs",children:"Required"})]}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Person who will be present during service and receive status updates"}),n.jsx(dx,{value:e.serviceContact||null,onChange:h=>i("serviceContact",h),placeholder:"Select service contact...",suggestedRoles:["Service Contact"]})]}),n.jsx(Ot,{}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Fn,{className:"h-4 w-4"}),n.jsx(U,{children:"Requester (optional)"})]}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Person who requested/scheduled the service (if different from service contact)"}),n.jsx(dx,{value:e.requester||null,onChange:h=>i("requester",h),placeholder:"Select requester (or leave blank)...",suggestedRoles:["Requester"]})]})]})})})]}),n.jsxs(zf,{value:"billing",children:[n.jsx(Bf,{"data-testid":"trigger-billing-config",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(yf,{className:"h-4 w-4"}),n.jsx("span",{children:"Billing Configuration"}),e.payer&&n.jsx(nn,{className:"h-4 w-4 text-green-600"})]})}),n.jsx(Uf,{children:n.jsx(O,{children:n.jsxs(H,{className:"pt-6 space-y-4",children:[n.jsxs("div",{className:"space-y-3",children:[n.jsx(U,{children:"Billing Type *"}),n.jsxs(mo,{value:e.billingType,onValueChange:h=>o(h),"data-testid":"radio-group-billing-type",children:[n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Kn,{value:"self",id:"self","data-testid":"radio-billing-self"}),n.jsxs(U,{htmlFor:"self",className:"font-normal flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Fn,{className:"h-4 w-4"}),n.jsx("span",{children:"Self-Pay"})]}),n.jsx("p",{className:"text-xs text-muted-foreground ml-6",children:"Service contact pays for themselves"})]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Kn,{value:"third_party",id:"third_party","data-testid":"radio-billing-third-party"}),n.jsxs(U,{htmlFor:"third_party",className:"font-normal flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(yf,{className:"h-4 w-4"}),n.jsx("span",{children:"Third-Party Billing"})]}),n.jsx("p",{className:"text-xs text-muted-foreground ml-6",children:"Someone else pays (parent, employer, etc.)"})]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Kn,{value:"gift",id:"gift","data-testid":"radio-billing-gift"}),n.jsxs(U,{htmlFor:"gift",className:"font-normal flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(jr,{className:"h-4 w-4"}),n.jsx("span",{children:"Gift"})]}),n.jsx("p",{className:"text-xs text-muted-foreground ml-6",children:"Gift service - price hidden from recipient"})]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(Kn,{value:"company_po",id:"company_po","data-testid":"radio-billing-company-po"}),n.jsxs(U,{htmlFor:"company_po",className:"font-normal flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(qN,{className:"h-4 w-4"}),n.jsx("span",{children:"Company Purchase Order"})]}),n.jsx("p",{className:"text-xs text-muted-foreground ml-6",children:"Corporate/fleet account with net payment terms"})]})]})]})]}),n.jsx(Ot,{}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(yf,{className:"h-4 w-4"}),n.jsx(U,{children:"Payer *"}),n.jsx(ge,{variant:"secondary",className:"text-xs",children:"Required"})]}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Person or company responsible for payment"}),n.jsx(dx,{value:e.payer||null,onChange:h=>i("payer",h),placeholder:"Select payer...",suggestedRoles:["Payer",e.billingType==="company_po"?"Company":""]})]}),e.billingType==="company_po"&&n.jsxs("div",{className:"space-y-2",children:[n.jsx(U,{htmlFor:"po-number",children:"Purchase Order Number"}),n.jsx(se,{id:"po-number",value:e.poNumber||"",onChange:h=>t({...e,poNumber:h.target.value}),placeholder:"PO-2025-001","data-testid":"input-po-number"})]}),e.isGift&&n.jsxs("div",{className:"space-y-2",children:[n.jsx(U,{htmlFor:"gift-message",children:"Gift Message (optional)"}),n.jsx(un,{id:"gift-message",value:e.giftMessage||"",onChange:h=>t({...e,giftMessage:h.target.value}),placeholder:"Happy Birthday! Enjoy your car detail...",rows:3,"data-testid":"input-gift-message"})]})]})})})]}),n.jsxs(zf,{value:"advanced",children:[n.jsx(Bf,{"data-testid":"trigger-advanced-options",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(vo,{className:"h-4 w-4"}),n.jsx("span",{children:"Advanced Options"})]})}),n.jsx(Uf,{children:n.jsx(O,{children:n.jsxs(H,{className:"pt-6 space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ys,{className:"h-4 w-4"}),n.jsx(U,{children:"Vehicle Owner (optional)"})]}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"If vehicle owner is different from service contact (e.g., fleet manager, parent's car)"}),n.jsx(dx,{value:e.vehicleOwner||null,onChange:h=>i("vehicleOwner",h),placeholder:"Select vehicle owner (or leave blank)...",suggestedRoles:["Vehicle Owner"]})]}),n.jsx(Ot,{}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium mb-2",children:"Privacy Controls"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Control what information is shared with each role"})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"space-y-0.5 flex-1",children:[n.jsxs(U,{className:"flex items-center gap-2",children:[e.sharePriceWithRequester?n.jsx(Kl,{className:"h-4 w-4"}):n.jsx(uy,{className:"h-4 w-4"}),"Share Price with Requester"]}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Show pricing to the person who requested service"})]}),n.jsx(Vt,{checked:e.sharePriceWithRequester,onCheckedChange:h=>t({...e,sharePriceWithRequester:h}),disabled:e.billingType==="self"||e.isGift,"data-testid":"switch-share-price"})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"space-y-0.5 flex-1",children:[n.jsxs(U,{className:"flex items-center gap-2",children:[e.shareLocationWithPayer?n.jsx(Kl,{className:"h-4 w-4"}):n.jsx(uy,{className:"h-4 w-4"}),"Share Location with Payer"]}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Show service location and live tracking to payer"})]}),n.jsx(Vt,{checked:e.shareLocationWithPayer,onCheckedChange:h=>t({...e,shareLocationWithPayer:h}),disabled:e.billingType==="self","data-testid":"switch-share-location"})]})]})]})})})]})]}),n.jsxs(O,{className:"bg-muted/50",children:[n.jsx(ee,{className:"pb-3",children:n.jsx(te,{className:"text-sm",children:"Assignment Summary"})}),n.jsxs(H,{className:"space-y-2 text-sm",children:[e.serviceContact&&n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(bt,{className:"h-4 w-4"}),n.jsx("span",{className:"text-muted-foreground",children:"Service Contact:"}),n.jsx("span",{className:"font-medium",children:e.serviceContact.name})]}),e.payer&&n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(yf,{className:"h-4 w-4"}),n.jsx("span",{className:"text-muted-foreground",children:"Payer:"}),n.jsx("span",{className:"font-medium",children:e.payer.name}),n.jsx(ge,{variant:"outline",className:"text-xs",children:e.billingType})]}),e.requester&&e.requester.id!==((f=e.serviceContact)==null?void 0:f.id)&&n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Fn,{className:"h-4 w-4"}),n.jsx("span",{className:"text-muted-foreground",children:"Requester:"}),n.jsx("span",{className:"font-medium",children:e.requester.name})]}),e.vehicleOwner&&n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ys,{className:"h-4 w-4"}),n.jsx("span",{className:"text-muted-foreground",children:"Vehicle Owner:"}),n.jsx("span",{className:"font-medium",children:e.vehicleOwner.name})]}),!u&&n.jsx("div",{className:"text-xs text-destructive mt-2",children:"* Service Contact and Payer are required"})]})]})]})}function Oht(){var b,w;const e=cY(),t=parseInt(e.id||"0");zt();const{toast:r}=Ee(),[s,a]=p.useState(!1),[i,o]=p.useState({billingType:"self",sharePriceWithRequester:!0,shareLocationWithPayer:!0,isGift:!1}),{data:l,isLoading:c}=be({queryKey:["/api/appointments",t],queryFn:async()=>{const N=await fetch(`/api/appointments/${t}`,{credentials:"include"});if(!N.ok)throw new Error("Failed to fetch appointment");return N.json()},enabled:t>0}),{data:d,isLoading:u}=be({queryKey:["/api/appointments",t,"roles"],queryFn:async()=>{const N=await fetch(`/api/appointments/${t}/roles`,{credentials:"include"});if(!N.ok)throw new Error("Failed to fetch roles");return N.json()},enabled:t>0}),{data:f}=be({queryKey:["/api/audit-log","appointment",t],queryFn:async()=>{const N=await fetch(`/api/audit-log/appointment/${t}`,{credentials:"include"});if(!N.ok)throw new Error("Failed to fetch audit log");return N.json()},enabled:t>0}),h=je({mutationFn:async N=>{var S,C,k,M;return(await Ne("POST",`/api/appointments/${t}/assign-roles`,{requesterContactId:(S=N.requester)==null?void 0:S.id,serviceContactId:(C=N.serviceContact)==null?void 0:C.id,vehicleOwnerContactId:(k=N.vehicleOwner)==null?void 0:k.id,billingContactId:(M=N.payer)==null?void 0:M.id,billingType:N.billingType,sharePriceWithRequester:N.sharePriceWithRequester,shareLocationWithPayer:N.shareLocationWithPayer,isGift:N.isGift,giftMessage:N.giftMessage,poNumber:N.poNumber})).json()},onSuccess:()=>{ze.invalidateQueries({queryKey:["/api/appointments",t],exact:!1}),a(!1),r({title:"Roles updated",description:"Contact roles have been successfully updated"})},onError:N=>{r({title:"Error updating roles",description:N.message||"Failed to update roles",variant:"destructive"})}}),m=(l==null?void 0:l.appointment)||l,g=(d==null?void 0:d.roles)||{},x=()=>{o({requester:g.requester||null,serviceContact:g.serviceContact||null,vehicleOwner:g.vehicleOwner||null,payer:g.billing||null,billingType:(m==null?void 0:m.billingType)||"self",sharePriceWithRequester:(m==null?void 0:m.sharePriceWithRequester)??!0,shareLocationWithPayer:(m==null?void 0:m.shareLocationWithPayer)??!0,isGift:(m==null?void 0:m.isGift)??!1,giftMessage:m==null?void 0:m.giftMessage,poNumber:m==null?void 0:m.poNumber}),a(!0)},y=()=>{h.mutate(i)};if(c||u)return n.jsx(xn,{title:"Job Editor",children:n.jsx("div",{className:"p-6",children:n.jsx("div",{className:"flex items-center justify-center h-96",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"Loading appointment..."})]})})})});if(!m)return n.jsx(xn,{title:"Job Editor",children:n.jsx("div",{className:"p-6",children:n.jsxs(Ln,{variant:"destructive",children:[n.jsx(Wt,{className:"h-4 w-4"}),n.jsx(Dn,{children:"Appointment not found. Please check the ID and try again."})]})})});const v=n.jsxs(n.Fragment,{children:[n.jsx(ge,{variant:m.status==="confirmed"?"default":"secondary",className:"text-sm",children:m.status}),m.priceLocked&&n.jsxs(ge,{variant:"outline",className:"text-sm",children:[n.jsx(Ar,{className:"h-3 w-3 mr-1"}),"Price Locked"]}),m.isGift&&n.jsxs(ge,{variant:"outline",className:"text-sm bg-pink-50 text-pink-700 border-pink-200",children:[n.jsx(jr,{className:"h-3 w-3 mr-1"}),"Gift"]})]});return n.jsx(xn,{title:`Job Editor - Appointment #${t}`,pageActions:v,children:n.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[n.jsxs(O,{children:[n.jsx(ee,{children:n.jsx(te,{children:"Appointment Details"})}),n.jsx(H,{className:"space-y-4",children:n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Service"}),n.jsx("p",{className:"font-medium",children:m.serviceType})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Scheduled"}),n.jsx("p",{className:"font-medium",children:new Date(m.scheduledTime).toLocaleString()})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Estimated Price"}),n.jsxs("p",{className:"font-medium",children:["$",((b=m.estimatedPrice)==null?void 0:b.toFixed(2))||"0.00"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Billing Type"}),n.jsx(ge,{variant:"outline",children:m.billingType||"self"})]})]})})]}),n.jsxs(O,{children:[n.jsxs(ee,{className:"flex flex-row items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(te,{children:"Contact Roles"}),n.jsx(ke,{children:"People involved in this appointment"})]}),n.jsxs(_,{variant:"outline",size:"sm",onClick:x,"data-testid":"button-edit-roles",children:[n.jsx(No,{className:"h-4 w-4 mr-2"}),"Edit Roles"]})]}),n.jsx(H,{children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(Qb,{icon:n.jsx(bt,{className:"h-5 w-5"}),title:"Service Contact",subtitle:"Present during service",contact:g.serviceContact,required:!0}),n.jsx(Qb,{icon:n.jsx(yf,{className:"h-5 w-5"}),title:"Payer",subtitle:"Responsible for payment",contact:g.billing,required:!0,badge:m.depositPaid?{text:"Deposit Paid",variant:"default"}:void 0}),g.requester&&n.jsx(Qb,{icon:n.jsx(Fn,{className:"h-5 w-5"}),title:"Requester",subtitle:"Scheduled the appointment",contact:g.requester}),g.vehicleOwner&&n.jsx(Qb,{icon:n.jsx(Ys,{className:"h-5 w-5"}),title:"Vehicle Owner",subtitle:"Owns the vehicle",contact:g.vehicleOwner})]})})]}),n.jsxs(O,{children:[n.jsx(ee,{children:n.jsx(te,{children:"Privacy & Billing Settings"})}),n.jsxs(H,{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"flex items-center gap-3 p-3 border rounded-lg",children:[n.jsx("div",{className:m.sharePriceWithRequester?"text-green-600":"text-muted-foreground",children:n.jsx(Kl,{className:"h-5 w-5"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-medium text-sm",children:"Share Price with Requester"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:m.sharePriceWithRequester?"Enabled":"Disabled"})]})]}),n.jsxs("div",{className:"flex items-center gap-3 p-3 border rounded-lg",children:[n.jsx("div",{className:m.shareLocationWithPayer?"text-green-600":"text-muted-foreground",children:n.jsx(Kl,{className:"h-5 w-5"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-medium text-sm",children:"Share Location with Payer"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:m.shareLocationWithPayer?"Enabled":"Disabled"})]})]}),m.depositPercent&&n.jsxs("div",{className:"flex items-center gap-3 p-3 border rounded-lg",children:[n.jsx("div",{className:"text-blue-600",children:n.jsx(Ar,{className:"h-5 w-5"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-medium text-sm",children:"Deposit Required"}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:[m.depositPercent,"% ($",((w=m.depositAmount)==null?void 0:w.toFixed(2))||"0.00",")"]})]}),m.depositPaid&&n.jsx(nn,{className:"h-5 w-5 text-green-600"})]}),m.poNumber&&n.jsxs("div",{className:"flex items-center gap-3 p-3 border rounded-lg",children:[n.jsx("div",{className:"text-purple-600",children:n.jsx(bs,{className:"h-5 w-5"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-medium text-sm",children:"Purchase Order"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:m.poNumber})]})]})]}),m.isGift&&m.giftMessage&&n.jsx("div",{className:"p-4 bg-pink-50 border border-pink-200 rounded-lg",children:n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(jr,{className:"h-5 w-5 text-pink-600 mt-0.5"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-sm text-pink-900",children:"Gift Message"}),n.jsx("p",{className:"text-sm text-pink-700 mt-1",children:m.giftMessage})]})]})})]})]})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs(O,{children:[n.jsx(ee,{children:n.jsx(te,{children:"Quick Actions"})}),n.jsxs(H,{className:"space-y-2",children:[n.jsxs(_,{variant:"outline",className:"w-full justify-start","data-testid":"button-send-approval",children:[n.jsx(Vi,{className:"h-4 w-4 mr-2"}),"Send Payer Approval"]}),n.jsxs(_,{variant:"outline",className:"w-full justify-start","data-testid":"button-create-payment-link",children:[n.jsx(yf,{className:"h-4 w-4 mr-2"}),"Create Payment Link"]}),n.jsxs(_,{variant:"outline",className:"w-full justify-start","data-testid":"button-view-history",children:[n.jsx(Rt,{className:"h-4 w-4 mr-2"}),"View Full History"]})]})]}),n.jsxs(O,{children:[n.jsxs(ee,{children:[n.jsx(te,{children:"Recent Activity"}),n.jsx(ke,{children:"Last 10 actions"})]}),n.jsx(H,{children:f!=null&&f.history&&f.history.length>0?n.jsx("div",{className:"space-y-4",children:f.history.slice(0,10).map(N=>n.jsxs("div",{className:"flex gap-3",children:[n.jsx("div",{className:"flex-shrink-0 w-2 h-2 mt-2 rounded-full bg-primary"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm font-medium",children:Rht(N.actionType)}),n.jsx("p",{className:"text-xs text-muted-foreground",children:bu(new Date(N.timestamp),{addSuffix:!0})})]})]},N.id))}):n.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No activity recorded yet"})})]})]})]}),n.jsx(At,{open:s,onOpenChange:a,children:n.jsxs(_t,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[n.jsxs($t,{children:[n.jsx(Et,{children:"Edit Contact Roles"}),n.jsx(an,{children:"Assign contacts to different roles and configure billing settings"})]}),n.jsx($ht,{value:i,onChange:o}),n.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[n.jsx(_,{variant:"outline",onClick:()=>a(!1),"data-testid":"button-cancel-role-edit",children:"Cancel"}),n.jsx(_,{onClick:y,disabled:h.isPending||!i.serviceContact||!i.payer,"data-testid":"button-save-roles",children:h.isPending?"Saving...":"Save Changes"})]})]})})]})})}function Qb({icon:e,title:t,subtitle:r,contact:s,required:a=!1,badge:i}){return n.jsxs("div",{className:"p-4 border rounded-lg bg-card","data-testid":`role-tile-${t.toLowerCase().replace(/\s+/g,"-")}`,children:[n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"text-muted-foreground",children:e}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium text-sm",children:t}),n.jsx("p",{className:"text-xs text-muted-foreground",children:r})]})]}),a&&!s&&n.jsx(ge,{variant:"destructive",className:"text-xs",children:"Required"}),i&&n.jsx(ge,{variant:i.variant,className:"text-xs",children:i.text})]}),s?n.jsxs("div",{className:"space-y-1",children:[n.jsx("p",{className:"font-medium",children:s.name}),n.jsxs("div",{className:"flex flex-col gap-0.5 text-xs text-muted-foreground",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(bt,{className:"h-3 w-3"}),n.jsx("span",{children:s.phone})]}),s.email&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Cr,{className:"h-3 w-3"}),n.jsx("span",{className:"truncate",children:s.email})]}),s.company&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(qN,{className:"h-3 w-3"}),n.jsx("span",{className:"truncate",children:s.company})]})]}),s.smsOptOut&&n.jsx(ge,{variant:"destructive",className:"text-xs mt-2",children:"SMS Opted Out"})]}):n.jsx("p",{className:"text-sm text-muted-foreground italic",children:"Not assigned"})]})}function Rht(e){return e.replace(/_/g," ").split(" ").map(r=>r.charAt(0).toUpperCase()+r.slice(1)).join(" ")}function Fht(){const{toast:e}=Ee(),[t,r]=p.useState("pending"),[s,a]=p.useState(null),[i,o]=p.useState(""),[l,c]=p.useState(""),[d,u]=p.useState(!1),{data:f,isLoading:h}=be({queryKey:["/api/quote-requests"]}),{data:m,isLoading:g}=be({queryKey:["/api/quote-requests/pending"]}),{data:x,isLoading:y}=be({queryKey:["/api/quote-requests",s==null?void 0:s.id,"suggestions"],enabled:!!s}),v=je({mutationFn:async()=>{if(!s)throw new Error("No quote selected");const k=parseFloat(i);if(isNaN(k)||k<=0)throw new Error("Invalid quote amount");return await Ne("POST",`/api/quote-requests/${s.id}/quote`,{customQuoteAmount:k,quoteNotes:l.trim()||null})},onSuccess:()=>{e({title:"Quote Sent",description:"The custom quote has been sent to the customer for approval."}),ze.invalidateQueries({queryKey:["/api/quote-requests"]}),ze.invalidateQueries({queryKey:["/api/quote-requests/pending"]}),a(null),o(""),c("")},onError:k=>{e({title:"Error",description:k.message||"Failed to submit quote",variant:"destructive"})}}),b=k=>{var M;a(k),o(((M=k.customQuoteAmount)==null?void 0:M.toString())||""),c(k.quoteNotes||"")},w=async()=>{u(!0);try{await v.mutateAsync()}finally{u(!1)}},N=k=>{switch(k){case"pending_review":return"bg-yellow-500";case"quoted":return"bg-blue-500";case"approved":return"bg-green-500";case"declined":return"bg-red-500";case"completed":return"bg-purple-500";default:return"bg-gray-500"}},j=k=>{switch(k){case"pending_review":return n.jsx(Rt,{className:"w-4 h-4"});case"quoted":return n.jsx(bs,{className:"w-4 h-4"});case"approved":return n.jsx(nn,{className:"w-4 h-4"});case"declined":return n.jsx(Ws,{className:"w-4 h-4"});case"completed":return n.jsx(nn,{className:"w-4 h-4"});default:return null}},S=(m==null?void 0:m.quotes)||[],C=(f==null?void 0:f.quotes)||[];return n.jsxs(xn,{title:"Specialty Quote Requests",children:[n.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[n.jsx("p",{className:"text-muted-foreground mb-6",children:"Review and price specialty jobs requiring custom quotes"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[n.jsxs(O,{children:[n.jsx(ee,{className:"pb-3",children:n.jsx(te,{className:"text-sm font-medium text-muted-foreground",children:"Pending Review"})}),n.jsx(H,{children:n.jsx("div",{className:"text-2xl font-bold","data-testid":"stat-pending",children:S.length})})]}),n.jsxs(O,{children:[n.jsx(ee,{className:"pb-3",children:n.jsx(te,{className:"text-sm font-medium text-muted-foreground",children:"Awaiting Approval"})}),n.jsx(H,{children:n.jsx("div",{className:"text-2xl font-bold","data-testid":"stat-quoted",children:C.filter(k=>k.status==="quoted").length})})]}),n.jsxs(O,{children:[n.jsx(ee,{className:"pb-3",children:n.jsx(te,{className:"text-sm font-medium text-muted-foreground",children:"Approved"})}),n.jsx(H,{children:n.jsx("div",{className:"text-2xl font-bold","data-testid":"stat-approved",children:C.filter(k=>k.status==="approved").length})})]}),n.jsxs(O,{children:[n.jsx(ee,{className:"pb-3",children:n.jsx(te,{className:"text-sm font-medium text-muted-foreground",children:"Completed"})}),n.jsx(H,{children:n.jsx("div",{className:"text-2xl font-bold","data-testid":"stat-completed",children:C.filter(k=>k.status==="completed").length})})]})]}),n.jsxs(js,{value:t,onValueChange:r,children:[n.jsxs(ds,{className:"mb-4",children:[n.jsxs(dt,{value:"pending","data-testid":"tab-pending",children:["Pending Review (",S.length,")"]}),n.jsxs(dt,{value:"all","data-testid":"tab-all",children:["All Quotes (",C.length,")"]})]}),n.jsx(pt,{value:"pending",children:g?n.jsx(O,{children:n.jsx(H,{className:"p-8",children:n.jsx("p",{className:"text-center text-muted-foreground",children:"Loading pending quotes..."})})}):S.length===0?n.jsx(O,{children:n.jsx(H,{className:"p-8",children:n.jsx("p",{className:"text-center text-muted-foreground",children:"No pending quotes to review"})})}):n.jsx("div",{className:"grid grid-cols-1 gap-4",children:S.map(k=>n.jsxs(O,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:()=>b(k),"data-testid":`quote-card-${k.id}`,children:[n.jsx(ee,{children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs(te,{className:"flex items-center gap-2",children:[n.jsx(Fn,{className:"w-5 h-5"}),k.customerName]}),n.jsx(ke,{className:"mt-1",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(bt,{className:"w-4 h-4"}),k.phone]})})]}),n.jsx(ge,{className:N(k.status),children:n.jsxs("div",{className:"flex items-center gap-1",children:[j(k.status),k.status.replace("_"," ")]})})]})}),n.jsx(H,{children:n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium mb-1",children:"Damage Type"}),n.jsx(ge,{variant:"outline",children:k.damageType})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium mb-1",children:"Description"}),n.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:k.issueDescription})]}),k.photoUrls.length>0&&n.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[n.jsx($i,{className:"w-4 h-4"}),k.photoUrls.length," photo",k.photoUrls.length!==1?"s":""," attached"]}),k.thirdPartyPayerName&&n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ya,{className:"w-4 h-4 text-orange-500"}),n.jsxs("p",{className:"text-sm text-orange-600 dark:text-orange-400",children:["Third-party payer: ",k.thirdPartyPayerName]})]}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:["Submitted ",Ie(new Date(k.createdAt),"MMM d, yyyy 'at' h:mm a")]})]})})]},k.id))})}),n.jsx(pt,{value:"all",children:h?n.jsx(O,{children:n.jsx(H,{className:"p-8",children:n.jsx("p",{className:"text-center text-muted-foreground",children:"Loading all quotes..."})})}):C.length===0?n.jsx(O,{children:n.jsx(H,{className:"p-8",children:n.jsx("p",{className:"text-center text-muted-foreground",children:"No quotes found"})})}):n.jsx("div",{className:"grid grid-cols-1 gap-4",children:C.map(k=>n.jsxs(O,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:()=>b(k),"data-testid":`quote-card-${k.id}`,children:[n.jsx(ee,{children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs(te,{className:"flex items-center gap-2",children:[n.jsx(Fn,{className:"w-5 h-5"}),k.customerName]}),n.jsx(ke,{className:"mt-1",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(bt,{className:"w-4 h-4"}),k.phone]})})]}),n.jsx(ge,{className:N(k.status),children:n.jsxs("div",{className:"flex items-center gap-1",children:[j(k.status),k.status.replace("_"," ")]})})]})}),n.jsx(H,{children:n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium mb-1",children:"Damage Type"}),n.jsx(ge,{variant:"outline",children:k.damageType})]}),k.customQuoteAmount&&n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ar,{className:"w-4 h-4 text-green-600 dark:text-green-400"}),n.jsxs("p",{className:"text-lg font-semibold text-green-600 dark:text-green-400",children:["$",k.customQuoteAmount.toFixed(2)]})]}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:["Submitted ",Ie(new Date(k.createdAt),"MMM d, yyyy 'at' h:mm a")]})]})})]},k.id))})})]})]}),n.jsx(At,{open:!!s,onOpenChange:k=>!k&&a(null),children:n.jsxs(_t,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[n.jsxs($t,{children:[n.jsxs(Et,{className:"flex items-center gap-2",children:[n.jsx(bs,{className:"w-5 h-5"}),"Quote Request Details"]}),n.jsx(an,{children:"Review the job details and provide a custom quote"})]}),s&&n.jsxs("div",{className:"space-y-6 py-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold mb-3",children:"Customer Information"}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Name"}),n.jsx("p",{className:"font-medium",children:s.customerName})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Phone"}),n.jsx("p",{className:"font-medium",children:s.phone})]})]})]}),n.jsx(Ot,{}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold mb-3",children:"Job Details"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Damage Type"}),n.jsx(ge,{variant:"outline",className:"text-base px-3 py-1",children:s.damageType})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Description"}),n.jsx("p",{className:"text-sm bg-muted p-3 rounded-md",children:s.issueDescription})]})]})]}),s.photoUrls.length>0&&n.jsxs(n.Fragment,{children:[n.jsx(Ot,{}),n.jsxs("div",{children:[n.jsxs("h3",{className:"font-semibold mb-3 flex items-center gap-2",children:[n.jsx($i,{className:"w-5 h-5"}),"Photos (",s.photoUrls.length,")"]}),n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:s.photoUrls.map((k,M)=>n.jsx("a",{href:k,target:"_blank",rel:"noopener noreferrer",className:"block aspect-square rounded-lg overflow-hidden bg-muted hover:opacity-75 transition-opacity","data-testid":`photo-${M}`,children:n.jsx("img",{src:k,alt:`Damage photo ${M+1}`,className:"w-full h-full object-cover"})},M))})]})]}),s.thirdPartyPayerName&&n.jsxs(n.Fragment,{children:[n.jsx(Ot,{}),n.jsxs("div",{className:"bg-orange-50 dark:bg-orange-950/20 p-4 rounded-lg",children:[n.jsxs("h3",{className:"font-semibold mb-3 flex items-center gap-2",children:[n.jsx(Ya,{className:"w-5 h-5 text-orange-600"}),"Third-Party Payer"]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Name"}),n.jsx("p",{className:"font-medium",children:s.thirdPartyPayerName})]}),s.thirdPartyPayerEmail&&n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Email"}),n.jsx("p",{className:"font-medium",children:s.thirdPartyPayerEmail})]}),s.thirdPartyPayerPhone&&n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Phone"}),n.jsx("p",{className:"font-medium",children:s.thirdPartyPayerPhone})]}),s.poNumber&&n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"PO Number"}),n.jsx("p",{className:"font-medium",children:s.poNumber})]})]})]})]}),n.jsx(Ot,{}),n.jsxs("div",{children:[n.jsxs("h3",{className:"font-semibold mb-3 flex items-center gap-2",children:[n.jsx(ya,{className:"w-5 h-5"}),"AI Pricing Suggestions"]}),y?n.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading pricing data..."}):x!=null&&x.suggestions?n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[n.jsxs(O,{children:[n.jsx(ee,{className:"pb-2",children:n.jsx(te,{className:"text-sm font-medium text-muted-foreground",children:"Minimum"})}),n.jsx(H,{children:n.jsx("p",{className:"text-2xl font-bold",children:x.suggestions.minPrice?`$${x.suggestions.minPrice.toFixed(2)}`:"N/A"})})]}),n.jsxs(O,{children:[n.jsx(ee,{className:"pb-2",children:n.jsx(te,{className:"text-sm font-medium text-muted-foreground",children:"Average"})}),n.jsx(H,{children:n.jsx("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:x.suggestions.avgPrice?`$${x.suggestions.avgPrice.toFixed(2)}`:"N/A"})})]}),n.jsxs(O,{children:[n.jsx(ee,{className:"pb-2",children:n.jsx(te,{className:"text-sm font-medium text-muted-foreground",children:"Maximum"})}),n.jsx(H,{children:n.jsx("p",{className:"text-2xl font-bold",children:x.suggestions.maxPrice?`$${x.suggestions.maxPrice.toFixed(2)}`:"N/A"})})]})]}),x.suggestions.avgTimeSpent&&n.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[n.jsx(Rt,{className:"w-4 h-4"}),n.jsxs("span",{children:["Average time: ",x.suggestions.avgTimeSpent," hours"]})]}),x.suggestions.similarJobs.length>0&&n.jsxs("div",{className:"mt-4",children:[n.jsx("p",{className:"text-sm font-medium mb-2",children:"Similar Jobs"}),n.jsx(ia,{className:"h-48",children:n.jsx("div",{className:"space-y-2",children:x.suggestions.similarJobs.map(k=>n.jsx(O,{children:n.jsxs(H,{className:"p-3",children:[n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsx("p",{className:"text-sm text-muted-foreground flex-1 line-clamp-2",children:k.issueDescription}),n.jsxs("p",{className:"text-sm font-semibold ml-2",children:["$",k.customQuoteAmount.toFixed(2)]})]}),k.actualTimeSpent&&n.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Time: ",k.actualTimeSpent,"h | Difficulty: ",k.difficultyRating,"/5"]})]})},k.id))})})]})]}):n.jsx("p",{className:"text-sm text-muted-foreground",children:"No similar jobs found for pricing reference"})]}),s.status==="pending_review"&&n.jsxs(n.Fragment,{children:[n.jsx(Ot,{}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold mb-3",children:"Submit Custom Quote"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(U,{htmlFor:"quote-amount",children:"Quote Amount ($)"}),n.jsx(se,{id:"quote-amount",type:"number",step:"0.01",min:"0",placeholder:"Enter quote amount",value:i,onChange:k=>o(k.target.value),"data-testid":"input-quote-amount"})]}),n.jsxs("div",{children:[n.jsx(U,{htmlFor:"quote-notes",children:"Notes (optional)"}),n.jsx(un,{id:"quote-notes",placeholder:"Add any notes or special instructions...",value:l,onChange:k=>c(k.target.value),rows:4,"data-testid":"input-quote-notes"})]}),n.jsx(_,{onClick:w,disabled:d||!i||parseFloat(i)<=0,className:"w-full","data-testid":"button-submit-quote",children:d?"Submitting...":"Send Quote to Customer"})]})]})]}),s.status!=="pending_review"&&n.jsxs(n.Fragment,{children:[n.jsx(Ot,{}),n.jsxs("div",{className:"bg-muted p-4 rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[j(s.status),n.jsxs("h3",{className:"font-semibold",children:["Status: ",s.status.replace("_"," ")]})]}),s.customQuoteAmount&&n.jsxs("p",{className:"text-sm mb-1",children:["Quote Amount: ",n.jsxs("span",{className:"font-semibold",children:["$",s.customQuoteAmount.toFixed(2)]})]}),s.quoteNotes&&n.jsxs("p",{className:"text-sm text-muted-foreground",children:["Notes: ",s.quoteNotes]})]})]})]})]})})]})}function zht(){var b;const{toast:e}=Ee(),[t,r]=p.useState(null),[s,a]=p.useState(!1),[i,o]=p.useState(""),[l,c]=p.useState(""),{data:d,isLoading:u}=be({queryKey:["/api/admin/applications"]}),f=(d==null?void 0:d.applications)||[],h=je({mutationFn:async({id:w,status:N,notes:j})=>await Ne(`/api/admin/applications/${w}`,"PUT",{status:N,notes:j}),onSuccess:()=>{e({title:"Updated!",description:"Application status saved"}),ze.invalidateQueries({queryKey:["/api/admin/applications"]}),a(!1)},onError:w=>{e({title:"Error",description:w.message,variant:"destructive"})}}),m=w=>{r(w),o(w.status),c(w.notes||""),a(!0)},g=()=>{t&&h.mutate({id:t.id,status:i,notes:l})},x=w=>{switch(w){case"new":return"bg-blue-100 text-blue-800";case"reviewing":return"bg-yellow-100 text-yellow-800";case"interviewing":return"bg-purple-100 text-purple-800";case"rejected":return"bg-red-100 text-red-800";case"hired":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},y=(w,N)=>N==="all"?w:w.filter(j=>j.status===N),v={all:f.length,new:f.filter(w=>w.status==="new").length,reviewing:f.filter(w=>w.status==="reviewing").length,interviewing:f.filter(w=>w.status==="interviewing").length,rejected:f.filter(w=>w.status==="rejected").length,hired:f.filter(w=>w.status==="hired").length};return n.jsx(xn,{title:"Job Applications",children:n.jsxs("div",{className:"p-6",children:[n.jsxs(js,{defaultValue:"all",children:[n.jsxs(ds,{className:"grid grid-cols-3 sm:grid-cols-6 w-full",children:[n.jsxs(dt,{value:"all",children:["All (",v.all,")"]}),n.jsxs(dt,{value:"new",children:["New (",v.new,")"]}),n.jsxs(dt,{value:"reviewing",children:["Reviewing (",v.reviewing,")"]}),n.jsxs(dt,{value:"interviewing",children:["Interviewing (",v.interviewing,")"]}),n.jsxs(dt,{value:"rejected",children:["Rejected (",v.rejected,")"]}),n.jsxs(dt,{value:"hired",children:["Hired (",v.hired,")"]})]}),["all","new","reviewing","interviewing","rejected","hired"].map(w=>n.jsx(pt,{value:w,className:"mt-6",children:u?n.jsx("div",{className:"text-center py-8",children:"Loading applications..."}):y(f,w).length===0?n.jsx(O,{className:"p-8 text-center",children:n.jsx("p",{className:"text-muted-foreground",children:"No applications in this category"})}):n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:y(f,w).map(N=>{var j;return n.jsxs(O,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>m(N),"data-testid":`card-application-${N.id}`,children:[n.jsx(ee,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs(te,{className:"text-lg",children:[N.firstName," ",N.lastName]}),n.jsx(ge,{className:x(N.status),children:N.status})]})}),n.jsxs(H,{className:"space-y-2 text-sm",children:[n.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[n.jsx(Np,{className:"w-4 h-4"}),((j=N.jobPosting)==null?void 0:j.title)||"N/A"]}),n.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[n.jsx(Cr,{className:"w-4 h-4"}),N.email]}),n.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[n.jsx(Dt,{className:"w-4 h-4"}),new Date(N.submittedAt).toLocaleDateString()]})]})]},N.id)})})},w))]}),n.jsx(At,{open:s,onOpenChange:a,children:n.jsxs(_t,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[n.jsx($t,{children:n.jsxs(Et,{children:[t==null?void 0:t.firstName," ",t==null?void 0:t.lastName]})}),t&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx(U,{className:"text-muted-foreground",children:"Position"}),n.jsx("p",{className:"font-semibold",children:((b=t.jobPosting)==null?void 0:b.title)||"N/A"})]}),n.jsxs("div",{children:[n.jsx(U,{className:"text-muted-foreground",children:"Applied"}),n.jsx("p",{className:"font-semibold",children:new Date(t.submittedAt).toLocaleDateString()})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx(U,{className:"text-muted-foreground",children:"Email"}),n.jsx("p",{children:t.email})]}),n.jsxs("div",{children:[n.jsx(U,{className:"text-muted-foreground",children:"Phone"}),n.jsx("p",{children:t.phone})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx(U,{className:"text-muted-foreground",children:"Experience"}),n.jsxs("p",{children:[t.yearsExperience||"N/A"," years"]})]}),n.jsxs("div",{children:[n.jsx(U,{className:"text-muted-foreground",children:"Current Company"}),n.jsx("p",{children:t.currentCompany||"N/A"})]})]}),t.resumeUrl&&n.jsxs("div",{children:[n.jsx(U,{className:"text-muted-foreground",children:"Resume"}),n.jsx(_,{variant:"outline",asChild:!0,className:"w-full mt-1",children:n.jsxs("a",{href:t.resumeUrl,target:"_blank",rel:"noopener noreferrer","data-testid":"link-resume",children:[n.jsx(bs,{className:"w-4 h-4 mr-2"}),"View Resume",n.jsx(xa,{className:"w-4 h-4 ml-2"})]})})]}),t.linkedinUrl&&n.jsxs("div",{children:[n.jsx(U,{className:"text-muted-foreground",children:"LinkedIn"}),n.jsx(_,{variant:"outline",asChild:!0,className:"w-full mt-1",children:n.jsxs("a",{href:t.linkedinUrl,target:"_blank",rel:"noopener noreferrer","data-testid":"link-linkedin",children:["LinkedIn Profile",n.jsx(xa,{className:"w-4 h-4 ml-2"})]})})]}),t.portfolioUrl&&n.jsxs("div",{children:[n.jsx(U,{className:"text-muted-foreground",children:"Portfolio"}),n.jsx(_,{variant:"outline",asChild:!0,className:"w-full mt-1",children:n.jsxs("a",{href:t.portfolioUrl,target:"_blank",rel:"noopener noreferrer","data-testid":"link-portfolio",children:["View Portfolio",n.jsx(xa,{className:"w-4 h-4 ml-2"})]})})]}),t.coverLetter&&n.jsxs("div",{children:[n.jsx(U,{className:"text-muted-foreground",children:"Cover Letter"}),n.jsx("div",{className:"mt-1 p-3 bg-muted rounded whitespace-pre-wrap text-sm",children:t.coverLetter})]}),n.jsxs("div",{children:[n.jsx(U,{children:"Status"}),n.jsxs(Pt,{value:i,onValueChange:o,children:[n.jsx(kt,{"data-testid":"select-status",children:n.jsx(Tt,{})}),n.jsxs(Mt,{children:[n.jsx(ve,{value:"new",children:"New"}),n.jsx(ve,{value:"reviewing",children:"Reviewing"}),n.jsx(ve,{value:"interviewing",children:"Interviewing"}),n.jsx(ve,{value:"rejected",children:"Rejected"}),n.jsx(ve,{value:"hired",children:"Hired"})]})]})]}),n.jsxs("div",{children:[n.jsx(U,{children:"Admin Notes"}),n.jsx(un,{value:l,onChange:w=>c(w.target.value),rows:4,placeholder:"Add notes about this candidate...","data-testid":"textarea-notes"})]}),n.jsx(_,{onClick:g,className:"w-full",disabled:h.isPending,"data-testid":"button-save",children:h.isPending?"Saving...":"Save Changes"})]})]})})]})})}const Bht=fe.object({id:fe.string().min(1,"Tenant ID is required").regex(/^[a-z0-9-]+$/,"Only lowercase letters, numbers, and hyphens"),name:fe.string().min(1,"Name is required"),subdomain:fe.string().optional(),businessName:fe.string().min(1,"Business name is required"),logoUrl:fe.string().optional(),primaryColor:fe.string().optional(),tier:fe.enum(["starter","pro","elite"])}),Uht=fe.object({planTier:fe.enum(["starter","pro","elite","internal"]),status:fe.enum(["trialing","active","past_due","suspended","cancelled"])});function Vht(){const{toast:e}=Ee(),[,t]=zt(),[r,s]=p.useState(!1),[a,i]=p.useState(!1),[o,l]=p.useState(null),{data:c,isLoading:d}=be({queryKey:["/api/admin/tenants"]}),u=fi({resolver:hi(Bht),defaultValues:{id:"",name:"",subdomain:"",businessName:"",logoUrl:"",primaryColor:"#3b82f6",tier:"starter"}}),f=je({mutationFn:async C=>await Ne("/api/admin/tenants",{method:"POST",body:JSON.stringify(C),headers:{"Content-Type":"application/json"}}),onSuccess:()=>{ze.invalidateQueries({queryKey:["/api/admin/tenants"]}),e({title:"Success",description:"Tenant created successfully"}),u.reset(),s(!1)},onError:C=>{e({title:"Error",description:C.message||"Failed to create tenant",variant:"destructive"})}}),h=C=>{f.mutate(C)},m=je({mutationFn:async C=>await Ne("/api/admin/impersonate/start",{method:"POST",body:JSON.stringify({tenantId:C}),headers:{"Content-Type":"application/json"}}),onSuccess:C=>{e({title:"Impersonation Active",description:`You are now viewing the app as ${C.tenantName}`}),t("/")},onError:C=>{e({title:"Error",description:C.message||"Failed to start impersonation",variant:"destructive"})}}),g=(C,k)=>{k.stopPropagation(),m.mutate(C)},x=fi({resolver:hi(Uht),defaultValues:{planTier:"starter",status:"trialing"}}),y=je({mutationFn:async({tenantId:C,data:k})=>await Ne(`/api/admin/tenants/${C}/plan`,{method:"PATCH",body:JSON.stringify(k),headers:{"Content-Type":"application/json"}}),onSuccess:()=>{ze.invalidateQueries({queryKey:["/api/admin/tenants"]}),e({title:"Success",description:"Plan updated successfully"}),i(!1),l(null)},onError:C=>{e({title:"Error",description:C.message||"Failed to update plan",variant:"destructive"})}}),v=(C,k)=>{k.stopPropagation(),l(C),x.reset({planTier:C.planTier||"starter",status:C.status||"trialing"}),i(!0)},b=C=>{o&&y.mutate({tenantId:o.id,data:C})},w=C=>{const k={starter:"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-300",pro:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300",elite:"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-300",internal:"bg-amber-100 text-amber-800 dark:bg-amber-900 dark:text-amber-300"};return k[C]||k.starter},N=C=>{const k={trialing:"bg-cyan-100 text-cyan-800 dark:bg-cyan-900 dark:text-cyan-300",active:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300",past_due:"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-300",suspended:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300",cancelled:"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-300"};return k[C]||k.trialing},j=C=>({starter:"Starter",pro:"Pro",elite:"Elite",internal:"INTERNAL (at-cost)"})[C]||C,S=C=>({trialing:"Trialing",active:"Active",past_due:"Past Due",suspended:"Suspended",cancelled:"Cancelled"})[C]||C;return n.jsx(xn,{title:"Tenant Management",children:n.jsxs("div",{className:"space-y-6 p-6",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:"Tenant Management"}),n.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Manage all tenants on the ServicePro platform"})]}),n.jsxs(At,{open:r,onOpenChange:s,children:[n.jsx(pl,{asChild:!0,children:n.jsxs(_,{"data-testid":"button-create-tenant",children:[n.jsx(Un,{className:"w-4 h-4 mr-2"}),"Create Tenant"]})}),n.jsxs(_t,{className:"sm:max-w-[500px]",children:[n.jsxs($t,{children:[n.jsx(Et,{children:"Create New Tenant"}),n.jsx(an,{children:"Add a new tenant to the ServicePro platform"})]}),n.jsx(mi,{...u,children:n.jsxs("form",{onSubmit:u.handleSubmit(h),className:"space-y-4",children:[n.jsx(Ye,{control:u.control,name:"id",render:({field:C})=>n.jsxs(We,{children:[n.jsx(qe,{children:"Tenant ID"}),n.jsx(Qe,{children:n.jsx(se,{...C,placeholder:"e.g., acme-auto","data-testid":"input-tenant-id"})}),n.jsx(Ze,{})]})}),n.jsx(Ye,{control:u.control,name:"name",render:({field:C})=>n.jsxs(We,{children:[n.jsx(qe,{children:"Internal Name"}),n.jsx(Qe,{children:n.jsx(se,{...C,placeholder:"e.g., Acme Auto Detail","data-testid":"input-tenant-name"})}),n.jsx(Ze,{})]})}),n.jsx(Ye,{control:u.control,name:"businessName",render:({field:C})=>n.jsxs(We,{children:[n.jsx(qe,{children:"Business Name"}),n.jsx(Qe,{children:n.jsx(se,{...C,placeholder:"e.g., Acme Auto Detailing","data-testid":"input-business-name"})}),n.jsx(Ze,{})]})}),n.jsx(Ye,{control:u.control,name:"subdomain",render:({field:C})=>n.jsxs(We,{children:[n.jsx(qe,{children:"Subdomain (Optional)"}),n.jsx(Qe,{children:n.jsx(se,{...C,placeholder:"e.g., acme","data-testid":"input-subdomain"})}),n.jsx(Ze,{})]})}),n.jsx(Ye,{control:u.control,name:"tier",render:({field:C})=>n.jsxs(We,{children:[n.jsx(qe,{children:"Subscription Tier"}),n.jsxs(Pt,{onValueChange:C.onChange,defaultValue:C.value,children:[n.jsx(Qe,{children:n.jsx(kt,{"data-testid":"select-tier",children:n.jsx(Tt,{placeholder:"Select tier"})})}),n.jsxs(Mt,{children:[n.jsx(ve,{value:"starter",children:"Starter"}),n.jsx(ve,{value:"pro",children:"Professional"}),n.jsx(ve,{value:"elite",children:"Elite"})]})]}),n.jsx(Ze,{})]})}),n.jsx(Ye,{control:u.control,name:"primaryColor",render:({field:C})=>n.jsxs(We,{children:[n.jsx(qe,{children:"Primary Color"}),n.jsx(Qe,{children:n.jsx(se,{...C,type:"color","data-testid":"input-primary-color"})}),n.jsx(Ze,{})]})}),n.jsxs(Sn,{children:[n.jsx(_,{type:"button",variant:"outline",onClick:()=>s(!1),"data-testid":"button-cancel",children:"Cancel"}),n.jsx(_,{type:"submit",disabled:f.isPending,"data-testid":"button-submit",children:f.isPending?"Creating...":"Create Tenant"})]})]})})]})]}),n.jsx(At,{open:a,onOpenChange:i,children:n.jsxs(_t,{className:"sm:max-w-[425px]",children:[n.jsxs($t,{children:[n.jsx(Et,{children:"Edit Plan & Status"}),n.jsxs(an,{children:["Update the plan tier and status for ",o==null?void 0:o.name]})]}),n.jsx(mi,{...x,children:n.jsxs("form",{onSubmit:x.handleSubmit(b),className:"space-y-4",children:[n.jsx(Ye,{control:x.control,name:"planTier",render:({field:C})=>n.jsxs(We,{children:[n.jsx(qe,{children:"Plan Tier"}),n.jsxs(Pt,{onValueChange:C.onChange,value:C.value,children:[n.jsx(Qe,{children:n.jsx(kt,{"data-testid":"select-plan-tier",children:n.jsx(Tt,{placeholder:"Select plan tier"})})}),n.jsxs(Mt,{children:[n.jsx(ve,{value:"starter",children:"Starter"}),n.jsx(ve,{value:"pro",children:"Pro"}),n.jsx(ve,{value:"elite",children:"Elite"}),n.jsx(ve,{value:"internal",children:"Internal (at-cost)"})]})]}),n.jsx(Ze,{})]})}),n.jsx(Ye,{control:x.control,name:"status",render:({field:C})=>n.jsxs(We,{children:[n.jsx(qe,{children:"Status"}),n.jsxs(Pt,{onValueChange:C.onChange,value:C.value,children:[n.jsx(Qe,{children:n.jsx(kt,{"data-testid":"select-status",children:n.jsx(Tt,{placeholder:"Select status"})})}),n.jsxs(Mt,{children:[n.jsx(ve,{value:"trialing",children:"Trialing"}),n.jsx(ve,{value:"active",children:"Active"}),n.jsx(ve,{value:"past_due",children:"Past Due"}),n.jsx(ve,{value:"suspended",children:"Suspended"}),n.jsx(ve,{value:"cancelled",children:"Cancelled"})]})]}),n.jsx(Ze,{})]})}),n.jsxs(Sn,{children:[n.jsx(_,{type:"button",variant:"outline",onClick:()=>i(!1),"data-testid":"button-cancel-edit-plan",children:"Cancel"}),n.jsx(_,{type:"submit",disabled:y.isPending,"data-testid":"button-save-plan",children:y.isPending?"Saving...":"Save Changes"})]})]})})]})})]}),d?n.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[1,2,3].map(C=>n.jsxs(O,{className:"p-6 animate-pulse",children:[n.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-700 rounded w-3/4 mb-4"}),n.jsx("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded w-1/2"})]},C))}):n.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:c==null?void 0:c.tenants.map(C=>n.jsxs(O,{className:"p-6 hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>t(`/admin/tenants/${C.id}`),"data-testid":`card-tenant-${C.id}`,children:[n.jsx("div",{className:"flex items-start justify-between mb-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-2 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:C.isRoot?n.jsx(zn,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"}):n.jsx(Of,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),n.jsxs("div",{children:[n.jsxs("h3",{className:"font-semibold text-gray-900 dark:text-gray-100 flex items-center gap-2",children:[C.name,C.isRoot&&n.jsx("span",{className:"text-xs px-2 py-0.5 bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300 rounded",children:"ROOT"})]}),n.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:C.businessName||"No business name"})]})]})}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between text-sm",children:[n.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Tenant ID:"}),n.jsx("code",{className:"text-xs bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded",children:C.id})]}),C.subdomain&&n.jsxs("div",{className:"flex items-center justify-between text-sm",children:[n.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Subdomain:"}),n.jsx("span",{className:"text-gray-900 dark:text-gray-100",children:C.subdomain})]}),n.jsxs("div",{className:"flex items-center justify-between text-sm",children:[n.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Plan:"}),n.jsx("span",{className:`text-xs px-2 py-1 rounded font-medium ${w(C.planTier||"starter")}`,children:j(C.planTier||"starter")})]}),n.jsxs("div",{className:"flex items-center justify-between text-sm",children:[n.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Status:"}),n.jsx("span",{className:`text-xs px-2 py-1 rounded font-medium ${N(C.status||"trialing")}`,children:S(C.status||"trialing")})]}),n.jsxs("div",{className:"flex items-center justify-between text-sm",children:[n.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Created:"}),n.jsx("span",{className:"text-gray-900 dark:text-gray-100",children:new Date(C.createdAt).toLocaleDateString()})]})]}),!C.isRoot&&n.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700 space-y-2",children:[n.jsxs(_,{variant:"outline",size:"sm",className:"w-full",onClick:k=>v(C,k),"data-testid":`edit-plan-${C.id}`,children:[n.jsx(ja,{className:"w-4 h-4 mr-2"}),"Edit Plan"]}),n.jsxs(_,{variant:"outline",size:"sm",className:"w-full",onClick:k=>g(C.id,k),disabled:m.isPending,"data-testid":`impersonate-tenant-${C.id}`,children:[n.jsx(mj,{className:"w-4 h-4 mr-2"}),"Login as Tenant"]})]})]},C.id))}),!d&&(c==null?void 0:c.tenants.length)===0&&n.jsxs(O,{className:"p-12 text-center",children:[n.jsx(Of,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"No tenants yet"}),n.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Get started by creating your first tenant"}),n.jsxs(_,{onClick:()=>s(!0),"data-testid":"button-create-first-tenant",children:[n.jsx(Un,{className:"w-4 h-4 mr-2"}),"Create Tenant"]})]})]})})}const Hht=fe.object({tenantId:fe.string().min(1,"Tenant is required"),phoneNumber:fe.string().regex(/^\+[1-9]\d{1,14}$/,"Phone number must be in E.164 format (e.g., +19185551234)"),ivrMode:fe.enum(["simple","ivr","ai-voice"]),sipDomain:fe.preprocess(e=>!e||typeof e=="string"&&e.trim()===""?null:e,fe.string().nullish()),sipUsername:fe.preprocess(e=>!e||typeof e=="string"&&e.trim()===""?null:e,fe.string().nullish()),messagingServiceSid:fe.preprocess(e=>!e||typeof e=="string"&&e.trim()===""?null:e,fe.string().nullish())}),Wht=fe.object({phoneNumber:fe.string().regex(/^\+[1-9]\d{1,14}$/,"Phone number must be in E.164 format (e.g., +19185551234)"),ivrMode:fe.enum(["simple","ivr","ai-voice"]),sipDomain:fe.preprocess(e=>!e||typeof e=="string"&&e.trim()===""?null:e,fe.string().nullish()),sipUsername:fe.preprocess(e=>!e||typeof e=="string"&&e.trim()===""?null:e,fe.string().nullish()),messagingServiceSid:fe.preprocess(e=>!e||typeof e=="string"&&e.trim()===""?null:e,fe.string().nullish())});function qht(){const{toast:e}=Ee(),[t,r]=p.useState(!1),[s,a]=p.useState(!1),[i,o]=p.useState(null),{data:l,isLoading:c}=be({queryKey:["/api/admin/phone-config"]}),{data:d}=be({queryKey:["/api/admin/phone-config/tenants/list"]}),u=fi({resolver:hi(Hht),defaultValues:{tenantId:"",phoneNumber:"",ivrMode:"simple",sipDomain:"",sipUsername:"",messagingServiceSid:""}}),f=fi({resolver:hi(Wht),defaultValues:{phoneNumber:"",ivrMode:"simple",sipDomain:"",sipUsername:"",messagingServiceSid:""}}),h=je({mutationFn:async j=>await Ne("/api/admin/phone-config",{method:"POST",body:JSON.stringify(j),headers:{"Content-Type":"application/json"}}),onSuccess:()=>{ze.invalidateQueries({queryKey:["/api/admin/phone-config"]}),e({title:"Success",description:"Phone configuration created successfully"}),u.reset(),r(!1)},onError:j=>{e({title:"Error",description:j.message||"Failed to create phone configuration",variant:"destructive"})}}),m=je({mutationFn:async({id:j,data:S})=>await Ne(`/api/admin/phone-config/${j}`,{method:"PATCH",body:JSON.stringify(S),headers:{"Content-Type":"application/json"}}),onSuccess:()=>{ze.invalidateQueries({queryKey:["/api/admin/phone-config"]}),e({title:"Success",description:"Phone configuration updated successfully"}),f.reset(),a(!1),o(null)},onError:j=>{e({title:"Error",description:j.message||"Failed to update phone configuration",variant:"destructive"})}}),g=je({mutationFn:async j=>await Ne(`/api/admin/phone-config/${j}`,{method:"DELETE"}),onSuccess:()=>{ze.invalidateQueries({queryKey:["/api/admin/phone-config"]}),e({title:"Success",description:"Phone configuration deleted successfully"})},onError:j=>{e({title:"Error",description:j.message||"Failed to delete phone configuration",variant:"destructive"})}}),x=j=>{h.mutate(j)},y=j=>{o(j),f.reset({phoneNumber:j.phoneNumber,ivrMode:j.ivrMode,sipDomain:j.sipDomain||"",sipUsername:j.sipUsername||"",messagingServiceSid:j.messagingServiceSid||""}),a(!0)},v=j=>{i&&m.mutate({id:i.id,data:j})},b=j=>{if(j.isRoot){e({title:"Cannot Delete",description:"Cannot delete root tenant phone configuration. This is the flagship business phone number.",variant:"destructive"});return}confirm(`Delete phone configuration for ${j.phoneNumber}? This cannot be undone.`)&&g.mutate(j.id)},w=j=>{switch(j){case"simple":return n.jsx(bt,{className:"h-4 w-4"});case"ivr":return n.jsx(Kv,{className:"h-4 w-4"});case"ai-voice":return n.jsx(yo,{className:"h-4 w-4"});default:return n.jsx(bt,{className:"h-4 w-4"})}},N=j=>{switch(j){case"simple":return n.jsx(ge,{variant:"secondary",children:"Simple Forward"});case"ivr":return n.jsx(ge,{variant:"default",children:"IVR Menu"});case"ai-voice":return n.jsx(ge,{variant:"outline",className:"border-purple-500 text-purple-700 dark:text-purple-400",children:"AI Voice (Beta)"});default:return n.jsx(ge,{variant:"secondary",children:j})}};return n.jsx(xn,{title:"Phone & IVR Settings",children:n.jsxs("div",{className:"space-y-6 p-6",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:"Phone & IVR Settings"}),n.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Manage phone configurations and IVR modes for all tenants"})]}),n.jsxs(At,{open:t,onOpenChange:r,children:[n.jsx(pl,{asChild:!0,children:n.jsxs(_,{"data-testid":"button-create-phone-config",children:[n.jsx(Un,{className:"w-4 h-4 mr-2"}),"Add Phone Config"]})}),n.jsxs(_t,{className:"sm:max-w-[500px]",children:[n.jsxs($t,{children:[n.jsx(Et,{children:"Add Phone Configuration"}),n.jsx(an,{children:"Configure a phone number and IVR mode for a tenant"})]}),n.jsx(mi,{...u,children:n.jsxs("form",{onSubmit:u.handleSubmit(x),className:"space-y-4",children:[n.jsx(Ye,{control:u.control,name:"tenantId",render:({field:j})=>n.jsxs(We,{children:[n.jsx(qe,{children:"Tenant"}),n.jsxs(Pt,{onValueChange:j.onChange,defaultValue:j.value,children:[n.jsx(Qe,{children:n.jsx(kt,{"data-testid":"select-tenant",children:n.jsx(Tt,{placeholder:"Select tenant"})})}),n.jsx(Mt,{children:d==null?void 0:d.tenants.map(S=>n.jsxs(ve,{value:S.id,children:[S.name,S.isRoot&&n.jsx(zn,{className:"inline-block ml-2 h-3 w-3"})]},S.id))})]}),n.jsx(Ze,{})]})}),n.jsx(Ye,{control:u.control,name:"phoneNumber",render:({field:j})=>n.jsxs(We,{children:[n.jsx(qe,{children:"Phone Number"}),n.jsx(Qe,{children:n.jsx(se,{...j,placeholder:"+19185551234","data-testid":"input-phone-number"})}),n.jsx(Ze,{})]})}),n.jsx(Ye,{control:u.control,name:"ivrMode",render:({field:j})=>n.jsxs(We,{children:[n.jsx(qe,{children:"IVR Mode"}),n.jsxs(Pt,{onValueChange:j.onChange,defaultValue:j.value,children:[n.jsx(Qe,{children:n.jsx(kt,{"data-testid":"select-ivr-mode",children:n.jsx(Tt,{})})}),n.jsxs(Mt,{children:[n.jsx(ve,{value:"simple",children:"Simple (Direct Forward)"}),n.jsx(ve,{value:"ivr",children:"IVR (Press 1/2/3/7 Menu)"}),n.jsx(ve,{value:"ai-voice",children:"AI Voice (Beta)"})]})]}),n.jsx(Ze,{})]})}),n.jsx(Ye,{control:u.control,name:"messagingServiceSid",render:({field:j})=>n.jsxs(We,{children:[n.jsx(qe,{children:"Twilio Messaging Service SID (Optional)"}),n.jsx(Qe,{children:n.jsx(se,{...j,placeholder:"MG...","data-testid":"input-messaging-service-sid"})}),n.jsx(Ze,{})]})}),n.jsx(Ye,{control:u.control,name:"sipDomain",render:({field:j})=>n.jsxs(We,{children:[n.jsx(qe,{children:"SIP Domain (Optional)"}),n.jsx(Qe,{children:n.jsx(se,{...j,placeholder:"example.sip.twilio.com","data-testid":"input-sip-domain"})}),n.jsx(Ze,{})]})}),n.jsx(Ye,{control:u.control,name:"sipUsername",render:({field:j})=>n.jsxs(We,{children:[n.jsx(qe,{children:"SIP Username (Optional)"}),n.jsx(Qe,{children:n.jsx(se,{...j,placeholder:"username","data-testid":"input-sip-username"})}),n.jsx(Ze,{})]})}),n.jsx(Sn,{children:n.jsx(_,{type:"submit",disabled:h.isPending,"data-testid":"button-save-create",children:h.isPending?"Creating...":"Create"})})]})})]})]})]}),c?n.jsx("div",{className:"text-center py-12 text-gray-600 dark:text-gray-400",children:"Loading..."}):l!=null&&l.configs.length?n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:l.configs.map(j=>n.jsxs(O,{className:"p-6","data-testid":`card-phone-config-${j.id}`,children:[n.jsx("div",{className:"flex items-start justify-between mb-4",children:n.jsxs("div",{className:"flex items-center gap-2",children:[w(j.ivrMode),n.jsxs("div",{children:[n.jsxs("div",{className:"font-bold text-lg flex items-center gap-2",children:[j.tenantName||j.tenantId,j.isRoot&&n.jsx(zn,{className:"h-4 w-4 text-blue-500","data-testid":`icon-root-${j.id}`})]}),n.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:j.phoneNumber})]})]})}),n.jsxs("div",{className:"space-y-3 mb-4",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Mode"}),N(j.ivrMode)]}),j.sipDomain&&n.jsxs("div",{children:[n.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"SIP Domain"}),n.jsx("div",{className:"text-sm font-mono",children:j.sipDomain})]}),j.sipUsername&&n.jsxs("div",{children:[n.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"SIP Username"}),n.jsx("div",{className:"text-sm font-mono",children:j.sipUsername})]}),j.messagingServiceSid&&n.jsxs("div",{children:[n.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Messaging SID"}),n.jsx("div",{className:"text-sm font-mono truncate",children:j.messagingServiceSid})]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(_,{size:"sm",variant:"outline",className:"flex-1",onClick:()=>y(j),"data-testid":`button-edit-${j.id}`,children:[n.jsx(No,{className:"h-3 w-3 mr-1"}),"Edit"]}),!j.isRoot&&n.jsx(_,{size:"sm",variant:"destructive",onClick:()=>b(j),"data-testid":`button-delete-${j.id}`,children:n.jsx(Nr,{className:"h-3 w-3"})})]})]},j.id))}):n.jsxs(O,{className:"p-12 text-center",children:[n.jsx(bt,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),n.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No phone configurations yet"}),n.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Add a phone configuration to enable calling and IVR for a tenant"}),n.jsx(_,{onClick:()=>r(!0),"data-testid":"button-add-first-config",children:"Add First Config"})]}),n.jsx(At,{open:s,onOpenChange:a,children:n.jsxs(_t,{className:"sm:max-w-[500px]",children:[n.jsxs($t,{children:[n.jsx(Et,{children:"Edit Phone Configuration"}),n.jsxs(an,{children:["Update phone configuration for ",i==null?void 0:i.tenantName]})]}),n.jsx(mi,{...f,children:n.jsxs("form",{onSubmit:f.handleSubmit(v),className:"space-y-4",children:[n.jsx(Ye,{control:f.control,name:"phoneNumber",render:({field:j})=>n.jsxs(We,{children:[n.jsx(qe,{children:"Phone Number"}),n.jsx(Qe,{children:n.jsx(se,{...j,placeholder:"+19185551234","data-testid":"input-edit-phone-number"})}),n.jsx(Ze,{})]})}),n.jsx(Ye,{control:f.control,name:"ivrMode",render:({field:j})=>n.jsxs(We,{children:[n.jsx(qe,{children:"IVR Mode"}),n.jsxs(Pt,{onValueChange:j.onChange,defaultValue:j.value,children:[n.jsx(Qe,{children:n.jsx(kt,{"data-testid":"select-edit-ivr-mode",children:n.jsx(Tt,{})})}),n.jsxs(Mt,{children:[n.jsx(ve,{value:"simple",children:"Simple (Direct Forward)"}),n.jsx(ve,{value:"ivr",children:"IVR (Press 1/2/3/7 Menu)"}),n.jsx(ve,{value:"ai-voice",children:"AI Voice (Beta)"})]})]}),n.jsx(Ze,{})]})}),n.jsx(Ye,{control:f.control,name:"messagingServiceSid",render:({field:j})=>n.jsxs(We,{children:[n.jsx(qe,{children:"Twilio Messaging Service SID"}),n.jsx(Qe,{children:n.jsx(se,{...j,placeholder:"MG...","data-testid":"input-edit-messaging-service-sid"})}),n.jsx(Ze,{})]})}),n.jsx(Ye,{control:f.control,name:"sipDomain",render:({field:j})=>n.jsxs(We,{children:[n.jsx(qe,{children:"SIP Domain"}),n.jsx(Qe,{children:n.jsx(se,{...j,placeholder:"example.sip.twilio.com","data-testid":"input-edit-sip-domain"})}),n.jsx(Ze,{})]})}),n.jsx(Ye,{control:f.control,name:"sipUsername",render:({field:j})=>n.jsxs(We,{children:[n.jsx(qe,{children:"SIP Username"}),n.jsx(Qe,{children:n.jsx(se,{...j,placeholder:"username","data-testid":"input-edit-sip-username"})}),n.jsx(Ze,{})]})}),n.jsx(Sn,{children:n.jsx(_,{type:"submit",disabled:m.isPending,"data-testid":"button-save-edit",children:m.isPending?"Updating...":"Update"})})]})})]})})]})})}const sue=[{id:"auto_detailing",name:"Auto Detailing",shortLabel:"Auto Detailing",description:"Mobile auto detailing and car care services",icon:"",recommendedPlanTier:"pro",services:[{id:"full_detail",name:"Full Detail",category:"Package",priceRange:"$200-$350",defaultPrice:27500,defaultDurationMinutes:240,minDurationHours:3,maxDurationHours:5,overview:"Complete interior and exterior detailing",detailedDescription:"Our signature full detail includes deep cleaning of interior surfaces, shampooing carpets and seats, exterior wash and wax, tire shine, and window cleaning inside and out. Your vehicle will look showroom fresh."},{id:"exterior_detail",name:"Exterior Detail",category:"Exterior",priceRange:"$100-$175",defaultPrice:13500,defaultDurationMinutes:120,minDurationHours:1.5,maxDurationHours:2.5,overview:"Professional exterior wash, wax, and shine",detailedDescription:"Hand wash, clay bar treatment, wax application, tire dressing, and window cleaning. Restores exterior shine and protection."},{id:"interior_detail",name:"Interior Detail",category:"Interior",priceRange:"$125-$200",defaultPrice:16e3,defaultDurationMinutes:150,minDurationHours:2,maxDurationHours:3,overview:"Deep interior cleaning and conditioning",detailedDescription:"Vacuum, shampoo carpets and upholstery, leather conditioning, dashboard cleaning, door jambs, and interior window cleaning."},{id:"ceramic_coating",name:"Ceramic Coating",category:"Premium",priceRange:"$500-$1,200",defaultPrice:8e4,defaultDurationMinutes:480,minDurationHours:6,maxDurationHours:8,overview:"Long-lasting paint protection",detailedDescription:"Multi-year ceramic coating application with paint correction. Provides superior protection against UV, chemicals, and scratches. Hydrophobic finish for easy maintenance."},{id:"headlight_restoration",name:"Headlight Restoration",category:"Add-on",priceRange:"$75-$125",defaultPrice:9500,defaultDurationMinutes:60,isAddon:!0,overview:"Restore cloudy headlights to like-new clarity",detailedDescription:"Professional sanding, polishing, and UV sealing to restore headlight clarity and improve nighttime visibility."}],faqs:[{category:"services",question:"How long does a full detail take?",answer:"A full detail typically takes 3-5 hours depending on the vehicle size and condition. We recommend scheduling a half-day appointment.",keywords:["duration","time","how long","full detail"]},{category:"pricing",question:"Do you charge extra for larger vehicles?",answer:"Yes, SUVs and trucks typically cost 20-30% more than sedans due to the additional surface area and interior space. We provide exact quotes based on your specific vehicle.",keywords:["pricing","cost","suv","truck","large vehicle"]},{category:"policies",question:"What is your cancellation policy?",answer:"We require 24 hours notice for cancellations. Cancellations with less than 24 hours notice may incur a $50 fee.",keywords:["cancel","cancellation","policy","reschedule"]},{category:"location",question:"Do you come to my location?",answer:"Yes! We are a mobile detailing service and come directly to your home or office. All we need is access to water and electricity.",keywords:["mobile","location","come to me","my house"]}],websiteSeed:{heroHeadline:"Premium Mobile Auto Detailing",heroSubheadline:"We come to you. Professional results. Every time.",primaryCtaLabel:"Book Your Detail",secondaryCtaLabel:"View Services",aboutBlurb:"We bring professional auto detailing directly to your driveway. With years of experience and premium products, we make your vehicle look showroom fresh without you leaving home."},aiStyleNotes:{toneDescription:"Professional yet friendly. Focus on convenience, quality, and results.",avoidPhrases:["cheap","discount","basic wash"],preferredTerms:["premium detail","mobile service","professional results","showroom finish"]}},{id:"lawn_care",name:"Lawn Care",shortLabel:"Lawn Care",description:"Lawn mowing, landscaping, and yard maintenance",icon:"",recommendedPlanTier:"starter",services:[{id:"weekly_mowing",name:"Weekly Mowing",category:"Maintenance",priceRange:"$35-$75",defaultPrice:5e3,defaultDurationMinutes:45,minDurationHours:.5,maxDurationHours:1.5,overview:"Regular lawn mowing and trimming",detailedDescription:"Weekly mowing, edging, and blowing. Includes trimming around obstacles and cleanup. Keep your lawn looking great all season."},{id:"spring_cleanup",name:"Spring Cleanup",category:"Seasonal",priceRange:"$150-$300",defaultPrice:2e4,defaultDurationMinutes:240,minDurationHours:3,maxDurationHours:5,overview:"Complete spring yard preparation",detailedDescription:"Rake and remove winter debris, edge beds, mulch application, first mow of the season, and fertilizer treatment."},{id:"aeration_overseeding",name:"Aeration & Overseeding",category:"Treatment",priceRange:"$200-$400",defaultPrice:28e3,defaultDurationMinutes:180,minDurationHours:2,maxDurationHours:3,overview:"Improve lawn health and thickness",detailedDescription:"Core aeration to reduce soil compaction, premium seed application, and starter fertilizer. Best done in fall for cool-season grasses."}],faqs:[{category:"services",question:"What does weekly mowing include?",answer:"Our weekly mowing service includes cutting grass to optimal height, edging along walkways and beds, trimming around obstacles, and blowing off hard surfaces.",keywords:["mowing","weekly","what included","service"]},{category:"pricing",question:"How do you price lawn services?",answer:"Pricing is based on lawn size, condition, and specific services requested. We offer free estimates and can provide a custom quote after viewing your property.",keywords:["price","cost","estimate","quote"]}],websiteSeed:{heroHeadline:"Professional Lawn Care Services",heroSubheadline:"Beautiful lawns. Reliable service. Fair pricing.",primaryCtaLabel:"Get Free Estimate",secondaryCtaLabel:"Our Services",aboutBlurb:"We provide professional lawn care and maintenance to keep your yard looking its best year-round. From weekly mowing to seasonal treatments, we have you covered."},aiStyleNotes:{toneDescription:"Reliable, straightforward, and neighborly.",preferredTerms:["professional","reliable","quality service"]}},{id:"house_cleaning",name:"House Cleaning",shortLabel:"House Cleaning",description:"Residential cleaning and maid services",icon:"",recommendedPlanTier:"pro",services:[{id:"standard_clean",name:"Standard Clean",category:"Regular",priceRange:"$120-$200",defaultPrice:15e3,defaultDurationMinutes:150,minDurationHours:2,maxDurationHours:3,overview:"Regular home cleaning service",detailedDescription:"Dusting, vacuuming, mopping, kitchen and bathroom cleaning, making beds. Perfect for weekly or bi-weekly maintenance."},{id:"deep_clean",name:"Deep Clean",category:"Premium",priceRange:"$250-$400",defaultPrice:32e3,defaultDurationMinutes:300,minDurationHours:4,maxDurationHours:6,overview:"Thorough top-to-bottom cleaning",detailedDescription:"Everything in standard clean PLUS baseboards, inside cabinets, inside fridge, oven cleaning, window washing, and detailed scrubbing. Great for move-ins or spring cleaning."},{id:"move_out_clean",name:"Move-Out Clean",category:"Specialty",priceRange:"$300-$500",defaultPrice:38e3,defaultDurationMinutes:360,minDurationHours:5,maxDurationHours:7,overview:"Comprehensive cleaning for vacant homes",detailedDescription:"Deep clean of entire home including inside all cabinets, appliances, baseboards, walls, windows, and closets. Designed to pass move-out inspections."}],faqs:[{category:"services",question:"What is the difference between standard and deep clean?",answer:"Standard cleaning covers regular maintenance like dusting, vacuuming, and bathroom/kitchen cleaning. Deep cleaning includes everything in standard PLUS detailed tasks like baseboard washing, inside cabinets, oven cleaning, and window washing.",keywords:["difference","standard","deep","deep clean"]},{category:"policies",question:"Do I need to provide cleaning supplies?",answer:"No, we bring all necessary cleaning supplies and equipment. If you prefer us to use specific products or have allergies, just let us know and we can accommodate.",keywords:["supplies","products","equipment","bring"]}],websiteSeed:{heroHeadline:"Trusted House Cleaning Services",heroSubheadline:"Come home to a spotless house. Every time.",primaryCtaLabel:"Book a Cleaning",secondaryCtaLabel:"See Pricing",aboutBlurb:"We provide professional house cleaning services you can trust. Our experienced team treats your home with care and delivers consistent, thorough results."},aiStyleNotes:{toneDescription:"Trustworthy, warm, and detail-oriented.",preferredTerms:["spotless","trusted","professional team","attention to detail"]}},{id:"mobile_pet_grooming",name:"Mobile Pet Grooming",shortLabel:"Pet Grooming",description:"Mobile pet grooming and spa services",icon:"",recommendedPlanTier:"starter",services:[{id:"full_groom_small",name:"Full Groom (Small Dog)",category:"Grooming",priceRange:"$60-$85",defaultPrice:7e3,defaultDurationMinutes:90,minDurationHours:1,maxDurationHours:1.5,overview:"Complete grooming for small breeds",detailedDescription:"Bath, haircut, nail trim, ear cleaning, and anal gland expression. For dogs under 25 lbs."},{id:"full_groom_large",name:"Full Groom (Large Dog)",category:"Grooming",priceRange:"$90-$130",defaultPrice:11e3,defaultDurationMinutes:120,minDurationHours:1.5,maxDurationHours:2.5,overview:"Complete grooming for large breeds",detailedDescription:"Bath, haircut, nail trim, ear cleaning, and anal gland expression. For dogs over 50 lbs."},{id:"bath_brush",name:"Bath & Brush",category:"Basic",priceRange:"$45-$75",defaultPrice:6e3,defaultDurationMinutes:60,minDurationHours:.75,maxDurationHours:1.25,overview:"Refreshing bath and brush-out",detailedDescription:"Gentle bath with premium shampoo, thorough brushing, blow-dry, nail trim, and cologne spritz. No haircut."}],faqs:[{category:"services",question:"Do you groom cats?",answer:"Yes! We groom both dogs and cats. Cat grooming includes bath, nail trim, ear cleaning, and sanitary trim if needed.",keywords:["cats","cat grooming","feline"]},{category:"location",question:"How does mobile grooming work?",answer:"We come to your home in our fully-equipped mobile grooming van. Your pet gets one-on-one attention in a clean, professional environment right in your driveway.",keywords:["mobile","how does it work","van","location"]}],websiteSeed:{heroHeadline:"Mobile Pet Grooming at Your Door",heroSubheadline:"Stress-free grooming. Happy pets. Convenient service.",primaryCtaLabel:"Book Grooming",secondaryCtaLabel:"View Services",aboutBlurb:"We bring professional pet grooming directly to you. No stressful car rides, no kennels  just personalized, gentle care in our mobile salon."},aiStyleNotes:{toneDescription:"Caring, gentle, and pet-focused.",preferredTerms:["gentle","stress-free","professional care","mobile salon"]}},{id:"photography",name:"Photography",shortLabel:"Photography",description:"Professional photography services",icon:"",recommendedPlanTier:"pro",services:[{id:"portrait_session",name:"Portrait Session",category:"Portraits",priceRange:"$250-$500",defaultPrice:35e3,defaultDurationMinutes:120,minDurationHours:1.5,maxDurationHours:2.5,overview:"Professional portrait photography",detailedDescription:"1-2 hour session, multiple outfit changes, 50+ edited photos delivered digitally. Perfect for families, seniors, or headshots."},{id:"wedding_coverage",name:"Wedding Full Day",category:"Weddings",priceRange:"$2,000-$4,000",defaultPrice:3e5,defaultDurationMinutes:600,minDurationHours:8,maxDurationHours:10,overview:"Complete wedding day photography",detailedDescription:"Full day coverage from getting ready through reception. 500+ edited photos, online gallery, and print release."},{id:"real_estate",name:"Real Estate Photos",category:"Commercial",priceRange:"$150-$300",defaultPrice:2e4,defaultDurationMinutes:90,minDurationHours:1,maxDurationHours:2,overview:"Professional property photography",detailedDescription:"20-30 HDR photos of interior and exterior. Fast 24-hour turnaround. MLS-ready."}],faqs:[{category:"services",question:"What is included in a portrait session?",answer:"Portrait sessions include 1-2 hours of shooting time, professional editing of all photos, and digital delivery of 50+ images. You can purchase prints and additional products separately.",keywords:["portrait","session","included","what included"]},{category:"policies",question:"What is your booking and payment policy?",answer:"A 30% deposit is required to book your date. The remaining balance is due 7 days before your session. We accept credit cards, Venmo, and Zelle.",keywords:["payment","deposit","booking","policy"]}],websiteSeed:{heroHeadline:"Capturing Your Most Important Moments",heroSubheadline:"Professional photography with a personal touch.",primaryCtaLabel:"Book a Session",secondaryCtaLabel:"View Portfolio",aboutBlurb:"We specialize in capturing authentic moments that you'll treasure forever. From weddings to family portraits, we bring creativity and professionalism to every shoot."},aiStyleNotes:{toneDescription:"Creative, warm, and professional.",preferredTerms:["authentic moments","creative vision","timeless photos"]}},{id:"pressure_washing",name:"Pressure Washing",shortLabel:"Pressure Washing",description:"Power washing and exterior cleaning",icon:"",recommendedPlanTier:"starter",services:[{id:"house_wash",name:"House Washing",category:"Exterior",priceRange:"$200-$500",defaultPrice:32e3,defaultDurationMinutes:180,minDurationHours:2,maxDurationHours:4,overview:"Soft wash house exterior cleaning",detailedDescription:"Safe soft-wash cleaning of siding, soffits, fascia, and foundation. Removes mold, mildew, and dirt without damage."},{id:"driveway_cleaning",name:"Driveway/Sidewalk Cleaning",category:"Concrete",priceRange:"$150-$350",defaultPrice:22e3,defaultDurationMinutes:120,minDurationHours:1.5,maxDurationHours:3,overview:"High-pressure concrete cleaning",detailedDescription:"Remove oil stains, dirt, and grime from driveways, sidewalks, and patios. Restore like-new appearance."},{id:"deck_fence_cleaning",name:"Deck & Fence Cleaning",category:"Wood",priceRange:"$175-$400",defaultPrice:26e3,defaultDurationMinutes:150,minDurationHours:2,maxDurationHours:3.5,overview:"Safe cleaning for wood surfaces",detailedDescription:"Gentle cleaning and brightening of wood decks and fences. Can be followed by staining/sealing services."}],faqs:[{category:"services",question:"Will pressure washing damage my siding?",answer:"No! We use soft washing techniques for delicate surfaces like siding and roofs. High pressure is only used on durable surfaces like concrete.",keywords:["damage","siding","safe","soft wash"]},{category:"pricing",question:"How do you calculate pricing?",answer:"Pricing is based on square footage and surface type. We offer free estimates and can provide an exact quote after a quick phone call or photos.",keywords:["pricing","cost","estimate","how much"]}],websiteSeed:{heroHeadline:"Professional Pressure Washing Services",heroSubheadline:"Restore your property's curb appeal.",primaryCtaLabel:"Get Free Quote",secondaryCtaLabel:"Our Services",aboutBlurb:"We provide expert pressure washing and soft washing to make your home's exterior look brand new. Safe, effective, and affordable."},aiStyleNotes:{toneDescription:"Professional, reliable, results-focused.",preferredTerms:["restore","curb appeal","like-new","professional results"]}},{id:"generic_home_services",name:"Home Services",shortLabel:"Home Services",description:"General home repair and maintenance",icon:"",recommendedPlanTier:"starter",services:[{id:"handyman_hourly",name:"Handyman Services (Hourly)",category:"General",priceRange:"$75-$125/hr",defaultPrice:9500,defaultDurationMinutes:60,minDurationHours:1,maxDurationHours:4,overview:"General home repairs and installations",detailedDescription:"From hanging pictures to minor repairs, we handle all those small jobs around your home. 2-hour minimum."},{id:"furniture_assembly",name:"Furniture Assembly",category:"Assembly",priceRange:"$80-$200",defaultPrice:12e3,defaultDurationMinutes:90,minDurationHours:1,maxDurationHours:3,overview:"Professional furniture assembly",detailedDescription:"We assemble all types of furniture including beds, desks, shelving units, and more. Pricing based on complexity."},{id:"tv_mounting",name:"TV Mounting",category:"Installation",priceRange:"$120-$250",defaultPrice:17500,defaultDurationMinutes:90,minDurationHours:1,maxDurationHours:2,overview:"Professional TV wall mounting",detailedDescription:"Secure wall mounting with cable concealment options. Includes all hardware and stud finding."}],faqs:[{category:"services",question:"What types of jobs do you handle?",answer:"We handle a wide variety of home repairs and installations including drywall repair, door adjustments, fixture installation, furniture assembly, and more. If you're not sure, just ask!",keywords:["services","what do you do","types of jobs"]},{category:"pricing",question:"Do you charge a service call fee?",answer:"We have a 2-hour minimum for most jobs, which covers travel and setup time. This ensures we can complete your project efficiently.",keywords:["service call","minimum","fee","travel"]}],websiteSeed:{heroHeadline:"Your Trusted Home Services Partner",heroSubheadline:"Quality repairs and installations. Fair pricing.",primaryCtaLabel:"Request Service",secondaryCtaLabel:"See Services",aboutBlurb:"We provide reliable home repair and maintenance services. From small fixes to larger projects, we get the job done right."},aiStyleNotes:{toneDescription:"Helpful, reliable, and straightforward.",preferredTerms:["trusted","reliable","quality work","get it done right"]}},{id:"window_washing",name:"Window Washing",shortLabel:"Window Washing",description:"Professional residential and commercial window cleaning",icon:"",recommendedPlanTier:"starter",services:[{id:"residential_windows",name:"Residential Window Cleaning",category:"Residential",priceRange:"$150-$350",defaultPrice:22500,defaultDurationMinutes:120,minDurationHours:1.5,maxDurationHours:4,overview:"Inside and outside window cleaning",detailedDescription:"Complete window cleaning service including screens, tracks, and sills. We use professional-grade squeegees and cleaning solutions for streak-free results."},{id:"commercial_windows",name:"Commercial Window Cleaning",category:"Commercial",priceRange:"Custom Quote",defaultPrice:null,defaultDurationMinutes:180,minDurationHours:2,maxDurationHours:8,overview:"Professional commercial window cleaning",detailedDescription:"Scheduled commercial window cleaning for offices, retail spaces, and buildings. Custom pricing based on square footage and accessibility."},{id:"storefront_windows",name:"Storefront Cleaning",category:"Commercial",priceRange:"$100-$250",defaultPrice:15e3,defaultDurationMinutes:90,minDurationHours:1,maxDurationHours:2,overview:"Storefront window and glass cleaning",detailedDescription:"Keep your business looking its best with regular storefront cleaning. Includes doors, display windows, and entrance glass."}],faqs:[{category:"services",question:"Do you clean screens and tracks?",answer:"Yes! Our service includes cleaning screens, window tracks, and sills for a complete clean.",keywords:["screens","tracks","sills","included"]},{category:"pricing",question:"How do you determine pricing for window cleaning?",answer:"Pricing is based on the number of windows, accessibility, and whether you want inside and outside cleaning. We offer free quotes.",keywords:["pricing","cost","how much","quote"]},{category:"scheduling",question:"How often should I have my windows cleaned?",answer:"Most homes benefit from cleaning 2-4 times per year. Commercial properties often schedule monthly or quarterly service.",keywords:["frequency","how often","schedule"]}],websiteSeed:{heroHeadline:"Crystal Clear Windows, Every Time",heroSubheadline:"Professional window cleaning for homes and businesses",primaryCtaLabel:"Get a Free Quote",secondaryCtaLabel:"View Services",aboutBlurb:"We provide professional window cleaning services that leave your windows sparkling. Fully insured and satisfaction guaranteed."},aiStyleNotes:{toneDescription:"Professional, detail-oriented, and friendly.",preferredTerms:["streak-free","crystal clear","sparkling","professional results"]}},{id:"pool_service",name:"Pool Service & Maintenance",shortLabel:"Pool Service",description:"Weekly pool cleaning, maintenance, and chemical balancing",icon:"",recommendedPlanTier:"pro",services:[{id:"weekly_pool_service",name:"Weekly Pool Service",category:"Maintenance",priceRange:"$120-$180/month",defaultPrice:15e3,defaultDurationMinutes:45,minDurationHours:.5,maxDurationHours:1.5,overview:"Complete weekly pool maintenance",detailedDescription:"Weekly service includes skimming, vacuuming, brushing, emptying baskets, backwashing filter, chemical testing and balancing, and inspection of equipment."},{id:"pool_opening",name:"Pool Opening",category:"Seasonal",priceRange:"$200-$350",defaultPrice:27500,defaultDurationMinutes:180,minDurationHours:2,maxDurationHours:4,overview:"Spring pool opening service",detailedDescription:"Complete pool opening including removing cover, starting equipment, chemical shock treatment, and ensuring everything is running properly for the season."},{id:"pool_closing",name:"Pool Closing",category:"Seasonal",priceRange:"$200-$350",defaultPrice:27500,defaultDurationMinutes:180,minDurationHours:2,maxDurationHours:4,overview:"Fall pool winterization",detailedDescription:"Proper winterization including chemical treatment, lowering water level, blowing out lines, adding antifreeze, and securing winter cover."},{id:"green_pool_cleanup",name:"Green Pool Clean-Up",category:"Repair",priceRange:"$250-$500",defaultPrice:37500,defaultDurationMinutes:240,minDurationHours:3,maxDurationHours:6,overview:"Green pool recovery service",detailedDescription:"Complete algae treatment and recovery for neglected pools. Includes shock treatment, algaecide, manual vacuuming, and chemical balancing. May require multiple visits."}],faqs:[{category:"services",question:"What is included in weekly pool service?",answer:"Weekly service includes skimming, vacuuming, brushing, chemical testing and balancing, emptying baskets, and equipment inspection.",keywords:["weekly service","included","what do you do"]},{category:"pricing",question:"Do I need to provide chemicals?",answer:"No, we provide all necessary chemicals as part of our service. The cost is included in your monthly fee.",keywords:["chemicals","chlorine","who provides"]},{category:"scheduling",question:"Can you service my pool while I'm at work?",answer:"Yes! Most of our clients are at work during service. We just need access to the pool area and equipment.",keywords:["access","not home","gate code"]}],websiteSeed:{heroHeadline:"Enjoy Your Pool. We'll Handle the Maintenance.",heroSubheadline:"Professional weekly pool service and cleaning",primaryCtaLabel:"Get Started",secondaryCtaLabel:"View Services",aboutBlurb:"We keep your pool sparkling clean and properly balanced so you can focus on enjoying it. Serving the area with reliable, professional service."},aiStyleNotes:{toneDescription:"Reliable, knowledgeable, and service-oriented.",preferredTerms:["crystal clear","properly balanced","safe and clean","worry-free"]}},{id:"landscaping",name:"Landscaping & Yard Design",shortLabel:"Landscaping",description:"Professional landscaping, garden design, and outdoor transformations",icon:"",recommendedPlanTier:"pro",services:[{id:"landscape_design",name:"Landscape Design & Installation",category:"Design",priceRange:"Custom Quote",defaultPrice:null,defaultDurationMinutes:480,minDurationHours:4,maxDurationHours:40,overview:"Complete landscape design and installation",detailedDescription:"Custom landscape design including plants, hardscaping, irrigation planning, and full installation. We create outdoor spaces that enhance your property's beauty and value."},{id:"mulch_installation",name:"Mulch & Bed Installation",category:"Maintenance",priceRange:"$300-$1,200",defaultPrice:65e3,defaultDurationMinutes:240,minDurationHours:2,maxDurationHours:8,overview:"Fresh mulch and garden bed preparation",detailedDescription:"Professional mulch installation with bed edging, weed removal, and soil preparation. Pricing based on bed size and mulch type."},{id:"hardscape_installation",name:"Hardscape Installation",category:"Hardscaping",priceRange:"Custom Quote",defaultPrice:null,defaultDurationMinutes:960,minDurationHours:8,maxDurationHours:80,overview:"Patios, walkways, retaining walls",detailedDescription:"Professional hardscape installation including patios, walkways, retaining walls, and outdoor living spaces using pavers, stone, or concrete."}],faqs:[{category:"services",question:"Do you provide landscape design services?",answer:"Yes! We offer complete landscape design services including 3D renderings, plant selection, and material recommendations before installation begins.",keywords:["design","planning","rendering"]},{category:"pricing",question:"How do you determine landscaping pricing?",answer:"Pricing depends on project scope, materials selected, site conditions, and labor required. We provide detailed quotes after an on-site consultation.",keywords:["cost","pricing","quote","estimate"]}],websiteSeed:{heroHeadline:"Transform Your Outdoor Space",heroSubheadline:"Professional landscaping that brings your vision to life",primaryCtaLabel:"Schedule Consultation",secondaryCtaLabel:"View Portfolio",aboutBlurb:"We design and install beautiful, sustainable landscapes that enhance your property and fit your lifestyle."},aiStyleNotes:{toneDescription:"Creative, knowledgeable, and passionate about outdoor spaces.",preferredTerms:["transform","enhance","beautiful","custom design","outdoor living"]}},{id:"roofing",name:"Roofing Services",shortLabel:"Roofing",description:"Professional roof repair, replacement, and inspection",icon:"",recommendedPlanTier:"pro",services:[{id:"roof_inspection",name:"Roof Inspection",category:"Inspection",priceRange:"$150-$300",defaultPrice:2e4,defaultDurationMinutes:90,minDurationHours:1,maxDurationHours:2,overview:"Complete roof inspection with detailed report",detailedDescription:"Thorough roof inspection including shingles, flashing, gutters, and ventilation. Includes photo documentation and detailed written report."},{id:"roof_repair",name:"Roof Repair",category:"Repair",priceRange:"$300-$1,500",defaultPrice:75e3,defaultDurationMinutes:240,minDurationHours:2,maxDurationHours:8,overview:"Professional roof leak and damage repair",detailedDescription:"Expert repair of leaks, damaged shingles, flashing issues, and storm damage. We match existing materials and ensure quality workmanship."},{id:"roof_replacement",name:"Full Roof Replacement",category:"Replacement",priceRange:"Custom Quote",defaultPrice:null,defaultDurationMinutes:960,minDurationHours:8,maxDurationHours:40,overview:"Complete roof tear-off and replacement",detailedDescription:"Full roof replacement including tear-off, deck inspection/repair, new underlayment, and premium shingles with warranty. Multiple shingle options available."}],faqs:[{category:"services",question:"Do you handle insurance claims?",answer:"Yes, we work directly with insurance companies and can help you navigate the claims process for storm damage and covered repairs.",keywords:["insurance","claims","storm damage"]},{category:"pricing",question:"How long does a roof replacement take?",answer:"Most residential roof replacements are completed in 1-3 days depending on size, complexity, and weather conditions.",keywords:["timeline","how long","duration"]}],websiteSeed:{heroHeadline:"Protecting What Matters Most",heroSubheadline:"Expert roofing services with quality craftsmanship",primaryCtaLabel:"Free Inspection",secondaryCtaLabel:"Get Quote",aboutBlurb:"We provide professional roofing services with quality materials, expert installation, and industry-leading warranties."},aiStyleNotes:{toneDescription:"Professional, trustworthy, and focused on protection.",preferredTerms:["quality craftsmanship","protect your investment","trusted","warranted"]}},{id:"flooring",name:"Flooring Installation",shortLabel:"Flooring",description:"Professional flooring installation for all types of floors",icon:"",recommendedPlanTier:"pro",services:[{id:"hardwood_installation",name:"Hardwood Floor Installation",category:"Hardwood",priceRange:"$8-$15 per sq ft",defaultPrice:null,defaultDurationMinutes:480,minDurationHours:4,maxDurationHours:40,overview:"Professional hardwood flooring installation",detailedDescription:"Expert installation of solid or engineered hardwood flooring including subfloor preparation, acclimation, installation, and finishing."},{id:"lvp_installation",name:"Luxury Vinyl Plank (LVP) Installation",category:"Vinyl",priceRange:"$3-$7 per sq ft",defaultPrice:null,defaultDurationMinutes:360,minDurationHours:3,maxDurationHours:24,overview:"Waterproof LVP flooring installation",detailedDescription:"Installation of luxury vinyl plank flooring with professional subfloor prep. Perfect for kitchens, bathrooms, and high-traffic areas."},{id:"tile_installation",name:"Tile Flooring Installation",category:"Tile",priceRange:"$5-$12 per sq ft",defaultPrice:null,defaultDurationMinutes:480,minDurationHours:4,maxDurationHours:32,overview:"Ceramic and porcelain tile installation",detailedDescription:"Professional tile installation with precision layout, waterproofing (when needed), and custom patterns. Includes grout and sealing."}],faqs:[{category:"services",question:"Do you remove old flooring?",answer:"Yes, we handle complete removal and disposal of existing flooring including carpet, tile, vinyl, and hardwood.",keywords:["removal","tear out","old flooring"]},{category:"pricing",question:"What affects flooring installation cost?",answer:"Cost depends on material type, square footage, subfloor condition, room layout, and any special patterns or transitions required.",keywords:["cost","pricing","factors"]}],websiteSeed:{heroHeadline:"Beautiful Floors, Installed Right",heroSubheadline:"Expert flooring installation with precision and care",primaryCtaLabel:"Free Estimate",secondaryCtaLabel:"View Gallery",aboutBlurb:"We install all types of flooring with meticulous attention to detail and professional craftsmanship that lasts."},aiStyleNotes:{toneDescription:"Detail-oriented, professional, and focused on quality.",preferredTerms:["precision","expert installation","quality materials","beautiful results"]}},{id:"painting",name:"Painting Services",shortLabel:"Painting",description:"Interior and exterior painting for residential and commercial",icon:"",recommendedPlanTier:"starter",services:[{id:"interior_painting",name:"Interior Painting",category:"Interior",priceRange:"$2-$6 per sq ft",defaultPrice:null,defaultDurationMinutes:480,minDurationHours:4,maxDurationHours:40,overview:"Professional interior painting services",detailedDescription:"Complete interior painting including surface prep, priming, two coats of premium paint, and detailed trim work. We protect your furniture and clean up thoroughly."},{id:"exterior_painting",name:"Exterior Painting",category:"Exterior",priceRange:"$2-$8 per sq ft",defaultPrice:null,defaultDurationMinutes:960,minDurationHours:8,maxDurationHours:80,overview:"Exterior house painting and staining",detailedDescription:"Full exterior painting including pressure washing, repairs, caulking, priming, and two coats of weather-resistant paint. Siding, trim, and shutters included."},{id:"cabinet_painting",name:"Cabinet Refinishing",category:"Specialty",priceRange:"$3,000-$8,000",defaultPrice:5e5,defaultDurationMinutes:960,minDurationHours:8,maxDurationHours:32,overview:"Kitchen and bathroom cabinet refinishing",detailedDescription:"Professional cabinet painting including degreasing, sanding, priming, and multiple coats of durable finish. Transform your kitchen at a fraction of replacement cost."}],faqs:[{category:"services",question:"Do you move furniture?",answer:"Yes, we move smaller furniture and protect larger pieces with drop cloths. We recommend removing personal items and valuables.",keywords:["furniture","moving","protection"]},{category:"pricing",question:"How long does interior painting take?",answer:"Most rooms take 1-2 days including prep and two coats. Whole homes typically take 3-7 days depending on size and complexity.",keywords:["timeline","how long","duration"]}],websiteSeed:{heroHeadline:"Transform Your Space With Color",heroSubheadline:"Professional painting with precision and care",primaryCtaLabel:"Free Quote",secondaryCtaLabel:"See Our Work",aboutBlurb:"We deliver flawless painting results with meticulous prep work, premium materials, and attention to every detail."},aiStyleNotes:{toneDescription:"Professional, detail-focused, and color-enthusiastic.",preferredTerms:["transform","flawless finish","precision","quality results"]}},{id:"pest_control",name:"Pest Control Services",shortLabel:"Pest Control",description:"Professional pest elimination and prevention services",icon:"",recommendedPlanTier:"starter",services:[{id:"general_pest_control",name:"General Pest Control",category:"Maintenance",priceRange:"$75-$150 per treatment",defaultPrice:1e4,defaultDurationMinutes:60,minDurationHours:.5,maxDurationHours:2,overview:"Quarterly pest prevention service",detailedDescription:"Comprehensive pest control treating for ants, spiders, roaches, and common household pests. Interior and exterior treatment with safe, effective products."},{id:"termite_inspection",name:"Termite Inspection",category:"Inspection",priceRange:"$75-$150",defaultPrice:1e4,defaultDurationMinutes:90,minDurationHours:1,maxDurationHours:2,overview:"Comprehensive termite inspection",detailedDescription:"Thorough termite inspection of foundation, crawl spaces, and wood structures. Includes detailed report and treatment recommendations."},{id:"rodent_control",name:"Rodent Control & Exclusion",category:"Specialty",priceRange:"$200-$600",defaultPrice:35e3,defaultDurationMinutes:180,minDurationHours:2,maxDurationHours:8,overview:"Complete rodent elimination and prevention",detailedDescription:"Full rodent control including trapping, exclusion work to seal entry points, and sanitation recommendations. Follow-up visits included."},{id:"bed_bug_treatment",name:"Bed Bug Treatment",category:"Specialty",priceRange:"$300-$1,200",defaultPrice:65e3,defaultDurationMinutes:240,minDurationHours:2,maxDurationHours:6,overview:"Bed bug elimination service",detailedDescription:"Comprehensive bed bug treatment using heat, chemical, or combination methods. Multiple treatments may be required for complete elimination."}],faqs:[{category:"services",question:"Are your treatments safe for pets and children?",answer:"Yes, we use EPA-approved products and follow strict safety protocols. We recommend keeping pets and children away during application and for 2-4 hours after.",keywords:["safe","pets","children","family"]},{category:"pricing",question:"Do you offer recurring service plans?",answer:"Yes! We offer quarterly, bi-monthly, and monthly service plans at discounted rates to keep your home pest-free year-round.",keywords:["recurring","subscription","quarterly","monthly"]}],websiteSeed:{heroHeadline:"Keep Your Home Pest-Free",heroSubheadline:"Effective pest control you can trust",primaryCtaLabel:"Schedule Service",secondaryCtaLabel:"View Services",aboutBlurb:"We provide safe, effective pest control solutions that protect your home and family from unwanted pests."},aiStyleNotes:{toneDescription:"Professional, reassuring, and solution-focused.",preferredTerms:["safe","effective","protect your home","peace of mind","guaranteed"]}}];sue.reduce((e,t)=>(e[t.id]=t,e),{});function Ght(){return sue.map(e=>({value:e.id,label:e.shortLabel,description:e.description,icon:e.icon}))}const Yht=fe.object({businessName:fe.string().min(1,"Business name is required").max(255),slug:fe.string().max(100).optional().or(fe.literal("")),contactName:fe.string().max(255).optional().or(fe.literal("")),contactEmail:fe.string().email("Invalid email address").optional().or(fe.literal("")),primaryCity:fe.string().max(100).optional().or(fe.literal("")),planTier:fe.enum(["starter","pro","elite","internal"],{required_error:"Please select a plan tier"}),status:fe.enum(["trialing","active","past_due","suspended","cancelled"],{required_error:"Please select a status"}),industry:fe.string().max(100).optional().or(fe.literal("")),industryPackId:fe.string().max(100).optional().or(fe.literal("")),applyIndustryPack:fe.boolean().optional().default(!0),phoneNumber:fe.string().min(1,"Phone number is required").max(50),messagingServiceSid:fe.string().max(255).optional().or(fe.literal("")),ivrMode:fe.enum(["simple","ivr","ai-voice"],{required_error:"Please select an IVR mode"}),websiteUrl:fe.string().max(500).optional().or(fe.literal("")),primaryColor:fe.string().max(20).optional().or(fe.literal("")),accentColor:fe.string().max(20).optional().or(fe.literal("")),internalNotes:fe.string().optional().or(fe.literal("")),sendWelcomeEmail:fe.boolean().optional().default(!1),sendWelcomeSms:fe.boolean().optional().default(!1)}),Qht=Ght();function Kht(){const{toast:e}=Ee(),[,t]=zt(),[r,s]=p.useState(null);p.useEffect(()=>{window.scrollTo({top:0,behavior:"instant"})},[]);const a=fi({resolver:hi(Yht),defaultValues:{businessName:"",slug:"",contactName:"",contactEmail:"",primaryCity:"",planTier:"starter",status:"trialing",industry:"",industryPackId:"",applyIndustryPack:!0,phoneNumber:"",messagingServiceSid:"",ivrMode:"simple",websiteUrl:"",primaryColor:"",accentColor:"",internalNotes:"",sendWelcomeEmail:!1,sendWelcomeSms:!1}}),i=je({mutationFn:async u=>await(await Ne("POST","/api/admin/concierge/onboard-tenant",u)).json(),onSuccess:u=>{s(u.tenant);const f=u.tenant.industryPackApplied?` with ${u.tenant.servicesCreated} services and ${u.tenant.faqsCreated} FAQs`:"";e({title:"Success",description:`Tenant "${u.tenant.businessName}" created successfully${f}`}),a.reset()},onError:u=>{e({title:"Error",description:u.message||"Failed to create tenant",variant:"destructive"})}}),o=u=>{i.mutate(u)},l=()=>{s(null),a.reset()},c=je({mutationFn:async u=>await(await Ne("POST","/api/admin/impersonate/start",{tenantId:u})).json(),onSuccess:u=>{e({title:"Impersonation Active",description:`You are now viewing the app as ${u.tenantName}`}),t("/")},onError:u=>{e({title:"Error",description:u.message||"Failed to start impersonation",variant:"destructive"})}}),d=()=>{r&&c.mutate(r.tenantId)};return r?n.jsx(xn,{title:"Concierge Setup",children:n.jsx("div",{className:"max-w-3xl mx-auto p-6 space-y-6",children:n.jsx(O,{className:"p-8 bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-950 dark:to-emerald-950 border-green-200 dark:border-green-800",children:n.jsxs("div",{className:"text-center space-y-4",children:[n.jsx("div",{className:"flex justify-center",children:n.jsx("div",{className:"w-16 h-16 rounded-full bg-green-500 dark:bg-green-600 flex items-center justify-center",children:n.jsx(nn,{className:"w-10 h-10 text-white"})})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Tenant Created Successfully!"}),n.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:[r.businessName," is now set up on ServicePro"]})]}),n.jsx("div",{className:"bg-white dark:bg-gray-900 rounded-lg p-6 space-y-3 text-left border border-green-200 dark:border-green-800",children:n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Tenant ID"}),n.jsx("p",{className:"font-mono text-sm text-gray-900 dark:text-gray-100","data-testid":"text-tenant-id",children:r.tenantId})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Plan Tier"}),n.jsx("p",{className:"font-semibold text-gray-900 dark:text-gray-100","data-testid":"text-plan-tier",children:r.planTier.charAt(0).toUpperCase()+r.planTier.slice(1)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Status"}),n.jsx("p",{className:"text-gray-900 dark:text-gray-100","data-testid":"text-status",children:r.status.charAt(0).toUpperCase()+r.status.slice(1)})]}),r.industry&&n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Industry"}),n.jsx("p",{className:"text-gray-900 dark:text-gray-100","data-testid":"text-industry",children:r.industry})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Phone Number"}),n.jsx("p",{className:"text-gray-900 dark:text-gray-100","data-testid":"text-phone-number",children:r.phoneNumber})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"IVR Mode"}),n.jsx("p",{className:"text-gray-900 dark:text-gray-100","data-testid":"text-ivr-mode",children:r.ivrMode})]})]})}),n.jsxs("div",{className:"space-y-3 pt-4",children:[n.jsx("p",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300",children:"Next Steps:"}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[n.jsx(St,{href:"/admin/tenants",children:n.jsxs(_,{variant:"outline",className:"w-full","data-testid":"button-manage-tenants",children:[n.jsx(Of,{className:"w-4 h-4 mr-2"}),"Manage Tenants"]})}),n.jsx(St,{href:"/admin/phone-config",children:n.jsxs(_,{variant:"outline",className:"w-full","data-testid":"button-configure-phone",children:["Configure Phone & IVR",n.jsx(Gc,{className:"w-4 h-4 ml-2"})]})})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs(_,{onClick:d,variant:"default",className:"w-full",disabled:c.isPending,"data-testid":"button-login-as-tenant",children:[n.jsx(mj,{className:"w-4 h-4 mr-2"}),"Login as this Tenant"]}),n.jsxs(_,{onClick:l,variant:"outline",className:"w-full","data-testid":"button-create-another",children:[n.jsx(ln,{className:"w-4 h-4 mr-2"}),"Create Another Tenant"]})]})]})]})})})}):n.jsx(xn,{title:"Concierge Setup",children:n.jsxs("div",{className:"max-w-3xl mx-auto p-6 space-y-6",children:[n.jsxs("div",{children:[n.jsxs("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 flex items-center gap-2",children:[n.jsx(ln,{className:"w-8 h-8 text-purple-500"}),"Concierge Setup"]}),n.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Streamlined onboarding for new ServicePro tenants"})]}),n.jsx(mi,{...a,children:n.jsxs("form",{onSubmit:a.handleSubmit(o),className:"space-y-8",children:[n.jsx(O,{className:"p-6",children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center gap-2 pb-2 border-b border-gray-200 dark:border-gray-700",children:[n.jsx(Of,{className:"w-5 h-5 text-blue-500"}),n.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100",children:"Business Basics"})]}),n.jsx(Ye,{control:a.control,name:"businessName",render:({field:u})=>n.jsxs(We,{children:[n.jsx(qe,{children:"Business Name *"}),n.jsx(Qe,{children:n.jsx(se,{...u,placeholder:"e.g., Acme Mobile Detailing","data-testid":"input-business-name"})}),n.jsx(cn,{children:"The customer-facing name of this business"}),n.jsx(Ze,{})]})}),n.jsx(Ye,{control:a.control,name:"slug",render:({field:u})=>n.jsxs(We,{children:[n.jsx(qe,{children:"Slug (Subdomain)"}),n.jsx(Qe,{children:n.jsx(se,{...u,placeholder:"e.g., acme-detailing","data-testid":"input-slug"})}),n.jsx(cn,{children:"URL-friendly identifier (optional, auto-generated if blank)"}),n.jsx(Ze,{})]})}),n.jsx(Ye,{control:a.control,name:"contactName",render:({field:u})=>n.jsxs(We,{children:[n.jsx(qe,{children:"Contact Name"}),n.jsx(Qe,{children:n.jsxs("div",{className:"relative",children:[n.jsx(Fn,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),n.jsx(se,{...u,placeholder:"e.g., John Smith",className:"pl-10","data-testid":"input-contact-name"})]})}),n.jsx(cn,{children:"Primary contact person name (optional)"}),n.jsx(Ze,{})]})}),n.jsx(Ye,{control:a.control,name:"contactEmail",render:({field:u})=>n.jsxs(We,{children:[n.jsx(qe,{children:"Contact Email"}),n.jsx(Qe,{children:n.jsxs("div",{className:"relative",children:[n.jsx(Cr,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),n.jsx(se,{...u,type:"email",placeholder:"owner@business.com",className:"pl-10","data-testid":"input-contact-email"})]})}),n.jsx(cn,{children:"Primary contact for this tenant (optional)"}),n.jsx(Ze,{})]})}),n.jsx(Ye,{control:a.control,name:"primaryCity",render:({field:u})=>n.jsxs(We,{children:[n.jsx(qe,{children:"Primary City"}),n.jsx(Qe,{children:n.jsxs("div",{className:"relative",children:[n.jsx(zr,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),n.jsx(se,{...u,placeholder:"e.g., Tulsa",className:"pl-10","data-testid":"input-primary-city"})]})}),n.jsx(cn,{children:"Primary service area (optional)"}),n.jsx(Ze,{})]})})]})}),n.jsx(O,{className:"p-6",children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center gap-2 pb-2 border-b border-gray-200 dark:border-gray-700",children:[n.jsx(Np,{className:"w-5 h-5 text-purple-500"}),n.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100",children:"Plan & Industry"})]}),n.jsx(Ye,{control:a.control,name:"planTier",render:({field:u})=>n.jsxs(We,{className:"space-y-3",children:[n.jsx(qe,{children:"Plan Tier *"}),n.jsx(Qe,{children:n.jsxs(mo,{onValueChange:u.onChange,defaultValue:u.value,className:"grid grid-cols-4 gap-3",children:[n.jsxs("div",{children:[n.jsx(Kn,{value:"starter",id:"starter",className:"peer sr-only"}),n.jsxs(U,{htmlFor:"starter",className:"flex flex-col items-center justify-between rounded-md border-2 border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 p-3 hover:bg-gray-50 dark:hover:bg-gray-800 peer-data-[state=checked]:border-blue-500 [&:has([data-state=checked])]:border-blue-500 cursor-pointer","data-testid":"radio-tier-starter",children:[n.jsx("span",{className:"text-base font-semibold",children:"Starter"}),n.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 text-center",children:"Basic"})]})]}),n.jsxs("div",{children:[n.jsx(Kn,{value:"pro",id:"pro",className:"peer sr-only"}),n.jsxs(U,{htmlFor:"pro",className:"flex flex-col items-center justify-between rounded-md border-2 border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 p-3 hover:bg-gray-50 dark:hover:bg-gray-800 peer-data-[state=checked]:border-blue-500 [&:has([data-state=checked])]:border-blue-500 cursor-pointer","data-testid":"radio-tier-pro",children:[n.jsx("span",{className:"text-base font-semibold",children:"Pro"}),n.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 text-center",children:"Advanced"})]})]}),n.jsxs("div",{children:[n.jsx(Kn,{value:"elite",id:"elite",className:"peer sr-only"}),n.jsxs(U,{htmlFor:"elite",className:"flex flex-col items-center justify-between rounded-md border-2 border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 p-3 hover:bg-gray-50 dark:hover:bg-gray-800 peer-data-[state=checked]:border-purple-500 [&:has([data-state=checked])]:border-purple-500 cursor-pointer","data-testid":"radio-tier-elite",children:[n.jsx("span",{className:"text-base font-semibold",children:"Elite"}),n.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 text-center",children:"Full suite"})]})]}),n.jsxs("div",{children:[n.jsx(Kn,{value:"internal",id:"internal",className:"peer sr-only"}),n.jsxs(U,{htmlFor:"internal",className:"flex flex-col items-center justify-between rounded-md border-2 border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 p-3 hover:bg-gray-50 dark:hover:bg-gray-800 peer-data-[state=checked]:border-green-500 [&:has([data-state=checked])]:border-green-500 cursor-pointer","data-testid":"radio-tier-internal",children:[n.jsx("span",{className:"text-base font-semibold",children:"Internal"}),n.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 text-center",children:"Owner use"})]})]})]})}),n.jsx(Ze,{})]})}),n.jsx(Ye,{control:a.control,name:"status",render:({field:u})=>n.jsxs(We,{children:[n.jsx(qe,{children:"Status *"}),n.jsxs(Pt,{onValueChange:u.onChange,defaultValue:u.value,children:[n.jsx(Qe,{children:n.jsx(kt,{"data-testid":"select-status",children:n.jsx(Tt,{placeholder:"Select status"})})}),n.jsxs(Mt,{children:[n.jsx(ve,{value:"trialing",children:"Trialing"}),n.jsx(ve,{value:"active",children:"Active"}),n.jsx(ve,{value:"past_due",children:"Past Due"}),n.jsx(ve,{value:"suspended",children:"Suspended"}),n.jsx(ve,{value:"cancelled",children:"Cancelled"})]})]}),n.jsx(cn,{children:"Account status for this tenant"}),n.jsx(Ze,{})]})}),n.jsx(Ye,{control:a.control,name:"industryPackId",render:({field:u})=>n.jsxs(We,{children:[n.jsx(qe,{children:"Industry Pack"}),n.jsxs(Pt,{onValueChange:u.onChange,defaultValue:u.value,children:[n.jsx(Qe,{children:n.jsx(kt,{"data-testid":"select-industry-pack",children:n.jsx(Tt,{placeholder:"Select an industry pack"})})}),n.jsx(Mt,{children:Qht.map(f=>n.jsx(ve,{value:f.value,children:n.jsxs("div",{className:"flex items-center gap-2",children:[f.icon&&n.jsx("span",{className:"text-lg",children:f.icon}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:f.label}),n.jsx("div",{className:"text-xs text-muted-foreground",children:f.description})]})]})},f.value))})]}),n.jsx(cn,{children:"We'll pre-fill services, FAQs, and starter website copy based on this industry."}),n.jsx(Ze,{})]})}),n.jsx(Ye,{control:a.control,name:"applyIndustryPack",render:({field:u})=>n.jsxs(We,{className:"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4",children:[n.jsx(Qe,{children:n.jsx(as,{checked:u.value,onCheckedChange:u.onChange,"data-testid":"checkbox-apply-pack"})}),n.jsxs("div",{className:"space-y-1 leading-none",children:[n.jsx(qe,{children:"Auto-apply recommended services and FAQs"}),n.jsx(cn,{children:"Automatically populate the tenant's database with industry-specific starter content. You can customize everything later."})]})]})})]})}),n.jsx(O,{className:"p-6",children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center gap-2 pb-2 border-b border-gray-200 dark:border-gray-700",children:[n.jsx(bt,{className:"w-5 h-5 text-green-500"}),n.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100",children:"Telephony"})]}),n.jsx(Ye,{control:a.control,name:"phoneNumber",render:({field:u})=>n.jsxs(We,{children:[n.jsx(qe,{children:"Phone Number *"}),n.jsx(Qe,{children:n.jsxs("div",{className:"relative",children:[n.jsx(bt,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),n.jsx(se,{...u,placeholder:"+19185551234",className:"pl-10","data-testid":"input-phone-number"})]})}),n.jsx(cn,{children:"E.164 format (e.g., +19185551234) or 10-digit US number"}),n.jsx(Ze,{})]})}),n.jsx(Ye,{control:a.control,name:"messagingServiceSid",render:({field:u})=>n.jsxs(We,{children:[n.jsx(qe,{children:"Messaging Service SID"}),n.jsx(Qe,{children:n.jsx(se,{...u,placeholder:"MGxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx","data-testid":"input-messaging-service-sid"})}),n.jsx(cn,{children:"Twilio Messaging Service SID (optional)"}),n.jsx(Ze,{})]})}),n.jsx(Ye,{control:a.control,name:"ivrMode",render:({field:u})=>n.jsxs(We,{className:"space-y-3",children:[n.jsx(qe,{children:"IVR Mode *"}),n.jsx(Qe,{children:n.jsxs(mo,{onValueChange:u.onChange,defaultValue:u.value,className:"flex flex-col space-y-2",children:[n.jsxs("div",{className:"flex items-center space-x-3 space-y-0",children:[n.jsx(Kn,{value:"simple",id:"ivr-simple","data-testid":"radio-ivr-simple"}),n.jsxs(U,{htmlFor:"ivr-simple",className:"font-normal cursor-pointer",children:[n.jsx("span",{className:"font-semibold",children:"Simple"})," - Forward to existing phone"]})]}),n.jsxs("div",{className:"flex items-center space-x-3 space-y-0",children:[n.jsx(Kn,{value:"ivr",id:"ivr-menu","data-testid":"radio-ivr-menu"}),n.jsxs(U,{htmlFor:"ivr-menu",className:"font-normal cursor-pointer",children:[n.jsx("span",{className:"font-semibold",children:"IVR"})," - Keypad menu system"]})]}),n.jsxs("div",{className:"flex items-center space-x-3 space-y-0",children:[n.jsx(Kn,{value:"ai-voice",id:"ivr-ai","data-testid":"radio-ivr-ai"}),n.jsxs(U,{htmlFor:"ivr-ai",className:"font-normal cursor-pointer",children:[n.jsx("span",{className:"font-semibold",children:"AI Voice"})," - AI receptionist (beta)"]})]})]})}),n.jsx(Ze,{})]})})]})}),n.jsx(O,{className:"p-6",children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center gap-2 pb-2 border-b border-gray-200 dark:border-gray-700",children:[n.jsx(au,{className:"w-5 h-5 text-pink-500"}),n.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100",children:"Website & Branding"})]}),n.jsx(Ye,{control:a.control,name:"websiteUrl",render:({field:u})=>n.jsxs(We,{children:[n.jsx(qe,{children:"Website URL"}),n.jsx(Qe,{children:n.jsxs("div",{className:"relative",children:[n.jsx(aQ,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),n.jsx(se,{...u,placeholder:"https://example.com",className:"pl-10","data-testid":"input-website-url"})]})}),n.jsx(cn,{children:"Tenant's existing website (optional)"}),n.jsx(Ze,{})]})}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsx(Ye,{control:a.control,name:"primaryColor",render:({field:u})=>n.jsxs(We,{children:[n.jsx(qe,{children:"Primary Color"}),n.jsx(Qe,{children:n.jsxs("div",{className:"flex gap-3",children:[n.jsx("input",{type:"color",value:u.value||"#3b82f6",onChange:f=>u.onChange(f.target.value),className:"h-11 w-14 cursor-pointer rounded border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800","data-testid":"color-picker-primary"}),n.jsx(se,{...u,placeholder:"#3b82f6",className:"flex-1","data-testid":"input-primary-color"})]})}),n.jsx(cn,{children:"Primary brand color"}),n.jsx(Ze,{})]})}),n.jsx(Ye,{control:a.control,name:"accentColor",render:({field:u})=>n.jsxs(We,{children:[n.jsx(qe,{children:"Accent Color"}),n.jsx(Qe,{children:n.jsxs("div",{className:"flex gap-3",children:[n.jsx("input",{type:"color",value:u.value||"#ec4899",onChange:f=>u.onChange(f.target.value),className:"h-11 w-14 cursor-pointer rounded border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800","data-testid":"color-picker-accent"}),n.jsx(se,{...u,placeholder:"#ec4899",className:"flex-1","data-testid":"input-accent-color"})]})}),n.jsx(cn,{children:"Secondary brand color"}),n.jsx(Ze,{})]})})]})]})}),n.jsx(O,{className:"p-6",children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center gap-2 pb-2 border-b border-gray-200 dark:border-gray-700",children:[n.jsx(bs,{className:"w-5 h-5 text-orange-500"}),n.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100",children:"Additional Options"})]}),n.jsx(Ye,{control:a.control,name:"internalNotes",render:({field:u})=>n.jsxs(We,{children:[n.jsx(qe,{children:"Internal Notes"}),n.jsx(Qe,{children:n.jsx(un,{...u,placeholder:"Owner-only notes about this tenant...",className:"min-h-[100px]","data-testid":"textarea-internal-notes"})}),n.jsx(cn,{children:"Private notes visible only to admins"}),n.jsx(Ze,{})]})}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Onboarding Messaging"}),n.jsx(Ye,{control:a.control,name:"sendWelcomeEmail",render:({field:u})=>n.jsxs(We,{className:"flex flex-row items-start space-x-3 space-y-0",children:[n.jsx(Qe,{children:n.jsx("input",{type:"checkbox",checked:u.value,onChange:u.onChange,className:"mt-1","data-testid":"checkbox-send-welcome-email"})}),n.jsxs("div",{className:"space-y-1 leading-none",children:[n.jsx(qe,{className:"cursor-pointer",children:"Send welcome email to primary contact"}),n.jsx(cn,{children:"(Feature coming soon - not yet implemented)"})]})]})}),n.jsx(Ye,{control:a.control,name:"sendWelcomeSms",render:({field:u})=>n.jsxs(We,{className:"flex flex-row items-start space-x-3 space-y-0",children:[n.jsx(Qe,{children:n.jsx("input",{type:"checkbox",checked:u.value,onChange:u.onChange,className:"mt-1","data-testid":"checkbox-send-welcome-sms"})}),n.jsxs("div",{className:"space-y-1 leading-none",children:[n.jsx(qe,{className:"cursor-pointer",children:"Send welcome SMS to primary contact"}),n.jsx(cn,{children:"(Feature coming soon - not yet implemented)"})]})]})})]})]})}),n.jsxs("div",{className:"flex justify-end gap-4",children:[n.jsx(_,{type:"button",variant:"outline",onClick:()=>a.reset(),"data-testid":"button-reset",children:"Reset Form"}),n.jsx(_,{type:"submit",disabled:i.isPending,"data-testid":"button-submit",children:i.isPending?n.jsx(n.Fragment,{children:"Creating Tenant..."}):n.jsxs(n.Fragment,{children:[n.jsx(ln,{className:"w-4 h-4 mr-2"}),"Create Tenant via Concierge"]})})]})]})})]})})}function Jht(){const e=cs(),{toast:t}=Ee(),[r,s]=p.useState({}),[a,i]=p.useState({}),{data:o,isLoading:l,error:c}=be({queryKey:["/api/suggestions/platform"]}),d=je({mutationFn:async({id:m,handled:g,notes:x})=>Ne(`/api/suggestions/${m}`,{method:"PATCH",body:JSON.stringify({handled:g,notes:x})}),onSuccess:()=>{e.invalidateQueries({queryKey:["/api/suggestions/platform"]}),t({title:"Suggestion updated"})},onError:m=>{t({title:"Update failed",description:m.message,variant:"destructive"})}}),u=je({mutationFn:async m=>Ne(`/api/suggestions/${m}`,{method:"DELETE"}),onSuccess:()=>{e.invalidateQueries({queryKey:["/api/suggestions/platform"]}),t({title:"Suggestion deleted"})},onError:m=>{t({title:"Delete failed",description:m.message,variant:"destructive"})}});if(l)return n.jsx("div",{className:"flex items-center justify-center min-h-screen",children:n.jsx(nt,{className:"h-8 w-8 animate-spin text-primary"})});if(c)return n.jsx("div",{className:"max-w-4xl mx-auto py-8 px-4",children:n.jsx(O,{className:"border-destructive",children:n.jsx(H,{className:"pt-6",children:n.jsx("p",{className:"text-destructive",children:"Failed to load suggestions. Please try again."})})})});const f=(o==null?void 0:o.suggestions)||[],h=f.filter(m=>!m.handled).length;return n.jsxs("div",{className:"max-w-4xl mx-auto py-8 px-4",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx(on,{className:"h-8 w-8 text-primary"}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold",children:"ServicePro Feedback Inbox"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Suggestions and feedback from platform users about ServicePro itself"})]}),h>0&&n.jsxs(ge,{variant:"secondary",className:"ml-auto",children:[h," open"]})]}),n.jsxs("div",{className:"space-y-4",children:[f.length===0&&n.jsx(O,{children:n.jsxs(H,{className:"py-12 text-center",children:[n.jsx(on,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"No suggestions yet."})]})}),f.map(m=>n.jsx(O,{className:m.handled?"opacity-70":"","data-testid":`suggestion-card-${m.id}`,children:n.jsxs(H,{className:"pt-4",children:[n.jsxs("div",{className:"flex items-start justify-between gap-4 mb-3",children:[n.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[n.jsxs("span",{children:["#",m.id]}),n.jsx("span",{children:""}),n.jsx("span",{children:new Date(m.createdAt).toLocaleString()}),m.context&&n.jsxs(n.Fragment,{children:[n.jsx("span",{children:""}),n.jsx(ge,{variant:"outline",className:"text-xs",children:m.context})]})]}),n.jsx(ge,{variant:m.handled?"default":"secondary",className:m.handled?"bg-emerald-500":"bg-amber-500 text-white",children:m.handled?"Handled":"Open"})]}),n.jsx("p",{className:"text-sm whitespace-pre-wrap mb-3","data-testid":`suggestion-message-${m.id}`,children:m.message}),(m.name||m.contact)&&n.jsxs("div",{className:"text-xs text-muted-foreground mb-3 flex items-center gap-2",children:[m.name&&n.jsxs("span",{children:["From: ",m.name]}),m.contact&&n.jsxs("span",{children:[" Contact: ",m.contact]})]}),m.handledBy&&m.handledAt&&n.jsxs("div",{className:"text-xs text-muted-foreground mb-3",children:["Handled by ",m.handledBy," on ",new Date(m.handledAt).toLocaleString()]}),n.jsxs("div",{className:"flex items-center gap-2 mt-4",children:[m.handled?n.jsxs(_,{size:"sm",variant:"outline",onClick:()=>d.mutate({id:m.id,handled:!1}),disabled:d.isPending,"data-testid":`button-reopen-${m.id}`,children:[n.jsx(E0,{className:"h-4 w-4 mr-1"}),"Reopen"]}):n.jsxs(_,{size:"sm",onClick:()=>d.mutate({id:m.id,handled:!0}),disabled:d.isPending,"data-testid":`button-handle-${m.id}`,children:[n.jsx(nn,{className:"h-4 w-4 mr-1"}),"Mark as Handled"]}),n.jsxs(_,{size:"sm",variant:"ghost",onClick:()=>s(g=>({...g,[m.id]:!g[m.id]})),"data-testid":`button-notes-${m.id}`,children:[r[m.id]?n.jsx(T0,{className:"h-4 w-4"}):n.jsx(Ui,{className:"h-4 w-4"}),"Notes"]}),n.jsx(_,{size:"sm",variant:"ghost",className:"text-destructive hover:text-destructive",onClick:()=>{confirm("Are you sure you want to delete this suggestion?")&&u.mutate(m.id)},disabled:u.isPending,"data-testid":`button-delete-${m.id}`,children:n.jsx(Nr,{className:"h-4 w-4"})})]}),r[m.id]&&n.jsxs("div",{className:"mt-3 pt-3 border-t",children:[n.jsx(un,{placeholder:"Add internal notes about this suggestion...",value:a[m.id]??m.notes??"",onChange:g=>i(x=>({...x,[m.id]:g.target.value})),className:"text-sm mb-2",rows:3,"data-testid":`input-notes-${m.id}`}),n.jsx(_,{size:"sm",variant:"secondary",onClick:()=>d.mutate({id:m.id,notes:a[m.id]??m.notes??""}),disabled:d.isPending,"data-testid":`button-save-notes-${m.id}`,children:"Save Notes"})]})]})},m.id))]})]})}function Zht(){const e=cs(),{toast:t}=Ee(),[r,s]=p.useState({}),[a,i]=p.useState({}),{data:o,isLoading:l,error:c}=be({queryKey:["/api/suggestions/tenant"]}),d=je({mutationFn:async({id:y,handled:v,notes:b})=>Ne(`/api/suggestions/${y}`,{method:"PATCH",body:JSON.stringify({handled:v,notes:b})}),onSuccess:()=>{e.invalidateQueries({queryKey:["/api/suggestions/tenant"]}),t({title:"Suggestion updated"})},onError:y=>{t({title:"Update failed",description:y.message,variant:"destructive"})}}),u=je({mutationFn:async y=>Ne(`/api/suggestions/${y}`,{method:"DELETE"}),onSuccess:()=>{e.invalidateQueries({queryKey:["/api/suggestions/tenant"]}),t({title:"Suggestion deleted"})},onError:y=>{t({title:"Delete failed",description:y.message,variant:"destructive"})}});if(l)return n.jsx("div",{className:"flex items-center justify-center min-h-screen",children:n.jsx(nt,{className:"h-8 w-8 animate-spin text-primary"})});if(c)return n.jsx("div",{className:"max-w-4xl mx-auto py-8 px-4",children:n.jsx(O,{className:"border-destructive",children:n.jsx(H,{className:"pt-6",children:n.jsx("p",{className:"text-destructive",children:"Failed to load suggestions. Please try again."})})})});const f=(o==null?void 0:o.suggestions)||[],h=f.filter(y=>y.source==="tenant_customer"),m=f.filter(y=>y.source==="tenant_owner"),g=f.filter(y=>!y.handled).length,x=y=>n.jsx(O,{className:y.handled?"opacity-70":"","data-testid":`suggestion-card-${y.id}`,children:n.jsxs(H,{className:"pt-4",children:[n.jsxs("div",{className:"flex items-start justify-between gap-4 mb-3",children:[n.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[n.jsxs("span",{children:["#",y.id]}),n.jsx("span",{children:""}),n.jsx("span",{children:new Date(y.createdAt).toLocaleString()}),y.context&&n.jsxs(n.Fragment,{children:[n.jsx("span",{children:""}),n.jsx(ge,{variant:"outline",className:"text-xs",children:y.context})]}),n.jsx(ge,{variant:"outline",className:"text-xs",children:y.source==="tenant_customer"?"Customer":"Staff"})]}),n.jsx(ge,{variant:y.handled?"default":"secondary",className:y.handled?"bg-emerald-500":"bg-amber-500 text-white",children:y.handled?"Handled":"Open"})]}),n.jsx("p",{className:"text-sm whitespace-pre-wrap mb-3","data-testid":`suggestion-message-${y.id}`,children:y.message}),(y.name||y.contact)&&n.jsxs("div",{className:"text-xs text-muted-foreground mb-3 flex items-center gap-2",children:[y.name&&n.jsxs("span",{children:["From: ",y.name]}),y.contact&&n.jsxs("span",{children:[" Contact: ",y.contact]})]}),y.handledBy&&y.handledAt&&n.jsxs("div",{className:"text-xs text-muted-foreground mb-3",children:["Handled by ",y.handledBy," on ",new Date(y.handledAt).toLocaleString()]}),n.jsxs("div",{className:"flex items-center gap-2 mt-4",children:[y.handled?n.jsxs(_,{size:"sm",variant:"outline",onClick:()=>d.mutate({id:y.id,handled:!1}),disabled:d.isPending,"data-testid":`button-reopen-${y.id}`,children:[n.jsx(E0,{className:"h-4 w-4 mr-1"}),"Reopen"]}):n.jsxs(_,{size:"sm",onClick:()=>d.mutate({id:y.id,handled:!0}),disabled:d.isPending,"data-testid":`button-handle-${y.id}`,children:[n.jsx(nn,{className:"h-4 w-4 mr-1"}),"Mark as Handled"]}),n.jsxs(_,{size:"sm",variant:"ghost",onClick:()=>s(v=>({...v,[y.id]:!v[y.id]})),"data-testid":`button-notes-${y.id}`,children:[r[y.id]?n.jsx(T0,{className:"h-4 w-4"}):n.jsx(Ui,{className:"h-4 w-4"}),"Notes"]}),n.jsx(_,{size:"sm",variant:"ghost",className:"text-destructive hover:text-destructive",onClick:()=>{confirm("Are you sure you want to delete this suggestion?")&&u.mutate(y.id)},disabled:u.isPending,"data-testid":`button-delete-${y.id}`,children:n.jsx(Nr,{className:"h-4 w-4"})})]}),r[y.id]&&n.jsxs("div",{className:"mt-3 pt-3 border-t",children:[n.jsx(un,{placeholder:"Add internal notes about this suggestion...",value:a[y.id]??y.notes??"",onChange:v=>i(b=>({...b,[y.id]:v.target.value})),className:"text-sm mb-2",rows:3,"data-testid":`input-notes-${y.id}`}),n.jsx(_,{size:"sm",variant:"secondary",onClick:()=>d.mutate({id:y.id,notes:a[y.id]??y.notes??""}),disabled:d.isPending,"data-testid":`button-save-notes-${y.id}`,children:"Save Notes"})]})]})},y.id);return n.jsxs("div",{className:"max-w-4xl mx-auto py-8 px-4",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx(br,{className:"h-8 w-8 text-primary"}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold",children:"Customer & Staff Suggestions"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Feedback from your customers and staff about your business"})]}),g>0&&n.jsxs(ge,{variant:"secondary",className:"ml-auto",children:[g," open"]})]}),f.length===0?n.jsx(O,{children:n.jsxs(H,{className:"py-12 text-center",children:[n.jsx(on,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"No suggestions yet."}),n.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Customer suggestions will appear here when they submit feedback through your website."})]})}):n.jsxs("div",{className:"space-y-6",children:[h.length>0&&n.jsxs("div",{children:[n.jsxs("h2",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:[n.jsx(br,{className:"h-5 w-5"}),"Customer Feedback (",h.length,")"]}),n.jsx("div",{className:"space-y-4",children:h.map(x)})]}),m.length>0&&n.jsxs("div",{children:[n.jsxs("h2",{className:"text-lg font-semibold mb-3 flex items-center gap-2",children:[n.jsx(on,{className:"h-5 w-5"}),"Staff Suggestions (",m.length,")"]}),n.jsx("div",{className:"space-y-4",children:m.map(x)})]})]})]})}function Xht(){const{toast:e}=Ee(),{dashboardTheme:t,setDashboardTheme:r}=EQ(),[s,a]=p.useState(null),[i,o]=p.useState(!1),l=f=>{a(f);const h=$m.find(m=>m.id===f);if(h){const m=document.documentElement;Object.entries(h.cssVariables).forEach(([g,x])=>{m.style.setProperty(`--${g}`,x)})}},c=()=>{if(s){o(!0);const f=$m.find(h=>h.id===s);f&&(r(s),e({title:"Theme Applied",description:`Your dashboard is now using the ${f.name} theme.`}),a(null)),o(!1)}},d=()=>{a(null);const f=document.documentElement;Object.entries(t.cssVariables).forEach(([h,m])=>{f.style.setProperty(`--${h}`,m)})},u=s||t.id;return n.jsx(xn,{children:n.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx("div",{className:"p-2 bg-gradient-to-br from-purple-500 to-pink-500 rounded-lg",children:n.jsx(au,{className:"w-6 h-6 text-white"})}),n.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:"Theme Gallery"})]}),n.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Choose from a collection of beautifully designed themes to personalize your dashboard"})]}),s&&s!==t.id&&n.jsxs("div",{className:"flex gap-3",children:[n.jsx(_,{onClick:d,variant:"outline",size:"lg","data-testid":"button-cancel-preview",children:"Cancel"}),n.jsx(_,{onClick:c,disabled:i,size:"lg",className:"gap-2","data-testid":"button-apply-theme",children:i?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Applying..."]}):n.jsxs(n.Fragment,{children:[n.jsx(ln,{className:"w-4 h-4"}),"Apply Theme"]})})]})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:$m.map(f=>n.jsxs(O,{className:`
                relative overflow-hidden cursor-pointer transition-all duration-200 hover:shadow-xl
                ${u===f.id?"ring-2 ring-primary ring-offset-2":""}
              `,onClick:()=>l(f.id),"data-testid":`theme-card-${f.id}`,children:[u===f.id&&n.jsx("div",{className:"absolute top-4 right-4 z-10 bg-primary text-primary-foreground rounded-full p-2",children:n.jsx(Mr,{className:"w-5 h-5"})}),n.jsx("div",{className:"h-48 p-6 relative",style:{backgroundColor:f.preview.background},children:n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{className:"h-8 rounded-lg",style:{backgroundColor:f.preview.primary,boxShadow:`0 4px 12px ${f.preview.primary}40`}}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("div",{className:"h-6 w-1/3 rounded",style:{backgroundColor:f.preview.secondary}}),n.jsx("div",{className:"h-6 w-1/2 rounded",style:{backgroundColor:f.preview.accent}})]}),n.jsxs("div",{className:"h-16 rounded-lg p-4 flex items-center gap-3",style:{backgroundColor:f.preview.surface},children:[n.jsx("div",{className:"w-10 h-10 rounded-full",style:{backgroundColor:f.preview.primary}}),n.jsxs("div",{className:"flex-1 space-y-2",children:[n.jsx("div",{className:"h-2 w-3/4 rounded",style:{backgroundColor:f.preview.text,opacity:.7}}),n.jsx("div",{className:"h-2 w-1/2 rounded",style:{backgroundColor:f.preview.text,opacity:.5}})]})]})]})}),n.jsxs("div",{className:"p-6 bg-white dark:bg-gray-950 border-t border-gray-200 dark:border-gray-800",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-1",children:f.name}),n.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:f.description}),n.jsx("div",{className:"flex gap-2 mt-4",children:Object.entries(f.preview).slice(0,4).map(([h,m])=>n.jsx("div",{className:"w-8 h-8 rounded-full border-2 border-white dark:border-gray-800 shadow-sm",style:{backgroundColor:m},title:h},h))})]})]},f.id))}),n.jsx(O,{className:"p-6 bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-950/20 dark:to-indigo-950/20 border-blue-200 dark:border-blue-800",children:n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-900 rounded-lg",children:n.jsx(au,{className:"w-6 h-6 text-blue-600 dark:text-blue-300"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100 mb-1",children:"Current Theme"}),n.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["You're currently using the"," ",n.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:t.name})," ",'theme. Select a different theme above to preview it, then click "Apply Theme" to save your choice.']})]})]})})]})})}function emt({token:e,currentAmount:t,onDiscountApplied:r}){var h;const[s,a]=p.useState(""),[i,o]=p.useState(!1),[l,c]=p.useState(null),d=je({mutationFn:async()=>(await Ne("POST",`/api/payer-approval/${e}/apply-referral`,{referralCode:s.trim().toUpperCase()})).json(),onSuccess:m=>{o(!0),c(m),!m.isInformational&&m.discountedTotal!==void 0&&r&&r(m.discountedTotal,m.discountedDeposit)},onError:()=>{}}),u=()=>{if(!s.trim()){alert("Please enter a referral code");return}d.mutate()},f=m=>{m.key==="Enter"&&s.trim()&&u()};return n.jsx(O,{className:"border-dashed border-2 border-blue-200 dark:border-blue-800 bg-gradient-to-br from-blue-50 to-purple-50 dark:from-blue-950/30 dark:to-purple-950/30",children:n.jsx(H,{className:"pt-6",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(jr,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"}),n.jsx("h3",{className:"font-semibold text-blue-900 dark:text-blue-100",children:"Have a referral code?"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("div",{className:"relative flex-1",children:n.jsx(se,{type:"text",placeholder:"Enter code (e.g., JOHN-AB3C5)",value:s,onChange:m=>a(m.target.value.toUpperCase()),onKeyPress:f,disabled:i||d.isPending,className:"pr-10 font-mono uppercase",maxLength:20,"data-testid":"input-payer-referral-code"})}),n.jsx(_,{onClick:u,disabled:!s.trim()||i||d.isPending,className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700","data-testid":"button-apply-payer-code",children:d.isPending?n.jsxs(n.Fragment,{children:[n.jsx(nt,{className:"h-4 w-4 mr-2 animate-spin"}),"Applying..."]}):i?n.jsxs(n.Fragment,{children:[n.jsx(nn,{className:"h-4 w-4 mr-2"}),"Applied"]}):n.jsxs(n.Fragment,{children:[n.jsx(Jv,{className:"h-4 w-4 mr-2"}),"Apply"]})})]}),i&&l&&n.jsxs(Ln,{className:"border-green-300 dark:border-green-800 bg-green-50 dark:bg-green-950/30",children:[n.jsx(nn,{className:"h-4 w-4 text-green-600 dark:text-green-400"}),n.jsx(Dn,{className:"text-green-800 dark:text-green-200",children:n.jsxs("div",{className:"space-y-2",children:[n.jsx("p",{className:"font-medium",children:l.message}),l.referrerName&&n.jsxs("p",{className:"text-sm",children:["Referred by: ",n.jsx("span",{className:"font-semibold",children:l.referrerName})]}),!l.isInformational&&l.computedDiscount!==void 0&&n.jsx("div",{className:"pt-2 mt-2 border-t border-green-200 dark:border-green-800 text-sm",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{children:"Discount applied:"}),n.jsxs("span",{className:"font-bold text-green-700 dark:text-green-300",children:["-$",l.computedDiscount.toFixed(2)]})]})})]})})]}),d.isError&&n.jsxs(Ln,{className:"border-red-300 dark:border-red-800 bg-red-50 dark:bg-red-950/30",children:[n.jsx(Ws,{className:"h-4 w-4 text-red-600 dark:text-red-400"}),n.jsx(Dn,{className:"text-red-800 dark:text-red-200",children:((h=d.error)==null?void 0:h.message)||"Failed to apply referral code"})]})]})})})}function tmt(){const[,e]=k0("/approve/:token");zt();const t=(e==null?void 0:e.token)||"",[r,s]=p.useState(""),[a,i]=p.useState(!1),[o,l]=p.useState(""),[c,d]=p.useState(null),[u,f]=p.useState(null),{data:h,isLoading:m,error:g}=be({queryKey:["/api/payer-approval",t],queryFn:async()=>{const T=await fetch(`/api/payer-approval/${t}`,{credentials:"include"});if(!T.ok){const I=await T.json();throw new Error(I.error||"Failed to fetch approval data")}return T.json()},enabled:!!t&&t.length>10,retry:!1}),x=je({mutationFn:async T=>(await Ne("POST",`/api/payer-approval/${t}/verify-otp`,{otp:T})).json(),onSuccess:()=>{i(!0)},onError:T=>{alert(T.message||"Invalid OTP code. Please try again.")}}),y=je({mutationFn:async()=>(await Ne("POST",`/api/payer-approval/${t}/approve`,{ipAddress:window.location.hostname,userAgent:navigator.userAgent})).json(),onSuccess:T=>{T.paymentLink&&(window.location.href=T.paymentLink)},onError:T=>{alert(T.message||"Failed to approve. Please try again.")}}),v=je({mutationFn:async()=>(await Ne("POST",`/api/payer-approval/${t}/decline`,{reason:o,ipAddress:window.location.hostname,userAgent:navigator.userAgent})).json(),onSuccess:()=>{},onError:T=>{alert(T.message||"Failed to decline. Please try again.")}}),b=()=>{if(!r||r.length<4){alert("Please enter a valid OTP code");return}x.mutate(r)},w=()=>{y.mutate()},N=()=>{if(!o.trim()){alert("Please provide a reason for declining");return}v.mutate()};if(m)return n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-slate-900 dark:to-slate-800 flex items-center justify-center p-4",children:n.jsx(O,{className:"w-full max-w-md",children:n.jsxs(H,{className:"py-12 text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"Loading approval details..."})]})})});if(g||!h)return n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-red-50 to-orange-100 dark:from-slate-900 dark:to-slate-800 flex items-center justify-center p-4",children:n.jsxs(O,{className:"w-full max-w-md",children:[n.jsx(ee,{children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Wt,{className:"h-6 w-6 text-destructive"}),n.jsx(te,{children:"Invalid or Expired Link"})]})}),n.jsx(H,{className:"space-y-4",children:n.jsx(Ln,{variant:"destructive",children:n.jsx(Dn,{children:(g==null?void 0:g.message)||"This approval link is invalid or has expired. Please contact the business for a new link."})})})]})});const{authorization:j,appointment:S,serviceContact:C,payer:k,businessName:M,businessPhone:A}=h;return j.status==="approved"?n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-emerald-100 dark:from-slate-900 dark:to-slate-800 flex items-center justify-center p-4",children:n.jsxs(O,{className:"w-full max-w-md",children:[n.jsx(ee,{children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(nn,{className:"h-6 w-6 text-green-600"}),n.jsx(te,{children:"Already Approved"})]})}),n.jsx(H,{children:n.jsxs(Ln,{children:[n.jsx(nn,{className:"h-4 w-4"}),n.jsx(Dn,{children:"This job has already been approved. Thank you!"})]})})]})}):j.status==="declined"?n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-900 dark:to-slate-800 flex items-center justify-center p-4",children:n.jsxs(O,{className:"w-full max-w-md",children:[n.jsx(ee,{children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ws,{className:"h-6 w-6 text-destructive"}),n.jsx(te,{children:"Previously Declined"})]})}),n.jsx(H,{children:n.jsxs(Ln,{children:[n.jsx(Ws,{className:"h-4 w-4"}),n.jsxs(Dn,{children:["This job has been declined. If you'd like to reconsider, please contact ",M," at ",A,"."]})]})})]})}):new Date(j.expiresAt)<new Date?n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 to-yellow-100 dark:from-slate-900 dark:to-slate-800 flex items-center justify-center p-4",children:n.jsxs(O,{className:"w-full max-w-md",children:[n.jsx(ee,{children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Rt,{className:"h-6 w-6 text-orange-600"}),n.jsx(te,{children:"Link Expired"})]})}),n.jsx(H,{children:n.jsxs(Ln,{variant:"destructive",children:[n.jsx(Wt,{className:"h-4 w-4"}),n.jsxs(Dn,{children:["This approval link expired on ",Ie(new Date(j.expiresAt),"PPp"),". Please contact ",M," at ",A," for a new approval link."]})]})})]})}):a?n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-slate-900 dark:to-slate-800 p-4",children:n.jsxs("div",{className:"max-w-2xl mx-auto space-y-6 py-8",children:[n.jsx(O,{className:"border-2 border-primary",children:n.jsxs(ee,{className:"text-center",children:[n.jsx("div",{className:"flex items-center justify-center gap-2 mb-2",children:S.isGift?n.jsx(jr,{className:"h-8 w-8 text-pink-600"}):n.jsx(ln,{className:"h-8 w-8 text-primary"})}),n.jsx(te,{className:"text-2xl",children:S.isGift?"Gift Service Approval":"Payment Approval Request"}),n.jsxs(ke,{children:["From ",M]})]})}),S.isGift&&S.giftMessage&&n.jsxs(O,{className:"bg-pink-50 border-pink-200 dark:bg-pink-900/20 dark:border-pink-800",children:[n.jsx(ee,{children:n.jsxs(te,{className:"text-lg flex items-center gap-2",children:[n.jsx(jr,{className:"h-5 w-5"}),"Gift Message"]})}),n.jsx(H,{children:n.jsx("p",{className:"text-sm italic",children:S.giftMessage})})]}),n.jsxs(O,{children:[n.jsx(ee,{children:n.jsx(te,{children:"Service Details"})}),n.jsx(H,{className:"space-y-4",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(Ys,{className:"h-5 w-5 text-muted-foreground mt-0.5"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Service"}),n.jsx("p",{className:"font-medium",children:S.serviceName})]})]}),n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(Dt,{className:"h-5 w-5 text-muted-foreground mt-0.5"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Scheduled"}),n.jsx("p",{className:"font-medium",children:Ie(new Date(S.scheduledTime),"PPp")})]})]}),n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(zr,{className:"h-5 w-5 text-muted-foreground mt-0.5"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Location"}),n.jsx("p",{className:"font-medium",children:S.address})]})]}),n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(Fn,{className:"h-5 w-5 text-muted-foreground mt-0.5"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Service Contact"}),n.jsx("p",{className:"font-medium",children:C.name}),n.jsx("p",{className:"text-sm text-muted-foreground",children:C.phone})]})]}),S.vehicleDesc&&n.jsxs("div",{className:"flex items-start gap-3 col-span-full",children:[n.jsx(Ys,{className:"h-5 w-5 text-muted-foreground mt-0.5"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Vehicle"}),n.jsx("p",{className:"font-medium",children:S.vehicleDesc})]})]})]})})]}),S.estimatedPrice&&!S.isGift&&n.jsxs(O,{children:[n.jsx(ee,{children:n.jsx(te,{children:"Payment Details"})}),n.jsxs(H,{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-muted-foreground",children:c!==null?"Original Price":"Estimated Total"}),n.jsxs("span",{className:`text-2xl font-bold ${c!==null?"line-through text-muted-foreground":""}`,children:["$",S.estimatedPrice.toFixed(2)]})]}),c!==null&&n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-green-600 dark:text-green-400 font-medium",children:"New Total"}),n.jsxs("span",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:["$",c.toFixed(2)]})]}),S.depositPercent&&S.depositAmount&&n.jsxs(n.Fragment,{children:[n.jsx(Ot,{}),n.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("span",{className:"font-medium",children:["Deposit Required (",S.depositPercent,"%)"]}),n.jsxs("span",{className:"text-xl font-bold text-blue-600",children:["$",u!==null?u.toFixed(2):S.depositAmount.toFixed(2)]})]}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Deposit secures your appointment. Balance due upon completion."})]})]})]})]}),S.estimatedPrice&&!S.isGift&&n.jsx(emt,{token:t,currentAmount:c!==null?c:S.estimatedPrice,onDiscountApplied:(T,I)=>{d(T),I!==void 0&&f(I)}}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsx(_,{size:"lg",onClick:w,disabled:y.isPending,className:"h-16 text-lg","data-testid":"button-approve",children:y.isPending?"Processing...":n.jsxs(n.Fragment,{children:[n.jsx(nn,{className:"mr-2 h-5 w-5"}),"Approve & ",S.depositAmount?"Pay Deposit":"Continue"]})}),n.jsx(_,{size:"lg",variant:"destructive",onClick:()=>{const T=prompt("Why are you declining? (Optional)");T!==null&&(l(T||"No reason provided"),N())},disabled:v.isPending,className:"h-16 text-lg","data-testid":"button-decline",children:v.isPending?"Processing...":n.jsxs(n.Fragment,{children:[n.jsx(Ws,{className:"mr-2 h-5 w-5"}),"Decline"]})})]}),n.jsx(O,{className:"bg-muted/50",children:n.jsx(H,{className:"py-4",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(Wt,{className:"h-5 w-5 text-muted-foreground mt-0.5"}),n.jsxs("div",{className:"text-sm text-muted-foreground space-y-1",children:[n.jsx("p",{children:n.jsx("strong",{children:"What happens next?"})}),n.jsxs("p",{children:["If you approve, ",S.depositAmount?"you'll be redirected to securely pay the deposit":"we'll confirm your appointment",". You'll receive a confirmation via text message."]}),n.jsxs("p",{className:"mt-2",children:["Questions? Contact ",M," at ",A]})]})]})})})]})}):n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-slate-900 dark:to-slate-800 flex items-center justify-center p-4",children:n.jsxs(O,{className:"w-full max-w-md",children:[n.jsxs(ee,{children:[n.jsx(te,{className:"text-2xl",children:"Verify Your Identity"}),n.jsxs(ke,{children:["We sent a security code to ",k.phone,". Please enter it below to continue."]})]}),n.jsxs(H,{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(U,{htmlFor:"otp",children:"Security Code"}),n.jsx(se,{id:"otp",type:"text",placeholder:"Enter 6-digit code",value:r,onChange:T=>s(T.target.value.replace(/\D/g,"").slice(0,6)),maxLength:6,className:"text-center text-2xl tracking-widest","data-testid":"input-otp"})]}),n.jsx(_,{onClick:b,className:"w-full",disabled:x.isPending||r.length<4,"data-testid":"button-verify-otp",children:x.isPending?"Verifying...":"Verify Code"}),n.jsxs("p",{className:"text-xs text-center text-muted-foreground",children:["Didn't receive a code? Check your spam folder or contact ",M,"."]})]})]})})}function nmt(){const[,e]=k0("/quote-approval/:token"),t=(e==null?void 0:e.token)||"",[r,s]=p.useState(""),[a,i]=p.useState(!1),[o,l]=p.useState(""),{data:c,isLoading:d,error:u}=be({queryKey:["/api/quote-approval",t],queryFn:async()=>{const b=await fetch(`/api/quote-approval/${t}`,{credentials:"include"});if(!b.ok){const w=await b.json();throw new Error(w.error||"Failed to fetch quote data")}return b.json()},enabled:!!t&&t.length>10,retry:!1}),f=je({mutationFn:async b=>(await Ne("POST",`/api/quote-approval/${t}/verify-otp`,{otp:b})).json(),onSuccess:()=>{i(!0)},onError:b=>{alert(b.message||"Invalid OTP code. Please try again.")}}),h=je({mutationFn:async()=>(await Ne("POST",`/api/quote-approval/${t}/approve`,{otp:r,ipAddress:window.location.hostname,userAgent:navigator.userAgent})).json(),onSuccess:b=>{b.bookingToken&&setTimeout(()=>{window.location.href=`/quick-booking?quote=${b.bookingToken}`},2e3)},onError:b=>{alert(b.message||"Failed to approve quote. Please try again.")}}),m=je({mutationFn:async()=>(await Ne("POST",`/api/quote-approval/${t}/decline`,{otp:r,reason:o,ipAddress:window.location.hostname,userAgent:navigator.userAgent})).json(),onSuccess:()=>{},onError:b=>{alert(b.message||"Failed to decline quote. Please try again.")}}),g=()=>{if(!r||r.length<4){alert("Please enter a valid OTP code");return}f.mutate(r)},x=()=>{h.mutate()},y=()=>{if(!o.trim()){alert("Please provide a reason for declining");return}m.mutate()};if(d)return n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-slate-900 dark:to-slate-800 flex items-center justify-center p-4",children:n.jsx(O,{className:"w-full max-w-md",children:n.jsx(H,{className:"p-8",children:n.jsxs("div",{className:"flex flex-col items-center gap-4",children:[n.jsx(Rt,{className:"w-12 h-12 animate-spin text-blue-600"}),n.jsx("p",{className:"text-center text-muted-foreground",children:"Loading quote details..."})]})})})});if(u||!c)return n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-red-50 to-orange-100 dark:from-slate-900 dark:to-slate-800 flex items-center justify-center p-4",children:n.jsx(O,{className:"w-full max-w-md border-red-200",children:n.jsx(H,{className:"p-8",children:n.jsxs("div",{className:"flex flex-col items-center gap-4",children:[n.jsx(Wt,{className:"w-12 h-12 text-red-600"}),n.jsxs("div",{className:"text-center",children:[n.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Quote Not Found"}),n.jsx("p",{className:"text-muted-foreground",children:(u==null?void 0:u.message)||"This quote link is invalid or has expired."})]})]})})})});if(c.quote.status==="approved")return n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-emerald-100 dark:from-slate-900 dark:to-slate-800 flex items-center justify-center p-4",children:n.jsx(O,{className:"w-full max-w-md border-green-200",children:n.jsx(H,{className:"p-8",children:n.jsxs("div",{className:"flex flex-col items-center gap-4 text-center",children:[n.jsx(nn,{className:"w-16 h-16 text-green-600"}),n.jsx("h2",{className:"text-2xl font-bold",children:"Quote Already Approved"}),n.jsx("p",{className:"text-muted-foreground",children:"This quote was approved. The business will contact you to schedule the service."}),n.jsxs("p",{className:"text-sm text-muted-foreground mt-4",children:["Questions? Call ",c.businessName," at ",c.businessPhone]})]})})})});if(c.quote.status==="declined")return n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-red-50 to-orange-100 dark:from-slate-900 dark:to-slate-800 flex items-center justify-center p-4",children:n.jsx(O,{className:"w-full max-w-md border-red-200",children:n.jsx(H,{className:"p-8",children:n.jsxs("div",{className:"flex flex-col items-center gap-4 text-center",children:[n.jsx(Ws,{className:"w-16 h-16 text-red-600"}),n.jsx("h2",{className:"text-2xl font-bold",children:"Quote Declined"}),n.jsx("p",{className:"text-muted-foreground",children:"This quote was previously declined."}),n.jsxs("p",{className:"text-sm text-muted-foreground mt-4",children:["Questions? Call ",c.businessName," at ",c.businessPhone]})]})})})});if(h.isSuccess)return n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-emerald-100 dark:from-slate-900 dark:to-slate-800 flex items-center justify-center p-4",children:n.jsx(O,{className:"w-full max-w-md border-green-200",children:n.jsx(H,{className:"p-8",children:n.jsxs("div",{className:"flex flex-col items-center gap-4 text-center",children:[n.jsx(nn,{className:"w-16 h-16 text-green-600"}),n.jsx("h2",{className:"text-2xl font-bold",children:"Quote Approved!"}),n.jsxs("p",{className:"text-muted-foreground",children:["Thank you for approving the quote. ",c.businessName," will contact you shortly to schedule the service."]}),n.jsx(Ot,{className:"my-4"}),n.jsxs("div",{className:"w-full text-left space-y-2",children:[n.jsx("p",{className:"text-sm font-medium",children:"Next Steps:"}),n.jsxs("ul",{className:"text-sm text-muted-foreground list-disc list-inside space-y-1",children:[n.jsx("li",{children:" Redirecting you to schedule your appointment..."}),n.jsx("li",{children:"Service will be completed as quoted"}),n.jsx("li",{children:"Payment will be collected as discussed"})]})]}),n.jsxs("p",{className:"text-sm text-muted-foreground mt-4",children:["Questions? Call ",c.businessName," at ",c.businessPhone]})]})})})});if(m.isSuccess)return n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 to-amber-100 dark:from-slate-900 dark:to-slate-800 flex items-center justify-center p-4",children:n.jsx(O,{className:"w-full max-w-md border-orange-200",children:n.jsx(H,{className:"p-8",children:n.jsxs("div",{className:"flex flex-col items-center gap-4 text-center",children:[n.jsx(Ya,{className:"w-16 h-16 text-orange-600"}),n.jsx("h2",{className:"text-2xl font-bold",children:"Quote Declined"}),n.jsxs("p",{className:"text-muted-foreground",children:["Your feedback has been recorded. ",c.businessName," may reach out to discuss alternatives."]}),n.jsxs("p",{className:"text-sm text-muted-foreground mt-4",children:["Questions? Call ",c.businessName," at ",c.businessPhone]})]})})})});if(!a)return n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-slate-900 dark:to-slate-800 flex items-center justify-center p-4",children:n.jsxs(O,{className:"w-full max-w-md",children:[n.jsxs(ee,{className:"text-center",children:[n.jsx("div",{className:"mx-auto w-16 h-16 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center mb-4",children:n.jsx(bs,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"})}),n.jsx(te,{className:"text-2xl",children:"Verify Your Identity"}),n.jsx(ke,{children:"We've sent a verification code to your phone/email"})]}),n.jsxs(H,{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(U,{htmlFor:"otp",children:"Verification Code"}),n.jsx(se,{id:"otp",type:"text",placeholder:"Enter 6-digit code",value:r,onChange:b=>s(b.target.value),maxLength:6,className:"text-center text-2xl tracking-widest","data-testid":"input-otp"})]}),n.jsx(_,{onClick:g,disabled:f.isPending||!r||r.length<4,className:"w-full",size:"lg","data-testid":"button-verify-otp",children:f.isPending?"Verifying...":"Verify Code"}),n.jsxs(Ln,{children:[n.jsx(Wt,{className:"h-4 w-4"}),n.jsxs(Dn,{className:"text-xs",children:["Didn't receive a code? It may take a few moments to arrive. If you need help, call ",c.businessName," at ",c.businessPhone]})]})]})]})});const v=c.quote;return n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-slate-900 dark:to-slate-800 p-4 py-8",children:n.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[n.jsx(O,{children:n.jsxs(ee,{className:"text-center",children:[n.jsx("div",{className:"mx-auto w-16 h-16 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center mb-4",children:n.jsx(Ar,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"})}),n.jsx(te,{className:"text-2xl",children:"Specialty Job Quote"}),n.jsx(ke,{children:"Review the quote details and approve or decline"})]})}),n.jsxs(O,{children:[n.jsx(ee,{children:n.jsxs(te,{className:"text-lg flex items-center gap-2",children:[n.jsx(Fn,{className:"w-5 h-5"}),"Customer Information"]})}),n.jsxs(H,{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Name"}),n.jsx("p",{className:"font-medium",children:v.customerName})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Phone"}),n.jsxs("p",{className:"font-medium flex items-center gap-2",children:[n.jsx(bt,{className:"w-4 h-4"}),v.phone]})]}),n.jsx(Ot,{}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Submitted"}),n.jsx("p",{className:"text-sm",children:Ie(new Date(v.createdAt),"MMMM d, yyyy 'at' h:mm a")})]})]})]}),v.thirdPartyPayerName&&n.jsxs(Ln,{className:"border-orange-200 bg-orange-50 dark:bg-orange-950/20",children:[n.jsx(Ya,{className:"h-4 w-4 text-orange-600"}),n.jsxs(Dn,{children:[n.jsx("p",{className:"font-medium mb-1",children:"Third-Party Billing"}),n.jsxs("p",{className:"text-sm",children:["This quote is being reviewed by: ",n.jsx("strong",{children:v.thirdPartyPayerName})]}),v.poNumber&&n.jsxs("p",{className:"text-sm mt-1",children:["PO Number: ",v.poNumber]})]})]}),n.jsxs(O,{children:[n.jsx(ee,{children:n.jsxs(te,{className:"text-lg flex items-center gap-2",children:[n.jsx(bs,{className:"w-5 h-5"}),"Job Details"]})}),n.jsxs(H,{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Type of Damage"}),n.jsx(ge,{variant:"outline",className:"text-base px-3 py-1",children:v.damageType})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Description"}),n.jsx("p",{className:"text-sm bg-muted p-3 rounded-md",children:v.issueDescription})]}),v.quoteNotes&&n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Notes from Business"}),n.jsx("p",{className:"text-sm bg-blue-50 dark:bg-blue-950/20 p-3 rounded-md border border-blue-200 dark:border-blue-800",children:v.quoteNotes})]})]})]}),v.photoUrls.length>0&&n.jsxs(O,{children:[n.jsx(ee,{children:n.jsxs(te,{className:"text-lg flex items-center gap-2",children:[n.jsx($i,{className:"w-5 h-5"}),"Photos (",v.photoUrls.length,")"]})}),n.jsx(H,{children:n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:v.photoUrls.map((b,w)=>n.jsx("a",{href:b,target:"_blank",rel:"noopener noreferrer",className:"block aspect-square rounded-lg overflow-hidden bg-muted hover:opacity-75 transition-opacity","data-testid":`photo-${w}`,children:n.jsx("img",{src:b,alt:`Damage photo ${w+1}`,className:"w-full h-full object-cover"})},w))})})]}),n.jsxs(O,{className:"border-green-200 bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-950/20 dark:to-emerald-950/20",children:[n.jsx(ee,{children:n.jsxs(te,{className:"text-lg flex items-center gap-2",children:[n.jsx(Ar,{className:"w-5 h-5"}),"Custom Quote"]})}),n.jsx(H,{children:n.jsxs("div",{className:"text-center py-6",children:[n.jsxs("p",{className:"text-5xl font-bold text-green-600 dark:text-green-400",children:["$",v.customQuoteAmount.toFixed(2)]}),n.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Total price for this specialty job"})]})})]}),n.jsx(O,{children:n.jsxs(H,{className:"pt-6 space-y-4",children:[n.jsxs(_,{onClick:x,disabled:h.isPending,className:"w-full bg-green-600 hover:bg-green-700 text-white",size:"lg","data-testid":"button-approve-quote",children:[n.jsx(nn,{className:"w-5 h-5 mr-2"}),h.isPending?"Approving...":"Approve Quote"]}),n.jsx(Ot,{}),n.jsxs("div",{className:"space-y-3",children:[n.jsx(U,{htmlFor:"decline-reason",className:"text-red-600 dark:text-red-400",children:"Or decline with a reason:"}),n.jsx(un,{id:"decline-reason",placeholder:"Please let us know why you're declining (optional)",value:o,onChange:b=>l(b.target.value),rows:3,"data-testid":"input-decline-reason"}),n.jsxs(_,{onClick:y,disabled:m.isPending,variant:"destructive",className:"w-full",size:"lg","data-testid":"button-decline-quote",children:[n.jsx(Ws,{className:"w-5 h-5 mr-2"}),m.isPending?"Declining...":"Decline Quote"]})]})]})}),n.jsx(O,{className:"bg-muted/50",children:n.jsxs(H,{className:"p-4 text-center text-sm text-muted-foreground",children:[n.jsx("p",{children:"Questions about this quote?"}),n.jsxs("p",{className:"font-medium mt-1",children:["Call ",c.businessName," at ",c.businessPhone]})]})})]})})}function rmt(){const[e,t]=p.useState(""),[r,s]=p.useState(""),[a,i]=p.useState(!1),[o,l]=p.useState(!1),[c,d]=p.useState(!1),{toast:u}=Ee(),f=async h=>{if(h.preventDefault(),!r.trim()||!e.trim()||!a){u({title:"Missing Information",description:"Please fill in all fields and provide consent",variant:"destructive"});return}d(!0);try{if(!(await fetch("/api/sms-consent",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({phone:e,name:r,consent:a})})).ok)throw new Error("Failed to record consent");l(!0),u({title:"Consent Recorded",description:"Thank you for providing your consent. You may now receive SMS messages from us."})}catch{u({title:"Error",description:"Failed to record consent. Please try again.",variant:"destructive"})}finally{d(!1)}};return o?n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-blue-100 dark:from-gray-900 dark:to-gray-800 flex items-center justify-center p-4",children:n.jsxs(O,{className:"max-w-md w-full",children:[n.jsxs(ee,{className:"text-center",children:[n.jsx("div",{className:"mx-auto w-16 h-16 bg-green-100 dark:bg-green-900 rounded-full flex items-center justify-center mb-4",children:n.jsx(nn,{className:"w-10 h-10 text-green-600 dark:text-green-400"})}),n.jsx(te,{className:"text-2xl",children:"Consent Recorded"}),n.jsx(ke,{children:"Thank you for providing your consent. You're all set to receive SMS messages from Clean Machine Auto Detail."})]}),n.jsx(H,{className:"space-y-4",children:n.jsxs("div",{className:"bg-blue-50 dark:bg-blue-950/30 p-4 rounded-lg border border-blue-200 dark:border-blue-800",children:[n.jsx("h3",{className:"font-semibold text-sm mb-2",children:"What happens next?"}),n.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[n.jsx("li",{children:" You'll receive appointment reminders via SMS"}),n.jsx("li",{children:" We'll send service updates and confirmations"}),n.jsx("li",{children:" You can reply STOP at any time to unsubscribe"}),n.jsx("li",{children:" Standard message and data rates may apply"})]})]})})]})}):n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-blue-100 dark:from-gray-900 dark:to-gray-800 flex items-center justify-center p-4",children:n.jsxs(O,{className:"max-w-2xl w-full",children:[n.jsx(ee,{children:n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx("div",{className:"w-12 h-12 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center",children:n.jsx(on,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),n.jsxs("div",{children:[n.jsx(te,{className:"text-2xl",children:"SMS Messaging Consent"}),n.jsx(ke,{children:"Clean Machine Auto Detail"})]})]})}),n.jsxs(H,{children:[n.jsx("div",{className:"mb-6 p-4 bg-blue-50 dark:bg-blue-950/30 rounded-lg border border-blue-200 dark:border-blue-800",children:n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(zn,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 mt-0.5 flex-shrink-0"}),n.jsxs("div",{className:"text-sm text-muted-foreground",children:[n.jsx("p",{className:"mb-2",children:"Clean Machine Auto Detail uses SMS messaging to provide you with appointment reminders, service updates, and important notifications about your auto detailing services."}),n.jsx("p",{className:"font-medium",children:"By providing your consent below, you agree to receive these informational messages and alerts."})]})]})}),n.jsxs("form",{onSubmit:f,className:"space-y-6",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx(U,{htmlFor:"name",children:"Full Name *"}),n.jsx(se,{id:"name",value:r,onChange:h=>s(h.target.value),placeholder:"Your full name",required:!0,"data-testid":"input-name"})]}),n.jsxs("div",{children:[n.jsx(U,{htmlFor:"phone",children:"Phone Number *"}),n.jsx(se,{id:"phone",type:"tel",value:e,onChange:h=>t(h.target.value),placeholder:"(555) 123-4567",required:!0,"data-testid":"input-phone"})]})]}),n.jsx(EA,{checked:a,onCheckedChange:i,required:!0,id:"sms-consent-form"}),n.jsx("div",{className:"pt-4",children:n.jsx(_,{type:"submit",className:"w-full",disabled:!a||c,"data-testid":"button-submit-consent",children:c?"Recording Consent...":"Submit Consent"})}),n.jsxs("div",{className:"text-xs text-center text-muted-foreground space-y-1",children:[n.jsx("p",{children:"Message frequency varies based on your appointments and service needs."}),n.jsx("p",{children:"Message and data rates may apply."}),n.jsx("p",{children:"You can reply STOP to any message to opt-out at any time."}),n.jsx("p",{children:"Reply HELP for assistance."})]})]})]})]})})}function smt(){return n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-blue-100 dark:from-gray-900 dark:to-gray-800 p-4 py-12",children:n.jsx("div",{className:"max-w-4xl mx-auto",children:n.jsxs(O,{children:[n.jsxs(ee,{children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx("div",{className:"w-12 h-12 bg-blue-100 dark:bg-blue-900 rounded-full flex items-center justify-center",children:n.jsx(zn,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),n.jsxs("div",{children:[n.jsx(te,{className:"text-3xl",children:"Privacy Policy"}),n.jsx(ke,{children:"Clean Machine Auto Detail"})]})]}),n.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Last Updated: January 2025"})]}),n.jsxs(H,{className:"space-y-6",children:[n.jsxs("section",{children:[n.jsxs("h2",{className:"text-xl font-semibold mb-3 flex items-center gap-2",children:[n.jsx(rT,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),"Information We Collect"]}),n.jsxs("div",{className:"bg-blue-50 dark:bg-blue-950/30 p-4 rounded-lg border border-blue-200 dark:border-blue-800",children:[n.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"We collect the following information when you use our services:"}),n.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1 ml-4",children:[n.jsxs("li",{children:[" ",n.jsx("strong",{children:"Contact Information:"})," Name, phone number, email address"]}),n.jsxs("li",{children:[" ",n.jsx("strong",{children:"Service Address:"})," Location where services are performed"]}),n.jsxs("li",{children:[" ",n.jsx("strong",{children:"Vehicle Information:"})," Make, model, year, and service history"]}),n.jsxs("li",{children:[" ",n.jsx("strong",{children:"Appointment Details:"})," Scheduled service dates, times, and preferences"]}),n.jsxs("li",{children:[" ",n.jsx("strong",{children:"Payment Information:"})," Processed securely through our payment providers"]}),n.jsxs("li",{children:[" ",n.jsx("strong",{children:"SMS Consent Records:"})," Timestamp and IP address when you consent to SMS messaging"]})]})]})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-xl font-semibold mb-3",children:"How We Use Your Information"}),n.jsxs("div",{className:"space-y-2 text-sm text-muted-foreground",children:[n.jsx("p",{children:"We use your information exclusively to:"}),n.jsxs("ul",{className:"ml-4 space-y-1",children:[n.jsx("li",{children:" Schedule and manage your auto detailing appointments"}),n.jsx("li",{children:" Send appointment confirmations, reminders, and service updates via SMS and email"}),n.jsx("li",{children:" Provide customer service and respond to your inquiries"}),n.jsx("li",{children:" Process payments for services rendered"}),n.jsx("li",{children:" Maintain accurate service history records for your vehicles"}),n.jsx("li",{children:" Improve our services based on customer feedback"})]})]})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-xl font-semibold mb-3 text-green-700 dark:text-green-400",children:"Third-Party Information Sharing"}),n.jsxs("div",{className:"bg-green-50 dark:bg-green-950/30 p-4 rounded-lg border border-green-200 dark:border-green-800",children:[n.jsx("p",{className:"text-sm font-semibold mb-2",children:"We DO NOT share your personal information with third parties for marketing or promotional purposes."}),n.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"We may share your information only with trusted service providers who help us deliver our services to you, including:"}),n.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1 ml-4",children:[n.jsxs("li",{children:[" ",n.jsx("strong",{children:"Payment Processors:"})," Stripe and PayPal (to process payments securely)"]}),n.jsxs("li",{children:[" ",n.jsx("strong",{children:"Communication Services:"})," Twilio (for SMS notifications), SendGrid (for email delivery)"]}),n.jsxs("li",{children:[" ",n.jsx("strong",{children:"Mapping Services:"})," Google Maps (for address validation and routing)"]}),n.jsxs("li",{children:[" ",n.jsx("strong",{children:"Cloud Storage:"})," Google Drive (for customer photos and service documentation)"]})]}),n.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"These service providers are contractually obligated to use your information only to fulfill the services we provide to you and may not use your data for their own purposes."})]})]}),n.jsxs("section",{children:[n.jsxs("h2",{className:"text-xl font-semibold mb-3 flex items-center gap-2",children:[n.jsx(bt,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),"SMS Text Messaging"]}),n.jsxs("div",{className:"space-y-2 text-sm text-muted-foreground",children:[n.jsx("p",{children:"When you consent to receive SMS messages from Clean Machine Auto Detail:"}),n.jsxs("ul",{className:"ml-4 space-y-1",children:[n.jsx("li",{children:" We will send appointment confirmations, reminders, ETAs, and service updates"}),n.jsx("li",{children:" Message frequency varies based on your appointments and service needs"}),n.jsx("li",{children:" Standard message and data rates may apply from your mobile carrier"}),n.jsxs("li",{children:[" You can opt out at any time by replying ",n.jsx("strong",{children:"STOP"})," to any message"]}),n.jsxs("li",{children:[" You can get help by replying ",n.jsx("strong",{children:"HELP"})," to any message"]}),n.jsx("li",{children:" We record your consent timestamp and IP address for compliance purposes"})]}),n.jsx("p",{className:"mt-2",children:"We will never send unsolicited marketing messages to numbers that have only consented to transactional appointment communications."})]})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-xl font-semibold mb-3",children:"Data Security"}),n.jsxs("div",{className:"space-y-2 text-sm text-muted-foreground",children:[n.jsx("p",{children:"We implement industry-standard security measures to protect your personal information from unauthorized access, disclosure, alteration, or destruction. This includes:"}),n.jsxs("ul",{className:"ml-4 space-y-1",children:[n.jsx("li",{children:" Encrypted data transmission using SSL/TLS protocols"}),n.jsx("li",{children:" Secure storage of customer records in protected databases"}),n.jsx("li",{children:" Access controls limiting who can view your information"}),n.jsx("li",{children:" Regular security audits and updates"})]})]})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-xl font-semibold mb-3",children:"Your Privacy Rights"}),n.jsxs("div",{className:"space-y-2 text-sm text-muted-foreground",children:[n.jsx("p",{children:"You have the right to:"}),n.jsxs("ul",{className:"ml-4 space-y-1",children:[n.jsx("li",{children:" Access the personal information we have about you"}),n.jsx("li",{children:" Request corrections to inaccurate information"}),n.jsx("li",{children:" Request deletion of your personal information (subject to legal retention requirements)"}),n.jsx("li",{children:" Opt out of SMS messaging at any time by replying STOP"}),n.jsx("li",{children:" Opt out of email communications by clicking unsubscribe in any email"})]})]})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-xl font-semibold mb-3",children:"Data Retention"}),n.jsx("div",{className:"space-y-2 text-sm text-muted-foreground",children:n.jsx("p",{children:"We retain your personal information for as long as necessary to provide our services and comply with legal obligations. Service history and appointment records are maintained to provide continuity of care for your vehicles."})})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-xl font-semibold mb-3",children:"Children's Privacy"}),n.jsx("div",{className:"space-y-2 text-sm text-muted-foreground",children:n.jsx("p",{children:"Our services are not directed to individuals under the age of 18. We do not knowingly collect personal information from children."})})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-xl font-semibold mb-3",children:"Changes to This Policy"}),n.jsx("div",{className:"space-y-2 text-sm text-muted-foreground",children:n.jsx("p",{children:'We may update this Privacy Policy from time to time. We will notify you of any material changes by posting the new Privacy Policy on this page and updating the "Last Updated" date.'})})]}),n.jsxs("section",{className:"border-t pt-6 mt-8",children:[n.jsxs("h2",{className:"text-xl font-semibold mb-3 flex items-center gap-2",children:[n.jsx(Cr,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"}),"Contact Us"]}),n.jsxs("div",{className:"bg-blue-50 dark:bg-blue-950/30 p-4 rounded-lg border border-blue-200 dark:border-blue-800",children:[n.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"If you have questions about this Privacy Policy or how we handle your information, please contact us:"}),n.jsxs("div",{className:"text-sm space-y-1",children:[n.jsx("p",{children:n.jsx("strong",{children:"Clean Machine Auto Detail"})}),n.jsxs("p",{children:["Phone: ",n.jsx("a",{href:"tel:9182899274",className:"text-blue-600 dark:text-blue-400 hover:underline",children:"(918) 289-9274"})]}),n.jsxs("p",{children:["Website: ",n.jsx("a",{href:"https://cleanmachinetulsa.com",className:"text-blue-600 dark:text-blue-400 hover:underline",children:"cleanmachinetulsa.com"})]}),n.jsxs("p",{children:["SMS Consent: ",n.jsx("a",{href:"https://cleanmachinetulsa.com/sms-consent",className:"text-blue-600 dark:text-blue-400 hover:underline",children:"cleanmachinetulsa.com/sms-consent"})]})]})]})]})]})]})})})}function amt(){const{data:e,isLoading:t,error:r}=be({queryKey:["/api/voice-testing/test/call-quality-metrics"],refetchInterval:3e4});if(t)return n.jsx("div",{className:"flex items-center justify-center h-screen",children:n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})});if(r)return n.jsx("div",{className:"flex items-center justify-center h-screen",children:n.jsxs(O,{className:"w-96",children:[n.jsx(ee,{children:n.jsxs(te,{className:"flex items-center gap-2 text-destructive",children:[n.jsx(Wt,{className:"h-5 w-5"}),"Error Loading Metrics"]})}),n.jsx(H,{children:n.jsx("p",{className:"text-sm text-muted-foreground",children:r instanceof Error?r.message:"Failed to load call metrics"})})]})});const s=e==null?void 0:e.metrics,a=e==null?void 0:e.healthStatus,i=(e==null?void 0:e.recentCalls)||[],o=n.jsx(ge,{variant:a!=null&&a.systemOperational?"default":"destructive",className:"text-sm",children:a!=null&&a.systemOperational?"System Operational":"System Issues Detected"});return n.jsx(xn,{title:"Call Quality Metrics",pageActions:o,children:n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsx("p",{className:"text-muted-foreground",children:"Real-time monitoring of voice system performance"}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[n.jsxs(O,{children:[n.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(te,{className:"text-sm font-medium",children:"Total Calls"}),n.jsx(bt,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(H,{children:[n.jsx("div",{className:"text-2xl font-bold",children:(s==null?void 0:s.totalCalls)||0}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Last 50 calls tracked"})]})]}),n.jsxs(O,{children:[n.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(te,{className:"text-sm font-medium",children:"Success Rate"}),n.jsx(ya,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(H,{children:[n.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:(s==null?void 0:s.successRate)||"0%"}),n.jsx(Xm,{value:parseFloat((s==null?void 0:s.successRate)||"0"),className:"mt-2"})]})]}),n.jsxs(O,{children:[n.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(te,{className:"text-sm font-medium",children:"Avg Duration"}),n.jsx(Rt,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(H,{children:[n.jsx("div",{className:"text-2xl font-bold",children:(s==null?void 0:s.avgDuration)||"0s"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Per completed call"})]})]}),n.jsxs(O,{children:[n.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(te,{className:"text-sm font-medium",children:"Failed Calls"}),n.jsx(sT,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(H,{children:[n.jsx("div",{className:"text-2xl font-bold text-destructive",children:(s==null?void 0:s.failedCalls)||0}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Requires attention"})]})]})]}),n.jsxs(O,{children:[n.jsxs(ee,{children:[n.jsx(te,{children:"System Health"}),n.jsx(ke,{children:"Voice infrastructure component status"})]}),n.jsxs(H,{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:`h-2 w-2 rounded-full ${a!=null&&a.callLoggingWorking?"bg-green-500":"bg-red-500"}`}),n.jsx("span",{className:"text-sm",children:"Call Logging"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:`h-2 w-2 rounded-full ${a!=null&&a.recordingWorking?"bg-green-500":"bg-yellow-500"}`}),n.jsx("span",{className:"text-sm",children:"Recording"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:`h-2 w-2 rounded-full ${a!=null&&a.transcriptionWorking?"bg-green-500":"bg-yellow-500"}`}),n.jsx("span",{className:"text-sm",children:"Transcription"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:`h-2 w-2 rounded-full ${a!=null&&a.systemOperational?"bg-green-500":"bg-red-500"}`}),n.jsx("span",{className:"text-sm",children:"System Status"})]})]})]}),n.jsxs(O,{children:[n.jsxs(ee,{children:[n.jsx(te,{children:"Recent Call Activity"}),n.jsx(ke,{children:"Latest call events and their status"})]}),n.jsx(H,{children:n.jsxs("div",{className:"space-y-3",children:[i.slice(0,10).map(l=>n.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-accent transition-colors",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[l.direction==="inbound"?n.jsx(wx,{className:"h-4 w-4 text-blue-500"}):n.jsx(bt,{className:"h-4 w-4 text-purple-500"}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-sm",children:l.from}),n.jsx("div",{className:"text-xs text-muted-foreground",children:new Date(l.createdAt).toLocaleString()})]})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[l.recordingUrl&&n.jsx(Sp,{className:"h-4 w-4 text-muted-foreground","data-testid":"icon-recording"}),l.transcription&&n.jsx(bs,{className:"h-4 w-4 text-muted-foreground","data-testid":"icon-transcription"}),n.jsx(ge,{variant:l.status==="completed"?"default":l.status==="failed"?"destructive":"secondary",children:l.status}),l.duration&&n.jsxs("span",{className:"text-sm text-muted-foreground",children:[l.duration,"s"]})]})]},l.id)),i.length===0&&n.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[n.jsx(bt,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),n.jsx("p",{children:"No call activity yet"}),n.jsx("p",{className:"text-sm",children:"Call events will appear here once calls are made"})]})]})})]}),n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs(O,{children:[n.jsx(ee,{children:n.jsxs(te,{className:"flex items-center gap-2",children:[n.jsx(Sp,{className:"h-5 w-5"}),"Recording Stats"]})}),n.jsx(H,{children:n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm text-muted-foreground",children:"Calls with recordings"}),n.jsx("span",{className:"font-bold",children:(s==null?void 0:s.callsWithRecordings)||0})]}),n.jsx(Xm,{value:s!=null&&s.totalCalls?s.callsWithRecordings/s.totalCalls*100:0,className:"h-2"})]})})]}),n.jsxs(O,{children:[n.jsx(ee,{children:n.jsxs(te,{className:"flex items-center gap-2",children:[n.jsx(bs,{className:"h-5 w-5"}),"Transcription Stats"]})}),n.jsx(H,{children:n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm text-muted-foreground",children:"Calls with transcriptions"}),n.jsx("span",{className:"font-bold",children:(s==null?void 0:s.callsWithTranscriptions)||0})]}),n.jsx(Xm,{value:s!=null&&s.totalCalls?s.callsWithTranscriptions/s.totalCalls*100:0,className:"h-2"})]})})]})]})]})})}const aue="/assets/ab_Clean4-03-BNH_M79S.jpg";function imt(){const[,e]=zt(),[t,r]=p.useState(""),[s,a]=p.useState(""),[i,o]=p.useState("");p.useEffect(()=>{const c=new URLSearchParams(window.location.search),d=c.get("message"),u=c.get("email"),f=c.get("phone");d&&r(d),u&&a(u),f&&o(f)},[]);const l=()=>{e("/")};return n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 flex items-center justify-center p-4",children:n.jsxs(O,{className:"max-w-2xl w-full shadow-xl",children:[n.jsxs(ee,{className:"text-center space-y-4",children:[n.jsx("div",{className:"flex justify-center mb-4",children:n.jsx("img",{src:aue,alt:"Clean Machine Logo",className:"h-20 w-20 object-contain"})}),n.jsxs("div",{className:"flex items-center justify-center gap-3 text-amber-600 dark:text-amber-400",children:[n.jsx(nh,{className:"h-10 w-10"}),n.jsx(Wt,{className:"h-10 w-10"})]}),n.jsx(te,{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:"System Maintenance"}),n.jsx(ke,{className:"text-lg text-gray-600 dark:text-gray-400",children:"We're currently performing maintenance on our booking system"})]}),n.jsxs(H,{className:"space-y-6",children:[t&&n.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:n.jsx("p",{className:"text-gray-800 dark:text-gray-200 text-center",children:t})}),!t&&n.jsxs("div",{className:"text-center space-y-2",children:[n.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:"Our booking system is temporarily unavailable while we perform scheduled maintenance."}),n.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"This should only take a few minutes. Thank you for your patience!"})]}),(s||i)&&n.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-6 space-y-4",children:[n.jsx("p",{className:"text-center text-sm font-medium text-gray-700 dark:text-gray-300",children:"Need immediate assistance?"}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[s&&n.jsxs("a",{href:`mailto:${s}`,className:"flex items-center justify-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:[n.jsx(Cr,{className:"h-4 w-4"}),"Email Us"]}),i&&n.jsxs("a",{href:`tel:${i}`,className:"flex items-center justify-center gap-2 px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors",children:[n.jsx(bt,{className:"h-4 w-4"}),"Call Us"]})]})]}),n.jsx("div",{className:"flex justify-center pt-4",children:n.jsx(_,{onClick:l,variant:"outline",className:"w-full sm:w-auto","data-testid":"button-retry",children:"Try Again"})}),n.jsxs("div",{className:"text-center text-xs text-gray-500 dark:text-gray-500 pt-4 border-t border-gray-200 dark:border-gray-700",children:[n.jsx("p",{children:"If this issue persists, please contact us directly."}),n.jsx("p",{className:"mt-1",children:"We apologize for any inconvenience."})]})]})]})})}function omt(){const{toast:e}=Ee(),[t,r]=p.useState(null),[s,a]=p.useState(!1),[i,o]=p.useState(null),{data:l,isLoading:c}=be({queryKey:["/api/jobs"]}),d=(l==null?void 0:l.jobs)||[],u=je({mutationFn:async h=>{const m=await fetch("/api/jobs/apply",{method:"POST",body:h});if(!m.ok)throw new Error("Failed to submit application");return m.json()},onSuccess:()=>{e({title:"Application submitted!",description:"We will review your application and get back to you soon."}),a(!1),r(null),o(null)},onError:h=>{e({title:"Error",description:h.message,variant:"destructive"})}}),f=h=>{h.preventDefault();const m=new FormData(h.currentTarget);t&&m.append("jobPostingId",t.id.toString()),i&&m.append("resume",i),u.mutate(m)};return n.jsxs("div",{className:"container mx-auto p-6 max-w-6xl",children:[n.jsxs("div",{className:"mb-8 text-center",children:[n.jsx("h1",{className:"text-4xl font-bold mb-2",children:"Join Our Team"}),n.jsx("p",{className:"text-xl text-muted-foreground",children:"Help us deliver exceptional auto detailing services"})]}),c?n.jsx("div",{className:"text-center py-12",children:"Loading opportunities..."}):d.length===0?n.jsx(O,{className:"p-8 text-center",children:n.jsx("p",{className:"text-muted-foreground",children:"No open positions at this time. Check back soon!"})}):n.jsx("div",{className:"grid gap-6",children:d.map(h=>n.jsxs(O,{"data-testid":`card-job-${h.id}`,children:[n.jsxs(ee,{children:[n.jsx(te,{className:"text-2xl",children:h.title}),n.jsxs(ke,{className:"flex flex-wrap gap-4 mt-2",children:[h.department&&n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx(Np,{className:"w-4 h-4"}),h.department]}),h.location&&n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx(zr,{className:"w-4 h-4"}),h.location]}),n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx(Rt,{className:"w-4 h-4"}),h.employmentType]}),h.salaryRange&&n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx(Ar,{className:"w-4 h-4"}),h.salaryRange]})]})]}),n.jsxs(H,{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold mb-2",children:"Description"}),n.jsx("p",{className:"text-sm text-muted-foreground whitespace-pre-wrap",children:h.description})]}),h.requirements&&n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold mb-2",children:"Requirements"}),n.jsx("p",{className:"text-sm text-muted-foreground whitespace-pre-wrap",children:h.requirements})]}),h.benefits&&n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold mb-2",children:"Benefits"}),n.jsx("p",{className:"text-sm text-muted-foreground whitespace-pre-wrap",children:h.benefits})]}),n.jsx(_,{onClick:()=>{r(h),a(!0)},className:"w-full sm:w-auto","data-testid":`button-apply-${h.id}`,children:"Apply Now"})]})]},h.id))}),n.jsx(At,{open:s,onOpenChange:a,children:n.jsxs(_t,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[n.jsx($t,{children:n.jsxs(Et,{children:["Apply for ",t==null?void 0:t.title]})}),n.jsxs("form",{onSubmit:f,className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx(U,{children:"First Name *"}),n.jsx(se,{name:"firstName",required:!0,"data-testid":"input-first-name"})]}),n.jsxs("div",{children:[n.jsx(U,{children:"Last Name *"}),n.jsx(se,{name:"lastName",required:!0,"data-testid":"input-last-name"})]})]}),n.jsxs("div",{children:[n.jsx(U,{children:"Email *"}),n.jsx(se,{type:"email",name:"email",required:!0,"data-testid":"input-email"})]}),n.jsxs("div",{children:[n.jsx(U,{children:"Phone *"}),n.jsx(se,{type:"tel",name:"phone",required:!0,"data-testid":"input-phone"})]}),n.jsxs("div",{children:[n.jsx(U,{children:"Resume/CV *"}),n.jsx(se,{type:"file",accept:".pdf,.doc,.docx",onChange:h=>{var m;return o(((m=h.target.files)==null?void 0:m[0])||null)},required:!0,"data-testid":"input-resume"})]}),n.jsxs("div",{children:[n.jsx(U,{children:"Years of Experience"}),n.jsx(se,{type:"number",name:"yearsExperience","data-testid":"input-experience"})]}),n.jsxs("div",{children:[n.jsx(U,{children:"Current Company"}),n.jsx(se,{name:"currentCompany","data-testid":"input-company"})]}),n.jsxs("div",{children:[n.jsx(U,{children:"LinkedIn Profile"}),n.jsx(se,{type:"url",name:"linkedinUrl",placeholder:"https://linkedin.com/in/...","data-testid":"input-linkedin"})]}),n.jsxs("div",{children:[n.jsx(U,{children:"Portfolio URL"}),n.jsx(se,{type:"url",name:"portfolioUrl","data-testid":"input-portfolio"})]}),n.jsxs("div",{children:[n.jsx(U,{children:"Cover Letter"}),n.jsx(un,{name:"coverLetter",rows:6,placeholder:"Tell us why you'd be a great fit...","data-testid":"textarea-cover-letter"})]}),n.jsx(_,{type:"submit",className:"w-full",disabled:u.isPending,"data-testid":"button-submit-application",children:u.isPending?"Submitting...":"Submit Application"})]})]})})]})}function lmt({children:e}){const t=gy(0),r=gy(0),s={damping:25,stiffness:150};tM(t,s),tM(r,s);const a=Ra(t,[0,100],[30,70]),i=Ra(r,[0,100],[40,60]),o=Ra(t,[0,100],[12.5,37.5]),l=Ra(r,[0,100],[25,40]),c=p.useMemo(()=>Array.from({length:20}).map((d,u)=>({x:Math.random()*100,y:Math.random()*100,size:Math.random()*4+2,delay:u*.1})),[]);return p.useEffect(()=>{const d=u=>{const f=u.clientX/window.innerWidth*100,h=u.clientY/window.innerHeight*100;t.set(f),r.set(h)};return window.addEventListener("mousemove",d),()=>window.removeEventListener("mousemove",d)},[t,r]),n.jsxs("div",{className:"min-h-screen w-full bg-gradient-to-br from-slate-950 via-blue-950 to-indigo-950 overflow-x-hidden relative",children:[n.jsxs("div",{className:"fixed inset-0 overflow-hidden pointer-events-none",children:[n.jsx(q.div,{className:"absolute inset-0",style:{background:Ra([a,i],([d,u])=>`radial-gradient(circle at ${d}% ${u}%, rgba(30,64,175,0.2), transparent 50%)`)}}),n.jsx(q.div,{className:"absolute inset-0 opacity-80",style:{background:Ra([o,l],([d,u])=>`radial-gradient(circle at ${d}% ${u}%, rgba(76,29,149,0.15), transparent 50%)`)}}),n.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_50%_90%,rgba(99,102,241,0.1),transparent_50%)]"}),n.jsx("div",{className:"absolute inset-0",children:c.map((d,u)=>n.jsx(q.div,{className:"absolute rounded-full",style:{left:`${d.x}%`,top:`${d.y}%`,width:d.size,height:d.size,backgroundColor:"rgba(96, 165, 250, 0.2)"},animate:{y:[0,-30,0],opacity:[.2,.5,.2]},transition:{duration:3+Math.random()*4,repeat:1/0,delay:d.delay,ease:"easeInOut"}},u))})]}),n.jsx("div",{className:"relative z-10",children:e})]})}const iue=p.createContext(void 0);function cmt({children:e}){const[t,r]=p.useState(!1);return n.jsx(iue.Provider,{value:{trialModalOpen:t,openTrialModal:()=>r(!0),closeTrialModal:()=>r(!1)},children:e})}function c9(){const e=p.useContext(iue);if(!e)throw new Error("useShowcase must be used within ShowcaseProvider");return e}const Kb=[{id:"hero",label:"Home"},{id:"feature-map",label:"Features"},{id:"flows",label:"Flows"},{id:"automation-logic",label:"Logic"},{id:"whitelabel",label:"White Label"},{id:"faq",label:"FAQ"},{id:"sandbox",label:"Demo"}];function dmt(){const[,e]=zt(),{openTrialModal:t}=c9(),[r,s]=p.useState("hero"),[a,i]=p.useState(!1),[o,l]=p.useState(!1);p.useEffect(()=>{const d=()=>{i(window.scrollY>100);const u=Kb.map(h=>document.getElementById(h.id)),f=window.scrollY+200;for(let h=u.length-1;h>=0;h--){const m=u[h];if(m&&m.offsetTop<=f){s(Kb[h].id);break}}};return window.addEventListener("scroll",d),d(),()=>window.removeEventListener("scroll",d)},[]),p.useEffect(()=>{const d=u=>{u.key==="Escape"&&o&&l(!1)};return window.addEventListener("keydown",d),()=>window.removeEventListener("keydown",d)},[o]),p.useEffect(()=>(o?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[o]);const c=d=>{const u=document.getElementById(d);u&&(u.scrollIntoView({behavior:"smooth",block:"start"}),l(!1))};return n.jsxs($s,{children:[a&&n.jsx(q.nav,{initial:{y:-100,opacity:0},animate:{y:0,opacity:1},exit:{y:-100,opacity:0},transition:{duration:.3},className:"fixed top-0 left-0 right-0 z-50 bg-slate-950/80 backdrop-blur-xl border-b border-white/10 shadow-2xl",children:n.jsx("div",{className:"container mx-auto px-4",children:n.jsxs("div",{className:"flex items-center justify-between py-4",children:[n.jsxs(_,{onClick:()=>e("/"),variant:"ghost",size:"sm",className:"text-blue-200 hover:text-white hover:bg-white/10","data-testid":"button-back-home",children:[n.jsx(pi,{className:"w-4 h-4 mr-2"}),"Home"]}),n.jsx("div",{className:"hidden md:flex items-center gap-1",children:Kb.map(d=>n.jsxs("button",{onClick:()=>c(d.id),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 relative ${r===d.id?"text-white":"text-blue-200 hover:text-white hover:bg-white/5"}`,"data-testid":`nav-${d.id}`,children:[r===d.id&&n.jsx(q.div,{layoutId:"activeNav",className:"absolute inset-0 bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg",transition:{type:"spring",duration:.5}}),n.jsx("span",{className:"relative z-10",children:d.label})]},d.id))}),n.jsx("button",{onClick:()=>l(!o),className:"md:hidden p-2 text-blue-200 hover:text-white hover:bg-white/10 rounded-lg transition-colors","data-testid":"button-mobile-menu","aria-label":"Toggle mobile menu",children:o?n.jsx(Jr,{className:"w-6 h-6"}):n.jsx(Kv,{className:"w-6 h-6"})}),n.jsx(_,{size:"sm",onClick:t,className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white hidden lg:block transition-all duration-300 hover:scale-105 hover:shadow-lg hover:shadow-blue-500/50","data-testid":"button-nav-cta",children:"Start Free Trial"})]})})}),n.jsx($s,{children:a&&o&&n.jsxs(n.Fragment,{children:[n.jsx(q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>l(!1),className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-40 md:hidden","data-testid":"mobile-menu-backdrop"}),n.jsx(q.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"spring",damping:25,stiffness:200},className:"fixed top-0 right-0 bottom-0 w-80 max-w-[85vw] bg-slate-950/95 backdrop-blur-xl border-l border-white/20 z-50 md:hidden overflow-y-auto","data-testid":"mobile-menu-drawer",children:n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-8",children:[n.jsx("h3",{className:"text-xl font-bold text-white",children:"Navigation"}),n.jsx("button",{onClick:()=>l(!1),className:"p-2 text-blue-200 hover:text-white hover:bg-white/10 rounded-lg transition-colors","aria-label":"Close menu",children:n.jsx(Jr,{className:"w-5 h-5"})})]}),n.jsx("nav",{className:"space-y-2",children:Kb.map(d=>n.jsx("button",{onClick:()=>c(d.id),className:`w-full px-4 py-3 rounded-lg text-left transition-all duration-200 ${r===d.id?"bg-gradient-to-r from-blue-600 to-purple-600 text-white shadow-lg":"text-blue-200 hover:text-white hover:bg-white/10"}`,"data-testid":`mobile-nav-${d.id}`,children:n.jsx("span",{className:"font-medium",children:d.label})},d.id))}),n.jsx("div",{className:"mt-8 pt-8 border-white/10",children:n.jsx(_,{onClick:t,className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white","data-testid":"button-mobile-cta",children:"Start Free Trial"})})]})})]})})]})}function umt(){const[e,t]=p.useState(0),[r,s]=p.useState(0),[a,i]=p.useState(!1),[o,l]=p.useState(!1),{toast:c}=Ee(),[,d]=zt();p.useEffect(()=>{const h=setInterval(()=>{t(m=>(m+1)%3)},3e3);return()=>clearInterval(h)},[]),p.useEffect(()=>{const h=()=>s(window.scrollY);return window.addEventListener("scroll",h),()=>window.removeEventListener("scroll",h)},[]);const u=[{text:"Incoming SMS from (555) 123-4567",type:"incoming"},{text:'Auto-reply: "Thanks for reaching out! What are we working on today?"',type:"outgoing"},{text:"Appointment scheduled for Tuesday 2-4PM",type:"success"}],f=async()=>{l(!0);try{const h=await fetch("/api/admin/demo-settings",{credentials:"include"});if(h.ok&&!(await h.json()).demoModeEnabled){c({title:"Demo Unavailable",description:"The demo mode is currently disabled. Please contact the administrator.",variant:"destructive"}),l(!1);return}const m=await fetch("/api/demo/start",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"}});if(!m.ok){const x=await m.json();throw new Error(x.message||"Failed to start demo")}if((await m.json()).success)c({title:"Demo Launched!",description:"Redirecting to demo environment..."}),setTimeout(()=>{d("/demo")},500);else throw new Error("Failed to initialize demo session")}catch(h){console.error("Demo launch error:",h),c({title:"Error",description:h.message||"Failed to launch demo. Please try again.",variant:"destructive"}),l(!1)}};return n.jsxs("section",{id:"hero",className:"relative min-h-screen flex items-center justify-center overflow-hidden",children:[n.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-slate-950 via-blue-950 to-indigo-950"}),n.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_30%_50%,rgba(30,64,175,0.15),transparent_50%)]"}),n.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_70%_50%,rgba(76,29,149,0.15),transparent_50%)]"}),n.jsx("div",{className:"absolute inset-0 opacity-5",children:n.jsx("svg",{className:"w-full h-full",viewBox:"0 0 800 600",fill:"none",children:n.jsx("path",{d:"M150 300 L200 250 L350 230 L500 240 L600 270 L650 320 L600 370 L150 370 Z",stroke:"currentColor",strokeWidth:"2",className:"text-blue-300"})})}),n.jsxs("div",{className:"relative z-10 container mx-auto px-4 py-20 text-center",children:[n.jsx(q.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"inline-block mb-6",children:n.jsxs("span",{className:"px-6 py-2 bg-gradient-to-r from-blue-600/30 to-purple-600/30 border border-blue-400/40 rounded-full text-blue-200 text-sm font-medium flex items-center gap-2",children:[n.jsx(ln,{className:"w-4 h-4"}),"Investor-Ready Marketing Platform"]})}),n.jsxs(q.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"text-5xl md:text-7xl font-bold text-white mb-6 leading-tight",children:["Clean Machine: The Brain of Your",n.jsx("span",{className:"block bg-gradient-to-r from-blue-400 via-purple-400 to-cyan-400 bg-clip-text text-transparent mt-2",children:"Detailing Business"})]}),n.jsx(q.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"text-xl md:text-2xl text-blue-100 max-w-4xl mx-auto mb-12 leading-relaxed",children:"Intelligent scheduling. Automatic SMS & email. Complete customer history. Built for mobile detailers, perfected for service excellence."}),n.jsxs(q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"flex flex-col sm:flex-row gap-4 justify-center mb-16",children:[n.jsx(q.div,{whileHover:{scale:1.05},whileTap:{scale:.98},children:n.jsxs(_,{size:"lg",onClick:()=>i(!0),className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white px-8 py-6 text-lg rounded-full shadow-2xl hover:shadow-blue-500/50 transition-all duration-300 relative overflow-hidden group","data-testid":"button-launch-demo",children:[n.jsx("span",{className:"absolute inset-0 bg-gradient-to-r from-blue-400 to-purple-400 opacity-0 group-hover:opacity-20 transition-opacity duration-300"}),n.jsx(pw,{className:"w-5 h-5 mr-2 relative z-10"}),n.jsx("span",{className:"relative z-10",children:"Try Interactive Demo"})]})}),n.jsx(q.div,{whileHover:{scale:1.05},whileTap:{scale:.98},children:n.jsxs(_,{size:"lg",variant:"outline",onClick:()=>{var h;return(h=document.getElementById("whitelabel"))==null?void 0:h.scrollIntoView({behavior:"smooth"})},className:"border-2 border-blue-400/50 bg-white/5 backdrop-blur-sm hover:bg-white/10 text-white px-8 py-6 text-lg rounded-full transition-all duration-300","data-testid":"button-see-for-business",children:["White-Label Your Brand",n.jsx(Gc,{className:"w-5 h-5 ml-2"})]})})]}),n.jsx(At,{open:a,onOpenChange:i,children:n.jsxs(_t,{className:"sm:max-w-[600px] bg-gradient-to-br from-slate-900/95 via-blue-950/95 to-indigo-950/95 backdrop-blur-xl border-2 border-blue-400/30 text-white",children:[n.jsxs($t,{children:[n.jsxs(Et,{className:"text-2xl font-bold bg-gradient-to-r from-blue-400 via-purple-400 to-cyan-400 bg-clip-text text-transparent flex items-center gap-2",children:[n.jsx(pw,{className:"w-6 h-6 text-blue-400"}),"Experience the FULL White-Label Demo"]}),n.jsx(an,{className:"text-blue-100/80 text-base mt-3",children:"Explore a fully functional demo of our white-label auto detailing business management system. This demo uses mock data and showcases all features without affecting real operations."})]}),n.jsxs("div",{className:"space-y-6 my-6",children:[n.jsxs("div",{className:"bg-white/5 backdrop-blur-sm rounded-xl p-5 border border-blue-400/20",children:[n.jsxs("h4",{className:"text-sm font-semibold text-blue-300 mb-4 flex items-center gap-2",children:[n.jsx(ln,{className:"w-4 h-4"}),"Featured Capabilities"]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(bn,{className:"w-4 h-4 text-green-400 mt-0.5 flex-shrink-0"}),n.jsx("span",{className:"text-sm text-blue-100",children:"Multi-channel messaging"})]}),n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(bn,{className:"w-4 h-4 text-green-400 mt-0.5 flex-shrink-0"}),n.jsx("span",{className:"text-sm text-blue-100",children:"AI chatbot assistant"})]}),n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(bn,{className:"w-4 h-4 text-green-400 mt-0.5 flex-shrink-0"}),n.jsx("span",{className:"text-sm text-blue-100",children:"Smart scheduling"})]}),n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(bn,{className:"w-4 h-4 text-green-400 mt-0.5 flex-shrink-0"}),n.jsx("span",{className:"text-sm text-blue-100",children:"Payment processing"})]}),n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(bn,{className:"w-4 h-4 text-green-400 mt-0.5 flex-shrink-0"}),n.jsx("span",{className:"text-sm text-blue-100",children:"Analytics dashboard"})]}),n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(bn,{className:"w-4 h-4 text-green-400 mt-0.5 flex-shrink-0"}),n.jsx("span",{className:"text-sm text-blue-100",children:"Customer management"})]})]})]}),n.jsxs("div",{className:"bg-amber-500/10 border border-amber-500/30 rounded-xl p-4 flex gap-3",children:[n.jsx(Ya,{className:"w-5 h-5 text-amber-400 flex-shrink-0 mt-0.5"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-amber-200",children:"Demo Mode Active"}),n.jsx("p",{className:"text-xs text-amber-100/70 mt-1",children:"All changes are simulated and will not be saved. No real messages will be sent."})]})]})]}),n.jsxs(Sn,{className:"flex flex-col-reverse sm:flex-row gap-3",children:[n.jsx(_,{variant:"outline",onClick:()=>i(!1),disabled:o,className:"border-blue-400/30 bg-white/5 hover:bg-white/10 text-white","data-testid":"button-cancel-demo",children:"Cancel"}),n.jsx(_,{onClick:f,disabled:o,className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white shadow-lg","data-testid":"button-confirm-launch-demo",children:o?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin mr-2"}),"Launching..."]}):n.jsxs(n.Fragment,{children:[n.jsx(pw,{className:"w-4 h-4 mr-2"}),"Launch Demo"]})})]})]})}),n.jsx(q.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.5},className:"max-w-2xl mx-auto",children:n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"bg-gradient-to-br from-slate-800 to-slate-900 rounded-3xl p-8 shadow-2xl border border-white/10",children:n.jsx("div",{className:"bg-slate-950 rounded-2xl p-6 min-h-[300px] flex flex-col justify-center",children:n.jsxs(q.div,{initial:{opacity:0,x:e===0?-20:e===1?20:0,y:e===2?-20:0},animate:{opacity:1,x:0,y:0},exit:{opacity:0},className:"space-y-4",children:[n.jsx("div",{className:`p-4 rounded-2xl ${e===0?"bg-blue-600/20 border border-blue-500/40":e===1?"bg-purple-600/20 border border-purple-500/40":"bg-green-600/20 border border-green-500/40"}`,children:n.jsx("p",{className:`text-sm md:text-base ${e===0?"text-blue-200":e===1?"text-purple-200":"text-green-200"}`,children:u[e].text})}),n.jsx("div",{className:"flex gap-2 justify-center pt-4",children:[0,1,2].map(h=>n.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${h===e?"w-8 bg-blue-500":"w-2 bg-blue-500/30"}`},h))})]},e)})}),n.jsx(q.div,{className:"absolute -top-4 -right-4 w-16 h-16 bg-gradient-to-br from-blue-500 to-purple-500 rounded-full blur-xl",animate:{scale:[1,1.2,1],opacity:[.3,.5,.3]},transition:{duration:2,repeat:1/0,ease:"easeInOut"}})]})})]}),n.jsx(q.div,{initial:{opacity:0},animate:{opacity:r<100?1:0,y:r<100?0:20},transition:{delay:1,duration:.3},className:"absolute bottom-8 left-1/2 transform -translate-x-1/2",children:n.jsx(q.div,{animate:{y:[0,10,0]},transition:{duration:1.5,repeat:1/0},className:"w-6 h-10 border-2 border-blue-400/50 rounded-full flex items-start justify-center p-2",children:n.jsx(q.div,{className:"w-1 h-2 bg-blue-400 rounded-full"})})})]})}function V1({title:e,subtitle:t,badge:r,className:s=""}){return n.jsxs(q.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.5},className:`text-center mb-8 md:mb-10 lg:mb-12 ${s}`,children:[r&&n.jsx(q.div,{initial:{opacity:0,scale:.8},whileInView:{opacity:1,scale:1},viewport:{once:!0},className:"inline-block mb-3 md:mb-4",children:n.jsx("span",{className:"px-3 py-1.5 md:px-4 md:py-2 bg-gradient-to-r from-blue-600/20 to-purple-600/20 border border-blue-500/30 rounded-full text-blue-300 text-xs md:text-sm font-medium",children:r})}),n.jsx("h2",{className:"text-3xl sm:text-4xl md:text-5xl font-bold text-white mb-3 md:mb-4 px-4",children:e}),t&&n.jsx("p",{className:"text-base md:text-lg lg:text-xl text-blue-200 max-w-3xl mx-auto px-4 leading-relaxed",children:t})]})}function d9({tabs:e,activeTab:t,onChange:r,className:s=""}){return n.jsx("div",{className:`flex flex-wrap gap-1.5 sm:gap-2 justify-center ${s}`,children:e.map(a=>{const i=t===a.id,o=!!a.accentColor;return n.jsxs("button",{onClick:()=>r(a.id),className:`relative px-3 py-2 sm:px-4 sm:py-2.5 md:px-5 rounded-full text-xs sm:text-sm font-semibold transition-all duration-300 group touch-manipulation ${o&&!i?`bg-gradient-to-r ${a.accentColor} text-white shadow-lg hover:shadow-xl hover:scale-105 active:scale-95`:i?"":"bg-white/5 text-blue-300 hover:bg-white/10 hover:text-white active:bg-white/15"}`,"data-testid":`tab-${a.id}`,children:[i&&n.jsx(q.div,{layoutId:"activeTab",className:"absolute inset-0 bg-gradient-to-r from-blue-600 to-purple-600 rounded-full shadow-2xl",transition:{type:"spring",duration:.5}}),n.jsx("span",{className:`relative z-10 whitespace-nowrap ${i?"text-white":""}`,children:a.label})]},a.id)})})}const fmt={"Profile View":[{icon:Fn,text:"Complete contact information & preferences"},{icon:Dt,text:"Full appointment history & scheduling"},{icon:on,text:"Communication logs across all channels"},{icon:Qr,text:"Service ratings & loyalty status"}],"Service History":[{icon:Rt,text:"Chronological service records with photos"},{icon:Ar,text:"Payment history & invoices"},{icon:bs,text:"Service notes & technician feedback"},{icon:ya,text:"Spending trends & service recommendations"}]},ef=[{id:"scheduling",label:"Scheduling & Routing",icon:Dt,accentColor:"from-green-500 to-emerald-500",title:"Smart Scheduling & Route Optimization",description:"Calendar integration meets intelligent location clustering",bullets:["Google Calendar API sync for real-time availability","Location-based clustering reduces drive time","Route optimization with Google Maps integration","Conflict detection prevents double-booking","Buffer time calculation between appointments","Weather-aware rescheduling suggestions"],mockups:[{title:"Today's Route",desc:"5 stops, optimized path",color:"from-blue-500/20 to-cyan-500/20"},{title:"Calendar View",desc:"Week at a glance",color:"from-purple-500/20 to-pink-500/20"}]},{id:"address-mapping",label:"Address Verification",icon:cQ,accentColor:"from-cyan-500 to-blue-500",title:"Interactive Address Confirmation",description:"Google Maps integration ensures accurate service locations",bullets:["Visual map confirmation with draggable pin","Automatic address validation and geocoding","Customers verify location before booking","Lat/lng coordinates saved for technicians","Address review flags for uncertain locations","One-tap navigation to exact customer location"],mockups:[{title:"Map Confirm",desc:"Drag pin to exact spot",color:"from-cyan-500/20 to-blue-500/20"},{title:"Auto-Geocode",desc:"Validates addresses",color:"from-blue-500/20 to-indigo-500/20"}]},{id:"qr-security",label:"QR Security",icon:aT,accentColor:"from-purple-500 to-pink-500",title:"HMAC-Signed QR Codes",description:"Secure customer identification without passwords",bullets:["HMAC-SHA256 signed QR codes for security","One-scan access to service history","No passwords or login required","Tamper-proof with cryptographic signatures","Time-limited tokens prevent replay attacks","Perfect for on-site customer verification"],mockups:[{title:"QR Generate",desc:"Secure customer tokens",color:"from-purple-500/20 to-pink-500/20"},{title:"Scan Access",desc:"Instant verification",color:"from-pink-500/20 to-red-500/20"}]},{id:"phone-voice",label:"Phone & Voice",icon:bt,accentColor:"from-teal-500 to-cyan-500",title:"Advanced Twilio Voice System",description:"Dual-line phone system with SIP integration and intelligent voicemail handling",bullets:["Dual phone lines: Main (918-856-5304) + Jody's line (918-856-5711)","Google Voice-style UI with line switching","SIP routing with custom ringtones via Groundwire app","Configurable ring duration (10-60 seconds before voicemail)","After-hours voicemail with separate greeting (activates 30min after schedule)","Caller ID passthrough preserves original caller number","Recent Callers widget with click-to-call","Voicemail transcription with AI-powered SMS responses","Configurable notification preferences per line"],mockups:[{title:"Dual Lines",desc:"Switch between lines",color:"from-green-500/20 to-emerald-500/20"},{title:"SIP Setup",desc:"Groundwire integration",color:"from-teal-500/20 to-cyan-500/20"}]},{id:"sms-email",label:"Smart SMS & Email",icon:on,accentColor:"from-purple-500 to-pink-500",title:"Automated Communication Suite",description:"TCPA-compliant messaging with intelligent personalization",bullets:["Auto-reply system with context awareness","TCPA compliance built-in for SMS campaigns","Template system with variable substitution","Personalization based on service history","Delivery tracking and read receipts","Multi-channel orchestration (SMS + Email)"],mockups:[{title:"Auto-Reply",desc:"Instant engagement",color:"from-green-500/20 to-emerald-500/20"},{title:"Templates",desc:"20+ pre-built",color:"from-yellow-500/20 to-orange-500/20"}]},{id:"customer-profiles",label:"Customer Profiles",icon:br,accentColor:"from-blue-500 to-cyan-500",title:"Complete Customer Intelligence",description:"Every vehicle, every service, every interaction tracked",bullets:["Full service history with before/after photos","Multi-vehicle tracking per customer","Loyalty points system with rewards","Referral tracking and credit management","Automatic service reminders based on time/mileage","Notes and preferences per customer"],mockups:[{title:"Profile View",desc:"360 customer data",color:"from-indigo-500/20 to-purple-500/20"},{title:"Service History",desc:"Complete timeline",color:"from-pink-500/20 to-red-500/20"}]},{id:"technician-mode",label:"Technician iPad App",icon:pu,accentColor:"from-indigo-500 to-blue-500",title:"App-Like PWA Experience",description:"Install as an app on any device - no app store required",bullets:["Progressive Web App with offline capability","Add to home screen for native app feel","Today's jobs with one-tap navigation","Mobile workflow for check-in/check-out","Push notifications for new assignments","Real-time status updates to customers"],mockups:[{title:"PWA Install",desc:"Works like a native app",color:"from-blue-500/20 to-cyan-500/20"},{title:"Offline Mode",desc:"View jobs without signal",color:"from-cyan-500/20 to-teal-500/20"}]},{id:"admin-dashboard",label:"Admin Dashboard",icon:ja,title:"Business Control Center",description:"Set the rules, let automation handle the rest",bullets:["Service area radius configuration","Minimum spend requirements per job","Weather policy automation (rain rules)","Upsell trigger configuration","Pricing rules and dynamic adjustments","Team permissions and role management"],mockups:[{title:"Rules Engine",desc:"Set it and forget it",color:"from-purple-500/20 to-pink-500/20"},{title:"Analytics",desc:"Real-time insights",color:"from-orange-500/20 to-red-500/20"}]},{id:"employee-scheduling",label:"Employee Scheduling",icon:Dt,accentColor:"from-fuchsia-500 to-purple-500",title:"Employee Scheduling System",description:"Complete shift management with automated conflict detection",bullets:["Weekly calendar grid view","30-day technician schedules","PTO request workflows with approval","Shift trading with race condition prevention","Overtime warnings at 40+ hours/week","SMS alerts for schedule changes","Shift-appointment linking"],mockups:[{title:"Schedule Grid",desc:"Weekly view",color:"from-purple-500/20 to-pink-500/20"},{title:"PTO Management",desc:"Approval workflow",color:"from-indigo-500/20 to-purple-500/20"}]},{id:"homepage-cms",label:"Homepage CMS",icon:No,accentColor:"from-sky-500 to-cyan-500",title:"Homepage CMS Editor",description:"Visual content management with real-time preview",bullets:["Live split-screen editing","Hero, About, Services sections","Brand color customization (HSL)","Logo upload and management","SEO meta tags editor","Real-time homepage updates"],mockups:[{title:"Live Preview",desc:"Split-screen editing",color:"from-cyan-500/20 to-blue-500/20"},{title:"SEO Tools",desc:"Meta tag editor",color:"from-blue-500/20 to-indigo-500/20"}]},{id:"usage-dashboard",label:"API Usage & Costs",icon:Ar,accentColor:"from-emerald-500 to-green-500",title:"API Usage & Cost Tracking",description:"Real-time monitoring of all external service costs",bullets:["Twilio SMS/Call tracking","OpenAI token usage & costs","Stripe payment processing fees","SendGrid email statistics","Service health monitoring","MTD/YTD cost breakdowns"],mockups:[{title:"Cost Overview",desc:"MTD/YTD breakdown",color:"from-green-500/20 to-emerald-500/20"},{title:"Health Status",desc:"Service monitoring",color:"from-emerald-500/20 to-teal-500/20"}]},{id:"careers-portal",label:"Careers Portal",icon:Np,accentColor:"from-orange-500 to-red-500",title:"Careers & Employment Portal",description:"Attract and manage job applicants with ease",bullets:["Public job listings page","Application form with validation","Resume upload (PDF/DOC/DOCX)","Admin application review dashboard","Status workflow management","Candidate tracking & notes"],mockups:[{title:"Job Listings",desc:"Public careers page",color:"from-orange-500/20 to-red-500/20"},{title:"Applications",desc:"Admin review dashboard",color:"from-red-500/20 to-pink-500/20"}]},{id:"customer-intelligence",label:"Customer Intelligence",icon:$f,accentColor:"from-violet-500 to-purple-500",title:"GPT-Powered Customer Intelligence",description:"Returning customer tracking with personalized AI service recommendations",bullets:["Automatic returning customer detection and tracking","GPT personalization service analyzes customer history","Personalized service recommendations based on past bookings","Context-aware messaging references previous services","Vehicle-specific maintenance reminders","Intelligent upselling based on customer preferences","Service frequency analysis and insights"],mockups:[{title:"Customer Insights",desc:"AI-powered analysis",color:"from-purple-500/20 to-pink-500/20"},{title:"Smart Suggestions",desc:"Personalized offers",color:"from-pink-500/20 to-red-500/20"}]},{id:"cash-payments",label:"Cash Tracking",icon:Zv,accentColor:"from-lime-500 to-green-500",title:"Cash Payment & Deposit Management",description:"Manual cash entry with daily deposit tracking for technicians",bullets:["Manual cash payment entry for on-site collections","Daily deposit summary widget for technicians","Cash collections widget tracks amounts by technician","Deposit history with date and amount tracking","Integration with job completion workflow","Admin oversight of all cash transactions","Reconciliation tools for daily cash management"],mockups:[{title:"Cash Entry",desc:"Quick payment logging",color:"from-green-500/20 to-emerald-500/20"},{title:"Daily Deposits",desc:"Technician tracking",color:"from-emerald-500/20 to-teal-500/20"}]},{id:"referral-system",label:"Referral Program",icon:jr,accentColor:"from-amber-500 to-orange-500",title:"Complete Referral Rewards System",description:"9 reward types with admin code generation and comprehensive tracking",bullets:["9 reward types: percentage off, fixed amount, free service, BOGO, upgrade, points bonus, gift card, early access, VIP tier","Admin tools for referral code generation and management","Automatic referrer credit tracking on invoice payment","Referral code input during booking flow","Usage tracking and redemption analytics","Configurable reward values and expiration dates","Referral performance dashboard with conversion metrics"],mockups:[{title:"Code Generator",desc:"9 reward types",color:"from-yellow-500/20 to-orange-500/20"},{title:"Tracking Dashboard",desc:"Analytics & credits",color:"from-orange-500/20 to-red-500/20"}]}];function hmt(){const[e,t]=p.useState("scheduling"),r=ef.find(a=>a.id===e)||ef[0],s=r.icon;return p.useEffect(()=>{const a=i=>{const o=ef.findIndex(l=>l.id===e);i.key==="ArrowLeft"&&o>0?(i.preventDefault(),t(ef[o-1].id)):i.key==="ArrowRight"&&o<ef.length-1&&(i.preventDefault(),t(ef[o+1].id))};return window.addEventListener("keydown",a),()=>window.removeEventListener("keydown",a)},[e]),n.jsx("section",{id:"feature-map",className:"py-12 md:py-20 lg:py-24 relative",children:n.jsxs("div",{className:"container mx-auto px-4 md:px-6 lg:px-8",children:[n.jsx(V1,{badge:"Core Capabilities",title:"Feature Map",subtitle:"Fifteen integrated systems working together to run your entire operation"}),n.jsxs("div",{className:"relative",children:[n.jsx(d9,{tabs:ef.map(a=>({id:a.id,label:a.label,accentColor:a.accentColor})),activeTab:e,onChange:t,className:"mb-8 md:mb-12 lg:mb-16"}),n.jsx("p",{className:"text-center text-xs text-blue-200/60 mt-2 hidden sm:block",children:"Use arrow keys   to navigate"})]}),n.jsx($s,{mode:"wait",children:n.jsxs(q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"grid lg:grid-cols-2 gap-6 md:gap-6 lg:gap-8 items-start",children:[n.jsxs("div",{className:"space-y-4 md:space-y-4 lg:space-y-6",children:[n.jsxs("div",{className:"flex items-start gap-3 md:gap-3 lg:gap-4 mb-4 md:mb-5 lg:mb-6",children:[n.jsx("div",{className:"p-3 md:p-4 bg-gradient-to-br from-blue-600/20 to-purple-600/20 rounded-xl md:rounded-2xl border border-blue-500/30 flex-shrink-0",children:n.jsx(s,{className:"w-6 h-6 md:w-8 md:h-8 text-blue-400"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl md:text-2xl lg:text-3xl font-bold text-white leading-tight",children:r.title}),n.jsx("p",{className:"text-sm md:text-base text-blue-200 mt-1",children:r.description})]})]}),n.jsx("div",{className:"space-y-2 md:space-y-3",children:r.bullets.map((a,i)=>n.jsxs(q.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:i*.1},className:"flex items-start gap-2 md:gap-3",children:[n.jsx(Mr,{className:"w-4 h-4 md:w-5 md:h-5 text-green-400 mt-0.5 md:mt-1 flex-shrink-0"}),n.jsx("p",{className:"text-sm md:text-base text-blue-100 leading-relaxed",children:a})]},i))})]}),n.jsx("div",{className:"space-y-3 md:space-y-3 lg:space-y-4",children:r.mockups.map((a,i)=>{const o=fmt[a.title];return n.jsxs(q.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:.2+i*.1},whileHover:{scale:1.02,y:-5},className:`bg-gradient-to-br ${a.color} backdrop-blur-xl border border-white/20 rounded-xl md:rounded-2xl p-5 md:p-4 lg:p-8 cursor-pointer group relative overflow-hidden`,children:[n.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/0 via-white/10 to-white/0 opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),n.jsxs("div",{className:"relative z-10",children:[n.jsx("h4",{className:"text-lg md:text-xl font-semibold text-white mb-1 md:mb-2",children:a.title}),n.jsx("p",{className:"text-sm md:text-base text-blue-200",children:a.desc}),o?n.jsx("div",{className:"mt-4 md:mt-4 lg:mt-6 space-y-2 md:space-y-2 lg:space-y-3",children:o.map((l,c)=>{const d=l.icon;return n.jsxs(q.div,{initial:{opacity:0,x:-20},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{delay:c*.1},className:"flex items-start gap-2 md:gap-3",children:[n.jsx("div",{className:"p-1.5 md:p-2 bg-gradient-to-br from-blue-500/20 to-purple-500/20 rounded-lg flex-shrink-0",children:n.jsx(d,{className:"w-3.5 h-3.5 md:w-4 md:h-4 text-blue-300"})}),n.jsx("span",{className:"text-xs md:text-sm text-blue-100/80 leading-relaxed",children:l.text})]},c)})}):n.jsxs("div",{className:"mt-4 md:mt-4 lg:mt-6 space-y-2",children:[n.jsx("div",{className:"h-2.5 md:h-3 bg-white/10 rounded-full w-3/4"}),n.jsx("div",{className:"h-2.5 md:h-3 bg-white/10 rounded-full w-full"}),n.jsx("div",{className:"h-2.5 md:h-3 bg-white/10 rounded-full w-1/2"})]})]})]},i)})})]},e)})]})})}const Jb=[{number:1,title:"Customer Contacts",description:"SMS or call comes in from new or existing customer",logic:"Service area validation",icon:on,color:"from-blue-500 to-cyan-500",codeSnippet:`IF customer.location IN service_area:
  SEND welcome_message
ELSE:
  OFFER alternate_options`},{number:2,title:"Details Collected",description:"Vehicle type, service needs, and location captured",logic:"Calendar + location matching",icon:Dt,color:"from-purple-500 to-pink-500",codeSnippet:`GET available_slots(location, service_duration)
OPTIMIZE for drive_time
PROPOSE top_3_slots`},{number:3,title:"Appointment Confirmed",description:"Time slot selected, booking created, tech assigned",logic:"Route optimization",icon:zr,color:"from-green-500 to-emerald-500",codeSnippet:`CREATE appointment
ASSIGN tech_by_location
CALCULATE optimal_route
SEND confirmation_sms`},{number:4,title:"Job Completed",description:"Service finished, photos uploaded, payment collected",logic:"Review request trigger",icon:bn,color:"from-yellow-500 to-orange-500",codeSnippet:`MARK job_complete
SEND thank_you_message
SCHEDULE review_request(+2 hours)
UPDATE customer_history`},{number:5,title:"Follow-Up Cadence",description:"Seasonal reminders, maintenance alerts, special offers",logic:"Upsell intelligence",icon:Yc,color:"from-indigo-500 to-purple-500",codeSnippet:`IF days_since_service > 90:
  SEND maintenance_reminder
IF vehicle_type == "luxury":
  OFFER ceramic_coating`}];function mmt(){const[e,t]=p.useState(null);return n.jsx("section",{id:"flows",className:"py-24 relative overflow-hidden",children:n.jsxs("div",{className:"container mx-auto px-4",children:[n.jsx(V1,{badge:"Customer Journey",title:"Real-World Flow",subtitle:"From first contact to loyal customer - automated every step of the way"}),n.jsx("div",{className:"hidden md:flex gap-6 overflow-x-auto pb-8 snap-x snap-mandatory scrollbar-hide",children:Jb.map((r,s)=>{const a=r.icon;return n.jsxs(q.div,{initial:{opacity:0,x:50},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{delay:s*.1},onHoverStart:()=>t(s),onHoverEnd:()=>t(null),className:"snap-start flex-shrink-0 w-80 relative",children:[n.jsx("div",{className:`bg-gradient-to-br ${r.color} opacity-20 absolute inset-0 rounded-2xl blur-2xl ${e===s?"opacity-40":""} transition-opacity`}),n.jsxs("div",{className:"relative bg-gradient-to-br from-white/10 to-white/5 backdrop-blur-xl border border-white/20 rounded-2xl p-6 h-full hover:border-white/40 transition-all duration-300",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("div",{className:`w-12 h-12 rounded-full bg-gradient-to-br ${r.color} flex items-center justify-center text-white font-bold text-xl`,children:r.number}),n.jsx(a,{className:"w-8 h-8 text-blue-400"})]}),n.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:r.title}),n.jsx("p",{className:"text-blue-200 mb-4",children:r.description}),n.jsx("div",{className:"inline-block px-3 py-1 bg-white/10 rounded-full border border-white/20 mb-4",children:n.jsxs("span",{className:"text-xs text-blue-300 flex items-center gap-1",children:[n.jsx(pj,{className:"w-3 h-3"}),r.logic]})}),n.jsx($s,{children:e===s&&n.jsx(q.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mt-4 bg-slate-900/80 rounded-lg p-3 border border-blue-500/20 overflow-hidden",children:n.jsx("pre",{className:"text-xs text-blue-200 font-mono overflow-x-auto",children:r.codeSnippet})})})]}),s<Jb.length-1&&n.jsx("div",{className:"absolute top-1/2 -right-3 transform -translate-y-1/2 z-10",children:n.jsx("div",{className:"w-6 h-6 bg-white/10 rounded-full flex items-center justify-center border border-white/20",children:n.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full"})})})]},s)})}),n.jsx("div",{className:"md:hidden space-y-6",children:Jb.map((r,s)=>{const a=r.icon;return n.jsxs(q.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:s*.1},className:"relative",children:[n.jsx("div",{className:`bg-gradient-to-br ${r.color} opacity-20 absolute inset-0 rounded-2xl blur-2xl`}),n.jsxs("div",{className:"relative bg-gradient-to-br from-white/10 to-white/5 backdrop-blur-xl border border-white/20 rounded-2xl p-6",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[n.jsx("div",{className:`w-12 h-12 rounded-full bg-gradient-to-br ${r.color} flex items-center justify-center text-white font-bold text-xl flex-shrink-0`,children:r.number}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-xl font-bold text-white",children:r.title}),n.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[n.jsx(a,{className:"w-4 h-4 text-blue-400"}),n.jsx("span",{className:"text-xs text-blue-300",children:r.logic})]})]})]}),n.jsx("p",{className:"text-blue-200 mb-3",children:r.description}),n.jsx("div",{className:"bg-slate-900/80 rounded-lg p-3 border border-blue-500/20",children:n.jsx("pre",{className:"text-xs text-blue-200 font-mono overflow-x-auto",children:r.codeSnippet})})]}),s<Jb.length-1&&n.jsx("div",{className:"flex justify-center py-2",children:n.jsx("div",{className:"w-0.5 h-6 bg-gradient-to-b from-blue-500/50 to-transparent"})})]},s)})})]})})}function pmt({code:e,language:t="pseudo",title:r}){const s=e.trim().split(`
`);return n.jsxs(q.div,{initial:{opacity:0},whileInView:{opacity:1},viewport:{once:!0},className:"bg-slate-900/80 backdrop-blur-sm border border-blue-500/20 rounded-xl overflow-hidden",children:[r&&n.jsx("div",{className:"px-4 py-2 bg-blue-600/10 border-b border-blue-500/20 text-blue-300 text-sm font-medium",children:r}),n.jsx("div",{className:"p-4 overflow-x-auto",children:n.jsx("pre",{className:"text-sm font-mono",children:s.map((a,i)=>{const o=a.trim(),l=a.length-o.length;let c="text-blue-200";return o.startsWith("WHEN")||o.startsWith("IF")||o.startsWith("ELSE")?c="text-purple-400 font-semibold":o.startsWith("SEND")||o.startsWith("SCHEDULE")||o.startsWith("TRIGGER")?c="text-green-400 font-semibold":(o.startsWith("ALWAYS")||o.startsWith("CHECK"))&&(c="text-yellow-400 font-semibold"),n.jsx(q.div,{initial:{opacity:0,x:-10},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{delay:i*.05},className:c,style:{paddingLeft:`${l*8}px`},children:o},i)})})})]})}const xk=[{id:"sms",label:"SMS Flows",title:"Smart SMS Automation",description:"Intelligent text message sequences that feel human",rules:["New inquiry receives instant response with service area check","Appointment confirmations sent 24 hours before with weather check","ETA updates when technician is 15 minutes away","Thank you message immediately after service completion","Review request sent 2 hours post-service for best response rate"],code:`WHEN new_inquiry VIA sms:
  IF in_service_area AND slots_available:
    SEND "Thanks for reaching out! What are we working on today?"
    WAIT for response
    COLLECT vehicle_info, service_type
    PROPOSE optimized_time_slots(location, duration)
  ELSE IF outside_service_area:
    SEND "We're a bit far, but happy to help! Min $X for the trip."
  ALWAYS tag with: [status, vehicle_type, location]
  
WHEN appointment.time - 24h:
  CHECK weather_forecast
  IF rain_probability > 70%:
    SEND "Weather looks rough tomorrow. Want to reschedule or move indoors?"
  ELSE:
    SEND "Excited for tomorrow! We'll text when we're 15 min away."
    
WHEN job.status == "complete":
  SEND "Hope you love the results! "
  SCHEDULE review_request(+2 hours)
  ADD to maintenance_sequence(+90 days)`},{id:"email",label:"Email Sequences",description:"Professional email campaigns that nurture and retain",title:"Email Automation",rules:["Welcome series for new customers (3 emails over 7 days)","Appointment reminders with add-on suggestions","Post-service follow-up with care tips and next service discount","Review request with direct link to preferred platform","Seasonal campaigns (spring detail, winter protection, summer prep)"],code:`SEQUENCE new_customer_welcome:
  EMAIL 1 (immediate):
    SUBJECT: "Welcome to Clean Machine! "
    CONTENT: Intro, what to expect, service menu
    CTA: "Book Your First Detail"
    
  EMAIL 2 (+3 days):
    SUBJECT: "How We're Different (Spoiler: We Care)"
    CONTENT: Process, quality standards, team intro
    CTA: "Meet the Team"
    
  EMAIL 3 (+7 days):
    SUBJECT: "Special Offer Just for You"
    CONTENT: New customer discount, referral program
    CTA: "Claim Your 15% Off"

SEQUENCE post_service_nurture:
  EMAIL 1 (+1 day):
    SUBJECT: "Thanks for trusting us with your [vehicle]!"
    CONTENT: Care tips, before/after photos
    
  EMAIL 2 (+7 days):
    IF no_review_left:
      SUBJECT: "Quick favor?"
      CONTENT: Review request, link to Google
      
  EMAIL 3 (+90 days):
    SUBJECT: "Time for a refresh?"
    CONTENT: Maintenance reminder, current specials
    OFFER: 10% returning customer discount`},{id:"scheduling",label:"Scheduling Rules",title:"Intelligent Scheduling Logic",description:"Location-aware booking that maximizes efficiency",rules:["Service area radius enforced (default 25 miles, configurable)","Minimum job value for outside-area trips","Time slot optimization based on existing route","Buffer time between jobs (travel + prep)","No double-booking with conflict detection","Weather-aware time slot filtering"],code:`WHEN booking_request RECEIVED:
  CHECK service_area:
    IF distance_from_base > config.max_radius:
      IF job_value >= config.min_outside_area_value:
        APPLY surcharge(distance)
        SHOW available_slots
      ELSE:
        SUGGEST minimum_package OR different_day
        
  CALCULATE available_slots:
    FOR each day IN next_14_days:
      GET existing_appointments(day)
      CALCULATE drive_time(last_job.location -> new_location)
      ADD buffer_time(X min)
      
      IF total_duration fits IN calendar_gap:
        CHECK weather_forecast(day)
        IF outdoor_service AND rain_probability > 60%:
          SKIP this slot
        ELSE:
          ADD to available_slots
          
    SORT available_slots BY (
      route_optimization_score DESC,
      customer_preference ASC
    )
    RETURN top_3_slots`},{id:"weather",label:"Weather Policies",title:"Weather-Aware Operations",description:"Automatic rescheduling based on forecast conditions",rules:["Check forecast 24 hours before outdoor appointments","Offer indoor alternatives (garage, covered area)","Automatic reschedule with customer consent","No-penalty cancellation for heavy rain/snow","Priority rebooking for weather cancellations"],code:`SCHEDULE daily_weather_check AT 8am:
  FOR each appointment IN next_48_hours:
    IF appointment.location_type == "outdoor":
      forecast = GET weather_forecast(appointment.location, appointment.time)
      
      IF forecast.rain_probability > 70%:
        SEND_SMS(customer):
          "Weather looks rough for [date]. Three options:
           1. Move indoors (garage/carport)
           2. Reschedule (no penalty)
           3. Brave it together "
          
        AWAIT customer_response(timeout: 6h)
        
        MATCH customer_choice:
          "indoor":
            UPDATE appointment.notes = "Indoor location"
            SEND "Perfect! See you then."
          "reschedule":
            PROPOSE alternative_slots(priority: high)
            WAIVE any_change_fees
          "continue":
            ADD note: "Customer confirmed despite weather"
            
      ELSE IF forecast.rain_probability > 40%:
        SEND "Small chance of rain [date]. We'll monitor and update you!"`},{id:"upsell",label:"Upsell Logic",title:"Intelligent Upsell Engine",description:"Context-aware recommendations that add value",rules:["Package upgrades based on vehicle type and condition","Ceramic coating for luxury vehicles and new cars","Maintenance plans for repeat customers","Seasonal add-ons (winter protection, summer prep)","Post-service follow-up offers based on service history"],code:`WHEN booking.service SELECTED:
  ANALYZE context:
    vehicle_age = booking.vehicle.year - current_year
    vehicle_value = LOOKUP(booking.vehicle.make, booking.vehicle.model)
    customer_ltv = CALCULATE(customer.total_spent, customer.frequency)
    
  IF vehicle_value > 40000 OR vehicle_age < 2:
    RECOMMEND ceramic_coating:
      PITCH: "Your [vehicle] deserves the best protection!"
      SHOW: 5-year warranty, before/after results
      DISCOUNT: 15% if_added_today
      
  IF customer.service_count > 3:
    RECOMMEND maintenance_plan:
      PITCH: "Save 20% with quarterly detailing membership"
      SHOW: cost_comparison, priority_scheduling
      
  IF season == "winter" AND location.climate == "cold":
    RECOMMEND undercarriage_protection:
      PITCH: "Salt & snow protection special"
      BUNDLE: "Add for $49 (save $30)"
      
AFTER service.complete:
  WAIT 3_days
  SEND personalized_offer:
    IF interior_only:
      "Complete the transformation? 20% off exterior next visit"
    IF exterior_only:
      "Interior looking tired? Special offer inside..."
    IF full_detail:
      "Maintenance plan = keep this shine year-round"`}];function gmt(){const[e,t]=p.useState("sms"),r=xk.find(s=>s.id===e)||xk[0];return n.jsx("section",{id:"automation-logic",className:"py-24 relative bg-gradient-to-b from-transparent via-blue-950/20 to-transparent",children:n.jsxs("div",{className:"container mx-auto px-4",children:[n.jsx(V1,{badge:"Under the Hood",title:"Automation Logic",subtitle:"See exactly how Clean Machine makes smart decisions for your business"}),n.jsx(d9,{tabs:xk.map(s=>({id:s.id,label:s.label})),activeTab:e,onChange:t,className:"mb-16"}),n.jsx($s,{mode:"wait",children:n.jsxs(q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"grid md:grid-cols-2 gap-8 items-start",children:[n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-3xl font-bold text-white mb-3",children:r.title}),n.jsx("p",{className:"text-lg text-blue-200",children:r.description})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h4",{className:"text-xl font-semibold text-white",children:"How It Works:"}),r.rules.map((s,a)=>n.jsxs(q.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:a*.1},className:"flex items-start gap-3 p-4 bg-white/5 rounded-lg border border-white/10",children:[n.jsx("div",{className:"w-6 h-6 rounded-full bg-gradient-to-br from-blue-600 to-purple-600 flex items-center justify-center flex-shrink-0 text-white text-sm font-bold",children:a+1}),n.jsx("p",{className:"text-blue-100",children:s})]},a))]})]}),n.jsx("div",{className:"sticky top-8",children:n.jsx(pmt,{code:r.code,language:"pseudo",title:"Logic Flow (Simplified)"})})]},e)})]})})}function xmt(){const{trialModalOpen:e,openTrialModal:t,closeTrialModal:r}=c9(),[s,a]=p.useState(!1),[i,o]=p.useState(""),[l,c]=p.useState(""),[d,u]=p.useState(!1),{toast:f}=Ee(),h=["Fully white-labeled with your branding and colors","Handles SMS, email, and scheduling automatically","Works for detailing, lawn care, home cleaning, and more","No long-term contracts - cancel anytime","14-day free trial to test it with your business"],m=["Auto Detailing","Lawn Care","House Cleaning","Pool Service","Pet Grooming","Plumbing","HVAC","Landscaping","Other"],g=async()=>{if(!i||!l){f({title:"Missing Information",description:"Please provide both email and industry",variant:"destructive"});return}u(!0);try{const y=await(await fetch("/api/leads/trial-request",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:i,industry:l})})).json();y.success?a(!0):f({title:"Error",description:y.message||"Failed to submit request",variant:"destructive"})}catch{f({title:"Error",description:"Failed to submit request. Please try again.",variant:"destructive"})}finally{u(!1)}};return n.jsxs("section",{id:"whitelabel",className:"py-24 relative",children:[n.jsx("div",{className:"container mx-auto px-4 max-w-4xl",children:n.jsxs(q.div,{initial:{opacity:0,scale:.95},whileInView:{opacity:1,scale:1},viewport:{once:!0},className:"relative",children:[n.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-600/20 via-purple-600/20 to-cyan-600/20 rounded-3xl blur-3xl"}),n.jsxs("div",{className:"relative bg-gradient-to-br from-white/15 to-white/10 backdrop-blur-2xl border-2 border-white/30 rounded-3xl p-12",children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsx(q.div,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"inline-block mb-6",children:n.jsx("div",{className:"w-24 h-24 mx-auto bg-gradient-to-br from-white/20 to-white/10 border-2 border-dashed border-white/30 rounded-2xl flex items-center justify-center",children:n.jsx("span",{className:"text-white/50 text-sm font-medium",children:"Your Logo"})})}),n.jsxs(q.h2,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:.1},className:"text-4xl md:text-5xl font-bold text-white mb-4",children:["Want Clean Machine for",n.jsx("span",{className:"block bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent mt-2",children:"Your Service Business?"})]}),n.jsx(q.p,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:.2},className:"text-xl text-blue-100 mb-4",children:"This platform powers service businesses of all types"}),n.jsxs(q.div,{initial:{opacity:0,y:10},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:.3},className:"inline-flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-purple-500/20 to-blue-500/20 border border-white/20 rounded-full mb-8",children:[n.jsx(ln,{className:"h-4 w-4 text-purple-300"}),n.jsx("span",{className:"text-sm text-purple-100 font-medium",children:"ServicePro Multi-Tenant Transformation Ready"})]})]}),n.jsx(q.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:.3},className:"space-y-3 mb-8",children:h.map((x,y)=>n.jsxs(q.div,{initial:{opacity:0,x:-20},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{delay:.4+y*.1},className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-1 bg-gradient-to-br from-green-600/30 to-emerald-600/30 rounded-full",children:n.jsx(Mr,{className:"w-5 h-5 text-green-400"})}),n.jsx("span",{className:"text-blue-100 text-lg",children:x})]},y))}),n.jsxs(q.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:.9},className:"text-center",children:[n.jsxs(_,{size:"lg",onClick:t,className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white px-12 py-6 text-lg rounded-full shadow-2xl hover:shadow-blue-500/50 transition-all duration-300 hover:scale-105","data-testid":"button-free-trial",children:[n.jsx(ln,{className:"w-5 h-5 mr-2"}),"Start a 14-Day Free Trial"]}),n.jsx("p",{className:"text-sm text-blue-200 mt-4",children:"No credit card required  Cancel anytime"})]})]})]})}),n.jsx(At,{open:e,onOpenChange:x=>{x?t():(r(),setTimeout(()=>{a(!1),o(""),c("")},300))},children:n.jsx(_t,{className:"sm:max-w-md",children:s?n.jsxs("div",{className:"py-8 text-center space-y-4",children:[n.jsx("div",{className:"mx-auto w-16 h-16 bg-green-500/20 rounded-full flex items-center justify-center",children:n.jsx(Mr,{className:"w-8 h-8 text-green-500"})}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("h3",{className:"text-xl font-semibold",children:"Thank You!"}),n.jsx("p",{className:"text-muted-foreground",children:"We'll reach out with onboarding info shortly!"})]}),n.jsx(_,{onClick:r,className:"mt-4",children:"Close"})]}):n.jsxs(n.Fragment,{children:[n.jsx($t,{children:n.jsx(Et,{children:"Start Your Free Trial"})}),n.jsxs("div",{className:"space-y-4 py-4",children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Enter your email address and we'll reach out to get you set up right away!"}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(U,{htmlFor:"email",children:"Email Address *"}),n.jsx(se,{id:"email",type:"email",placeholder:"your@email.com",value:i,onChange:x=>o(x.target.value),"data-testid":"input-trial-email"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(U,{htmlFor:"industry",children:"What industry do you work in? *"}),n.jsxs(Pt,{value:l,onValueChange:c,children:[n.jsx(kt,{id:"industry","data-testid":"select-trial-industry",children:n.jsx(Tt,{placeholder:"Select your industry"})}),n.jsx(Mt,{children:m.map(x=>n.jsx(ve,{value:x,children:x},x))})]})]}),n.jsx(_,{onClick:g,disabled:d,className:"w-full","data-testid":"button-submit-trial",children:d?"Submitting...":"Submit"})]})]})})})]})}const ymt=[{icon:bt,question:"Can it work with my existing phone number?",answer:"Yes! Clean Machine integrates with Twilio, which means you can either port your existing number or get a new local number. All SMS and calls route through the platform, and you keep full control."},{icon:nh,question:"Is it only for car detailing?",answer:"Not at all. While we built it for mobile detailing, the platform works for any service business: lawn care, house cleaning, HVAC, plumbing, dog grooming, mobile mechanics - anything with appointments and customer communication."},{icon:pw,question:"How hard is it to get started?",answer:"We handle the heavy lifting. You provide your business info, phone number, and service menu. We configure the AI, set up your messaging, and train you on the system. Most businesses are live within 3-5 days."},{icon:rQ,question:"What if I'm not techy?",answer:"Perfect - you don't need to be! The interface is designed for mobile use (think: simple as texting). We provide training videos, live onboarding, and ongoing support. If you can use a smartphone, you can use Clean Machine."},{icon:Ar,question:"How does pricing work?",answer:"Simple monthly subscription based on your message volume and features. Starts at $99/month for solopreneurs, scales with your team size. 14-day free trial, no contracts, cancel anytime. We also handle Twilio costs (SMS/calls) for you."},{icon:on,question:"Will my customers know it's automated?",answer:"They won't notice - and that's the point. The AI sounds natural and helpful. For complex questions or sensitive situations, it notifies you to take over manually. You can also disable AI anytime and handle everything yourself."}];function vmt(){const{openTrialModal:e}=c9(),[t,r]=p.useState(null),s=a=>{r(t===a?null:a)};return n.jsx("section",{id:"faq",className:"py-24 relative",children:n.jsxs("div",{className:"container mx-auto px-4 max-w-4xl",children:[n.jsx(V1,{badge:"Questions Answered",title:"Frequently Asked Questions",subtitle:"Everything you need to know about Clean Machine"}),n.jsx("div",{className:"space-y-4 mb-12",children:ymt.map((a,i)=>{const o=a.icon,l=t===i;return n.jsxs(q.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:i*.1},className:"bg-gradient-to-br from-white/10 to-white/5 backdrop-blur-xl border border-white/20 rounded-xl overflow-hidden hover:border-white/40 transition-all duration-300",children:[n.jsxs("button",{onClick:()=>s(i),className:"w-full p-6 flex items-start gap-4 text-left hover:bg-white/5 transition-colors","data-testid":`faq-button-${i}`,children:[n.jsx("div",{className:"p-2 bg-gradient-to-br from-blue-600/20 to-purple-600/20 rounded-lg flex-shrink-0",children:n.jsx(o,{className:"w-5 h-5 text-blue-400"})}),n.jsx("div",{className:"flex-1",children:n.jsx("h3",{className:"text-lg font-semibold text-white mb-1 pr-8",children:a.question})}),n.jsx(q.div,{animate:{rotate:l?180:0},transition:{duration:.3},className:"flex-shrink-0",children:n.jsx(Ui,{className:"w-5 h-5 text-blue-400"})})]}),n.jsx($s,{children:l&&n.jsx(q.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3},className:"overflow-hidden",children:n.jsx("div",{className:"px-6 pb-6 pl-20",children:n.jsx("p",{className:"text-blue-100 leading-relaxed",children:a.answer})})})})]},i)})}),n.jsxs(q.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"bg-gradient-to-r from-blue-600/20 via-purple-600/20 to-cyan-600/20 backdrop-blur-xl border border-white/30 rounded-2xl p-8 text-center",children:[n.jsx("h3",{className:"text-2xl font-bold text-white mb-4",children:"Ready to See Clean Machine in Action?"}),n.jsx("p",{className:"text-blue-100 mb-6 max-w-2xl mx-auto",children:"Try the interactive sandbox below or start your free trial today"}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[n.jsxs(_,{size:"lg",className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white px-8 py-6 text-lg rounded-full","data-testid":"button-sandbox",onClick:()=>{var a;return(a=document.getElementById("sandbox"))==null?void 0:a.scrollIntoView({behavior:"smooth"})},children:["Try the Sandbox",n.jsx(Gc,{className:"w-5 h-5 ml-2"})]}),n.jsx(_,{size:"lg",variant:"outline",onClick:e,className:"border-2 border-blue-400/50 bg-white/5 backdrop-blur-sm hover:bg-white/10 text-white px-8 py-6 text-lg rounded-full","data-testid":"button-start-trial",children:"Start Free Trial"})]})]})]})})}const bmt=[{id:"free",label:"Free Play"},{id:"new-lead",label:"New Lead  Booking"},{id:"rain-reschedule",label:"Rain Reschedule"},{id:"follow-up",label:"Follow-Up & Reviews"},{id:"upsell",label:"Upsell & Packages"}],wmt={free:["Need a detail","How much for exterior?","Available tomorrow?"],"new-lead":["Full detail for my sedan","John Smith","123 Main St, Boston MA"],"rain-reschedule":["Reschedule please","Move indoors","Keep the original time"],"follow-up":["Sure, happy to review!","Can I get a discount?","What about maintenance?"],upsell:["Tell me about ceramic coating","How much for membership?","Not interested right now"]},lB={free:[{id:"1",text:"Thanks for reaching out! How can I help you today?",sender:"agent",timestamp:new Date}],"new-lead":[{id:"1",text:"Thanks for reaching out! What are we working on today?",sender:"agent",timestamp:new Date}],"rain-reschedule":[{id:"1",text:"Weather forecast shows 80% chance of rain tomorrow for your appointment. Three options: (1) Keep it and brave the weather, (2) Move to an indoor location if you have a garage, or (3) Reschedule for free. What works best for you?",sender:"agent",timestamp:new Date}],"follow-up":[{id:"1",text:"Hope you're loving your freshly detailed car!  Mind taking 30 seconds to leave us a quick review? It really helps us out!",sender:"agent",timestamp:new Date}],upsell:[{id:"1",text:"Your car looks amazing! By the way, we have a ceramic coating special this month - keeps that shine for up to 5 years. Want to hear more about it?",sender:"agent",timestamp:new Date}]},cB={free:[{id:"e1",type:"sms",message:"Conversation started",timestamp:new Date,details:"Customer initiated contact via SMS"}],"new-lead":[{id:"e1",type:"sms",message:"New lead detected",timestamp:new Date,details:"Customer type: Unknown, initiating qualification flow"},{id:"e2",type:"tag",message:"Applied: New Lead tag",timestamp:new Date,details:"Status: collecting_info"}],"rain-reschedule":[{id:"e1",type:"rule",message:"Weather check triggered",timestamp:new Date,details:"Rain probability: 80%, outdoor appointment detected"},{id:"e2",type:"sms",message:"Reschedule options sent",timestamp:new Date,details:"Offering: keep, indoor, or reschedule"}],"follow-up":[{id:"e1",type:"schedule",message:"Post-service follow-up triggered",timestamp:new Date,details:"Job completed 2 hours ago, optimal time for review request"},{id:"e2",type:"sms",message:"Review request sent",timestamp:new Date,details:"Platform: Google Reviews"}],upsell:[{id:"e1",type:"rule",message:"Upsell opportunity detected",timestamp:new Date,details:"Vehicle type: Luxury sedan, high-value customer"},{id:"e2",type:"sms",message:"Ceramic coating offer sent",timestamp:new Date,details:"Promotion: 15% off if added today"}]};function jmt(e,t){const[r,s]=p.useState("");return p.useEffect(()=>{if(!t){s(e);return}let a=0;s("");const i=setInterval(()=>{a<=e.length?(s(e.slice(0,a)),a++):clearInterval(i)},20);return()=>clearInterval(i)},[e,t]),r}function Nmt({message:e,showTyping:t}){const r=jmt(e.text,t&&e.sender==="agent");return n.jsx(q.div,{initial:{opacity:0,y:10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.2},className:`flex ${e.sender==="customer"?"justify-start":"justify-end"}`,children:n.jsxs("div",{className:`max-w-[80%] md:max-w-[70%] ${e.sender==="customer"?"bg-white/10 text-blue-100 rounded-2xl rounded-tl-md":"bg-gradient-to-br from-blue-600 to-purple-600 text-white rounded-2xl rounded-tr-md"} px-4 py-3 shadow-lg`,children:[n.jsx("p",{className:"text-sm leading-relaxed",children:r||e.text}),n.jsx("p",{className:"text-xs opacity-60 mt-1",children:e.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})})}function Smt({mode:e,messages:t,onSendMessage:r,onReset:s}){const[a,i]=p.useState(""),[o,l]=p.useState(!1),[c,d]=p.useState(!1),u=p.useRef(null),f=p.useRef(t.length),{toast:h}=Ee();p.useEffect(()=>{var w;if((w=u.current)==null||w.scrollIntoView({behavior:"smooth"}),t.length>f.current){const N=t[t.length-1];N.sender==="agent"&&(l(!0),d(!0),setTimeout(()=>{l(!1)},Math.min(N.text.length*20,800)))}f.current=t.length},[t]);const m=()=>{a.trim()&&(r(a),i(""))},g=w=>{r(w)},x=w=>{w.key==="Enter"&&!w.shiftKey&&(w.preventDefault(),m())},y=wmt[e],v=()=>{s&&(s(),h({title:"Conversation reset",description:"Starting fresh!"}))},b=()=>{const w=t.map(N=>`[${N.sender}]: ${N.text}`).join(`
`);navigator.clipboard.writeText(w),h({title:"Copied!",description:"Conversation copied to clipboard"})};return n.jsxs("div",{className:"flex flex-col h-full bg-gradient-to-br from-slate-900/80 to-blue-900/80 backdrop-blur-xl border border-white/20 rounded-2xl overflow-hidden",children:[n.jsxs("div",{className:"px-6 py-4 bg-white/5 border-b border-white/10 flex items-center gap-3",children:[n.jsx("div",{className:"p-2 bg-gradient-to-br from-blue-600/20 to-purple-600/20 rounded-lg",children:n.jsx(yo,{className:"w-5 h-5 text-blue-400"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-white font-semibold",children:"Clean Machine Agent"}),n.jsx("p",{className:"text-xs text-blue-200",children:"Always available"})]}),n.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[n.jsx("button",{onClick:b,className:"p-2 hover:bg-white/10 rounded-lg transition-colors",title:"Copy conversation","data-testid":"button-copy-chat",children:n.jsx(Qv,{className:"w-4 h-4 text-blue-300"})}),s&&n.jsx("button",{onClick:v,className:"p-2 hover:bg-white/10 rounded-lg transition-colors",title:"Reset conversation","data-testid":"button-reset-chat",children:n.jsx(E0,{className:"w-4 h-4 text-blue-300"})}),n.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"})]})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",style:{minHeight:"400px",maxHeight:"500px"},children:[n.jsx($s,{mode:"popLayout",children:t.map((w,N)=>n.jsx(Nmt,{message:w,showTyping:N===t.length-1&&c},w.id))}),n.jsx($s,{children:o&&n.jsx(q.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0},className:"flex justify-end",children:n.jsxs("div",{className:"bg-gradient-to-br from-blue-600/50 to-purple-600/50 rounded-2xl rounded-tr-md px-4 py-3 flex items-center gap-2",children:[n.jsx("div",{className:"flex gap-1",children:[0,1,2].map(w=>n.jsx(q.div,{className:"w-2 h-2 bg-white rounded-full",animate:{y:[0,-5,0]},transition:{duration:.6,repeat:1/0,delay:w*.2}},w))}),n.jsx("span",{className:"text-xs text-white/70",children:"typing..."})]})})}),n.jsx("div",{ref:u})]}),y&&y.length>0&&n.jsx("div",{className:"px-6 pb-3",children:n.jsx("div",{className:"flex flex-wrap gap-2",children:y.map((w,N)=>n.jsx(q.button,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:N*.1},whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>g(w),className:"px-4 py-2 bg-white/10 hover:bg-white/20 border border-white/20 rounded-full text-sm text-blue-100 transition-all duration-200","data-testid":`suggestion-${N}`,children:w},N))})}),n.jsx("div",{className:"px-6 py-4 bg-white/5 border-t border-white/10",children:n.jsxs("div",{className:"flex gap-2",children:[n.jsx(se,{value:a,onChange:w=>i(w.target.value),onKeyPress:x,placeholder:"Type your message...",className:"flex-1 bg-white/10 border-white/20 text-white placeholder:text-blue-200/50 focus:border-blue-400","data-testid":"input-message"}),n.jsx(_,{onClick:m,disabled:!a.trim(),className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 disabled:opacity-50 disabled:cursor-not-allowed","data-testid":"button-send",children:n.jsx(Vi,{className:"w-4 h-4"})})]})})]})}const Cmt={sms:{icon:on,color:"from-blue-500 to-cyan-500",bg:"bg-blue-500/10",border:"border-blue-500/30"},email:{icon:Cr,color:"from-purple-500 to-pink-500",bg:"bg-purple-500/10",border:"border-purple-500/30"},rule:{icon:pj,color:"from-yellow-500 to-orange-500",bg:"bg-yellow-500/10",border:"border-yellow-500/30"},schedule:{icon:Dt,color:"from-green-500 to-emerald-500",bg:"bg-green-500/10",border:"border-green-500/30"},tag:{icon:Jv,color:"from-indigo-500 to-purple-500",bg:"bg-indigo-500/10",border:"border-indigo-500/30"}};function kmt({events:e}){const[t,r]=p.useState(null),[s,a]=p.useState("simple");return n.jsxs("div",{className:"flex flex-col h-full bg-gradient-to-br from-slate-900/80 to-indigo-900/80 backdrop-blur-xl border border-white/20 rounded-2xl overflow-hidden",children:[n.jsxs("div",{className:"px-6 py-4 bg-white/5 border-b border-white/10",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsx("h3",{className:"text-white font-semibold",children:"Automation Timeline"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>a("simple"),className:`px-3 py-1 rounded-lg text-xs font-medium transition-all ${s==="simple"?"bg-blue-600 text-white":"bg-white/10 text-blue-200 hover:bg-white/20"}`,"data-testid":"button-view-simple",children:"Simple"}),n.jsx("button",{onClick:()=>a("advanced"),className:`px-3 py-1 rounded-lg text-xs font-medium transition-all ${s==="advanced"?"bg-blue-600 text-white":"bg-white/10 text-blue-200 hover:bg-white/20"}`,"data-testid":"button-view-advanced",children:"Advanced"})]})]}),n.jsx("p",{className:"text-xs text-blue-200",children:"Live feed of automation events"})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-3",style:{minHeight:"400px",maxHeight:"500px"},children:[n.jsx($s,{mode:"popLayout",children:e.map((i,o)=>{const l=Cmt[i.type],c=l.icon,d=t===i.id;return n.jsx(q.div,{initial:{opacity:0,x:30},animate:{opacity:1,x:0},exit:{opacity:0,x:-30},transition:{type:"spring",damping:20,stiffness:300,delay:o*.05},layout:!0,children:n.jsx("div",{className:`${l.bg} border ${l.border} rounded-xl overflow-hidden hover:border-white/40 transition-all duration-200 cursor-pointer`,onClick:()=>r(d?null:i.id),"data-testid":`event-${o}`,children:n.jsxs("div",{className:"p-4",children:[n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:`p-2 bg-gradient-to-br ${l.color} rounded-lg flex-shrink-0`,children:n.jsx(c,{className:"w-4 h-4 text-white"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center justify-between gap-2 mb-1",children:[n.jsx("span",{className:"text-sm font-medium text-white truncate",children:i.message}),i.details&&s==="advanced"&&n.jsx(q.div,{animate:{rotate:d?90:0},transition:{duration:.2},children:n.jsx(vl,{className:"w-4 h-4 text-blue-300 flex-shrink-0"})})]}),n.jsxs("div",{className:"flex items-center gap-2 text-xs text-blue-200/70",children:[n.jsx("span",{className:"uppercase font-medium",children:i.type}),n.jsx("span",{children:""}),n.jsx("span",{children:i.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"})})]})]})]}),n.jsx($s,{children:d&&i.details&&s==="advanced"&&n.jsx(q.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.2},className:"overflow-hidden",children:n.jsx("div",{className:"mt-3 pt-3 border-t border-white/10",children:n.jsx("p",{className:"text-sm text-blue-100 font-mono",children:i.details})})})})]})})},i.id)})}),e.length===0&&n.jsx("div",{className:"text-center py-12",children:n.jsx("p",{className:"text-blue-200/50",children:"No events yet. Start chatting to see automation in action!"})})]}),n.jsx("div",{className:"px-6 py-3 bg-white/5 border-t border-white/10",children:n.jsxs("div",{className:"flex items-center justify-between text-xs",children:[n.jsxs("span",{className:"text-blue-200/70",children:[e.length," events logged"]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),n.jsx("span",{className:"text-green-400",children:"Live"})]})]})})]})}function Mmt(e){const[t,r]=p.useState(lB[e]),[s,a]=p.useState(cB[e]),[i,o]=p.useState("greeting"),[l,c]=p.useState({}),d=p.useCallback((m,g)=>{const x={id:Date.now().toString(),text:m,sender:g,timestamp:new Date};return r(y=>[...y,x]),x},[]),u=p.useCallback((m,g,x)=>{const y={id:Date.now().toString(),type:m,message:g,timestamp:new Date,details:x};a(v=>[...v,y])},[]),f=p.useCallback(m=>{d(m,"customer");const g=m.toLowerCase();let x="";if(e==="new-lead"){if(i==="greeting"&&!l.service)c(y=>({...y,service:m})),o("collecting_name"),x="Perfect! What name should I put this under?",u("tag","Service type captured",`Service: ${m}`);else if(i==="collecting_name"&&!l.name)c(y=>({...y,name:m})),o("collecting_address"),x=`Great to meet you, ${m}! What's the address where we'll be detailing?`,u("tag","Customer name recorded",`Name: ${m}`);else if(i==="collecting_address"&&!l.address)c(y=>({...y,address:m})),o("offering_slots"),x="Checking availability for your area... I have Tuesday at 2-4pm, Wednesday at 10am-12pm, or Thursday at 3-5pm. Which works best?",u("rule","Service area check passed","Location: Within service radius"),u("schedule","Available slots calculated","Optimized based on route and weather");else if(i==="offering_slots"){o("confirming");const y=g.includes("tuesday")?"Tuesday 2-4pm":g.includes("wednesday")?"Wednesday 10am-12pm":g.includes("thursday")?"Thursday 3-5pm":"Tuesday 2-4pm";x=`Perfect! You're all set for ${y}. I'll send a confirmation text 24 hours before with weather updates. See you then! `,u("schedule",`Appointment confirmed: ${y}`,"Status: booked"),u("schedule","Reminder scheduled","Will send 24h before with weather check"),u("tag","Customer status updated","Status: Active customer"),u("email","Welcome email queued","Will send: booking confirmation + what to expect"),o("completed")}}else if(e==="rain-reschedule"){if(g.includes("reschedule")||g.includes("move")||g.includes("change"))x="No problem! I have Friday at 1-3pm, Saturday at 9-11am, or next Monday at 2-4pm. What works better?",u("schedule","Original appointment moved","Previous: Tomorrow 10am-12pm"),u("rule","Waived reschedule fee","Reason: Weather policy");else if(g.includes("indoor")||g.includes("garage"))x="Perfect! We'll plan for an indoor detail. Make sure there's enough light and we're good to go. See you tomorrow!",u("tag","Location updated","Type: Indoor/covered"),o("completed");else if(g.includes("keep")||g.includes("brave"))x="Got it! We'll monitor the forecast and reach out if it gets worse. Otherwise, see you tomorrow rain or shine! ",u("tag","Customer confirmed","Decision: Proceed despite weather"),o("completed");else if(g.includes("friday")||g.includes("saturday")||g.includes("monday")){const y=g.includes("friday")?"Friday 1-3pm":g.includes("saturday")?"Saturday 9-11am":"Monday 2-4pm";x=`Awesome! You're rescheduled for ${y}. I'll send a reminder the day before. Thanks for being flexible!`,u("schedule",`New appointment: ${y}`,"Priority rebooking applied"),u("sms","Confirmation sent",`Rescheduled to ${y}`),o("completed")}}else e==="follow-up"?g.includes("yes")||g.includes("sure")||g.includes("happy")?(x="You're awesome! Here's the link: [Google Review]. Also, did you know we offer a maintenance membership? Get 20% off all year for just $49/month.",u("email","Review link sent","Platform: Google Reviews"),u("tag","Review requested","Status: Link sent"),u("rule","Upsell opportunity triggered","Offer: Maintenance membership")):g.includes("discount")||g.includes("deal")?(x="Absolutely! As a thank you, here's 15% off your next detail. Book within 30 days and it's yours!",u("tag","Discount code generated","Code: THANKS15, expires in 30 days")):(g.includes("maintenance")||g.includes("membership"))&&(x="Our maintenance plan is perfect for keeping your car looking fresh! $49/month gets you quarterly details (normally $120 each), priority booking, and 20% off all add-ons. Want to sign up?",u("rule","Maintenance plan pitched","Potential revenue: $588/year")):e==="upsell"?g.includes("ceramic")||g.includes("coating")||g.includes("tell me")||g.includes("more")?(x="Ceramic coating creates a protective layer that lasts 3-5 years. Your car stays cleaner longer, water beads off like magic, and it's way easier to wash. Normally $599, but if you add it today: $499. Want to do it?",u("rule","Upsell details provided","Product: Ceramic coating, discount applied")):g.includes("yes")||g.includes("do it")||g.includes("add")?(x="Amazing choice! I'll add ceramic coating to your next visit. You just saved $100! I'll send over the updated invoice with the total. Thanks for trusting us with your car! ",u("schedule","Ceramic coating added","Service date: Next appointment"),u("email","Updated invoice sent","New total: $499 (saved $100)"),u("tag","Upsell successful","Revenue added: +$499"),o("completed")):g.includes("membership")||g.includes("how much")?(x="Great question! Our membership is $49/month and includes quarterly full details (save $180/year), priority booking, and 20% off everything else. Want to join?",u("rule","Alternative upsell offered","Product: Membership plan")):(g.includes("not")||g.includes("no thanks"))&&(x="No worries at all! The offer stands if you change your mind. Thanks again for choosing us! ",u("tag","Upsell declined","Status: Not interested"),o("completed")):g.includes("detail")||g.includes("clean")?(x="Great! We offer full interior/exterior details, just exterior, just interior, and ceramic coating. What sounds good?",u("tag","Service inquiry","Type: General detail")):g.includes("price")||g.includes("cost")||g.includes("much")?(x="Pricing depends on your vehicle size and service. Sedans start at $120 for a full detail, SUVs at $150. Want a specific quote?",u("tag","Pricing inquiry","Provided: Base pricing")):g.includes("tomorrow")||g.includes("available")||g.includes("book")?(x="Let me check availability... I have slots tomorrow at 10am, 1pm, and 4pm. Which time works for you?",u("schedule","Availability checked","Date: Tomorrow")):g.includes("where")||g.includes("location")?(x="We're mobile - we come to you! We service the Greater Boston area (within 25 miles of downtown). Where are you located?",u("rule","Service area inquiry","Radius: 25 miles")):x="I'm here to help! You can ask about our services, pricing, availability, or book an appointment. What would you like to know?";setTimeout(()=>{d(x,"agent"),u("sms","Response sent",x.substring(0,50)+"...")},500)},[e,i,l,d,u]),h=p.useCallback(()=>{r(lB[e]),a(cB[e]),o("greeting"),c({})},[e]);return{messages:t,events:s,state:i,customerData:l,processMessage:f,reset:h}}function _mt(){const[e,t]=p.useState("new-lead"),{messages:r,events:s,processMessage:a,reset:i}=Mmt(e);p.useEffect(()=>{i()},[e,i]);const o=c=>{t(c)},l=()=>{i()};return n.jsx("section",{id:"sandbox",className:"py-24 relative bg-gradient-to-b from-transparent via-indigo-950/30 to-transparent",children:n.jsxs("div",{className:"container mx-auto px-4",children:[n.jsx(V1,{badge:"Try It Yourself",title:"Live Interactive Sandbox",subtitle:"Experience Clean Machine's AI automation firsthand - no signup required"}),n.jsxs("div",{className:"mb-8",children:[n.jsxs("div",{className:"flex items-center justify-center gap-4 flex-wrap mb-6",children:[n.jsx(d9,{tabs:bmt.map(c=>({id:c.id,label:c.label})),activeTab:e,onChange:o}),n.jsxs(_,{onClick:l,variant:"outline",size:"sm",className:"border-blue-400/50 bg-white/5 hover:bg-white/10 text-blue-200","data-testid":"button-reset",children:[n.jsx(E0,{className:"w-4 h-4 mr-2"}),"Reset"]})]}),n.jsxs(q.p,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"text-center text-blue-200 max-w-2xl mx-auto",children:[e==="free"&&"Ask anything! Try booking questions, pricing, or availability.",e==="new-lead"&&"Watch a complete booking flow from first contact to confirmed appointment.",e==="rain-reschedule"&&"See how weather automation handles rescheduling gracefully.",e==="follow-up"&&"Experience post-service follow-ups and review requests.",e==="upsell"&&"See how smart upselling works without being pushy."]},e)]}),n.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[n.jsx(q.div,{initial:{opacity:0,x:-30},animate:{opacity:1,x:0},transition:{duration:.5},children:n.jsx(Smt,{mode:e,messages:r,onSendMessage:a,onReset:i})},`chat-${e}`),n.jsx(q.div,{initial:{opacity:0,x:30},animate:{opacity:1,x:0},transition:{duration:.5},children:n.jsx(kmt,{events:s})},`timeline-${e}`)]}),n.jsx(q.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"mt-12 text-center",children:n.jsx("div",{className:"inline-block bg-gradient-to-r from-blue-600/10 via-purple-600/10 to-cyan-600/10 backdrop-blur-sm border border-white/20 rounded-2xl px-8 py-6 max-w-3xl",children:n.jsxs("p",{className:"text-blue-100 leading-relaxed",children:[n.jsx("strong",{className:"text-white",children:"This is a simplified demo."})," The real Clean Machine uses GPT-4o for natural conversations, connects to your actual calendar, sends real SMS/emails, and handles complex scenarios. This sandbox shows the ",n.jsx("em",{children:"type"})," of intelligence you get, not the full depth."]})})})]})})}function Pmt(){return p.useEffect(()=>{document.title="Clean Machine Showcase - The Brain of Your Detailing Business",window.scrollTo({top:0,left:0,behavior:"auto"}),window.location.hash&&window.history.replaceState(null,"",window.location.pathname);const e=setTimeout(()=>{window.scrollTo({top:0,left:0,behavior:"auto"})},100);return()=>clearTimeout(e)},[]),n.jsx(cmt,{children:n.jsxs(lmt,{children:[n.jsx(dmt,{}),n.jsx(umt,{}),n.jsx(hmt,{}),n.jsx(mmt,{}),n.jsx(gmt,{}),n.jsx(xmt,{}),n.jsx(vmt,{}),n.jsx(_mt,{}),n.jsx("footer",{className:"py-12 border-t border-white/10",children:n.jsx("div",{className:"container mx-auto px-4 text-center",children:n.jsxs("p",{className:"text-blue-200/70 text-sm",children:[" ",new Date().getFullYear()," Clean Machine. Built for service excellence."]})})})]})})}const Tmt=({size:e="md",className:t=""})=>{const s={sm:"w-8 h-8",md:"w-12 h-12",lg:"w-16 h-16"}[e];return n.jsx("div",{className:`${s} flex items-center justify-center overflow-hidden bg-black rounded-lg ${t}`,children:n.jsx("img",{src:aue,alt:"Clean Machine Logo",className:"w-full h-full object-contain p-0.5"})})};function Amt(){const[,e]=zt(),[t,r]=p.useState(0),s=lwe();p.useEffect(()=>{s.start({opacity:1,y:0,transition:{duration:.6}})},[s]);const a=[{icon:bt,title:"Voicemail-Aware Call Handling",description:"Revolutionary missed call intelligence",details:["Waits 5-10 seconds after missed call to check for voicemail","Reads voicemail transcription via Twilio's speech-to-text","Crafts personalized SMS response addressing the caller's message","Falls back to generic missed call SMS only if no voicemail left","Prevents awkward 'We missed your call' texts when caller already left details"],stat:"95% caller satisfaction",color:"from-blue-500 to-cyan-500"},{icon:on,title:"Multi-Channel Messaging Hub",description:"Unified conversations across all platforms",details:["SMS via Twilio with delivery tracking and read receipts","Facebook Messenger integration with Graph API","Instagram Direct Messages with real-time sync","Web chat widget with AI-powered responses","All platforms unified in single conversation view","Smart routing based on customer preference history"],stat:"4 channels, 1 inbox",color:"from-purple-500 to-pink-500"},{icon:$f,title:"GPT-4o AI Engine",description:"Intelligent customer service automation",details:["Natural conversation flow with context memory","Service recommendation based on vehicle condition","Quote generation for specialty detailing jobs","Intent detection: booking, question, complaint, pricing","Automatic upselling with context-aware offers","Manual takeover mode for complex situations"],stat:"87% automation rate",color:"from-green-500 to-emerald-500"},{icon:Dt,title:"Smart Scheduling System",description:"Weather-aware appointment booking",details:["Google Calendar API integration for real-time availability","Weather forecast checking (Open-Meteo API)","Automatic rescheduling suggestions for rain forecasts","Conflict detection and double-booking prevention","Service duration calculation with buffer time","Drive time estimation via Google Maps API"],stat:"Zero scheduling conflicts",color:"from-orange-500 to-red-500"},{icon:ln,title:"iMessage-Quality Messaging",description:"Modern chat experience for customers",details:["Real-time read receipts with timestamp tracking","Typing indicators ('typing...' animation)","Message reactions with emoji support","Conversation search and history","Offline draft saving with localStorage","Conversation isolation prevents draft leakage"],stat:"Real-time engagement",color:"from-indigo-500 to-purple-500"},{icon:Qr,title:"Gamified Loyalty Program",description:"Points-based rewards system",details:["Automatic points for every service (10 points per $1)","Milestone rewards with canvas confetti celebrations","Tiered benefits: Bronze, Silver, Gold, Platinum","Birthday bonus points with automated emails","Referral rewards tracking","Points redemption for service discounts"],stat:"40% repeat customers",color:"from-yellow-500 to-orange-500"},{icon:wx,title:"Dual Phone Line System",description:"Google Voice-style multi-line management",details:["Main business line (918-856-5304) + Jody's line (918-856-5711)","Google Voice-style UI with seamless line switching","Independent voicemail boxes per line","Twilio routing with caller ID passthrough","Configurable ring duration (10-60 seconds before voicemail)","Recent Callers widget with click-to-call functionality","Line-specific notification preferences"],stat:"2 lines, 1 interface",color:"from-cyan-500 to-blue-500"},{icon:aT,title:"QR Code Security System",description:"HMAC-SHA256 secure customer identification",details:["Cryptographically signed QR codes with HMAC-SHA256","Tamper-proof customer verification tokens","One-scan access to complete service history","No passwords or login credentials required","Time-limited tokens prevent replay attacks","Perfect for on-site customer verification by technicians","Secure URL generation with expiration tracking"],stat:"Zero password friction",color:"from-purple-500 to-pink-500"},{icon:$f,title:"Customer Intelligence Engine",description:"GPT-powered personalization and tracking",details:["Automatic returning customer detection and flagging","GPT personalization service analyzes full customer history","Context-aware service recommendations based on past bookings","Intelligent messaging references previous services","Vehicle-specific maintenance reminders and scheduling","Predictive upselling based on customer preferences","Service frequency analysis with insights dashboard"],stat:"Personalized experiences",color:"from-indigo-500 to-purple-500"},{icon:Zv,title:"Cash Payment Tracking",description:"Manual entry with daily deposit management",details:["Quick manual cash payment entry for on-site collections","Daily deposit summary widget for technicians","Cash collections widget tracks amounts by technician","Deposit history with date and amount tracking","Integrated with job completion workflow","Admin oversight dashboard for all cash transactions","Reconciliation tools for end-of-day cash management"],stat:"Full cash visibility",color:"from-green-500 to-emerald-500"},{icon:jr,title:"Comprehensive Referral System",description:"9 reward types with advanced tracking",details:["9 reward types: percentage off, fixed amount, free service, BOGO, upgrade","Points bonus, gift card, early access, VIP tier promotions","Admin code generation with custom reward configuration","Automatic referrer credit tracking upon invoice payment","Referral code input integrated into booking flow","Usage analytics and redemption tracking dashboard","Performance metrics with conversion rate analysis"],stat:"9 reward types",color:"from-yellow-500 to-orange-500"},{icon:Q0e,title:"SIP Routing & Custom Ringtones",description:"Groundwire app integration for personalized call handling",details:["Twilio SIP integration with custom endpoint configuration","Groundwire app support for Android with custom ringtones","Different ringtones per phone line for instant recognition","SIP credentials auto-generated and securely stored","After-hours voicemail with separate greeting message","Voicemail activates 30 minutes after last scheduled shift","Professional call routing with IVR menu system"],stat:"Professional phone system",color:"from-teal-500 to-cyan-500"}],i=[{category:"Payment Processing",icon:Ar,features:["Stripe integration with payment intents","Branded invoice emails with HTML templates","Multi-payment options (Stripe, PayPal, Venmo, CashApp)","Cash payment tracking with daily deposit widgets","HMAC-signed payment links with 7-day TTL","Auto-generated invoice numbers (INV-2025-001)","Referral credit application on invoice payment","DoS protection with rate limiting"]},{category:"Security & Compliance",icon:zn,features:["HMAC-SHA256 signed QR codes for customer verification","TCPA/CTIA SMS consent with double opt-in","Twilio webhook signature verification","E.164 phone number normalization","Session-based authentication with 2FA support","Google OAuth integration","WebAuthn biometric login support","Time-limited security tokens prevent replay attacks"]},{category:"Business Intelligence",icon:ya,features:["Real-time dashboard analytics","Call metrics and duration tracking","SMS delivery monitoring","Conversation sentiment analysis","Revenue tracking and forecasting","Customer lifetime value calculation","Returning customer detection and insights","Referral performance and conversion metrics"]},{category:"Phone System",icon:wx,features:["Dual phone lines with independent routing","Caller ID passthrough preserves original number","Configurable ring duration (10-60 seconds)","After-hours voicemail (activates 30min after schedule)","Recent Callers widget with click-to-call","SIP integration with Groundwire for custom ringtones","Configurable notification preferences per line","IVR menu with intelligent call routing"]},{category:"Operational Features",icon:tQ,features:["Auto-failover protection for system errors","Service capacity limits with maintenance mode","Dynamic banner management for announcements","Technician job routing and dispatch","Photo gallery with Google Drive integration","Recurring service subscriptions","Interactive address validation with Google Maps","Smart scheduling with location clustering"]}],o=[{name:"OpenAI GPT-4o",purpose:"AI conversations & service intelligence"},{name:"Twilio",purpose:"SMS, voice calls, voicemail transcription"},{name:"Facebook Graph API",purpose:"Messenger & Instagram DMs"},{name:"Google Workspace",purpose:"Calendar, Sheets, Drive, Maps"},{name:"Stripe",purpose:"Payment processing"},{name:"PostgreSQL + Drizzle",purpose:"Customer data & conversation history"},{name:"React + TypeScript",purpose:"Modern UI with type safety"},{name:"Express.js",purpose:"API backend with WebSocket support"}],l=[{scenario:"Customer Calls After Hours",flow:["Call goes to voicemail","System waits 5-10 seconds","Twilio transcribes voicemail","AI reads: 'Hi, I need a full detail tomorrow at 2pm for my Jeep'","SMS sent: 'Thanks for your message! I can schedule your Jeep for full detail tomorrow at 2pm. Reply YES to confirm.'","Customer replies YES","Appointment auto-created in Google Calendar","Confirmation email sent with service details"],highlight:"Zero human interaction required"},{scenario:"Dual Phone Line Intelligence",flow:["Main line (918-856-5304) receives customer booking call","Jody's line (918-856-5711) receives supplier call simultaneously","Custom ringtones via Groundwire identify which line is ringing","Both lines show caller ID passthrough with original numbers","Main line: Customer schedules appointment  auto-added to calendar","Jody's line: Supplier voicemail  transcribed and texted within 10 seconds","Recent Callers widget shows both conversations separately","Line-specific notifications ensure proper routing"],highlight:"Professional multi-line management"},{scenario:"Returning Customer Recognition",flow:["Customer texts: 'Hey, can I get another detail?'","GPT Intelligence Service detects returning customer","Analyzes history: Last service was Full Detail 3 months ago","AI responds: 'Welcome back! Last time we did your Tesla Model 3. Ready for another Full Detail, or interested in our new Ceramic Coating?'","Customer asks about ceramic coating pricing","AI provides personalized quote based on previous vehicle","Suggests scheduling 2 weeks out based on optimal service interval","Applies loyalty discount automatically"],highlight:"GPT-powered personalization"},{scenario:"Customer Texts About Damage",flow:["Customer: 'I have some scratches on my door, can you fix them?'","AI detects damage repair intent","Responds: 'I can help! Please text 3 photos: close-up of damage, full door view, overall vehicle'","Customer sends photos  uploaded to Google Drive","AI analyzes severity and suggests: 'This looks like light scratches. I recommend our Paint Correction ($150) or full Detail + Correction ($250)'","Customer selects service","Custom quote generated with photo evidence attached"],highlight:"AI-powered damage assessment workflow"},{scenario:"Referral System in Action",flow:["Existing customer shares referral code CLEAN25 (25% off first service)","New customer books via website, enters code CLEAN25","System validates code and applies 25% discount to invoice","New customer completes service and pays $112.50 (originally $150)","Upon payment confirmation, $20 referral credit auto-applied to referrer's account","Referrer receives SMS: 'Thanks for the referral! $20 credit added to your account'","Admin dashboard shows conversion: 1 use, $150 revenue, $20 credit issued","Referral analytics track code performance across all 9 reward types"],highlight:"Automated referral tracking"},{scenario:"Multi-Channel Conversation",flow:["Customer starts on Facebook Messenger: 'Do you detail trucks?'","Business responds via unified inbox","Customer switches to SMS: 'What's the price for F-150?'","System recognizes same customer (phone matching)","Continues conversation seamlessly","Full history visible across both platforms","Booking completed via web chat widget"],highlight:"Seamless cross-platform continuity"}];return n.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-950 via-blue-950 to-slate-950",children:[n.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[...Array(30)].map((c,d)=>{const u=typeof window<"u"?window.innerWidth:1920,f=typeof window<"u"?window.innerHeight:1080;return n.jsx(q.div,{className:"absolute w-1 h-1 bg-blue-400/30 rounded-full",animate:{x:[Math.random()*u,Math.random()*u],y:[Math.random()*f,Math.random()*f],opacity:[.2,.8,.2]},transition:{duration:Math.random()*10+10,repeat:1/0,ease:"linear"}},d)})}),n.jsxs("div",{className:"relative z-10 max-w-7xl mx-auto px-4 py-16 space-y-24",children:[n.jsxs(q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},className:"text-center space-y-6",children:[n.jsx("div",{className:"flex justify-center mb-8",children:n.jsx(Tmt,{className:"w-24 h-24"})}),n.jsx("h1",{className:"text-6xl md:text-7xl font-bold bg-gradient-to-r from-blue-400 via-cyan-400 to-blue-400 bg-clip-text text-transparent",children:"Clean Machine Auto Detail"}),n.jsx("p",{className:"text-2xl md:text-3xl text-slate-300 font-light",children:"AI-Powered Business Management System"}),n.jsxs("div",{className:"flex flex-wrap justify-center gap-4 pt-6",children:[n.jsxs(ge,{className:"px-6 py-2 text-lg bg-gradient-to-r from-green-500 to-emerald-500",children:[n.jsx(bn,{className:"w-5 h-5 mr-2"}),"87% Automation Rate"]}),n.jsxs(ge,{className:"px-6 py-2 text-lg bg-gradient-to-r from-blue-500 to-cyan-500",children:[n.jsx(wx,{className:"w-5 h-5 mr-2"}),"Dual Phone Lines"]}),n.jsxs(ge,{className:"px-6 py-2 text-lg bg-gradient-to-r from-purple-500 to-pink-500",children:[n.jsx($f,{className:"w-5 h-5 mr-2"}),"AI Customer Intelligence"]}),n.jsxs(ge,{className:"px-6 py-2 text-lg bg-gradient-to-r from-yellow-500 to-orange-500",children:[n.jsx(jr,{className:"w-5 h-5 mr-2"}),"9 Referral Reward Types"]})]})]}),n.jsxs("section",{className:"space-y-12",children:[n.jsxs(q.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},className:"text-center space-y-4",children:[n.jsx("h2",{className:"text-5xl font-bold text-white",children:"Intelligent Features"}),n.jsx("p",{className:"text-xl text-slate-400",children:"Revolutionary automation that understands context"})]}),n.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.map((c,d)=>{const u=c.icon;return n.jsx(q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:d*.1},whileHover:{y:-8,transition:{duration:.2}},children:n.jsxs(O,{className:"h-full bg-slate-900/50 border-slate-700 backdrop-blur hover:bg-slate-900/70 transition-all duration-300",children:[n.jsxs(ee,{children:[n.jsx("div",{className:`w-16 h-16 rounded-xl bg-gradient-to-br ${c.color} flex items-center justify-center mb-4`,children:n.jsx(u,{className:"w-8 h-8 text-white"})}),n.jsx(te,{className:"text-2xl text-white",children:c.title}),n.jsx(ke,{className:"text-slate-400 text-base",children:c.description})]}),n.jsxs(H,{className:"space-y-4",children:[n.jsx("ul",{className:"space-y-2",children:c.details.map((f,h)=>n.jsxs("li",{className:"flex items-start gap-2 text-slate-300 text-sm",children:[n.jsx(bn,{className:"w-4 h-4 text-green-400 mt-0.5 flex-shrink-0"}),n.jsx("span",{children:f})]},h))}),n.jsx("div",{className:"pt-4 border-t border-slate-700",children:n.jsx(ge,{className:"bg-blue-500/20 text-blue-300 border-blue-500/30",children:c.stat})})]})]})},d)})})]}),n.jsxs("section",{className:"space-y-12",children:[n.jsxs(q.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center space-y-4",children:[n.jsx("h2",{className:"text-5xl font-bold text-white",children:"See The Intelligence In Action"}),n.jsx("p",{className:"text-xl text-slate-400",children:"Real scenarios showing how Clean Machine thinks"})]}),n.jsx("div",{className:"space-y-8",children:l.map((c,d)=>n.jsx(q.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:d*.2},children:n.jsxs(O,{className:"bg-slate-900/50 border-slate-700 backdrop-blur overflow-hidden",children:[n.jsxs(ee,{className:"bg-gradient-to-r from-blue-900/30 to-purple-900/30",children:[n.jsxs(te,{className:"text-2xl text-white flex items-center gap-3",children:[n.jsx(Mp,{className:"w-6 h-6 text-cyan-400"}),c.scenario]}),n.jsx(ge,{className:"w-fit bg-green-500/20 text-green-300 border-green-500/30",children:c.highlight})]}),n.jsx(H,{className:"pt-6",children:n.jsx("div",{className:"space-y-4",children:c.flow.map((u,f)=>n.jsxs(q.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:d*.2+f*.1},className:"flex items-start gap-4",children:[n.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-500 flex items-center justify-center text-white font-bold flex-shrink-0",children:f+1}),n.jsx("p",{className:"text-slate-300 pt-1",children:u})]},f))})})]})},d))})]}),n.jsxs("section",{className:"space-y-12",children:[n.jsxs(q.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center space-y-4",children:[n.jsx("h2",{className:"text-5xl font-bold text-white",children:"Advanced Capabilities"}),n.jsx("p",{className:"text-xl text-slate-400",children:"Enterprise-grade features built in"})]}),n.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:i.map((c,d)=>{const u=c.icon;return n.jsx(q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:d*.1},children:n.jsxs(O,{className:"h-full bg-slate-900/50 border-slate-700 backdrop-blur",children:[n.jsx(ee,{children:n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx(u,{className:"w-8 h-8 text-cyan-400"}),n.jsx(te,{className:"text-2xl text-white",children:c.category})]})}),n.jsx(H,{children:n.jsx("ul",{className:"space-y-2",children:c.features.map((f,h)=>n.jsxs("li",{className:"flex items-start gap-2 text-slate-300",children:[n.jsx(na,{className:"w-4 h-4 text-yellow-400 mt-0.5 flex-shrink-0"}),n.jsx("span",{children:f})]},h))})})]})},d)})})]}),n.jsxs("section",{className:"space-y-12",children:[n.jsxs(q.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center space-y-4",children:[n.jsx("h2",{className:"text-5xl font-bold text-white",children:"Powered By Industry Leaders"}),n.jsx("p",{className:"text-xl text-slate-400",children:"Best-in-class integrations"})]}),n.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-4",children:o.map((c,d)=>n.jsx(q.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:d*.05},whileHover:{scale:1.05},children:n.jsx(O,{className:"bg-gradient-to-br from-slate-800 to-slate-900 border-slate-700 h-full",children:n.jsxs(ee,{children:[n.jsx(te,{className:"text-lg text-cyan-400",children:c.name}),n.jsx(ke,{className:"text-slate-400 text-sm",children:c.purpose})]})})},d))})]}),n.jsxs(q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.8},className:"text-center space-y-8 py-12",children:[n.jsx("h2",{className:"text-4xl font-bold text-white",children:"The Future of Auto Detailing Business Management"}),n.jsx("p",{className:"text-xl text-slate-400 max-w-3xl mx-auto",children:"Clean Machine combines intelligent automation with human-like understanding to deliver exceptional customer experiences while reducing operational overhead."}),n.jsxs("div",{className:"flex flex-wrap justify-center gap-4 pt-6",children:[n.jsxs(_,{size:"lg",className:"bg-gradient-to-r from-blue-500 to-cyan-500 hover:from-blue-600 hover:to-cyan-600 text-white px-8 py-6 text-lg",onClick:()=>e("/schedule"),children:[n.jsx(Dt,{className:"w-5 h-5 mr-2"}),"Book Now"]}),n.jsxs(_,{size:"lg",variant:"outline",className:"border-cyan-500 text-cyan-400 hover:bg-cyan-500/10 px-8 py-6 text-lg",onClick:()=>e("/login"),children:[n.jsx(zn,{className:"w-5 h-5 mr-2"}),"Dashboard Login"]})]})]})]})]})}function Emt(){var C,k;const{toast:e}=Ee(),[,t]=zt(),[r,s]=p.useState(!1),[a,i]=p.useState(""),[o,l]=p.useState(null),[c,d]=p.useState(!1),{data:u}=be({queryKey:["/api/users/me"]}),{data:f,isLoading:h}=be({queryKey:["/api/auth/2fa/status"]}),{data:m}=be({queryKey:["/api/auth/2fa/security-stats"]}),{data:g}=be({queryKey:["/api/auth/2fa/audit-logs"]}),x=je({mutationFn:async()=>await Ne("/api/auth/2fa/setup","POST"),onSuccess:M=>{l(M),s(!0)},onError:()=>{e({title:"Setup failed",description:"Failed to initialize 2FA setup",variant:"destructive"})}}),y=je({mutationFn:async M=>Ne("/api/auth/2fa/enable","POST",{verificationCode:M}),onSuccess:()=>{e({title:"2FA enabled",description:"Two-factor authentication is now active"}),s(!1),d(!0),ze.invalidateQueries({queryKey:["/api/auth/2fa/status"]}),ze.invalidateQueries({queryKey:["/api/auth/2fa/security-stats"]})},onError:M=>{e({title:"Verification failed",description:M.message||"Invalid verification code",variant:"destructive"})}}),v=je({mutationFn:async()=>Ne("/api/auth/2fa/disable","POST"),onSuccess:()=>{e({title:"2FA disabled",description:"Two-factor authentication has been turned off"}),ze.invalidateQueries({queryKey:["/api/auth/2fa/status"]}),ze.invalidateQueries({queryKey:["/api/auth/2fa/security-stats"]})},onError:()=>{e({title:"Failed to disable",description:"Could not disable two-factor authentication",variant:"destructive"})}}),b=()=>{x.mutate()},w=()=>{if(!a||a.length!==6){e({title:"Invalid code",description:"Please enter a 6-digit code",variant:"destructive"});return}y.mutate(a)},N=()=>{confirm("Are you sure you want to disable two-factor authentication? This will make your account less secure.")&&v.mutate()},j=()=>{if(!(o!=null&&o.backupCodes))return;const M=`Clean Machine Auto Detail - 2FA Backup Codes

Generated: ${new Date().toLocaleString()}

IMPORTANT: Store these codes in a safe place. Each code can only be used once.

${o.backupCodes.join(`
`)}

If you lose access to your authenticator app, you can use these codes to log in.`,A=new Blob([M],{type:"text/plain"}),P=URL.createObjectURL(A),T=document.createElement("a");T.href=P,T.download=`backup-codes-${Date.now()}.txt`,document.body.appendChild(T),T.click(),document.body.removeChild(T),URL.revokeObjectURL(P),e({title:"Backup codes downloaded",description:"Store these codes in a safe place"})};if(h)return n.jsx(xn,{title:"Security Settings",children:n.jsx("div",{className:"p-6 max-w-4xl mx-auto",children:n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),n.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Loading security settings..."})]})})})});const S=((C=u==null?void 0:u.user)==null?void 0:C.role)==="manager"||((k=u==null?void 0:u.user)==null?void 0:k.role)==="owner";return n.jsx(xn,{title:"Security Settings",children:n.jsxs("div",{className:"p-6 max-w-4xl mx-auto space-y-6",children:[n.jsx("p",{className:"text-slate-600 dark:text-slate-400 mb-6",children:"Manage authentication and view security logs"}),S&&n.jsxs(O,{"data-testid":"card-user-management",className:"bg-gradient-to-r from-purple-50 to-blue-50 dark:from-purple-900/20 dark:to-blue-900/20 border-purple-200 dark:border-purple-800",children:[n.jsxs(ee,{children:[n.jsxs(te,{className:"flex items-center gap-2",children:[n.jsx(br,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"}),"User Management"]}),n.jsx(ke,{children:"Manage team access and roles for your organization"})]}),n.jsx(H,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Create, edit, and manage user accounts, roles, and permissions for employees and managers."}),n.jsxs(_,{onClick:()=>t("/user-management"),className:"ml-4 bg-purple-600 hover:bg-purple-700","data-testid":"button-open-user-management",children:[n.jsx(br,{className:"w-4 h-4 mr-2"}),"Manage Users"]})]})})]}),n.jsxs(js,{defaultValue:"2fa",className:"space-y-6",children:[n.jsxs(ds,{className:"grid w-full grid-cols-3",children:[n.jsxs(dt,{value:"2fa","data-testid":"tab-2fa",children:[n.jsx(gj,{className:"w-4 h-4 mr-2"}),"Two-Factor Auth"]}),n.jsxs(dt,{value:"activity","data-testid":"tab-activity",children:[n.jsx(Kc,{className:"w-4 h-4 mr-2"}),"Activity Logs"]}),n.jsxs(dt,{value:"stats","data-testid":"tab-stats",children:[n.jsx(Ya,{className:"w-4 h-4 mr-2"}),"Security Stats"]})]}),n.jsx(pt,{value:"2fa",className:"space-y-6",children:n.jsxs(O,{children:[n.jsxs(ee,{children:[n.jsxs(te,{className:"flex items-center justify-between",children:["Two-Factor Authentication",f!=null&&f.enabled?n.jsx(ge,{className:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400","data-testid":"badge-2fa-enabled",children:"Enabled"}):n.jsx(ge,{variant:"outline","data-testid":"badge-2fa-disabled",children:"Disabled"})]}),n.jsx(ke,{children:"Add an extra layer of security to your account by requiring a verification code from your authenticator app"})]}),n.jsx(H,{className:"space-y-4",children:f!=null&&f.enabled?n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4",children:n.jsx("p",{className:"text-green-800 dark:text-green-200 text-sm",children:" Your account is protected with two-factor authentication"})}),n.jsx(_,{onClick:N,disabled:v.isPending,variant:"destructive",className:"w-full","data-testid":"button-disable-2fa",children:v.isPending?"Disabling...":"Disable Two-Factor Authentication"})]}):n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:[n.jsx("h3",{className:"font-semibold text-blue-900 dark:text-blue-100 mb-2",children:"Why enable 2FA?"}),n.jsxs("ul",{className:"space-y-2 text-sm text-blue-800 dark:text-blue-200",children:[n.jsx("li",{children:" Protects against password theft"}),n.jsx("li",{children:" Requires physical access to your phone"}),n.jsx("li",{children:" Works with Google Authenticator, Authy, and other apps"}),n.jsx("li",{children:" Includes backup codes for emergencies"})]})]}),n.jsxs(_,{onClick:b,disabled:x.isPending,className:"w-full","data-testid":"button-setup-2fa",children:[n.jsx(gj,{className:"w-4 h-4 mr-2"}),x.isPending?"Setting up...":"Set Up Two-Factor Authentication"]})]})})]})}),n.jsx(pt,{value:"activity",className:"space-y-4",children:n.jsxs(O,{children:[n.jsxs(ee,{children:[n.jsx(te,{children:"Recent Admin Activity"}),n.jsx(ke,{children:"View all administrative actions and changes"})]}),n.jsx(H,{children:g&&g.length>0?n.jsx("div",{className:"space-y-3",children:g.slice(0,20).map(M=>n.jsxs("div",{className:"border-b pb-3 last:border-0","data-testid":`audit-log-${M.id}`,children:[n.jsxs("div",{className:"flex justify-between items-start mb-1",children:[n.jsx("span",{className:"font-medium text-slate-900 dark:text-white",children:M.action}),n.jsx("span",{className:"text-xs text-slate-500",children:new Date(M.performedAt).toLocaleString()})]}),n.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:["User: ",M.username]}),M.ipAddress&&n.jsxs("p",{className:"text-xs text-slate-500",children:["IP: ",M.ipAddress]})]},M.id))}):n.jsx("p",{className:"text-center text-slate-500 py-8",children:"No activity logs found"})})]})}),n.jsxs(pt,{value:"stats",className:"space-y-4",children:[n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs(O,{children:[n.jsx(ee,{children:n.jsx(te,{children:"Login Statistics"})}),n.jsxs(H,{className:"space-y-3",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Total Login Attempts"}),n.jsx("span",{className:"font-bold","data-testid":"stat-total-attempts",children:(m==null?void 0:m.totalLoginAttempts)||0})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Successful Logins"}),n.jsx("span",{className:"font-bold text-green-600","data-testid":"stat-successful",children:(m==null?void 0:m.successfulLogins)||0})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Failed Attempts"}),n.jsx("span",{className:"font-bold text-red-600","data-testid":"stat-failed",children:(m==null?void 0:m.failedLoginAttempts)||0})]})]})]}),n.jsxs(O,{children:[n.jsx(ee,{children:n.jsx(te,{children:"Security Status"})}),n.jsxs(H,{className:"space-y-3",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"2FA Enabled Users"}),n.jsx("span",{className:"font-bold","data-testid":"stat-2fa-enabled",children:(m==null?void 0:m.twoFactorEnabled)||0})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Locked Accounts"}),n.jsx("span",{className:"font-bold text-orange-600","data-testid":"stat-locked",children:(m==null?void 0:m.lockedAccounts)||0})]})]})]})]}),(m==null?void 0:m.recentFailedAttempts)&&m.recentFailedAttempts.length>0&&n.jsxs(O,{children:[n.jsxs(ee,{children:[n.jsx(te,{children:"Recent Failed Login Attempts"}),n.jsx(ke,{children:"Monitor suspicious login activity"})]}),n.jsx(H,{children:n.jsx("div",{className:"space-y-3",children:m.recentFailedAttempts.slice(0,10).map((M,A)=>n.jsxs("div",{className:"border-b pb-3 last:border-0","data-testid":`failed-attempt-${A}`,children:[n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsx("span",{className:"font-medium text-slate-900 dark:text-white",children:M.username}),n.jsx("span",{className:"text-xs text-slate-500",children:new Date(M.attemptedAt).toLocaleString()})]}),M.ipAddress&&n.jsxs("p",{className:"text-xs text-slate-500",children:["IP: ",M.ipAddress]})]},A))})})]})]})]}),n.jsx(At,{open:r,onOpenChange:s,children:n.jsxs(_t,{className:"max-w-md","data-testid":"dialog-2fa-setup",children:[n.jsxs($t,{children:[n.jsx(Et,{children:"Set Up Two-Factor Authentication"}),n.jsx(an,{children:"Scan the QR code with your authenticator app, then enter the 6-digit code to verify"})]}),o&&n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{className:"bg-white p-4 rounded-lg border-2 border-slate-200 flex justify-center",children:n.jsx("img",{src:o.qrCodeUrl,alt:"2FA QR Code",className:"w-48 h-48","data-testid":"img-qr-code"})}),n.jsxs(_,{variant:"outline",size:"sm",onClick:()=>{if(!o.qrCodeUrl)return;const M=document.createElement("a");M.href=o.qrCodeUrl,M.download=`2fa-qr-code-${Date.now()}.png`,document.body.appendChild(M),M.click(),document.body.removeChild(M),e({title:"QR code downloaded",description:"Save this for backup access"})},className:"w-full","data-testid":"button-download-qr",children:[n.jsx(Qc,{className:"w-4 h-4 mr-2"}),"Download QR Code"]}),n.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 p-3 rounded",children:[n.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400 mb-1",children:"Manual Entry Code:"}),n.jsx("code",{className:"text-sm font-mono break-all","data-testid":"text-secret-code",children:o.secret})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(U,{htmlFor:"verification-code",children:"Enter 6-Digit Code"}),n.jsx(se,{id:"verification-code",type:"text",maxLength:6,placeholder:"000000",value:a,onChange:M=>i(M.target.value.replace(/\D/g,"")),"data-testid":"input-verification-code"})]}),n.jsx(_,{onClick:w,disabled:y.isPending||a.length!==6,className:"w-full","data-testid":"button-verify-2fa",children:y.isPending?"Verifying...":"Verify and Enable"})]})]})}),n.jsx(At,{open:c,onOpenChange:d,children:n.jsxs(_t,{className:"max-w-md","data-testid":"dialog-backup-codes",children:[n.jsxs($t,{children:[n.jsx(Et,{children:"Backup Codes"}),n.jsx(an,{children:"Save these codes in a safe place. Each can be used once if you lose access to your authenticator app."})]}),o&&n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{className:"bg-slate-50 dark:bg-slate-800 p-4 rounded-lg",children:n.jsx("div",{className:"grid grid-cols-2 gap-2","data-testid":"backup-codes-list",children:o.backupCodes.map((M,A)=>n.jsx("code",{className:"text-sm font-mono bg-white dark:bg-slate-900 p-2 rounded border",children:M},A))})}),n.jsxs(_,{onClick:j,variant:"outline",className:"w-full","data-testid":"button-download-codes",children:[n.jsx(Qc,{className:"w-4 h-4 mr-2"}),"Download Backup Codes"]}),n.jsx("div",{className:"bg-orange-50 dark:bg-orange-900/20 border border-orange-200 dark:border-orange-800 rounded-lg p-3",children:n.jsx("p",{className:"text-sm text-orange-800 dark:text-orange-200",children:" Store these codes securely. They won't be shown again!"})})]})]})})]})})}var u9={exports:{}},ep=typeof Reflect=="object"?Reflect:null,dB=ep&&typeof ep.apply=="function"?ep.apply:function(t,r,s){return Function.prototype.apply.call(t,r,s)},zw;ep&&typeof ep.ownKeys=="function"?zw=ep.ownKeys:Object.getOwnPropertySymbols?zw=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:zw=function(t){return Object.getOwnPropertyNames(t)};function Imt(e){console&&console.warn&&console.warn(e)}var oue=Number.isNaN||function(t){return t!==t};function ir(){ir.init.call(this)}u9.exports=ir;u9.exports.once=Omt;ir.EventEmitter=ir;ir.prototype._events=void 0;ir.prototype._eventsCount=0;ir.prototype._maxListeners=void 0;var uB=10;function K3(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(ir,"defaultMaxListeners",{enumerable:!0,get:function(){return uB},set:function(e){if(typeof e!="number"||e<0||oue(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");uB=e}});ir.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};ir.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||oue(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function lue(e){return e._maxListeners===void 0?ir.defaultMaxListeners:e._maxListeners}ir.prototype.getMaxListeners=function(){return lue(this)};ir.prototype.emit=function(t){for(var r=[],s=1;s<arguments.length;s++)r.push(arguments[s]);var a=t==="error",i=this._events;if(i!==void 0)a=a&&i.error===void 0;else if(!a)return!1;if(a){var o;if(r.length>0&&(o=r[0]),o instanceof Error)throw o;var l=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw l.context=o,l}var c=i[t];if(c===void 0)return!1;if(typeof c=="function")dB(c,this,r);else for(var d=c.length,u=hue(c,d),s=0;s<d;++s)dB(u[s],this,r);return!0};function cue(e,t,r,s){var a,i,o;if(K3(r),i=e._events,i===void 0?(i=e._events=Object.create(null),e._eventsCount=0):(i.newListener!==void 0&&(e.emit("newListener",t,r.listener?r.listener:r),i=e._events),o=i[t]),o===void 0)o=i[t]=r,++e._eventsCount;else if(typeof o=="function"?o=i[t]=s?[r,o]:[o,r]:s?o.unshift(r):o.push(r),a=lue(e),a>0&&o.length>a&&!o.warned){o.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=o.length,Imt(l)}return e}ir.prototype.addListener=function(t,r){return cue(this,t,r,!1)};ir.prototype.on=ir.prototype.addListener;ir.prototype.prependListener=function(t,r){return cue(this,t,r,!0)};function Lmt(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function due(e,t,r){var s={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},a=Lmt.bind(s);return a.listener=r,s.wrapFn=a,a}ir.prototype.once=function(t,r){return K3(r),this.on(t,due(this,t,r)),this};ir.prototype.prependOnceListener=function(t,r){return K3(r),this.prependListener(t,due(this,t,r)),this};ir.prototype.removeListener=function(t,r){var s,a,i,o,l;if(K3(r),a=this._events,a===void 0)return this;if(s=a[t],s===void 0)return this;if(s===r||s.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete a[t],a.removeListener&&this.emit("removeListener",t,s.listener||r));else if(typeof s!="function"){for(i=-1,o=s.length-1;o>=0;o--)if(s[o]===r||s[o].listener===r){l=s[o].listener,i=o;break}if(i<0)return this;i===0?s.shift():Dmt(s,i),s.length===1&&(a[t]=s[0]),a.removeListener!==void 0&&this.emit("removeListener",t,l||r)}return this};ir.prototype.off=ir.prototype.removeListener;ir.prototype.removeAllListeners=function(t){var r,s,a;if(s=this._events,s===void 0)return this;if(s.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):s[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete s[t]),this;if(arguments.length===0){var i=Object.keys(s),o;for(a=0;a<i.length;++a)o=i[a],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=s[t],typeof r=="function")this.removeListener(t,r);else if(r!==void 0)for(a=r.length-1;a>=0;a--)this.removeListener(t,r[a]);return this};function uue(e,t,r){var s=e._events;if(s===void 0)return[];var a=s[t];return a===void 0?[]:typeof a=="function"?r?[a.listener||a]:[a]:r?$mt(a):hue(a,a.length)}ir.prototype.listeners=function(t){return uue(this,t,!0)};ir.prototype.rawListeners=function(t){return uue(this,t,!1)};ir.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):fue.call(e,t)};ir.prototype.listenerCount=fue;function fue(e){var t=this._events;if(t!==void 0){var r=t[e];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}ir.prototype.eventNames=function(){return this._eventsCount>0?zw(this._events):[]};function hue(e,t){for(var r=new Array(t),s=0;s<t;++s)r[s]=e[s];return r}function Dmt(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function $mt(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}function Omt(e,t){return new Promise(function(r,s){function a(o){e.removeListener(t,i),s(o)}function i(){typeof e.removeListener=="function"&&e.removeListener("error",a),r([].slice.call(arguments))}mue(e,t,i,{once:!0}),t!=="error"&&Rmt(e,a,{once:!0})})}function Rmt(e,t,r){typeof e.on=="function"&&mue(e,"error",t,r)}function mue(e,t,r,s){if(typeof e.on=="function")s.once?e.once(t,r):e.on(t,r);else if(typeof e.addEventListener=="function")e.addEventListener(t,function a(i){s.once&&e.removeEventListener(t,a),r(i)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}var Mo=u9.exports;class F5 extends Mo.EventEmitter{constructor(t){super(),Object.defineProperties(this,{_attempts:{value:0,writable:!0},_duration:{enumerable:!1,get(){let r=this._min*Math.pow(this._factor,this._attempts);if(this._jitter){const s=Math.random(),a=Math.floor(s*this._jitter*r);r=Math.floor(s*10)&1?r+a:r-a}return Math.min(r,this._max)|0}},_factor:{value:t.factor||2},_jitter:{value:t.jitter>0&&t.jitter<=1?t.jitter:0},_max:{value:t.max||1e4},_min:{value:t.min||100},_timeoutID:{value:null,writable:!0}})}backoff(){const t=this._duration;this._timeoutID&&(clearTimeout(this._timeoutID),this._timeoutID=null),this.emit("backoff",this._attempts,t),this._timeoutID=setTimeout(()=>{this.emit("ready",this._attempts,t),this._attempts++},t)}reset(){this._attempts=0,this._timeoutID&&(clearTimeout(this._timeoutID),this._timeoutID=null)}}var pue={exports:{}};(function(e){(function(t,r){e.exports?e.exports=r():t.log=r()})(Yg,function(){var t=function(){},r="undefined",s=typeof window!==r&&typeof window.navigator!==r&&/Trident\/|MSIE /.test(window.navigator.userAgent),a=["trace","debug","info","warn","error"],i={},o=null;function l(x,y){var v=x[y];if(typeof v.bind=="function")return v.bind(x);try{return Function.prototype.bind.call(v,x)}catch{return function(){return Function.prototype.apply.apply(v,[x,arguments])}}}function c(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function d(x){return x==="debug"&&(x="log"),typeof console===r?!1:x==="trace"&&s?c:console[x]!==void 0?l(console,x):console.log!==void 0?l(console,"log"):t}function u(){for(var x=this.getLevel(),y=0;y<a.length;y++){var v=a[y];this[v]=y<x?t:this.methodFactory(v,x,this.name)}if(this.log=this.debug,typeof console===r&&x<this.levels.SILENT)return"No console available for logging"}function f(x){return function(){typeof console!==r&&(u.call(this),this[x].apply(this,arguments))}}function h(x,y,v){return d(x)||f.apply(this,arguments)}function m(x,y){var v=this,b,w,N,j="loglevel";typeof x=="string"?j+=":"+x:typeof x=="symbol"&&(j=void 0);function S(P){var T=(a[P]||"silent").toUpperCase();if(!(typeof window===r||!j)){try{window.localStorage[j]=T;return}catch{}try{window.document.cookie=encodeURIComponent(j)+"="+T+";"}catch{}}}function C(){var P;if(!(typeof window===r||!j)){try{P=window.localStorage[j]}catch{}if(typeof P===r)try{var T=window.document.cookie,I=encodeURIComponent(j),L=T.indexOf(I+"=");L!==-1&&(P=/^([^;]+)/.exec(T.slice(L+I.length+1))[1])}catch{}return v.levels[P]===void 0&&(P=void 0),P}}function k(){if(!(typeof window===r||!j)){try{window.localStorage.removeItem(j)}catch{}try{window.document.cookie=encodeURIComponent(j)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function M(P){var T=P;if(typeof T=="string"&&v.levels[T.toUpperCase()]!==void 0&&(T=v.levels[T.toUpperCase()]),typeof T=="number"&&T>=0&&T<=v.levels.SILENT)return T;throw new TypeError("log.setLevel() called with invalid level: "+P)}v.name=x,v.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},v.methodFactory=y||h,v.getLevel=function(){return N??w??b},v.setLevel=function(P,T){return N=M(P),T!==!1&&S(N),u.call(v)},v.setDefaultLevel=function(P){w=M(P),C()||v.setLevel(P,!1)},v.resetLevel=function(){N=null,k(),u.call(v)},v.enableAll=function(P){v.setLevel(v.levels.TRACE,P)},v.disableAll=function(P){v.setLevel(v.levels.SILENT,P)},v.rebuild=function(){if(o!==v&&(b=M(o.getLevel())),u.call(v),o===v)for(var P in i)i[P].rebuild()},b=M(o?o.getLevel():"WARN");var A=C();A!=null&&(N=M(A)),u.call(v)}o=new m,o.getLogger=function(y){if(typeof y!="symbol"&&typeof y!="string"||y==="")throw new TypeError("You must supply a name when creating a logger.");var v=i[y];return v||(v=i[y]=new m(y,o.methodFactory)),v};var g=typeof window!==r?window.log:void 0;return o.noConflict=function(){return typeof window!==r&&window.log===o&&(window.log=g),o},o.getLoggers=function(){return i},o.default=o,o})})(pue);var Dv=pue.exports;const Fmt=qn(Dv),zmt=RW({__proto__:null,default:Fmt},[Dv]);class gn extends Error{constructor(t,r){super(),Object.setPrototypeOf(this,gn.prototype);const s=typeof t=="string"?t:this.explanation,a=typeof t=="object"?t:r;this.message=`${this.name} (${this.code}): ${s}`,this.originalError=a}}var ks;(function(e){class t extends gn{constructor(i,o){super(i,o),this.causes=[],this.code=20101,this.description="Invalid access token",this.explanation="Twilio was unable to validate your Access Token",this.name="AccessTokenInvalid",this.solutions=[],Object.setPrototypeOf(this,e.AccessTokenInvalid.prototype);const l=typeof i=="string"?i:this.explanation,c=typeof i=="object"?i:o;this.message=`${this.name} (${this.code}): ${l}`,this.originalError=c}}e.AccessTokenInvalid=t;class r extends gn{constructor(i,o){super(i,o),this.causes=[],this.code=20104,this.description="Access token expired or expiration date invalid",this.explanation="The Access Token provided to the Twilio API has expired, the expiration time specified in the token was invalid, or the expiration time specified was too far in the future",this.name="AccessTokenExpired",this.solutions=[],Object.setPrototypeOf(this,e.AccessTokenExpired.prototype);const l=typeof i=="string"?i:this.explanation,c=typeof i=="object"?i:o;this.message=`${this.name} (${this.code}): ${l}`,this.originalError=c}}e.AccessTokenExpired=r;class s extends gn{constructor(i,o){super(i,o),this.causes=[],this.code=20151,this.description="Authentication Failed",this.explanation="The Authentication with the provided JWT failed",this.name="AuthenticationFailed",this.solutions=[],Object.setPrototypeOf(this,e.AuthenticationFailed.prototype);const l=typeof i=="string"?i:this.explanation,c=typeof i=="object"?i:o;this.message=`${this.name} (${this.code}): ${l}`,this.originalError=c}}e.AuthenticationFailed=s})(ks||(ks={}));var z5;(function(e){class t extends gn{constructor(s,a){super(s,a),this.causes=["The access token has an invalid Account SID, API Key, or API Key Secret."],this.code=31202,this.description="Signature validation failed.",this.explanation="The provided access token failed signature validation.",this.name="AccessTokenSignatureValidationFailed",this.solutions=["Ensure the Account SID, API Key, and API Key Secret are valid when generating your access token."],Object.setPrototypeOf(this,e.AccessTokenSignatureValidationFailed.prototype);const i=typeof s=="string"?s:this.explanation,o=typeof s=="object"?s:a;this.message=`${this.name} (${this.code}): ${i}`,this.originalError=o}}e.AccessTokenSignatureValidationFailed=t})(z5||(z5={}));var Cf;(function(e){class t extends gn{constructor(o,l){super(o,l),this.causes=[],this.code=31400,this.description="Bad Request (HTTP/SIP)",this.explanation="The request could not be understood due to malformed syntax.",this.name="BadRequest",this.solutions=[],Object.setPrototypeOf(this,e.BadRequest.prototype);const c=typeof o=="string"?o:this.explanation,d=typeof o=="object"?o:l;this.message=`${this.name} (${this.code}): ${c}`,this.originalError=d}}e.BadRequest=t;class r extends gn{constructor(o,l){super(o,l),this.causes=["The outbound call was made to an invalid phone number.","The TwiML application sid is missing a Voice URL."],this.code=31404,this.description="Not Found (HTTP/SIP)",this.explanation="The server has not found anything matching the request.",this.name="NotFound",this.solutions=["Ensure the phone number dialed is valid.","Ensure the TwiML application is configured correctly with a Voice URL link."],Object.setPrototypeOf(this,e.NotFound.prototype);const c=typeof o=="string"?o:this.explanation,d=typeof o=="object"?o:l;this.message=`${this.name} (${this.code}): ${c}`,this.originalError=d}}e.NotFound=r;class s extends gn{constructor(o,l){super(o,l),this.causes=[],this.code=31480,this.description="Temporarily Unavailable (SIP)",this.explanation="The callee is currently unavailable.",this.name="TemporarilyUnavailable",this.solutions=[],Object.setPrototypeOf(this,e.TemporarilyUnavailable.prototype);const c=typeof o=="string"?o:this.explanation,d=typeof o=="object"?o:l;this.message=`${this.name} (${this.code}): ${c}`,this.originalError=d}}e.TemporarilyUnavailable=s;class a extends gn{constructor(o,l){super(o,l),this.causes=[],this.code=31486,this.description="Busy Here (SIP)",this.explanation="The callee is busy.",this.name="BusyHere",this.solutions=[],Object.setPrototypeOf(this,e.BusyHere.prototype);const c=typeof o=="string"?o:this.explanation,d=typeof o=="object"?o:l;this.message=`${this.name} (${this.code}): ${c}`,this.originalError=d}}e.BusyHere=a})(Cf||(Cf={}));var B5;(function(e){class t extends gn{constructor(s,a){super(s,a),this.causes=[],this.code=31603,this.description="Decline (SIP)",this.explanation="The callee does not wish to participate in the call.",this.name="Decline",this.solutions=[],Object.setPrototypeOf(this,e.Decline.prototype);const i=typeof s=="string"?s:this.explanation,o=typeof s=="object"?s:a;this.message=`${this.name} (${this.code}): ${i}`,this.originalError=o}}e.Decline=t})(B5||(B5={}));var ma;(function(e){class t extends gn{constructor(d,u){super(d,u),this.causes=[],this.code=31e3,this.description="Unknown Error",this.explanation="An unknown error has occurred. See error details for more information.",this.name="UnknownError",this.solutions=[],Object.setPrototypeOf(this,e.UnknownError.prototype);const f=typeof d=="string"?d:this.explanation,h=typeof d=="object"?d:u;this.message=`${this.name} (${this.code}): ${f}`,this.originalError=h}}e.UnknownError=t;class r extends gn{constructor(d,u){super(d,u),this.causes=[],this.code=31001,this.description="Application Not Found",this.explanation="",this.name="ApplicationNotFoundError",this.solutions=[],Object.setPrototypeOf(this,e.ApplicationNotFoundError.prototype);const f=typeof d=="string"?d:this.explanation,h=typeof d=="object"?d:u;this.message=`${this.name} (${this.code}): ${f}`,this.originalError=h}}e.ApplicationNotFoundError=r;class s extends gn{constructor(d,u){super(d,u),this.causes=[],this.code=31002,this.description="Connection Declined",this.explanation="",this.name="ConnectionDeclinedError",this.solutions=[],Object.setPrototypeOf(this,e.ConnectionDeclinedError.prototype);const f=typeof d=="string"?d:this.explanation,h=typeof d=="object"?d:u;this.message=`${this.name} (${this.code}): ${f}`,this.originalError=h}}e.ConnectionDeclinedError=s;class a extends gn{constructor(d,u){super(d,u),this.causes=[],this.code=31003,this.description="Connection Timeout",this.explanation="The server could not produce a response within a suitable amount of time.",this.name="ConnectionTimeoutError",this.solutions=[],Object.setPrototypeOf(this,e.ConnectionTimeoutError.prototype);const f=typeof d=="string"?d:this.explanation,h=typeof d=="object"?d:u;this.message=`${this.name} (${this.code}): ${f}`,this.originalError=h}}e.ConnectionTimeoutError=a;class i extends gn{constructor(d,u){super(d,u),this.causes=[],this.code=31005,this.description="Connection error",this.explanation="A connection error occurred during the call",this.name="ConnectionError",this.solutions=[],Object.setPrototypeOf(this,e.ConnectionError.prototype);const f=typeof d=="string"?d:this.explanation,h=typeof d=="object"?d:u;this.message=`${this.name} (${this.code}): ${f}`,this.originalError=h}}e.ConnectionError=i;class o extends gn{constructor(d,u){super(d,u),this.causes=["The incoming call was cancelled because it was not answered in time or it was accepted/rejected by another application instance registered with the same identity."],this.code=31008,this.description="Call cancelled",this.explanation="Unable to answer because the call has ended",this.name="CallCancelledError",this.solutions=[],Object.setPrototypeOf(this,e.CallCancelledError.prototype);const f=typeof d=="string"?d:this.explanation,h=typeof d=="object"?d:u;this.message=`${this.name} (${this.code}): ${f}`,this.originalError=h}}e.CallCancelledError=o;class l extends gn{constructor(d,u){super(d,u),this.causes=[],this.code=31009,this.description="Transport error",this.explanation="No transport available to send or receive messages",this.name="TransportError",this.solutions=[],Object.setPrototypeOf(this,e.TransportError.prototype);const f=typeof d=="string"?d:this.explanation,h=typeof d=="object"?d:u;this.message=`${this.name} (${this.code}): ${f}`,this.originalError=h}}e.TransportError=l})(ma||(ma={}));var wc;(function(e){class t extends gn{constructor(d,u){super(d,u),this.causes=["Invalid content or MessageType passed to sendMessage method."],this.code=31100,this.description="The request had malformed syntax.",this.explanation="The request could not be understood due to malformed syntax.",this.name="MalformedRequestError",this.solutions=["Ensure content and MessageType passed to sendMessage method are valid."],Object.setPrototypeOf(this,e.MalformedRequestError.prototype);const f=typeof d=="string"?d:this.explanation,h=typeof d=="object"?d:u;this.message=`${this.name} (${this.code}): ${f}`,this.originalError=h}}e.MalformedRequestError=t;class r extends gn{constructor(d,u){super(d,u),this.causes=[],this.code=31101,this.description="Missing parameter array in request",this.explanation="",this.name="MissingParameterArrayError",this.solutions=[],Object.setPrototypeOf(this,e.MissingParameterArrayError.prototype);const f=typeof d=="string"?d:this.explanation,h=typeof d=="object"?d:u;this.message=`${this.name} (${this.code}): ${f}`,this.originalError=h}}e.MissingParameterArrayError=r;class s extends gn{constructor(d,u){super(d,u),this.causes=[],this.code=31102,this.description="Authorization token missing in request.",this.explanation="",this.name="AuthorizationTokenMissingError",this.solutions=[],Object.setPrototypeOf(this,e.AuthorizationTokenMissingError.prototype);const f=typeof d=="string"?d:this.explanation,h=typeof d=="object"?d:u;this.message=`${this.name} (${this.code}): ${f}`,this.originalError=h}}e.AuthorizationTokenMissingError=s;class a extends gn{constructor(d,u){super(d,u),this.causes=[],this.code=31103,this.description="Maximum parameter length has been exceeded.",this.explanation="Length of parameters cannot exceed MAX_PARAM_LENGTH.",this.name="MaxParameterLengthExceededError",this.solutions=[],Object.setPrototypeOf(this,e.MaxParameterLengthExceededError.prototype);const f=typeof d=="string"?d:this.explanation,h=typeof d=="object"?d:u;this.message=`${this.name} (${this.code}): ${f}`,this.originalError=h}}e.MaxParameterLengthExceededError=a;class i extends gn{constructor(d,u){super(d,u),this.causes=[],this.code=31104,this.description="Invalid bridge token",this.explanation="",this.name="InvalidBridgeTokenError",this.solutions=[],Object.setPrototypeOf(this,e.InvalidBridgeTokenError.prototype);const f=typeof d=="string"?d:this.explanation,h=typeof d=="object"?d:u;this.message=`${this.name} (${this.code}): ${f}`,this.originalError=h}}e.InvalidBridgeTokenError=i;class o extends gn{constructor(d,u){super(d,u),this.causes=["Client name contains invalid characters."],this.code=31105,this.description="Invalid client name",this.explanation="Client name should not contain control, space, delims, or unwise characters.",this.name="InvalidClientNameError",this.solutions=["Make sure that client name does not contain any of the invalid characters."],Object.setPrototypeOf(this,e.InvalidClientNameError.prototype);const f=typeof d=="string"?d:this.explanation,h=typeof d=="object"?d:u;this.message=`${this.name} (${this.code}): ${f}`,this.originalError=h}}e.InvalidClientNameError=o;class l extends gn{constructor(d,u){super(d,u),this.causes=[],this.code=31107,this.description="The reconnect parameter is invalid",this.explanation="",this.name="ReconnectParameterInvalidError",this.solutions=[],Object.setPrototypeOf(this,e.ReconnectParameterInvalidError.prototype);const f=typeof d=="string"?d:this.explanation,h=typeof d=="object"?d:u;this.message=`${this.name} (${this.code}): ${f}`,this.originalError=h}}e.ReconnectParameterInvalidError=l})(wc||(wc={}));(function(e){class t extends gn{constructor(f,h){super(f,h),this.causes=[],this.code=31201,this.description="Authorization error",this.explanation="The request requires user authentication. The server understood the request, but is refusing to fulfill it.",this.name="AuthorizationError",this.solutions=[],Object.setPrototypeOf(this,e.AuthorizationError.prototype);const m=typeof f=="string"?f:this.explanation,g=typeof f=="object"?f:h;this.message=`${this.name} (${this.code}): ${m}`,this.originalError=g}}e.AuthorizationError=t;class r extends gn{constructor(f,h){super(f,h),this.causes=[],this.code=31203,this.description="No valid account",this.explanation="",this.name="NoValidAccountError",this.solutions=[],Object.setPrototypeOf(this,e.NoValidAccountError.prototype);const m=typeof f=="string"?f:this.explanation,g=typeof f=="object"?f:h;this.message=`${this.name} (${this.code}): ${m}`,this.originalError=g}}e.NoValidAccountError=r;class s extends gn{constructor(f,h){super(f,h),this.causes=[],this.code=31204,this.description="Invalid JWT token",this.explanation="",this.name="InvalidJWTTokenError",this.solutions=[],Object.setPrototypeOf(this,e.InvalidJWTTokenError.prototype);const m=typeof f=="string"?f:this.explanation,g=typeof f=="object"?f:h;this.message=`${this.name} (${this.code}): ${m}`,this.originalError=g}}e.InvalidJWTTokenError=s;class a extends gn{constructor(f,h){super(f,h),this.causes=[],this.code=31205,this.description="JWT token expired",this.explanation="",this.name="JWTTokenExpiredError",this.solutions=[],Object.setPrototypeOf(this,e.JWTTokenExpiredError.prototype);const m=typeof f=="string"?f:this.explanation,g=typeof f=="object"?f:h;this.message=`${this.name} (${this.code}): ${m}`,this.originalError=g}}e.JWTTokenExpiredError=a;class i extends gn{constructor(f,h){super(f,h),this.causes=["Rate limit exceeded."],this.code=31206,this.description="Rate exceeded authorized limit.",this.explanation="The request performed exceeds the authorized limit.",this.name="RateExceededError",this.solutions=["Ensure message send rate does not exceed authorized limits."],Object.setPrototypeOf(this,e.RateExceededError.prototype);const m=typeof f=="string"?f:this.explanation,g=typeof f=="object"?f:h;this.message=`${this.name} (${this.code}): ${m}`,this.originalError=g}}e.RateExceededError=i;class o extends gn{constructor(f,h){super(f,h),this.causes=[],this.code=31207,this.description="JWT token expiration too long",this.explanation="",this.name="JWTTokenExpirationTooLongError",this.solutions=[],Object.setPrototypeOf(this,e.JWTTokenExpirationTooLongError.prototype);const m=typeof f=="string"?f:this.explanation,g=typeof f=="object"?f:h;this.message=`${this.name} (${this.code}): ${m}`,this.originalError=g}}e.JWTTokenExpirationTooLongError=o;class l extends gn{constructor(f,h){super(f,h),this.causes=[],this.code=31209,this.description="Reconnect attempt is not authorized.",this.explanation="",this.name="ReconnectAttemptError",this.solutions=[],Object.setPrototypeOf(this,e.ReconnectAttemptError.prototype);const m=typeof f=="string"?f:this.explanation,g=typeof f=="object"?f:h;this.message=`${this.name} (${this.code}): ${m}`,this.originalError=g}}e.ReconnectAttemptError=l;class c extends gn{constructor(f,h){super(f,h),this.causes=["The Call Message Event Type is invalid and is not understood by Twilio Voice."],this.code=31210,this.description="Call Message Event Type is invalid.",this.explanation="The Call Message Event Type is invalid and is not understood by Twilio Voice.",this.name="CallMessageEventTypeInvalidError",this.solutions=["Ensure the Call Message Event Type is Valid and understood by Twilio Voice and try again."],Object.setPrototypeOf(this,e.CallMessageEventTypeInvalidError.prototype);const m=typeof f=="string"?f:this.explanation,g=typeof f=="object"?f:h;this.message=`${this.name} (${this.code}): ${m}`,this.originalError=g}}e.CallMessageEventTypeInvalidError=c;class d extends gn{constructor(f,h){super(f,h),this.causes=["The payload size of Call Message Event exceeds the authorized limit."],this.code=31212,this.description="Call Message Event Payload size exceeded authorized limit.",this.explanation="The request performed to send a Call Message Event exceeds the payload size authorized limit",this.name="PayloadSizeExceededError",this.solutions=["Reduce payload size of Call Message Event to be within the authorized limit and try again."],Object.setPrototypeOf(this,e.PayloadSizeExceededError.prototype);const m=typeof f=="string"?f:this.explanation,g=typeof f=="object"?f:h;this.message=`${this.name} (${this.code}): ${m}`,this.originalError=g}}e.PayloadSizeExceededError=d})(ks||(ks={}));var y0;(function(e){class t extends gn{constructor(a,i){super(a,i),this.causes=["The user denied the getUserMedia request.","The browser denied the getUserMedia request."],this.code=31401,this.description="UserMedia Permission Denied Error",this.explanation="The browser or end-user denied permissions to user media. Therefore we were unable to acquire input audio.",this.name="PermissionDeniedError",this.solutions=["The user should accept the request next time prompted. If the browser saved the deny, the user should change that permission in their browser.","The user should to verify that the browser has permission to access the microphone at this address."],Object.setPrototypeOf(this,e.PermissionDeniedError.prototype);const o=typeof a=="string"?a:this.explanation,l=typeof a=="object"?a:i;this.message=`${this.name} (${this.code}): ${o}`,this.originalError=l}}e.PermissionDeniedError=t;class r extends gn{constructor(a,i){super(a,i),this.causes=["NotFoundError - The deviceID specified was not found.","The getUserMedia constraints were overconstrained and no devices matched."],this.code=31402,this.description="UserMedia Acquisition Failed Error",this.explanation="The browser and end-user allowed permissions, however getting the media failed. Usually this is due to bad constraints, but can sometimes fail due to browser, OS or hardware issues.",this.name="AcquisitionFailedError",this.solutions=["Ensure the deviceID being specified exists.","Try acquiring media with fewer constraints."],Object.setPrototypeOf(this,e.AcquisitionFailedError.prototype);const o=typeof a=="string"?a:this.explanation,l=typeof a=="object"?a:i;this.message=`${this.name} (${this.code}): ${o}`,this.originalError=l}}e.AcquisitionFailedError=r})(y0||(y0={}));var bo;(function(e){class t extends gn{constructor(a,i){super(a,i),this.causes=[],this.code=53e3,this.description="Signaling connection error",this.explanation="Raised whenever a signaling connection error occurs that is not covered by a more specific error code.",this.name="ConnectionError",this.solutions=[],Object.setPrototypeOf(this,e.ConnectionError.prototype);const o=typeof a=="string"?a:this.explanation,l=typeof a=="object"?a:i;this.message=`${this.name} (${this.code}): ${o}`,this.originalError=l}}e.ConnectionError=t;class r extends gn{constructor(a,i){super(a,i),this.causes=["The device running your application lost its Internet connection."],this.code=53001,this.description="Signaling connection disconnected",this.explanation="Raised whenever the signaling connection is unexpectedly disconnected.",this.name="ConnectionDisconnected",this.solutions=["Ensure the device running your application has access to a stable Internet connection."],Object.setPrototypeOf(this,e.ConnectionDisconnected.prototype);const o=typeof a=="string"?a:this.explanation,l=typeof a=="object"?a:i;this.message=`${this.name} (${this.code}): ${o}`,this.originalError=l}}e.ConnectionDisconnected=r})(bo||(bo={}));var Yl;(function(e){class t extends gn{constructor(i,o){super(i,o),this.causes=["The Client may not be using a supported WebRTC implementation.","The Client may not have the necessary resources to create or apply a new media description."],this.code=53400,this.description="Client is unable to create or apply a local media description",this.explanation="Raised whenever a Client is unable to create or apply a local media description.",this.name="ClientLocalDescFailed",this.solutions=["If you are experiencing this error using the JavaScript SDK, ensure you are running it with a supported WebRTC implementation."],Object.setPrototypeOf(this,e.ClientLocalDescFailed.prototype);const l=typeof i=="string"?i:this.explanation,c=typeof i=="object"?i:o;this.message=`${this.name} (${this.code}): ${l}`,this.originalError=c}}e.ClientLocalDescFailed=t;class r extends gn{constructor(i,o){super(i,o),this.causes=["The Client may not be using a supported WebRTC implementation.","The Client may be connecting peer-to-peer with another Participant that is not using a supported WebRTC implementation.","The Client may not have the necessary resources to apply a new media description."],this.code=53402,this.description="Client is unable to apply a remote media description",this.explanation="Raised whenever the Client receives a remote media description but is unable to apply it.",this.name="ClientRemoteDescFailed",this.solutions=["If you are experiencing this error using the JavaScript SDK, ensure you are running it with a supported WebRTC implementation."],Object.setPrototypeOf(this,e.ClientRemoteDescFailed.prototype);const l=typeof i=="string"?i:this.explanation,c=typeof i=="object"?i:o;this.message=`${this.name} (${this.code}): ${l}`,this.originalError=c}}e.ClientRemoteDescFailed=r;class s extends gn{constructor(i,o){super(i,o),this.causes=["The Client was unable to establish a media connection.","A media connection which was active failed liveliness checks."],this.code=53405,this.description="Media connection failed",this.explanation="Raised by the Client or Server whenever a media connection fails.",this.name="ConnectionError",this.solutions=["If the problem persists, try connecting to another region.","Check your Client's network connectivity.","If you've provided custom ICE Servers then ensure that the URLs and credentials are valid."],Object.setPrototypeOf(this,e.ConnectionError.prototype);const l=typeof i=="string"?i:this.explanation,c=typeof i=="object"?i:o;this.message=`${this.name} (${this.code}): ${l}`,this.originalError=c}}e.ConnectionError=s})(Yl||(Yl={}));const f9=new Map([[20101,ks.AccessTokenInvalid],[20104,ks.AccessTokenExpired],[20151,ks.AuthenticationFailed],[31202,z5.AccessTokenSignatureValidationFailed],[31400,Cf.BadRequest],[31404,Cf.NotFound],[31480,Cf.TemporarilyUnavailable],[31486,Cf.BusyHere],[31603,B5.Decline],[31e3,ma.UnknownError],[31001,ma.ApplicationNotFoundError],[31002,ma.ConnectionDeclinedError],[31003,ma.ConnectionTimeoutError],[31005,ma.ConnectionError],[31008,ma.CallCancelledError],[31009,ma.TransportError],[31100,wc.MalformedRequestError],[31101,wc.MissingParameterArrayError],[31102,wc.AuthorizationTokenMissingError],[31103,wc.MaxParameterLengthExceededError],[31104,wc.InvalidBridgeTokenError],[31105,wc.InvalidClientNameError],[31107,wc.ReconnectParameterInvalidError],[31201,ks.AuthorizationError],[31203,ks.NoValidAccountError],[31204,ks.InvalidJWTTokenError],[31205,ks.JWTTokenExpiredError],[31206,ks.RateExceededError],[31207,ks.JWTTokenExpirationTooLongError],[31209,ks.ReconnectAttemptError],[31210,ks.CallMessageEventTypeInvalidError],[31212,ks.PayloadSizeExceededError],[31401,y0.PermissionDeniedError],[31402,y0.AcquisitionFailedError],[53e3,bo.ConnectionError],[53001,bo.ConnectionDisconnected],[53400,Yl.ClientLocalDescFailed],[53402,Yl.ClientRemoteDescFailed],[53405,Yl.ConnectionError]]);Object.freeze(f9);const Bmt=new Set([31001,31002,31003,31101,31102,31103,31104,31105,31107,31201,31202,31203,31204,31205,31207,31404,31480,31486,31603]);function U5(e,t){if(!(typeof t!="number"||!Vmt(t)||!(e||!Bmt.has(t))))return Umt(t)}class nr extends Error{constructor(t){super(t),this.name="InvalidArgumentError"}}class zo extends Error{constructor(t){super(t),this.name="InvalidStateError"}}class ra extends Error{constructor(t){super(t),this.name="NotSupportedError"}}function Umt(e){const t=f9.get(e);if(!t)throw new nr(`Error code ${e} not found`);return t}function Vmt(e){return f9.has(e)}const gue="@twilio/voice-sdk",tp="2.16.0",h9="https://sdk.twilio.com/js/client/sounds/releases/1.0.0",Hmt=`${h9}/cowbell.mp3?cache=${tp}`,Wmt=2e4;class Es{static getLogLevelInstance(t){if(!Es.loglevelInstance)try{Es.loglevelInstance=(t&&t.LogLevelModule?t.LogLevelModule:zmt).getLogger(gue)}catch{console.warn("Cannot create custom logger"),Es.loglevelInstance=console}return Es.loglevelInstance}constructor(t,r){this._log=Es.getLogLevelInstance(r),this._prefix=`[TwilioVoice][${t}]`}debug(...t){this._log.debug(this._prefix,...t)}error(...t){this._log.error(this._prefix,...t)}info(...t){this._log.info(this._prefix,...t)}setDefaultLevel(t){this._log.setDefaultLevel?this._log.setDefaultLevel(t):console.warn("Logger cannot setDefaultLevel")}warn(...t){this._log.warn(this._prefix,...t)}}Es.levels=Dv.levels;Es.getLogLevelInstance();const qmt=`${h9}/outgoing.mp3`;class fB{constructor(t,r,s,a){this._name=t,this._availableDevices=r,this._beforeChange=s,this._isSupported=a,this._activeDevices=new Set,this._log=new Es("OutputDeviceCollection")}delete(t){this._log.debug(".delete",t);const r=!!this._activeDevices.delete(t),s=this._availableDevices.get("default")||Array.from(this._availableDevices.values())[0];!this._activeDevices.size&&s&&this._activeDevices.add(s);const a=Array.from(this._activeDevices.values()).map(i=>i.deviceId);return this._beforeChange(this._name,a),!!r}get(){return this._activeDevices}set(t){if(this._log.debug(".set",t),!this._isSupported)return Promise.reject(new ra("This browser does not support audio output selection"));const r=Array.isArray(t)?t:[t];if(!r.length)return Promise.reject(new nr("Must specify at least one device to set"));const s=[],a=r.map(i=>{const o=this._availableDevices.get(i);return o||s.push(i),o});return s.length?Promise.reject(new nr(`Devices not found: ${s.join(", ")}`)):new Promise(i=>{i(this._beforeChange(this._name,r))}).then(()=>{this._activeDevices.clear(),a.forEach(this._activeDevices.add,this._activeDevices)})}test(t=qmt){return this._isSupported?this._activeDevices.size?Promise.all(Array.from(this._activeDevices).map(r=>{let s;return new Promise(a=>{s=new Audio(t),s.oncanplay=a}).then(()=>s.setSinkId(r.deviceId).then(()=>s.play()))})):Promise.reject(new zo("No active output devices to test")):Promise.reject(new ra("This browser does not support audio output selection"))}}class Gmt{constructor(t){Object.defineProperties(this,{deviceId:{get(){return t.deviceId}},groupId:{get(){return t.groupId}},kind:{get(){return t.kind}},label:{get(){return t.label}}})}}function jN(e){if(!(this instanceof jN))return new jN(e);this.message=e}jN.prototype.toString=function(){return`Twilio.Exception: ${this.message}`};function Hx(e){return e&&e.length?e.reduce((t,r)=>t+r)/e.length:0}function m9(e,t,r){r=r||(a=>a);const s=new Set(t.map(r));return e.filter(a=>!s.has(r(a)))}function xue(e){return!!e.userAgent.match("Electron")}function p9(e,t){const r=!!t.userAgent.match("CriOS"),s=!!t.userAgent.match("HeadlessChrome"),a=typeof e.chrome<"u"&&t.vendor==="Google Inc."&&t.userAgent.indexOf("OPR")===-1&&t.userAgent.indexOf("Edge")===-1;return r||xue(t)||a||s}function Ymt(e){return e=e||(typeof window>"u"?global.navigator:window.navigator),!!e&&typeof e.userAgent=="string"&&/firefox|fxios/i.test(e.userAgent)}function J3(e){return e=e||(typeof window>"u"?global.navigator:window.navigator),!!e&&typeof e.userAgent=="string"&&/edge\/\d+/i.test(e.userAgent)}function Qmt(e){return!!e.vendor&&e.vendor.indexOf("Apple")!==-1&&e.userAgent&&e.userAgent.indexOf("CriOS")===-1&&e.userAgent.indexOf("FxiOS")===-1}function yue(e){return e?e.split("&").reduce((t,r)=>{const s=r.split("="),a=s[0],i=decodeURIComponent((s[1]||"").replace(/\+/g,"%20"));return a&&(t[a]=i),t},{}):""}function V5(e,t){const r=e instanceof Map||e instanceof Set?Array.from(e.values()):e;return t=t||(s=>s),r.reduce((s,a)=>{const i=t(a);return s.concat(i)},[])}function H5(e,t,r){return new Promise((s,a)=>{function i(){e.removeListener(r,o),s()}function o(){e.removeListener(t,i),a()}e.once(t,i),e.once(r,o)})}function vue(e,t){const r=t.map(s=>"audio/"+s.toLowerCase());return e.sort((s,a)=>{const i=r.indexOf(s.mimeType.toLowerCase()),o=r.indexOf(a.mimeType.toLowerCase()),l=i>=0?i:Number.MAX_VALUE,c=o>=0?o:Number.MAX_VALUE;return l-c})}const Kmt=jN,bue=Object.freeze(Object.defineProperty({__proto__:null,Exception:Kmt,average:Hx,difference:m9,flatMap:V5,isChrome:p9,isElectron:xue,isFirefox:Ymt,isLegacyEdge:J3,isSafari:Qmt,promisifyEvents:H5,queryToJson:yue,sortByMimeTypes:vue},Symbol.toStringTag,{value:"Module"})),Jmt={audioinput:"Audio Input",audiooutput:"Audio Output"};class W5 extends Mo.EventEmitter{get audioConstraints(){return this._audioConstraints}get inputDevice(){return this._inputDevice}get inputStream(){return this._processedStream||this._selectedInputDeviceStream}get processedStream(){return this._processedStream}constructor(t,r,s){super(),this.availableInputDevices=new Map,this.availableOutputDevices=new Map,this._audioConstraints=null,this._defaultInputDeviceStream=null,this._enabledSounds={[yt.SoundName.Disconnect]:!0,[yt.SoundName.Incoming]:!0,[yt.SoundName.Outgoing]:!0},this._inputDevice=null,this._inputDevicePromise=null,this._isPollingInputVolume=!1,this._log=new Es("AudioHelper"),this._processedStream=null,this._selectedInputDeviceStream=null,this._unknownDeviceIndexes={audioinput:{},audiooutput:{}},this._updateAvailableDevices=()=>!this._mediaDevices||!this._enumerateDevices?Promise.reject("Enumeration not supported"):this._enumerateDevices().then(l=>{this._updateDevices(l.filter(d=>d.kind==="audiooutput"),this.availableOutputDevices,this._removeLostOutput),this._updateDevices(l.filter(d=>d.kind==="audioinput"),this.availableInputDevices,this._removeLostInput);const c=this.availableOutputDevices.get("default")||Array.from(this.availableOutputDevices.values())[0];[this.speakerDevices,this.ringtoneDevices].forEach(d=>{!d.get().size&&this.availableOutputDevices.size&&this.isOutputSelectionSupported&&d.set(c.deviceId).catch(u=>{this._log.warn(`Unable to set audio output devices. ${u}`)})})}),this._removeLostInput=l=>{if(!this.inputDevice||this.inputDevice.deviceId!==l.deviceId)return!1;this._destroyProcessedStream(),this._replaceStream(null),this._inputDevice=null,this._maybeStopPollingVolume();const c=this.availableInputDevices.get("default")||Array.from(this.availableInputDevices.values())[0];return c&&this.setInputDevice(c.deviceId),!0},this._removeLostOutput=l=>{const c=this.speakerDevices.delete(l),d=this.ringtoneDevices.delete(l);return c||d},s=Object.assign({AudioContext:typeof AudioContext<"u"&&AudioContext,setSinkId:typeof HTMLAudioElement<"u"&&HTMLAudioElement.prototype.setSinkId},s),this._beforeSetInputDevice=s.beforeSetInputDevice||(()=>Promise.resolve()),this._updateUserOptions(s),this._audioProcessorEventObserver=s.audioProcessorEventObserver,this._mediaDevices=s.mediaDevices||navigator.mediaDevices,this._onActiveInputChanged=r,this._enumerateDevices=typeof s.enumerateDevices=="function"?s.enumerateDevices:this._mediaDevices&&this._mediaDevices.enumerateDevices.bind(this._mediaDevices);const a=!!(s.AudioContext||s.audioContext),i=!!this._enumerateDevices;s.enabledSounds&&(this._enabledSounds=s.enabledSounds);const o=typeof s.setSinkId=="function";this.isOutputSelectionSupported=i&&o,this.isVolumeSupported=a,this.isVolumeSupported&&(this._audioContext=s.audioContext||s.AudioContext&&new s.AudioContext,this._audioContext&&(this._inputVolumeAnalyser=this._audioContext.createAnalyser(),this._inputVolumeAnalyser.fftSize=32,this._inputVolumeAnalyser.smoothingTimeConstant=.3)),this.ringtoneDevices=new fB("ringtone",this.availableOutputDevices,t,this.isOutputSelectionSupported),this.speakerDevices=new fB("speaker",this.availableOutputDevices,t,this.isOutputSelectionSupported),this.addListener("newListener",l=>{l==="inputVolume"&&this._maybeStartPollingVolume()}),this.addListener("removeListener",l=>{l==="inputVolume"&&this._maybeStopPollingVolume()}),this.once("newListener",()=>{this.isOutputSelectionSupported||this._log.warn("Warning: This browser does not support audio output selection."),this.isVolumeSupported||this._log.warn("Warning: This browser does not support Twilio's volume indicator feature.")}),i&&this._initializeEnumeration(),navigator&&navigator.permissions&&typeof navigator.permissions.query=="function"?navigator.permissions.query({name:"microphone"}).then(l=>{if(l.state!=="granted"){const c=()=>{this._updateAvailableDevices(),this._stopMicrophonePermissionListener()};l.addEventListener("change",c),this._microphonePermissionStatus=l,this._onMicrophonePermissionStatusChanged=c}}).catch(l=>this._log.warn(`Warning: unable to listen for microphone permission changes. ${l}`)):this._log.warn("Warning: current browser does not support permissions API.")}_destroy(){this._stopDefaultInputDeviceStream(),this._stopSelectedInputDeviceStream(),this._destroyProcessedStream(),this._maybeStopPollingVolume(),this.removeAllListeners(),this._stopMicrophonePermissionListener(),this._unbind()}_getInputDevicePromise(){return this._inputDevicePromise}_maybeStartPollingVolume(){if(!this.isVolumeSupported||!this.inputStream||(this._updateVolumeSource(),this._isPollingInputVolume||!this._inputVolumeAnalyser))return;const t=this._inputVolumeAnalyser.frequencyBinCount,r=new Uint8Array(t);this._isPollingInputVolume=!0;const s=()=>{if(this._isPollingInputVolume){if(this._inputVolumeAnalyser){this._inputVolumeAnalyser.getByteFrequencyData(r);const a=Hx(r);this.emit("inputVolume",a/255)}requestAnimationFrame(s)}};requestAnimationFrame(s)}_maybeStopPollingVolume(){this.isVolumeSupported&&(!this._isPollingInputVolume||this.inputStream&&this.listenerCount("inputVolume")||(this._inputVolumeSource&&(this._inputVolumeSource.disconnect(),delete this._inputVolumeSource),this._isPollingInputVolume=!1))}_openDefaultDeviceWithConstraints(t){return this._log.info("Opening default device with constraints",t),this._getUserMedia(t).then(r=>(this._log.info("Opened default device. Updating available devices."),this._updateAvailableDevices().catch(s=>{this._log.warn("Unable to updateAvailableDevices after gUM call",s)}),this._defaultInputDeviceStream=r,this._maybeCreateProcessedStream(r)))}_stopDefaultInputDeviceStream(){this._defaultInputDeviceStream&&(this._log.info("stopping default device stream"),this._defaultInputDeviceStream.getTracks().forEach(t=>t.stop()),this._defaultInputDeviceStream=null,this._destroyProcessedStream())}_unbind(){var t;!((t=this._mediaDevices)===null||t===void 0)&&t.removeEventListener&&this._mediaDevices.removeEventListener("devicechange",this._updateAvailableDevices)}_updateUserOptions(t){typeof t.enumerateDevices=="function"&&(this._enumerateDevices=t.enumerateDevices),typeof t.getUserMedia=="function"&&(this._getUserMedia=t.getUserMedia)}addProcessor(t){if(this._log.debug(".addProcessor"),this._processor)throw new ra("Adding multiple AudioProcessors is not supported at this time.");if(typeof t!="object"||t===null)throw new nr("Missing AudioProcessor argument.");if(typeof t.createProcessedStream!="function")throw new nr("Missing createProcessedStream() method.");if(typeof t.destroyProcessedStream!="function")throw new nr("Missing destroyProcessedStream() method.");return this._processor=t,this._audioProcessorEventObserver.emit("add"),this._restartStreams()}disconnect(t){return this._log.debug(".disconnect",t),this._maybeEnableSound(yt.SoundName.Disconnect,t)}incoming(t){return this._log.debug(".incoming",t),this._maybeEnableSound(yt.SoundName.Incoming,t)}outgoing(t){return this._log.debug(".outgoing",t),this._maybeEnableSound(yt.SoundName.Outgoing,t)}removeProcessor(t){if(this._log.debug(".removeProcessor"),typeof t!="object"||t===null)throw new nr("Missing AudioProcessor argument.");if(this._processor!==t)throw new nr("Cannot remove an AudioProcessor that has not been previously added.");return this._destroyProcessedStream(),this._processor=null,this._audioProcessorEventObserver.emit("remove"),this._restartStreams()}setAudioConstraints(t){return this._log.debug(".setAudioConstraints",t),this._audioConstraints=Object.assign({},t),delete this._audioConstraints.deviceId,this.inputDevice?this._setInputDevice(this.inputDevice.deviceId,!0):Promise.resolve()}setInputDevice(t){return this._log.debug(".setInputDevice",t),this._setInputDevice(t,!1)}unsetAudioConstraints(){return this._log.debug(".unsetAudioConstraints"),this._audioConstraints=null,this.inputDevice?this._setInputDevice(this.inputDevice.deviceId,!0):Promise.resolve()}unsetInputDevice(){return this._log.debug(".unsetInputDevice",this.inputDevice),this.inputDevice?(this._destroyProcessedStream(),this._onActiveInputChanged(null).then(()=>{this._replaceStream(null),this._inputDevice=null,this._maybeStopPollingVolume()})):Promise.resolve()}_destroyProcessedStream(){if(this._processor&&this._processedStream){this._log.info("destroying processed stream");const t=this._processedStream;this._processedStream.getTracks().forEach(r=>r.stop()),this._processedStream=null,this._processor.destroyProcessedStream(t),this._audioProcessorEventObserver.emit("destroy")}}_getUnknownDeviceIndex(t){const r=t.deviceId,s=t.kind;let a=this._unknownDeviceIndexes[s][r];return a||(a=Object.keys(this._unknownDeviceIndexes[s]).length+1,this._unknownDeviceIndexes[s][r]=a),a}_initializeEnumeration(){if(!this._mediaDevices||!this._enumerateDevices)throw new ra("Enumeration is not supported");this._mediaDevices.addEventListener&&this._mediaDevices.addEventListener("devicechange",this._updateAvailableDevices),this._updateAvailableDevices().then(()=>{this.isOutputSelectionSupported&&Promise.all([this.speakerDevices.set("default"),this.ringtoneDevices.set("default")]).catch(t=>{this._log.warn(`Warning: Unable to set audio output devices. ${t}`)})})}_maybeCreateProcessedStream(t){return this._processor?(this._log.info("Creating processed stream"),this._processor.createProcessedStream(t).then(r=>(this._processedStream=r,this._audioProcessorEventObserver.emit("create"),this._processedStream))):Promise.resolve(t)}_maybeEnableSound(t,r){return typeof r<"u"&&(this._enabledSounds[t]=r),this._enabledSounds[t]}_replaceStream(t){this._log.info("Replacing with new stream."),this._selectedInputDeviceStream&&(this._log.info("Old stream detected. Stopping tracks."),this._stopSelectedInputDeviceStream()),this._selectedInputDeviceStream=t}_restartStreams(){if(this.inputDevice&&this._selectedInputDeviceStream)return this._log.info("Restarting selected input device"),this._setInputDevice(this.inputDevice.deviceId,!0);if(this._defaultInputDeviceStream){const t=this.availableInputDevices.get("default")||Array.from(this.availableInputDevices.values())[0];return this._log.info("Restarting default input device, now becoming selected."),this._setInputDevice(t.deviceId,!0)}return Promise.resolve()}_setInputDevice(t,r){return Fa(this,void 0,void 0,function*(){const s=()=>Fa(this,void 0,void 0,function*(){if(yield this._beforeSetInputDevice(),typeof t!="string")return Promise.reject(new nr("Must specify the device to set"));const a=this.availableInputDevices.get(t);if(!a)return Promise.reject(new nr(`Device not found: ${t}`));if(this._log.info("Setting input device. ID: "+t),this._inputDevice&&this._inputDevice.deviceId===t&&this._selectedInputDeviceStream){if(!r)return Promise.resolve();this._log.info("Same track detected on setInputDevice, stopping old tracks."),this._stopSelectedInputDeviceStream()}this._stopDefaultInputDeviceStream();const i={audio:Object.assign({deviceId:{exact:t}},this.audioConstraints)};return this._log.info("setInputDevice: getting new tracks."),this._getUserMedia(i).then(o=>(this._destroyProcessedStream(),this._maybeCreateProcessedStream(o).then(l=>(this._log.info("setInputDevice: invoking _onActiveInputChanged."),this._onActiveInputChanged(l).then(()=>{this._replaceStream(o),this._inputDevice=a,this._maybeStartPollingVolume()})))))});return this._inputDevicePromise=s().finally(()=>{this._inputDevicePromise=null})})}_stopMicrophonePermissionListener(){var t;!((t=this._microphonePermissionStatus)===null||t===void 0)&&t.removeEventListener&&this._microphonePermissionStatus.removeEventListener("change",this._onMicrophonePermissionStatusChanged)}_stopSelectedInputDeviceStream(){this._selectedInputDeviceStream&&(this._log.info("Stopping selected device stream"),this._selectedInputDeviceStream.getTracks().forEach(t=>t.stop()))}_updateDevices(t,r,s){const a=t.map(d=>d.deviceId),i=Array.from(r.values()).map(d=>d.deviceId),o=[],l=m9(i,a);l.forEach(d=>{const u=r.get(d);u&&(r.delete(d),s(u)&&o.push(u))});let c=!1;if(t.forEach(d=>{const u=r.get(d.deviceId),f=this._wrapMediaDeviceInfo(d);(!u||u.label!==f.label)&&(r.set(d.deviceId,f),c=!0)}),c||l.length){const d="default",u=this.inputDevice&&this.inputDevice.deviceId===d,f=this._defaultInputDeviceStream&&this.availableInputDevices.get(d);(u||f)&&(this._log.warn("Calling getUserMedia after device change to ensure that the           tracks of the active device (default) have not gone stale."),setTimeout(()=>{this._setInputDevice(d,!0)},0)),this._log.debug("#deviceChange",o),this.emit("deviceChange",o)}}_updateVolumeSource(){if(!(!this.inputStream||!this._audioContext||!this._inputVolumeAnalyser)){this._inputVolumeSource&&this._inputVolumeSource.disconnect();try{this._inputVolumeSource=this._audioContext.createMediaStreamSource(this.inputStream),this._inputVolumeSource.connect(this._inputVolumeAnalyser)}catch(t){this._log.warn("Unable to update volume source",t),delete this._inputVolumeSource}}}_wrapMediaDeviceInfo(t){const r={deviceId:t.deviceId,groupId:t.groupId,kind:t.kind,label:t.label};if(!r.label)if(r.deviceId==="default")r.label="Default";else{const s=this._getUnknownDeviceIndex(t);r.label=`Unknown ${Jmt[r.kind]} Device ${s}`}return new Gmt(r)}}W5||(W5={});var Zmt=W5;class Xmt extends Mo.EventEmitter{constructor(){super(),this._log=new Es("AudioProcessorEventObserver"),this._log.info("Creating AudioProcessorEventObserver instance"),this.on("enabled",()=>this._reEmitEvent("enabled")),this.on("add",()=>this._reEmitEvent("add")),this.on("remove",()=>this._reEmitEvent("remove")),this.on("create",()=>this._reEmitEvent("create-processed-stream")),this.on("destroy",()=>this._reEmitEvent("destroy-processed-stream"))}destroy(){this.removeAllListeners()}_reEmitEvent(t){this._log.info(`AudioProcessor:${t}`),this.emit("event",{name:t,group:"audio-processor"})}}const ept={dtmf0:[1360,960],dtmf1:[1230,720],dtmf2:[1360,720],dtmf3:[1480,720],dtmf4:[1230,790],dtmf5:[1360,790],dtmf6:[1480,790],dtmf7:[1230,870],dtmf8:[1360,870],dtmf9:[1480,870],dtmfh:[1480,960],dtmfs:[1230,960]};class tpt{constructor(t){this._context=t,this._gainNodes=[],this._gainNodes=[this._context.createGain(),this._context.createGain()],this._gainNodes.forEach(r=>{r.connect(this._context.destination),r.gain.value=.1,this._gainNodes.push(r)})}cleanup(){this._gainNodes.forEach(t=>{t.disconnect()})}play(t){const r=ept[t];if(!r)throw new nr("Invalid DTMF sound name");[this._context.createOscillator(),this._context.createOscillator()].forEach((a,i)=>{a.type="sine",a.frequency.value=r[i],a.connect(this._gainNodes[i]),a.start(),a.stop(this._context.currentTime+.1),a.addEventListener("ended",()=>a.disconnect())})}}function npt(e,t,r){const s=JSON.stringify(t.body||{}),a=new Headers;t.headers=t.headers||[],Object.entries(t.headers).forEach(([i,o])=>a.append(i,o)),fetch(t.url,{body:s,headers:a,method:e}).then(i=>i.text(),r).then(i=>r(null,i),r)}const g9=npt;g9.get=function(t,r){return new this("GET",t,r)};g9.post=function(t,r){return new this("POST",t,r)};class Ja extends Mo.EventEmitter{constructor(t,r,s){if(super(),!(this instanceof Ja))return new Ja(t,r,s);s=Object.assign({defaultPayload(){return{}}},s);let a=s.defaultPayload;typeof a!="function"&&(a=()=>Object.assign({},s.defaultPayload));let i=!0;const o=Object.assign({app_name:void 0,app_version:void 0},s.metadata);Object.defineProperties(this,{_defaultPayload:{value:a},_host:{value:s.host,writable:!0},_isEnabled:{get(){return i},set(l){i=l}},_log:{value:new Es("EventPublisher")},_request:{value:s.request||g9,writable:!0},_token:{value:r,writable:!0},isEnabled:{enumerable:!0,get(){return i}},metadata:{enumerable:!0,get(){return o}},productName:{enumerable:!0,value:t},token:{enumerable:!0,get(){return this._token}}})}}Ja.prototype._post=function(t,r,s,a,i,o,l){if(!this.isEnabled&&!l||!this._host)return this._log.debug("Publishing cancelled",JSON.stringify({isEnabled:this.isEnabled,force:l,host:this._host})),Promise.resolve();if(!o||(!o.parameters||!o.parameters.CallSid)&&!o.outboundConnectionId)return o?this._log.debug("Publishing cancelled. Missing connection info",JSON.stringify({outboundConnectionId:o.outboundConnectionId,parameters:o.parameters})):this._log.debug("Publishing cancelled. Missing connection object"),Promise.resolve();const c={group:s,level:r.toUpperCase(),name:a,payload:i&&i.forEach?i.slice(0):Object.assign(this._defaultPayload(o),i),payload_type:"application/json",private:!1,publisher:this.productName,timestamp:new Date().toISOString()};this.metadata&&(c.publisher_metadata=this.metadata),t==="EndpointEvents"&&this._log.debug("Publishing insights",JSON.stringify({endpointName:t,event:c,force:l,host:this._host}));const d={body:c,headers:{"Content-Type":"application/json","X-Twilio-Token":this.token},url:`https://${this._host}/v4/${t}`};return new Promise((u,f)=>{this._request.post(d,h=>{h?(this.emit("error",h),f(h)):u()})}).catch(u=>{this._log.error(`Unable to post ${s} ${a} event to Insights. Received error: ${u}`)})};Ja.prototype.post=function(t,r,s,a,i,o){return this._post("EndpointEvents",t,r,s,a,i,o)};Ja.prototype.debug=function(t,r,s,a){return this.post("debug",t,r,s,a)};Ja.prototype.info=function(t,r,s,a){return this.post("info",t,r,s,a)};Ja.prototype.warn=function(t,r,s,a){return this.post("warning",t,r,s,a)};Ja.prototype.error=function(t,r,s,a){return this.post("error",t,r,s,a)};Ja.prototype.postMetrics=function(t,r,s,a,i){return new Promise(o=>{const l=s.map(rpt).map(c=>Object.assign(c,a));o(this._post("EndpointMetrics","info",t,r,l,i))})};Ja.prototype.setHost=function(t){this._host=t};Ja.prototype.setToken=function(t){this._token=t};Ja.prototype.enable=function(){this._isEnabled=!0};Ja.prototype.disable=function(){this._isEnabled=!1};function rpt(e){return{audio_codec:e.codecName,audio_level_in:e.audioInputLevel,audio_level_out:e.audioOutputLevel,bytes_received:e.bytesReceived,bytes_sent:e.bytesSent,call_volume_input:e.inputVolume,call_volume_output:e.outputVolume,jitter:e.jitter,mos:e.mos&&Math.round(e.mos*100)/100,packets_lost:e.packetsLost,packets_lost_fraction:e.packetsLostFraction&&Math.round(e.packetsLostFraction*100)/100,packets_received:e.packetsReceived,rtt:e.rtt,timestamp:new Date(e.timestamp).toISOString(),total_bytes_received:e.totals.bytesReceived,total_bytes_sent:e.totals.bytesSent,total_packets_lost:e.totals.packetsLost,total_packets_received:e.totals.packetsReceived,total_packets_sent:e.totals.packetsSent}}const hB=32767,mB=typeof window<"u"?window.RTCStatsReport:void 0;function ll(e){if(!(this instanceof ll))return new ll(e);const t=this;Object.defineProperties(this,{_map:{value:e},size:{enumerable:!0,get(){return t._map.size}}}),this[Symbol.iterator]=e[Symbol.iterator]}mB&&(ll.prototype=Object.create(mB.prototype),ll.prototype.constructor=ll);["entries","forEach","get","has","keys","values"].forEach(e=>{ll.prototype[e]=function(...t){return this._map[e](...t)}});ll.fromArray=function(t){return new ll(t.reduce((r,s)=>(r.set(s.id,s),r),new Map))};ll.fromRTCStatsResponse=function(t){let r;const s=new Map,a=t.result().reduce((i,o)=>{const l=o.id;switch(o.type){case"googCertificate":i.set(l,cpt(o));break;case"datachannel":i.set(l,dpt(o));break;case"googCandidatePair":jue(o,"googActiveConnection")&&(r=l),i.set(l,lpt(o));break;case"localcandidate":i.set(l,gB(o,!1));break;case"remotecandidate":i.set(l,gB(o,!0));break;case"ssrc":qf(o,"packetsReceived")?i.set(`rtp-${l}`,ipt(o)):i.set(`rtp-${l}`,opt(o)),i.set(`track-${l}`,apt(o)),i.set(`codec-${l}`,spt(o));break;case"googComponent":const c=pB(o);s.set(c.selectedCandidatePairId,l),i.set(l,pB(o));break}return i},new Map);if(r){const i=s.get(r);i&&(a.get(i).dtlsState="connected")}return new ll(a)};function pB(e){return{bytesReceived:void 0,bytesSent:void 0,dtlsState:void 0,id:e.id,localCertificateId:e.stat("localCertificateId"),remoteCertificateId:e.stat("remoteCertificateId"),rtcpTransportStatsId:void 0,selectedCandidatePairId:e.stat("selectedCandidatePairId"),timestamp:Date.parse(e.timestamp),type:"transport"}}function spt(e){return{channels:void 0,clockRate:void 0,id:e.id,implementation:void 0,mimeType:`${e.stat("mediaType")}/${e.stat("googCodecName")}`,payloadType:void 0,sdpFmtpLine:void 0,timestamp:Date.parse(e.timestamp),type:"codec"}}function apt(e){return{audioLevel:qf(e,"audioOutputLevel")?tr(e,"audioOutputLevel")/hB:(tr(e,"audioInputLevel")||0)/hB,detached:void 0,echoReturnLoss:G5(e,"googEchoCancellationReturnLoss"),echoReturnLossEnhancement:G5(e,"googEchoCancellationReturnLossEnhancement"),ended:void 0,frameHeight:qf(e,"googFrameHeightReceived")?tr(e,"googFrameHeightReceived"):tr(e,"googFrameHeightSent"),frameWidth:qf(e,"googFrameWidthReceived")?tr(e,"googFrameWidthReceived"):tr(e,"googFrameWidthSent"),framesCorrupted:void 0,framesDecoded:tr(e,"framesDecoded"),framesDropped:void 0,framesPerSecond:void 0,framesReceived:void 0,framesSent:tr(e,"framesEncoded"),fullFramesLost:void 0,id:e.id,kind:e.stat("mediaType"),partialFramesLost:void 0,remoteSource:void 0,ssrcIds:void 0,timestamp:Date.parse(e.timestamp),trackIdentifier:e.stat("googTrackId"),type:"track"}}function wue(e,t){return{associateStatsId:void 0,codecId:`codec-${e.id}`,firCount:t?tr(e,"googFirsSent"):void 0,id:e.id,isRemote:void 0,mediaType:e.stat("mediaType"),nackCount:t?tr(e,"googNacksSent"):tr(e,"googNacksReceived"),pliCount:t?tr(e,"googPlisSent"):tr(e,"googPlisReceived"),qpSum:tr(e,"qpSum"),sliCount:void 0,ssrc:e.stat("ssrc"),timestamp:Date.parse(e.timestamp),trackId:`track-${e.id}`,transportId:e.stat("transportId")}}function ipt(e){const t=wue(e,!0);return Object.assign(t,{burstDiscardCount:void 0,burstDiscardRate:void 0,burstLossCount:void 0,burstLossRate:void 0,burstPacketsDiscarded:void 0,burstPacketsLost:void 0,bytesReceived:tr(e,"bytesReceived"),fractionLost:void 0,framesDecoded:tr(e,"framesDecoded"),gapDiscardRate:void 0,gapLossRate:void 0,jitter:q5(e.stat("googJitterReceived")),packetsDiscarded:void 0,packetsLost:tr(e,"packetsLost"),packetsReceived:tr(e,"packetsReceived"),packetsRepaired:void 0,roundTripTime:q5(e.stat("googRtt")),type:"inbound-rtp"}),t}function opt(e){const t=wue(e,!1);return Object.assign(t,{bytesSent:tr(e,"bytesSent"),framesEncoded:tr(e,"framesEncoded"),packetsSent:tr(e,"packetsSent"),remoteTimestamp:void 0,targetBitrate:void 0,type:"outbound-rtp"}),t}function gB(e,t){return{candidateType:upt(e.stat("candidateType")),deleted:void 0,id:e.id,ip:e.stat("ipAddress"),isRemote:t,port:tr(e,"portNumber"),priority:G5(e,"priority"),protocol:e.stat("transport"),relayProtocol:void 0,timestamp:Date.parse(e.timestamp),transportId:void 0,type:t?"remote-candidate":"local-candidate",url:void 0}}function lpt(e){return{availableIncomingBitrate:void 0,availableOutgoingBitrate:void 0,bytesReceived:tr(e,"bytesReceived"),bytesSent:tr(e,"bytesSent"),consentRequestsSent:tr(e,"consentRequestsSent"),currentRoundTripTime:q5(e.stat("googRtt")),id:e.id,lastPacketReceivedTimestamp:void 0,lastPacketSentTimestamp:void 0,localCandidateId:e.stat("localCandidateId"),nominated:void 0,priority:void 0,readable:void 0,remoteCandidateId:e.stat("remoteCandidateId"),requestsReceived:tr(e,"requestsReceived"),requestsSent:tr(e,"requestsSent"),responsesReceived:tr(e,"responsesReceived"),responsesSent:tr(e,"responsesSent"),retransmissionsReceived:void 0,retransmissionsSent:void 0,state:void 0,timestamp:Date.parse(e.timestamp),totalRoundTripTime:void 0,transportId:e.stat("googChannelId"),type:"candidate-pair",writable:jue(e,"googWritable")}}function cpt(e){return{base64Certificate:e.stat("googDerBase64"),fingerprint:e.stat("googFingerprint"),fingerprintAlgorithm:e.stat("googFingerprintAlgorithm"),id:e.id,issuerCertificateId:e.stat("googIssuerId"),timestamp:Date.parse(e.timestamp),type:"certificate"}}function dpt(e){return{bytesReceived:void 0,bytesSent:void 0,datachannelid:e.stat("datachannelid"),id:e.id,label:e.stat("label"),messagesReceived:void 0,messagesSent:void 0,protocol:e.stat("protocol"),state:e.stat("state"),timestamp:Date.parse(e.timestamp),transportId:e.stat("transportId"),type:"data-channel"}}function q5(e){return isNaN(e)||e===""?void 0:parseInt(e,10)/1e3}function upt(e){switch(e){case"peerreflexive":return"prflx";case"serverreflexive":return"srflx";case"host":case"relay":default:return e}}function tr(e,t){const r=e.stat(t);return qf(e,t)?parseInt(r,10):void 0}function G5(e,t){const r=e.stat(t);return qf(e,t)?parseFloat(r):void 0}function jue(e,t){const r=e.stat(t);return qf(e,t)?r==="true"||r===!0:void 0}function qf(e,t){const r=e.stat(t);return typeof r<"u"&&r!==""}const fpt="PeerConnection is null",hpt="WebRTC statistics are unsupported";function Xh(e,t){return typeof e.get=="function"?e.get(t):e.find(r=>r.id===t)}function Nue(e){if(!e)return Promise.reject(new nr(fpt));if(typeof e.getStats!="function")return Promise.reject(new ra(hpt));let t;try{t=e.getStats()}catch{t=new Promise(s=>e.getStats(s)).then(ll.fromRTCStatsResponse)}return t}function mpt(e,t){return t=Object.assign({createRTCSample:xpt},t),Nue(e).then(t.createRTCSample)}function ppt(e){return Nue(e).then(t=>{const{candidatePairs:r,localCandidates:s,remoteCandidates:a,transport:i}=Array.from(t.values()).reduce((c,d)=>{switch(["candidatePairs","localCandidates","remoteCandidates"].forEach(u=>{c[u]||(c[u]=[])}),d.type){case"candidate-pair":c.candidatePairs.push(d);break;case"local-candidate":c.localCandidates.push(d);break;case"remote-candidate":c.remoteCandidates.push(d);break;case"transport":d.selectedCandidatePairId&&(c.transport=d);break}return c},{}),o=r.find(c=>c.selected||i&&c.id===i.selectedCandidatePairId);let l;return o&&(l={localCandidate:s.find(c=>c.id===o.localCandidateId),remoteCandidate:a.find(c=>c.id===o.remoteCandidateId)}),{iceCandidateStats:[...s,...a],selectedIceCandidatePairStats:l}})}function gpt(){}function xpt(e){let t=null;const r=new gpt;let s;Array.from(e.values()).forEach(c=>{if(c.isRemote)return;const d=c.type.replace("-","");if(s=s||c.timestamp,c.remoteId){const u=Xh(e,c.remoteId);u&&u.roundTripTime&&(r.rtt=u.roundTripTime*1e3)}switch(d){case"inboundrtp":r.timestamp=r.timestamp||c.timestamp,r.jitter=c.jitter*1e3,r.packetsLost=c.packetsLost,r.packetsReceived=c.packetsReceived,r.bytesReceived=c.bytesReceived;break;case"outboundrtp":if(r.timestamp=c.timestamp,r.packetsSent=c.packetsSent,r.bytesSent=c.bytesSent,c.codecId){const u=Xh(e,c.codecId);r.codecName=u?u.mimeType&&u.mimeType.match(/(.*\/)?(.*)/)[2]:c.codecId}break;case"transport":t=c.id;break}}),r.timestamp||(r.timestamp=s);const a=Xh(e,t);if(!a)return r;const i=Xh(e,a.selectedCandidatePairId);if(!i)return r;const o=Xh(e,i.localCandidateId),l=Xh(e,i.remoteCandidateId);return r.rtt||(r.rtt=i&&i.currentRoundTripTime*1e3),Object.assign(r,{localAddress:o&&(o.address||o.ip),remoteAddress:l&&(l.address||l.ip)}),r}class kr extends Mo.EventEmitter{constructor(t,r){super(),this._hasInsightsErrored=!1,this._log=new Es("PreflightTest"),this._networkTiming={},this._options={codecPreferences:[xt.Codec.PCMU,xt.Codec.Opus],edge:"roaming",fakeMicInput:!1,logLevel:"error",signalingTimeoutMs:1e4},this._status=kr.Status.Connecting,Object.assign(this._options,r),this._samples=[],this._warnings=[],this._startTime=Date.now(),this._initDevice(t,Object.assign(Object.assign({},this._options),{fileInputStream:this._options.fakeMicInput?this._getStreamFromFile():void 0}));const s=["codecPreferences","edge","fakeMicInput","logLevel","signalingTimeoutMs"],a=["audioContext","deviceFactory","fileInputStream","getRTCIceCandidateStatsReport","iceServers","rtcConfiguration"];if(typeof r=="object"){const i=Object.assign({},r);Object.keys(i).forEach(o=>{!s.includes(o)&&!a.includes(o)&&delete i[o],a.includes(o)&&(i[o]=!0)}),this._log.debug(".constructor",JSON.stringify(i))}}stop(){this._log.debug(".stop");const t=new ma.CallCancelledError;this._device?(this._device.once(yt.EventName.Unregistered,()=>this._onFailed(t)),this._device.destroy()):this._onFailed(t)}_emitWarning(t,r,s){const a={name:t,description:r};s&&(a.rtcWarning=s),this._warnings.push(a),this._log.debug(`#${kr.Events.Warning}`,JSON.stringify(a)),this.emit(kr.Events.Warning,a)}_getCallQuality(t){return t>4.2?kr.CallQuality.Excellent:t>=4.1&&t<=4.2?kr.CallQuality.Great:t>=3.7&&t<=4?kr.CallQuality.Good:t>=3.1&&t<=3.6?kr.CallQuality.Fair:kr.CallQuality.Degraded}_getReport(){var t,r,s;const a=this._getRTCStats(),i={start:this._startTime};this._endTime&&(i.end=this._endTime,i.duration=this._endTime-this._startTime);const o={callSid:this._callSid,edge:this._edge,iceCandidateStats:(r=(t=this._rtcIceCandidateStatsReport)===null||t===void 0?void 0:t.iceCandidateStats)!==null&&r!==void 0?r:[],networkTiming:this._networkTiming,samples:this._samples,selectedEdge:this._options.edge,stats:a,testTiming:i,totals:this._getRTCSampleTotals(),warnings:this._warnings},l=(s=this._rtcIceCandidateStatsReport)===null||s===void 0?void 0:s.selectedIceCandidatePairStats;return l&&(o.selectedIceCandidatePairStats=l,o.isTurnRequired=l.localCandidate.candidateType==="relay"||l.remoteCandidate.candidateType==="relay"),a&&(o.callQuality=this._getCallQuality(a.mos.average)),o}_getRTCSampleTotals(){if(this._latestSample)return Object.assign({},this._latestSample.totals)}_getRTCStats(){const t=this._samples.findIndex(s=>typeof s.mos=="number"&&s.mos>0),r=t>=0?this._samples.slice(t):[];if(!(!r||!r.length))return["jitter","mos","rtt"].reduce((s,a)=>{const i=r.map(o=>o[a]);return Object.assign(Object.assign({},s),{[a]:{average:Number((i.reduce((o,l)=>o+l)/i.length).toPrecision(5)),max:Math.max(...i),min:Math.min(...i)}})},{})}_getStreamFromFile(){const t=this._options.audioContext;if(!t)throw new ra("Cannot fake input audio stream: AudioContext is not supported by this browser.");const r=new Audio(Hmt);r.addEventListener("canplaythrough",()=>r.play()),typeof r.setAttribute=="function"&&r.setAttribute("crossorigin","anonymous");const s=t.createMediaElementSource(r),a=t.createMediaStreamDestination();return s.connect(a),a.stream}_initDevice(t,r){try{this._device=new(r.deviceFactory||yt)(t,{chunderw:r.chunderw,codecPreferences:r.codecPreferences,edge:r.edge,eventgw:r.eventgw,fileInputStream:r.fileInputStream,logLevel:r.logLevel,preflight:!0}),this._device.once(yt.EventName.Registered,()=>{this._onDeviceRegistered()}),this._device.once(yt.EventName.Error,s=>{this._onDeviceError(s)}),this._device.register()}catch(s){setTimeout(()=>{this._onFailed(s)});return}this._signalingTimeoutTimer=setTimeout(()=>{this._onDeviceError(new bo.ConnectionError("WebSocket Connection Timeout"))},r.signalingTimeoutMs)}_onDeviceError(t){this._device.destroy(),this._onFailed(t)}_onDeviceRegistered(){return Fa(this,void 0,void 0,function*(){if(clearTimeout(this._echoTimer),clearTimeout(this._signalingTimeoutTimer),this._call=yield this._device.connect({rtcConfiguration:this._options.rtcConfiguration}),this._networkTiming.signaling={start:Date.now()},this._setupCallHandlers(this._call),this._edge=this._device.edge||void 0,this._options.fakeMicInput){this._echoTimer=setTimeout(()=>this._device.disconnectAll(),Wmt);const r=this._device.audio;r&&(r.disconnect(!1),r.outgoing(!1))}this._call.once("disconnect",()=>{this._device.once(yt.EventName.Unregistered,()=>this._onUnregistered()),this._device.destroy()}),this._call._publisher.on("error",()=>{this._hasInsightsErrored||this._emitWarning("insights-connection-error","Received an error when attempting to connect to Insights gateway"),this._hasInsightsErrored=!0})})}_onFailed(t){clearTimeout(this._echoTimer),clearTimeout(this._signalingTimeoutTimer),this._releaseHandlers(),this._endTime=Date.now(),this._status=kr.Status.Failed,this._log.debug(`#${kr.Events.Failed}`,t),this.emit(kr.Events.Failed,t)}_onUnregistered(){setTimeout(()=>{this._status!==kr.Status.Failed&&(clearTimeout(this._echoTimer),clearTimeout(this._signalingTimeoutTimer),this._releaseHandlers(),this._endTime=Date.now(),this._status=kr.Status.Completed,this._report=this._getReport(),this._log.debug(`#${kr.Events.Completed}`,JSON.stringify(this._report)),this.emit(kr.Events.Completed,this._report))},10)}_releaseHandlers(){[this._device,this._call].forEach(t=>{t&&t.eventNames().forEach(r=>t.removeAllListeners(r))})}_setupCallHandlers(t){this._options.fakeMicInput&&t.once("volume",()=>{t._mediaHandler.outputs.forEach(r=>r.audio.muted=!0)}),t.on("warning",(r,s)=>{this._emitWarning(r,"Received an RTCWarning. See .rtcWarning for the RTCWarning",s)}),t.once("accept",()=>{this._callSid=t._mediaHandler.callSid,this._status=kr.Status.Connected,this._log.debug(`#${kr.Events.Connected}`),this.emit(kr.Events.Connected)}),t.on("sample",r=>Fa(this,void 0,void 0,function*(){this._latestSample||(this._rtcIceCandidateStatsReport=yield(this._options.getRTCIceCandidateStatsReport||ppt)(t._mediaHandler.version.pc)),this._latestSample=r,this._samples.push(r),this._log.debug(`#${kr.Events.Sample}`,JSON.stringify(r)),this.emit(kr.Events.Sample,r)})),[{reportLabel:"peerConnection",type:"pcconnection"},{reportLabel:"ice",type:"iceconnection"},{reportLabel:"dtls",type:"dtlstransport"},{reportLabel:"signaling",type:"signaling"}].forEach(({type:r,reportLabel:s})=>{const a=`on${r}statechange`,i=t._mediaHandler[a];t._mediaHandler[a]=o=>{const l=this._networkTiming[s]=this._networkTiming[s]||{start:0};o==="connecting"||o==="checking"?l.start=Date.now():(o==="connected"||o==="stable")&&!l.duration&&(l.end=Date.now(),l.duration=l.end-l.start),i(o)}})}get callSid(){return this._callSid}get endTime(){return this._endTime}get latestSample(){return this._latestSample}get report(){return this._report}get startTime(){return this._startTime}get status(){return this._status}}(function(e){(function(t){t.Excellent="excellent",t.Great="great",t.Good="good",t.Fair="fair",t.Degraded="degraded"})(e.CallQuality||(e.CallQuality={})),function(t){t.Completed="completed",t.Connected="connected",t.Failed="failed",t.Sample="sample",t.Warning="warning"}(e.Events||(e.Events={})),function(t){t.Connecting="connecting",t.Connected="connected",t.Completed="completed",t.Failed="failed"}(e.Status||(e.Status={}))})(kr||(kr={}));const sm=globalThis.WebSocket,ypt=1e4,vpt=5e3,xB=15e3,bpt=15e3,wpt=1/0,jpt=1e3,Npt=2e4;var Ni;(function(e){e.Connecting="connecting",e.Closed="closed",e.Open="open"})(Ni||(Ni={}));class Z3 extends Mo.EventEmitter{constructor(t,r={}){super(),this.state=Ni.Closed,this._backoffStartTime={preferred:null,primary:null},this._connectedUri=null,this._log=new Es("WSTransport"),this._shouldFallback=!1,this._uriIndex=0,this._moveUriIndex=()=>{this._uriIndex++,this._uriIndex>=this._uris.length&&(this._uriIndex=0)},this._onSocketClose=s=>{if(this._log.error(`Received websocket close event code: ${s.code}. Reason: ${s.reason}`),s.code===1006||s.code===1015){this.emit("error",{code:31005,message:s.reason||"Websocket connection to Twilio's signaling servers were unexpectedly ended. If this is happening consistently, there may be an issue resolving the hostname provided. If a region or an edge is being specified in Device setup, ensure it is valid.",twilioError:new bo.ConnectionError});const a=this.state===Ni.Open||this._previousState===Ni.Open;(this._shouldFallback||!a)&&this._moveUriIndex(),this._shouldFallback=!0}this._closeSocket()},this._onSocketError=s=>{this._log.error(`WebSocket received error: ${s.message}`),this.emit("error",{code:31e3,message:s.message||"WSTransport socket error",twilioError:new bo.ConnectionDisconnected})},this._onSocketMessage=s=>{if(this._setHeartbeatTimeout(),this._socket&&s.data===`
`){this._socket.send(`
`),this._log.debug("heartbeat");return}s&&typeof s.data=="string"&&this._log.debug(`Received: ${s.data}`),this.emit("message",s)},this._onSocketOpen=()=>{this._log.info("WebSocket opened successfully."),this._timeOpened=Date.now(),this._shouldFallback=!1,this._setState(Ni.Open),clearTimeout(this._connectTimeout),this._resetBackoffs(),this._setHeartbeatTimeout(),this.emit("open")},this._options=Object.assign(Object.assign({},Z3.defaultConstructorOptions),r),this._uris=t,this._backoff=this._setupBackoffs()}close(){this._log.info("WSTransport.close() called..."),this._close()}open(){if(this._log.info("WSTransport.open() called..."),this._socket&&(this._socket.readyState===sm.CONNECTING||this._socket.readyState===sm.OPEN)){this._log.info("WebSocket already open.");return}this._preferredUri?this._connect(this._preferredUri):this._connect(this._uris[this._uriIndex])}send(t){if(this._log.debug(`Sending: ${t}`),!this._socket||this._socket.readyState!==sm.OPEN)return this._log.debug("Cannot send message. WebSocket is not open."),!1;try{this._socket.send(t)}catch(r){return this._log.error("Error while sending message:",r.message),this._closeSocket(),!1}return!0}updatePreferredURI(t){this._preferredUri=t}updateURIs(t){typeof t=="string"&&(t=[t]),this._uris=t,this._uriIndex=0}_close(){this._setState(Ni.Closed),this._closeSocket()}_closeSocket(){if(clearTimeout(this._connectTimeout),clearTimeout(this._heartbeatTimeout),this._log.info("Closing and cleaning up WebSocket..."),!this._socket){this._log.info("No WebSocket to clean up.");return}this._socket.removeEventListener("close",this._onSocketClose),this._socket.removeEventListener("error",this._onSocketError),this._socket.removeEventListener("message",this._onSocketMessage),this._socket.removeEventListener("open",this._onSocketOpen),(this._socket.readyState===sm.CONNECTING||this._socket.readyState===sm.OPEN)&&this._socket.close(),this._timeOpened&&Date.now()-this._timeOpened>ypt&&this._resetBackoffs(),this.state!==Ni.Closed&&this._performBackoff(),delete this._socket,this.emit("close")}_connect(t,r){this._log.info(typeof r=="number"?`Attempting to reconnect (retry #${r})...`:"Attempting to connect..."),this._closeSocket(),this._setState(Ni.Connecting),this._connectedUri=t;try{this._socket=new this._options.WebSocket(this._connectedUri)}catch(s){this._log.error("Could not connect to endpoint:",s.message),this._close(),this.emit("error",{code:31e3,message:s.message||`Could not connect to ${this._connectedUri}`,twilioError:new bo.ConnectionDisconnected});return}this._socket.addEventListener("close",this._onSocketClose),this._socket.addEventListener("error",this._onSocketError),this._socket.addEventListener("message",this._onSocketMessage),this._socket.addEventListener("open",this._onSocketOpen),delete this._timeOpened,this._connectTimeout=setTimeout(()=>{this._log.info("WebSocket connection attempt timed out."),this._moveUriIndex(),this._closeSocket()},this._options.connectTimeoutMs)}_performBackoff(){this._preferredUri?(this._log.info("Preferred URI set; backing off."),this._backoff.preferred.backoff()):(this._log.info("Preferred URI not set; backing off."),this._backoff.primary.backoff())}_resetBackoffs(){this._backoff.preferred.reset(),this._backoff.primary.reset(),this._backoffStartTime.preferred=null,this._backoffStartTime.primary=null}_setHeartbeatTimeout(){clearTimeout(this._heartbeatTimeout),this._heartbeatTimeout=setTimeout(()=>{this._log.info(`No messages received in ${xB/1e3} seconds. Reconnecting...`),this._shouldFallback=!0,this._closeSocket()},xB)}_setState(t){this._previousState=this.state,this.state=t}_setupBackoffs(){const t={factor:2,jitter:.4,max:this._options.maxPreferredDelayMs,min:100};this._log.info("Initializing preferred transport backoff using config: ",t);const r=new F5(t);r.on("backoff",(i,o)=>{if(this.state===Ni.Closed){this._log.info("Preferred backoff initiated but transport state is closed; not attempting a connection.");return}this._log.info(`Will attempt to reconnect Websocket to preferred URI in ${o}ms`),i===0&&(this._backoffStartTime.preferred=Date.now(),this._log.info(`Preferred backoff start; ${this._backoffStartTime.preferred}`))}),r.on("ready",(i,o)=>{if(this.state===Ni.Closed){this._log.info("Preferred backoff ready but transport state is closed; not attempting a connection.");return}if(this._backoffStartTime.preferred===null){this._log.info("Preferred backoff start time invalid; not attempting a connection.");return}if(Date.now()-this._backoffStartTime.preferred>this._options.maxPreferredDurationMs){this._log.info("Max preferred backoff attempt time exceeded; falling back to primary backoff."),this._preferredUri=null,this._backoff.primary.backoff();return}if(typeof this._preferredUri!="string"){this._log.info("Preferred URI cleared; falling back to primary backoff."),this._preferredUri=null,this._backoff.primary.backoff();return}this._connect(this._preferredUri,i+1)});const s={factor:2,jitter:.4,max:this._options.maxPrimaryDelayMs,min:this._uris&&this._uris.length>1?Math.floor(Math.random()*4001)+1e3:100};this._log.info("Initializing primary transport backoff using config: ",s);const a=new F5(s);return a.on("backoff",(i,o)=>{if(this.state===Ni.Closed){this._log.info("Primary backoff initiated but transport state is closed; not attempting a connection.");return}this._log.info(`Will attempt to reconnect WebSocket in ${o}ms`),i===0&&(this._backoffStartTime.primary=Date.now(),this._log.info(`Primary backoff start; ${this._backoffStartTime.primary}`))}),a.on("ready",(i,o)=>{if(this.state===Ni.Closed){this._log.info("Primary backoff ready but transport state is closed; not attempting a connection.");return}if(this._backoffStartTime.primary===null){this._log.info("Primary backoff start time invalid; not attempting a connection.");return}if(Date.now()-this._backoffStartTime.primary>this._options.maxPrimaryDurationMs){this._log.info("Max primary backoff attempt time exceeded; not attempting a connection.");return}this._connect(this._uris[this._uriIndex],i+1)}),{preferred:r,primary:a}}get uri(){return this._connectedUri}}Z3.defaultConstructorOptions={WebSocket:sm,connectTimeoutMs:vpt,maxPreferredDelayMs:jpt,maxPreferredDurationMs:bpt,maxPrimaryDelayMs:Npt,maxPrimaryDurationMs:wpt};const Spt="1.6",Cpt=30;class mr extends Mo.EventEmitter{constructor(t,r,s){if(super(),!(this instanceof mr))return new mr(t,r,s);const a={TransportFactory:Z3};s=s||{};for(const o in a)o in s||(s[o]=a[o]);this.options=s,this.token=t||"",this.status="disconnected",this.gateway=null,this.region=null,this._messageQueue=[],this._preferredUri=null,this._uris=r,this._handleTransportClose=this._handleTransportClose.bind(this),this._handleTransportError=this._handleTransportError.bind(this),this._handleTransportMessage=this._handleTransportMessage.bind(this),this._handleTransportOpen=this._handleTransportOpen.bind(this),this._log=new Es("PStream"),this.on("error",()=>{this._log.warn("Unexpected error handled in pstream")});const i=this;return this.addListener("ready",()=>{i.status="ready"}),this.addListener("offline",()=>{i.status="offline"}),this.addListener("close",()=>{i._log.info('Received "close" from server. Destroying PStream...'),i._destroy()}),this.transport=new this.options.TransportFactory(this._uris,{backoffMaxMs:this.options.backoffMaxMs,maxPreferredDurationMs:this.options.maxPreferredDurationMs}),Object.defineProperties(this,{uri:{enumerable:!0,get(){return this.transport.uri}}}),this.transport.on("close",this._handleTransportClose),this.transport.on("error",this._handleTransportError),this.transport.on("message",this._handleTransportMessage),this.transport.on("open",this._handleTransportOpen),this.transport.open(),this}}mr.prototype._handleTransportClose=function(){this.emit("transportClose"),this.status!=="disconnected"&&(this.status!=="offline"&&this.emit("offline",this),this.status="disconnected")};mr.prototype._handleTransportError=function(e){if(!e){this.emit("error",{error:{code:31e3,message:"Websocket closed without a provided reason",twilioError:new bo.ConnectionDisconnected}});return}this.emit("error",typeof e.code<"u"?{error:e}:e)};mr.prototype._handleTransportMessage=function(e){if(!e||!e.data||typeof e.data!="string")return;const{type:t,payload:r={}}=JSON.parse(e.data);this.gateway=r.gateway||this.gateway,this.region=r.region||this.region,t==="error"&&r.error&&(r.error.twilioError=new bo.ConnectionError),this.emit(t,r)};mr.prototype._handleTransportOpen=function(){this.status="connected",this.setToken(this.token),this.emit("transportOpen"),this._messageQueue.splice(0,this._messageQueue.length).forEach(t=>this._publish(...t))};mr.toString=()=>"[Twilio.PStream class]";mr.prototype.toString=()=>"[Twilio.PStream instance]";mr.prototype.setToken=function(e){this._log.info("Setting token and publishing listen"),this.token=e;let t=0;const r=this.options.maxPreferredDurationMs;this._log.info(`maxPreferredDurationMs:${r}`),typeof r=="number"&&r>=0&&(t=Math.min(Math.ceil(r/1e3),Cpt)),this._log.info(`reconnectTimeout:${t}`);const s={browserinfo:kpt(),reconnectTimeout:t,token:e};this._publish("listen",s)};mr.prototype.sendMessage=function(e,t,r="application/json",s,a){const i={callsid:e,content:t,contenttype:r,messagetype:s,voiceeventsid:a};this._publish("message",i,!0)};mr.prototype.register=function(e){const t={media:e};this._publish("register",t,!0)};mr.prototype.invite=function(e,t,r){const s={callsid:t,sdp:e,twilio:r?{params:r}:{}};this._publish("invite",s,!0)};mr.prototype.reconnect=function(e,t,r){const s={callsid:t,reconnect:r,sdp:e,twilio:{}};this._publish("invite",s,!0)};mr.prototype.answer=function(e,t){this._publish("answer",{sdp:e,callsid:t},!0)};mr.prototype.dtmf=function(e,t){this._publish("dtmf",{callsid:e,dtmf:t},!0)};mr.prototype.hangup=function(e,t){const r=t?{callsid:e,message:t}:{callsid:e};this._publish("hangup",r,!0)};mr.prototype.reject=function(e){this._publish("reject",{callsid:e},!0)};mr.prototype.reinvite=function(e,t){this._publish("reinvite",{sdp:e,callsid:t},!1)};mr.prototype._destroy=function(){this.transport.removeListener("close",this._handleTransportClose),this.transport.removeListener("error",this._handleTransportError),this.transport.removeListener("message",this._handleTransportMessage),this.transport.removeListener("open",this._handleTransportOpen),this.transport.close(),this.emit("offline",this)};mr.prototype.destroy=function(){return this._log.info("PStream.destroy() called..."),this._destroy(),this};mr.prototype.updatePreferredURI=function(e){this._preferredUri=e,this.transport.updatePreferredURI(e)};mr.prototype.updateURIs=function(e){this._uris=e,this.transport.updateURIs(this._uris)};mr.prototype.publish=function(e,t){return this._publish(e,t,!0)};mr.prototype._publish=function(e,t,r){const s=JSON.stringify({payload:t,type:e,version:Spt});!!this.transport.send(s)||(this.emit("error",{error:{code:31009,message:"No transport available to send or receive messages",twilioError:new ma.TransportError}}),r&&this._messageQueue.push([e,t,!0]))};function kpt(){const e=typeof navigator<"u"?navigator:{};return{browser:{platform:e.platform||"unknown",userAgent:e.userAgent||"unknown"},p:"browser",plugin:"rtc",v:tp}}var Lr;(function(e){e.Sydney="sydney",e.SaoPaulo="sao-paulo",e.Dublin="dublin",e.Frankfurt="frankfurt",e.Tokyo="tokyo",e.Singapore="singapore",e.Ashburn="ashburn",e.Umatilla="umatilla",e.Roaming="roaming",e.AshburnIx="ashburn-ix",e.SanJoseIx="san-jose-ix",e.LondonIx="london-ix",e.FrankfurtIx="frankfurt-ix",e.SingaporeIx="singapore-ix",e.SydneyIx="sydney-ix",e.TokyoIx="tokyo-ix"})(Lr||(Lr={}));var Qn;(function(e){e.Au1="au1",e.Au1Ix="au1-ix",e.Br1="br1",e.De1="de1",e.De1Ix="de1-ix",e.Gll="gll",e.Ie1="ie1",e.Ie1Ix="ie1-ix",e.Ie1Tnx="ie1-tnx",e.Jp1="jp1",e.Jp1Ix="jp1-ix",e.Sg1="sg1",e.Sg1Ix="sg1-ix",e.Sg1Tnx="sg1-tnx",e.Us1="us1",e.Us1Ix="us1-ix",e.Us1Tnx="us1-tnx",e.Us2="us2",e.Us2Ix="us2-ix",e.Us2Tnx="us2-tnx"})(Qn||(Qn={}));const Mpt={ASIAPAC_SINGAPORE:Qn.Sg1,ASIAPAC_SYDNEY:Qn.Au1,ASIAPAC_TOKYO:Qn.Jp1,EU_FRANKFURT:Qn.De1,EU_IRELAND:Qn.Ie1,SOUTH_AMERICA_SAO_PAULO:Qn.Br1,US_EAST_VIRGINIA:Qn.Us1,US_WEST_OREGON:Qn.Us2},_pt={[Qn.Au1]:Lr.Sydney,[Qn.Br1]:Lr.SaoPaulo,[Qn.Ie1]:Lr.Dublin,[Qn.De1]:Lr.Frankfurt,[Qn.Jp1]:Lr.Tokyo,[Qn.Sg1]:Lr.Singapore,[Qn.Us1]:Lr.Ashburn,[Qn.Us2]:Lr.Umatilla,[Qn.Gll]:Lr.Roaming,[Qn.Us1Ix]:Lr.AshburnIx,[Qn.Us2Ix]:Lr.SanJoseIx,[Qn.Ie1Ix]:Lr.LondonIx,[Qn.De1Ix]:Lr.FrankfurtIx,[Qn.Sg1Ix]:Lr.SingaporeIx,[Qn.Au1Ix]:Lr.SydneyIx,[Qn.Jp1Ix]:Lr.TokyoIx,[Qn.Us1Tnx]:Lr.AshburnIx,[Qn.Us2Tnx]:Lr.AshburnIx,[Qn.Ie1Tnx]:Lr.LondonIx,[Qn.Sg1Tnx]:Lr.SingaporeIx},Ppt=Lr.Roaming,Tpt="eventgw.twilio.com";function yB(e){return`voice-js.${e}.twilio.com`}function vB(e){return e?`eventgw.${e}.twilio.com`:Tpt}function bB(e){return`wss://${e}/signal`}function wB(e){if(e&&typeof e!="string"&&!Array.isArray(e))throw new nr("If `edge` is provided, it must be of type `string` or an array of strings.");let t;return e?t=(Array.isArray(e)?e:[e]).map(s=>yB(s)):t=[yB(Ppt)],t}function Apt(e){return Mpt[e]||null}const jB={0:"PCMU",8:"PCMA"},Ept=111,Ipt=51e4,Lpt=6e3;function Dpt(e){const[,t,r]=/a=rtpmap:(\d+) (\S+)/m.exec(e)||[null,"",""],s=new RegExp(`a=fmtp:${t} (\\S+)`,"m"),[,a]=s.exec(e)||[null,""];return{codecName:r,codecParams:a}}function $pt(e){return p9(window,window.navigator)?e.split(`
`).filter(t=>t.indexOf("a=ice-lite")===-1).join(`
`):e}function Sue(e,t){if(typeof t!="number"||t<Lpt||t>Ipt)return e;const r=/a=rtpmap:(\d+) opus/m.exec(e),s=r&&r.length?r[1]:Ept,a=new RegExp(`a=fmtp:${s}`);return e.split(`
`).map(o=>a.test(o)?o+`;maxaveragebitrate=${t}`:o).join(`
`)}function Cue(e,t){const r=Opt(e);return[e.split(`\r
m=`)[0]].concat(r.map(a=>{if(!/^m=(audio|video)/.test(a))return a;const i=a.match(/^m=(audio|video)/)[1],o=Rpt(a),l=Fpt(o,t),c=zpt(l,a),d=o.get("pcma")||[],u=o.get("pcmu")||[];return(i==="audio"?new Set(d.concat(u)):new Set).has(l[0])?c.replace(/\r\nb=(AS|TIAS):([0-9]+)/g,""):c})).join(`\r
`)}function Opt(e,t,r){return e.replace(/\r\n\r\n$/,`\r
`).split(`\r
m=`).slice(1).map(s=>`m=${s}`).filter(s=>{const a=new RegExp("m=.*","gm"),i=new RegExp("a=.*","gm");return a.test(s)&&i.test(s)})}function Rpt(e){return Array.from(Bpt(e)).reduce((t,r)=>{const s=r[0],a=r[1],i=t.get(a)||[];return t.set(a,i.concat(s))},new Map)}function Fpt(e,t){t=t.map(i=>i.toLowerCase());const r=V5(t,i=>e.get(i)||[]),s=m9(Array.from(e.keys()),t),a=V5(s,i=>e.get(i));return r.concat(a)}function zpt(e,t){const r=t.split(`\r
`);let s=r[0];const a=r.slice(1);return s=s.replace(/([0-9]+\s?)+$/,e.join(" ")),[s].concat(a).join(`\r
`)}function Bpt(e){return Upt(e).reduce((t,r)=>{const s=new RegExp(`a=rtpmap:${r} ([^/]+)`),a=e.match(s),i=a?a[1].toLowerCase():jB[r]?jB[r].toLowerCase():"";return t.set(r,i)},new Map)}function Upt(e){const r=e.split(`\r
`)[0].match(/([0-9]+)/g);return r?r.slice(1).map(s=>parseInt(s,10)):[]}function Wi(e){if(this.log=new Es("RTCPC"),typeof window>"u"){this.log.info("No RTCPeerConnection implementation available. The window object was not found.");return}e&&e.RTCPeerConnection?this.RTCPeerConnection=e.RTCPeerConnection:typeof window.RTCPeerConnection=="function"?this.RTCPeerConnection=window.RTCPeerConnection:typeof window.webkitRTCPeerConnection=="function"?this.RTCPeerConnection=webkitRTCPeerConnection:typeof window.mozRTCPeerConnection=="function"?(this.RTCPeerConnection=mozRTCPeerConnection,window.RTCSessionDescription=mozRTCSessionDescription,window.RTCIceCandidate=mozRTCIceCandidate):this.log.info("No RTCPeerConnection implementation available")}Wi.prototype.create=function(e){this.pc=new this.RTCPeerConnection(e)};Wi.prototype.createModernConstraints=e=>{if(typeof e>"u")return null;const t=Object.assign({},e);return typeof webkitRTCPeerConnection<"u"&&!J3()?(t.mandatory={},typeof e.audio<"u"&&(t.mandatory.OfferToReceiveAudio=e.audio),typeof e.video<"u"&&(t.mandatory.OfferToReceiveVideo=e.video)):(typeof e.audio<"u"&&(t.offerToReceiveAudio=e.audio),typeof e.video<"u"&&(t.offerToReceiveVideo=e.video)),delete t.audio,delete t.video,t};Wi.prototype.createOffer=function(e,t,r,s){return t=this.createModernConstraints(t),Mue(this.pc.createOffer,this.pc)(t).then(a=>{if(!this.pc)return Promise.resolve();const i=Sue(a.sdp,e);return X3(this.pc.setLocalDescription,this.pc)(new RTCSessionDescription({sdp:i,type:"offer"}))}).then(r,s)};Wi.prototype.createAnswer=function(e,t,r,s){return t=this.createModernConstraints(t),Mue(this.pc.createAnswer,this.pc)(t).then(a=>{if(!this.pc)return Promise.resolve();const i=Sue(a.sdp,e);return X3(this.pc.setLocalDescription,this.pc)(new RTCSessionDescription({sdp:i,type:"answer"}))}).then(r,s)};Wi.prototype.processSDP=function(e,t,r,s,a,i){r=Cue(r,t);const o=new RTCSessionDescription({sdp:r,type:"offer"});return X3(this.pc.setRemoteDescription,this.pc)(o).then(()=>{this.createAnswer(e,s,a,i)})};Wi.prototype.getSDP=function(){return this.pc.localDescription.sdp};Wi.prototype.processAnswer=function(e,t,r,s){return this.pc?(t=Cue(t,e),X3(this.pc.setRemoteDescription,this.pc)(new RTCSessionDescription({sdp:t,type:"answer"})).then(r,s)):Promise.resolve()};Wi.test=()=>{if(typeof navigator=="object"){const e=navigator.mediaDevices&&navigator.mediaDevices.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.getUserMedia;if(J3(navigator))return!1;if(e&&typeof window.RTCPeerConnection=="function")return!0;if(e&&typeof window.webkitRTCPeerConnection=="function")return!0;if(e&&typeof window.mozRTCPeerConnection=="function"){try{if(typeof new window.mozRTCPeerConnection().getLocalStreams!="function")return!1}catch{return!1}return!0}else if(typeof RTCIceGatherer<"u")return!0}return!1};function kue(e,t,r,s){return function(){const a=Array.prototype.slice.call(arguments);return new Promise(i=>{const o=e.apply(t,a);if(!s){i(o);return}if(typeof o=="object"&&typeof o.then=="function")i(o);else throw new Error}).catch(()=>new Promise((i,o)=>{e.apply(t,r?[i,o].concat(a):a.concat([i,o]))}))}}function Mue(e,t){return kue(e,t,!0,!0)}function X3(e,t){return kue(e,t,!1,!1)}const Vpt=15e3,Hpt="none",Wpt="timeout",qpt="new",NB=50;function Yt(e,t,r){if(!e||!t)throw new nr("Audiohelper, and pstream are required arguments");if(!(this instanceof Yt))return new Yt(e,t,r);this._log=new Es("PeerConnection");function s(){this._log.warn("Unexpected noop call in peerconnection")}this.onaudio=s,this.onopen=s,this.onerror=s,this.onclose=s,this.ondisconnected=s,this.onfailed=s,this.onconnected=s,this.onreconnected=s,this.onsignalingstatechange=s,this.ondtlstransportstatechange=s,this.onicegatheringfailure=s,this.onicegatheringstatechange=s,this.oniceconnectionstatechange=s,this.onpcconnectionstatechange=s,this.onicecandidate=s,this.onselectedcandidatepairchange=s,this.onvolume=s,this.version=null,this.pstream=t,this.stream=null,this.sinkIds=new Set(["default"]),this.outputs=new Map,this.status="connecting",this.callSid=null,this.isMuted=!1;const a=typeof window<"u"&&(window.AudioContext||window.webkitAudioContext);return this._isSinkSupported=!!a&&typeof HTMLAudioElement<"u"&&HTMLAudioElement.prototype.setSinkId,this._audioContext=a&&e._audioContext,this._audioHelper=e,this._hasIceCandidates=!1,this._hasIceGatheringFailures=!1,this._iceGatheringTimeoutId=null,this._masterAudio=null,this._masterAudioDeviceId=null,this._mediaStreamSource=null,this._dtmfSender=null,this._dtmfSenderUnsupported=!1,this._callEvents=[],this._nextTimeToPublish=Date.now(),this._onAnswerOrRinging=s,this._onHangup=s,this._remoteStream=null,this._shouldManageStream=!0,this._iceState=qpt,this.options=r=r||{},this.navigator=r.navigator||(typeof navigator<"u"?navigator:null),this.util=r.util||bue,this.codecPreferences=r.codecPreferences,this}Yt.prototype.uri=function(){return this._uri};Yt.prototype.openDefaultDeviceWithConstraints=function(e){return this._audioHelper._openDefaultDeviceWithConstraints(e).then(this._setInputTracksFromStream.bind(this,!1))};Yt.prototype.setInputTracksFromStream=function(e){const t=this;return this._setInputTracksFromStream(!0,e).then(()=>{t._shouldManageStream=!1})};Yt.prototype._createAnalyser=(e,t)=>{t=Object.assign({fftSize:32,smoothingTimeConstant:.3},t);const r=e.createAnalyser();for(const s in t)r[s]=t[s];return r};Yt.prototype._setVolumeHandler=function(e){this.onvolume=e};Yt.prototype._startPollingVolume=function(){if(!this._audioContext||!this.stream||!this._remoteStream)return;const e=this._audioContext,r=(this._inputAnalyser=this._createAnalyser(e)).frequencyBinCount,s=new Uint8Array(r);this._inputAnalyser2=this._createAnalyser(e,{maxDecibels:0,minDecibels:-127,smoothingTimeConstant:0});const i=(this._outputAnalyser=this._createAnalyser(e)).frequencyBinCount,o=new Uint8Array(i);this._outputAnalyser2=this._createAnalyser(e,{maxDecibels:0,minDecibels:-127,smoothingTimeConstant:0}),this._updateInputStreamSource(this.stream),this._updateOutputStreamSource(this._remoteStream);const l=this;setTimeout(function c(){if(l._audioContext){if(l.status==="closed"){l._inputAnalyser.disconnect(),l._outputAnalyser.disconnect(),l._inputAnalyser2.disconnect(),l._outputAnalyser2.disconnect();return}}else return;l._inputAnalyser.getByteFrequencyData(s);const d=l.util.average(s);l._inputAnalyser2.getByteFrequencyData(s);const u=l.util.average(s);l._outputAnalyser.getByteFrequencyData(o);const f=l.util.average(o);l._outputAnalyser2.getByteFrequencyData(o);const h=l.util.average(o);l.onvolume(d/255,f/255,u,h),setTimeout(c,NB)},NB)};Yt.prototype._stopStream=function(){this._shouldManageStream&&this._audioHelper._stopDefaultInputDeviceStream()};Yt.prototype._updateInputStreamSource=function(e){this._inputStreamSource&&this._inputStreamSource.disconnect();try{this._inputStreamSource=this._audioContext.createMediaStreamSource(e),this._inputStreamSource.connect(this._inputAnalyser),this._inputStreamSource.connect(this._inputAnalyser2)}catch(t){this._log.warn("Unable to update input MediaStreamSource",t),this._inputStreamSource=null}};Yt.prototype._updateOutputStreamSource=function(e){this._outputStreamSource&&this._outputStreamSource.disconnect();try{this._outputStreamSource=this._audioContext.createMediaStreamSource(e),this._outputStreamSource.connect(this._outputAnalyser),this._outputStreamSource.connect(this._outputAnalyser2)}catch(t){this._log.warn("Unable to update output MediaStreamSource",t),this._outputStreamSource=null}};Yt.prototype._setInputTracksFromStream=function(e,t){if(!t)return Promise.reject(new nr("Can not set input stream to null while in a call"));if(!t.getAudioTracks().length)return Promise.reject(new nr("Supplied input stream has no audio tracks"));const r=this.stream,s=()=>(this.mute(this.isMuted),Promise.resolve(this.stream));if(!r)this.stream=e?SB(t,this.options.MediaStream):t;else return this._shouldManageStream&&this._stopStream(),this._sender||(this._sender=this.version.pc.getSenders()[0]),this._sender.replaceTrack(t.getAudioTracks()[0]).then(()=>(this._updateInputStreamSource(t),this.stream=e?SB(t,this.options.MediaStream):t,s()));return s()};Yt.prototype._onInputDevicesChanged=function(){if(!this.stream)return;this.stream.getAudioTracks().every(t=>t.readyState==="ended")&&this._shouldManageStream&&this.openDefaultDeviceWithConstraints({audio:!0})};Yt.prototype._onIceGatheringFailure=function(e){this._hasIceGatheringFailures=!0,this.onicegatheringfailure(e)};Yt.prototype._onMediaConnectionStateChange=function(e){const t=this._iceState;if(t===e||e!=="connected"&&e!=="disconnected"&&e!=="failed")return;this._iceState=e;let r;switch(e){case"connected":t==="disconnected"||t==="failed"?(r="ICE liveliness check succeeded. Connection with Twilio restored",this._log.info(r),this.onreconnected(r)):(r="Media connection established.",this._log.info(r),this.onconnected(r)),this._stopIceGatheringTimeout(),this._hasIceGatheringFailures=!1;break;case"disconnected":r="ICE liveliness check failed. May be having trouble connecting to Twilio",this._log.warn(r),this.ondisconnected(r);break;case"failed":r="Connection with Twilio was interrupted.",this._log.warn(r),this.onfailed(r);break}};Yt.prototype._setSinkIds=function(e){return this._isSinkSupported?(this.sinkIds=new Set(e.forEach?e:[e]),this.version?this._updateAudioOutputs():Promise.resolve()):Promise.reject(new ra("Audio output selection is not supported by this browser"))};Yt.prototype._startIceGatheringTimeout=function(){this._stopIceGatheringTimeout(),this._iceGatheringTimeoutId=setTimeout(()=>{this._onIceGatheringFailure(Wpt)},Vpt)};Yt.prototype._stopIceGatheringTimeout=function(){clearInterval(this._iceGatheringTimeoutId)};Yt.prototype._updateAudioOutputs=function(){const t=Array.from(this.sinkIds).filter(function(i){return!this.outputs.has(i)},this),r=Array.from(this.outputs.keys()).filter(function(i){return!this.sinkIds.has(i)},this),s=this,a=t.map(this._createAudioOutput,this);return Promise.all(a).then(()=>Promise.all(r.map(s._removeAudioOutput,s)))};Yt.prototype._createAudio=function(t){const r=new Audio(t);return this.onaudio(r),r};Yt.prototype._createAudioOutput=function(t){let r=null;this._mediaStreamSource&&(r=this._audioContext.createMediaStreamDestination(),this._mediaStreamSource.connect(r));const s=this._createAudio();x9(s,r&&r.stream?r.stream:this.pcStream);const a=this;return s.setSinkId(t).then(()=>s.play()).then(()=>{a.outputs.set(t,{audio:s,dest:r})})};Yt.prototype._removeAudioOutputs=function(){return this._masterAudio&&typeof this._masterAudioDeviceId<"u"&&(this._disableOutput(this,this._masterAudioDeviceId),this.outputs.delete(this._masterAudioDeviceId),this._masterAudioDeviceId=null,this._masterAudio.paused||this._masterAudio.pause(),typeof this._masterAudio.srcObject<"u"?this._masterAudio.srcObject=null:this._masterAudio.src="",this._masterAudio=null),Array.from(this.outputs.keys()).map(this._removeAudioOutput,this)};Yt.prototype._disableOutput=function(t,r){const s=t.outputs.get(r);s&&(s.audio&&(s.audio.pause(),s.audio.src=""),s.dest&&s.dest.disconnect())};Yt.prototype._reassignMasterOutput=function(t,r){const s=t.outputs.get(r);t.outputs.delete(r);const a=this,i=Array.from(t.outputs.keys())[0],o=typeof i=="string"?i:"default";return s.audio.setSinkId(o).then(()=>{a._disableOutput(t,o),t.outputs.set(o,s),t._masterAudioDeviceId=o}).catch(function(){t.outputs.set(r,s),a._log.info("Could not reassign master output. Attempted to roll back.")})};Yt.prototype._removeAudioOutput=function(t){return this._masterAudioDeviceId===t?this._reassignMasterOutput(this,t):(this._disableOutput(this,t),this.outputs.delete(t),Promise.resolve())};Yt.prototype._onAddTrack=function(t,r){const s=t._masterAudio=this._createAudio();x9(s,r),s.play();const a=Array.from(t.outputs.keys())[0],i=typeof a=="string"?a:"default";t._masterAudioDeviceId=i,t.outputs.set(i,{audio:s});try{t._mediaStreamSource=t._audioContext.createMediaStreamSource(r)}catch(o){this._log.warn("Unable to create a MediaStreamSource from onAddTrack",o),this._mediaStreamSource=null}t.pcStream=r,t._updateAudioOutputs()};Yt.prototype._fallbackOnAddTrack=function(t,r){const s=document&&document.createElement("audio");s.autoplay=!0,x9(s,r)||t._log.info("Error attaching stream to element."),t.outputs.set("default",{audio:s})};Yt.prototype._setEncodingParameters=function(e){if(!e||!this._sender||typeof this._sender.getParameters!="function"||typeof this._sender.setParameters!="function")return;const t=this._sender.getParameters();!t.priority&&!(t.encodings&&t.encodings.length)||(t.priority="high",t.encodings&&t.encodings.length&&t.encodings.forEach(r=>{r.priority="high",r.networkPriority="high"}),this._sender.setParameters(t))};Yt.prototype._setupPeerConnection=function(e){const t=this,r=new(this.options.rtcpcFactory||Wi)({RTCPeerConnection:this.options.RTCPeerConnection});r.create(e),Gpt(r.pc,this.stream);const s=RTCRtpReceiver.getCapabilities("audio").codecs;this._log.debug("sorting codecs",s,this.codecPreferences);const a=vue(s,this.codecPreferences),[i]=r.pc.getTransceivers();this._log.debug("setting sorted codecs",a),i.setCodecPreferences(a);const o="ontrack"in r.pc?"ontrack":"onaddstream";return r.pc[o]=l=>{const c=t._remoteStream=l.stream||l.streams[0];typeof r.pc.getSenders=="function"&&(this._sender=r.pc.getSenders()[0]),t._isSinkSupported?t._onAddTrack(t,c):t._fallbackOnAddTrack(t,c),t._startPollingVolume()},r};Yt.prototype._maybeSetIceAggressiveNomination=function(e){return this.options.forceAggressiveIceNomination?$pt(e):e};Yt.prototype._setupChannel=function(){const e=this.version.pc;this.version.pc.onopen=()=>{this.status="open",this.onopen()},this.version.pc.onstatechange=()=>{this.version.pc&&this.version.pc.readyState==="stable"&&(this.status="open",this.onopen())},this.version.pc.onsignalingstatechange=()=>{const t=e.signalingState;this._log.info(`signalingState is "${t}"`),this.version.pc&&this.version.pc.signalingState==="stable"&&(this.status="open",this.onopen()),this.onsignalingstatechange(e.signalingState)},e.onconnectionstatechange=t=>{let r=e.connectionState;if(!r&&t&&t.target){const s=t.target;r=s.connectionState||s.connectionState_,this._log.info(`pc.connectionState not detected. Using target PC. State=${r}`)}r?this._log.info(`pc.connectionState is "${r}"`):this._log.warn(`onconnectionstatechange detected but state is "${r}"`),this.onpcconnectionstatechange(r),this._onMediaConnectionStateChange(r)},e.onicecandidate=t=>{const{candidate:r}=t;r&&(this._hasIceCandidates=!0,this.onicecandidate(r),this._setupRTCIceTransportListener()),this._log.info(`ICE Candidate: ${JSON.stringify(r)}`)},e.onicegatheringstatechange=()=>{const t=e.iceGatheringState;t==="gathering"?this._startIceGatheringTimeout():t==="complete"&&(this._stopIceGatheringTimeout(),this._hasIceCandidates||this._onIceGatheringFailure(Hpt),this._hasIceCandidates&&this._hasIceGatheringFailures&&this._startIceGatheringTimeout()),this._log.info(`pc.iceGatheringState is "${e.iceGatheringState}"`),this.onicegatheringstatechange(t)},e.oniceconnectionstatechange=()=>{this._log.info(`pc.iceConnectionState is "${e.iceConnectionState}"`),this.oniceconnectionstatechange(e.iceConnectionState),this._onMediaConnectionStateChange(e.iceConnectionState)}};Yt.prototype._initializeMediaStream=function(e){return this.status==="open"?!1:this.pstream.status==="disconnected"?(this.onerror({info:{code:31e3,message:"Cannot establish connection. Client is disconnected",twilioError:new bo.ConnectionDisconnected}}),this.close(),!1):(this.version=this._setupPeerConnection(e),this._setupChannel(),!0)};Yt.prototype._removeReconnectionListeners=function(){this.pstream&&(this.pstream.removeListener("answer",this._onAnswerOrRinging),this.pstream.removeListener("hangup",this._onHangup))};Yt.prototype._setupRTCDtlsTransportListener=function(){const e=this.getRTCDtlsTransport();if(!e||e.onstatechange)return;const t=()=>{this._log.info(`dtlsTransportState is "${e.state}"`),this.ondtlstransportstatechange(e.state)};t(),e.onstatechange=t};Yt.prototype._setupRTCIceTransportListener=function(){const e=this._getRTCIceTransport();!e||e.onselectedcandidatepairchange||(e.onselectedcandidatepairchange=()=>this.onselectedcandidatepairchange(e.getSelectedCandidatePair()))};Yt.prototype.iceRestart=function(){this._log.info("Attempting to restart ICE..."),this._hasIceCandidates=!1,this.version.createOffer(this.options.maxAverageBitrate,{iceRestart:!0}).then(()=>{this._removeReconnectionListeners(),this._onAnswerOrRinging=e=>{if(this._removeReconnectionListeners(),!e.sdp||this.version.pc.signalingState!=="have-local-offer"){const r=`Invalid state or param during ICE Restart:hasSdp:${!!e.sdp}, signalingState:${this.version.pc.signalingState}`;this._log.warn(r);return}const t=this._maybeSetIceAggressiveNomination(e.sdp);this._answerSdp=t,this.status!=="closed"&&this.version.processAnswer(this.codecPreferences,t,null,r=>{const s=r&&r.message?r.message:r;this._log.error(`Failed to process answer during ICE Restart. Error: ${s}`)})},this._onHangup=()=>{this._log.info("Received hangup during ICE Restart"),this._removeReconnectionListeners()},this.pstream.on("answer",this._onAnswerOrRinging),this.pstream.on("hangup",this._onHangup),this.pstream.reinvite(this.version.getSDP(),this.callSid)}).catch(e=>{const t=e&&e.message?e.message:e;this._log.error(`Failed to createOffer during ICE Restart. Error: ${t}`),this.onfailed(t)})};Yt.prototype.makeOutgoingCall=function(e,t,r,s,a){if(!this._initializeMediaStream(s))return;const i=this;this.callSid=r;function o(){i.options&&i._setEncodingParameters(i.options.dscp),a(i.version.pc)}function l(u){const f=u.message||u;i.onerror({info:{code:31e3,message:`Error processing answer: ${f}`,twilioError:new Yl.ClientRemoteDescFailed}})}this._onAnswerOrRinging=u=>{if(!u.sdp)return;const f=this._maybeSetIceAggressiveNomination(u.sdp);i._answerSdp=f,i.status!=="closed"&&i.version.processAnswer(this.codecPreferences,f,o,l),i.pstream.removeListener("answer",i._onAnswerOrRinging),i.pstream.removeListener("ringing",i._onAnswerOrRinging)},this.pstream.on("answer",this._onAnswerOrRinging),this.pstream.on("ringing",this._onAnswerOrRinging);function c(){i.status!=="closed"&&(t?i.pstream.reconnect(i.version.getSDP(),i.callSid,t):i.pstream.invite(i.version.getSDP(),i.callSid,e),i._setupRTCDtlsTransportListener())}function d(u){const f=u.message||u;i.onerror({info:{code:31e3,message:`Error creating the offer: ${f}`,twilioError:new Yl.ClientLocalDescFailed}})}this.version.createOffer(this.options.maxAverageBitrate,{audio:!0},c,d)};Yt.prototype.answerIncomingCall=function(e,t,r,s){if(!this._initializeMediaStream(r))return;t=this._maybeSetIceAggressiveNomination(t),this._answerSdp=t.replace(/^a=setup:actpass$/gm,"a=setup:passive"),this.callSid=e;const a=this;function i(){a.status!=="closed"&&(a.pstream.answer(a.version.getSDP(),e),a.options&&a._setEncodingParameters(a.options.dscp),s(a.version.pc),a._setupRTCDtlsTransportListener())}function o(l){const c=l.message||l;a.onerror({info:{code:31e3,message:`Error creating the answer: ${c}`,twilioError:new Yl.ClientRemoteDescFailed}})}this.version.processSDP(this.options.maxAverageBitrate,this.codecPreferences,t,{audio:!0},i,o)};Yt.prototype.close=function(){this.version&&this.version.pc&&(this.version.pc.signalingState!=="closed"&&this.version.pc.close(),this.version.pc=null),this.stream&&(this.mute(!1),this._stopStream()),this.stream=null,this._removeReconnectionListeners(),this._stopIceGatheringTimeout(),Promise.all(this._removeAudioOutputs()).catch(()=>{}),this._mediaStreamSource&&this._mediaStreamSource.disconnect(),this._inputAnalyser&&this._inputAnalyser.disconnect(),this._outputAnalyser&&this._outputAnalyser.disconnect(),this._inputAnalyser2&&this._inputAnalyser2.disconnect(),this._outputAnalyser2&&this._outputAnalyser2.disconnect(),this.status="closed",this.onclose()};Yt.prototype.reject=function(e){this.callSid=e};Yt.prototype.ignore=function(e){this.callSid=e};Yt.prototype.mute=function(e){this.isMuted=e,this.stream&&(this._sender&&this._sender.track?this._sender.track.enabled=!e:(typeof this.stream.getAudioTracks=="function"?this.stream.getAudioTracks():this.stream.audioTracks).forEach(r=>{r.enabled=!e}))};Yt.prototype.getOrCreateDTMFSender=function(){if(this._dtmfSender||this._dtmfSenderUnsupported)return this._dtmfSender||null;const t=this,r=this.version.pc;if(!r)return this._log.warn("No RTCPeerConnection available to call createDTMFSender on"),null;if(typeof r.getSenders=="function"&&(typeof RTCDTMFSender=="function"||typeof RTCDtmfSender=="function")){const s=r.getSenders().find(a=>a.dtmf);if(s)return this._log.info("Using RTCRtpSender#dtmf"),this._dtmfSender=s.dtmf,this._dtmfSender}if(typeof r.createDTMFSender=="function"&&typeof r.getLocalStreams=="function"){const s=r.getLocalStreams().map(a=>{const i=t._getAudioTracks(a);return i&&i[0]})[0];return s?(this._log.info("Creating RTCDTMFSender"),this._dtmfSender=r.createDTMFSender(s),this._dtmfSender):(this._log.warn("No local audio MediaStreamTrack available on the RTCPeerConnection to pass to createDTMFSender"),null)}return this._log.info("RTCPeerConnection does not support RTCDTMFSender"),this._dtmfSenderUnsupported=!0,null};Yt.prototype.getRTCDtlsTransport=function(){const t=this.version&&this.version.pc&&typeof this.version.pc.getSenders=="function"&&this.version.pc.getSenders()[0];return t&&t.transport||null};Yt.prototype._canStopMediaStreamTrack=()=>typeof MediaStreamTrack.prototype.stop=="function";Yt.prototype._getAudioTracks=e=>typeof e.getAudioTracks=="function"?e.getAudioTracks():e.audioTracks;Yt.prototype._getRTCIceTransport=function(){const t=this.getRTCDtlsTransport();return t&&t.iceTransport||null};Yt.protocol=Wi.test()?new Wi:null;function Gpt(e,t){typeof e.addTrack=="function"?t.getAudioTracks().forEach(r=>{e.addTrack(r,t)}):e.addStream(t)}function SB(e,t){let r;return t?r=new t:typeof MediaStream<"u"?r=new MediaStream:r=new webkitMediaStream,e.getAudioTracks().forEach(r.addTrack,r),r}function x9(e,t){if(typeof e.srcObject<"u")e.srcObject=t;else if(typeof e.mozSrcObject<"u")e.mozSrcObject=t;else if(typeof e.src<"u"){const r=e.options.window||window;e.src=(r.URL||r.webkitURL).createObjectURL(t)}else return!1;return!0}Yt.enabled=Wi.test();function Ypt(){return Wi.test()}function Qpt(){return typeof RTCIceGatherer<"u"?"ORTC":"WebRTC"}function Kpt(e,t){return t=t||{},t.util=t.util||bue,t.navigator=t.navigator||(typeof navigator<"u"?navigator:null),new Promise((r,s)=>{if(!t.navigator)throw new ra("getUserMedia is not supported");switch("function"){case typeof(t.navigator.mediaDevices&&t.navigator.mediaDevices.getUserMedia):return r(t.navigator.mediaDevices.getUserMedia(e));case typeof t.navigator.webkitGetUserMedia:return t.navigator.webkitGetUserMedia(e,r,s);case typeof t.navigator.mozGetUserMedia:return t.navigator.mozGetUserMedia(e,r,s);case typeof t.navigator.getUserMedia:return t.navigator.getUserMedia(e,r,s);default:throw new ra("getUserMedia is not supported")}}).catch(r=>{throw t.util.isFirefox()&&r.name==="NotReadableError"?new ra(`Firefox does not currently support opening multiple audio input trackssimultaneously, even across different tabs.
Related Bugzilla thread: https://bugzilla.mozilla.org/show_bug.cgi?id=1299324`):r})}function Jpt(){if(typeof window!="object")throw new ra("This platform is not supported.");const{crypto:e}=window;if(typeof e!="object")throw new ra("The `crypto` module is not available on this platform.");if(typeof e.getRandomValues!="function")throw new ra("The function `crypto.getRandomValues` is not available on this platform.");if(typeof window.Uint8Array!="function")throw new ra("The `Uint8Array` module is not available on this platform.");return e.getRandomValues(new window.Uint8Array(16)).reduce((t,r)=>`${t}${r.toString(16).padStart(2,"0")}`,"")}function Y5(){return`KX${Jpt()}`}let Zpt=class{constructor(){this._promise=new Promise((t,r)=>{this._resolve=t,this._reject=r})}get promise(){return this._promise}reject(t){this._reject(t)}resolve(t){this._resolve(t)}};class Xpt{constructor(){this._operations=[]}enqueue(t){const r=!!this._operations.length,s=new Zpt;return this._operations.push({deferred:s,callback:t}),r||this._processQueue(),s.promise}_processQueue(){return Fa(this,void 0,void 0,function*(){for(;this._operations.length;){const{deferred:t,callback:r}=this._operations[0];let s,a,i;try{s=yield r(),i=!0}catch(o){a=o}this._operations.shift(),i?t.resolve(s):t.reject(a)}})}}class e0t{get reject(){return this._reject}get resolve(){return this._resolve}constructor(){this.promise=new Promise((t,r)=>{this._resolve=t,this._reject=r})}}class t0t{constructor(){this._eventEmitter=new Mo.EventEmitter}addEventListener(t,r){return this._eventEmitter.addListener(t,r)}dispatchEvent(t,...r){return this._eventEmitter.emit(t,...r)}removeEventListener(t,r){return this._eventEmitter.removeListener(t,r)}}class CB extends t0t{get destination(){return this._destination}get loop(){return this._loop}set loop(t){const r=this;function s(){r._audioNode.removeEventListener("ended",s),r.pause()}!t&&this.loop&&!this.paused&&this._audioNode.addEventListener("ended",s),this._loop=t}get muted(){return this._gainNode.gain.value===0}set muted(t){this._gainNode.gain.value=t?0:1}get paused(){return this._audioNode===null}get src(){return this._src}set src(t){this._load(t)}get srcObject(){return this._audioElement.srcObject}set srcObject(t){this._audioElement.srcObject=t}get sinkId(){return this._sinkId}constructor(t,r={},s={}){super(),this._audioNode=null,this._loop=!1,this._pendingPlayDeferreds=[],this._sinkId="default",this._src="",typeof r!="string"&&(s=r),this._audioContext=t,this._audioElement=new(s.AudioFactory||Audio),this._bufferPromise=this._createPlayDeferred().promise,this._destination=this._audioContext.destination,this._gainNode=this._audioContext.createGain(),this._gainNode.connect(this._destination),this._XMLHttpRequest=s.XMLHttpRequestFactory||XMLHttpRequest,this.addEventListener("canplaythrough",()=>{this._resolvePlayDeferreds()}),typeof r=="string"&&(this.src=r)}load(){this._load(this._src)}pause(){this.paused||(this._audioElement.pause(),this._audioNode.stop(),this._audioNode.disconnect(this._gainNode),this._audioNode=null,this._rejectPlayDeferreds(new Error("The play() request was interrupted by a call to pause().")))}play(){return Fa(this,void 0,void 0,function*(){if(!this.paused){if(yield this._bufferPromise,!this.paused)return;throw new Error("The play() request was interrupted by a call to pause().")}this._audioNode=this._audioContext.createBufferSource(),this._audioNode.loop=this.loop,this._audioNode.addEventListener("ended",()=>{this._audioNode&&this._audioNode.loop||this.dispatchEvent("ended")});const t=yield this._bufferPromise;if(this.paused)throw new Error("The play() request was interrupted by a call to pause().");if(this._audioNode.buffer=t,this._audioNode.connect(this._gainNode),this._audioNode.start(),this._audioElement.srcObject)return this._audioElement.play()})}setSinkId(t){return Fa(this,void 0,void 0,function*(){if(typeof this._audioElement.setSinkId!="function")throw new Error("This browser does not support setSinkId.");if(t!==this.sinkId){if(t==="default"){this.paused||this._gainNode.disconnect(this._destination),this._audioElement.srcObject=null,this._destination=this._audioContext.destination,this._gainNode.connect(this._destination),this._sinkId=t;return}yield this._audioElement.setSinkId(t),!this._audioElement.srcObject&&(this._gainNode.disconnect(this._audioContext.destination),this._destination=this._audioContext.createMediaStreamDestination(),this._audioElement.srcObject=this._destination.stream,this._sinkId=t,this._gainNode.connect(this._destination))}})}_createPlayDeferred(){const t=new e0t;return this._pendingPlayDeferreds.push(t),t}_load(t){this._src&&this._src!==t&&this.pause(),this._src=t,this._bufferPromise=new Promise((r,s)=>Fa(this,void 0,void 0,function*(){if(!t)return this._createPlayDeferred().promise;const a=yield n0t(this._audioContext,this._XMLHttpRequest,t);this.dispatchEvent("canplaythrough"),r(a)}))}_rejectPlayDeferreds(t){const r=this._pendingPlayDeferreds;r.splice(0,r.length).forEach(({reject:s})=>s(t))}_resolvePlayDeferreds(t){const r=this._pendingPlayDeferreds;r.splice(0,r.length).forEach(({resolve:s})=>s(t))}}function n0t(e,t,r){return Fa(this,void 0,void 0,function*(){const s=new t;s.open("GET",r,!0),s.responseType="arraybuffer";const a=yield new Promise(i=>{s.addEventListener("load",i),s.send()});try{return e.decodeAudioData(a.target.response)}catch{return new Promise(o=>{e.decodeAudioData(a.target.response,o)})}})}function od(e,t,r){if(!(this instanceof od))return new od(e,t,r);if(!e||!t)throw new nr("name and url are required arguments");r=Object.assign({AudioFactory:typeof Audio<"u"?Audio:null,maxDuration:0,shouldLoop:!1},r),r.AudioPlayer=r.audioContext?CB.bind(CB,r.audioContext):r.AudioFactory,Object.defineProperties(this,{_Audio:{value:r.AudioPlayer},_activeEls:{value:new Map},_isSinkSupported:{value:r.AudioFactory!==null&&typeof r.AudioFactory.prototype.setSinkId=="function"},_maxDuration:{value:r.maxDuration},_maxDurationTimeout:{value:null,writable:!0},_operations:{value:new Xpt},_playPromise:{value:null,writable:!0},_shouldLoop:{value:r.shouldLoop},_sinkIds:{value:["default"]},isPlaying:{enumerable:!0,get(){return!!this._playPromise}},name:{enumerable:!0,value:e},url:{enumerable:!0,value:t}}),this._Audio&&this._play(!0,!1)}function _ue(e){e&&(e.pause(),e.src="",e.srcObject=null,e.load())}od.prototype._playAudioElement=function(t,r,s){const a=this._activeEls.get(t);if(!a)throw new nr(`sinkId: "${t}" doesn't have an audio element`);return a.muted=!!r,a.loop=!!s,a.play().then(()=>a).catch(i=>{throw _ue(a),this._activeEls.delete(t),i})};od.prototype._play=function(t,r){this.isPlaying&&this._stop(),this._maxDuration>0&&(this._maxDurationTimeout=setTimeout(this._stop.bind(this),this._maxDuration)),r=typeof r=="boolean"?r:this._shouldLoop;const s=this;return this._playPromise=Promise.all(this._sinkIds.map(function(o){if(!s._Audio)return Promise.resolve();let l=s._activeEls.get(o);return l?s._playAudioElement(o,t,r):(l=new s._Audio(s.url),typeof l.setAttribute=="function"&&l.setAttribute("crossorigin","anonymous"),new Promise(c=>{l.addEventListener("canplaythrough",c)}).then(()=>(s._isSinkSupported?l.setSinkId(o):Promise.resolve()).then(function(){return s._activeEls.set(o,l),s._playPromise?s._playAudioElement(o,t,r):Promise.resolve()})))}))};od.prototype._stop=function(){this._activeEls.forEach((t,r)=>{this._sinkIds.includes(r)?(t.pause(),t.currentTime=0):(_ue(t),this._activeEls.delete(r))}),clearTimeout(this._maxDurationTimeout),this._playPromise=null,this._maxDurationTimeout=null};od.prototype.setSinkIds=function(t){this._isSinkSupported&&(t=t.forEach?t:[t],[].splice.apply(this._sinkIds,[0,this._sinkIds.length].concat(t)))};od.prototype.stop=function(){this._operations.enqueue(()=>(this._stop(),Promise.resolve()))};od.prototype.play=function(){return this._operations.enqueue(()=>this._play())};const r0t=3e4,s0t=2e3,a0t="twilio-js-sdk",i0t='Parameter "token" must be of type "string".';class yt extends Mo.EventEmitter{static get audioContext(){return yt._audioContext}static get extension(){const t=typeof document<"u"?document.createElement("audio"):{canPlayType:!1};let r;try{r=t.canPlayType&&!!t.canPlayType("audio/mpeg").replace(/no/,"")}catch{r=!1}let s;try{s=t.canPlayType&&!!t.canPlayType("audio/ogg;codecs='vorbis'").replace(/no/,"")}catch{s=!1}return s&&!r?"ogg":"mp3"}static get isSupported(){return Ypt()}static get packageName(){return gue}static runPreflight(t,r){return new kr(t,Object.assign({audioContext:yt._getOrCreateAudioContext()},r))}static toString(){return"[Twilio.Device class]"}static get version(){return tp}static _getOrCreateAudioContext(){return yt._audioContext||(typeof AudioContext<"u"?yt._audioContext=new AudioContext:typeof webkitAudioContext<"u"&&(yt._audioContext=new webkitAudioContext)),yt._audioContext}constructor(t,r={}){if(super(),this._activeCall=null,this._audio=null,this._audioProcessorEventObserver=null,this._callInputStream=null,this._calls=[],this._callSinkIds=["default"],this._chunderURIs=[],this._defaultOptions={allowIncomingWhileBusy:!1,closeProtection:!1,codecPreferences:[xt.Codec.PCMU,xt.Codec.Opus],dscp:!0,enableImprovedSignalingErrorPrecision:!1,forceAggressiveIceNomination:!1,logLevel:Dv.levels.ERROR,maxCallSignalingTimeoutMs:0,preflight:!1,sounds:{},tokenRefreshMs:1e4,voiceEventSidGenerator:Y5},this._edge=null,this._home=null,this._identity=null,this._log=new Es("Device"),this._makeCallPromise=null,this._options={},this._preferredURI=null,this._publisher=null,this._region=null,this._regTimer=null,this._shouldReRegister=!1,this._soundcache=new Map,this._state=yt.State.Unregistered,this._stateEventMapping={[yt.State.Destroyed]:yt.EventName.Destroyed,[yt.State.Unregistered]:yt.EventName.Unregistered,[yt.State.Registering]:yt.EventName.Registering,[yt.State.Registered]:yt.EventName.Registered},this._stream=null,this._streamConnectedPromise=null,this._tokenWillExpireTimeout=null,this._createDefaultPayload=i=>{const o={aggressive_nomination:this._options.forceAggressiveIceNomination,browser_extension:this._isBrowserExtension,dscp:!!this._options.dscp,ice_restart_enabled:!0,platform:Qpt(),sdk_version:tp};function l(c,d){d&&(o[c]=d)}if(i){const c=i.parameters.CallSid;l("call_sid",/^TJ/.test(c)?void 0:c),l("temp_call_sid",i.outboundConnectionId),l("audio_codec",i.codec),o.direction=i.direction}return l("gateway",this._stream&&this._stream.gateway),l("region",this._stream&&this._stream.region),o},this._onSignalingClose=()=>{this._stream=null,this._streamConnectedPromise=null},this._onSignalingConnected=i=>{var o;const l=Apt(i.region);if(this._edge=i.edge||_pt[l]||i.region,this._region=l||i.region,this._home=i.home,(o=this._publisher)===null||o===void 0||o.setHost(vB(i.home)),i.token&&(this._identity=i.token.identity,typeof i.token.ttl=="number"&&typeof this._options.tokenRefreshMs=="number")){const d=i.token.ttl*1e3,u=Math.max(0,d-this._options.tokenRefreshMs);this._tokenWillExpireTimeout=setTimeout(()=>{this._log.debug("#tokenWillExpire"),this.emit("tokenWillExpire",this),this._tokenWillExpireTimeout&&(clearTimeout(this._tokenWillExpireTimeout),this._tokenWillExpireTimeout=null)},u)}const c=this._getChunderws()||wB(this._edge);if(c.length>0){const[d]=c;this._preferredURI=bB(d)}else this._log.warn("Could not parse a preferred URI from the stream#connected event.");this._shouldReRegister&&this.register()},this._onSignalingError=i=>{if(typeof i!="object"){this._log.warn("Invalid signaling error payload",i);return}const{error:o,callsid:l,voiceeventsid:c}=i;if(typeof o!="object"||c){this._log.warn("Ignoring signaling error payload",{originalError:o,voiceeventsid:c});return}const d=typeof l=="string"&&this._findCall(l)||void 0,{code:u,message:f}=o;let{twilioError:h}=o;if(typeof u=="number")if(u===31201)h=new ks.AuthenticationFailed(o);else if(u===31204)h=new ks.AccessTokenInvalid(o);else if(u===31205)this._stopRegistrationTimer(),h=new ks.AccessTokenExpired(o);else{const m=U5(!!this._options.enableImprovedSignalingErrorPrecision,u);typeof m<"u"&&(h=new m(o))}h||(this._log.error("Unknown signaling error: ",o),h=new ma.UnknownError(f,o)),this._log.error("Received error: ",h),this._log.debug("#error",o),this.emit(yt.EventName.Error,h,d)},this._onSignalingInvite=i=>Fa(this,void 0,void 0,function*(){var o;const l=!!this._activeCall;if(l&&!this._options.allowIncomingWhileBusy){this._log.info("Device busy; ignoring incoming invite");return}if(!i.callsid||!i.sdp){this._log.debug("#error",i),this.emit(yt.EventName.Error,new Cf.BadRequest("Malformed invite from gateway"));return}const c=i.parameters||{};c.CallSid=c.CallSid||i.callsid;const d=Object.assign({},yue(c.Params));this._makeCallPromise=this._makeCall(d,{callParameters:c,enableImprovedSignalingErrorPrecision:!!this._options.enableImprovedSignalingErrorPrecision,offerSdp:i.sdp,reconnectToken:i.reconnect,voiceEventSidGenerator:this._options.voiceEventSidGenerator});let u;try{u=yield this._makeCallPromise}finally{this._makeCallPromise=null}this._calls.push(u),u.once("accept",()=>{this._soundcache.get(yt.SoundName.Incoming).stop(),this._publishNetworkChange()});const f=!((o=this._audio)===null||o===void 0)&&o.incoming()&&!l?()=>this._soundcache.get(yt.SoundName.Incoming).play():()=>Promise.resolve();this._showIncomingCall(u,f)}),this._onSignalingOffline=()=>{this._log.info("Stream is offline"),this._edge=null,this._region=null,this._shouldReRegister=this.state!==yt.State.Unregistered,this._setState(yt.State.Unregistered)},this._onSignalingReady=()=>{this._log.info("Stream is ready"),this._setState(yt.State.Registered)},this._publishNetworkChange=()=>{this._activeCall&&this._networkInformation&&this._publisher.info("network-information","network-change",{connection_type:this._networkInformation.type,downlink:this._networkInformation.downlink,downlinkMax:this._networkInformation.downlinkMax,effective_type:this._networkInformation.effectiveType,rtt:this._networkInformation.rtt},this._activeCall)},this._updateInputStream=i=>{const o=this._activeCall;return o&&!i?Promise.reject(new zo("Cannot unset input device while a call is in progress.")):(this._callInputStream=i,o?o._setInputTracksFromStream(i):Promise.resolve())},this._updateSinkIds=(i,o)=>(i==="ringtone"?this._updateRingtoneSinkIds(o):this._updateSpeakerSinkIds(o)).then(()=>{this._publisher.info("audio",`${i}-devices-set`,{audio_device_ids:o},this._activeCall)},c=>{throw this._publisher.error("audio",`${i}-devices-set-failed`,{audio_device_ids:o,message:c.message},this._activeCall),c}),this._setupLoglevel(r.logLevel),this._logOptions("constructor",r),this.updateToken(t),J3())throw new ra("Microsoft Edge Legacy (https://support.microsoft.com/en-us/help/4533505/what-is-microsoft-edge-legacy) is deprecated and will not be able to connect to Twilio to make or receive calls after September 1st, 2020. Please see this documentation for a list of supported browsers https://www.twilio.com/docs/voice/client/javascript#supported-browsers");if(!yt.isSupported&&r.ignoreBrowserSupport)throw window&&window.location&&window.location.protocol==="http:"?new ra("twilio.js wasn't able to find WebRTC browser support.           This is most likely because this page is served over http rather than https,           which does not support WebRTC in many browsers. Please load this page over https and           try again."):new ra("twilio.js 1.3+ SDKs require WebRTC browser support.         For more information, see <https://www.twilio.com/docs/api/client/twilio-js>.         If you have any questions about this announcement, please contact         Twilio Support at <help@twilio.com>.");const s=globalThis,a=s.msBrowser||s.browser||s.chrome;if(this._isBrowserExtension=!!a&&!!a.runtime&&!!a.runtime.id||!!s.safari&&!!s.safari.extension,this._isBrowserExtension&&this._log.info("Running as browser extension."),navigator){const i=navigator;this._networkInformation=i.connection||i.mozConnection||i.webkitConnection}this._networkInformation&&typeof this._networkInformation.addEventListener=="function"&&this._networkInformation.addEventListener("change",this._publishNetworkChange),yt._getOrCreateAudioContext(),yt._audioContext&&(yt._dialtonePlayer||(yt._dialtonePlayer=new tpt(yt._audioContext))),this._boundDestroy=this.destroy.bind(this),this._boundConfirmClose=this._confirmClose.bind(this),typeof window<"u"&&window.addEventListener&&(window.addEventListener("unload",this._boundDestroy),window.addEventListener("pagehide",this._boundDestroy)),this.updateOptions(r)}get audio(){return this._audio}connect(){return Fa(this,arguments,void 0,function*(t={}){if(this._log.debug(".connect",JSON.stringify(t)),this._throwIfDestroyed(),this._activeCall)throw new zo("A Call is already active");let r,s,a;if(t.connectToken){try{const d=JSON.parse(decodeURIComponent(atob(t.connectToken)));r=d.customParameters,s=d.parameters,a=d.signalingReconnectToken}catch{throw new nr("Cannot parse connectToken")}if(!s||!s.CallSid||!a)throw new nr("Invalid connectToken")}let i=!1,o={};const l={enableImprovedSignalingErrorPrecision:!!this._options.enableImprovedSignalingErrorPrecision,rtcConfiguration:t.rtcConfiguration,voiceEventSidGenerator:this._options.voiceEventSidGenerator};a&&s?(i=!0,l.callParameters=s,l.reconnectCallSid=s.CallSid,l.reconnectToken=a,o=r||o):o=t.params||o;let c;this._makeCallPromise=this._makeCall(o,l,i);try{c=this._activeCall=yield this._makeCallPromise}finally{this._makeCallPromise=null}return this._calls.splice(0).forEach(d=>d.ignore()),this._soundcache.get(yt.SoundName.Incoming).stop(),c.accept({rtcConstraints:t.rtcConstraints}),this._publishNetworkChange(),c})}get calls(){return this._calls}destroy(){var t;this._log.debug(".destroy"),this._log.debug("Rejecting any incoming calls"),this._calls.slice(0).forEach(s=>s.reject()),this.disconnectAll(),this._stopRegistrationTimer(),this._destroyStream(),this._destroyAudioHelper(),(t=this._audioProcessorEventObserver)===null||t===void 0||t.destroy(),this._destroyPublisher(),this._networkInformation&&typeof this._networkInformation.removeEventListener=="function"&&this._networkInformation.removeEventListener("change",this._publishNetworkChange),typeof window<"u"&&window.removeEventListener&&(window.removeEventListener("beforeunload",this._boundConfirmClose),window.removeEventListener("unload",this._boundDestroy),window.removeEventListener("pagehide",this._boundDestroy)),this._setState(yt.State.Destroyed),Mo.EventEmitter.prototype.removeAllListeners.call(this)}disconnectAll(){this._log.debug(".disconnectAll"),this._calls.splice(0).forEach(r=>r.disconnect()),this._activeCall&&this._activeCall.disconnect()}get edge(){return this._edge}get home(){return this._home}get identity(){return this._identity}get isBusy(){return!!this._activeCall}register(){return Fa(this,void 0,void 0,function*(){if(this._log.debug(".register"),this.state!==yt.State.Unregistered)throw new zo(`Attempt to register when device is in state "${this.state}". Must be "${yt.State.Unregistered}".`);this._shouldReRegister=!1,this._setState(yt.State.Registering),yield this._streamConnectedPromise||this._setupStream(),yield this._sendPresence(!0),yield H5(this,yt.State.Registered,yt.State.Unregistered)})}get state(){return this._state}get token(){return this._token}toString(){return"[Twilio.Device instance]"}unregister(){return Fa(this,void 0,void 0,function*(){if(this._log.debug(".unregister"),this.state!==yt.State.Registered)throw new zo(`Attempt to unregister when device is in state "${this.state}". Must be "${yt.State.Registered}".`);this._shouldReRegister=!1;const t=yield this._streamConnectedPromise,r=new Promise(s=>{t.on("offline",s)});yield this._sendPresence(!1),yield r})}updateOptions(t={}){if(this._logOptions("updateOptions",t),this.state===yt.State.Destroyed)throw new zo(`Attempt to "updateOptions" when device is in state "${this.state}".`);this._options=Object.assign(Object.assign(Object.assign({},this._defaultOptions),this._options),t);const r=new Set(this._chunderURIs),s=this._chunderURIs=(this._getChunderws()||wB(this._options.edge)).map(bB);let a=r.size!==s.length;if(!a){for(const i of s)if(!r.has(i)){a=!0;break}}if(this.isBusy&&a)throw new zo("Cannot change Edge while on an active Call");this._setupLoglevel(this._options.logLevel);for(const i of Object.keys(yt._defaultSounds)){const o=yt._defaultSounds[i],l=`${h9}/${o.filename}.${yt.extension}?cache=${tp}`,c=this._options.sounds&&this._options.sounds[i]||l,d=new(this._options.Sound||od)(i,c,{audioContext:this._options.disableAudioContextSounds?null:yt.audioContext,maxDuration:o.maxDuration,shouldLoop:o.shouldLoop});this._soundcache.set(i,d)}this._setupAudioHelper(),this._setupPublisher(),a&&this._streamConnectedPromise&&this._setupStream(),typeof window<"u"&&typeof window.addEventListener=="function"&&this._options.closeProtection&&(window.removeEventListener("beforeunload",this._boundConfirmClose),window.addEventListener("beforeunload",this._boundConfirmClose))}updateToken(t){if(this._log.debug(".updateToken"),this.state===yt.State.Destroyed)throw new zo(`Attempt to "updateToken" when device is in state "${this.state}".`);if(typeof t!="string")throw new nr(i0t);this._token=t,this._stream&&this._stream.setToken(this._token),this._publisher&&this._publisher.setToken(this._token)}_confirmClose(t){if(!this._activeCall)return"";const r=this._options.closeProtection||!1,s=typeof r!="string"?"A call is currently in-progress. Leaving or reloading this page will end the call.":r;return(t||window.event).returnValue=s,s}_destroyAudioHelper(){this._audio&&(this._audio._destroy(),this._audio=null)}_destroyPublisher(){this._publisher&&(this._publisher=null)}_destroyStream(){this._stream&&(this._stream.removeListener("close",this._onSignalingClose),this._stream.removeListener("connected",this._onSignalingConnected),this._stream.removeListener("error",this._onSignalingError),this._stream.removeListener("invite",this._onSignalingInvite),this._stream.removeListener("offline",this._onSignalingOffline),this._stream.removeListener("ready",this._onSignalingReady),this._stream.destroy(),this._stream=null),this._onSignalingOffline(),this._streamConnectedPromise=null}_findCall(t){return this._calls.find(r=>r.parameters.CallSid===t||r.outboundConnectionId===t)||null}_getChunderws(){return typeof this._options.chunderw=="string"?[this._options.chunderw]:Array.isArray(this._options.chunderw)?this._options.chunderw:null}_logOptions(t,r={}){const s=["allowIncomingWhileBusy","appName","appVersion","closeProtection","codecPreferences","disableAudioContextSounds","dscp","edge","enableImprovedSignalingErrorPrecision","forceAggressiveIceNomination","logLevel","maxAverageBitrate","maxCallSignalingTimeoutMs","sounds","tokenRefreshMs"],a=["RTCPeerConnection","enumerateDevices","getUserMedia","MediaStream"];if(typeof r=="object"){const i=Object.assign({},r);Object.keys(i).forEach(o=>{!s.includes(o)&&!a.includes(o)&&delete i[o],a.includes(o)&&(i[o]=!0)}),this._log.debug(`.${t}`,JSON.stringify(i))}}_makeCall(t,r){return Fa(this,arguments,void 0,function*(s,a,i=!1){var o;const l=(o=this._audio)===null||o===void 0?void 0:o._getInputDevicePromise();l&&(this._log.debug("inputDevicePromise detected, waiting..."),yield l,this._log.debug("inputDevicePromise resolved"));const c={audioHelper:this._audio,onIgnore:()=>{this._soundcache.get(yt.SoundName.Incoming).stop()},pstream:yield this._streamConnectedPromise||this._setupStream(),publisher:this._publisher,soundcache:this._soundcache};a=Object.assign({MediaStream:this._options.MediaStream,RTCPeerConnection:this._options.RTCPeerConnection,beforeAccept:f=>{!this._activeCall||this._activeCall===f||(this._activeCall.disconnect(),this._removeCall(this._activeCall))},codecPreferences:this._options.codecPreferences,customSounds:this._options.sounds,dialtonePlayer:yt._dialtonePlayer,dscp:this._options.dscp,forceAggressiveIceNomination:this._options.forceAggressiveIceNomination,getInputStream:()=>this._options.fileInputStream||this._callInputStream,getSinkIds:()=>this._callSinkIds,maxAverageBitrate:this._options.maxAverageBitrate,preflight:this._options.preflight,rtcConstraints:this._options.rtcConstraints,shouldPlayDisconnect:()=>{var f;return(f=this._audio)===null||f===void 0?void 0:f.disconnect()},twimlParams:s,voiceEventSidGenerator:this._options.voiceEventSidGenerator},a);const d=()=>{if(!this._stream){this._log.warn("UnsetPreferredUri called without a stream");return}this._activeCall===null&&this._calls.length===0&&this._stream.updatePreferredURI(null)},u=new(this._options.Call||xt)(c,a);return this._publisher.info("settings","init",{MediaStream:!!this._options.MediaStream,RTCPeerConnection:!!this._options.RTCPeerConnection,enumerateDevices:!!this._options.enumerateDevices,getUserMedia:!!this._options.getUserMedia},u),u.once("accept",()=>{var f,h,m;this._stream.updatePreferredURI(this._preferredURI),this._removeCall(u),this._activeCall=u,this._audio&&this._audio._maybeStartPollingVolume(),u.direction===xt.CallDirection.Outgoing&&(!((f=this._audio)===null||f===void 0)&&f.outgoing())&&!i&&this._soundcache.get(yt.SoundName.Outgoing).play();const g={edge:this._edge||this._region};this._options.edge&&(g.selected_edge=Array.isArray(this._options.edge)?this._options.edge:[this._options.edge]),this._publisher.info("settings","edge",g,u),!((h=this._audio)===null||h===void 0)&&h.processedStream&&((m=this._audioProcessorEventObserver)===null||m===void 0||m.emit("enabled"))}),u.addListener("error",f=>{u.status()==="closed"&&(this._removeCall(u),d()),this._audio&&this._audio._maybeStopPollingVolume(),this._maybeStopIncomingSound()}),u.once("cancel",()=>{this._log.info(`Canceled: ${u.parameters.CallSid}`),this._removeCall(u),d(),this._audio&&this._audio._maybeStopPollingVolume(),this._maybeStopIncomingSound()}),u.once("disconnect",()=>{this._audio&&this._audio._maybeStopPollingVolume(),this._removeCall(u),d(),this._maybeStopIncomingSound()}),u.once("reject",()=>{this._log.info(`Rejected: ${u.parameters.CallSid}`),this._audio&&this._audio._maybeStopPollingVolume(),this._removeCall(u),d(),this._maybeStopIncomingSound()}),u.on("transportClose",()=>{u.status()===xt.State.Pending&&(this._audio&&this._audio._maybeStopPollingVolume(),this._removeCall(u),this._maybeStopIncomingSound())}),u})}_maybeStopIncomingSound(){this._calls.length||this._soundcache.get(yt.SoundName.Incoming).stop()}_removeCall(t){this._activeCall===t&&(this._activeCall=null,this._makeCallPromise=null);for(let r=this._calls.length-1;r>=0;r--)t===this._calls[r]&&this._calls.splice(r,1)}_sendPresence(t){return Fa(this,void 0,void 0,function*(){const r=yield this._streamConnectedPromise;r&&(r.register({audio:t}),t?this._startRegistrationTimer():this._stopRegistrationTimer())})}_setState(t){if(t===this.state)return;this._state=t;const r=this._stateEventMapping[t];this._log.debug(`#${r}`),this.emit(r)}_setupAudioHelper(){this._audioProcessorEventObserver||(this._audioProcessorEventObserver=new Xmt,this._audioProcessorEventObserver.on("event",({name:r,group:s})=>{this._publisher.info(s,r,{},this._activeCall)}));const t={audioContext:yt.audioContext,audioProcessorEventObserver:this._audioProcessorEventObserver,beforeSetInputDevice:()=>this._makeCallPromise?(this._log.debug("beforeSetInputDevice pause detected"),this._makeCallPromise):(this._log.debug("beforeSetInputDevice pause not detected, setting default"),Promise.resolve()),enumerateDevices:this._options.enumerateDevices,getUserMedia:this._options.getUserMedia||Kpt};if(this._audio){this._log.info("Found existing audio helper; updating options..."),this._audio._updateUserOptions(t);return}this._audio=new(this._options.AudioHelper||Zmt)(this._updateSinkIds,this._updateInputStream,t),this._audio.on("deviceChange",r=>{const s=this._activeCall,a=r.map(i=>i.deviceId);this._publisher.info("audio","device-change",{lost_active_device_ids:a},s),s&&s._mediaHandler._onInputDevicesChanged()})}_setupLoglevel(t){const r=typeof t=="number"||typeof t=="string"?t:Dv.levels.ERROR;this._log.setDefaultLevel(r),this._log.info("Set logger default level to",r)}_setupPublisher(){this._publisher&&(this._log.info("Found existing publisher; destroying..."),this._destroyPublisher());const t={defaultPayload:this._createDefaultPayload,metadata:{app_name:this._options.appName,app_version:this._options.appVersion}};return this._options.eventgw&&(t.host=this._options.eventgw),this._home&&(t.host=vB(this._home)),this._publisher=new(this._options.Publisher||Ja)(a0t,this.token,t),this._options.publishEvents===!1?this._publisher.disable():this._publisher.on("error",r=>{this._log.warn("Cannot connect to insights.",r)}),this._publisher}_setupStream(){return this._stream&&(this._log.info("Found existing stream; destroying..."),this._destroyStream()),this._log.info("Setting up VSP"),this._stream=new(this._options.PStream||mr)(this.token,this._chunderURIs,{backoffMaxMs:this._options.backoffMaxMs,maxPreferredDurationMs:this._options.maxCallSignalingTimeoutMs}),this._stream.addListener("close",this._onSignalingClose),this._stream.addListener("connected",this._onSignalingConnected),this._stream.addListener("error",this._onSignalingError),this._stream.addListener("invite",this._onSignalingInvite),this._stream.addListener("offline",this._onSignalingOffline),this._stream.addListener("ready",this._onSignalingReady),this._streamConnectedPromise=H5(this._stream,"connected","close").then(()=>this._stream)}_showIncomingCall(t,r){let s;return Promise.race([r(),new Promise((a,i)=>{s=setTimeout(()=>{const o="Playing incoming ringtone took too long; it might not play. Continuing execution...";i(new Error(o))},s0t)})]).catch(a=>{this._log.warn(a.message)}).then(()=>{clearTimeout(s),this._log.debug("#incoming",JSON.stringify({customParameters:t.customParameters,parameters:t.parameters})),this.emit(yt.EventName.Incoming,t)})}_startRegistrationTimer(){this._stopRegistrationTimer(),this._regTimer=setTimeout(()=>{this._sendPresence(!0)},r0t)}_stopRegistrationTimer(){this._regTimer&&clearTimeout(this._regTimer)}_throwIfDestroyed(){if(this.state===yt.State.Destroyed)throw new zo("Device has been destroyed.")}_updateRingtoneSinkIds(t){return Promise.resolve(this._soundcache.get(yt.SoundName.Incoming).setSinkIds(t))}_updateSpeakerSinkIds(t){Array.from(this._soundcache.entries()).filter(s=>s[0]!==yt.SoundName.Incoming).forEach(s=>s[1].setSinkIds(t)),this._callSinkIds=t;const r=this._activeCall;return r?r._setSinkIds(t):Promise.resolve()}}yt._defaultSounds={disconnect:{filename:"disconnect",maxDuration:3e3},dtmf0:{filename:"dtmf-0",maxDuration:1e3},dtmf1:{filename:"dtmf-1",maxDuration:1e3},dtmf2:{filename:"dtmf-2",maxDuration:1e3},dtmf3:{filename:"dtmf-3",maxDuration:1e3},dtmf4:{filename:"dtmf-4",maxDuration:1e3},dtmf5:{filename:"dtmf-5",maxDuration:1e3},dtmf6:{filename:"dtmf-6",maxDuration:1e3},dtmf7:{filename:"dtmf-7",maxDuration:1e3},dtmf8:{filename:"dtmf-8",maxDuration:1e3},dtmf9:{filename:"dtmf-9",maxDuration:1e3},dtmfh:{filename:"dtmf-hash",maxDuration:1e3},dtmfs:{filename:"dtmf-star",maxDuration:1e3},incoming:{filename:"incoming",shouldLoop:!0},outgoing:{filename:"outgoing",maxDuration:3e3}};(function(e){(function(t){t.Error="error",t.Incoming="incoming",t.Destroyed="destroyed",t.Unregistered="unregistered",t.Registering="registering",t.Registered="registered",t.TokenWillExpire="tokenWillExpire"})(e.EventName||(e.EventName={})),function(t){t.Destroyed="destroyed",t.Unregistered="unregistered",t.Registering="registering",t.Registered="registered"}(e.State||(e.State={})),function(t){t.Incoming="incoming",t.Outgoing="outgoing",t.Disconnect="disconnect",t.Dtmf0="dtmf0",t.Dtmf1="dtmf1",t.Dtmf2="dtmf2",t.Dtmf3="dtmf3",t.Dtmf4="dtmf4",t.Dtmf5="dtmf5",t.Dtmf6="dtmf6",t.Dtmf7="dtmf7",t.Dtmf8="dtmf8",t.Dtmf9="dtmf9",t.DtmfS="dtmfs",t.DtmfH="dtmfh"}(e.SoundName||(e.SoundName={}))})(yt||(yt={}));class yk{constructor(t,r=!1){this.deleted=!1;let s;const a=t.candidate.split("network-cost ");a[1]&&(s=parseInt(a[1],10)),this.candidateType=t.type,this.ip=t.ip||t.address,this.isRemote=r,this.networkCost=s,this.port=t.port,this.priority=t.priority,this.protocol=t.protocol,this.relatedAddress=t.relatedAddress,this.relatedPort=t.relatedPort,this.tcpType=t.tcpType,this.transportId=t.sdpMid}toPayload(){return{candidate_type:this.candidateType,deleted:this.deleted,ip:this.ip,is_remote:this.isRemote,"network-cost":this.networkCost,port:this.port,priority:this.priority,protocol:this.protocol,related_address:this.relatedAddress,related_port:this.relatedPort,tcp_type:this.tcpType,transport_id:this.transportId}}}const kB=94.768;function o0t(e,t,r){if(typeof e!="number"||typeof t!="number"||typeof r!="number"||!Bw(e)||!Bw(t)||!Bw(r))return null;const s=e+t*2+10;let a=0;switch(!0){case s<160:a=kB-s/40;break;case s<1e3:a=kB-(s-120)/10;break}switch(!0){case r<=a/2.5:a=Math.max(a-r*2.5,6.52);break;default:a=0;break}return 1+.035*a+7e-6*a*(a-60)*(100-a)}function Bw(e){return typeof e=="number"&&!isNaN(e)&&isFinite(e)&&e>=0}var l0t={calculate:o0t,isNonNegativeNumber:Bw};const c0t=5,d0t=0,u0t=3,f0t=1e3,h0t=5*1e3,m0t={audioInputLevel:{minStandardDeviation:327.67,sampleCount:10},audioOutputLevel:{minStandardDeviation:327.67,sampleCount:10},bytesReceived:{clearCount:2,min:1,raiseCount:3,sampleCount:3},bytesSent:{clearCount:2,min:1,raiseCount:3,sampleCount:3},jitter:{max:30},mos:{min:3},packetsLostFraction:[{max:1},{clearValue:1,maxAverage:3,sampleCount:7}],rtt:{max:400}};function p0t(e,t){return t.reduce((r,s)=>r+=s>e?1:0,0)}function g0t(e,t){return t.reduce((r,s)=>r+=s<e?1:0,0)}function x0t(e){if(e.length<=0)return null;const t=e.reduce((a,i)=>a+i,0)/e.length,r=e.map(a=>Math.pow(a-t,2));return Math.sqrt(r.reduce((a,i)=>a+i,0)/r.length)}function y0t(e){return e.reduce((t,r)=>[...t,...r],[])}class v0t extends Mo.EventEmitter{constructor(t){super(),this._activeWarnings=new Map,this._currentStreaks=new Map,this._inputVolumes=[],this._outputVolumes=[],this._sampleBuffer=[],this._supplementalSampleBuffers={audioInputLevel:[],audioOutputLevel:[]},this._warningsEnabled=!0,t=t||{},this._getRTCStats=t.getRTCStats||mpt,this._mos=t.Mos||l0t,this._peerConnection=t.peerConnection,this._thresholds=Object.assign(Object.assign({},m0t),t.thresholds);const r=Object.values(this._thresholds).map(s=>s.sampleCount).filter(s=>!!s);this._maxSampleCount=Math.max(c0t,...r),this._peerConnection&&this.enable(this._peerConnection)}addVolumes(t,r){this._inputVolumes.push(t),this._outputVolumes.push(r)}disable(){return this._sampleInterval&&(clearInterval(this._sampleInterval),delete this._sampleInterval),this}disableWarnings(){return this._warningsEnabled&&this._activeWarnings.clear(),this._warningsEnabled=!1,this}enable(t){if(t){if(this._peerConnection&&t!==this._peerConnection)throw new nr("Attempted to replace an existing PeerConnection in StatsMonitor.enable");this._peerConnection=t}if(!this._peerConnection)throw new nr("Can not enable StatsMonitor without a PeerConnection");return this._sampleInterval=this._sampleInterval||setInterval(this._fetchSample.bind(this),f0t),this}enableWarnings(){return this._warningsEnabled=!0,this}hasActiveWarning(t,r){const s=`${t}:${r}`;return!!this._activeWarnings.get(s)}_addSample(t){const r=this._sampleBuffer;r.push(t),r.length>this._maxSampleCount&&r.splice(0,r.length-this._maxSampleCount)}_clearWarning(t,r,s){const a=`${t}:${r}`,i=this._activeWarnings.get(a);!i||Date.now()-i.timeRaised<h0t||(this._activeWarnings.delete(a),this.emit("warning-cleared",Object.assign(Object.assign({},s),{name:t,threshold:{name:r,value:this._thresholds[t][r]}})))}_createSample(t,r){const s=r&&r.totals.bytesSent||0,a=r&&r.totals.bytesReceived||0,i=r&&r.totals.packetsSent||0,o=r&&r.totals.packetsReceived||0,l=r&&r.totals.packetsLost||0,c=t.bytesSent-s,d=t.bytesReceived-a,u=t.packetsSent-i,f=t.packetsReceived-o,h=t.packetsLost-l,m=f+h,g=m>0?h/m*100:0,x=t.packetsReceived+t.packetsLost,y=x>0?t.packetsLost/x*100:100,v=typeof t.rtt=="number"||!r?t.rtt:r.rtt,b=this._inputVolumes.splice(0);this._supplementalSampleBuffers.audioInputLevel.push(b);const w=this._outputVolumes.splice(0);return this._supplementalSampleBuffers.audioOutputLevel.push(w),{audioInputLevel:Math.round(Hx(b)),audioOutputLevel:Math.round(Hx(w)),bytesReceived:d,bytesSent:c,codecName:t.codecName,jitter:t.jitter,mos:this._mos.calculate(v,t.jitter,r&&g),packetsLost:h,packetsLostFraction:g,packetsReceived:f,packetsSent:u,rtt:v,timestamp:t.timestamp,totals:{bytesReceived:t.bytesReceived,bytesSent:t.bytesSent,packetsLost:t.packetsLost,packetsLostFraction:y,packetsReceived:t.packetsReceived,packetsSent:t.packetsSent}}}_fetchSample(){this._getSample().then(t=>{this._addSample(t),this._raiseWarnings(),this.emit("sample",t)}).catch(t=>{this.disable(),this.emit("error",t)})}_getSample(){return this._getRTCStats(this._peerConnection).then(t=>{let r=null;return this._sampleBuffer.length&&(r=this._sampleBuffer[this._sampleBuffer.length-1]),this._createSample(t,r)})}_raiseWarning(t,r,s){const a=`${t}:${r}`;if(this._activeWarnings.has(a))return;this._activeWarnings.set(a,{timeRaised:Date.now()});const i=this._thresholds[t];let o;if(Array.isArray(i)){const l=i.find(c=>r in c);l&&(o=l[r])}else o=this._thresholds[t][r];this.emit("warning",Object.assign(Object.assign({},s),{name:t,threshold:{name:r,value:o}}))}_raiseWarnings(){this._warningsEnabled&&Object.keys(this._thresholds).forEach(t=>this._raiseWarningsForStat(t))}_raiseWarningsForStat(t){(Array.isArray(this._thresholds[t])?this._thresholds[t]:[this._thresholds[t]]).forEach(s=>{const a=this._sampleBuffer,i=s.clearCount||d0t,o=s.raiseCount||u0t,l=s.sampleCount||this._maxSampleCount;let c=a.slice(-l);const d=c.map(h=>h[t]);if(d.some(h=>typeof h>"u"||h===null))return;let f;if(typeof s.max=="number"&&(f=p0t(s.max,d),f>=o?this._raiseWarning(t,"max",{values:d,samples:c}):f<=i&&this._clearWarning(t,"max",{values:d,samples:c})),typeof s.min=="number"&&(f=g0t(s.min,d),f>=o?this._raiseWarning(t,"min",{values:d,samples:c}):f<=i&&this._clearWarning(t,"min",{values:d,samples:c})),typeof s.maxDuration=="number"&&a.length>1){c=a.slice(-2);const h=c[0][t],m=c[1][t],g=this._currentStreaks.get(t)||0,x=h===m?g+1:0;this._currentStreaks.set(t,x),x>=s.maxDuration?this._raiseWarning(t,"maxDuration",{value:x}):x===0&&this._clearWarning(t,"maxDuration",{value:g})}if(typeof s.minStandardDeviation=="number"){const h=this._supplementalSampleBuffers[t];if(!h||h.length<s.sampleCount)return;h.length>s.sampleCount&&h.splice(0,h.length-s.sampleCount);const m=y0t(h.slice(-l)),g=x0t(m);if(typeof g!="number")return;g<s.minStandardDeviation?this._raiseWarning(t,"minStandardDeviation",{value:g}):this._clearWarning(t,"minStandardDeviation",{value:g})}[["maxAverage",(h,m)=>h>m],["minAverage",(h,m)=>h<m]].forEach(([h,m])=>{if(typeof s[h]=="number"&&d.length>=l){const g=Hx(d);m(g,s[h])?this._raiseWarning(t,h,{values:d,samples:c}):m(g,s.clearValue||s[h])||this._clearWarning(t,h,{values:d,samples:c})}})})}}const MB={factor:1.1,jitter:.5,max:3e4,min:1},b0t=70,w0t=500,j0t=160,N0t=10,S0t=5e3,_B={disconnect:!0,info:{code:31003,message:"Connection with Twilio was interrupted.",twilioError:new Yl.ConnectionError}},PB={packetsLostFraction:{max:"packet-loss",maxAverage:"packets-lost-fraction"}},TB={audioInputLevel:"audio-input-level",audioOutputLevel:"audio-output-level",bytesReceived:"bytes-received",bytesSent:"bytes-sent",jitter:"jitter",mos:"mos",rtt:"rtt"},C0t={max:"high-",maxAverage:"high-",maxDuration:"constant-",min:"low-",minStandardDeviation:"constant-"};class xt extends Mo.EventEmitter{get direction(){return this._direction}get codec(){return this._codec}get connectToken(){const t=this._signalingReconnectToken,r=this.parameters&&this.parameters.CallSid?this.parameters.CallSid:void 0;if(!t||!r)return;const s=this.customParameters&&typeof this.customParameters.keys=="function"?Array.from(this.customParameters.keys()).reduce((i,o)=>(i[o]=this.customParameters.get(o),i),{}):{},a=this.parameters||{};return btoa(encodeURIComponent(JSON.stringify({customParameters:s,parameters:a,signalingReconnectToken:t})))}constructor(t,r){super(),this.parameters={},this._inputVolumeStreak=0,this._isAnswered=!1,this._isCancelled=!1,this._isRejected=!1,this._latestInputVolume=0,this._latestOutputVolume=0,this._log=new Es("Call"),this._mediaStatus=xt.State.Pending,this._messages=new Map,this._metricsSamples=[],this._options={MediaHandler:Yt,MediaStream:null,enableImprovedSignalingErrorPrecision:!1,offerSdp:null,shouldPlayDisconnect:()=>!0,voiceEventSidGenerator:Y5},this._outputVolumeStreak=0,this._shouldSendHangup=!0,this._signalingStatus=xt.State.Pending,this._soundcache=new Map,this._status=xt.State.Pending,this._wasConnected=!1,this.toString=()=>"[Twilio.Call instance]",this._emitWarning=(o,l,c,d,u,f)=>{const m=`${o}warning${u?"-cleared":"-raised"}`;if(l==="constant-audio-input-level"&&this.isMuted())return;let g=u?"info":"warning";l==="constant-audio-output-level"&&(g="info");const x={threshold:c};if(d&&(d instanceof Array?x.values=d.map(y=>typeof y=="number"?Math.round(y*100)/100:d):x.value=d),this._publisher.post(g,m,l,{data:x},this),l!=="constant-audio-output-level"){const y=u?"warning-cleared":"warning";this._log.debug(`#${y}`,l),this.emit(y,l,f&&!u?f:null)}},this._onAck=o=>{const{acktype:l,callsid:c,voiceeventsid:d}=o;if(this.parameters.CallSid!==c){this._log.warn(`Received ack from a different callsid: ${c}`);return}l==="message"&&this._onMessageSent(d)},this._onAnswer=o=>{typeof o.reconnect=="string"&&(this._signalingReconnectToken=o.reconnect),!(this._isAnswered&&this._status!==xt.State.Reconnecting)&&(this._setCallSid(o),this._isAnswered=!0,this._maybeTransitionToOpen())},this._onCancel=o=>{const l=o.callsid;this.parameters.CallSid===l&&(this._isCancelled=!0,this._publisher.info("connection","cancel",null,this),this._cleanupEventListeners(),this._mediaHandler.close(),this._status=xt.State.Closed,this._log.debug("#cancel"),this.emit("cancel"),this._pstream.removeListener("cancel",this._onCancel))},this._onConnected=()=>{this._log.info("Received connected from pstream"),this._signalingReconnectToken&&this._mediaHandler.version&&this._pstream.reconnect(this._mediaHandler.version.getSDP(),this.parameters.CallSid,this._signalingReconnectToken)},this._onHangup=o=>{if(this.status()!==xt.State.Closed){if(o.callsid&&(this.parameters.CallSid||this.outboundConnectionId)){if(o.callsid!==this.parameters.CallSid&&o.callsid!==this.outboundConnectionId)return}else if(o.callsid)return;if(this._log.info("Received HANGUP from gateway"),o.error){const l=o.error.code,c=U5(this._options.enableImprovedSignalingErrorPrecision,l),d=typeof c<"u"?new c(o.error.message):new ma.ConnectionError("Error sent from gateway in HANGUP",o.error);this._log.error("Received an error from the gateway:",d),this._log.debug("#error",d),this.emit("error",d)}this._shouldSendHangup=!1,this._publisher.info("connection","disconnected-by-remote",null,this),this._disconnect(null,!0),this._cleanupEventListeners()}},this._onMediaFailure=o=>{const{ConnectionDisconnected:l,ConnectionFailed:c,IceGatheringFailed:d,LowBytes:u}=xt.MediaFailure,f=o===c||o===d;if(!p9(window,window.navigator)&&o===c)return this._mediaHandler.onerror(_B);if(this._mediaStatus===xt.State.Reconnecting){if(f){if(Date.now()-this._mediaReconnectStartTime>MB.max)return this._log.warn("Exceeded max ICE retries"),this._mediaHandler.onerror(_B);try{this._mediaReconnectBackoff.backoff()}catch(x){if(!(x.message&&x.message==="Backoff in progress."))throw x}}return}const h=this._mediaHandler.version.pc,m=h&&h.iceConnectionState==="disconnected",g=this._monitor.hasActiveWarning("bytesSent","min")||this._monitor.hasActiveWarning("bytesReceived","min");if(o===u&&m||o===l&&g||f){const x=new Yl.ConnectionError("Media connection failed.");this._log.warn("ICE Connection disconnected."),this._publisher.warn("connection","error",x,this),this._publisher.info("connection","reconnecting",null,this),this._mediaReconnectStartTime=Date.now(),this._status=xt.State.Reconnecting,this._mediaStatus=xt.State.Reconnecting,this._mediaReconnectBackoff.reset(),this._mediaReconnectBackoff.backoff(),this._log.debug("#reconnecting"),this.emit("reconnecting",x)}},this._onMediaReconnected=()=>{this._mediaStatus===xt.State.Reconnecting&&(this._log.info("ICE Connection reestablished."),this._mediaStatus=xt.State.Open,this._signalingStatus===xt.State.Open&&(this._publisher.info("connection","reconnected",null,this),this._log.debug("#reconnected"),this.emit("reconnected"),this._status=xt.State.Open))},this._onMessageReceived=o=>{const{callsid:l,content:c,contenttype:d,messagetype:u,voiceeventsid:f}=o;if(this.parameters.CallSid!==l){this._log.warn(`Received a message from a different callsid: ${l}`);return}const h={content:c,contentType:d,messageType:u,voiceEventSid:f};this._publisher.info("call-message",u,{content_type:d,event_type:"received",voice_event_sid:f},this),this._log.debug("#messageReceived",JSON.stringify(h)),this.emit("messageReceived",h)},this._onMessageSent=o=>{if(!this._messages.has(o)){this._log.warn(`Received a messageSent with a voiceEventSid that doesn't exists: ${o}`);return}const l=this._messages.get(o);this._messages.delete(o),this._publisher.info("call-message",l==null?void 0:l.messageType,{content_type:l==null?void 0:l.contentType,event_type:"sent",voice_event_sid:o},this),this._log.debug("#messageSent",JSON.stringify(l)),this.emit("messageSent",l)},this._onRinging=o=>{if(this._setCallSid(o),this._status!==xt.State.Connecting&&this._status!==xt.State.Ringing)return;const l=!!o.sdp;this._status=xt.State.Ringing,this._publisher.info("connection","outgoing-ringing",{hasEarlyMedia:l},this),this._log.debug("#ringing"),this.emit("ringing",l)},this._onRTCSample=o=>{const l=Object.assign(Object.assign({},o),{inputVolume:this._latestInputVolume,outputVolume:this._latestOutputVolume});this._codec=l.codecName,this._metricsSamples.push(l),this._metricsSamples.length>=N0t&&this._publishMetrics(),this.emit("sample",o)},this._onSignalingError=o=>{const{callsid:l,voiceeventsid:c,error:d}=o;if(this.parameters.CallSid!==l){this._log.warn(`Received an error from a different callsid: ${l}`);return}if(c&&this._messages.has(c)){this._messages.delete(c),this._log.warn("Received an error while sending a message.",o),this._publisher.error("call-message","error",{code:d.code,message:d.message,voice_event_sid:c},this);let u;const f=U5(!!this._options.enableImprovedSignalingErrorPrecision,d.code);typeof f<"u"&&(u=new f(d)),u||(this._log.error("Unknown Call Message Error: ",d),u=new ma.UnknownError(d.message,d)),this._log.debug("#error",d,u),this.emit("error",u)}},this._onSignalingReconnected=()=>{this._signalingStatus===xt.State.Reconnecting&&(this._log.info("Signaling Connection reestablished."),this._signalingStatus=xt.State.Open,this._mediaStatus===xt.State.Open&&(this._publisher.info("connection","reconnected",null,this),this._log.debug("#reconnected"),this.emit("reconnected"),this._status=xt.State.Open))},this._onTransportClose=()=>{this._log.error("Received transportClose from pstream"),this._log.debug("#transportClose"),this.emit("transportClose"),this._signalingReconnectToken?(this._status=xt.State.Reconnecting,this._signalingStatus=xt.State.Reconnecting,this._publisher.info("connection","reconnecting",null,this),this._log.debug("#reconnecting"),this.emit("reconnecting",new bo.ConnectionDisconnected)):(this._status=xt.State.Closed,this._signalingStatus=xt.State.Closed)},this._reemitWarning=(o,l)=>{const c=/^audio/.test(o.name)?"audio-level-":"network-quality-",d=C0t[o.threshold.name];let u;o.name in PB?u=PB[o.name][o.threshold.name]:o.name in TB&&(u=TB[o.name]);const f=d+u;this._emitWarning(c,f,o.threshold.value,o.values||o.value,l,o)},this._reemitWarningCleared=o=>{this._reemitWarning(o,!0)},this._soundcache=t.soundcache,typeof t.onIgnore=="function"&&(this._onIgnore=t.onIgnore);const s=r&&r.twimlParams||{};this.customParameters=new Map(Object.entries(s).map(([o,l])=>[o,String(l)])),Object.assign(this._options,r),this._options.callParameters&&(this.parameters=this._options.callParameters),this._options.reconnectToken&&(this._signalingReconnectToken=this._options.reconnectToken),this._voiceEventSidGenerator=this._options.voiceEventSidGenerator||Y5,this._direction=this.parameters.CallSid&&!this._options.reconnectCallSid?xt.CallDirection.Incoming:xt.CallDirection.Outgoing,this.parameters?this.callerInfo=this.parameters.StirStatus?{isVerified:this.parameters.StirStatus==="TN-Validation-Passed-A"}:null:this.callerInfo=null,this._mediaReconnectBackoff=new F5(MB),this._mediaReconnectBackoff.on("ready",()=>this._mediaHandler.iceRestart()),this.outboundConnectionId=k0t();const a=this._publisher=t.publisher;this._direction===xt.CallDirection.Incoming?a.info("connection","incoming",null,this):a.info("connection","outgoing",{preflight:this._options.preflight,reconnect:!!this._options.reconnectCallSid},this);const i=this._monitor=new(this._options.StatsMonitor||v0t);i.on("sample",this._onRTCSample),i.disableWarnings(),setTimeout(()=>i.enableWarnings(),S0t),i.on("warning",(o,l)=>{(o.name==="bytesSent"||o.name==="bytesReceived")&&this._onMediaFailure(xt.MediaFailure.LowBytes),this._reemitWarning(o,l)}),i.on("warning-cleared",o=>{this._reemitWarningCleared(o)}),this._mediaHandler=new this._options.MediaHandler(t.audioHelper,t.pstream,{MediaStream:this._options.MediaStream,RTCPeerConnection:this._options.RTCPeerConnection,codecPreferences:this._options.codecPreferences,dscp:this._options.dscp,forceAggressiveIceNomination:this._options.forceAggressiveIceNomination,maxAverageBitrate:this._options.maxAverageBitrate}),this.on("volume",(o,l)=>{this._inputVolumeStreak=this._checkVolume(o,this._inputVolumeStreak,this._latestInputVolume,"input"),this._outputVolumeStreak=this._checkVolume(l,this._outputVolumeStreak,this._latestOutputVolume,"output"),this._latestInputVolume=o,this._latestOutputVolume=l}),this._mediaHandler.onaudio=o=>{this._log.debug("#audio"),this.emit("audio",o)},this._mediaHandler.onvolume=(o,l,c,d)=>{i.addVolumes(c/255*32767,d/255*32767),this.emit("volume",o,l)},this._mediaHandler.ondtlstransportstatechange=o=>{const l=o==="failed"?"error":"debug";this._publisher.post(l,"dtls-transport-state",o,null,this)},this._mediaHandler.onpcconnectionstatechange=o=>{let l="debug";const c=this._mediaHandler.getRTCDtlsTransport();o==="failed"&&(l=c&&c.state==="failed"?"error":"warning"),this._publisher.post(l,"pc-connection-state",o,null,this)},this._mediaHandler.onicecandidate=o=>{const l=new yk(o).toPayload();this._publisher.debug("ice-candidate","ice-candidate",l,this)},this._mediaHandler.onselectedcandidatepairchange=o=>{const l=new yk(o.local).toPayload(),c=new yk(o.remote,!0).toPayload();this._publisher.debug("ice-candidate","selected-ice-candidate-pair",{local_candidate:l,remote_candidate:c},this)},this._mediaHandler.oniceconnectionstatechange=o=>{const l=o==="failed"?"error":"debug";this._publisher.post(l,"ice-connection-state",o,null,this)},this._mediaHandler.onicegatheringfailure=o=>{this._publisher.warn("ice-gathering-state",o,null,this),this._onMediaFailure(xt.MediaFailure.IceGatheringFailed)},this._mediaHandler.onicegatheringstatechange=o=>{this._publisher.debug("ice-gathering-state",o,null,this)},this._mediaHandler.onsignalingstatechange=o=>{this._publisher.debug("signaling-state",o,null,this)},this._mediaHandler.ondisconnected=o=>{this._log.warn(o),this._publisher.warn("network-quality-warning-raised","ice-connectivity-lost",{message:o},this),this._log.debug("#warning","ice-connectivity-lost"),this.emit("warning","ice-connectivity-lost"),this._onMediaFailure(xt.MediaFailure.ConnectionDisconnected)},this._mediaHandler.onfailed=o=>{this._onMediaFailure(xt.MediaFailure.ConnectionFailed)},this._mediaHandler.onconnected=()=>{this._status===xt.State.Reconnecting&&this._onMediaReconnected()},this._mediaHandler.onreconnected=o=>{this._log.info(o),this._publisher.info("network-quality-warning-cleared","ice-connectivity-lost",{message:o},this),this._log.debug("#warning-cleared","ice-connectivity-lost"),this.emit("warning-cleared","ice-connectivity-lost"),this._onMediaReconnected()},this._mediaHandler.onerror=o=>{o.disconnect===!0&&this._disconnect(o.info&&o.info.message);const l=o.info.twilioError||new ma.UnknownError(o.info.message);this._log.error("Received an error from MediaStream:",o),this._log.debug("#error",l),this.emit("error",l)},this._mediaHandler.onopen=()=>{this._status===xt.State.Open||this._status===xt.State.Reconnecting||(this._status===xt.State.Ringing||this._status===xt.State.Connecting?(this.mute(this._mediaHandler.isMuted),this._mediaStatus=xt.State.Open,this._maybeTransitionToOpen()):this._mediaHandler.close())},this._mediaHandler.onclose=()=>{this._status=xt.State.Closed,this._options.shouldPlayDisconnect&&this._options.shouldPlayDisconnect()&&!this._isCancelled&&!this._isRejected&&this._soundcache.get(yt.SoundName.Disconnect).play(),i.disable(),this._publishMetrics(),!this._isCancelled&&!this._isRejected&&(this._log.debug("#disconnect"),this.emit("disconnect",this))},this._pstream=t.pstream,this._pstream.on("ack",this._onAck),this._pstream.on("cancel",this._onCancel),this._pstream.on("error",this._onSignalingError),this._pstream.on("ringing",this._onRinging),this._pstream.on("transportClose",this._onTransportClose),this._pstream.on("connected",this._onConnected),this._pstream.on("message",this._onMessageReceived),this.on("error",o=>{this._publisher.error("connection","error",{code:o.code,message:o.message},this),this._pstream&&this._pstream.status==="disconnected"&&this._cleanupEventListeners()}),this.on("disconnect",()=>{this._cleanupEventListeners()})}_setInputTracksFromStream(t){return this._mediaHandler.setInputTracksFromStream(t)}_setSinkIds(t){return this._mediaHandler._setSinkIds(t)}accept(t){if(this._log.debug(".accept",t),this._status!==xt.State.Pending){this._log.debug(`.accept noop. status is '${this._status}'`);return}t=t||{};const r=t.rtcConfiguration||this._options.rtcConfiguration,s=t.rtcConstraints||this._options.rtcConstraints||{},a={audio:typeof s.audio<"u"?s.audio:!0};this._status=xt.State.Connecting;const i=()=>{if(this._status!==xt.State.Connecting){this._cleanupEventListeners(),this._mediaHandler.close();return}const c=u=>{const f=this._direction===xt.CallDirection.Incoming?"accepted-by-local":"accepted-by-remote";this._publisher.info("connection",f,null,this);const{codecName:h,codecParams:m}=Dpt(this._mediaHandler.version.getSDP());this._publisher.info("settings","codec",{codec_params:m,selected_codec:h},this),this._monitor.enable(u)},d=typeof this._options.getSinkIds=="function"&&this._options.getSinkIds();if(Array.isArray(d)&&this._mediaHandler._setSinkIds(d).catch(()=>{}),this._pstream.addListener("hangup",this._onHangup),this._direction===xt.CallDirection.Incoming)this._isAnswered=!0,this._pstream.on("answer",this._onAnswer),this._mediaHandler.answerIncomingCall(this.parameters.CallSid,this._options.offerSdp,r,c);else{const u=Array.from(this.customParameters.entries()).map(f=>`${encodeURIComponent(f[0])}=${encodeURIComponent(f[1])}`).join("&");this._pstream.on("answer",this._onAnswer),this._mediaHandler.makeOutgoingCall(u,this._signalingReconnectToken,this._options.reconnectCallSid||this.outboundConnectionId,r,c)}};this._options.beforeAccept&&this._options.beforeAccept(this);const o=typeof this._options.getInputStream=="function"&&this._options.getInputStream();(o?this._mediaHandler.setInputTracksFromStream(o):this._mediaHandler.openDefaultDeviceWithConstraints(a)).then(()=>{this._publisher.info("get-user-media","succeeded",{data:{audioConstraints:a}},this),i()},c=>{let d;c.code===31208||["PermissionDeniedError","NotAllowedError"].indexOf(c.name)!==-1?(d=new y0.PermissionDeniedError,this._publisher.error("get-user-media","denied",{data:{audioConstraints:a,error:c}},this)):(d=new y0.AcquisitionFailedError,this._publisher.error("get-user-media","failed",{data:{audioConstraints:a,error:c}},this)),this._disconnect(),this._log.debug("#error",c),this.emit("error",d)})}disconnect(){this._log.debug(".disconnect"),this._disconnect()}getLocalStream(){return this._mediaHandler&&this._mediaHandler.stream}getRemoteStream(){return this._mediaHandler&&this._mediaHandler._remoteStream}ignore(){if(this._log.debug(".ignore"),this._status!==xt.State.Pending){this._log.debug(`.ignore noop. status is '${this._status}'`);return}this._status=xt.State.Closed,this._mediaHandler.ignore(this.parameters.CallSid),this._publisher.info("connection","ignored-by-local",null,this),this._onIgnore&&this._onIgnore()}isMuted(){return this._mediaHandler.isMuted}mute(t=!0){this._log.debug(".mute",t);const r=this._mediaHandler.isMuted;this._mediaHandler.mute(t);const s=this._mediaHandler.isMuted;r!==s&&(this._publisher.info("connection",s?"muted":"unmuted",null,this),this._log.debug("#mute",s),this.emit("mute",s,this))}postFeedback(t,r){if(typeof t>"u"||t===null)return this._postFeedbackDeclined();if(!Object.values(xt.FeedbackScore).includes(t))throw new nr(`Feedback score must be one of: ${Object.values(xt.FeedbackScore)}`);if(typeof r<"u"&&r!==null&&!Object.values(xt.FeedbackIssue).includes(r))throw new nr(`Feedback issue must be one of: ${Object.values(xt.FeedbackIssue)}`);return this._publisher.info("feedback","received",{issue_name:r,quality_score:t},this,!0)}reject(){if(this._log.debug(".reject"),this._status!==xt.State.Pending){this._log.debug(`.reject noop. status is '${this._status}'`);return}this._isRejected=!0,this._pstream.reject(this.parameters.CallSid),this._mediaHandler.reject(this.parameters.CallSid),this._publisher.info("connection","rejected-by-local",null,this),this._cleanupEventListeners(),this._mediaHandler.close(),this._status=xt.State.Closed,this._log.debug("#reject"),this.emit("reject")}sendDigits(t){if(this._log.debug(".sendDigits",t),t.match(/[^0-9*#w]/))throw new nr("Illegal character passed into sendDigits");const r=this._options.customSounds||{},s=[];t.split("").forEach(l=>{let c=l!=="w"?`dtmf${l}`:"";c==="dtmf*"&&(c="dtmfs"),c==="dtmf#"&&(c="dtmfh"),s.push(c)});const a=()=>{const l=s.shift();l&&(this._options.dialtonePlayer&&!r[l]?this._options.dialtonePlayer.play(l):this._soundcache.get(l).play()),s.length&&setTimeout(()=>a(),200)};a();const i=this._mediaHandler.getOrCreateDTMFSender();function o(l){if(!l.length)return;const c=l.shift();c&&c.length&&i.insertDTMF(c,j0t,b0t),setTimeout(o.bind(null,l),w0t)}if(i){if(!("canInsertDTMF"in i)||i.canInsertDTMF){this._log.info("Sending digits using RTCDTMFSender"),o(t.split("w"));return}this._log.info("RTCDTMFSender cannot insert DTMF")}if(this._log.info("Sending digits over PStream"),this._pstream!==null&&this._pstream.status!=="disconnected")this._pstream.dtmf(this.parameters.CallSid,t);else{const l=new ma.ConnectionError("Could not send DTMF: Signaling channel is disconnected");this._log.debug("#error",l),this.emit("error",l)}}sendMessage(t){this._log.debug(".sendMessage",JSON.stringify(t));const{content:r,contentType:s,messageType:a}=t;if(typeof r>"u"||r===null)throw new nr("`content` is empty");if(typeof a!="string")throw new nr("`messageType` must be a string.");if(a.length===0)throw new nr("`messageType` must be a non-empty string.");if(this._pstream===null)throw new zo("Could not send CallMessage; Signaling channel is disconnected");const i=this.parameters.CallSid;if(typeof this.parameters.CallSid>"u")throw new zo("Could not send CallMessage; Call has no CallSid");const o=this._voiceEventSidGenerator();return this._messages.set(o,{content:r,contentType:s,messageType:a,voiceEventSid:o}),this._pstream.sendMessage(i,r,s,a,o),o}status(){return this._status}_checkVolume(t,r,s,a){const i=r>=10;let o=0;return s===t&&(o=r),o>=10?this._emitWarning("audio-level-",`constant-audio-${a}-level`,10,o,!1):i&&this._emitWarning("audio-level-",`constant-audio-${a}-level`,10,o,!0),o}_cleanupEventListeners(){const t=()=>{this._pstream&&(this._pstream.removeListener("ack",this._onAck),this._pstream.removeListener("answer",this._onAnswer),this._pstream.removeListener("cancel",this._onCancel),this._pstream.removeListener("error",this._onSignalingError),this._pstream.removeListener("hangup",this._onHangup),this._pstream.removeListener("ringing",this._onRinging),this._pstream.removeListener("transportClose",this._onTransportClose),this._pstream.removeListener("connected",this._onConnected),this._pstream.removeListener("message",this._onMessageReceived))};t(),setTimeout(t,0)}_createMetricPayload(){const t={call_sid:this.parameters.CallSid,dscp:!!this._options.dscp,sdk_version:tp};return this._options.gateway&&(t.gateway=this._options.gateway),t.direction=this._direction,t}_disconnect(t,r){if(t=typeof t=="string"?t:null,!(this._status!==xt.State.Open&&this._status!==xt.State.Connecting&&this._status!==xt.State.Reconnecting&&this._status!==xt.State.Ringing)){if(this._log.info("Disconnecting..."),this._pstream!==null&&this._pstream.status!=="disconnected"&&this._shouldSendHangup){const s=this.parameters.CallSid||this.outboundConnectionId;s&&this._pstream.hangup(s,t)}this._cleanupEventListeners(),this._mediaHandler.close(),r||this._publisher.info("connection","disconnected-by-local",null,this)}}_maybeTransitionToOpen(){this._wasConnected,this._isAnswered&&(this._onSignalingReconnected(),this._signalingStatus=xt.State.Open,this._mediaHandler&&this._mediaHandler.status==="open"&&(this._status=xt.State.Open,this._wasConnected||(this._wasConnected=!0,this._log.debug("#accept"),this.emit("accept",this))))}_postFeedbackDeclined(){return this._publisher.info("feedback","received-none",null,this,!0)}_publishMetrics(){this._metricsSamples.length!==0&&this._publisher.postMetrics("quality-metrics-samples","metrics-sample",this._metricsSamples.splice(0),this._createMetricPayload(),this).catch(t=>{this._log.warn("Unable to post metrics to Insights. Received error:",t)})}_setCallSid(t){const r=t.callsid;r&&(this.parameters.CallSid=r,this._mediaHandler.callSid=r)}}xt.toString=()=>"[Twilio.Call class]";(function(e){(function(t){t.Closed="closed",t.Connecting="connecting",t.Open="open",t.Pending="pending",t.Reconnecting="reconnecting",t.Ringing="ringing"})(e.State||(e.State={})),function(t){t.AudioLatency="audio-latency",t.ChoppyAudio="choppy-audio",t.DroppedCall="dropped-call",t.Echo="echo",t.NoisyCall="noisy-call",t.OneWayAudio="one-way-audio"}(e.FeedbackIssue||(e.FeedbackIssue={})),function(t){t[t.One=1]="One",t[t.Two=2]="Two",t[t.Three=3]="Three",t[t.Four=4]="Four",t[t.Five=5]="Five"}(e.FeedbackScore||(e.FeedbackScore={})),function(t){t.Incoming="INCOMING",t.Outgoing="OUTGOING"}(e.CallDirection||(e.CallDirection={})),function(t){t.Opus="opus",t.PCMU="pcmu"}(e.Codec||(e.Codec={})),function(t){t.None="none",t.Timeout="timeout"}(e.IceGatheringFailureReason||(e.IceGatheringFailureReason={})),function(t){t.ConnectionDisconnected="ConnectionDisconnected",t.ConnectionFailed="ConnectionFailed",t.IceGatheringFailed="IceGatheringFailed",t.LowBytes="LowBytes"}(e.MediaFailure||(e.MediaFailure={}))})(xt||(xt={}));function k0t(){return"TJSxxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})}const Pue=p.createContext(void 0);function M0t({children:e,demoMode:t=!1,demoJobs:r=[]}){const[s,a]=p.useState(null),[i,o]=p.useState(navigator.onLine),[l,c]=p.useState(!0),[d,u]=p.useState(null),[f,h]=p.useState(null),[m,g]=p.useState("idle"),[x,y]=p.useState([]),{toast:v}=Ee(),{data:b,isLoading:w,refetch:N}=be({queryKey:["/api/tech/jobs/today"],refetchInterval:l&&!t?6e4:!1,enabled:!t}),j=t?r:(b==null?void 0:b.jobs)||[],{data:S,isLoading:C}=be({queryKey:["/api/tech/jobs",s==null?void 0:s.id,"messages"],enabled:!!s,refetchInterval:l&&s?3e4:!1}),k=(S==null?void 0:S.messages)||[];p.useEffect(()=>((async()=>{try{const{token:D}=await Ne("POST","/twilio/voice/token",{}),W=new yt(D,{codecPreferences:["opus","pcmu"],edge:"roaming",logLevel:1});W.on("registered",()=>{console.log("[TECH] Twilio Device registered")}),W.on("error",E=>{console.error("[TECH] Twilio Device error:",E)}),await W.register(),u(W)}catch(D){console.error("[TECH] Failed to initialize Twilio Device:",D)}})(),()=>{d&&d.destroy()}),[]),p.useEffect(()=>{const $=async()=>{o(!0);const E=localStorage.getItem("tech_queued_actions");if(E){const B=JSON.parse(E).filter(ne=>!ne.isDemo&&!ne.id.startsWith("demo_")),Z=[];for(const ne of B)try{ne.type==="status_update"?(await Ne("POST",`/api/tech/jobs/${ne.payload.jobId}/status`,{status:ne.payload.status,jobNotes:ne.payload.notes}),ze.invalidateQueries({queryKey:["/api/tech/jobs/today"]})):ne.type==="send_message"&&(await Ne("POST","/api/messages/send",{customerPhone:ne.payload.customerPhone,content:ne.payload.content}),ze.invalidateQueries({queryKey:["/api/tech/jobs",ne.payload.jobId,"messages"]})),y(Y=>Y.filter(me=>me.id!==ne.id))}catch(Y){console.error("[TECH] Failed to sync queued action:",Y),Z.push(ne)}Z.length>0?(localStorage.setItem("tech_queued_actions",JSON.stringify(Z)),y(Z)):(localStorage.removeItem("tech_queued_actions"),y([]))}},D=()=>o(!1);window.addEventListener("online",$),window.addEventListener("offline",D);const W=localStorage.getItem("tech_queued_actions");return W&&y(JSON.parse(W)),()=>{window.removeEventListener("online",$),window.removeEventListener("offline",D)}},[]),p.useEffect(()=>{if(!t&&x.length>0){const $=x.filter(D=>!D.isDemo&&!D.id.startsWith("demo_"));y($),$.length>0?localStorage.setItem("tech_queued_actions",JSON.stringify($)):localStorage.removeItem("tech_queued_actions"),console.log("[DEMO MODE] Cleared queued demo actions - demo mode disabled")}},[t]),p.useEffect(()=>{s&&localStorage.setItem("tech_selected_job",JSON.stringify(s))},[s]),p.useEffect(()=>{const $=localStorage.getItem("tech_selected_job");if($&&j.length>0){const D=JSON.parse($),W=j.find(E=>E.id===D.id);W&&a(W)}else j.length===1&&!s&&a(j[0])},[j]);const M=je({mutationFn:async({status:$,notes:D})=>{if(!s)throw new Error("No job selected");return Ne("POST",`/api/tech/jobs/${s.id}/status`,{status:$,jobNotes:D})},onSuccess:()=>{ze.invalidateQueries({queryKey:["/api/tech/jobs/today"]})}}),A=je({mutationFn:async $=>{if(!s)throw new Error("No job selected");return Ne("POST","/api/messages/send",{customerPhone:s.customerPhone,content:$})},onSuccess:()=>{ze.invalidateQueries({queryKey:["/api/tech/jobs",s==null?void 0:s.id,"messages"]})}}),P=$=>{a($)},T=async($,D)=>{if(s){if(t){const W={id:`demo_action_${Date.now()}`,type:"status_update",payload:{jobId:s.id,status:$,notes:D},timestamp:Date.now(),isDemo:!0};y(E=>[...E,W]),v({title:"Status Updated (Demo)",description:`Job status changed to ${$}. This is a demo update and won't affect real data.`,duration:3e3});return}if(!i){const W={id:`status_${Date.now()}`,type:"status_update",payload:{status:$,notes:D,jobId:s==null?void 0:s.id},timestamp:Date.now()};return y(E=>{const F=[...E,W];return localStorage.setItem("tech_queued_actions",JSON.stringify(F)),F}),Promise.resolve()}await M.mutateAsync({status:$,notes:D})}},I=async $=>{if(s){if(t){const D={id:`demo_message_${Date.now()}`,type:"send_message",payload:{jobId:s.id,content:$},timestamp:Date.now(),isDemo:!0};y(W=>[...W,D]),v({title:"Message Sent (Demo)",description:"Message queued. This is a demo and won't send a real SMS.",duration:3e3});return}if(!i){const D={id:`message_${Date.now()}`,type:"send_message",payload:{content:$,customerPhone:s==null?void 0:s.customerPhone,jobId:s==null?void 0:s.id},timestamp:Date.now()};return y(W=>{const E=[...W,D];return localStorage.setItem("tech_queued_actions",JSON.stringify(E)),E}),Promise.resolve()}await A.mutateAsync($)}},L=async $=>{if(!d){window.location.href=`tel:${$}`;return}try{g("connecting");const D=await d.connect({params:{To:$}});h(D),D.on("accept",()=>{g("in-progress")}),D.on("disconnect",()=>{g("disconnected"),h(null),setTimeout(()=>g("idle"),2e3)}),D.on("cancel",()=>{g("idle"),h(null)}),D.on("reject",()=>{g("idle"),h(null)}),D.on("error",()=>{g("idle"),h(null)})}catch(D){console.error("[TECH] Call failed:",D),g("idle"),window.location.href=`tel:${$}`}},R=()=>{f&&f.disconnect()},G=()=>{c(!l)};return n.jsx(Pue.Provider,{value:{jobs:j,selectedJob:s,messages:k,isLoadingJobs:w,isLoadingMessages:C,isOnline:i,autoRefreshEnabled:l,device:d,activeCall:f,callStatus:m,queuedActions:x,selectJob:P,updateJobStatus:T,sendMessage:I,makeCall:L,endCall:R,toggleAutoRefresh:G,refreshJobs:N},children:e})}function Fh(){const e=p.useContext(Pue);if(!e)throw new Error("useTechnician must be used within TechnicianProvider");return e}const _0t="/assets/Clean_Machine_white_logo_transparent_f0645d6c-DcHfZ5zG.png";function P0t({children:e,technicianName:t="Technician",technicianStatus:r="available",shiftStart:s,jobsCompleted:a=0,totalJobs:i=0,demoMode:o=!1,onToggleDemo:l}){const c={available:"bg-green-500",on_job:"bg-blue-500",break:"bg-orange-500"},d={available:"Available",on_job:"On Job",break:"On Break"};return n.jsxs("div",{className:"flex flex-col h-screen bg-gradient-to-br from-blue-900 via-blue-800 to-blue-900",children:[n.jsx("header",{className:"flex-shrink-0 bg-blue-950 border-b border-blue-800 px-4 md:px-6 py-3 md:py-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3 md:gap-4",children:[n.jsx("img",{src:_0t,alt:"Logo",className:"h-16 w-16 md:h-20 md:w-20 object-cover drop-shadow-lg mix-blend-screen scale-125",style:{filter:"brightness(1.1)"}}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("h1",{className:"text-xl md:text-2xl font-bold text-white",children:"TECHNICIAN MODE"}),o&&n.jsx(ge,{variant:"secondary",className:"bg-yellow-500/20 text-yellow-300 border-yellow-500 hidden md:inline-flex","data-testid":"badge-demo-mode",children:"DEMO MODE"})]}),n.jsx("p",{className:"text-xs md:text-sm text-blue-200",children:t})]})]}),n.jsxs("div",{className:"flex items-center gap-3 md:gap-4",children:[s&&n.jsxs("div",{className:"hidden md:block text-right",children:[n.jsx("p",{className:"text-xs text-blue-300",children:"Shift Started"}),n.jsx("p",{className:"text-sm font-semibold text-white",children:s})]}),i>0&&n.jsxs("div",{className:"hidden lg:block text-right",children:[n.jsx("p",{className:"text-xs text-blue-300",children:"Jobs Today"}),n.jsxs("p",{className:"text-sm font-semibold text-white",children:[a,"/",i]})]}),n.jsxs("div",{className:"flex items-center gap-2 px-3 md:px-4 py-2 rounded-lg bg-white/10 backdrop-blur-sm border border-white/20",children:[n.jsx("div",{className:`w-2.5 h-2.5 rounded-full ${c[r]} animate-pulse`}),n.jsx("span",{className:"text-sm font-medium text-white",children:d[r]})]}),l&&n.jsxs(hh,{children:[n.jsx(mh,{asChild:!0,children:n.jsx(_,{variant:"ghost",size:"icon",className:"text-white hover:bg-white/10","data-testid":"button-settings",children:n.jsx(ja,{className:"h-5 w-5"})})}),n.jsx(Pu,{className:"w-80","data-testid":"popover-settings",children:n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"font-semibold text-lg",children:"Settings"}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"space-y-0.5",children:[n.jsx("label",{className:"text-sm font-medium",htmlFor:"demo-mode-switch",children:"Demo Mode"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Show sample jobs"})]}),n.jsx(Vt,{id:"demo-mode-switch",checked:o,onCheckedChange:l,"data-testid":"switch-demo-mode"})]}),n.jsx("p",{className:"text-xs text-muted-foreground bg-blue-50 dark:bg-blue-950 p-3 rounded-lg border border-blue-200 dark:border-blue-800",children:"Enable to test with sample data without affecting real jobs or making API calls"})]})})]})]})]})}),n.jsx("main",{className:"flex-1 overflow-auto",children:e})]})}function AB({demoMode:e,onToggleDemo:t}){const{jobs:r,selectedJob:s,selectJob:a,isLoadingJobs:i,isOnline:o,autoRefreshEnabled:l,toggleAutoRefresh:c,refreshJobs:d}=Fh(),u=r.filter(f=>f.status==="completed").length;return n.jsxs("div",{className:"h-full flex flex-col gap-4 p-4 overflow-y-auto",children:[n.jsxs(O,{className:"bg-white/10 backdrop-blur-sm border-white/20 p-4 text-white",children:[n.jsx("h3",{className:"text-sm font-semibold mb-3 text-blue-200",children:"Today's Overview"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-xs text-blue-300",children:"Jobs Completed"}),n.jsxs("span",{className:"font-bold",children:[u,"/",r.length]})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-xs text-blue-300",children:"Status"}),n.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${o?"bg-green-500/20 text-green-300":"bg-red-500/20 text-red-300"}`,children:o?"Online":"Offline"})]})]})]}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("h3",{className:"text-sm font-semibold text-white",children:["Today's Jobs (",r.length,")"]}),n.jsx(_,{size:"sm",variant:"ghost",onClick:()=>d(),disabled:i,className:"text-white hover:bg-white/10","data-testid":"button-refresh-jobs",children:n.jsx(Jc,{className:`w-4 h-4 ${i?"animate-spin":""}`})})]}),n.jsx("div",{className:"space-y-2",children:r.length===0?n.jsxs(O,{className:"bg-white/5 border-white/10 p-4 text-center",children:[n.jsx("p",{className:"text-sm text-blue-300 mb-3",children:"No jobs scheduled for today"}),n.jsxs(_,{size:"sm",onClick:t,variant:e?"destructive":"default",className:"w-full","data-testid":"button-toggle-demo",children:[n.jsx(mge,{className:"w-4 h-4 mr-2"}),e?"Exit Demo Mode":"Try Demo Mode"]})]}):r.map(f=>n.jsxs("button",{onClick:()=>a(f),className:`w-full p-3 rounded-lg border transition-all text-left ${(s==null?void 0:s.id)===f.id?"bg-blue-600 border-blue-400 shadow-lg":"bg-white/10 border-white/20 hover:bg-white/15"}`,"data-testid":`button-select-job-${f.id}`,children:[n.jsxs("div",{className:"flex items-start justify-between gap-2",children:[n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("div",{className:"font-semibold text-white text-sm mb-1",children:f.customerName||"Unknown Customer"}),n.jsx("div",{className:"text-xs text-blue-200",children:Ie(new Date(f.scheduledTime),"h:mm a")})]}),f.addressNeedsReview&&n.jsxs(ge,{variant:"destructive",className:"bg-amber-500/20 text-amber-300 border-amber-400/30 flex-shrink-0","data-testid":`badge-address-review-${f.id}`,children:[n.jsx(zr,{className:"w-3 h-3 mr-1"}),"Review Address"]})]}),n.jsx("div",{className:"mt-2",children:n.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${f.status==="completed"?"bg-green-500/20 text-green-300":f.status==="in_progress"?"bg-yellow-500/20 text-yellow-300":f.status==="en_route"?"bg-blue-500/20 text-blue-300":"bg-gray-500/20 text-gray-300"}`,children:f.status||"scheduled"})})]},f.id))})]}),n.jsxs(O,{className:"bg-white/10 backdrop-blur-sm border-white/20 p-4",children:[n.jsx("h3",{className:"text-sm font-semibold mb-3 text-blue-200",children:"Quick Settings"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs(_,{size:"sm",variant:"ghost",onClick:c,className:"w-full justify-start text-white hover:bg-white/10","data-testid":"button-toggle-refresh",children:[n.jsx(Jc,{className:`w-4 h-4 mr-2 ${l?"text-green-400":"text-gray-400"}`}),"Auto-Refresh: ",l?"On":"Off"]}),!o&&n.jsxs("div",{className:"flex items-center gap-2 text-xs text-orange-300 bg-orange-500/10 p-2 rounded",children:[n.jsx(V0e,{className:"w-4 h-4"}),"Working Offline"]})]})]})]})}var y9={};(function e(t,r,s,a){var i=!!(t.Worker&&t.Blob&&t.Promise&&t.OffscreenCanvas&&t.OffscreenCanvasRenderingContext2D&&t.HTMLCanvasElement&&t.HTMLCanvasElement.prototype.transferControlToOffscreen&&t.URL&&t.URL.createObjectURL),o=typeof Path2D=="function"&&typeof DOMMatrix=="function",l=function(){if(!t.OffscreenCanvas)return!1;var E=new OffscreenCanvas(1,1),F=E.getContext("2d");F.fillRect(0,0,1,1);var B=E.transferToImageBitmap();try{F.createPattern(B,"no-repeat")}catch{return!1}return!0}();function c(){}function d(E){var F=r.exports.Promise,B=F!==void 0?F:t.Promise;return typeof B=="function"?new B(E):(E(c,c),null)}var u=function(E,F){return{transform:function(B){if(E)return B;if(F.has(B))return F.get(B);var Z=new OffscreenCanvas(B.width,B.height),ne=Z.getContext("2d");return ne.drawImage(B,0,0),F.set(B,Z),Z},clear:function(){F.clear()}}}(l,new Map),f=function(){var E=Math.floor(16.666666666666668),F,B,Z={},ne=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(F=function(Y){var me=Math.random();return Z[me]=requestAnimationFrame(function pe(Me){ne===Me||ne+E-1<Me?(ne=Me,delete Z[me],Y()):Z[me]=requestAnimationFrame(pe)}),me},B=function(Y){Z[Y]&&cancelAnimationFrame(Z[Y])}):(F=function(Y){return setTimeout(Y,E)},B=function(Y){return clearTimeout(Y)}),{frame:F,cancel:B}}(),h=function(){var E,F,B={};function Z(ne){function Y(me,pe){ne.postMessage({options:me||{},callback:pe})}ne.init=function(pe){var Me=pe.transferControlToOffscreen();ne.postMessage({canvas:Me},[Me])},ne.fire=function(pe,Me,re){if(F)return Y(pe,null),F;var de=Math.random().toString(36).slice(2);return F=d(function(he){function ce(Be){Be.data.callback===de&&(delete B[de],ne.removeEventListener("message",ce),F=null,u.clear(),re(),he())}ne.addEventListener("message",ce),Y(pe,de),B[de]=ce.bind(null,{data:{callback:de}})}),F},ne.reset=function(){ne.postMessage({reset:!0});for(var pe in B)B[pe](),delete B[pe]}}return function(){if(E)return E;if(!s&&i){var ne=["var CONFETTI, SIZE = {}, module = {};","("+e.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{E=new Worker(URL.createObjectURL(new Blob([ne])))}catch(Y){return typeof console!==void 0&&typeof console.warn=="function"&&console.warn(" Could not load worker",Y),null}Z(E)}return E}}(),m={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function g(E,F){return F?F(E):E}function x(E){return E!=null}function y(E,F,B){return g(E&&x(E[F])?E[F]:m[F],B)}function v(E){return E<0?0:Math.floor(E)}function b(E,F){return Math.floor(Math.random()*(F-E))+E}function w(E){return parseInt(E,16)}function N(E){return E.map(j)}function j(E){var F=String(E).replace(/[^0-9a-f]/gi,"");return F.length<6&&(F=F[0]+F[0]+F[1]+F[1]+F[2]+F[2]),{r:w(F.substring(0,2)),g:w(F.substring(2,4)),b:w(F.substring(4,6))}}function S(E){var F=y(E,"origin",Object);return F.x=y(F,"x",Number),F.y=y(F,"y",Number),F}function C(E){E.width=document.documentElement.clientWidth,E.height=document.documentElement.clientHeight}function k(E){var F=E.getBoundingClientRect();E.width=F.width,E.height=F.height}function M(E){var F=document.createElement("canvas");return F.style.position="fixed",F.style.top="0px",F.style.left="0px",F.style.pointerEvents="none",F.style.zIndex=E,F}function A(E,F,B,Z,ne,Y,me,pe,Me){E.save(),E.translate(F,B),E.rotate(Y),E.scale(Z,ne),E.arc(0,0,1,me,pe,Me),E.restore()}function P(E){var F=E.angle*(Math.PI/180),B=E.spread*(Math.PI/180);return{x:E.x,y:E.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:E.startVelocity*.5+Math.random()*E.startVelocity,angle2D:-F+(.5*B-Math.random()*B),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:E.color,shape:E.shape,tick:0,totalTicks:E.ticks,decay:E.decay,drift:E.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:E.gravity*3,ovalScalar:.6,scalar:E.scalar,flat:E.flat}}function T(E,F){F.x+=Math.cos(F.angle2D)*F.velocity+F.drift,F.y+=Math.sin(F.angle2D)*F.velocity+F.gravity,F.velocity*=F.decay,F.flat?(F.wobble=0,F.wobbleX=F.x+10*F.scalar,F.wobbleY=F.y+10*F.scalar,F.tiltSin=0,F.tiltCos=0,F.random=1):(F.wobble+=F.wobbleSpeed,F.wobbleX=F.x+10*F.scalar*Math.cos(F.wobble),F.wobbleY=F.y+10*F.scalar*Math.sin(F.wobble),F.tiltAngle+=.1,F.tiltSin=Math.sin(F.tiltAngle),F.tiltCos=Math.cos(F.tiltAngle),F.random=Math.random()+2);var B=F.tick++/F.totalTicks,Z=F.x+F.random*F.tiltCos,ne=F.y+F.random*F.tiltSin,Y=F.wobbleX+F.random*F.tiltCos,me=F.wobbleY+F.random*F.tiltSin;if(E.fillStyle="rgba("+F.color.r+", "+F.color.g+", "+F.color.b+", "+(1-B)+")",E.beginPath(),o&&F.shape.type==="path"&&typeof F.shape.path=="string"&&Array.isArray(F.shape.matrix))E.fill($(F.shape.path,F.shape.matrix,F.x,F.y,Math.abs(Y-Z)*.1,Math.abs(me-ne)*.1,Math.PI/10*F.wobble));else if(F.shape.type==="bitmap"){var pe=Math.PI/10*F.wobble,Me=Math.abs(Y-Z)*.1,re=Math.abs(me-ne)*.1,de=F.shape.bitmap.width*F.scalar,he=F.shape.bitmap.height*F.scalar,ce=new DOMMatrix([Math.cos(pe)*Me,Math.sin(pe)*Me,-Math.sin(pe)*re,Math.cos(pe)*re,F.x,F.y]);ce.multiplySelf(new DOMMatrix(F.shape.matrix));var Be=E.createPattern(u.transform(F.shape.bitmap),"no-repeat");Be.setTransform(ce),E.globalAlpha=1-B,E.fillStyle=Be,E.fillRect(F.x-de/2,F.y-he/2,de,he),E.globalAlpha=1}else if(F.shape==="circle")E.ellipse?E.ellipse(F.x,F.y,Math.abs(Y-Z)*F.ovalScalar,Math.abs(me-ne)*F.ovalScalar,Math.PI/10*F.wobble,0,2*Math.PI):A(E,F.x,F.y,Math.abs(Y-Z)*F.ovalScalar,Math.abs(me-ne)*F.ovalScalar,Math.PI/10*F.wobble,0,2*Math.PI);else if(F.shape==="star")for(var le=Math.PI/2*3,$e=4*F.scalar,et=8*F.scalar,_e=F.x,ot=F.y,rt=5,z=Math.PI/rt;rt--;)_e=F.x+Math.cos(le)*et,ot=F.y+Math.sin(le)*et,E.lineTo(_e,ot),le+=z,_e=F.x+Math.cos(le)*$e,ot=F.y+Math.sin(le)*$e,E.lineTo(_e,ot),le+=z;else E.moveTo(Math.floor(F.x),Math.floor(F.y)),E.lineTo(Math.floor(F.wobbleX),Math.floor(ne)),E.lineTo(Math.floor(Y),Math.floor(me)),E.lineTo(Math.floor(Z),Math.floor(F.wobbleY));return E.closePath(),E.fill(),F.tick<F.totalTicks}function I(E,F,B,Z,ne){var Y=F.slice(),me=E.getContext("2d"),pe,Me,re=d(function(de){function he(){pe=Me=null,me.clearRect(0,0,Z.width,Z.height),u.clear(),ne(),de()}function ce(){s&&!(Z.width===a.width&&Z.height===a.height)&&(Z.width=E.width=a.width,Z.height=E.height=a.height),!Z.width&&!Z.height&&(B(E),Z.width=E.width,Z.height=E.height),me.clearRect(0,0,Z.width,Z.height),Y=Y.filter(function(Be){return T(me,Be)}),Y.length?pe=f.frame(ce):he()}pe=f.frame(ce),Me=he});return{addFettis:function(de){return Y=Y.concat(de),re},canvas:E,promise:re,reset:function(){pe&&f.cancel(pe),Me&&Me()}}}function L(E,F){var B=!E,Z=!!y(F||{},"resize"),ne=!1,Y=y(F,"disableForReducedMotion",Boolean),me=i&&!!y(F||{},"useWorker"),pe=me?h():null,Me=B?C:k,re=E&&pe?!!E.__confetti_initialized:!1,de=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,he;function ce(le,$e,et){for(var _e=y(le,"particleCount",v),ot=y(le,"angle",Number),rt=y(le,"spread",Number),z=y(le,"startVelocity",Number),Se=y(le,"decay",Number),J=y(le,"gravity",Number),oe=y(le,"drift",Number),ye=y(le,"colors",N),Re=y(le,"ticks",Number),He=y(le,"shapes"),Fe=y(le,"scalar"),st=!!y(le,"flat"),Bt=S(le),En=_e,jn=[],wi=E.width*Bt.x,Js=E.height*Bt.y;En--;)jn.push(P({x:wi,y:Js,angle:ot,spread:rt,startVelocity:z,color:ye[En%ye.length],shape:He[b(0,He.length)],ticks:Re,decay:Se,gravity:J,drift:oe,scalar:Fe,flat:st}));return he?he.addFettis(jn):(he=I(E,jn,Me,$e,et),he.promise)}function Be(le){var $e=Y||y(le,"disableForReducedMotion",Boolean),et=y(le,"zIndex",Number);if($e&&de)return d(function(z){z()});B&&he?E=he.canvas:B&&!E&&(E=M(et),document.body.appendChild(E)),Z&&!re&&Me(E);var _e={width:E.width,height:E.height};pe&&!re&&pe.init(E),re=!0,pe&&(E.__confetti_initialized=!0);function ot(){if(pe){var z={getBoundingClientRect:function(){if(!B)return E.getBoundingClientRect()}};Me(z),pe.postMessage({resize:{width:z.width,height:z.height}});return}_e.width=_e.height=null}function rt(){he=null,Z&&(ne=!1,t.removeEventListener("resize",ot)),B&&E&&(document.body.contains(E)&&document.body.removeChild(E),E=null,re=!1)}return Z&&!ne&&(ne=!0,t.addEventListener("resize",ot,!1)),pe?pe.fire(le,_e,rt):ce(le,_e,rt)}return Be.reset=function(){pe&&pe.reset(),he&&he.reset()},Be}var R;function G(){return R||(R=L(null,{useWorker:!0,resize:!0})),R}function $(E,F,B,Z,ne,Y,me){var pe=new Path2D(E),Me=new Path2D;Me.addPath(pe,new DOMMatrix(F));var re=new Path2D;return re.addPath(Me,new DOMMatrix([Math.cos(me)*ne,Math.sin(me)*ne,-Math.sin(me)*Y,Math.cos(me)*Y,B,Z])),re}function D(E){if(!o)throw new Error("path confetti are not supported in this browser");var F,B;typeof E=="string"?F=E:(F=E.path,B=E.matrix);var Z=new Path2D(F),ne=document.createElement("canvas"),Y=ne.getContext("2d");if(!B){for(var me=1e3,pe=me,Me=me,re=0,de=0,he,ce,Be=0;Be<me;Be+=2)for(var le=0;le<me;le+=2)Y.isPointInPath(Z,Be,le,"nonzero")&&(pe=Math.min(pe,Be),Me=Math.min(Me,le),re=Math.max(re,Be),de=Math.max(de,le));he=re-pe,ce=de-Me;var $e=10,et=Math.min($e/he,$e/ce);B=[et,0,0,et,-Math.round(he/2+pe)*et,-Math.round(ce/2+Me)*et]}return{type:"path",path:F,matrix:B}}function W(E){var F,B=1,Z="#000000",ne='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof E=="string"?F=E:(F=E.text,B="scalar"in E?E.scalar:B,ne="fontFamily"in E?E.fontFamily:ne,Z="color"in E?E.color:Z);var Y=10*B,me=""+Y+"px "+ne,pe=new OffscreenCanvas(Y,Y),Me=pe.getContext("2d");Me.font=me;var re=Me.measureText(F),de=Math.ceil(re.actualBoundingBoxRight+re.actualBoundingBoxLeft),he=Math.ceil(re.actualBoundingBoxAscent+re.actualBoundingBoxDescent),ce=2,Be=re.actualBoundingBoxLeft+ce,le=re.actualBoundingBoxAscent+ce;de+=ce+ce,he+=ce+ce,pe=new OffscreenCanvas(de,he),Me=pe.getContext("2d"),Me.font=me,Me.fillStyle=Z,Me.fillText(F,Be,le);var $e=1/B;return{type:"bitmap",bitmap:pe.transferToImageBitmap(),matrix:[$e,0,0,$e,-de*$e/2,-he*$e/2]}}r.exports=function(){return G().apply(this,arguments)},r.exports.reset=function(){G().reset()},r.exports.create=L,r.exports.shapeFromPath=D,r.exports.shapeFromText=W})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),y9,!1);const Tue=y9.exports;var T0t=y9.exports.create;const A0t=Object.freeze(Object.defineProperty({__proto__:null,create:T0t,default:Tue},Symbol.toStringTag,{value:"Module"}));function E0t({job:e,onClose:t,onComplete:r}){const[s,a]=p.useState(1),[i,o]=p.useState([e.serviceId]),[l,c]=p.useState({}),[d,u]=p.useState(null),[f,h]=p.useState(""),[m,g]=p.useState(!1),[x,y]=p.useState(""),[v,b]=p.useState(""),{toast:w}=Ee(),{data:N,isLoading:j}=be({queryKey:["/api/services"]}),{data:S,isLoading:C}=be({queryKey:["/api/addon-services"]}),k=(N==null?void 0:N.services)||[],M=(S==null?void 0:S.addons)||[],A=re=>{if(!re)return 0;const de=re.match(/\$?(\d+)/);return de?parseInt(de[1]):0};p.useEffect(()=>{if(k.length>0&&i.length>0){const re={};i.forEach(de=>{if(!l[de]){const he=k.find(ce=>ce.id===de);he&&(re[de]=A(he.priceRange))}}),Object.keys(re).length>0&&c(de=>({...de,...re}))}},[k,i]);const P=Object.values(l).reduce((re,de)=>re+(de||0),0),T=0,I=P*T,L=P+I,R=je({mutationFn:async({method:re,amount:de,services:he})=>{if(re==="online"){const ce=he.map(Be=>`${Be.name} ($${Be.price.toFixed(2)})`).join(", ");await Ne("POST","/api/dashboard/send-invoice",{customerPhone:e.customerPhone,customerEmail:e.customerEmail||"",customerName:e.customerName,amount:L,service:ce,notes:`Itemized services: ${he.map(Be=>`${Be.name}: $${Be.price.toFixed(2)}`).join(" | ")}`})}return await Ne("POST",`/api/tech/jobs/${e.id}/complete`,{paymentMethod:re,amount:de,servicesPerformed:he})},onSuccess:()=>{Tue({particleCount:100,spread:70,origin:{y:.6}}),ze.invalidateQueries({queryKey:["/api/tech/jobs/today"]}),ze.invalidateQueries({queryKey:["/api/tech-deposits/today"]}),a(5)},onError:re=>{w({title:"Error",description:re.message||"Failed to complete job",variant:"destructive"})}}),G=()=>{if(i.length===0)return w({title:"No Services Selected",description:"Please select at least one service to complete the job.",variant:"destructive"}),!1;for(const re of i){const de=l[re];if(de==null||isNaN(de)||de<0)return w({title:"Invalid Price",description:"Please enter a valid price (0 or greater) for all services.",variant:"destructive"}),!1}return!0},$=()=>d!=="free"&&L===0?(w({title:"Invalid Total",description:'Total amount must be greater than $0 for this payment method. Use "Free" payment method for $0 jobs.',variant:"destructive"}),!1):!0,D=()=>{if(s===1&&i.length===0){w({title:"No Services Selected",description:"Please select at least one service",variant:"destructive"});return}if(!(s===2&&!G())){if(s===3&&!d){w({title:"No Payment Method",description:"Please select a payment method",variant:"destructive"});return}if(s===4){if(!$())return;if(d==="cash"||d==="check"){const he=d==="cash"?x:v;if(!he||isNaN(parseFloat(he))||parseFloat(he)<=0){w({title:"Invalid Amount",description:`Please enter a valid ${d} amount greater than $0`,variant:"destructive"});return}if(Math.abs(parseFloat(he)-L)>.01){w({title:"Amount Mismatch",description:`${d==="cash"?"Cash":"Check"} amount ($${he}) doesn't match job total ($${L.toFixed(2)})`,variant:"destructive"});return}}const re=i.map(he=>{const ce=k.find(Be=>Be.id===he);return{serviceId:he,serviceName:(ce==null?void 0:ce.name)||"Unknown Service",price:l[he]||0}});let de=L;d==="cash"&&x?de=parseFloat(x):d==="check"&&v?de=parseFloat(v):d==="free"&&(de=0),R.mutate({method:d||"cash",amount:de,services:re});return}a(re=>re+1)}},W=()=>{a(re=>re-1)},E=re=>{o(de=>de.includes(re)?re===e.serviceId?de:de.filter(he=>he!==re):[...de,re])},F=(re,de)=>{c(he=>({...he,[re]:de}))},B=re=>{c(de=>({...de,[re]:0}))};M.filter(re=>re.name.toLowerCase().includes(f.toLowerCase()));const Z=k.filter(re=>re.name.toLowerCase().includes(f.toLowerCase())&&!i.includes(re.id)),ne=()=>n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-semibold text-muted-foreground mb-3",children:"Originally Scheduled Service"}),n.jsx("div",{className:"space-y-2",children:k.filter(re=>re.id===e.serviceId).map(re=>n.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 dark:bg-blue-950 border border-blue-200 dark:border-blue-800 rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(as,{checked:!0,disabled:!0,"data-testid":`checkbox-service-${re.id}`}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:re.name}),n.jsx("p",{className:"text-sm text-muted-foreground",children:re.priceRange})]})]}),n.jsx(bn,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"})]},re.id))})]}),M.length>0&&n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-semibold text-muted-foreground mb-3",children:"Add-On Services (Optional)"}),n.jsx("div",{className:"space-y-2",children:M.map(re=>n.jsxs("div",{className:`flex items-center justify-between p-3 border rounded-lg cursor-pointer transition-colors ${i.includes(re.id)?"bg-green-50 dark:bg-green-950 border-green-200 dark:border-green-800":"hover:bg-gray-50 dark:hover:bg-gray-900"}`,onClick:()=>E(re.id),children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(as,{checked:i.includes(re.id),"data-testid":`checkbox-addon-${re.id}`}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:re.name}),n.jsx("p",{className:"text-sm text-muted-foreground",children:re.priceRange})]})]}),i.includes(re.id)&&n.jsx(bn,{className:"h-5 w-5 text-green-600 dark:text-green-400"})]},re.id))})]}),n.jsxs("div",{children:[n.jsxs(_,{variant:"outline",onClick:()=>g(!m),className:"w-full","data-testid":"button-toggle-add-services",children:[n.jsx(Un,{className:"h-4 w-4 mr-2"}),m?"Hide":"Add"," Other Services"]}),m&&n.jsxs("div",{className:"mt-3 space-y-3",children:[n.jsxs("div",{className:"relative",children:[n.jsx(Ga,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),n.jsx(se,{placeholder:"Search services...",value:f,onChange:re=>h(re.target.value),className:"pl-9","data-testid":"input-search-services"})]}),n.jsxs("div",{className:"max-h-48 overflow-y-auto space-y-2",children:[Z.map(re=>n.jsx("div",{className:"flex items-center justify-between p-3 border rounded-lg hover:bg-gray-50 dark:hover:bg-gray-900 cursor-pointer",onClick:()=>E(re.id),children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(as,{checked:!1}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:re.name}),n.jsx("p",{className:"text-sm text-muted-foreground",children:re.priceRange})]})]})},re.id)),Z.length===0&&n.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No services found"})]})]})]}),n.jsx("div",{className:"pt-2 border-t",children:n.jsxs("p",{className:"text-sm text-muted-foreground",children:[n.jsx("strong",{children:i.length})," service",i.length!==1?"s":""," selected"]})})]}),Y=()=>n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{className:"space-y-3",children:i.map(re=>{const de=k.find(he=>he.id===re);return de?n.jsx(O,{children:n.jsx(H,{className:"pt-4",children:n.jsxs("div",{className:"space-y-3",children:[n.jsx("div",{className:"flex items-start justify-between",children:n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:de.name}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:["Base Price: ",de.priceRange]})]})}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx(U,{htmlFor:`price-${re}`,children:"Final Price"}),n.jsxs("div",{className:"relative",children:[n.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground",children:"$"}),n.jsx(se,{id:`price-${re}`,type:"number",step:"0.01",min:"0",value:l[re]||"",onChange:he=>F(re,parseFloat(he.target.value)||0),className:"pl-7",placeholder:"0.00","data-testid":`input-price-${re}`})]})]}),n.jsx("div",{className:"flex items-end",children:n.jsxs(_,{variant:"outline",size:"sm",onClick:()=>B(re),"data-testid":`button-free-${re}`,children:[n.jsx(jr,{className:"h-4 w-4 mr-1"}),"Free"]})})]})]})})},re):null})}),n.jsx(O,{className:"bg-blue-50 dark:bg-blue-950 border-blue-200 dark:border-blue-800",children:n.jsx(H,{className:"pt-4",children:n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{children:"Subtotal"}),n.jsxs("span",{"data-testid":"text-subtotal",children:["$",P.toFixed(2)]})]}),T>0,n.jsxs("div",{className:"flex justify-between text-lg font-bold pt-2 border-t",children:[n.jsx("span",{children:"Total"}),n.jsxs("span",{"data-testid":"text-total",children:["$",L.toFixed(2)]})]})]})})})]}),me=()=>n.jsxs("div",{className:"space-y-4",children:[n.jsx(mo,{value:d||"",onValueChange:re=>u(re),children:n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:`relative border-2 rounded-lg p-4 cursor-pointer transition-all ${d==="online"?"border-blue-600 bg-blue-50 dark:bg-blue-950":"border-gray-200 dark:border-gray-800 hover:border-gray-300 dark:hover:border-gray-700"}`,onClick:()=>u("online"),children:[n.jsx(Kn,{value:"online",id:"online",className:"sr-only"}),n.jsxs("div",{className:"flex flex-col items-center gap-3 text-center",children:[n.jsx("div",{className:`p-3 rounded-full ${d==="online"?"bg-blue-100 dark:bg-blue-900":"bg-gray-100 dark:bg-gray-800"}`,children:n.jsx(yf,{className:"h-6 w-6"})}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Online Payment"}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Send invoice via SMS/email"})]})]}),d==="online"&&n.jsx(bn,{className:"absolute top-2 right-2 h-5 w-5 text-blue-600"})]}),n.jsxs("div",{className:`relative border-2 rounded-lg p-4 cursor-pointer transition-all ${d==="cash"?"border-green-600 bg-green-50 dark:bg-green-950":"border-gray-200 dark:border-gray-800 hover:border-gray-300 dark:hover:border-gray-700"}`,onClick:()=>u("cash"),children:[n.jsx(Kn,{value:"cash",id:"cash",className:"sr-only"}),n.jsxs("div",{className:"flex flex-col items-center gap-3 text-center",children:[n.jsx("div",{className:`p-3 rounded-full ${d==="cash"?"bg-green-100 dark:bg-green-900":"bg-gray-100 dark:bg-gray-800"}`,children:n.jsx(Zv,{className:"h-6 w-6"})}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Cash"}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Payment received in cash"})]})]}),d==="cash"&&n.jsx(bn,{className:"absolute top-2 right-2 h-5 w-5 text-green-600"})]}),n.jsxs("div",{className:`relative border-2 rounded-lg p-4 cursor-pointer transition-all ${d==="check"?"border-purple-600 bg-purple-50 dark:bg-purple-950":"border-gray-200 dark:border-gray-800 hover:border-gray-300 dark:hover:border-gray-700"}`,onClick:()=>u("check"),children:[n.jsx(Kn,{value:"check",id:"check",className:"sr-only"}),n.jsxs("div",{className:"flex flex-col items-center gap-3 text-center",children:[n.jsx("div",{className:`p-3 rounded-full ${d==="check"?"bg-purple-100 dark:bg-purple-900":"bg-gray-100 dark:bg-gray-800"}`,children:n.jsx(bs,{className:"h-6 w-6"})}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Check"}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Payment received by check"})]})]}),d==="check"&&n.jsx(bn,{className:"absolute top-2 right-2 h-5 w-5 text-purple-600"})]}),n.jsxs("div",{className:`relative border-2 rounded-lg p-4 cursor-pointer transition-all ${d==="free"?"border-orange-600 bg-orange-50 dark:bg-orange-950":"border-gray-200 dark:border-gray-800 hover:border-gray-300 dark:hover:border-gray-700"}`,onClick:()=>u("free"),children:[n.jsx(Kn,{value:"free",id:"free",className:"sr-only"}),n.jsxs("div",{className:"flex flex-col items-center gap-3 text-center",children:[n.jsx("div",{className:`p-3 rounded-full ${d==="free"?"bg-orange-100 dark:bg-orange-900":"bg-gray-100 dark:bg-gray-800"}`,children:n.jsx(jr,{className:"h-6 w-6"})}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Free / Promo"}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"No payment required"})]})]}),d==="free"&&n.jsx(bn,{className:"absolute top-2 right-2 h-5 w-5 text-orange-600"})]})]})}),d&&n.jsx(O,{className:"bg-muted/50",children:n.jsx(H,{className:"pt-4",children:n.jsxs("p",{className:"text-sm",children:[d==="online"&&n.jsxs(n.Fragment,{children:[n.jsx("strong",{children:"Online Payment:"})," An itemized invoice will be sent to ",e.customerName," via SMS",e.customerEmail?" and email":"",". The customer can pay using their credit/debit card."]}),d==="cash"&&n.jsxs(n.Fragment,{children:[n.jsx("strong",{children:"Cash Payment:"})," Record the cash amount received from the customer. This will be added to your daily deposit total."]}),d==="check"&&n.jsxs(n.Fragment,{children:[n.jsx("strong",{children:"Check Payment:"})," Record the check amount and number. This will be added to your daily deposit total."]}),d==="free"&&n.jsxs(n.Fragment,{children:[n.jsx("strong",{children:"Free Service:"})," This service will be marked as completed with no payment required (promotional or warranty work)."]})]})})})]}),pe=()=>n.jsxs("div",{className:"space-y-4",children:[d==="online"&&n.jsxs("div",{className:"space-y-4",children:[!R.isPending&&!R.isSuccess&&n.jsxs(O,{children:[n.jsxs(ee,{children:[n.jsxs(te,{className:"flex items-center gap-2",children:[n.jsx(Vi,{className:"h-5 w-5"}),"Send Invoice"]}),n.jsxs(ke,{children:["Invoice will be sent to ",e.customerName]})]}),n.jsxs(H,{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between text-sm",children:[n.jsx("span",{className:"text-muted-foreground",children:"Phone:"}),n.jsx("span",{className:"font-medium",children:e.customerPhone})]}),e.customerEmail&&n.jsxs("div",{className:"flex items-center justify-between text-sm",children:[n.jsx("span",{className:"text-muted-foreground",children:"Email:"}),n.jsx("span",{className:"font-medium",children:e.customerEmail})]}),n.jsxs("div",{className:"flex items-center justify-between text-sm",children:[n.jsx("span",{className:"text-muted-foreground",children:"Total Amount:"}),n.jsxs("span",{className:"font-bold text-lg",children:["$",L.toFixed(2)]})]})]})]}),R.isPending&&n.jsx(O,{className:"bg-blue-50 dark:bg-blue-950 border-blue-200 dark:border-blue-800",children:n.jsx(H,{className:"pt-6",children:n.jsxs("div",{className:"flex flex-col items-center gap-4 text-center",children:[n.jsx(nt,{className:"h-12 w-12 animate-spin text-blue-600"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Sending Invoice..."}),n.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Please wait while we generate and send the invoice"})]})]})})})]}),(d==="cash"||d==="check")&&n.jsx("div",{className:"space-y-4",children:n.jsxs(O,{children:[n.jsx(ee,{children:n.jsxs(te,{className:"flex items-center gap-2",children:[n.jsx(cge,{className:"h-5 w-5"}),d==="cash"?"Cash":"Check"," Payment Details"]})}),n.jsx(H,{className:"space-y-4",children:n.jsxs("div",{children:[n.jsx(U,{htmlFor:"payment-amount",children:"Amount Received"}),n.jsxs("div",{className:"relative mt-1",children:[n.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground",children:"$"}),n.jsx(se,{id:"payment-amount",type:"number",step:"0.01",min:"0",value:d==="cash"?x:v,onChange:re=>d==="cash"?y(re.target.value):b(re.target.value),className:"pl-7",placeholder:L.toFixed(2),"data-testid":"input-payment-amount"})]}),n.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Expected amount: $",L.toFixed(2)]})]})})]})}),d==="free"&&n.jsx(O,{className:"bg-orange-50 dark:bg-orange-950 border-orange-200 dark:border-orange-800",children:n.jsx(H,{className:"pt-6",children:n.jsxs("div",{className:"flex flex-col items-center gap-4 text-center",children:[n.jsx("div",{className:"p-4 bg-orange-100 dark:bg-orange-900 rounded-full",children:n.jsx(jr,{className:"h-8 w-8 text-orange-600 dark:text-orange-400"})}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold",children:"Promotional Service"}),n.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"This service will be marked as completed with no payment required"})]})]})})})]}),Me=()=>{const re=i.map(de=>{const he=k.find(ce=>ce.id===de);return{name:(he==null?void 0:he.name)||"Unknown Service",price:l[de]||0}});return n.jsxs("div",{className:"space-y-4",children:[n.jsx(O,{className:"bg-green-50 dark:bg-green-950 border-green-200 dark:border-green-800",children:n.jsx(H,{className:"pt-6",children:n.jsxs("div",{className:"flex flex-col items-center gap-4 text-center",children:[n.jsx("div",{className:"p-4 bg-green-100 dark:bg-green-900 rounded-full",children:n.jsx(L6,{className:"h-12 w-12 text-green-600 dark:text-green-400"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-2xl font-bold text-green-900 dark:text-green-100",children:"Job Completed!"}),n.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:Ie(new Date,"PPpp")})]})]})})}),n.jsxs(O,{children:[n.jsx(ee,{children:n.jsx(te,{children:"Summary"})}),n.jsxs(H,{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Customer"}),n.jsx("p",{className:"font-medium","data-testid":"text-summary-customer",children:e.customerName})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Services Performed"}),n.jsx("ul",{className:"space-y-1",children:re.map((de,he)=>n.jsxs("li",{className:"flex justify-between text-sm",children:[n.jsxs("span",{children:[" ",de.name]}),n.jsxs("span",{className:"font-medium",children:["$",de.price.toFixed(2)]})]},he))})]}),n.jsx("div",{className:"pt-3 border-t",children:n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"font-semibold",children:"Total Amount"}),n.jsxs("span",{className:"font-bold text-lg","data-testid":"text-summary-total",children:["$",L.toFixed(2)]})]})}),n.jsx("div",{className:"pt-3 border-t",children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm text-muted-foreground",children:"Payment Method"}),n.jsx("span",{className:"font-medium capitalize","data-testid":"text-summary-payment",children:d==="online"?"Online Payment (Invoice Sent)":d==="cash"?"Cash":d==="check"?"Check":"Free / Promotional"})]})})]})]})]})};return n.jsx(At,{open:!0,onOpenChange:t,children:n.jsxs(_t,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[n.jsxs($t,{children:[n.jsxs(Et,{children:["Complete Job - Step ",s," of 5"]}),n.jsxs(an,{children:[s===1&&"Review and select services performed",s===2&&"Set final pricing for each service",s===3&&"Choose payment method",s===4&&"Process payment",s===5&&"Job completion summary"]}),n.jsx(Xm,{value:s/5*100,className:"mt-2"})]}),n.jsxs("div",{className:"py-4",children:[s===1&&ne(),s===2&&Y(),s===3&&me(),s===4&&pe(),s===5&&Me()]}),n.jsxs(Sn,{className:"flex gap-2",children:[s>1&&s<5&&n.jsx(_,{variant:"outline",onClick:W,disabled:R.isPending,"data-testid":"button-back",children:"Back"}),s<4&&n.jsx(_,{onClick:D,disabled:j||C,"data-testid":"button-next",children:j||C?n.jsxs(n.Fragment,{children:[n.jsx(nt,{className:"mr-2 h-4 w-4 animate-spin"}),"Loading..."]}):"Next"}),s===4&&!R.isSuccess&&n.jsx(_,{onClick:D,disabled:R.isPending,"data-testid":"button-process-payment",children:R.isPending?n.jsxs(n.Fragment,{children:[n.jsx(nt,{className:"mr-2 h-4 w-4 animate-spin"}),"Processing..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Ar,{className:"mr-2 h-4 w-4"}),d==="online"?"Send Invoice":"Complete Job"]})}),s===5&&n.jsx(_,{onClick:()=>{r(),t()},className:"w-full","data-testid":"button-done",children:"Done"})]})]})})}const EB=[{value:"assigned",label:"Assigned",color:"bg-gray-500"},{value:"en_route",label:"En Route",color:"bg-blue-500"},{value:"on_site",label:"On-Site",color:"bg-purple-500"},{value:"in_progress",label:"In Progress",color:"bg-yellow-500"},{value:"paused",label:"Paused",color:"bg-orange-500"},{value:"completed",label:"Completed",color:"bg-green-500"}];function I0t(){const{selectedJob:e,updateJobStatus:t}=Fh(),[r,s]=p.useState(""),[a,i]=p.useState(!1),[o,l]=p.useState(!1),[c,d]=p.useState(!1),{toast:u}=Ee();p.useEffect(()=>{e!=null&&e.jobNotes?s(e.jobNotes):s("")},[e==null?void 0:e.id]),p.useEffect(()=>{if(!e||!r||r===e.jobNotes)return;const x=setTimeout(()=>{h()},1e4);return()=>clearTimeout(x)},[r,e]);const f=async x=>{if(e){if(x==="completed"){d(!0);return}i(!0);try{await t(x,r),u({title:"Status Updated",description:`Job status changed to ${x}`})}catch(y){u({title:"Update Failed",description:y.message||"Failed to update status",variant:"destructive"})}finally{i(!1)}}},h=async()=>{if(!(!e||!r)){l(!0);try{await t(e.status||"assigned",r),u({title:"Notes Saved",description:"Technician notes updated"})}catch(x){u({title:"Save Failed",description:x.message||"Failed to save notes",variant:"destructive"})}finally{l(!1)}}},m=()=>{if(!("webkitSpeechRecognition"in window)){u({title:"Not Supported",description:"Voice input not available on this device",variant:"destructive"});return}const x=new window.webkitSpeechRecognition;x.continuous=!1,x.interimResults=!1,x.onresult=y=>{const v=y.results[0][0].transcript;s(b=>b+(b?" ":"")+v)},x.onerror=()=>{u({title:"Voice Error",description:"Failed to capture voice input",variant:"destructive"})},x.start(),u({title:"Listening...",description:"Speak now"})};if(!e)return n.jsx(O,{className:"h-full bg-white/5 border-white/10",children:n.jsx(H,{className:"flex items-center justify-center h-full",children:n.jsx("p",{className:"text-blue-300 text-sm",children:"Select a job to manage workflow"})})});const g=EB.findIndex(x=>x.value===e.status);return n.jsxs(O,{className:"h-full flex flex-col bg-white/5 border-white/10",children:[n.jsx(ee,{className:"flex-shrink-0",children:n.jsx(te,{className:"text-white text-lg",children:"Job Workflow"})}),n.jsxs(H,{className:"flex-1 overflow-y-auto space-y-6",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-semibold text-blue-200 mb-3",children:"Status Progress"}),n.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:EB.map((x,y)=>{const v=y<g,b=x.value===e.status;return n.jsxs(_,{size:"sm",onClick:()=>f(x.value),disabled:a,className:`h-auto py-3 flex flex-col items-center gap-1 ${b?x.color+" text-white hover:opacity-90":v?x.color+" text-white opacity-60":"bg-white/10 text-blue-300 hover:bg-white/20"}`,"data-testid":`button-status-${x.value}`,children:[v&&n.jsx(bn,{className:"w-4 h-4"}),n.jsx("span",{className:"text-xs font-semibold",children:x.label})]},x.value)})})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("h3",{className:"text-sm font-semibold text-blue-200",children:"Technician Notes"}),o&&n.jsxs("span",{className:"text-xs text-green-400 flex items-center gap-1",children:[n.jsx(nt,{className:"w-3 h-3 animate-spin"}),"Saving..."]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(un,{value:r,onChange:x=>s(x.target.value),placeholder:"Add notes about this job (auto-saves every 10 seconds)...",className:"min-h-[120px] bg-white/10 border-white/20 text-white placeholder:text-blue-300/50 resize-none","data-testid":"textarea-job-notes"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(_,{size:"sm",onClick:h,disabled:o||!r,className:"flex-1","data-testid":"button-save-notes",children:o?n.jsxs(n.Fragment,{children:[n.jsx(nt,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving..."]}):"Save Notes"}),n.jsx(_,{size:"sm",variant:"outline",onClick:m,className:"border-white/20 text-white hover:bg-white/10","data-testid":"button-voice-input",children:n.jsx(Sp,{className:"w-4 h-4"})})]})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-semibold text-blue-200 mb-2",children:"Job Details"}),n.jsxs("div",{className:"bg-white/5 rounded-lg p-3 space-y-2 text-sm",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-blue-300",children:"Customer:"}),n.jsx("span",{className:"text-white font-medium",children:e.customerName})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-blue-300",children:"Phone:"}),n.jsx("span",{className:"text-white font-medium",children:e.customerPhone})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-blue-300",children:"Address:"}),n.jsx("span",{className:"text-white font-medium text-right ml-2",children:e.customerAddress})]})]})]})]}),c&&e&&n.jsx(E0t,{job:{id:e.id,customerId:e.customerId,serviceId:e.serviceId,customerName:e.customerName,customerPhone:e.customerPhone,customerEmail:e.customerEmail,scheduledTime:e.scheduledTime},onClose:()=>{d(!1)},onComplete:()=>{u({title:"Job Completed!",description:"The job has been successfully completed"})}})]})}function L0t(){const{selectedJob:e}=Fh();if(!e)return n.jsx(O,{className:"h-full bg-white/5 border-white/10",children:n.jsx(H,{className:"flex items-center justify-center h-full",children:n.jsx("p",{className:"text-blue-300 text-sm",children:"Select a job to view navigation"})})});const t=!!e.customerAddress,r=!!(e.latitude&&e.longitude),s=()=>{r?window.open(`http://maps.apple.com/?ll=${e.latitude},${e.longitude}`,"_blank"):t&&window.open(`http://maps.apple.com/?address=${encodeURIComponent(e.customerAddress)}`,"_blank")},a=()=>{r?window.open(`https://www.google.com/maps/dir/?api=1&destination=${e.latitude},${e.longitude}`,"_blank"):t&&window.open(`https://www.google.com/maps/dir/?api=1&destination=${encodeURIComponent(e.customerAddress)}`,"_blank")};return n.jsxs(O,{className:"h-full flex flex-col bg-white/5 border-white/10",children:[n.jsx(ee,{className:"flex-shrink-0",children:n.jsxs(te,{className:"text-white text-lg flex items-center gap-2",children:[n.jsx(O6,{className:"w-5 h-5"}),"Navigation"]})}),n.jsxs(H,{className:"flex-1 overflow-y-auto space-y-4",children:[n.jsx("div",{className:"bg-white/10 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(zr,{className:"w-5 h-5 text-blue-400 flex-shrink-0 mt-0.5"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-sm font-semibold text-blue-200 mb-1",children:"Customer Address"}),n.jsx("p",{className:"text-white text-sm",children:e.customerAddress||"No address available"}),r&&n.jsxs("p",{className:"text-xs text-blue-300 mt-2",children:[parseFloat(e.latitude).toFixed(6),", ",parseFloat(e.longitude).toFixed(6)]})]})]})}),n.jsxs("div",{className:"bg-white/5 rounded-lg border-2 border-dashed border-white/20 p-8 flex flex-col items-center justify-center text-center",children:[n.jsx(cQ,{className:"w-12 h-12 text-blue-400 mb-3"}),n.jsx("p",{className:"text-blue-300 text-sm",children:t?"Map preview unavailable":"No address for map preview"}),n.jsx("p",{className:"text-blue-400 text-xs mt-1",children:"Use navigation buttons below"})]}),t&&n.jsxs("div",{className:"space-y-3",children:[n.jsx("h3",{className:"text-sm font-semibold text-blue-200",children:"Open in Navigation App"}),n.jsxs(_,{onClick:s,className:"w-full justify-start bg-white/10 hover:bg-white/20 text-white border border-white/20","data-testid":"button-apple-maps",children:[n.jsx(xa,{className:"w-4 h-4 mr-3"}),"Open in Apple Maps"]}),n.jsxs(_,{onClick:a,className:"w-full justify-start bg-white/10 hover:bg-white/20 text-white border border-white/20","data-testid":"button-google-maps",children:[n.jsx(xa,{className:"w-4 h-4 mr-3"}),"Open in Google Maps"]})]}),n.jsx("div",{className:"bg-blue-900/30 rounded-lg p-3 border border-blue-700/50",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-blue-300",children:"Estimated Drive Time"}),n.jsx("p",{className:"text-lg font-bold text-white",children:"15 min"})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-xs text-blue-300",children:"Distance"}),n.jsx("p",{className:"text-lg font-bold text-white",children:"5.2 mi"})]})]})})]})]})}const D0t=["I'm on my way! ETA 15 minutes.","Arrived at your location.","Running about 10 minutes late, apologies!","Job complete! Thank you for your business."];function $0t(){const{selectedJob:e,messages:t,sendMessage:r,makeCall:s,endCall:a,callStatus:i,activeCall:o}=Fh(),[l,c]=p.useState(""),[d,u]=p.useState(!1),[f,h]=p.useState(!1),{toast:m}=Ee(),g=p.useRef(null);p.useEffect(()=>{var w;(w=g.current)==null||w.scrollIntoView({behavior:"smooth"})},[t]);const x=async()=>{if(!(!l.trim()||!e)){u(!0);try{await r(l),c(""),m({title:"Message Sent",description:"Your message has been delivered"})}catch(w){m({title:"Send Failed",description:w.message||"Failed to send message",variant:"destructive"})}finally{u(!1)}}},y=w=>{c(w)},v=()=>{if(!(e!=null&&e.customerPhone)){m({title:"No Phone Number",description:"This customer does not have a phone number",variant:"destructive"});return}i==="in-progress"?a():s(e.customerPhone)},b=()=>{o&&(f?o.mute(!1):o.mute(!0),h(!f))};return e?n.jsxs(O,{className:"h-full flex flex-col bg-white/5 border-white/10",children:[n.jsx(ee,{className:"flex-shrink-0",children:n.jsxs(te,{className:"text-white text-lg flex items-center gap-2",children:[n.jsx(on,{className:"w-5 h-5"}),"Communications"]})}),n.jsxs(H,{className:"flex-1 overflow-hidden flex flex-col space-y-4",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsxs("div",{className:"bg-white/10 rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-semibold text-blue-200",children:"Customer Contact"}),n.jsx("p",{className:"text-white text-sm",children:e.customerPhone||"No phone"})]}),i!=="idle"&&i!=="disconnected"&&n.jsx("div",{className:`px-3 py-1 rounded-full text-xs font-semibold ${i==="in-progress"?"bg-green-500 text-white animate-pulse":i==="connecting"?"bg-yellow-500 text-white animate-pulse":"bg-gray-500 text-white"}`,children:i==="in-progress"?"Connected":i==="connecting"?"Connecting...":i==="ringing"?"Ringing...":"Ended"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(_,{onClick:v,disabled:i==="connecting",className:`flex-1 ${i==="in-progress"?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700"} text-white font-semibold h-12`,"data-testid":"button-call-customer",children:i==="connecting"?n.jsxs(n.Fragment,{children:[n.jsx(nt,{className:"w-5 h-5 mr-2 animate-spin"}),"Connecting..."]}):i==="in-progress"?n.jsxs(n.Fragment,{children:[n.jsx(sT,{className:"w-5 h-5 mr-2"}),"End Call"]}):n.jsxs(n.Fragment,{children:[n.jsx(bt,{className:"w-5 h-5 mr-2"}),"Call Customer"]})}),i==="in-progress"&&n.jsx(_,{onClick:b,variant:"outline",className:"border-white/20 text-white hover:bg-white/10 h-12","data-testid":"button-mute",children:f?n.jsx(dQ,{className:"w-5 h-5"}):n.jsx(Sp,{className:"w-5 h-5"})})]})]})}),n.jsxs("div",{className:"flex-shrink-0",children:[n.jsx("h3",{className:"text-sm font-semibold text-blue-200 mb-2",children:"Quick Replies"}),n.jsx("div",{className:"grid grid-cols-2 gap-2",children:D0t.map((w,N)=>n.jsx(_,{size:"sm",variant:"outline",onClick:()=>y(w),className:"text-xs border-white/20 text-slate-900 dark:text-white hover:bg-white/10 h-auto py-2 whitespace-normal text-left","data-testid":`button-quick-reply-${N}`,children:w},N))})]}),n.jsxs("div",{className:"flex-1 overflow-hidden flex flex-col",children:[n.jsx("h3",{className:"text-sm font-semibold text-blue-200 mb-2 flex-shrink-0",children:"Messages"}),n.jsxs("div",{className:"flex-1 overflow-y-auto bg-white/5 rounded-lg p-3 space-y-2 mb-3",children:[t.length===0?n.jsx("p",{className:"text-blue-300 text-xs text-center py-4",children:"No messages yet"}):t.slice().reverse().map(w=>n.jsxs("div",{className:`p-2 rounded-lg max-w-[85%] ${w.direction==="outbound"?"bg-blue-600 ml-auto text-white":"bg-white/20 text-white"}`,children:[n.jsx("p",{className:"text-sm",children:w.content}),n.jsx("p",{className:"text-xs opacity-70 mt-1",children:Ie(new Date(w.timestamp),"h:mm a")})]},w.id)),n.jsx("div",{ref:g})]}),n.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[n.jsx(un,{value:l,onChange:w=>c(w.target.value),placeholder:"Type a message...",className:"flex-1 bg-white/10 border-white/20 text-white placeholder:text-blue-300/50 min-h-[44px] max-h-[80px]",onKeyPress:w=>{w.key==="Enter"&&!w.shiftKey&&(w.preventDefault(),x())},"data-testid":"textarea-message"}),n.jsx(_,{onClick:x,disabled:d||!l.trim(),className:"bg-blue-600 hover:bg-blue-700 text-white h-[44px] px-4","data-testid":"button-send-message",children:d?n.jsx(nt,{className:"w-5 h-5 animate-spin"}):n.jsx(Vi,{className:"w-5 h-5"})})]})]})]})]}):n.jsx(O,{className:"h-full bg-white/5 border-white/10",children:n.jsx(H,{className:"flex items-center justify-center h-full",children:n.jsx("p",{className:"text-blue-300 text-sm",children:"Select a job to view communications"})})})}const O0t=["Before","After","Damage","Interior","Exterior"];function R0t(){const{selectedJob:e}=Fh(),[t,r]=p.useState([]),[s,a]=p.useState("Before"),i=p.useRef(null),{toast:o}=Ee(),l=()=>{var u;(u=i.current)==null||u.click()},c=async u=>{const f=u.target.files;if(!(!f||f.length===0||!e)){for(let h=0;h<f.length;h++){const m=f[h],g=Date.now()+h,x={id:g,url:URL.createObjectURL(m),fileName:m.name,uploading:!0};r(y=>[...y,x]);try{const y=new FormData;y.append("photo",m);const v=await fetch(`/api/tech/jobs/${e.id}/photos`,{method:"POST",body:y});if(!v.ok)throw new Error("Upload failed");const b=await v.json();r(w=>w.map(N=>N.id===g?{...N,id:b.photo.id,url:b.photo.url,uploading:!1}:N)),o({title:"Photo Uploaded",description:"Photo saved to Google Drive"})}catch(y){console.error("Photo upload error:",y),r(v=>v.map(b=>b.id===g?{...b,uploading:!1,error:!0}:b)),o({title:"Upload Failed",description:y.message||"Failed to upload photo",variant:"destructive"})}}i.current&&(i.current.value="")}},d=async u=>{o({title:"Retry Not Implemented",description:"Please capture a new photo"})};return e?n.jsxs(O,{className:"h-full flex flex-col bg-white/5 border-white/10",children:[n.jsx(ee,{className:"flex-shrink-0",children:n.jsxs(te,{className:"text-white text-lg flex items-center gap-2",children:[n.jsx(mu,{className:"w-5 h-5"}),"Photo Documentation"]})}),n.jsxs(H,{className:"flex-1 overflow-y-auto space-y-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-semibold text-blue-200 mb-2",children:"Photo Category"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:O0t.map(u=>n.jsx("button",{onClick:()=>a(u),className:`px-3 py-1 rounded-lg text-xs font-semibold transition-all ${s===u?"bg-blue-600 text-white":"bg-white/10 text-blue-300 hover:bg-white/20"}`,"data-testid":`button-category-${u.toLowerCase()}`,children:u},u))})]}),n.jsxs(_,{onClick:l,className:"w-full bg-green-600 hover:bg-green-700 text-white font-semibold h-14","data-testid":"button-capture-photo",children:[n.jsx(mu,{className:"w-5 h-5 mr-2"}),"Capture Photo (",s,")"]}),n.jsx("input",{ref:i,type:"file",accept:"image/*",capture:"environment",multiple:!0,onChange:c,className:"hidden"}),n.jsxs("div",{children:[n.jsx("div",{className:"flex items-center justify-between mb-2",children:n.jsxs("h3",{className:"text-sm font-semibold text-blue-200",children:["Uploaded Photos (",t.length,")"]})}),t.length===0?n.jsxs("div",{className:"bg-white/5 rounded-lg border-2 border-dashed border-white/20 p-8 flex flex-col items-center justify-center text-center",children:[n.jsx($i,{className:"w-12 h-12 text-blue-400 mb-3"}),n.jsx("p",{className:"text-blue-300 text-sm",children:"No photos uploaded yet"}),n.jsx("p",{className:"text-blue-400 text-xs mt-1",children:"Capture photos to document the job"})]}):n.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:t.map(u=>n.jsxs("div",{className:"relative aspect-square rounded-lg overflow-hidden bg-white/10 border border-white/20",children:[n.jsx("img",{src:u.url,alt:u.fileName,className:"w-full h-full object-cover"}),u.uploading&&n.jsx("div",{className:"absolute inset-0 bg-black/60 flex items-center justify-center",children:n.jsx(nt,{className:"w-8 h-8 text-white animate-spin"})}),u.error&&n.jsxs("div",{className:"absolute inset-0 bg-red-900/60 flex flex-col items-center justify-center gap-2",children:[n.jsx(Ws,{className:"w-8 h-8 text-white"}),n.jsx(_,{size:"sm",onClick:()=>d(u.id),className:"text-xs",children:"Retry"})]}),!u.uploading&&!u.error&&n.jsx("div",{className:"absolute top-2 right-2",children:n.jsx(bn,{className:"w-5 h-5 text-green-400 drop-shadow-lg"})}),n.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-2",children:n.jsx("p",{className:"text-white text-xs truncate",children:u.fileName})})]},u.id))})]}),n.jsx("div",{className:"bg-blue-900/30 rounded-lg p-3 border border-blue-700/50",children:n.jsxs("p",{className:"text-xs text-blue-200",children:[n.jsx("strong",{children:"Tip:"})," Capture before/after photos for quality documentation. Photos are automatically uploaded to Google Drive."]})})]})]}):n.jsx(O,{className:"h-full bg-white/5 border-white/10",children:n.jsx(H,{className:"flex items-center justify-center h-full",children:n.jsx("p",{className:"text-blue-300 text-sm",children:"Select a job to upload photos"})})})}function F0t({onMarkOnSite:e,onEmergencyCall:t,onQuickPhoto:r,onNextJob:s,onQuickBooking:a,disabled:i=!1}){return n.jsx("footer",{className:"fixed bottom-0 left-0 right-0 h-[60px] bg-blue-950/95 backdrop-blur-lg border-t border-blue-800 z-50",children:n.jsxs("div",{className:"h-full px-2 md:px-4 flex items-center justify-center gap-1.5 md:gap-2",children:[n.jsxs(_,{size:"lg",onClick:a,className:"flex-1 max-w-[170px] h-12 bg-cyan-600 hover:bg-cyan-700 text-white font-semibold","data-testid":"button-quick-booking",children:[n.jsx(R0e,{className:"w-5 h-5 mr-1.5"}),n.jsx("span",{className:"hidden sm:inline",children:"Quick"})," Book"]}),n.jsxs(_,{size:"lg",onClick:e,disabled:i,className:"flex-1 max-w-[170px] h-12 bg-purple-600 hover:bg-purple-700 text-white font-semibold","data-testid":"button-quick-on-site",children:[n.jsx(zr,{className:"w-5 h-5 mr-1.5"}),n.jsx("span",{className:"hidden sm:inline",children:"Mark"})," On-Site"]}),n.jsxs(_,{size:"lg",onClick:t,className:"flex-1 max-w-[170px] h-12 bg-red-600 hover:bg-red-700 text-white font-semibold","data-testid":"button-emergency-call",children:[n.jsx(bt,{className:"w-5 h-5 mr-1.5"}),n.jsx("span",{className:"hidden sm:inline",children:"Emergency"})," Call"]}),n.jsxs(_,{size:"lg",onClick:r,disabled:i,className:"flex-1 max-w-[170px] h-12 bg-green-600 hover:bg-green-700 text-white font-semibold","data-testid":"button-quick-photo",children:[n.jsx(mu,{className:"w-5 h-5 mr-1.5"}),n.jsx("span",{className:"hidden sm:inline",children:"Quick"})," Photo"]}),n.jsxs(_,{size:"lg",onClick:s,disabled:i,className:"flex-1 max-w-[170px] h-12 bg-blue-600 hover:bg-blue-700 text-white font-semibold","data-testid":"button-next-job",children:[n.jsx("span",{className:"hidden sm:inline",children:"Next"})," Job",n.jsx(Gc,{className:"w-5 h-5 ml-1.5"})]})]})})}function z0t(){const{isInstallable:e,isInstalled:t,promptInstall:r}=lT(),[s,a]=p.useState(!1);return t||!e||s?null:n.jsx("div",{className:"fixed top-20 left-1/2 -translate-x-1/2 z-50 w-full max-w-2xl px-4 animate-in slide-in-from-top",children:n.jsx(O,{className:"bg-gradient-to-r from-blue-600 via-cyan-600 to-blue-600 text-white border-0 shadow-2xl backdrop-blur-lg",children:n.jsx("div",{className:"p-6",children:n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx("div",{className:"flex-shrink-0 p-4 bg-white/20 rounded-2xl backdrop-blur-sm",children:n.jsx(Qc,{className:"h-8 w-8"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-bold text-lg mb-2",children:"Install Technician App"}),n.jsx("p",{className:"text-sm text-blue-50 mb-3",children:"Get the best iPad experience with fullscreen mode, offline access, and instant access from your home screen"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2 text-xs",children:[n.jsxs("div",{className:"flex items-center gap-2 bg-white/10 rounded-lg p-2",children:[n.jsx(K0e,{className:"h-4 w-4 flex-shrink-0"}),n.jsx("span",{children:"Fullscreen Mode"})]}),n.jsxs("div",{className:"flex items-center gap-2 bg-white/10 rounded-lg p-2",children:[n.jsx(pu,{className:"h-4 w-4 flex-shrink-0"}),n.jsx("span",{children:"Works Offline"})]}),n.jsxs("div",{className:"flex items-center gap-2 bg-white/10 rounded-lg p-2",children:[n.jsx(Qc,{className:"h-4 w-4 flex-shrink-0"}),n.jsx("span",{children:"Quick Access"})]})]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(_,{size:"sm",variant:"ghost",className:"text-white hover:bg-white/20 h-9 w-9 p-0",onClick:()=>a(!0),"data-testid":"button-dismiss-technician-install",children:n.jsx(Jr,{className:"h-5 w-5"})}),n.jsx(_,{size:"sm",className:"bg-white text-blue-600 hover:bg-blue-50 font-semibold px-6",onClick:r,"data-testid":"button-install-technician-app",children:"Install Now"})]})]})})})})}const B0t=[{id:99901,customerId:1,serviceId:1,scheduledTime:new Date(new Date().setHours(10,0,0,0)).toISOString(),status:"assigned",technicianId:null,customerPhone:"+1234567890",customerName:"John Smith",customerAddress:"123 Main St, San Francisco, CA 94102",latitude:"37.7749",longitude:"-122.4194",jobNotes:null,statusUpdatedAt:null},{id:99902,customerId:2,serviceId:2,scheduledTime:new Date(new Date().setHours(13,30,0,0)).toISOString(),status:"en_route",technicianId:1,customerPhone:"+1234567891",customerName:"Sarah Johnson",customerAddress:"456 Oak Ave, San Francisco, CA 94103",latitude:"37.7699",longitude:"-122.4311",jobNotes:"Customer prefers exterior detail only",statusUpdatedAt:new Date().toISOString()},{id:99903,customerId:3,serviceId:3,scheduledTime:new Date(new Date().setHours(15,0,0,0)).toISOString(),status:"scheduled",technicianId:null,customerPhone:"+1234567892",customerName:"Mike Davis",customerAddress:"789 Pine St, San Francisco, CA 94104",latitude:"37.7899",longitude:"-122.4036",jobNotes:null,statusUpdatedAt:null}];function U0t({demoMode:e,onToggleDemo:t}){const[r,s]=p.useState(!1),[a,i]=p.useState(!1),{selectedJob:o,updateJobStatus:l,jobs:c,queuedActions:d,isOnline:u,makeCall:f}=Fh(),{toast:h}=Ee(),m=p.useRef(null),[,g]=zt();p.useEffect(()=>{const S=()=>{const C=window.innerHeight>window.innerWidth,k=window.innerWidth<768;s(C&&!k)};return S(),window.addEventListener("resize",S),window.addEventListener("orientationchange",S),()=>{window.removeEventListener("resize",S),window.removeEventListener("orientationchange",S)}},[]);const x=async()=>{if(!o){h({title:"No Job Selected",description:"Please select a job first",variant:"destructive"});return}if(e){h({title:"Demo Mode",description:"This action is disabled in demo mode"});return}try{await l("on_site"),h({title:"Status Updated",description:"Marked as on-site"})}catch{h({title:"Update Failed",description:"Failed to update status",variant:"destructive"})}},y=async()=>{const S="+19188565711";try{await f(S),h({title:"Calling Office",description:"Connecting via WebRTC..."})}catch(C){console.error("Failed to make WebRTC call:",C),window.location.href=`tel:${S}`,h({title:"Call Failed",description:"Trying traditional phone call instead",variant:"destructive"})}},v=()=>{var S;if(!o){h({title:"No Job Selected",description:"Please select a job first",variant:"destructive"});return}if(e){h({title:"Demo Mode",description:"Photo upload is disabled in demo mode"});return}(S=m.current)==null||S.click()},b=async S=>{var A;const C=(A=S.target.files)==null?void 0:A[0];if(!C||!o)return;if(!["image/jpeg","image/jpg","image/png","image/gif"].includes(C.type)){h({title:"Invalid File Type",description:"Please select a JPEG, PNG, or GIF image",variant:"destructive"});return}const M=5*1024*1024;if(C.size>M){h({title:"File Too Large",description:"Image must be less than 5MB",variant:"destructive"});return}i(!0);try{const P=new FormData;if(P.append("photo",C),P.append("jobId",o.id.toString()),!(await fetch("/api/upload-photo",{method:"POST",body:P})).ok)throw new Error("Upload failed");h({title:"Photo Uploaded",description:"Photo captured and uploaded successfully"}),m.current&&(m.current.value="")}catch(P){console.error("Photo upload error:",P),h({title:"Upload Failed",description:"Failed to upload photo. Please try again.",variant:"destructive"})}finally{i(!1)}},w=()=>{const S=c.findIndex(k=>k.id===(o==null?void 0:o.id)),C=c[S+1];h(C?{title:"Next Job",description:`Navigating to ${C.customerName}`}:{title:"No More Jobs",description:"This is the last job for today"})},N=S=>{t(S),h(S?{title:"Demo Mode Activated",description:"3 sample jobs loaded for preview"}:{title:"Demo Mode Deactivated",description:"Showing real jobs from your calendar"})},j=()=>{g("/quick-booking")};return n.jsxs(P0t,{technicianName:"Technician",technicianStatus:o?"on_job":"available",shiftStart:Ie(new Date().setHours(8,0,0,0),"h:mm a"),jobsCompleted:c.filter(S=>S.status==="completed").length,totalJobs:c.length,demoMode:e,onToggleDemo:t,children:[n.jsx(z0t,{}),e&&n.jsxs("div",{className:"bg-red-600 text-white px-4 py-2 text-center font-semibold flex items-center justify-center gap-2 text-sm",children:[n.jsx(Wt,{className:"w-4 h-4"})," DEMO MODE ACTIVE - Sample data for preview only"]}),!u&&n.jsxs("div",{className:"bg-orange-600 text-white px-4 py-2 text-center font-semibold flex items-center justify-center gap-2 text-sm",children:[n.jsx(Wt,{className:"w-4 h-4"}),"Working Offline ",d.length>0&&`- ${d.length} actions queued for sync`]}),e&&d.length>0&&n.jsx("div",{className:"px-4 py-3 bg-yellow-500/10 border-b border-yellow-500/30",children:n.jsxs(O,{className:"border-yellow-500/50 bg-yellow-500/10",children:[n.jsx(ee,{className:"pb-3",children:n.jsxs(te,{className:"text-sm flex items-center gap-2 text-yellow-700 dark:text-yellow-400",children:[n.jsx(Wt,{className:"h-4 w-4"}),"Demo Actions Queued (",d.length,")"]})}),n.jsxs(H,{className:"space-y-2",children:[d.slice(-3).map(S=>n.jsx("div",{className:"text-xs text-muted-foreground bg-white/50 dark:bg-black/20 rounded px-2 py-1",children:S.type==="status_update"?`Status  ${S.payload.status}`:"Message sent"},S.id)),d.length>3&&n.jsxs("div",{className:"text-xs text-muted-foreground italic",children:["...and ",d.length-3," more"]})]})]})}),r&&n.jsxs("div",{className:"bg-orange-600 text-white px-4 py-2 text-center font-semibold flex items-center justify-center gap-2 text-sm",children:[n.jsx(pu,{className:"w-4 h-4"}),"Rotate device to landscape for best experience"]}),n.jsxs("div",{className:"h-full flex overflow-hidden",children:[n.jsx("aside",{className:"w-80 flex-shrink-0 bg-blue-900/50 border-r border-blue-800 hidden lg:block overflow-y-auto",children:n.jsx(AB,{demoMode:e,onToggleDemo:N})}),n.jsx("main",{className:"flex-1 overflow-y-auto pb-[60px]",children:n.jsx("div",{className:"h-full p-4",children:n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-4 h-full",children:[n.jsx("div",{className:"min-h-[400px] lg:min-h-full",children:n.jsx(I0t,{})}),n.jsx("div",{className:"min-h-[400px] lg:min-h-full",children:n.jsx(L0t,{})}),n.jsx("div",{className:"min-h-[400px] lg:min-h-full",children:n.jsx($0t,{})}),n.jsx("div",{className:"min-h-[400px] lg:min-h-full xl:col-span-3",children:n.jsx(R0t,{})})]})})}),n.jsx("div",{className:"lg:hidden fixed top-16 left-0 right-0 bg-blue-900/95 backdrop-blur-lg border-b border-blue-800 z-40 max-h-[50vh] overflow-y-auto",children:n.jsx(AB,{demoMode:e,onToggleDemo:N})})]}),n.jsx("input",{ref:m,type:"file",accept:"image/*",capture:"environment",onChange:b,className:"hidden","data-testid":"input-camera-capture"}),n.jsx(F0t,{onMarkOnSite:x,onEmergencyCall:y,onQuickPhoto:v,onNextJob:w,onQuickBooking:j,disabled:!o||a})]})}function V0t(){const[e,t]=p.useState(()=>localStorage.getItem("technicianDemoMode")==="true"),[r,s]=p.useState(!1),[a,i]=p.useState(!1),o=()=>{t(l=>{const c=!l;return localStorage.setItem("technicianDemoMode",String(c)),c}),i(!0)};return n.jsx(M0t,{demoMode:e,demoJobs:B0t,children:n.jsx(H0t,{demoMode:e,toggleDemoMode:o,hasAutoEnabled:r,setHasAutoEnabled:s,userPreferenceSet:a,setUserPreferenceSet:i})})}function H0t({demoMode:e,toggleDemoMode:t,hasAutoEnabled:r,setHasAutoEnabled:s,userPreferenceSet:a,setUserPreferenceSet:i}){const{jobs:o,isLoadingJobs:l}=Fh(),{toast:c}=Ee();p.useEffect(()=>{!l&&!a&&!r&&o.length===0&&(console.log("[TECH PAGE] No real jobs found - auto-enabling demo mode"),t(),s(!0),c({title:"Demo Mode Activated",description:"No scheduled jobs found. Showing 3 sample jobs for preview."})),o.length>0&&r&&s(!1)},[l,o.length,a,r,t,s,c]);const d=u=>{setDemoMode(u),localStorage.setItem("technicianDemoMode",String(u)),c(u?{title:"Demo Mode Activated",description:"3 sample jobs loaded for preview"}:{title:"Demo Mode Deactivated",description:"Showing real jobs from your calendar"})};return n.jsx(U0t,{demoMode:e,onToggleDemo:d})}var W0t=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},Aue={},Ki={};let v9;const q0t=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];Ki.getSymbolSize=function(t){if(!t)throw new Error('"version" cannot be null or undefined');if(t<1||t>40)throw new Error('"version" should be in range from 1 to 40');return t*4+17};Ki.getSymbolTotalCodewords=function(t){return q0t[t]};Ki.getBCHDigit=function(e){let t=0;for(;e!==0;)t++,e>>>=1;return t};Ki.setToSJISFunction=function(t){if(typeof t!="function")throw new Error('"toSJISFunc" is not a valid function.');v9=t};Ki.isKanjiModeEnabled=function(){return typeof v9<"u"};Ki.toSJIS=function(t){return v9(t)};var eS={};(function(e){e.L={bit:1},e.M={bit:0},e.Q={bit:3},e.H={bit:2};function t(r){if(typeof r!="string")throw new Error("Param is not a string");switch(r.toLowerCase()){case"l":case"low":return e.L;case"m":case"medium":return e.M;case"q":case"quartile":return e.Q;case"h":case"high":return e.H;default:throw new Error("Unknown EC Level: "+r)}}e.isValid=function(s){return s&&typeof s.bit<"u"&&s.bit>=0&&s.bit<4},e.from=function(s,a){if(e.isValid(s))return s;try{return t(s)}catch{return a}}})(eS);function Eue(){this.buffer=[],this.length=0}Eue.prototype={get:function(e){const t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)===1},put:function(e,t){for(let r=0;r<t;r++)this.putBit((e>>>t-r-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(e){const t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}};var G0t=Eue;function H1(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}H1.prototype.set=function(e,t,r,s){const a=e*this.size+t;this.data[a]=r,s&&(this.reservedBit[a]=!0)};H1.prototype.get=function(e,t){return this.data[e*this.size+t]};H1.prototype.xor=function(e,t,r){this.data[e*this.size+t]^=r};H1.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]};var Y0t=H1,Iue={};(function(e){const t=Ki.getSymbolSize;e.getRowColCoords=function(s){if(s===1)return[];const a=Math.floor(s/7)+2,i=t(s),o=i===145?26:Math.ceil((i-13)/(2*a-2))*2,l=[i-7];for(let c=1;c<a-1;c++)l[c]=l[c-1]-o;return l.push(6),l.reverse()},e.getPositions=function(s){const a=[],i=e.getRowColCoords(s),o=i.length;for(let l=0;l<o;l++)for(let c=0;c<o;c++)l===0&&c===0||l===0&&c===o-1||l===o-1&&c===0||a.push([i[l],i[c]]);return a}})(Iue);var Lue={};const Q0t=Ki.getSymbolSize,IB=7;Lue.getPositions=function(t){const r=Q0t(t);return[[0,0],[r-IB,0],[0,r-IB]]};var Due={};(function(e){e.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const t={N1:3,N2:3,N3:40,N4:10};e.isValid=function(a){return a!=null&&a!==""&&!isNaN(a)&&a>=0&&a<=7},e.from=function(a){return e.isValid(a)?parseInt(a,10):void 0},e.getPenaltyN1=function(a){const i=a.size;let o=0,l=0,c=0,d=null,u=null;for(let f=0;f<i;f++){l=c=0,d=u=null;for(let h=0;h<i;h++){let m=a.get(f,h);m===d?l++:(l>=5&&(o+=t.N1+(l-5)),d=m,l=1),m=a.get(h,f),m===u?c++:(c>=5&&(o+=t.N1+(c-5)),u=m,c=1)}l>=5&&(o+=t.N1+(l-5)),c>=5&&(o+=t.N1+(c-5))}return o},e.getPenaltyN2=function(a){const i=a.size;let o=0;for(let l=0;l<i-1;l++)for(let c=0;c<i-1;c++){const d=a.get(l,c)+a.get(l,c+1)+a.get(l+1,c)+a.get(l+1,c+1);(d===4||d===0)&&o++}return o*t.N2},e.getPenaltyN3=function(a){const i=a.size;let o=0,l=0,c=0;for(let d=0;d<i;d++){l=c=0;for(let u=0;u<i;u++)l=l<<1&2047|a.get(d,u),u>=10&&(l===1488||l===93)&&o++,c=c<<1&2047|a.get(u,d),u>=10&&(c===1488||c===93)&&o++}return o*t.N3},e.getPenaltyN4=function(a){let i=0;const o=a.data.length;for(let c=0;c<o;c++)i+=a.data[c];return Math.abs(Math.ceil(i*100/o/5)-10)*t.N4};function r(s,a,i){switch(s){case e.Patterns.PATTERN000:return(a+i)%2===0;case e.Patterns.PATTERN001:return a%2===0;case e.Patterns.PATTERN010:return i%3===0;case e.Patterns.PATTERN011:return(a+i)%3===0;case e.Patterns.PATTERN100:return(Math.floor(a/2)+Math.floor(i/3))%2===0;case e.Patterns.PATTERN101:return a*i%2+a*i%3===0;case e.Patterns.PATTERN110:return(a*i%2+a*i%3)%2===0;case e.Patterns.PATTERN111:return(a*i%3+(a+i)%2)%2===0;default:throw new Error("bad maskPattern:"+s)}}e.applyMask=function(a,i){const o=i.size;for(let l=0;l<o;l++)for(let c=0;c<o;c++)i.isReserved(c,l)||i.xor(c,l,r(a,c,l))},e.getBestMask=function(a,i){const o=Object.keys(e.Patterns).length;let l=0,c=1/0;for(let d=0;d<o;d++){i(d),e.applyMask(d,a);const u=e.getPenaltyN1(a)+e.getPenaltyN2(a)+e.getPenaltyN3(a)+e.getPenaltyN4(a);e.applyMask(d,a),u<c&&(c=u,l=d)}return l}})(Due);var tS={};const Kd=eS,Zb=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],Xb=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];tS.getBlocksCount=function(t,r){switch(r){case Kd.L:return Zb[(t-1)*4+0];case Kd.M:return Zb[(t-1)*4+1];case Kd.Q:return Zb[(t-1)*4+2];case Kd.H:return Zb[(t-1)*4+3];default:return}};tS.getTotalCodewordsCount=function(t,r){switch(r){case Kd.L:return Xb[(t-1)*4+0];case Kd.M:return Xb[(t-1)*4+1];case Kd.Q:return Xb[(t-1)*4+2];case Kd.H:return Xb[(t-1)*4+3];default:return}};var $ue={},nS={};const Wx=new Uint8Array(512),NN=new Uint8Array(256);(function(){let t=1;for(let r=0;r<255;r++)Wx[r]=t,NN[t]=r,t<<=1,t&256&&(t^=285);for(let r=255;r<512;r++)Wx[r]=Wx[r-255]})();nS.log=function(t){if(t<1)throw new Error("log("+t+")");return NN[t]};nS.exp=function(t){return Wx[t]};nS.mul=function(t,r){return t===0||r===0?0:Wx[NN[t]+NN[r]]};(function(e){const t=nS;e.mul=function(s,a){const i=new Uint8Array(s.length+a.length-1);for(let o=0;o<s.length;o++)for(let l=0;l<a.length;l++)i[o+l]^=t.mul(s[o],a[l]);return i},e.mod=function(s,a){let i=new Uint8Array(s);for(;i.length-a.length>=0;){const o=i[0];for(let c=0;c<a.length;c++)i[c]^=t.mul(a[c],o);let l=0;for(;l<i.length&&i[l]===0;)l++;i=i.slice(l)}return i},e.generateECPolynomial=function(s){let a=new Uint8Array([1]);for(let i=0;i<s;i++)a=e.mul(a,new Uint8Array([1,t.exp(i)]));return a}})($ue);const Oue=$ue;function b9(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}b9.prototype.initialize=function(t){this.degree=t,this.genPoly=Oue.generateECPolynomial(this.degree)};b9.prototype.encode=function(t){if(!this.genPoly)throw new Error("Encoder not initialized");const r=new Uint8Array(t.length+this.degree);r.set(t);const s=Oue.mod(r,this.genPoly),a=this.degree-s.length;if(a>0){const i=new Uint8Array(this.degree);return i.set(s,a),i}return s};var K0t=b9,Rue={},Gu={},w9={};w9.isValid=function(t){return!isNaN(t)&&t>=1&&t<=40};var lc={};const Fue="[0-9]+",J0t="[A-Z $%*+\\-./:]+";let $v="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";$v=$v.replace(/u/g,"\\u");const Z0t="(?:(?![A-Z0-9 $%*+\\-./:]|"+$v+`)(?:.|[\r
]))+`;lc.KANJI=new RegExp($v,"g");lc.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");lc.BYTE=new RegExp(Z0t,"g");lc.NUMERIC=new RegExp(Fue,"g");lc.ALPHANUMERIC=new RegExp(J0t,"g");const X0t=new RegExp("^"+$v+"$"),egt=new RegExp("^"+Fue+"$"),tgt=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");lc.testKanji=function(t){return X0t.test(t)};lc.testNumeric=function(t){return egt.test(t)};lc.testAlphanumeric=function(t){return tgt.test(t)};(function(e){const t=w9,r=lc;e.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},e.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},e.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},e.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},e.MIXED={bit:-1},e.getCharCountIndicator=function(i,o){if(!i.ccBits)throw new Error("Invalid mode: "+i);if(!t.isValid(o))throw new Error("Invalid version: "+o);return o>=1&&o<10?i.ccBits[0]:o<27?i.ccBits[1]:i.ccBits[2]},e.getBestModeForData=function(i){return r.testNumeric(i)?e.NUMERIC:r.testAlphanumeric(i)?e.ALPHANUMERIC:r.testKanji(i)?e.KANJI:e.BYTE},e.toString=function(i){if(i&&i.id)return i.id;throw new Error("Invalid mode")},e.isValid=function(i){return i&&i.bit&&i.ccBits};function s(a){if(typeof a!="string")throw new Error("Param is not a string");switch(a.toLowerCase()){case"numeric":return e.NUMERIC;case"alphanumeric":return e.ALPHANUMERIC;case"kanji":return e.KANJI;case"byte":return e.BYTE;default:throw new Error("Unknown mode: "+a)}}e.from=function(i,o){if(e.isValid(i))return i;try{return s(i)}catch{return o}}})(Gu);(function(e){const t=Ki,r=tS,s=eS,a=Gu,i=w9,o=7973,l=t.getBCHDigit(o);function c(h,m,g){for(let x=1;x<=40;x++)if(m<=e.getCapacity(x,g,h))return x}function d(h,m){return a.getCharCountIndicator(h,m)+4}function u(h,m){let g=0;return h.forEach(function(x){const y=d(x.mode,m);g+=y+x.getBitsLength()}),g}function f(h,m){for(let g=1;g<=40;g++)if(u(h,g)<=e.getCapacity(g,m,a.MIXED))return g}e.from=function(m,g){return i.isValid(m)?parseInt(m,10):g},e.getCapacity=function(m,g,x){if(!i.isValid(m))throw new Error("Invalid QR Code version");typeof x>"u"&&(x=a.BYTE);const y=t.getSymbolTotalCodewords(m),v=r.getTotalCodewordsCount(m,g),b=(y-v)*8;if(x===a.MIXED)return b;const w=b-d(x,m);switch(x){case a.NUMERIC:return Math.floor(w/10*3);case a.ALPHANUMERIC:return Math.floor(w/11*2);case a.KANJI:return Math.floor(w/13);case a.BYTE:default:return Math.floor(w/8)}},e.getBestVersionForData=function(m,g){let x;const y=s.from(g,s.M);if(Array.isArray(m)){if(m.length>1)return f(m,y);if(m.length===0)return 1;x=m[0]}else x=m;return c(x.mode,x.getLength(),y)},e.getEncodedBits=function(m){if(!i.isValid(m)||m<7)throw new Error("Invalid QR Code version");let g=m<<12;for(;t.getBCHDigit(g)-l>=0;)g^=o<<t.getBCHDigit(g)-l;return m<<12|g}})(Rue);var zue={};const Q5=Ki,Bue=1335,ngt=21522,LB=Q5.getBCHDigit(Bue);zue.getEncodedBits=function(t,r){const s=t.bit<<3|r;let a=s<<10;for(;Q5.getBCHDigit(a)-LB>=0;)a^=Bue<<Q5.getBCHDigit(a)-LB;return(s<<10|a)^ngt};var Uue={};const rgt=Gu;function v0(e){this.mode=rgt.NUMERIC,this.data=e.toString()}v0.getBitsLength=function(t){return 10*Math.floor(t/3)+(t%3?t%3*3+1:0)};v0.prototype.getLength=function(){return this.data.length};v0.prototype.getBitsLength=function(){return v0.getBitsLength(this.data.length)};v0.prototype.write=function(t){let r,s,a;for(r=0;r+3<=this.data.length;r+=3)s=this.data.substr(r,3),a=parseInt(s,10),t.put(a,10);const i=this.data.length-r;i>0&&(s=this.data.substr(r),a=parseInt(s,10),t.put(a,i*3+1))};var sgt=v0;const agt=Gu,vk=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function b0(e){this.mode=agt.ALPHANUMERIC,this.data=e}b0.getBitsLength=function(t){return 11*Math.floor(t/2)+6*(t%2)};b0.prototype.getLength=function(){return this.data.length};b0.prototype.getBitsLength=function(){return b0.getBitsLength(this.data.length)};b0.prototype.write=function(t){let r;for(r=0;r+2<=this.data.length;r+=2){let s=vk.indexOf(this.data[r])*45;s+=vk.indexOf(this.data[r+1]),t.put(s,11)}this.data.length%2&&t.put(vk.indexOf(this.data[r]),6)};var igt=b0;const ogt=Gu;function w0(e){this.mode=ogt.BYTE,typeof e=="string"?this.data=new TextEncoder().encode(e):this.data=new Uint8Array(e)}w0.getBitsLength=function(t){return t*8};w0.prototype.getLength=function(){return this.data.length};w0.prototype.getBitsLength=function(){return w0.getBitsLength(this.data.length)};w0.prototype.write=function(e){for(let t=0,r=this.data.length;t<r;t++)e.put(this.data[t],8)};var lgt=w0;const cgt=Gu,dgt=Ki;function j0(e){this.mode=cgt.KANJI,this.data=e}j0.getBitsLength=function(t){return t*13};j0.prototype.getLength=function(){return this.data.length};j0.prototype.getBitsLength=function(){return j0.getBitsLength(this.data.length)};j0.prototype.write=function(e){let t;for(t=0;t<this.data.length;t++){let r=dgt.toSJIS(this.data[t]);if(r>=33088&&r<=40956)r-=33088;else if(r>=57408&&r<=60351)r-=49472;else throw new Error("Invalid SJIS character: "+this.data[t]+`
Make sure your charset is UTF-8`);r=(r>>>8&255)*192+(r&255),e.put(r,13)}};var ugt=j0,Vue={exports:{}};(function(e){var t={single_source_shortest_paths:function(r,s,a){var i={},o={};o[s]=0;var l=t.PriorityQueue.make();l.push(s,0);for(var c,d,u,f,h,m,g,x,y;!l.empty();){c=l.pop(),d=c.value,f=c.cost,h=r[d]||{};for(u in h)h.hasOwnProperty(u)&&(m=h[u],g=f+m,x=o[u],y=typeof o[u]>"u",(y||x>g)&&(o[u]=g,l.push(u,g),i[u]=d))}if(typeof a<"u"&&typeof o[a]>"u"){var v=["Could not find a path from ",s," to ",a,"."].join("");throw new Error(v)}return i},extract_shortest_path_from_predecessor_list:function(r,s){for(var a=[],i=s;i;)a.push(i),r[i],i=r[i];return a.reverse(),a},find_path:function(r,s,a){var i=t.single_source_shortest_paths(r,s,a);return t.extract_shortest_path_from_predecessor_list(i,a)},PriorityQueue:{make:function(r){var s=t.PriorityQueue,a={},i;r=r||{};for(i in s)s.hasOwnProperty(i)&&(a[i]=s[i]);return a.queue=[],a.sorter=r.sorter||s.default_sorter,a},default_sorter:function(r,s){return r.cost-s.cost},push:function(r,s){var a={value:r,cost:s};this.queue.push(a),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};e.exports=t})(Vue);var fgt=Vue.exports;(function(e){const t=Gu,r=sgt,s=igt,a=lgt,i=ugt,o=lc,l=Ki,c=fgt;function d(v){return unescape(encodeURIComponent(v)).length}function u(v,b,w){const N=[];let j;for(;(j=v.exec(w))!==null;)N.push({data:j[0],index:j.index,mode:b,length:j[0].length});return N}function f(v){const b=u(o.NUMERIC,t.NUMERIC,v),w=u(o.ALPHANUMERIC,t.ALPHANUMERIC,v);let N,j;return l.isKanjiModeEnabled()?(N=u(o.BYTE,t.BYTE,v),j=u(o.KANJI,t.KANJI,v)):(N=u(o.BYTE_KANJI,t.BYTE,v),j=[]),b.concat(w,N,j).sort(function(C,k){return C.index-k.index}).map(function(C){return{data:C.data,mode:C.mode,length:C.length}})}function h(v,b){switch(b){case t.NUMERIC:return r.getBitsLength(v);case t.ALPHANUMERIC:return s.getBitsLength(v);case t.KANJI:return i.getBitsLength(v);case t.BYTE:return a.getBitsLength(v)}}function m(v){return v.reduce(function(b,w){const N=b.length-1>=0?b[b.length-1]:null;return N&&N.mode===w.mode?(b[b.length-1].data+=w.data,b):(b.push(w),b)},[])}function g(v){const b=[];for(let w=0;w<v.length;w++){const N=v[w];switch(N.mode){case t.NUMERIC:b.push([N,{data:N.data,mode:t.ALPHANUMERIC,length:N.length},{data:N.data,mode:t.BYTE,length:N.length}]);break;case t.ALPHANUMERIC:b.push([N,{data:N.data,mode:t.BYTE,length:N.length}]);break;case t.KANJI:b.push([N,{data:N.data,mode:t.BYTE,length:d(N.data)}]);break;case t.BYTE:b.push([{data:N.data,mode:t.BYTE,length:d(N.data)}])}}return b}function x(v,b){const w={},N={start:{}};let j=["start"];for(let S=0;S<v.length;S++){const C=v[S],k=[];for(let M=0;M<C.length;M++){const A=C[M],P=""+S+M;k.push(P),w[P]={node:A,lastCount:0},N[P]={};for(let T=0;T<j.length;T++){const I=j[T];w[I]&&w[I].node.mode===A.mode?(N[I][P]=h(w[I].lastCount+A.length,A.mode)-h(w[I].lastCount,A.mode),w[I].lastCount+=A.length):(w[I]&&(w[I].lastCount=A.length),N[I][P]=h(A.length,A.mode)+4+t.getCharCountIndicator(A.mode,b))}}j=k}for(let S=0;S<j.length;S++)N[j[S]].end=0;return{map:N,table:w}}function y(v,b){let w;const N=t.getBestModeForData(v);if(w=t.from(b,N),w!==t.BYTE&&w.bit<N.bit)throw new Error('"'+v+'" cannot be encoded with mode '+t.toString(w)+`.
 Suggested mode is: `+t.toString(N));switch(w===t.KANJI&&!l.isKanjiModeEnabled()&&(w=t.BYTE),w){case t.NUMERIC:return new r(v);case t.ALPHANUMERIC:return new s(v);case t.KANJI:return new i(v);case t.BYTE:return new a(v)}}e.fromArray=function(b){return b.reduce(function(w,N){return typeof N=="string"?w.push(y(N,null)):N.data&&w.push(y(N.data,N.mode)),w},[])},e.fromString=function(b,w){const N=f(b,l.isKanjiModeEnabled()),j=g(N),S=x(j,w),C=c.find_path(S.map,"start","end"),k=[];for(let M=1;M<C.length-1;M++)k.push(S.table[C[M]].node);return e.fromArray(m(k))},e.rawSplit=function(b){return e.fromArray(f(b,l.isKanjiModeEnabled()))}})(Uue);const rS=Ki,bk=eS,hgt=G0t,mgt=Y0t,pgt=Iue,ggt=Lue,K5=Due,J5=tS,xgt=K0t,SN=Rue,ygt=zue,vgt=Gu,wk=Uue;function bgt(e,t){const r=e.size,s=ggt.getPositions(t);for(let a=0;a<s.length;a++){const i=s[a][0],o=s[a][1];for(let l=-1;l<=7;l++)if(!(i+l<=-1||r<=i+l))for(let c=-1;c<=7;c++)o+c<=-1||r<=o+c||(l>=0&&l<=6&&(c===0||c===6)||c>=0&&c<=6&&(l===0||l===6)||l>=2&&l<=4&&c>=2&&c<=4?e.set(i+l,o+c,!0,!0):e.set(i+l,o+c,!1,!0))}}function wgt(e){const t=e.size;for(let r=8;r<t-8;r++){const s=r%2===0;e.set(r,6,s,!0),e.set(6,r,s,!0)}}function jgt(e,t){const r=pgt.getPositions(t);for(let s=0;s<r.length;s++){const a=r[s][0],i=r[s][1];for(let o=-2;o<=2;o++)for(let l=-2;l<=2;l++)o===-2||o===2||l===-2||l===2||o===0&&l===0?e.set(a+o,i+l,!0,!0):e.set(a+o,i+l,!1,!0)}}function Ngt(e,t){const r=e.size,s=SN.getEncodedBits(t);let a,i,o;for(let l=0;l<18;l++)a=Math.floor(l/3),i=l%3+r-8-3,o=(s>>l&1)===1,e.set(a,i,o,!0),e.set(i,a,o,!0)}function jk(e,t,r){const s=e.size,a=ygt.getEncodedBits(t,r);let i,o;for(i=0;i<15;i++)o=(a>>i&1)===1,i<6?e.set(i,8,o,!0):i<8?e.set(i+1,8,o,!0):e.set(s-15+i,8,o,!0),i<8?e.set(8,s-i-1,o,!0):i<9?e.set(8,15-i-1+1,o,!0):e.set(8,15-i-1,o,!0);e.set(s-8,8,1,!0)}function Sgt(e,t){const r=e.size;let s=-1,a=r-1,i=7,o=0;for(let l=r-1;l>0;l-=2)for(l===6&&l--;;){for(let c=0;c<2;c++)if(!e.isReserved(a,l-c)){let d=!1;o<t.length&&(d=(t[o]>>>i&1)===1),e.set(a,l-c,d),i--,i===-1&&(o++,i=7)}if(a+=s,a<0||r<=a){a-=s,s=-s;break}}}function Cgt(e,t,r){const s=new hgt;r.forEach(function(c){s.put(c.mode.bit,4),s.put(c.getLength(),vgt.getCharCountIndicator(c.mode,e)),c.write(s)});const a=rS.getSymbolTotalCodewords(e),i=J5.getTotalCodewordsCount(e,t),o=(a-i)*8;for(s.getLengthInBits()+4<=o&&s.put(0,4);s.getLengthInBits()%8!==0;)s.putBit(0);const l=(o-s.getLengthInBits())/8;for(let c=0;c<l;c++)s.put(c%2?17:236,8);return kgt(s,e,t)}function kgt(e,t,r){const s=rS.getSymbolTotalCodewords(t),a=J5.getTotalCodewordsCount(t,r),i=s-a,o=J5.getBlocksCount(t,r),l=s%o,c=o-l,d=Math.floor(s/o),u=Math.floor(i/o),f=u+1,h=d-u,m=new xgt(h);let g=0;const x=new Array(o),y=new Array(o);let v=0;const b=new Uint8Array(e.buffer);for(let C=0;C<o;C++){const k=C<c?u:f;x[C]=b.slice(g,g+k),y[C]=m.encode(x[C]),g+=k,v=Math.max(v,k)}const w=new Uint8Array(s);let N=0,j,S;for(j=0;j<v;j++)for(S=0;S<o;S++)j<x[S].length&&(w[N++]=x[S][j]);for(j=0;j<h;j++)for(S=0;S<o;S++)w[N++]=y[S][j];return w}function Mgt(e,t,r,s){let a;if(Array.isArray(e))a=wk.fromArray(e);else if(typeof e=="string"){let d=t;if(!d){const u=wk.rawSplit(e);d=SN.getBestVersionForData(u,r)}a=wk.fromString(e,d||40)}else throw new Error("Invalid data");const i=SN.getBestVersionForData(a,r);if(!i)throw new Error("The amount of data is too big to be stored in a QR Code");if(!t)t=i;else if(t<i)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+i+`.
`);const o=Cgt(t,r,a),l=rS.getSymbolSize(t),c=new mgt(l);return bgt(c,t),wgt(c),jgt(c,t),jk(c,r,0),t>=7&&Ngt(c,t),Sgt(c,o),isNaN(s)&&(s=K5.getBestMask(c,jk.bind(null,c,r))),K5.applyMask(s,c),jk(c,r,s),{modules:c,version:t,errorCorrectionLevel:r,maskPattern:s,segments:a}}Aue.create=function(t,r){if(typeof t>"u"||t==="")throw new Error("No input text");let s=bk.M,a,i;return typeof r<"u"&&(s=bk.from(r.errorCorrectionLevel,bk.M),a=SN.from(r.version),i=K5.from(r.maskPattern),r.toSJISFunc&&rS.setToSJISFunction(r.toSJISFunc)),Mgt(t,a,s,i)};var Hue={},j9={};(function(e){function t(r){if(typeof r=="number"&&(r=r.toString()),typeof r!="string")throw new Error("Color should be defined as hex string");let s=r.slice().replace("#","").split("");if(s.length<3||s.length===5||s.length>8)throw new Error("Invalid hex color: "+r);(s.length===3||s.length===4)&&(s=Array.prototype.concat.apply([],s.map(function(i){return[i,i]}))),s.length===6&&s.push("F","F");const a=parseInt(s.join(""),16);return{r:a>>24&255,g:a>>16&255,b:a>>8&255,a:a&255,hex:"#"+s.slice(0,6).join("")}}e.getOptions=function(s){s||(s={}),s.color||(s.color={});const a=typeof s.margin>"u"||s.margin===null||s.margin<0?4:s.margin,i=s.width&&s.width>=21?s.width:void 0,o=s.scale||4;return{width:i,scale:i?4:o,margin:a,color:{dark:t(s.color.dark||"#000000ff"),light:t(s.color.light||"#ffffffff")},type:s.type,rendererOpts:s.rendererOpts||{}}},e.getScale=function(s,a){return a.width&&a.width>=s+a.margin*2?a.width/(s+a.margin*2):a.scale},e.getImageWidth=function(s,a){const i=e.getScale(s,a);return Math.floor((s+a.margin*2)*i)},e.qrToImageData=function(s,a,i){const o=a.modules.size,l=a.modules.data,c=e.getScale(o,i),d=Math.floor((o+i.margin*2)*c),u=i.margin*c,f=[i.color.light,i.color.dark];for(let h=0;h<d;h++)for(let m=0;m<d;m++){let g=(h*d+m)*4,x=i.color.light;if(h>=u&&m>=u&&h<d-u&&m<d-u){const y=Math.floor((h-u)/c),v=Math.floor((m-u)/c);x=f[l[y*o+v]?1:0]}s[g++]=x.r,s[g++]=x.g,s[g++]=x.b,s[g]=x.a}}})(j9);(function(e){const t=j9;function r(a,i,o){a.clearRect(0,0,i.width,i.height),i.style||(i.style={}),i.height=o,i.width=o,i.style.height=o+"px",i.style.width=o+"px"}function s(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}e.render=function(i,o,l){let c=l,d=o;typeof c>"u"&&(!o||!o.getContext)&&(c=o,o=void 0),o||(d=s()),c=t.getOptions(c);const u=t.getImageWidth(i.modules.size,c),f=d.getContext("2d"),h=f.createImageData(u,u);return t.qrToImageData(h.data,i,c),r(f,d,u),f.putImageData(h,0,0),d},e.renderToDataURL=function(i,o,l){let c=l;typeof c>"u"&&(!o||!o.getContext)&&(c=o,o=void 0),c||(c={});const d=e.render(i,o,c),u=c.type||"image/png",f=c.rendererOpts||{};return d.toDataURL(u,f.quality)}})(Hue);var Wue={};const _gt=j9;function DB(e,t){const r=e.a/255,s=t+'="'+e.hex+'"';return r<1?s+" "+t+'-opacity="'+r.toFixed(2).slice(1)+'"':s}function Nk(e,t,r){let s=e+t;return typeof r<"u"&&(s+=" "+r),s}function Pgt(e,t,r){let s="",a=0,i=!1,o=0;for(let l=0;l<e.length;l++){const c=Math.floor(l%t),d=Math.floor(l/t);!c&&!i&&(i=!0),e[l]?(o++,l>0&&c>0&&e[l-1]||(s+=i?Nk("M",c+r,.5+d+r):Nk("m",a,0),a=0,i=!1),c+1<t&&e[l+1]||(s+=Nk("h",o),o=0)):a++}return s}Wue.render=function(t,r,s){const a=_gt.getOptions(r),i=t.modules.size,o=t.modules.data,l=i+a.margin*2,c=a.color.light.a?"<path "+DB(a.color.light,"fill")+' d="M0 0h'+l+"v"+l+'H0z"/>':"",d="<path "+DB(a.color.dark,"stroke")+' d="'+Pgt(o,i,a.margin)+'"/>',u='viewBox="0 0 '+l+" "+l+'"',h='<svg xmlns="http://www.w3.org/2000/svg" '+(a.width?'width="'+a.width+'" height="'+a.width+'" ':"")+u+' shape-rendering="crispEdges">'+c+d+`</svg>
`;return typeof s=="function"&&s(null,h),h};const Tgt=W0t,Z5=Aue,que=Hue,Agt=Wue;function N9(e,t,r,s,a){const i=[].slice.call(arguments,1),o=i.length,l=typeof i[o-1]=="function";if(!l&&!Tgt())throw new Error("Callback required as last argument");if(l){if(o<2)throw new Error("Too few arguments provided");o===2?(a=r,r=t,t=s=void 0):o===3&&(t.getContext&&typeof a>"u"?(a=s,s=void 0):(a=s,s=r,r=t,t=void 0))}else{if(o<1)throw new Error("Too few arguments provided");return o===1?(r=t,t=s=void 0):o===2&&!t.getContext&&(s=r,r=t,t=void 0),new Promise(function(c,d){try{const u=Z5.create(r,s);c(e(u,t,s))}catch(u){d(u)}})}try{const c=Z5.create(r,s);a(null,e(c,t,s))}catch(c){a(c)}}Z5.create;var Egt=N9.bind(null,que.render);N9.bind(null,que.renderToDataURL);N9.bind(null,function(e,t,r){return Agt.render(e,r)});function Igt(){var E,F;const{toast:e}=Ee(),[t,r]=p.useState(null),[s,a]=p.useState(""),[i,o]=p.useState(!1),[l,c]=p.useState(!1),[d,u]=p.useState(""),[f,h]=p.useState(!1),[m,g]=p.useState(""),x=p.useRef(null),{data:y,isLoading:v}=be({queryKey:["/api/referral/code",t],enabled:!!t}),{data:b,isLoading:w}=be({queryKey:["/api/referral/stats",t],enabled:!!t}),{data:N,isLoading:j}=be({queryKey:["/api/referral/list",t],enabled:!!t}),{data:S}=be({queryKey:[`/api/qr/action/${t}`],enabled:!!t}),{data:C}=be({queryKey:[`/api/qr/generate-id/${t}`],enabled:!!t}),k=async()=>{if(!s.trim()){e({title:"Phone number required",description:"Please enter your phone number to view your referral code",variant:"destructive"});return}o(!0),c(!0);try{const B=await fetch(`/api/customers/lookup/phone/${encodeURIComponent(s)}`,{credentials:"include"});if(!B.ok)throw new Error("Customer not found");const Z=await B.json();Z.success&&Z.customer?(r(Z.customer.id),e({title:"Account found!",description:`Welcome back, ${Z.customer.name}!`})):(r(null),e({title:"Not found",description:"No account found with this phone number. Please book a service first to join our referral program!",variant:"destructive"}))}catch{r(null),e({title:"Search failed",description:"Could not find your account. Please check your phone number.",variant:"destructive"})}finally{o(!1)}},M=(E=y==null?void 0:y.data)==null?void 0:E.code,A=b==null?void 0:b.data,P=(N==null?void 0:N.data)||[];S==null||S.data;const T=(F=C==null?void 0:C.data)==null?void 0:F.qrCodeId;p.useEffect(()=>{if(!M||!T||!x.current)return;const B=x.current,Z=`${window.location.origin}/api/qr/scan/${T}`;Egt(B,Z,{errorCorrectionLevel:"H",version:40,width:300,margin:4,color:{dark:"#000000",light:"#ffffff"}},async ne=>{if(ne){console.error("QR code generation failed:",ne);return}const Y=B.toDataURL("image/png");u(Y);try{const me=new Image;me.crossOrigin="anonymous",me.onload=()=>{const pe=B.getContext("2d");if(!pe)return;const Me=B.width*.2,re=(B.width-Me)/2,de=(B.height-Me)/2;pe.fillStyle="#ffffff",pe.beginPath(),pe.arc(B.width/2,B.height/2,Me/2+4,0,2*Math.PI),pe.fill(),pe.drawImage(me,re,de,Me,Me),u(B.toDataURL("image/png"))},me.onerror=()=>{console.warn("Logo failed to load, using QR code without logo")},me.src="/qr-logo.png"}catch(me){console.warn("Logo embedding failed:",me)}})},[M,T]);const I=je({mutationFn:async B=>{const Z=await fetch("/api/sms/send-referral-invite",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({customerId:t,friendPhone:B,referralCode:M})});if(!Z.ok){const ne=await Z.json();throw new Error(ne.message||"Failed to send invite")}return Z.json()},onSuccess:()=>{e({title:"Invite sent! ",description:"Your friend will receive a text message with your referral code."}),g(""),h(!1)},onError:B=>{e({title:"Failed to send invite",description:B.message,variant:"destructive"})}}),L=async(B,Z)=>{try{await navigator.clipboard.writeText(B),e({title:"Copied!",description:`${Z} copied to clipboard`})}catch{e({title:"Failed to copy",description:"Please try again",variant:"destructive"})}},R=async()=>{const B=`${window.location.origin}/book?ref=${M}`,Z=`Get $25 off your first auto detail with Clean Machine! Use my code: ${M}

${B}`;if(navigator.share)try{await navigator.share({title:"Clean Machine Referral",text:Z})}catch(ne){ne.name!=="AbortError"&&L(Z,"Referral message")}else L(Z,"Referral message")},G=()=>{if(d){const B=document.createElement("a");B.download=`referral-${M}.png`,B.href=d,B.click()}},$=()=>{if(!m.trim()){e({title:"Phone number required",description:"Please enter your friend's phone number",variant:"destructive"});return}I.mutate(m)},D=B=>{switch(B){case"pending":return n.jsx(Rt,{className:"h-4 w-4 text-yellow-600"});case"signed_up":return n.jsx(br,{className:"h-4 w-4 text-blue-600"});case"first_service_completed":case"rewarded":return n.jsx(nn,{className:"h-4 w-4 text-green-600"});default:return n.jsx(Rt,{className:"h-4 w-4 text-gray-400"})}},W=B=>{switch(B){case"pending":return"Pending";case"signed_up":return"Signed Up";case"first_service_completed":return"Service Completed";case"rewarded":return"Rewarded";default:return B}};return v||w?n.jsx(xn,{title:"Customer Referrals",children:n.jsx("div",{className:"p-6 max-w-4xl mx-auto",children:n.jsx("div",{className:"text-center py-20",children:n.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading your referral code..."})})})}):n.jsx(xn,{title:"Customer Referral Management",children:n.jsxs("div",{className:"p-6 max-w-4xl mx-auto space-y-6",children:[n.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-center mb-6",children:"Look up customers and manage their referral codes"}),!t&&n.jsxs(O,{children:[n.jsxs(ee,{children:[n.jsx(te,{children:"Find Customer"}),n.jsx(ke,{children:"Search by phone number to view referral information"})]}),n.jsxs(H,{className:"space-y-4",children:[n.jsxs("div",{className:"flex gap-2",children:[n.jsx(se,{type:"tel",placeholder:"(918) 555-0123",value:s,onChange:B=>a(B.target.value),onKeyDown:B=>B.key==="Enter"&&k(),"data-testid":"input-customer-search-phone"}),n.jsxs(_,{onClick:k,disabled:i,"data-testid":"button-search-customer",children:[i?n.jsx(nt,{className:"h-4 w-4 animate-spin"}):n.jsx(Ga,{className:"h-4 w-4 mr-2"}),i?"Searching...":"Search"]})]}),l&&!t&&n.jsxs(Ln,{variant:"destructive",children:[n.jsx(Wt,{className:"h-4 w-4"}),n.jsx(Dn,{children:"No customer found with this phone number."})]})]})]}),!t&&l&&n.jsx("p",{className:"text-center text-gray-500",children:"Enter a phone number to get started"}),A&&n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[n.jsx(O,{children:n.jsxs(H,{className:"pt-6 text-center",children:[n.jsx(br,{className:"h-6 w-6 mx-auto mb-2 text-blue-600"}),n.jsx("div",{className:"text-2xl font-bold",children:A.totalReferrals}),n.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Total Referrals"})]})}),n.jsx(O,{children:n.jsxs(H,{className:"pt-6 text-center",children:[n.jsx(Rt,{className:"h-6 w-6 mx-auto mb-2 text-yellow-600"}),n.jsx("div",{className:"text-2xl font-bold",children:A.pending}),n.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Pending"})]})}),n.jsx(O,{children:n.jsxs(H,{className:"pt-6 text-center",children:[n.jsx(nn,{className:"h-6 w-6 mx-auto mb-2 text-green-600"}),n.jsx("div",{className:"text-2xl font-bold",children:A.completed}),n.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Completed"})]})}),n.jsx(O,{children:n.jsxs(H,{className:"pt-6 text-center",children:[n.jsx(ya,{className:"h-6 w-6 mx-auto mb-2 text-purple-600"}),n.jsx("div",{className:"text-2xl font-bold",children:A.totalPointsEarned}),n.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Points Earned"})]})})]}),n.jsxs(O,{className:"border-2 border-blue-200 dark:border-blue-800",children:[n.jsxs(ee,{className:"text-center",children:[n.jsx(te,{className:"text-2xl",children:"Your Referral Code"}),n.jsx(ke,{children:"Share this code with friends and family"})]}),n.jsxs(H,{className:"space-y-6",children:[n.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg p-6 text-center",children:[n.jsx("div",{className:"text-white text-5xl font-bold tracking-wider mb-2",children:M}),n.jsx(ge,{variant:"secondary",className:"bg-white text-blue-600",children:"500 points for each friend"})]}),n.jsxs("div",{className:"text-center space-y-2",children:[n.jsx("div",{className:"inline-block bg-white p-4 rounded-lg shadow-lg",children:n.jsx("canvas",{ref:x})}),n.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Scan to get your friend's discount"}),n.jsxs(_,{variant:"outline",size:"sm",onClick:G,"data-testid":"button-download-qr",children:[n.jsx(aT,{className:"h-4 w-4 mr-2"}),"Download QR Code"]})]}),n.jsx(Ot,{}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[n.jsxs(_,{variant:"outline",onClick:()=>L(M||"","Referral code"),"data-testid":"button-copy-code",children:[n.jsx(Qv,{className:"h-4 w-4 mr-2"}),"Copy Code"]}),n.jsxs(_,{variant:"outline",onClick:R,"data-testid":"button-share-code",children:[n.jsx(uge,{className:"h-4 w-4 mr-2"}),"Share Link"]}),n.jsxs(_,{onClick:()=>h(!f),disabled:!t||!M,"data-testid":"button-send-sms-invite",children:[n.jsx(on,{className:"h-4 w-4 mr-2"}),"Send SMS Invite"]})]}),f&&n.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-4 space-y-3",children:[n.jsx("label",{className:"text-sm font-medium",children:"Friend's Phone Number"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx(se,{type:"tel",placeholder:"(918) 555-0123",value:m,onChange:B=>g(B.target.value),"data-testid":"input-friend-phone"}),n.jsx(_,{onClick:$,disabled:!t||!M||!m.trim()||I.isPending,"data-testid":"button-send-invite",children:I.isPending?"Sending...":"Send"})]}),n.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:"They'll receive a text with your code and a link to book"})]})]})]}),P.length>0&&n.jsxs(O,{children:[n.jsxs(ee,{children:[n.jsx(te,{children:"Your Referrals"}),n.jsx(ke,{children:"Track your friend's progress"})]}),n.jsx(H,{children:n.jsx("div",{className:"space-y-3",children:P.map(B=>n.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-lg","data-testid":`referral-${B.id}`,children:[n.jsxs("div",{className:"flex items-center gap-3",children:[D(B.status),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:B.refereeName||B.refereePhone||B.refereeEmail||"Friend"}),n.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[W(B.status),B.rewardedAt&&`  ${B.pointsAwarded} points earned`]})]})]}),n.jsx("div",{className:"text-right text-sm text-gray-500",children:new Date(B.createdAt).toLocaleDateString()})]},B.id))})})]}),n.jsxs(O,{children:[n.jsx(ee,{children:n.jsx(te,{children:"How It Works"})}),n.jsx(H,{children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-center",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx("div",{className:"bg-blue-100 dark:bg-blue-900 w-12 h-12 rounded-full flex items-center justify-center mx-auto",children:n.jsx("span",{className:"text-xl font-bold text-blue-600 dark:text-blue-300",children:"1"})}),n.jsx("h3",{className:"font-semibold",children:"Share Your Code"}),n.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Send your unique code to friends via SMS, email, or social media"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("div",{className:"bg-purple-100 dark:bg-purple-900 w-12 h-12 rounded-full flex items-center justify-center mx-auto",children:n.jsx("span",{className:"text-xl font-bold text-purple-600 dark:text-purple-300",children:"2"})}),n.jsx("h3",{className:"font-semibold",children:"Friend Books Service"}),n.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"They use your code when booking their first detail"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("div",{className:"bg-green-100 dark:bg-green-900 w-12 h-12 rounded-full flex items-center justify-center mx-auto",children:n.jsx("span",{className:"text-xl font-bold text-green-600 dark:text-green-300",children:"3"})}),n.jsx("h3",{className:"font-semibold",children:"Both Get Rewarded"}),n.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"You both receive 500 loyalty points after their first service"})]})]})})]})]})})}function Lgt(){return n.jsxs(O,{children:[n.jsxs(ee,{children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Yc,{className:"h-5 w-5"}),n.jsx(te,{children:"Set Custom Ringtone for Business Calls"})]}),n.jsx(ke,{children:"Distinguish business calls from spam with a unique ringtone"})]}),n.jsxs(H,{className:"space-y-4",children:[n.jsxs(Ln,{children:[n.jsx(vo,{className:"h-4 w-4"}),n.jsx(Dn,{children:"When customers call, you'll see their actual phone number as Caller ID. This allows you to save their contact and set a custom ringtone."})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsxs("h4",{className:"font-semibold mb-2 flex items-center gap-2",children:[n.jsx(pu,{className:"h-4 w-4"}),"iPhone Instructions:"]}),n.jsxs("ol",{className:"list-decimal list-inside space-y-2 text-sm text-muted-foreground ml-4",children:[n.jsx("li",{children:"When a customer calls, save their number to Contacts"}),n.jsx("li",{children:"Open Contacts app  find the customer"}),n.jsx("li",{children:'Tap "Edit"  Scroll to "Ringtone"'}),n.jsx("li",{children:'Select a unique ringtone (e.g., "Strum" or "Uplift")'}),n.jsx("li",{children:"Repeat for all business contacts"})]})]}),n.jsxs("div",{children:[n.jsxs("h4",{className:"font-semibold mb-2 flex items-center gap-2",children:[n.jsx(pu,{className:"h-4 w-4"}),"Android Instructions:"]}),n.jsxs("ol",{className:"list-decimal list-inside space-y-2 text-sm text-muted-foreground ml-4",children:[n.jsx("li",{children:"When a customer calls, save their number to Contacts"}),n.jsx("li",{children:"Open Contacts app  find the customer"}),n.jsx("li",{children:'Tap menu ()  "Set ringtone"'}),n.jsx("li",{children:"Choose a unique ringtone"}),n.jsx("li",{children:"Repeat for all business contacts"})]})]}),n.jsxs(Ln,{className:"bg-blue-50 dark:bg-blue-950 border-blue-200 dark:border-blue-800",children:[n.jsx(vo,{className:"h-4 w-4 text-blue-600"}),n.jsxs(Dn,{className:"text-blue-900 dark:text-blue-100",children:[n.jsx("strong",{children:"Pro Tip:"})," Set the same ringtone for all business contacts, or categorize by customer type (VIP customers = one ringtone, new customers = another)"]})]})]})]})]})}const $B=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function Dgt(){const[,e]=zt(),{toast:t}=Ee(),[r,s]=p.useState(null),[a,i]=p.useState(!1),[o,l]=p.useState(!1),[c,d]=p.useState(null),{data:u,isLoading:f}=be({queryKey:["/api/phone-settings/lines"]}),[h,m]=p.useState({forwardingEnabled:!1,forwardingNumber:"",ringDuration:10,voicemailGreeting:"",voicemailGreetingUrl:null,afterHoursVoicemailGreeting:"",afterHoursVoicemailGreetingUrl:null,sipEnabled:!1,sipEndpoint:"",sipCredentialSid:"",sipFallbackNumber:""}),[g,x]=p.useState(null),[y,v]=p.useState(!1),[b,w]=p.useState(null),[N,j]=p.useState(!1),S=p.useRef(null),C=p.useRef(null),[k,M]=p.useState({dayOfWeek:0,startTime:"09:00",endTime:"17:00",action:"forward"}),A=je({mutationFn:async Y=>await Ne("PATCH",`/api/phone-settings/lines/${Y.id}`,Y.updates),onSuccess:()=>{ze.invalidateQueries({queryKey:["/api/phone-settings/lines"]}),i(!1),t({title:"Line Updated",description:"Phone line settings have been updated successfully."})},onError:Y=>{t({title:"Update Failed",description:Y.message||"Failed to update phone line settings.",variant:"destructive"})}}),P=je({mutationFn:async Y=>await Ne("POST","/api/phone-settings/schedules",Y),onSuccess:()=>{ze.invalidateQueries({queryKey:["/api/phone-settings/lines"]}),l(!1),t({title:"Schedule Created",description:"Business hours schedule has been created."})},onError:Y=>{t({title:"Creation Failed",description:Y.message||"Failed to create schedule.",variant:"destructive"})}}),T=je({mutationFn:async Y=>await Ne("PATCH",`/api/phone-settings/schedules/${Y.id}`,Y.updates),onSuccess:()=>{ze.invalidateQueries({queryKey:["/api/phone-settings/lines"]}),l(!1),d(null),t({title:"Schedule Updated",description:"Business hours schedule has been updated."})},onError:Y=>{t({title:"Update Failed",description:Y.message||"Failed to update schedule.",variant:"destructive"})}}),I=je({mutationFn:async Y=>await Ne("DELETE",`/api/phone-settings/schedules/${Y}`),onSuccess:()=>{ze.invalidateQueries({queryKey:["/api/phone-settings/lines"]}),t({title:"Schedule Deleted",description:"Business hours schedule has been deleted."})},onError:Y=>{t({title:"Deletion Failed",description:Y.message||"Failed to delete schedule.",variant:"destructive"})}}),L=Y=>{s(Y),m({forwardingEnabled:Y.forwardingEnabled,forwardingNumber:Y.forwardingNumber||"",ringDuration:Y.ringDuration||10,voicemailGreeting:Y.voicemailGreeting||"",voicemailGreetingUrl:Y.voicemailGreetingUrl||null,afterHoursVoicemailGreeting:Y.afterHoursVoicemailGreeting||"",afterHoursVoicemailGreetingUrl:Y.afterHoursVoicemailGreetingUrl||null,sipEnabled:Y.sipEnabled||!1,sipEndpoint:Y.sipEndpoint||"",sipCredentialSid:Y.sipCredentialSid||"",sipFallbackNumber:Y.sipFallbackNumber||""}),x(null),w(null),i(!0)},R=()=>{if(r){if(h.forwardingEnabled&&h.forwardingNumber&&!/^\+[1-9]\d{10,14}$/.test(h.forwardingNumber)){t({title:"Validation Error",description:"Forwarding number must be in E.164 format (e.g., +19188565304)",variant:"destructive"});return}if(h.voicemailGreeting&&h.voicemailGreeting.length>500){t({title:"Validation Error",description:"Voicemail greeting must be 500 characters or less.",variant:"destructive"});return}if(h.afterHoursVoicemailGreeting&&h.afterHoursVoicemailGreeting.length>500){t({title:"Validation Error",description:"After-hours voicemail greeting must be 500 characters or less.",variant:"destructive"});return}if(h.sipEnabled){if(!h.sipEndpoint||h.sipEndpoint.trim()===""){t({title:"Validation Error",description:"SIP endpoint is required when SIP routing is enabled.",variant:"destructive"});return}if(!/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(h.sipEndpoint)){t({title:"Validation Error",description:"Invalid SIP endpoint format. Must be username@domain (e.g., jody@sip.cleanmachinetulsa.com)",variant:"destructive"});return}}if(h.sipCredentialSid&&h.sipCredentialSid.trim()!==""&&!h.sipCredentialSid.startsWith("CL")){t({title:"Validation Error",description:'Invalid credential SID format. Must start with "CL" (Twilio format)',variant:"destructive"});return}if(h.sipFallbackNumber&&h.sipFallbackNumber.trim()!==""&&!/^\+[1-9]\d{10,14}$/.test(h.sipFallbackNumber)){t({title:"Validation Error",description:"Invalid SIP fallback number. Must be in E.164 format (e.g., +19188565711)",variant:"destructive"});return}A.mutate({id:r.id,updates:h})}},G=Y=>{s(Y),M({dayOfWeek:0,startTime:"09:00",endTime:"17:00",action:"forward"}),d(null),l(!0)},$=(Y,me)=>{s(me),d(Y),M({dayOfWeek:Y.dayOfWeek,startTime:Y.startTime,endTime:Y.endTime,action:Y.action}),l(!0)},D=()=>{if(!r)return;const Y=/^([0-1][0-9]|2[0-3]):[0-5][0-9]$/;if(!Y.test(k.startTime)||!Y.test(k.endTime)){t({title:"Validation Error",description:"Times must be in HH:MM 24-hour format (e.g., 09:00, 17:00)",variant:"destructive"});return}c?T.mutate({id:c.id,updates:k}):P.mutate({phoneLineId:r.id,...k})},W=Y=>{confirm("Are you sure you want to delete this schedule?")&&I.mutate(Y)},E=async Y=>{var Me;const me=(Me=Y.target.files)==null?void 0:Me[0];if(!me||!r)return;if(!["audio/mp3","audio/mpeg","audio/wav","audio/m4a","audio/ogg"].includes(me.type)){t({title:"Invalid File Type",description:"Please upload an MP3, WAV, M4A, or OGG audio file.",variant:"destructive"});return}if(me.size>5*1024*1024){t({title:"File Too Large",description:"Audio file must be 5MB or less.",variant:"destructive"});return}x(me),v(!0);try{const re=new FormData;re.append("audio",me),re.append("phoneLineId",r.id.toString());const de=await fetch("/api/phone-settings/upload-voicemail-greeting",{method:"POST",body:re});if(!de.ok)throw new Error("Upload failed");const he=await de.json();m({...h,voicemailGreetingUrl:he.greetingUrl}),t({title:"Upload Successful",description:"Voicemail greeting audio uploaded successfully."}),ze.invalidateQueries({queryKey:["/api/phone-settings/lines"]})}catch(re){t({title:"Upload Failed",description:re.message||"Failed to upload audio file.",variant:"destructive"})}finally{v(!1)}},F=async()=>{if(r)try{if(!(await fetch(`/api/phone-settings/delete-voicemail-greeting/${r.id}`,{method:"DELETE"})).ok)throw new Error("Delete failed");m({...h,voicemailGreetingUrl:null}),x(null),t({title:"Audio Deleted",description:"Voicemail greeting audio has been removed."}),ze.invalidateQueries({queryKey:["/api/phone-settings/lines"]})}catch(Y){t({title:"Delete Failed",description:Y.message||"Failed to delete audio file.",variant:"destructive"})}},B=async Y=>{var Me;const me=(Me=Y.target.files)==null?void 0:Me[0];if(!me||!r)return;if(!["audio/mp3","audio/mpeg","audio/wav","audio/m4a","audio/ogg"].includes(me.type)){t({title:"Invalid File Type",description:"Please upload an MP3, WAV, M4A, or OGG audio file.",variant:"destructive"});return}if(me.size>5*1024*1024){t({title:"File Too Large",description:"Audio file must be 5MB or less.",variant:"destructive"});return}w(me),j(!0);try{const re=new FormData;re.append("audio",me),re.append("phoneLineId",r.id.toString()),re.append("type","after-hours");const de=await fetch("/api/phone-settings/upload-voicemail-greeting",{method:"POST",body:re});if(!de.ok)throw new Error("Upload failed");const he=await de.json();m({...h,afterHoursVoicemailGreetingUrl:he.greetingUrl}),t({title:"Upload Successful",description:"After-hours voicemail greeting audio uploaded successfully."}),ze.invalidateQueries({queryKey:["/api/phone-settings/lines"]})}catch(re){t({title:"Upload Failed",description:re.message||"Failed to upload audio file.",variant:"destructive"})}finally{j(!1)}},Z=async()=>{if(r)try{if(!(await fetch(`/api/phone-settings/delete-voicemail-greeting/${r.id}?type=after-hours`,{method:"DELETE"})).ok)throw new Error("Delete failed");m({...h,afterHoursVoicemailGreetingUrl:null}),w(null),t({title:"Audio Deleted",description:"After-hours voicemail greeting audio has been removed."}),ze.invalidateQueries({queryKey:["/api/phone-settings/lines"]})}catch(Y){t({title:"Delete Failed",description:Y.message||"Failed to delete audio file.",variant:"destructive"})}};if(f)return n.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900",children:[n.jsx(g2,{}),n.jsx("div",{className:"container mx-auto px-4 py-8",children:n.jsx("div",{className:"flex items-center justify-center py-12",children:n.jsx(nt,{className:"h-8 w-8 animate-spin text-primary"})})})]});const ne=(u==null?void 0:u.lines)||[];return n.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900",children:[n.jsx(g2,{}),n.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-7xl",children:[n.jsxs("div",{className:"mb-8",children:[n.jsxs("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[n.jsx(bt,{className:"h-8 w-8 text-primary"}),"Phone Settings"]}),n.jsx("p",{className:"text-gray-600 dark:text-gray-300 mt-2",children:"Manage your business phone lines, call forwarding, and business hours schedules"})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:ne.map(Y=>n.jsxs(O,{"data-testid":`phone-line-card-${Y.id}`,children:[n.jsxs(ee,{children:[n.jsxs(te,{className:"flex items-center justify-between",children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(bt,{className:"h-5 w-5 text-primary"}),Y.label]}),n.jsxs(_,{variant:"outline",size:"sm",onClick:()=>L(Y),"data-testid":`edit-line-${Y.id}`,children:[n.jsx(No,{className:"h-4 w-4 mr-1"}),"Edit"]})]}),n.jsx(ke,{children:Y.phoneNumber})]}),n.jsxs(H,{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[Y.forwardingEnabled?n.jsx(uQ,{className:"h-4 w-4 text-green-600 dark:text-green-400"}):n.jsx(Yd,{className:"h-4 w-4 text-blue-600 dark:text-blue-400"}),n.jsx("span",{className:"text-sm font-medium",children:Y.forwardingEnabled?"Forwarding Enabled":"Using IVR"})]}),n.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${Y.forwardingEnabled?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200"}`,"data-testid":`line-status-${Y.id}`,children:Y.forwardingEnabled?"Active":"IVR Mode"})]}),Y.forwardingNumber&&n.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:[n.jsx("span",{className:"font-medium",children:"Forwarding to:"})," ",Y.forwardingNumber]}),n.jsx(Ot,{}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("h4",{className:"text-sm font-semibold flex items-center gap-2",children:[n.jsx(Rt,{className:"h-4 w-4"}),"Business Hours Schedule"]}),n.jsxs(_,{variant:"outline",size:"sm",onClick:()=>G(Y),"data-testid":`add-schedule-${Y.id}`,children:[n.jsx(Un,{className:"h-4 w-4 mr-1"}),"Add"]})]}),Y.schedules.length>0?n.jsx("div",{className:"space-y-2",children:Y.schedules.map(me=>n.jsxs("div",{className:"flex items-center justify-between text-sm bg-gray-50 dark:bg-gray-800 p-2 rounded","data-testid":`schedule-${me.id}`,children:[n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:$B[me.dayOfWeek]})," ",n.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[me.startTime," - ",me.endTime]})," ",n.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${me.action==="forward"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200"}`,children:me.action==="forward"?"Forward":"Voicemail"})]}),n.jsxs("div",{className:"flex gap-1",children:[n.jsx(_,{variant:"ghost",size:"sm",onClick:()=>$(me,Y),"data-testid":`edit-schedule-${me.id}`,children:n.jsx(No,{className:"h-3 w-3"})}),n.jsx(_,{variant:"ghost",size:"sm",onClick:()=>W(me.id),"data-testid":`delete-schedule-${me.id}`,children:n.jsx(Nr,{className:"h-3 w-3 text-red-600"})})]})]},me.id))}):n.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 italic",children:"No schedules configured"})]})]})]},Y.id))}),n.jsxs(O,{children:[n.jsxs(ee,{children:[n.jsxs(te,{className:"flex items-center gap-2",children:[n.jsx(vo,{className:"h-5 w-5 text-blue-600"}),"IVR System Information"]}),n.jsx(ke,{children:"Interactive Voice Response (IVR) system for automated call handling"})]}),n.jsxs(H,{className:"space-y-4",children:[n.jsxs("div",{className:"bg-blue-50 dark:bg-blue-950 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:[n.jsx("h4",{className:"font-semibold text-blue-900 dark:text-blue-100 mb-2",children:"How IVR Works"}),n.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200 mb-3",children:"When call forwarding is disabled, incoming calls will be handled by our intelligent IVR system:"}),n.jsxs("ul",{className:"space-y-2 text-sm text-blue-800 dark:text-blue-200",children:[n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx(Wt,{className:"h-4 w-4 mt-0.5 flex-shrink-0"}),n.jsxs("span",{children:[n.jsx("strong",{children:"Main Line:"})," Typically uses IVR for customer service, bookings, and general inquiries"]})]}),n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx(Wt,{className:"h-4 w-4 mt-0.5 flex-shrink-0"}),n.jsxs("span",{children:[n.jsx("strong",{children:"Owner Line:"})," Can ring directly to your personal phone during business hours"]})]}),n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx(Wt,{className:"h-4 w-4 mt-0.5 flex-shrink-0"}),n.jsxs("span",{children:[n.jsx("strong",{children:"Business Hours:"})," All times are in ",n.jsx("strong",{children:"America/Chicago (Central Time)"})]})]}),n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx(Wt,{className:"h-4 w-4 mt-0.5 flex-shrink-0"}),n.jsxs("span",{children:[n.jsx("strong",{children:"Voicemail:"})," Messages are transcribed and delivered via SMS/email"]})]})]})]}),n.jsxs("div",{className:"pt-2",children:[n.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-2",children:"Current IVR Status:"}),n.jsx("div",{className:"space-y-2",children:ne.map(Y=>n.jsxs("div",{className:"flex items-center justify-between text-sm bg-gray-50 dark:bg-gray-800 p-3 rounded",children:[n.jsxs("span",{className:"font-medium",children:[Y.label," (",Y.phoneNumber,")"]}),n.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${Y.forwardingEnabled?"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200":"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200"}`,children:Y.forwardingEnabled?"Forwarding Active":"Using IVR"})]},Y.id))})]}),n.jsx("div",{className:"pt-2",children:n.jsxs(_,{variant:"outline",onClick:()=>e("/notifications-settings"),"data-testid":"link-voicemail-settings",children:[n.jsx(Yd,{className:"h-4 w-4 mr-2"}),"Configure Voicemail Notifications"]})})]})]}),n.jsx(Lgt,{})]}),n.jsx(At,{open:a,onOpenChange:i,children:n.jsxs(_t,{"data-testid":"line-config-modal",children:[n.jsxs($t,{children:[n.jsxs(Et,{children:["Configure ",r==null?void 0:r.label]}),n.jsx(an,{children:r==null?void 0:r.phoneNumber})]}),n.jsxs("div",{className:"space-y-4 py-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs(U,{htmlFor:"forwarding-enabled",className:"flex flex-col gap-1",children:[n.jsx("span",{children:"Call Forwarding"}),n.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 font-normal",children:"Forward calls to your personal phone"})]}),n.jsx(Vt,{id:"forwarding-enabled",checked:h.forwardingEnabled,onCheckedChange:Y=>m({...h,forwardingEnabled:Y}),"data-testid":"toggle-forwarding"})]}),h.forwardingEnabled&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs(U,{htmlFor:"forwarding-number",children:["Forwarding Number",n.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 ml-2",children:"(E.164 format: +19188565304)"})]}),n.jsx(se,{id:"forwarding-number",placeholder:"+19188565304",value:h.forwardingNumber,onChange:Y=>m({...h,forwardingNumber:Y.target.value}),"data-testid":"input-forwarding-number"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs(U,{htmlFor:"ring-duration",className:"flex items-center gap-2",children:[n.jsx(gge,{className:"h-4 w-4"}),"Ring Duration: ",h.ringDuration," seconds"]}),n.jsx(ai,{id:"ring-duration",min:10,max:60,step:5,value:[h.ringDuration],onValueChange:([Y])=>m({...h,ringDuration:Y}),"data-testid":"slider-ring-duration"}),n.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"How long the phone will ring before going to voicemail (15-60 seconds)"})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs(U,{htmlFor:"voicemail-greeting",children:["Voicemail Greeting (Text-to-Speech)",n.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400 ml-2",children:["(",h.voicemailGreeting.length,"/500 characters)"]})]}),n.jsx(un,{id:"voicemail-greeting",placeholder:"Thank you for calling. Please leave a message...",value:h.voicemailGreeting,onChange:Y=>m({...h,voicemailGreeting:Y.target.value}),maxLength:500,rows:4,"data-testid":"textarea-voicemail-greeting"}),n.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"This text will be converted to speech if no audio recording is uploaded."})]}),n.jsx(Ot,{}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs(U,{className:"flex items-center gap-2",children:[n.jsx(Yd,{className:"h-4 w-4"}),"Audio Recording (Optional)"]}),n.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Upload a custom voicemail greeting audio file. This takes priority over text-to-speech."}),h.voicemailGreetingUrl?n.jsxs("div",{className:"flex items-center gap-2 p-3 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-medium text-green-900 dark:text-green-100",children:"Audio greeting uploaded"}),n.jsx("p",{className:"text-xs text-green-700 dark:text-green-300 mt-1",children:"Custom audio will be played for incoming calls"})]}),n.jsx(_,{variant:"destructive",size:"sm",onClick:F,"data-testid":"button-delete-audio",children:n.jsx(Nr,{className:"h-4 w-4"})})]}):n.jsxs("div",{className:"space-y-2",children:[n.jsx("input",{ref:S,type:"file",accept:"audio/mp3,audio/mpeg,audio/wav,audio/m4a,audio/ogg",onChange:E,disabled:y,className:"hidden","data-testid":"input-audio-file"}),n.jsx(_,{type:"button",variant:"outline",onClick:()=>{var Y;return(Y=S.current)==null?void 0:Y.click()},disabled:y,className:"w-full border-dashed border-2 hover:bg-gray-50 dark:hover:bg-gray-800","data-testid":"button-upload-audio",children:y?n.jsxs(n.Fragment,{children:[n.jsx(nt,{className:"h-4 w-4 mr-2 animate-spin"}),"Uploading audio..."]}):n.jsxs(n.Fragment,{children:[n.jsx(_p,{className:"h-4 w-4 mr-2"}),"Choose Audio File"]})}),n.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 text-center",children:"Supported formats: MP3, WAV, M4A, OGG (max 5MB)"})]})]}),n.jsx(Ot,{}),n.jsxs("div",{className:"space-y-4 pt-2",children:[n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx(Rt,{className:"h-5 w-5 text-blue-600 dark:text-blue-400 mt-0.5"}),n.jsxs("div",{children:[n.jsx(U,{className:"text-base font-semibold",children:"After Hours Voicemail"}),n.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[n.jsx(vo,{className:"h-3 w-3 inline mr-1"}),"Automatically activates 30 minutes after your last schedule ends for the day"]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs(U,{htmlFor:"after-hours-greeting",children:["After Hours Greeting (Text-to-Speech)",n.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400 ml-2",children:["(",h.afterHoursVoicemailGreeting.length,"/500 characters)"]})]}),n.jsx(un,{id:"after-hours-greeting",placeholder:"You've reached Clean Machine Auto Detail after business hours. Please leave a brief message about your vehicle and we'll get back to you by the next business day.",value:h.afterHoursVoicemailGreeting,onChange:Y=>m({...h,afterHoursVoicemailGreeting:Y.target.value}),maxLength:500,rows:4,"data-testid":"textarea-after-hours-greeting"}),n.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"This greeting will play when callers reach you after hours. If not set, the regular voicemail greeting will be used."})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs(U,{className:"flex items-center gap-2",children:[n.jsx(Yd,{className:"h-4 w-4"}),"After Hours Audio Recording (Optional)"]}),n.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Upload a custom after-hours greeting audio file. This takes priority over text-to-speech."}),h.afterHoursVoicemailGreetingUrl?n.jsxs("div",{className:"flex items-center gap-2 p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-medium text-blue-900 dark:text-blue-100",children:"After-hours audio greeting uploaded"}),n.jsx("p",{className:"text-xs text-blue-700 dark:text-blue-300 mt-1",children:"Custom audio will be played for after-hours calls"})]}),n.jsx(_,{variant:"destructive",size:"sm",onClick:Z,"data-testid":"button-delete-after-hours-audio",children:n.jsx(Nr,{className:"h-4 w-4"})})]}):n.jsxs("div",{className:"space-y-2",children:[n.jsx("input",{ref:C,type:"file",accept:"audio/mp3,audio/mpeg,audio/wav,audio/m4a,audio/ogg",onChange:B,disabled:N,className:"hidden","data-testid":"input-after-hours-audio-file"}),n.jsx(_,{type:"button",variant:"outline",onClick:()=>{var Y;return(Y=C.current)==null?void 0:Y.click()},disabled:N,className:"w-full border-dashed border-2 hover:bg-blue-50 dark:hover:bg-blue-900/20","data-testid":"button-upload-after-hours-audio",children:N?n.jsxs(n.Fragment,{children:[n.jsx(nt,{className:"h-4 w-4 mr-2 animate-spin"}),"Uploading after-hours audio..."]}):n.jsxs(n.Fragment,{children:[n.jsx(_p,{className:"h-4 w-4 mr-2"}),"Choose After-Hours Audio File"]})}),n.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 text-center",children:"Supported formats: MP3, WAV, M4A, OGG (max 5MB)"})]})]})]}),n.jsx(Ot,{}),n.jsxs("div",{className:"space-y-4 pt-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs(U,{htmlFor:"sip-enabled",className:"flex flex-col gap-1",children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsx(bt,{className:"h-4 w-4 text-purple-600 dark:text-purple-400"}),"Enable SIP Routing"]}),n.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 font-normal",children:"Route calls through SIP for custom ringtones on your Samsung phone. Requires Twilio SIP Domain setup."})]}),n.jsx(Vt,{id:"sip-enabled",checked:h.sipEnabled,onCheckedChange:Y=>m({...h,sipEnabled:Y}),"data-testid":"toggle-sip-enabled"})]}),h.sipEnabled&&n.jsxs("div",{className:"space-y-4 p-4 bg-purple-50 dark:bg-purple-900/10 border border-purple-200 dark:border-purple-800 rounded-lg",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs(U,{htmlFor:"sip-endpoint",className:"text-purple-900 dark:text-purple-100",children:["SIP Endpoint",n.jsx("span",{className:"text-xs text-purple-600 dark:text-purple-400 ml-2",children:"(username@domain)"})]}),n.jsx(se,{id:"sip-endpoint",placeholder:"jody@sip.cleanmachinetulsa.com",value:h.sipEndpoint,onChange:Y=>m({...h,sipEndpoint:Y.target.value}),"data-testid":"input-sip-endpoint",className:"border-purple-300 dark:border-purple-700 focus:ring-purple-500"}),n.jsx("p",{className:"text-xs text-purple-600 dark:text-purple-400",children:"Your SIP address from Twilio SIP Domain configuration"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs(U,{htmlFor:"sip-credential-sid",className:"text-purple-900 dark:text-purple-100",children:["Credential SID",n.jsx("span",{className:"text-xs text-purple-600 dark:text-purple-400 ml-2",children:"(optional)"})]}),n.jsx(se,{id:"sip-credential-sid",placeholder:"CLxxx...",value:h.sipCredentialSid,onChange:Y=>m({...h,sipCredentialSid:Y.target.value}),"data-testid":"input-sip-credential-sid",className:"border-purple-300 dark:border-purple-700 focus:ring-purple-500"}),n.jsx("p",{className:"text-xs text-purple-600 dark:text-purple-400",children:"From Twilio Console  Voice  SIP Domains  Credential Lists"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs(U,{htmlFor:"sip-fallback-number",className:"text-purple-900 dark:text-purple-100",children:["Fallback Number",n.jsx("span",{className:"text-xs text-purple-600 dark:text-purple-400 ml-2",children:"(optional - E.164 format)"})]}),n.jsx(se,{id:"sip-fallback-number",placeholder:"+19188565711",value:h.sipFallbackNumber,onChange:Y=>m({...h,sipFallbackNumber:Y.target.value}),"data-testid":"input-sip-fallback-number",className:"border-purple-300 dark:border-purple-700 focus:ring-purple-500"}),n.jsx("p",{className:"text-xs text-purple-600 dark:text-purple-400",children:"Tries SIP first, then this number if SIP fails (optional)"})]}),n.jsxs("div",{className:"flex items-start gap-2 p-3 bg-purple-100 dark:bg-purple-900/20 border border-purple-300 dark:border-purple-700 rounded",children:[n.jsx(vo,{className:"h-4 w-4 text-purple-700 dark:text-purple-300 mt-0.5 flex-shrink-0"}),n.jsxs("p",{className:"text-xs text-purple-700 dark:text-purple-300",children:[n.jsx("strong",{children:"Note:"})," SIP routing allows you to set custom ringtones on your Samsung phone for business calls. You'll need to configure a Twilio SIP Domain and register it on your phone's SIP settings."]})]}),n.jsx(St,{href:"/sip-setup-guide",children:n.jsxs(_,{variant:"outline",className:"w-full border-purple-300 dark:border-purple-700 text-purple-700 dark:text-purple-300 hover:bg-purple-100 dark:hover:bg-purple-900/30","data-testid":"button-sip-setup-guide",children:[n.jsx(ja,{className:"h-4 w-4 mr-2"}),"View Complete SIP Setup Guide"]})})]})]})]}),n.jsxs(Sn,{children:[n.jsxs(_,{variant:"outline",onClick:()=>i(!1),"data-testid":"button-cancel-line",children:[n.jsx(Jr,{className:"h-4 w-4 mr-2"}),"Cancel"]}),n.jsxs(_,{onClick:R,disabled:A.isPending,"data-testid":"button-save-line",children:[A.isPending?n.jsx(nt,{className:"h-4 w-4 mr-2 animate-spin"}):n.jsx(fr,{className:"h-4 w-4 mr-2"}),"Save Changes"]})]})]})}),n.jsx(At,{open:o,onOpenChange:l,children:n.jsxs(_t,{"data-testid":"schedule-modal",children:[n.jsxs($t,{children:[n.jsx(Et,{children:c?"Edit Schedule":"Add Schedule"}),n.jsxs(an,{children:["Configure business hours for ",r==null?void 0:r.label]})]}),n.jsxs("div",{className:"space-y-4 py-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(U,{htmlFor:"day-of-week",children:"Day of Week"}),n.jsxs(Pt,{value:k.dayOfWeek.toString(),onValueChange:Y=>M({...k,dayOfWeek:parseInt(Y)}),children:[n.jsx(kt,{id:"day-of-week","data-testid":"select-day-of-week",children:n.jsx(Tt,{})}),n.jsx(Mt,{children:$B.map((Y,me)=>n.jsx(ve,{value:me.toString(),children:Y},me))})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs(U,{htmlFor:"start-time",children:["Start Time",n.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 ml-2",children:"(24-hour)"})]}),n.jsx(se,{id:"start-time",type:"time",value:k.startTime,onChange:Y=>M({...k,startTime:Y.target.value}),"data-testid":"input-start-time"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs(U,{htmlFor:"end-time",children:["End Time",n.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 ml-2",children:"(24-hour)"})]}),n.jsx(se,{id:"end-time",type:"time",value:k.endTime,onChange:Y=>M({...k,endTime:Y.target.value}),"data-testid":"input-end-time"})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(U,{htmlFor:"action",children:"Action"}),n.jsxs(Pt,{value:k.action,onValueChange:Y=>M({...k,action:Y}),children:[n.jsx(kt,{id:"action","data-testid":"select-action",children:n.jsx(Tt,{})}),n.jsxs(Mt,{children:[n.jsx(ve,{value:"forward",children:"Forward to phone"}),n.jsx(ve,{value:"voicemail",children:"Go to voicemail"})]})]})]})]}),n.jsxs(Sn,{children:[n.jsxs(_,{variant:"outline",onClick:()=>{l(!1),d(null)},"data-testid":"button-cancel-schedule",children:[n.jsx(Jr,{className:"h-4 w-4 mr-2"}),"Cancel"]}),n.jsxs(_,{onClick:D,disabled:P.isPending||T.isPending,"data-testid":"button-save-schedule",children:[P.isPending||T.isPending?n.jsx(nt,{className:"h-4 w-4 mr-2 animate-spin"}):n.jsx(fr,{className:"h-4 w-4 mr-2"}),c?"Update":"Create"," Schedule"]})]})]})})]})}function $gt(){return n.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800",children:[n.jsx(g2,{}),n.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-5xl",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"SIP Setup Guide"}),n.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Configure Twilio SIP routing to enable custom ringtones for business calls on your Samsung phone"})]}),n.jsxs(O,{className:"mb-6 border-purple-200 dark:border-purple-800",children:[n.jsxs(ee,{className:"bg-purple-50 dark:bg-purple-900/20",children:[n.jsxs(te,{className:"flex items-center gap-2 text-purple-900 dark:text-purple-100",children:[n.jsx(bt,{className:"h-5 w-5"}),"What is SIP Routing?"]}),n.jsx(ke,{children:"Understand how SIP routing enables custom ringtones for business calls"})]}),n.jsxs(H,{className:"pt-6",children:[n.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4",children:"SIP (Session Initiation Protocol) routing allows your business calls to ring on your Samsung phone through a SIP endpoint instead of a regular phone number. This enables you to:"}),n.jsxs("ul",{className:"space-y-2 ml-6",children:[n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx(bn,{className:"h-5 w-5 text-green-600 dark:text-green-400 mt-0.5 flex-shrink-0"}),n.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:'Set a custom ringtone specifically for business calls (e.g., "Clean Machine" ringtone)'})]}),n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx(bn,{className:"h-5 w-5 text-green-600 dark:text-green-400 mt-0.5 flex-shrink-0"}),n.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:'Display a custom line label (e.g., "Clean Machine SIP Line") when calls come in'})]}),n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx(bn,{className:"h-5 w-5 text-green-600 dark:text-green-400 mt-0.5 flex-shrink-0"}),n.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Still see the real customer's caller ID (not your business number)"})]}),n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx(bn,{className:"h-5 w-5 text-green-600 dark:text-green-400 mt-0.5 flex-shrink-0"}),n.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Instantly recognize business calls by sound and visual cues"})]})]})]})]}),n.jsxs(O,{className:"mb-6",children:[n.jsxs(ee,{children:[n.jsxs(te,{className:"flex items-center gap-2",children:[n.jsx(ge,{className:"bg-purple-600 dark:bg-purple-500 text-white",children:"Step 1"}),n.jsx(R6,{className:"h-5 w-5"}),"Create Twilio SIP Domain"]}),n.jsx(ke,{children:"Set up a SIP domain in your Twilio account to route calls"})]}),n.jsx(H,{className:"space-y-4",children:n.jsxs("ol",{className:"space-y-4 list-decimal list-inside",children:[n.jsxs("li",{className:"text-gray-700 dark:text-gray-300",children:[n.jsx("strong",{children:"Log into Twilio Console:"}),n.jsxs("p",{className:"ml-6 mt-2 text-sm text-gray-600 dark:text-gray-400",children:["Go to ",n.jsx("a",{href:"https://console.twilio.com",target:"_blank",rel:"noopener noreferrer",className:"text-purple-600 dark:text-purple-400 underline",children:"console.twilio.com"})]})]}),n.jsxs("li",{className:"text-gray-700 dark:text-gray-300",children:[n.jsx("strong",{children:"Navigate to Voice  SIP Domains:"}),n.jsx("p",{className:"ml-6 mt-2 text-sm text-gray-600 dark:text-gray-400",children:"From the left sidebar: Explore Products  Voice  Manage  SIP Domains"})]}),n.jsxs("li",{className:"text-gray-700 dark:text-gray-300",children:[n.jsx("strong",{children:'Click "Create new SIP Domain":'}),n.jsxs("div",{className:"ml-6 mt-2 space-y-2",children:[n.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[n.jsx("strong",{children:"Domain Name:"})," Choose a unique name (e.g., ",n.jsx("code",{className:"bg-gray-100 dark:bg-gray-800 px-2 py-0.5 rounded",children:"cleanmachinetulsa"}),")"]}),n.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["This creates a full SIP URI like: ",n.jsx("code",{className:"bg-gray-100 dark:bg-gray-800 px-2 py-0.5 rounded",children:"cleanmachinetulsa.sip.twilio.com"})]})]})]}),n.jsxs("li",{className:"text-gray-700 dark:text-gray-300",children:[n.jsx("strong",{children:"Configure Voice Settings:"}),n.jsxs("div",{className:"ml-6 mt-2 space-y-2",children:[n.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[n.jsx("strong",{children:"Request URL:"})," Leave this blank (your app handles routing automatically)"]}),n.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[n.jsx("strong",{children:"SIP Registration:"}),' Set to "Enabled" to allow devices to register']})]})]}),n.jsxs("li",{className:"text-gray-700 dark:text-gray-300",children:[n.jsx("strong",{children:"Save your SIP Domain"}),n.jsx("p",{className:"ml-6 mt-2 text-sm text-gray-600 dark:text-gray-400",children:"Your domain will be created and ready to use"})]})]})})]}),n.jsxs(O,{className:"mb-6",children:[n.jsxs(ee,{children:[n.jsxs(te,{className:"flex items-center gap-2",children:[n.jsx(ge,{className:"bg-purple-600 dark:bg-purple-500 text-white",children:"Step 2"}),n.jsx(fy,{className:"h-5 w-5"}),"Create SIP Credentials"]}),n.jsx(ke,{children:"Set up authentication credentials for your SIP endpoint"})]}),n.jsxs(H,{className:"space-y-4",children:[n.jsxs("ol",{className:"space-y-4 list-decimal list-inside",children:[n.jsxs("li",{className:"text-gray-700 dark:text-gray-300",children:[n.jsx("strong",{children:"Go to SIP Credential Lists:"}),n.jsx("p",{className:"ml-6 mt-2 text-sm text-gray-600 dark:text-gray-400",children:"From Voice  SIP Domains  Your Domain  Credential Lists"})]}),n.jsxs("li",{className:"text-gray-700 dark:text-gray-300",children:[n.jsx("strong",{children:"Create new Credential List:"}),n.jsxs("div",{className:"ml-6 mt-2 space-y-2",children:[n.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:'Click "Create a new Credential List"'}),n.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[n.jsx("strong",{children:"Friendly Name:"})," ",n.jsx("code",{className:"bg-gray-100 dark:bg-gray-800 px-2 py-0.5 rounded",children:"Clean Machine Credentials"})]})]})]}),n.jsxs("li",{className:"text-gray-700 dark:text-gray-300",children:[n.jsx("strong",{children:"Add Credential:"}),n.jsxs("div",{className:"ml-6 mt-2 space-y-2",children:[n.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[n.jsx("strong",{children:"Username:"})," Your SIP username (e.g., ",n.jsx("code",{className:"bg-gray-100 dark:bg-gray-800 px-2 py-0.5 rounded",children:"jody"}),")"]}),n.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[n.jsx("strong",{children:"Password:"})," Create a strong password (store this securely!)"]})]})]}),n.jsxs("li",{className:"text-gray-700 dark:text-gray-300",children:[n.jsx("strong",{children:"Copy the Credential SID:"}),n.jsxs("div",{className:"ml-6 mt-2 space-y-2",children:[n.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["After creating the credential list, copy its SID (starts with ",n.jsx("code",{className:"bg-gray-100 dark:bg-gray-800 px-2 py-0.5 rounded",children:"CL..."}),")"]}),n.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"You'll need this for the Phone Settings SIP configuration"})]})]}),n.jsxs("li",{className:"text-gray-700 dark:text-gray-300",children:[n.jsx("strong",{children:"Map Credential List to your SIP Domain:"}),n.jsx("p",{className:"ml-6 mt-2 text-sm text-gray-600 dark:text-gray-400",children:'In your SIP Domain settings, add this credential list under "Credential Lists"'})]})]}),n.jsxs("div",{className:"flex items-start gap-2 p-3 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded mt-4",children:[n.jsx(Wt,{className:"h-5 w-5 text-amber-700 dark:text-amber-300 mt-0.5 flex-shrink-0"}),n.jsxs("div",{className:"text-sm text-amber-700 dark:text-amber-300",children:[n.jsx("strong",{children:"Important:"})," Store your SIP password securely. You'll need it to configure your Samsung phone, but it should NEVER be entered into the Clean Machine app (we only store the Credential SID)."]})]})]})]}),n.jsxs(O,{className:"mb-6",children:[n.jsxs(ee,{children:[n.jsxs(te,{className:"flex items-center gap-2",children:[n.jsx(ge,{className:"bg-purple-600 dark:bg-purple-500 text-white",children:"Step 3"}),n.jsx(pu,{className:"h-5 w-5"}),"Configure Samsung Phone SIP Account"]}),n.jsx(ke,{children:"Add the SIP account to your Samsung device"})]}),n.jsx(H,{className:"space-y-4",children:n.jsxs("ol",{className:"space-y-4 list-decimal list-inside",children:[n.jsxs("li",{className:"text-gray-700 dark:text-gray-300",children:[n.jsx("strong",{children:"Open Phone App Settings:"}),n.jsx("p",{className:"ml-6 mt-2 text-sm text-gray-600 dark:text-gray-400",children:"Open the Phone app  Menu (three dots)  Settings  Calling accounts  SIP accounts"})]}),n.jsxs("li",{className:"text-gray-700 dark:text-gray-300",children:[n.jsx("strong",{children:"Add New SIP Account:"}),n.jsxs("div",{className:"ml-6 mt-2 space-y-3 bg-gray-50 dark:bg-gray-800 p-4 rounded",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300",children:"Profile Name:"}),n.jsx("code",{className:"text-sm bg-gray-100 dark:bg-gray-900 px-2 py-1 rounded",children:"Clean Machine SIP Line"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300",children:"Username:"}),n.jsx("code",{className:"text-sm bg-gray-100 dark:bg-gray-900 px-2 py-1 rounded",children:"jody"}),n.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"(same as Twilio credential)"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300",children:"Password:"}),n.jsx("code",{className:"text-sm bg-gray-100 dark:bg-gray-900 px-2 py-1 rounded",children:""}),n.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"(password from Twilio credential)"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300",children:"Server:"}),n.jsx("code",{className:"text-sm bg-gray-100 dark:bg-gray-900 px-2 py-1 rounded",children:"cleanmachinetulsa.sip.twilio.com"}),n.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"(your Twilio SIP Domain)"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300",children:"Optional Settings:"}),n.jsxs("ul",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1 space-y-1",children:[n.jsxs("li",{children:[" Authentication username: ",n.jsx("code",{className:"bg-gray-100 dark:bg-gray-900 px-1 rounded",children:"jody"})]}),n.jsx("li",{children:" Outbound proxy: (leave blank)"}),n.jsxs("li",{children:[" Port: ",n.jsx("code",{className:"bg-gray-100 dark:bg-gray-900 px-1 rounded",children:"5060"})," (default)"]}),n.jsxs("li",{children:[" Transport: ",n.jsx("code",{className:"bg-gray-100 dark:bg-gray-900 px-1 rounded",children:"UDP"})," (default)"]})]})]})]})]}),n.jsxs("li",{className:"text-gray-700 dark:text-gray-300",children:[n.jsx("strong",{children:"Save the SIP Account"}),n.jsx("p",{className:"ml-6 mt-2 text-sm text-gray-600 dark:text-gray-400",children:"Your phone will attempt to register with the Twilio SIP domain"})]}),n.jsxs("li",{className:"text-gray-700 dark:text-gray-300",children:[n.jsx("strong",{children:"Verify Registration:"}),n.jsx("p",{className:"ml-6 mt-2 text-sm text-gray-600 dark:text-gray-400",children:'The account should show as "Registered" or "Active". If not, check your credentials and server address.'})]})]})})]}),n.jsxs(O,{className:"mb-6",children:[n.jsxs(ee,{children:[n.jsxs(te,{className:"flex items-center gap-2",children:[n.jsx(ge,{className:"bg-purple-600 dark:bg-purple-500 text-white",children:"Step 4"}),n.jsx(Yc,{className:"h-5 w-5"}),"Assign Custom Ringtone"]}),n.jsx(ke,{children:"Set a unique ringtone for your SIP business line"})]}),n.jsxs(H,{className:"space-y-4",children:[n.jsxs("ol",{className:"space-y-4 list-decimal list-inside",children:[n.jsxs("li",{className:"text-gray-700 dark:text-gray-300",children:[n.jsx("strong",{children:"Access SIP Account Settings:"}),n.jsx("p",{className:"ml-6 mt-2 text-sm text-gray-600 dark:text-gray-400",children:'Phone app  Settings  Calling accounts  SIP accounts  Tap your "Clean Machine SIP Line" account'})]}),n.jsxs("li",{className:"text-gray-700 dark:text-gray-300",children:[n.jsx("strong",{children:"Set Ringtone:"}),n.jsx("p",{className:"ml-6 mt-2 text-sm text-gray-600 dark:text-gray-400",children:'Look for "Ringtone" or "Incoming call" settings'})]}),n.jsxs("li",{className:"text-gray-700 dark:text-gray-300",children:[n.jsx("strong",{children:"Choose Custom Ringtone:"}),n.jsx("p",{className:"ml-6 mt-2 text-sm text-gray-600 dark:text-gray-400",children:`Select a distinctive ringtone that you'll recognize as your business line (e.g., upload a custom "Clean Machine" sound)`})]}),n.jsxs("li",{className:"text-gray-700 dark:text-gray-300",children:[n.jsx("strong",{children:"Test the Ringtone:"}),n.jsx("p",{className:"ml-6 mt-2 text-sm text-gray-600 dark:text-gray-400",children:"Have someone call your business number and verify the custom ringtone plays"})]})]}),n.jsxs("div",{className:"flex items-start gap-2 p-3 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded mt-4",children:[n.jsx(bn,{className:"h-5 w-5 text-green-700 dark:text-green-300 mt-0.5 flex-shrink-0"}),n.jsxs("div",{className:"text-sm text-green-700 dark:text-green-300",children:[n.jsx("strong",{children:"Success!"}),` When a customer calls your business number, you'll now hear your custom ringtone and see "Clean Machine SIP Line" on your phone, while still seeing the customer's real caller ID.`]})]})]})]}),n.jsxs(O,{className:"mb-6",children:[n.jsxs(ee,{children:[n.jsxs(te,{className:"flex items-center gap-2",children:[n.jsx(ge,{className:"bg-purple-600 dark:bg-purple-500 text-white",children:"Step 5"}),n.jsx(ja,{className:"h-5 w-5"}),"Enable SIP Routing in Clean Machine"]}),n.jsx(ke,{children:"Configure your phone line to use SIP routing"})]}),n.jsx(H,{className:"space-y-4",children:n.jsxs("ol",{className:"space-y-4 list-decimal list-inside",children:[n.jsxs("li",{className:"text-gray-700 dark:text-gray-300",children:[n.jsx("strong",{children:"Go to Phone Settings:"}),n.jsx("p",{className:"ml-6 mt-2 text-sm text-gray-600 dark:text-gray-400",children:"Navigate to Communications  Phone Settings in your Clean Machine dashboard"})]}),n.jsxs("li",{className:"text-gray-700 dark:text-gray-300",children:[n.jsx("strong",{children:"Edit Phone Line Configuration:"}),n.jsx("p",{className:"ml-6 mt-2 text-sm text-gray-600 dark:text-gray-400",children:'Click "Configure" on your business phone line'})]}),n.jsxs("li",{className:"text-gray-700 dark:text-gray-300",children:[n.jsx("strong",{children:"Enable SIP Routing:"}),n.jsxs("div",{className:"ml-6 mt-2 space-y-2",children:[n.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:'Toggle on "Enable SIP Routing"'}),n.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 p-3 rounded space-y-2",children:[n.jsxs("p",{className:"text-sm",children:[n.jsx("strong",{children:"SIP Endpoint:"})," ",n.jsx("code",{className:"bg-gray-100 dark:bg-gray-900 px-2 py-0.5 rounded text-xs",children:"jody@cleanmachinetulsa.sip.twilio.com"})]}),n.jsxs("p",{className:"text-sm",children:[n.jsx("strong",{children:"Credential SID:"})," ",n.jsx("code",{className:"bg-gray-100 dark:bg-gray-900 px-2 py-0.5 rounded text-xs",children:"CLxxx..."})," (from Step 2)"]}),n.jsxs("p",{className:"text-sm",children:[n.jsx("strong",{children:"Fallback Number:"})," ",n.jsx("code",{className:"bg-gray-100 dark:bg-gray-900 px-2 py-0.5 rounded text-xs",children:"+19188565711"})," (optional)"]})]})]})]}),n.jsxs("li",{className:"text-gray-700 dark:text-gray-300",children:[n.jsx("strong",{children:"Save Changes:"}),n.jsx("p",{className:"ml-6 mt-2 text-sm text-gray-600 dark:text-gray-400",children:"All incoming calls will now route through SIP"})]})]})})]}),n.jsxs(O,{className:"mb-6 border-amber-200 dark:border-amber-800",children:[n.jsxs(ee,{className:"bg-amber-50 dark:bg-amber-900/20",children:[n.jsxs(te,{className:"flex items-center gap-2 text-amber-900 dark:text-amber-100",children:[n.jsx(Wt,{className:"h-5 w-5"}),"Troubleshooting"]}),n.jsx(ke,{children:"Common issues and solutions"})]}),n.jsx(H,{className:"pt-6",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:'Phone shows "Not Registered" or "Registration Failed"'}),n.jsxs("ul",{className:"text-sm text-gray-600 dark:text-gray-400 space-y-1 ml-6",children:[n.jsx("li",{children:" Verify your SIP username and password match exactly"}),n.jsxs("li",{children:[" Check that the server address is correct (e.g., ",n.jsx("code",{className:"bg-gray-100 dark:bg-gray-800 px-1 rounded",children:"yourdomain.sip.twilio.com"}),")"]}),n.jsx("li",{children:" Ensure your phone has internet connectivity (WiFi or mobile data)"}),n.jsx("li",{children:" Try toggling airplane mode on/off to refresh network connections"})]})]}),n.jsx(Ot,{}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"Calls don't ring on my phone"}),n.jsxs("ul",{className:"text-sm text-gray-600 dark:text-gray-400 space-y-1 ml-6",children:[n.jsx("li",{children:' Verify SIP account is registered (shows "Active" or "Registered")'}),n.jsx("li",{children:' Check that "Enable SIP Routing" is toggled ON in Phone Settings'}),n.jsx("li",{children:" Confirm the SIP endpoint format is correct (username@domain)"}),n.jsx("li",{children:" Test with a fallback number to verify if SIP-specific or general routing issue"})]})]}),n.jsx(Ot,{}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"Custom ringtone doesn't play"}),n.jsxs("ul",{className:"text-sm text-gray-600 dark:text-gray-400 space-y-1 ml-6",children:[n.jsx("li",{children:" Verify the ringtone is assigned specifically to the SIP account (not general phone ringtone)"}),n.jsx("li",{children:" Check that phone volume is turned up and not in Do Not Disturb mode"}),n.jsx("li",{children:' Some Samsung models require the SIP account to be set as "Use for all calls"'}),n.jsx("li",{children:" Try re-assigning the ringtone after a successful call test"})]})]}),n.jsx(Ot,{}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"Caller ID not showing correctly"}),n.jsxs("ul",{className:"text-sm text-gray-600 dark:text-gray-400 space-y-1 ml-6",children:[n.jsx("li",{children:" This is a Twilio SIP limitation - caller ID passthrough may not work on all carriers"}),n.jsx("li",{children:" You may see your business number instead of the customer's number"}),n.jsx("li",{children:" Check voicemail transcriptions or call logs for customer information"}),n.jsx("li",{children:" Consider using the fallback number if caller ID is critical"})]})]}),n.jsx(Ot,{}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:"Need to switch back to regular forwarding"}),n.jsxs("ul",{className:"text-sm text-gray-600 dark:text-gray-400 space-y-1 ml-6",children:[n.jsx("li",{children:' Simply toggle OFF "Enable SIP Routing" in Phone Settings'}),n.jsx("li",{children:" Calls will immediately switch back to standard PSTN forwarding"}),n.jsx("li",{children:" Your SIP configuration is saved and can be re-enabled anytime"}),n.jsx("li",{children:" No need to remove the SIP account from your Samsung phone"})]})]})]})})]}),n.jsxs(O,{children:[n.jsx(ee,{children:n.jsxs(te,{className:"flex items-center gap-2",children:[n.jsx(tge,{className:"h-5 w-5"}),"Additional Resources"]})}),n.jsx(H,{children:n.jsxs("ul",{className:"space-y-2",children:[n.jsx("li",{children:n.jsx("a",{href:"https://www.twilio.com/docs/voice/sip",target:"_blank",rel:"noopener noreferrer",className:"text-purple-600 dark:text-purple-400 hover:underline",children:"Twilio SIP Documentation"})}),n.jsx("li",{children:n.jsx("a",{href:"https://www.twilio.com/docs/voice/sip/receiving-sip-calls",target:"_blank",rel:"noopener noreferrer",className:"text-purple-600 dark:text-purple-400 hover:underline",children:"Receiving SIP Calls - Twilio Guide"})}),n.jsx("li",{children:n.jsx("a",{href:"https://www.samsung.com/us/support/",target:"_blank",rel:"noopener noreferrer",className:"text-purple-600 dark:text-purple-400 hover:underline",children:"Samsung Phone Support"})})]})})]})]})]})}function Ogt(){const{toast:e}=Ee(),[t,r]=p.useState(null),[s,a]=p.useState(""),[i,o]=p.useState(!1),{data:l}=be({queryKey:["/api/users/me"]}),c=l==null?void 0:l.user,{data:d,isLoading:u,error:f}=be({queryKey:["/api/invoices/unpaid"]}),h=je({mutationFn:async({invoiceId:v,method:b})=>(await Ne("POST",`/api/invoices/${v}/pay`,{paymentMethod:b})).json(),onSuccess:(v,b)=>{ze.invalidateQueries({queryKey:["/api/invoices/unpaid"]});const w=b.method.charAt(0).toUpperCase()+b.method.slice(1);e({title:"Invoice Marked as Paid",description:`Invoice marked as paid with ${w}. Review request sent to customer.`,variant:"default"}),o(!1),r(null),a("")},onError:v=>{e({title:"Error",description:v.message||"Failed to mark invoice as paid",variant:"destructive"})}}),m=v=>{r(v),a(""),o(!0)},g=()=>{if(!t||!s){e({title:"Error",description:"Please select a payment method",variant:"destructive"});return}h.mutate({invoiceId:t.id,method:s})},x=v=>YZ(new Date,new Date(v))>14,y=v=>`$${parseFloat(v).toFixed(2)}`;return c&&!["owner","manager"].includes(c.role)?n.jsx(xn,{title:"Billing",showSearch:!1,children:n.jsx("div",{className:"flex items-center justify-center h-screen",children:n.jsx("p",{className:"text-muted-foreground",children:"Access denied. This page is only available to owners and managers."})})}):n.jsx(xn,{title:"Billing",showSearch:!1,children:n.jsxs("div",{className:"p-6 max-w-7xl mx-auto space-y-6","data-testid":"billing-page",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Billing"}),n.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:"Manage unpaid invoices and process cash payments"})]}),n.jsx("div",{className:"flex items-center gap-2",children:n.jsx(Ar,{className:"h-8 w-8 text-blue-600"})})]}),n.jsxs(O,{children:[n.jsxs(ee,{children:[n.jsx(te,{children:"Unpaid Invoices"}),n.jsx(ke,{children:"Mark invoices as paid when customers pay with cash or alternative methods"})]}),n.jsx(H,{children:u?n.jsxs("div",{className:"space-y-3","data-testid":"loading-skeleton",children:[n.jsx(Lt,{className:"h-12 w-full"}),n.jsx(Lt,{className:"h-12 w-full"}),n.jsx(Lt,{className:"h-12 w-full"})]}):f?n.jsxs("div",{className:"flex items-center gap-2 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg","data-testid":"error-message",children:[n.jsx(Wt,{className:"h-5 w-5 text-red-600 dark:text-red-400"}),n.jsx("p",{className:"text-red-800 dark:text-red-200",children:"Failed to load unpaid invoices. Please try again."})]}):!(d!=null&&d.invoices)||d.invoices.length===0?n.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center","data-testid":"empty-state",children:[n.jsx(nn,{className:"h-16 w-16 text-green-500 mb-4"}),n.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"All Caught Up!"}),n.jsx("p",{className:"text-gray-500 dark:text-gray-400 max-w-md",children:"There are no unpaid invoices at the moment. Great work!"})]}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs(hs,{children:[n.jsx(ms,{children:n.jsxs(vn,{children:[n.jsx(Ve,{children:"Date"}),n.jsx(Ve,{children:"Customer"}),n.jsx(Ve,{children:"Service"}),n.jsx(Ve,{children:"Amount"}),n.jsx(Ve,{children:"Status"}),n.jsx(Ve,{className:"text-right",children:"Actions"})]})}),n.jsx(ps,{children:d.invoices.map(v=>n.jsxs(vn,{"data-testid":`invoice-row-${v.id}`,children:[n.jsx(Ue,{children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Dt,{className:"h-4 w-4 text-gray-400"}),n.jsx("span",{"data-testid":`text-date-${v.id}`,children:Ie(new Date(v.createdAt),"MMM d, yyyy")})]})}),n.jsx(Ue,{children:n.jsxs("div",{className:"space-y-1",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Fn,{className:"h-4 w-4 text-gray-400"}),n.jsx("span",{className:"font-medium","data-testid":`text-customer-${v.id}`,children:v.customerName||"Unknown"})]}),v.customerPhone&&n.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[n.jsx(bt,{className:"h-3 w-3"}),n.jsx("span",{children:v.customerPhone})]}),v.customerEmail&&n.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[n.jsx(Cr,{className:"h-3 w-3"}),n.jsx("span",{children:v.customerEmail})]})]})}),n.jsx(Ue,{"data-testid":`text-service-${v.id}`,children:n.jsx("div",{className:"max-w-xs truncate",title:v.serviceDescription,children:v.serviceDescription})}),n.jsx(Ue,{children:n.jsx("span",{className:"font-semibold text-lg","data-testid":`text-amount-${v.id}`,children:y(v.amount)})}),n.jsx(Ue,{children:n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsx(ge,{variant:"secondary",className:"w-fit","data-testid":`badge-status-${v.id}`,children:"Unpaid"}),x(v.createdAt)&&n.jsxs(ge,{variant:"destructive",className:"w-fit text-xs","data-testid":`badge-overdue-${v.id}`,children:[">","14 days old"]})]})}),n.jsx(Ue,{className:"text-right",children:n.jsx(_,{onClick:()=>m(v),size:"sm","data-testid":`button-mark-paid-${v.id}`,children:"Mark as Paid"})})]},v.id))})]})})})]}),n.jsx(At,{open:i,onOpenChange:o,children:n.jsxs(_t,{"data-testid":"dialog-mark-paid",children:[n.jsxs($t,{children:[n.jsx(Et,{children:"Mark Invoice as Paid"}),n.jsx(an,{children:"Record payment and send review request to customer"})]}),t&&n.jsxs("div",{className:"space-y-4 py-4",children:[n.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 p-4 rounded-lg space-y-2",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Customer:"}),n.jsx("span",{className:"font-medium","data-testid":"dialog-customer",children:t.customerName||"Unknown"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Service:"}),n.jsx("span",{className:"font-medium text-right","data-testid":"dialog-service",children:t.serviceDescription})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Amount:"}),n.jsx("span",{className:"font-bold text-lg text-green-600","data-testid":"dialog-amount",children:y(t.amount)})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Date:"}),n.jsx("span",{className:"font-medium","data-testid":"dialog-date",children:Ie(new Date(t.createdAt),"MMM d, yyyy")})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-sm font-medium",children:"Payment Method"}),n.jsxs(Pt,{value:s,onValueChange:a,children:[n.jsx(kt,{"data-testid":"select-payment-method",children:n.jsx(Tt,{placeholder:"Select payment method"})}),n.jsxs(Mt,{children:[n.jsx(ve,{value:"cash","data-testid":"option-cash",children:"Cash"}),n.jsx(ve,{value:"venmo","data-testid":"option-venmo",children:"Venmo"}),n.jsx(ve,{value:"cashapp","data-testid":"option-cashapp",children:"CashApp"}),n.jsx(ve,{value:"paypal","data-testid":"option-paypal",children:"PayPal"}),n.jsx(ve,{value:"check","data-testid":"option-check",children:"Check"})]})]})]})]}),n.jsxs(Sn,{children:[n.jsx(_,{variant:"outline",onClick:()=>o(!1),disabled:h.isPending,"data-testid":"button-cancel",children:"Cancel"}),n.jsx(_,{onClick:g,disabled:!s||h.isPending,"data-testid":"button-confirm-payment",children:h.isPending?"Processing...":"Confirm Payment"})]})]})})]})})}function Rgt(){const{toast:e}=Ee(),{data:t,isLoading:r}=be({queryKey:["/api/escalations"]}),s=je({mutationFn:l=>Ne(`/api/escalations/${l}/acknowledge`,{method:"POST"}),onSuccess:()=>{ze.invalidateQueries({queryKey:["/api/escalations"]}),e({title:"Escalation acknowledged"})}}),a=je({mutationFn:l=>Ne(`/api/escalations/${l}/resolve`,{method:"POST"}),onSuccess:()=>{ze.invalidateQueries({queryKey:["/api/escalations"]}),e({title:"Escalation resolved - AI resumed"})}});if(r)return n.jsx(xn,{children:n.jsx("div",{className:"p-6",children:"Loading escalations..."})});const i=(t==null?void 0:t.filter(l=>l.status==="pending"||l.status==="acknowledged"))||[],o=(t==null?void 0:t.filter(l=>l.status==="resolved"||l.status==="expired"))||[];return n.jsx(xn,{children:n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold",children:"Customer Escalations"}),n.jsx("p",{className:"text-muted-foreground",children:"Customers requesting to speak with you directly"})]}),n.jsxs("section",{children:[n.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[n.jsx(Wt,{className:"w-5 h-5 text-orange-500"}),"Active Escalations (",i.length,")"]}),i.length===0?n.jsx(O,{children:n.jsxs(H,{className:"p-6 text-center text-muted-foreground",children:[n.jsx(bn,{className:"w-12 h-12 mx-auto mb-2 text-green-500"}),n.jsx("p",{children:"No active escalations - all clear!"})]})}):n.jsx("div",{className:"grid gap-4",children:i.map(l=>n.jsxs(O,{className:"border-orange-200 dark:border-orange-900",children:[n.jsx(ee,{children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"space-y-1",children:[n.jsxs(te,{className:"flex items-center gap-2",children:[l.customerName||l.customerPhone,n.jsx(ge,{variant:l.status==="acknowledged"?"default":"destructive",children:l.status})]}),n.jsxs("div",{className:"text-sm text-muted-foreground space-y-1",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(bt,{className:"w-4 h-4"}),l.customerPhone]}),l.customerVehicle&&n.jsx("div",{children:l.customerVehicle}),n.jsxs("div",{className:"flex items-center gap-2 text-orange-600 dark:text-orange-400",children:[n.jsx(Rt,{className:"w-4 h-4"}),"Requested ",bu(new Date(l.requestedAt),{addSuffix:!0})]})]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(_,{size:"sm",variant:"outline",onClick:()=>window.open(`/messages?phone=${l.customerPhone}`,"_blank"),"data-testid":`button-view-conversation-${l.id}`,children:[n.jsx(on,{className:"w-4 h-4 mr-2"}),"View Chat"]}),l.status==="pending"&&n.jsx(_,{size:"sm",onClick:()=>s.mutate(l.id),disabled:s.isPending,"data-testid":`button-acknowledge-${l.id}`,children:"Acknowledge"}),n.jsx(_,{size:"sm",variant:"default",onClick:()=>a.mutate(l.id),disabled:a.isPending,"data-testid":`button-resolve-${l.id}`,children:"Resolve & Resume AI"})]})]})}),n.jsx(H,{children:n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{children:[n.jsx("span",{className:"font-semibold",children:"Trigger:"}),' "',l.triggerPhrase,'"']}),l.recentMessageSummary&&n.jsxs("div",{className:"bg-muted p-3 rounded-md",children:[n.jsx("div",{className:"font-semibold mb-1 text-sm",children:"Recent Conversation:"}),n.jsx("pre",{className:"text-xs whitespace-pre-wrap font-mono",children:l.recentMessageSummary})]})]})})]},l.id))})]}),o.length>0&&n.jsxs("section",{children:[n.jsxs("h2",{className:"text-xl font-semibold mb-4",children:["Recent History (",o.length,")"]}),n.jsx("div",{className:"grid gap-3",children:o.slice(0,10).map(l=>n.jsx(O,{className:"opacity-60",children:n.jsx(H,{className:"p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("div",{className:"font-medium",children:l.customerName||l.customerPhone}),n.jsxs("div",{className:"text-sm text-muted-foreground",children:[l.status==="resolved"?"Resolved":"Expired"," ",bu(new Date(l.resolvedAt||l.requestedAt),{addSuffix:!0})]})]}),n.jsx(ge,{variant:"secondary",children:l.status})]})})},l.id))})]})]})})}function Fgt(){const[e,t]=p.useState("all"),[r,s]=p.useState(!1),[a,i]=p.useState(null),{toast:o}=Ee(),{data:l}=be({queryKey:["/api/reminders/analytics"],refetchInterval:3e4}),{data:c,isLoading:d}=be({queryKey:["/api/reminders/jobs",e],queryFn:async()=>{const g=e==="all"?"":`?status=${e}`,x=await fetch(`/api/reminders/jobs${g}`);if(!x.ok)throw new Error("Failed to fetch jobs");return x.json()},refetchInterval:3e4}),u=je({mutationFn:async g=>await Ne(`/api/reminders/send-now/${g}`,"POST",{}),onSuccess:()=>{o({title:"Reminder Sent",description:"Reminder sent successfully to customer"}),ze.invalidateQueries({queryKey:["/api/reminders/jobs"]}),ze.invalidateQueries({queryKey:["/api/reminders/analytics"]}),s(!1),i(null)},onError:g=>{o({title:"Send Failed",description:g.message||"Failed to send reminder",variant:"destructive"})}}),f=()=>{if(!a){o({title:"No Customer Selected",description:"Please select a customer to send a reminder",variant:"destructive"});return}u.mutate(a.id)},h=(c==null?void 0:c.jobs)||[],m=(l==null?void 0:l.analytics)||{};return n.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold",children:"Reminder Management"}),n.jsx("p",{className:"text-muted-foreground mt-1",children:"Monitor and manage automated customer reminders"})]}),n.jsxs(At,{open:r,onOpenChange:s,children:[n.jsx(pl,{asChild:!0,children:n.jsxs(_,{"data-testid":"button-manual-send",children:[n.jsx(Vi,{className:"w-4 h-4 mr-2"}),"Send Manual Reminder"]})}),n.jsxs(_t,{className:"sm:max-w-[500px]",children:[n.jsxs($t,{children:[n.jsx(Et,{children:"Send Manual Reminder"}),n.jsx(an,{children:"Select a customer and send an immediate reminder"})]}),n.jsx("div",{className:"grid gap-4 py-4",children:n.jsxs("div",{className:"grid gap-2",children:[n.jsx(U,{htmlFor:"customer",children:"Customer *"}),n.jsx(dx,{value:a,onChange:i,placeholder:"Search for a customer...","data-testid":"picker-manual-reminder-customer"})]})}),n.jsxs(Sn,{children:[n.jsx(_,{variant:"outline",onClick:()=>{s(!1),i(null)},"data-testid":"button-cancel-manual-send",children:"Cancel"}),n.jsx(_,{onClick:f,disabled:!a||u.isPending,"data-testid":"button-confirm-manual-send",children:u.isPending?"Sending...":"Send Reminder"})]})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsxs(O,{"data-testid":"card-pending-reminders",children:[n.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(te,{className:"text-sm font-medium",children:"Pending Reminders"}),n.jsx(Rt,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(H,{children:[n.jsx("div",{className:"text-2xl font-bold",children:m.pending||0}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Scheduled to send"})]})]}),n.jsxs(O,{"data-testid":"card-sent-7days",children:[n.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(te,{className:"text-sm font-medium",children:"Sent (7 Days)"}),n.jsx(bn,{className:"h-4 w-4 text-green-500"})]}),n.jsxs(H,{children:[n.jsx("div",{className:"text-2xl font-bold",children:m.sentLast7Days||0}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Last 7 days"})]})]}),n.jsxs(O,{"data-testid":"card-success-rate",children:[n.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(te,{className:"text-sm font-medium",children:"Success Rate"}),n.jsx(ya,{className:"h-4 w-4 text-blue-500"})]}),n.jsxs(H,{children:[n.jsxs("div",{className:"text-2xl font-bold",children:[m.successRate||0,"%"]}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Delivery success"})]})]}),n.jsxs(O,{"data-testid":"card-opt-outs",children:[n.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(te,{className:"text-sm font-medium",children:"Opt-Outs"}),n.jsx(br,{className:"h-4 w-4 text-orange-500"})]}),n.jsxs(H,{children:[n.jsx("div",{className:"text-2xl font-bold",children:m.totalOptOuts||0}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Total opted out"})]})]})]}),n.jsxs(O,{children:[n.jsx(ee,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(te,{children:"Reminder Queue"}),n.jsx(ke,{children:"View and manage scheduled reminders"})]}),n.jsxs(Pt,{value:e,onValueChange:t,children:[n.jsx(kt,{className:"w-[180px]","data-testid":"select-status-filter",children:n.jsx(Tt,{placeholder:"Filter by status"})}),n.jsxs(Mt,{children:[n.jsx(ve,{value:"all",children:"All Statuses"}),n.jsx(ve,{value:"pending",children:"Pending"}),n.jsx(ve,{value:"sent",children:"Sent"}),n.jsx(ve,{value:"failed",children:"Failed"}),n.jsx(ve,{value:"snoozed",children:"Snoozed"}),n.jsx(ve,{value:"cancelled",children:"Cancelled"})]})]})]})}),n.jsx(H,{children:d?n.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Loading reminders..."}):h.length===0?n.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No reminders found"}):n.jsxs(hs,{children:[n.jsx(ms,{children:n.jsxs(vn,{children:[n.jsx(Ve,{children:"Customer"}),n.jsx(Ve,{children:"Service"}),n.jsx(Ve,{children:"Scheduled For"}),n.jsx(Ve,{children:"Status"}),n.jsx(Ve,{children:"Message"}),n.jsx(Ve,{children:"Actions"})]})}),n.jsx(ps,{children:h.map(g=>{var x,y,v,b;return n.jsxs(vn,{"data-testid":`row-job-${g.id}`,children:[n.jsx(Ue,{className:"font-medium",children:((x=g.customer)==null?void 0:x.name)||"Unknown"}),n.jsx(Ue,{children:((v=(y=g.rule)==null?void 0:y.service)==null?void 0:v.name)||"General"}),n.jsx(Ue,{children:Ie(new Date(g.scheduledFor),"MMM dd, yyyy h:mm a")}),n.jsx(Ue,{children:n.jsx(ge,{variant:g.status==="sent"?"default":g.status==="failed"?"destructive":g.status==="pending"?"secondary":"outline",children:g.status})}),n.jsxs(Ue,{className:"max-w-md truncate",children:[(b=g.messageContent)==null?void 0:b.substring(0,100),"..."]}),n.jsx(Ue,{children:g.status==="pending"&&n.jsx(_,{size:"sm",variant:"ghost",onClick:()=>u.mutate(g.customerId),disabled:u.isPending,"data-testid":`button-send-now-${g.id}`,children:"Send Now"})})]},g.id)})})]})})]})]})}function zgt(){const[e,t]=p.useState(new Date),[r,s]=p.useState(!1),[a,i]=p.useState(""),[o,l]=p.useState(""),[c,d]=p.useState(""),{toast:u}=Ee();p.useEffect(()=>{const L=new URLSearchParams(window.location.search).get("week");L==="next"?t(wy(new Date,1)):L==="after-next"&&t(wy(new Date,2))},[]);const f=hl(e,{weekStartsOn:1}),h=h4(e,{weekStartsOn:1}),m=Array.from({length:7},(I,L)=>Hr(f,L)),{data:g,isLoading:x}=be({queryKey:["/api/admin/shifts",f.toISOString(),h.toISOString()],queryFn:async()=>{const I=await fetch(`/api/admin/shifts?startDate=${Ie(f,"yyyy-MM-dd")}&endDate=${Ie(h,"yyyy-MM-dd")}`);if(!I.ok)throw new Error("Failed to fetch shifts");return I.json()}}),{data:y}=be({queryKey:["/api/admin/shift-templates"]}),{data:v}=be({queryKey:["/api/technicians"]}),b=je({mutationFn:async I=>await Ne("/api/admin/shifts","POST",I),onSuccess:()=>{u({title:"Shift assigned successfully"}),ze.invalidateQueries({queryKey:["/api/admin/shifts"]}),s(!1),i(""),l(""),d("")},onError:I=>{u({title:"Failed to assign shift",description:(I==null?void 0:I.message)||"Please try again",variant:"destructive"})}}),w=je({mutationFn:async I=>await Ne(`/api/admin/shifts/${I}`,"DELETE",{}),onSuccess:()=>{u({title:"Shift removed"}),ze.invalidateQueries({queryKey:["/api/admin/shifts"]})},onError:()=>{u({title:"Failed to remove shift",variant:"destructive"})}}),N=(g==null?void 0:g.shifts)||[],j=(y==null?void 0:y.templates)||[],S=(v==null?void 0:v.technicians)||[],C=(I,L)=>{i(I.toString()),d(Ie(L,"yyyy-MM-dd")),s(!0)},k=()=>{if(!a||!o||!c){u({title:"Missing information",description:"Please select technician, shift template, and date",variant:"destructive"});return}b.mutate({technicianId:parseInt(a),shiftDate:c,shiftTemplateId:parseInt(o)})},M=N.length,A=N.filter(I=>I.status==="scheduled").length,P=N.filter(I=>I.status==="completed").length,T=n.jsxs(_,{onClick:()=>s(!0),"data-testid":"button-assign-shift",children:[n.jsx(Un,{className:"mr-2 h-4 w-4"}),"Assign Shift"]});return n.jsxs(xn,{title:"Shift Scheduling",pageActions:T,children:[n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsx("div",{className:"flex items-center justify-between",children:n.jsx("div",{className:"text-sm text-muted-foreground",children:"Manage technician shifts and schedules"})}),n.jsxs(At,{open:r,onOpenChange:s,children:[n.jsx(pl,{asChild:!0,children:n.jsxs(_,{className:"w-full sm:w-auto","data-testid":"button-assign-shift",children:[n.jsx(Un,{className:"w-4 h-4 mr-2"}),"Assign Shift"]})}),n.jsxs(_t,{children:[n.jsx($t,{children:n.jsx(Et,{children:"Assign Shift"})}),n.jsxs("div",{className:"space-y-4 py-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(U,{htmlFor:"technician",children:"Technician"}),n.jsxs(Pt,{value:a,onValueChange:i,children:[n.jsx(kt,{id:"technician","data-testid":"select-technician",children:n.jsx(Tt,{placeholder:"Select technician"})}),n.jsx(Mt,{children:S.map(I=>n.jsx(ve,{value:I.id.toString(),children:I.preferredName||I.fullName},I.id))})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(U,{htmlFor:"template",children:"Shift Template"}),n.jsxs(Pt,{value:o,onValueChange:l,children:[n.jsx(kt,{id:"template","data-testid":"select-template",children:n.jsx(Tt,{placeholder:"Select shift template"})}),n.jsx(Mt,{children:j.map(I=>n.jsxs(ve,{value:I.id.toString(),children:[I.name," (",I.startTime," - ",I.endTime,")"]},I.id))})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(U,{htmlFor:"date",children:"Date"}),n.jsxs(Pt,{value:c,onValueChange:d,children:[n.jsx(kt,{id:"date","data-testid":"select-date",children:n.jsx(Tt,{placeholder:"Select date"})}),n.jsx(Mt,{children:m.map(I=>n.jsx(ve,{value:Ie(I,"yyyy-MM-dd"),children:Ie(I,"EEEE, MMM dd, yyyy")},I.toISOString()))})]})]}),n.jsx(_,{onClick:k,disabled:b.isPending,className:"w-full","data-testid":"button-submit-shift",children:b.isPending?"Assigning...":"Assign Shift"})]})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[n.jsxs(O,{className:"p-4 md:p-6",children:[n.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Shifts"}),n.jsx("div",{className:"text-2xl font-bold","data-testid":"stat-total-shifts",children:M})]}),n.jsxs(O,{className:"p-4 md:p-6",children:[n.jsx("div",{className:"text-sm text-muted-foreground",children:"Scheduled"}),n.jsx("div",{className:"text-2xl font-bold","data-testid":"stat-scheduled-shifts",children:A})]}),n.jsxs(O,{className:"p-4 md:p-6",children:[n.jsx("div",{className:"text-sm text-muted-foreground",children:"Completed"}),n.jsx("div",{className:"text-2xl font-bold","data-testid":"stat-completed-shifts",children:P})]})]}),n.jsx(O,{className:"p-4 md:p-6",children:n.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-3 sm:gap-4",children:[n.jsxs(_,{variant:"outline",className:"w-full sm:w-auto min-h-[44px]",onClick:()=>t(Hr(e,-7)),"data-testid":"button-prev-week",children:[n.jsx(Lu,{className:"w-4 h-4 sm:mr-2"}),n.jsx("span",{className:"hidden sm:inline",children:"Previous Week"}),n.jsx("span",{className:"sm:hidden",children:"Previous"})]}),n.jsxs("div",{className:"flex-1 text-center font-semibold text-sm md:text-base",children:[n.jsx(Dt,{className:"w-4 h-4 inline mr-2"}),Ie(f,"MMM dd")," - ",Ie(h,"MMM dd, yyyy")]}),n.jsxs(_,{variant:"outline",className:"w-full sm:w-auto min-h-[44px]",onClick:()=>t(Hr(e,7)),"data-testid":"button-next-week",children:[n.jsx("span",{className:"hidden sm:inline",children:"Next Week"}),n.jsx("span",{className:"sm:hidden",children:"Next"}),n.jsx(vl,{className:"w-4 h-4 sm:ml-2"})]})]})}),n.jsx(O,{className:"p-4 md:p-6",children:n.jsxs(js,{defaultValue:"table",className:"w-full",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-4",children:[n.jsx("h2",{className:"text-lg md:text-xl font-semibold",children:"Shift Assignments"}),n.jsxs(ds,{"data-testid":"tabs-view-selector",children:[n.jsx(dt,{value:"table","data-testid":"tab-list-view",children:"List View"}),n.jsx(dt,{value:"calendar","data-testid":"tab-calendar-view",children:"Calendar Grid"})]})]}),n.jsx(pt,{value:"table","data-testid":"content-table-view",children:x?n.jsx("div",{className:"text-center py-8",children:"Loading shifts..."}):N.length===0?n.jsx("div",{className:"text-center py-8 text-muted-foreground",children:'No shifts scheduled for this week. Click "Assign Shift" to get started.'}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs(hs,{children:[n.jsx(ms,{children:n.jsxs(vn,{children:[n.jsx(Ve,{children:"Technician"}),n.jsx(Ve,{children:"Date"}),n.jsx(Ve,{children:"Shift Type"}),n.jsx(Ve,{children:"Time"}),n.jsx(Ve,{children:"Status"}),n.jsx(Ve,{children:"Actions"})]})}),n.jsx(ps,{children:N.map(I=>{var L,R,G;return n.jsxs(vn,{"data-testid":`row-shift-${I.id}`,children:[n.jsx(Ue,{className:"font-medium",children:((L=I.technician)==null?void 0:L.preferredName)||((R=I.technician)==null?void 0:R.fullName)||"Unknown"}),n.jsx(Ue,{children:Ie(new Date(I.shiftDate),"EEE, MMM dd, yyyy")}),n.jsx(Ue,{children:((G=I.template)==null?void 0:G.name)||"Custom"}),n.jsxs(Ue,{children:[I.startTime," - ",I.endTime]}),n.jsx(Ue,{children:n.jsx(ge,{variant:I.status==="scheduled"?"default":I.status==="completed"?"secondary":"outline","data-testid":`badge-status-${I.id}`,children:I.status})}),n.jsx(Ue,{children:n.jsx(_,{size:"sm",variant:"ghost",className:"min-h-[44px] min-w-[44px]",onClick:()=>w.mutate(I.id),disabled:w.isPending,"data-testid":`button-delete-shift-${I.id}`,children:n.jsx(Nr,{className:"w-4 h-4 text-destructive"})})})]},I.id)})})]})})}),n.jsx(pt,{value:"calendar","data-testid":"content-calendar-view",children:x?n.jsx("div",{className:"text-center py-8",children:"Loading shifts..."}):S.length===0?n.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No technicians available. Add technicians to start scheduling."}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full border-collapse","data-testid":"table-calendar-grid",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{className:"border border-border p-2 bg-muted font-semibold text-left min-w-[120px] sticky left-0 z-10",children:"Technician"}),m.map(I=>n.jsxs("th",{className:"border border-border p-2 bg-muted font-semibold text-center min-w-[120px]","data-testid":`header-day-${Ie(I,"yyyy-MM-dd")}`,children:[n.jsx("div",{className:"text-xs md:text-sm",children:Ie(I,"EEE")}),n.jsx("div",{className:"text-xs text-muted-foreground",children:Ie(I,"MMM dd")})]},I.toISOString()))]})}),n.jsx("tbody",{children:S.map(I=>n.jsxs("tr",{"data-testid":`row-tech-${I.id}`,children:[n.jsx("td",{className:"border border-border p-2 font-medium bg-background sticky left-0 z-10",children:I.preferredName||I.fullName}),m.map(L=>{const R=N.filter(G=>G.technicianId===I.id&&is(new Date(G.shiftDate),L));return n.jsx("td",{className:"border border-border p-2 cursor-pointer hover:bg-muted/50 transition-colors min-h-[60px] align-top",onClick:()=>C(I.id,L),"data-testid":`cell-${I.id}-${Ie(L,"yyyy-MM-dd")}`,children:n.jsx("div",{className:"flex flex-col gap-1",children:R.length===0?n.jsx("div",{className:"text-xs text-muted-foreground text-center py-2",children:"Click to assign"}):R.map(G=>{var $;return n.jsx(ge,{variant:G.status==="scheduled"?"default":G.status==="completed"?"secondary":"outline",className:"text-xs justify-center","data-testid":`badge-shift-${G.id}`,children:(($=G.template)==null?void 0:$.name)||"Custom"},G.id)})})},L.toISOString())})]},I.id))})]})})})]})})]})}function Bgt(){const[e,t]=p.useState(),[r,s]=p.useState(),[a,i]=p.useState("vacation"),[o,l]=p.useState(""),{toast:c}=Ee(),d=je({mutationFn:async()=>{if(!e||!r)throw new Error("Start and end dates are required");if(r<e)throw new Error("End date must be after start date");return await Ne("/api/tech/pto","POST",{startDate:e.toISOString(),endDate:r.toISOString(),requestType:a,notes:o.trim()||void 0})},onSuccess:()=>{c({title:"PTO request submitted successfully",description:"Your manager will review your request."}),t(void 0),s(void 0),l(""),i("vacation")},onError:f=>{c({title:"Failed to submit request",description:f.message,variant:"destructive"})}}),u=()=>{if(!e||!r)return 0;const f=Math.abs(r.getTime()-e.getTime());return Math.ceil(f/(1e3*60*60*24))+1};return n.jsx("div",{className:"container mx-auto p-4 md:p-6 max-w-2xl",children:n.jsxs(O,{children:[n.jsx(ee,{className:"p-4 md:p-6",children:n.jsxs(te,{className:"flex items-center gap-2 text-lg md:text-xl",children:[n.jsx(tx,{className:"w-5 h-5"}),"Request Time Off"]})}),n.jsxs(H,{className:"space-y-4 md:space-y-6 p-4 md:p-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Request Type"}),n.jsxs(Pt,{value:a,onValueChange:i,children:[n.jsx(kt,{"data-testid":"select-pto-type",children:n.jsx(Tt,{})}),n.jsxs(Mt,{children:[n.jsx(ve,{value:"vacation",children:"Vacation"}),n.jsx(ve,{value:"sick",children:"Sick Leave"}),n.jsx(ve,{value:"personal",children:"Personal Day"}),n.jsx(ve,{value:"unpaid",children:"Unpaid Leave"})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Start Date"}),n.jsxs(hh,{children:[n.jsx(mh,{asChild:!0,children:n.jsxs(_,{variant:"outline",className:"w-full justify-start text-left font-normal min-h-[44px]","data-testid":"button-start-date",children:[n.jsx(Dt,{className:"mr-2 h-4 w-4"}),e?Ie(e,"PPP"):"Pick a date"]})}),n.jsx(Pu,{className:"w-auto p-0",align:"start",children:n.jsx(oh,{mode:"single",selected:e,onSelect:t,disabled:f=>f<new Date(new Date().setHours(0,0,0,0)),"data-testid":"calendar-start-date"})})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium mb-2 block",children:"End Date"}),n.jsxs(hh,{children:[n.jsx(mh,{asChild:!0,children:n.jsxs(_,{variant:"outline",className:"w-full justify-start text-left font-normal min-h-[44px]","data-testid":"button-end-date",children:[n.jsx(Dt,{className:"mr-2 h-4 w-4"}),r?Ie(r,"PPP"):"Pick a date"]})}),n.jsx(Pu,{className:"w-auto p-0",align:"start",children:n.jsx(oh,{mode:"single",selected:r,onSelect:s,disabled:f=>{const h=new Date(new Date().setHours(0,0,0,0));return!!(f<h||e&&f<e)},"data-testid":"calendar-end-date"})})]})]})]}),e&&r&&n.jsx("div",{className:"bg-muted p-4 rounded-lg","data-testid":"text-total-days",children:n.jsxs("p",{className:"text-sm font-medium",children:["Total Days: ",n.jsx("span",{className:"text-lg font-bold",children:u()})]})}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Notes (Optional)"}),n.jsx(un,{value:o,onChange:f=>l(f.target.value),placeholder:"Any additional details about your time off request...",rows:4,"data-testid":"textarea-pto-notes"})]}),n.jsx(_,{onClick:()=>d.mutate(),disabled:!e||!r||d.isPending,"data-testid":"button-submit-pto",className:"w-full min-h-[44px]",children:d.isPending?"Submitting...":"Submit Request"})]})]})})}function Ugt(){const[e,t]=p.useState(null),[r,s]=p.useState(""),[a,i]=p.useState(!1),[o,l]=p.useState("approved"),{toast:c}=Ee(),{data:d,isLoading:u}=be({queryKey:["/api/admin/pto"]}),f=je({mutationFn:async({id:S,status:C,notes:k})=>await Ne(`/api/admin/pto/${S}`,"PUT",{status:C,adminNotes:k}),onSuccess:()=>{ze.invalidateQueries({queryKey:["/api/admin/pto"]}),c({title:"PTO request updated successfully"}),i(!1),t(null),s("")},onError:()=>{c({title:"Failed to update request",variant:"destructive"})}}),h=(S,C)=>{t(S),l(C),s(""),i(!0)},m=()=>{e&&f.mutate({id:e.id,status:o,notes:r})},g=S=>{const C={pending:"secondary",approved:"default",denied:"destructive",cancelled:"outline"};return n.jsx(ge,{variant:C[S]||"outline","data-testid":`badge-status-${S}`,children:S.charAt(0).toUpperCase()+S.slice(1)})},x=S=>({vacation:"text-blue-600",sick:"text-red-600",personal:"text-purple-600",unpaid:"text-gray-600"})[S]||"text-gray-600",y=S=>d!=null&&d.requests?S?d.requests.filter(C=>C.status===S):d.requests:[],v=(d==null?void 0:d.requests.filter(S=>S.status==="pending").length)||0,b=v>0?n.jsxs(ge,{variant:"destructive",children:[v," Pending"]}):null,w=({request:S})=>n.jsx(O,{"data-testid":`card-pto-${S.id}`,children:n.jsxs(H,{className:"p-4 md:p-6",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-start gap-3 mb-4",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"h-10 w-10 flex-shrink-0 rounded-full bg-primary/10 flex items-center justify-center",children:n.jsx(Fn,{className:"h-5 w-5 text-primary"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold","data-testid":`text-technician-${S.id}`,children:S.technician.preferredName}),n.jsxs("p",{className:"text-sm text-muted-foreground",children:["Requested ",Ie(new Date(S.requestedAt),"MMM d, yyyy")]})]})]}),g(S.status)]}),n.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-4 gap-3 md:gap-4 mb-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Type"}),n.jsx("p",{className:`font-medium ${x(S.requestType)}`,"data-testid":`text-type-${S.id}`,children:S.requestType.charAt(0).toUpperCase()+S.requestType.slice(1)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Duration"}),n.jsxs("p",{className:"font-medium","data-testid":`text-duration-${S.id}`,children:[S.totalDays," ",parseFloat(S.totalDays)===1?"day":"days"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Start Date"}),n.jsx("p",{className:"font-medium","data-testid":`text-start-${S.id}`,children:Ie(new Date(S.startDate),"MMM d, yyyy")})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"End Date"}),n.jsx("p",{className:"font-medium","data-testid":`text-end-${S.id}`,children:Ie(new Date(S.endDate),"MMM d, yyyy")})]})]}),S.reason&&n.jsxs("div",{className:"mb-4",children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Notes"}),n.jsx("p",{className:"text-sm","data-testid":`text-reason-${S.id}`,children:S.reason})]}),S.reviewNotes&&n.jsxs("div",{className:"mb-4 bg-muted p-3 rounded-lg",children:[n.jsx("p",{className:"text-sm text-muted-foreground",children:"Admin Notes"}),n.jsx("p",{className:"text-sm","data-testid":`text-admin-notes-${S.id}`,children:S.reviewNotes})]}),S.status==="pending"&&n.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[n.jsxs(_,{onClick:()=>h(S,"approved"),variant:"default",size:"sm",className:"flex-1 min-h-[44px]","data-testid":`button-approve-${S.id}`,children:[n.jsx(Mr,{className:"h-4 w-4 mr-1"}),"Approve"]}),n.jsxs(_,{onClick:()=>h(S,"denied"),variant:"destructive",size:"sm",className:"flex-1 min-h-[44px]","data-testid":`button-deny-${S.id}`,children:[n.jsx(Jr,{className:"h-4 w-4 mr-1"}),"Deny"]})]})]})},S.id);if(u)return n.jsx(xn,{title:"PTO Requests",pageActions:b,children:n.jsx("div",{className:"p-6",children:n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsx("p",{className:"text-muted-foreground",children:"Loading PTO requests..."})})})});y("pending").length;const N=y("approved").length,j=y("denied").length;return n.jsx(xn,{title:"PTO Requests",pageActions:b,children:n.jsxs("div",{className:"p-6",children:[n.jsx(O,{className:"mb-6",children:n.jsx(ee,{children:n.jsxs(te,{className:"flex items-center gap-2",children:[n.jsx(U0e,{className:"w-5 h-5"}),"PTO Request Management"]})})}),n.jsxs(js,{defaultValue:"pending",className:"w-full",children:[n.jsxs(ds,{className:"grid w-full grid-cols-2 sm:grid-cols-4",children:[n.jsxs(dt,{value:"all","data-testid":"tab-all",children:["All (",(d==null?void 0:d.requests.length)||0,")"]}),n.jsxs(dt,{value:"pending","data-testid":"tab-pending",children:["Pending (",v,")"]}),n.jsxs(dt,{value:"approved","data-testid":"tab-approved",children:["Approved (",N,")"]}),n.jsxs(dt,{value:"denied","data-testid":"tab-denied",children:["Denied (",j,")"]})]}),n.jsx(pt,{value:"all",className:"mt-6",children:n.jsx("div",{className:"grid gap-4",children:(d==null?void 0:d.requests.length)===0?n.jsx(O,{children:n.jsxs(H,{className:"p-8 text-center",children:[n.jsx(Dt,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"No PTO requests found"})]})}):d==null?void 0:d.requests.map(S=>n.jsx(w,{request:S},S.id))})}),n.jsx(pt,{value:"pending",className:"mt-6",children:n.jsx("div",{className:"grid gap-4","data-testid":"list-pending",children:y("pending").length===0?n.jsx(O,{children:n.jsxs(H,{className:"p-8 text-center",children:[n.jsx(Dt,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"No pending PTO requests"})]})}):y("pending").map(S=>n.jsx(w,{request:S},S.id))})}),n.jsx(pt,{value:"approved",className:"mt-6",children:n.jsx("div",{className:"grid gap-4","data-testid":"list-approved",children:y("approved").length===0?n.jsx(O,{children:n.jsxs(H,{className:"p-8 text-center",children:[n.jsx(Dt,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"No approved PTO requests"})]})}):y("approved").map(S=>n.jsx(w,{request:S},S.id))})}),n.jsx(pt,{value:"denied",className:"mt-6",children:n.jsx("div",{className:"grid gap-4","data-testid":"list-denied",children:y("denied").length===0?n.jsx(O,{children:n.jsxs(H,{className:"p-8 text-center",children:[n.jsx(Dt,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),n.jsx("p",{className:"text-muted-foreground",children:"No denied PTO requests"})]})}):y("denied").map(S=>n.jsx(w,{request:S},S.id))})})]}),n.jsx(At,{open:a,onOpenChange:i,children:n.jsxs(_t,{"data-testid":"dialog-review",children:[n.jsxs($t,{children:[n.jsxs(Et,{children:[o==="approved"?"Approve":"Deny"," PTO Request"]}),n.jsx(an,{children:e&&n.jsxs(n.Fragment,{children:[e.technician.preferredName," - ",e.requestType," from"," ",Ie(new Date(e.startDate),"MMM d")," to"," ",Ie(new Date(e.endDate),"MMM d, yyyy")," (",e.totalDays," days)"]})})]}),n.jsx("div",{className:"space-y-4",children:n.jsxs("div",{children:[n.jsxs("label",{className:"text-sm font-medium mb-2 block",children:["Admin Notes ",o==="denied"&&"(Required for denial)"]}),n.jsx(un,{value:r,onChange:S=>s(S.target.value),placeholder:o==="approved"?"Optional notes about this approval...":"Please provide a reason for denial...",rows:4,"data-testid":"textarea-admin-notes"})]})}),n.jsxs(Sn,{children:[n.jsx(_,{variant:"outline",onClick:()=>i(!1),"data-testid":"button-cancel-review",children:"Cancel"}),n.jsx(_,{onClick:m,disabled:f.isPending||o==="denied"&&!r.trim(),variant:o==="approved"?"default":"destructive","data-testid":"button-confirm-review",children:f.isPending?"Submitting...":`Confirm ${o==="approved"?"Approval":"Denial"}`})]})]})})]})})}function Vgt(){const{toast:e}=Ee(),{data:t,isLoading:r}=be({queryKey:["/api/tech/open-shifts"]}),s=je({mutationFn:async i=>await Ne(`/api/tech/claim-shift/${i}`,"POST",{}),onSuccess:()=>{e({title:"Shift claimed successfully!"}),ze.invalidateQueries({queryKey:["/api/tech/open-shifts"]}),ze.invalidateQueries({queryKey:["/api/tech/my-shifts"]})},onError:i=>{e({title:"Failed to claim shift",description:i.message||"Shift may no longer be available",variant:"destructive"})}}),a=(t==null?void 0:t.shifts)||[];return n.jsxs("div",{className:"container mx-auto p-4 md:p-6 space-y-4 md:space-y-6",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl md:text-3xl font-bold",children:"Open Shifts"}),n.jsx("p",{className:"text-sm md:text-base text-muted-foreground",children:"Claim available shifts"})]}),r?n.jsx("div",{className:"text-center py-8",children:"Loading open shifts..."}):a.length===0?n.jsx(O,{className:"p-6 md:p-8 text-center text-muted-foreground",children:n.jsx("p",{children:"No open shifts available at this time"})}):n.jsx("div",{className:"grid gap-4",children:a.map(i=>{var o;return n.jsxs(O,{"data-testid":`card-open-shift-${i.id}`,children:[n.jsxs(ee,{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-2 sm:space-y-0 pb-2 p-4 md:p-6",children:[n.jsxs(te,{className:"text-sm md:text-base font-medium",children:[n.jsx(Dt,{className:"inline w-4 h-4 mr-2"}),n.jsx("span",{className:"break-words",children:Ie(new Date(i.shiftDate),"EEEE, MMMM dd, yyyy")})]}),n.jsx(ge,{variant:"secondary",children:"Open"})]}),n.jsxs(H,{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 p-4 md:p-6 pt-0",children:[n.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[n.jsx(Rt,{className:"w-4 h-4 flex-shrink-0"}),n.jsxs("span",{className:"break-words",children:[((o=i.template)==null?void 0:o.name)||"Shift",": ",i.startTime," - ",i.endTime]})]}),n.jsxs(_,{size:"sm",className:"w-full sm:w-auto min-h-[44px]",onClick:()=>s.mutate(i.id),disabled:s.isPending,"data-testid":`button-claim-shift-${i.id}`,children:[n.jsx(bn,{className:"w-4 h-4 mr-2"}),"Claim Shift"]})]})]},i.id)})})]})}function Hgt(){var b,w;const{toast:e}=Ee(),[t,r]=p.useState(!1),[s,a]=p.useState(null),[i,o]=p.useState(""),[l,c]=p.useState("approved"),{data:d}=be({queryKey:["/api/user"]}),u=((b=d==null?void 0:d.user)==null?void 0:b.role)==="owner"||((w=d==null?void 0:d.user)==null?void 0:w.role)==="manager",{data:f,isLoading:h}=be({queryKey:u?["/api/admin/shift-trades"]:["/api/tech/shift-trades"]}),m=je({mutationFn:async({tradeId:N,status:j,notes:S})=>await Ne(`/api/admin/shift-trades/${N}`,"PUT",{status:j,reviewNotes:S}),onSuccess:(N,j)=>{e({title:`Trade ${j.status}!`,description:`Shift trade has been ${j.status}.`}),ze.invalidateQueries({queryKey:["/api/admin/shift-trades"]}),r(!1),o(""),a(null)},onError:N=>{e({title:"Failed to update trade",description:N.message||"Please try again",variant:"destructive"})}}),g=(N,j)=>{a(N),c(j),r(!0)},x=()=>{s&&m.mutate({tradeId:s,status:l,notes:i})},y=N=>{switch(N){case"pending":return n.jsx(ge,{variant:"secondary","data-testid":"badge-status-pending",children:"Pending"});case"approved":return n.jsx(ge,{className:"bg-green-500","data-testid":"badge-status-approved",children:"Approved"});case"denied":return n.jsx(ge,{variant:"destructive","data-testid":"badge-status-denied",children:"Denied"});case"cancelled":return n.jsx(ge,{variant:"outline","data-testid":"badge-status-cancelled",children:"Cancelled"});default:return n.jsx(ge,{variant:"secondary",children:N})}},v=(f==null?void 0:f.trades)||[];return n.jsxs("div",{className:"container mx-auto p-4 md:p-6 space-y-4 md:space-y-6",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl md:text-3xl font-bold",children:"Shift Trades"}),n.jsx("p",{className:"text-sm md:text-base text-muted-foreground",children:u?"Review and manage shift trade requests":"View your shift trade requests"})]}),h?n.jsx("div",{className:"text-center py-8",children:"Loading shift trades..."}):v.length===0?n.jsx(O,{className:"p-6 md:p-8 text-center text-muted-foreground",children:n.jsx("p",{children:"No shift trade requests at this time"})}):n.jsx("div",{className:"grid gap-4",children:v.map(N=>{var j,S;return n.jsxs(O,{"data-testid":`card-shift-trade-${N.id}`,children:[n.jsxs(ee,{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-2 sm:space-y-0 pb-2 p-4 md:p-6",children:[n.jsxs(te,{className:"text-sm md:text-base font-medium flex items-center gap-2",children:[n.jsx($0e,{className:"w-4 h-4 flex-shrink-0"}),N.tradeType==="giveaway"?"Shift Giveaway":"Shift Trade"]}),y(N.status)]}),n.jsxs(H,{className:"space-y-4 p-4 md:p-6 pt-0",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("div",{className:"text-sm font-medium text-muted-foreground",children:"Offering Technician"}),n.jsx("div",{className:"text-sm",children:((j=N.offeringTech)==null?void 0:j.preferredName)||"Unknown"})]}),N.requestingTech&&n.jsxs("div",{children:[n.jsx("div",{className:"text-sm font-medium text-muted-foreground",children:"Requesting Technician"}),n.jsx("div",{className:"text-sm",children:((S=N.requestingTech)==null?void 0:S.preferredName)||"Unknown"})]})]}),N.originalShift&&n.jsxs("div",{className:"border-t pt-3",children:[n.jsx("div",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Shift Details"}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4 text-sm",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Dt,{className:"w-4 h-4 flex-shrink-0"}),Ie(new Date(N.originalShift.shiftDate),"MMM dd, yyyy")]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Rt,{className:"w-4 h-4 flex-shrink-0"}),N.originalShift.startTime," - ",N.originalShift.endTime]})]})]}),N.message&&n.jsxs("div",{className:"border-t pt-3",children:[n.jsx("div",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Reason"}),n.jsx("div",{className:"text-sm",children:N.message})]}),N.reviewNotes&&n.jsxs("div",{className:"border-t pt-3",children:[n.jsx("div",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Review Notes"}),n.jsx("div",{className:"text-sm",children:N.reviewNotes})]}),u&&N.status==="pending"&&n.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 border-t pt-3",children:[n.jsxs(_,{size:"sm",variant:"default",className:"flex-1 min-h-[44px]",onClick:()=>g(N.id,"approved"),disabled:m.isPending,"data-testid":`button-approve-trade-${N.id}`,children:[n.jsx(bn,{className:"w-4 h-4 mr-2"}),"Approve"]}),n.jsxs(_,{size:"sm",variant:"destructive",className:"flex-1 min-h-[44px]",onClick:()=>g(N.id,"denied"),disabled:m.isPending,"data-testid":`button-deny-trade-${N.id}`,children:[n.jsx(Ws,{className:"w-4 h-4 mr-2"}),"Deny"]})]}),n.jsxs("div",{className:"text-xs text-muted-foreground",children:["Requested: ",Ie(new Date(N.requestedAt),"MMM dd, yyyy h:mm a")]})]})]},N.id)})}),n.jsx(At,{open:t,onOpenChange:r,children:n.jsxs(_t,{"data-testid":"dialog-review-trade",children:[n.jsx($t,{children:n.jsxs(Et,{children:[l==="approved"?"Approve":"Deny"," Shift Trade"]})}),n.jsx("div",{className:"space-y-4",children:n.jsxs("div",{children:[n.jsx(U,{htmlFor:"reviewNotes",children:"Review Notes (Optional)"}),n.jsx(un,{id:"reviewNotes",placeholder:"Add any notes about this decision...",value:i,onChange:N=>o(N.target.value),"data-testid":"textarea-review-notes"})]})}),n.jsxs(Sn,{children:[n.jsx(_,{variant:"outline",onClick:()=>r(!1),"data-testid":"button-cancel-review",children:"Cancel"}),n.jsx(_,{onClick:x,disabled:m.isPending,"data-testid":"button-submit-review",children:m.isPending?"Submitting...":`Confirm ${l==="approved"?"Approval":"Denial"}`})]})]})})]})}function Wgt(){const{toast:e}=Ee(),{data:t,isLoading:r}=be({queryKey:["/api/usage-dashboard"],refetchInterval:6e4}),s=je({mutationFn:async()=>await Ne("/api/usage-sync","POST",{}),onSuccess:()=>{e({title:"Sync complete!",description:"Usage data updated from APIs"}),ze.invalidateQueries({queryKey:["/api/usage-dashboard"]})},onError:m=>{e({title:"Sync failed",description:m.message,variant:"destructive"})}});if(r)return n.jsx("div",{className:"container mx-auto p-6",children:"Loading..."});const a=(t==null?void 0:t.summary)||{},i=(t==null?void 0:t.health)||[],o=(t==null?void 0:t.recentLogs)||[],l=Object.entries(a.byService||{}).map(([m,g])=>({name:m.toUpperCase(),cost:parseFloat(g.cost),calls:g.calls})),c=["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6","#ec4899"],d=m=>{switch(m){case"healthy":return n.jsx(bn,{className:"w-5 h-5 text-green-500"});case"degraded":return n.jsx(Ya,{className:"w-5 h-5 text-yellow-500"});case"down":return n.jsx(Ws,{className:"w-5 h-5 text-red-500"});default:return n.jsx(R6,{className:"w-5 h-5 text-gray-500"})}},u=m=>{switch(m){case"healthy":return"bg-green-100 text-green-800 border-green-200";case"degraded":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"down":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},f=i.filter(m=>m.status==="healthy").length,h=n.jsxs(_,{onClick:()=>s.mutate(),disabled:s.isPending,"data-testid":"button-sync",size:"sm",children:[n.jsx(Jc,{className:`w-4 h-4 mr-2 ${s.isPending?"animate-spin":""}`}),"Sync Now"]});return n.jsx(xn,{title:"API Usage & Costs",pageActions:h,children:n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[n.jsxs(O,{children:[n.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(te,{className:"text-sm font-medium",children:"30-Day Cost"}),n.jsx(Ar,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(H,{children:[n.jsxs("div",{className:"text-2xl font-bold",children:["$",a.totalCost||"0.00"]}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:["Last ",a.period||"30 days"]})]})]}),n.jsxs(O,{children:[n.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(te,{className:"text-sm font-medium",children:"Total API Calls"}),n.jsx(tQ,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(H,{children:[n.jsx("div",{className:"text-2xl font-bold",children:o.reduce((m,g)=>m+g.quantity,0).toLocaleString()}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Across all services"})]})]}),n.jsxs(O,{children:[n.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(te,{className:"text-sm font-medium",children:"Services"}),n.jsx(R6,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(H,{children:[n.jsx("div",{className:"text-2xl font-bold",children:i.length}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Monitored integrations"})]})]}),n.jsxs(O,{children:[n.jsxs(ee,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[n.jsx(te,{className:"text-sm font-medium",children:"System Health"}),n.jsx(bn,{className:"h-4 w-4 text-muted-foreground"})]}),n.jsxs(H,{children:[n.jsxs("div",{className:"text-2xl font-bold",children:[f,"/",i.length]}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Services healthy"})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs(O,{children:[n.jsx(ee,{children:n.jsx(te,{children:"Cost by Service"})}),n.jsx(H,{children:n.jsx(uf,{width:"100%",height:300,children:n.jsxs(Rw,{data:l,children:[n.jsx(hf,{strokeDasharray:"3 3"}),n.jsx(Dl,{dataKey:"name"}),n.jsx(Mi,{}),n.jsx(ha,{formatter:m=>`$${m.toFixed(2)}`}),n.jsx(Oa,{dataKey:"cost",fill:"#3b82f6"})]})})})]}),n.jsxs(O,{children:[n.jsx(ee,{children:n.jsx(te,{children:"API Calls by Service"})}),n.jsx(H,{children:n.jsx(uf,{width:"100%",height:300,children:n.jsxs(Fft,{children:[n.jsx(gd,{data:l,cx:"50%",cy:"50%",labelLine:!1,label:({name:m,percent:g})=>`${m} ${(g*100).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"calls",children:l.map((m,g)=>n.jsx(S3,{fill:c[g%c.length]},`cell-${g}`))}),n.jsx(ha,{})]})})})]})]}),n.jsxs(O,{children:[n.jsx(ee,{children:n.jsx(te,{children:"Service Health Status"})}),n.jsx(H,{children:n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:i.map(m=>n.jsx(O,{className:`border-2 ${u(m.status)}`,"data-testid":`card-health-${m.service}`,children:n.jsxs(H,{className:"pt-6 space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"font-semibold text-lg uppercase",children:m.service}),d(m.status)]}),n.jsx(ge,{variant:"outline",children:m.status}),n.jsxs("p",{className:"text-xs text-muted-foreground",children:["Last checked: ",new Date(m.lastCheck).toLocaleTimeString()]}),m.consecutiveFailures>0&&n.jsxs("p",{className:"text-xs text-red-600",children:["Failures: ",m.consecutiveFailures]}),m.lastError&&n.jsx("p",{className:"text-xs text-red-600 truncate",title:m.lastError,children:m.lastError})]})},m.service))})})]}),n.jsxs(O,{children:[n.jsx(ee,{children:n.jsx(te,{children:"Recent Activity"})}),n.jsx(H,{children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs(hs,{children:[n.jsx(ms,{children:n.jsxs(vn,{children:[n.jsx(Ve,{children:"Time"}),n.jsx(Ve,{children:"Service"}),n.jsx(Ve,{children:"Type"}),n.jsx(Ve,{className:"text-right",children:"Quantity"}),n.jsx(Ve,{className:"text-right",children:"Cost"})]})}),n.jsx(ps,{children:o.slice(0,50).map((m,g)=>n.jsxs(vn,{"data-testid":`row-log-${g}`,children:[n.jsx(Ue,{className:"text-sm",children:new Date(m.timestamp).toLocaleString()}),n.jsx(Ue,{children:n.jsx(ge,{variant:"outline",children:m.service.toUpperCase()})}),n.jsx(Ue,{className:"text-sm",children:m.apiType}),n.jsx(Ue,{className:"text-right",children:m.quantity.toLocaleString()}),n.jsxs(Ue,{className:"text-right font-semibold",children:["$",parseFloat(m.cost).toFixed(4)]})]},g))})]})})})]})]})})}function qgt(){const[e,t]=p.useState([]),[r,s]=p.useState(!1),[a,i]=p.useState(null),[o,l]=p.useState([]),[c,d]=p.useState(!1),[u,f]=p.useState(!1),[h,m]=p.useState(localStorage.getItem("googlePhotosAlbumUrl")||"https://photos.app.goo.gl/Jb7vaQo6gYrWTPT88"),[g,x]=p.useState(h),{toast:y}=Ee(),v=cs(),{data:b,isLoading:w}=be({queryKey:["/api/gallery",{includeInactive:!0}],queryFn:async()=>{const E=await fetch("/api/gallery?includeInactive=true");if(!E.ok)throw new Error("Failed to fetch photos");return E.json()},enabled:!c}),{data:N,isLoading:j,refetch:S}=be({queryKey:["/api/gallery/fetch-google-photos-album",h],queryFn:async()=>{if(!h)return{success:!0,photos:[]};const E=await fetch("/api/gallery/fetch-google-photos-album",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({albumUrl:h})});if(!E.ok)throw new Error("Failed to fetch Google Photos");return E.json()},enabled:c&&!!h}),C=c?(N==null?void 0:N.photos)||[]:(b==null?void 0:b.photos)||[];C.length>0&&o.length===0&&l(C);const k=je({mutationFn:async E=>{const F=new FormData;return E.forEach(B=>{F.append("photos",B)}),await Ne("POST","/api/gallery",F,{headers:{}})},onSuccess:async()=>{y({title:"Success",description:`Uploaded ${e.length} photo(s)`}),t([]),s(!1),v.invalidateQueries({queryKey:["/api/gallery"]})},onError:E=>{y({title:"Upload Failed",description:E.message||"Failed to upload photos",variant:"destructive"}),s(!1)}}),M=je({mutationFn:async E=>await Ne("DELETE",`/api/gallery/${E}`),onSuccess:()=>{y({title:"Success",description:"Photo deleted successfully"}),v.invalidateQueries({queryKey:["/api/gallery"]}),i(null)},onError:E=>{y({title:"Delete Failed",description:E.message||"Failed to delete photo",variant:"destructive"})}}),A=je({mutationFn:async({id:E,isActive:F})=>await Ne("PATCH",`/api/gallery/${E}`,{isActive:F}),onSuccess:()=>{v.invalidateQueries({queryKey:["/api/gallery"]})}}),P=je({mutationFn:async E=>await Ne("POST","/api/gallery/reorder",{photos:E}),onSuccess:()=>{y({title:"Success",description:"Photo order updated"}),v.invalidateQueries({queryKey:["/api/gallery"]})}}),T=je({mutationFn:async()=>{const E=localStorage.getItem("googlePlaceId")||"";return await Ne("POST","/api/gallery/sync-google-photos",{googlePlaceId:E})},onSuccess:E=>{y({title:"Google Photos Synced",description:`${E.photosAdded||0} photos added from Google Business Profile`}),v.invalidateQueries({queryKey:["/api/gallery"]})},onError:E=>{y({title:"Sync Failed",description:E.message||"Failed to sync Google Business photos",variant:"destructive"})}}),I=E=>{if(E.target.files){const F=Array.from(E.target.files);t(B=>[...B,...F])}},L=p.useCallback(E=>{if(E.preventDefault(),E.dataTransfer.files){const F=Array.from(E.dataTransfer.files).filter(B=>B.type.startsWith("image/"));t(B=>[...B,...F])}},[]),R=p.useCallback(E=>{E.preventDefault()},[]),G=E=>{t(F=>F.filter((B,Z)=>Z!==E))},$=()=>{e.length!==0&&(s(!0),k.mutate(e))},D=E=>{l(E);const F=E.filter(B=>typeof B.id=="number").map((B,Z)=>({id:B.id,displayOrder:Z}));F.length>0&&P.mutate(F)},W=()=>{localStorage.setItem("googlePhotosAlbumUrl",g),m(g),f(!1),c&&g&&S(),y({title:"Success",description:"Album URL saved successfully"})};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs(O,{children:[n.jsx(ee,{children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs(te,{className:"flex items-center gap-2",children:[n.jsx($i,{className:"h-5 w-5"}),"Gallery Photo Manager"]}),n.jsx(ke,{children:c?"Displaying photos from Google Photos shared album":"Upload and manage photos for your public gallery page. Drag photos to reorder them."})]}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(U,{htmlFor:"google-photos-toggle",className:"text-sm",children:c?"Google Photos":"Local Photos"}),n.jsx(Vt,{id:"google-photos-toggle",checked:c,onCheckedChange:E=>{E&&!h&&f(!0),d(E)},"data-testid":"toggle-google-photos"})]}),c&&n.jsxs(_,{variant:"outline",size:"sm",onClick:()=>f(!0),"data-testid":"button-album-settings",children:[n.jsx(ja,{className:"h-4 w-4 mr-2"}),"Album Settings"]})]})]})}),n.jsxs(H,{className:"space-y-6",children:[!c&&n.jsxs("div",{className:"space-y-4",children:[n.jsx(U,{children:"Upload New Photos"}),n.jsxs("div",{onDrop:L,onDragOver:R,className:"border-2 border-dashed border-gray-300 dark:border-gray-700 rounded-lg p-8 text-center hover:border-blue-500 dark:hover:border-blue-400 transition-colors cursor-pointer",children:[n.jsx(se,{id:"file-upload",type:"file",multiple:!0,accept:"image/*",onChange:I,className:"hidden","data-testid":"input-gallery-upload"}),n.jsxs("label",{htmlFor:"file-upload",className:"cursor-pointer",children:[n.jsx(_p,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),n.jsx("p",{className:"text-lg font-medium mb-2",children:"Drop photos here or click to browse"}),n.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Supports JPEG, PNG, WEBP  Max 10MB per file  Upload multiple photos at once"})]})]}),e.length>0&&n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs(U,{children:[e.length," file(s) selected"]}),n.jsx(_,{onClick:$,disabled:r,size:"sm","data-testid":"button-upload-photos",children:r?n.jsxs(n.Fragment,{children:[n.jsx(nt,{className:"h-4 w-4 mr-2 animate-spin"}),"Uploading..."]}):n.jsxs(n.Fragment,{children:[n.jsx(_p,{className:"h-4 w-4 mr-2"}),"Upload ",e.length," Photo(s)"]})})]}),n.jsx("div",{className:"grid grid-cols-4 gap-2",children:e.map((E,F)=>n.jsxs(q.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"relative aspect-square rounded-lg overflow-hidden border",children:[n.jsx("img",{src:URL.createObjectURL(E),alt:`Preview ${F+1}`,className:"w-full h-full object-cover"}),n.jsx("button",{onClick:()=>G(F),className:"absolute top-1 right-1 p-1 bg-red-500 text-white rounded-full hover:bg-red-600","data-testid":`button-remove-${F}`,children:n.jsx(Jr,{className:"h-3 w-3"})})]},F))})]}),n.jsx("div",{className:"border-t pt-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx(U,{children:"Import from Google Business"}),n.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Automatically fetch photos from your Google Business Profile"})]}),n.jsx(_,{onClick:()=>T.mutate(),disabled:T.isPending,variant:"outline",size:"sm","data-testid":"button-sync-google-photos",children:T.isPending?n.jsxs(n.Fragment,{children:[n.jsx(nt,{className:"h-4 w-4 mr-2 animate-spin"}),"Syncing..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Qc,{className:"h-4 w-4 mr-2"}),"Sync from Google"]})})]})})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs(U,{children:["Current Photos (",C.length,")"]}),!c&&n.jsx(ge,{variant:"outline",children:"Drag to reorder"}),c&&n.jsx(ge,{variant:"secondary",children:"Read-only (from Google Photos)"})]}),w||j?n.jsx("div",{className:"flex items-center justify-center py-12",children:n.jsx(nt,{className:"h-8 w-8 animate-spin text-gray-400"})}):o.length===0?n.jsxs("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:[n.jsx($i,{className:"mx-auto h-12 w-12 mb-2 opacity-50"}),n.jsx("p",{children:c?"No photos found in album":"No photos uploaded yet"})]}):c?n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:C.map((E,F)=>n.jsxs("div",{className:"relative aspect-square rounded-lg overflow-hidden border hover:shadow-lg transition-shadow",children:[n.jsx("img",{src:E.imageUrl,alt:E.title||`Photo ${F+1}`,className:"w-full h-full object-cover"}),n.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black/50 text-white p-2",children:n.jsx("p",{className:"text-xs truncate",children:E.title||`Photo ${F+1}`})})]},E.id))}):n.jsx(hwe,{axis:"y",values:o,onReorder:D,className:"space-y-2",children:o.map(E=>n.jsxs(xwe,{value:E,className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg border cursor-move hover:shadow-md transition-shadow",children:[n.jsx(iQ,{className:"h-5 w-5 text-gray-400"}),n.jsx("img",{src:E.imageUrl,alt:E.title||`Gallery photo ${E.id}`,className:"w-16 h-16 object-cover rounded"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm font-medium truncate",children:E.title||`Photo ${E.id}`}),n.jsxs("p",{className:"text-xs text-gray-500",children:["Order: ",E.displayOrder]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(_,{variant:"ghost",size:"sm",onClick:()=>A.mutate({id:typeof E.id=="number"?E.id:0,isActive:!E.isActive}),"data-testid":`button-toggle-${E.id}`,children:E.isActive?n.jsx(Kl,{className:"h-4 w-4 text-green-600"}):n.jsx(uy,{className:"h-4 w-4 text-gray-400"})}),n.jsx(_,{variant:"ghost",size:"sm",onClick:()=>typeof E.id=="number"&&i(E.id),"data-testid":`button-delete-${E.id}`,children:n.jsx(Nr,{className:"h-4 w-4 text-red-600"})})]})]},E.id))})]})]})]}),n.jsx(V0,{open:a!==null,onOpenChange:()=>i(null),children:n.jsxs(kh,{children:[n.jsxs(wu,{children:[n.jsx(Nu,{children:"Delete Photo"}),n.jsx(Rc,{children:"Are you sure you want to delete this photo? This action cannot be undone."})]}),n.jsxs(ju,{children:[n.jsx(_h,{children:"Cancel"}),n.jsx(Mh,{onClick:()=>a&&M.mutate(a),className:"bg-red-600 hover:bg-red-700",children:"Delete"})]})]})}),n.jsx(At,{open:u,onOpenChange:f,children:n.jsxs(_t,{children:[n.jsxs($t,{children:[n.jsx(Et,{children:"Google Photos Album Settings"}),n.jsx(an,{children:"Enter the shared URL of your Google Photos album. The album must be publicly shared."})]}),n.jsxs("div",{className:"space-y-4 py-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(U,{htmlFor:"album-url",children:"Google Photos Album URL"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx($6,{className:"h-4 w-4 text-gray-400"}),n.jsx(se,{id:"album-url",value:g,onChange:E=>x(E.target.value),placeholder:"https://photos.app.goo.gl/...","data-testid":"input-album-url"})]}),n.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"To get the URL: Open your album in Google Photos  Share  Copy link"})]}),n.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/20 p-3 rounded-lg border border-amber-200 dark:border-amber-800",children:n.jsxs("p",{className:"text-xs text-amber-800 dark:text-amber-200",children:[n.jsx("strong",{children:"Note:"})," This feature uses an unofficial method to access Google Photos albums. It may stop working if Google changes their system. Make sure your album is publicly shared."]})})]}),n.jsxs(Sn,{children:[n.jsx(_,{variant:"outline",onClick:()=>{x(h),f(!1)},children:"Cancel"}),n.jsx(_,{onClick:W,"data-testid":"button-save-album-url",children:"Save Album URL"})]})]})})]})}function Ggt(){return n.jsx(xn,{title:"Gallery Management",children:n.jsx("div",{className:"p-6",children:n.jsx(qgt,{})})})}function Ygt(){const e=()=>{window.location.href="/download/cleanmachine-export.zip"};return n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800 flex items-center justify-center p-4",children:n.jsxs(O,{className:"max-w-md w-full p-8 text-center",children:[n.jsx("div",{className:"flex justify-center mb-6",children:n.jsx("div",{className:"bg-blue-100 dark:bg-blue-900 p-4 rounded-full",children:n.jsx(W0e,{className:"h-16 w-16 text-blue-600 dark:text-blue-400"})})}),n.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Download Export File"}),n.jsx("p",{className:"text-muted-foreground mb-6",children:"Clean Machine Auto Detail Export"}),n.jsxs("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-4 mb-6",children:[n.jsxs("div",{className:"flex items-center justify-between text-sm",children:[n.jsx("span",{className:"font-medium",children:"File Name:"}),n.jsx("span",{className:"text-muted-foreground",children:"cleanmachine-export.zip"})]}),n.jsxs("div",{className:"flex items-center justify-between text-sm mt-2",children:[n.jsx("span",{className:"font-medium",children:"Size:"}),n.jsx("span",{className:"text-muted-foreground",children:"369 MB"})]})]}),n.jsxs(_,{onClick:e,className:"w-full",size:"lg","data-testid":"button-download-export",children:[n.jsx(Qc,{className:"h-5 w-5 mr-2"}),"Download File"]}),n.jsx("p",{className:"text-xs text-muted-foreground mt-4",children:"Note: This is a large file (369MB). Download may take a few minutes depending on your connection speed."})]})})}function Qgt(){const[,e]=zt();return p.useEffect(()=>{const t=navigator.userAgent.toLowerCase(),r=/ipad/.test(t)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1,s=/android/.test(t)&&!/mobile/.test(t)&&window.innerWidth>=768,a=r||s||window.innerWidth>=768;console.log("[LAUNCH] Device detection:",{userAgent:navigator.userAgent,isIPad:r,isAndroidTablet:s,isTablet:a,screenWidth:window.innerWidth,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints}),r||a?(console.log("[LAUNCH] iPad/Tablet detected  redirecting to /technician"),e("/technician")):(console.log("[LAUNCH] Mobile phone detected  redirecting to /messages"),e("/messages"))},[e]),n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 via-white to-blue-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900",children:n.jsxs("div",{className:"flex flex-col items-center gap-4",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"}),n.jsx("p",{className:"text-sm text-muted-foreground animate-pulse",children:"Loading your workspace..."})]})})}const CN=[{id:"auto_detailing_mobile",slug:"auto-detailing",label:"Mobile Auto Detailing",category:"Automotive",description:"Full-service mobile auto detailing: interiors, exteriors, coatings, and maintenance plans.",exampleBusinessName:"Clean Machine Auto Detail",imageUrl:"https://images.unsplash.com/photo-1601362840469-51e4d8d58785?w=800&h=450&fit=crop",imageAlt:"Professional detailer polishing luxury car",defaultPrimaryServices:[{id:"detail_basic",label:"Basic Interior & Exterior Detail",description:"Full wash, vacuum, wipe-down, windows, and tire shine.",basePriceHint:"$150$250",defaultDurationMinutes:150},{id:"detail_premium",label:"Premium Full Detail",description:"Deep interior clean, steam or extractor on stains, exterior decon, and paint sealant.",basePriceHint:"$250$400",defaultDurationMinutes:240,isPremium:!0},{id:"detail_maintenance",label:"Maintenance Detail",description:"For returning clients: quick clean keeping a coated or recently-detailed vehicle fresh.",basePriceHint:"$120$180",defaultDurationMinutes:120}],defaultUpsellServices:[{id:"upsell_pet_hair",label:"Heavy Pet Hair Removal",description:"Add-on for vehicles with significant pet hair.",basePriceHint:"+$40$100"},{id:"upsell_ceramic",label:"Ceramic Coating",description:"Multi-year protection with advanced ceramic coating packages.",basePriceHint:"Starts at $600+",isPremium:!0},{id:"upsell_odor",label:"Odor/Ozone Treatment",description:"Treat lingering odors with ozone or similar odor-elimination process.",basePriceHint:"+$75$150"}],featureToggles:[{id:"fleet_accounts",label:"Fleet & Commercial Accounts",description:"Enable pricing logic and messaging for fleets and dealer accounts.",enabledByDefault:!0},{id:"ceramic_only_mode",label:"Ceramic & High-Ticket Focus",description:"Shift copy and funnels toward coating and premium packages.",enabledByDefault:!1}],aiPersona:{internalName:"auto_detailing_premium_local",voiceStyle:"friendly_local",shortTagline:"Friendly local detailer who talks like theyve spent years in the bay.",smsTone:"Down-to-earth, efficient, a bit conversational, uses simple explanations about packages and weather.",emailTone:"Professional but relaxed, focuses on clarity, maintenance education, and value over hype."}},{id:"lawn_care_landscaping",slug:"lawn-care",label:"Lawn Care & Landscaping",category:"Home Services",description:"Recurring lawn care, landscaping projects, cleanups, and seasonal services.",exampleBusinessName:"GreenLine Lawn & Landscape",imageUrl:"https://images.unsplash.com/photo-1558904541-efa843a96f01?w=800&h=450&fit=crop",imageAlt:"Professional lawn care service with pristine green lawn",defaultPrimaryServices:[{id:"mow_basic",label:"Standard Mow & Trim",description:"Weekly or bi-weekly mowing, edging, and blow-off.",basePriceHint:"$45$90",defaultDurationMinutes:45},{id:"cleanup",label:"Yard Clean-Up",description:"Leaf removal, debris cleanup, and basic trimming.",basePriceHint:"$200$500",defaultDurationMinutes:180}],defaultUpsellServices:[{id:"upsell_fertilizer",label:"Fertilization & Weed Control",description:"Scheduled treatments tailored to the region and grass type.",basePriceHint:"Varies / seasonal packages"},{id:"upsell_mulch",label:"Mulch & Bed Refresh",description:"Refresh flower beds with new mulch or rock and trimming.",basePriceHint:"$200$600"}],featureToggles:[{id:"recurring_contracts",label:"Recurring Contracts",description:"Emphasize weekly/bi-weekly service and automate renewals.",enabledByDefault:!0},{id:"project_work",label:"One-Off Landscape Projects",description:"Highlight installs, redesign, and project-based quotes.",enabledByDefault:!0}],aiPersona:{internalName:"lawn_care_local_pro",voiceStyle:"friendly_local",shortTagline:"Friendly yard pro who talks seasons, rain, and grass health.",smsTone:"Casual and approachable, uses simple lawn lingo, confirms gates, pets, and day-of details.",emailTone:"Helpful and educational, explains seasonal plans clearly and sets expectations for recurring visits."}},{id:"house_cleaning_maids",slug:"house-cleaning",label:"House Cleaning & Maid Service",category:"Home Services",description:"Standard, deep, and move-out cleans for residential homes.",exampleBusinessName:"Spark & Shine Home Cleaning",imageUrl:"https://images.unsplash.com/photo-1581578731548-c64695cc6952?w=800&h=450&fit=crop",imageAlt:"Professional cleaner in modern clean living room",defaultPrimaryServices:[{id:"recurring_clean",label:"Recurring Standard Clean",description:"Weekly, bi-weekly, or monthly general clean.",basePriceHint:"$120$200+",defaultDurationMinutes:150},{id:"deep_clean",label:"Deep Clean",description:"Top-to-bottom detail including baseboards, blinds, and appliances.",basePriceHint:"$250$450",defaultDurationMinutes:240,isPremium:!0},{id:"move_out",label:"Move-In / Move-Out Clean",description:"Vacant home cleaning focused on cabinets, appliances, and bathrooms.",basePriceHint:"$300$600",defaultDurationMinutes:300}],defaultUpsellServices:[{id:"upsell_inside_fridge",label:"Inside Fridge / Oven",description:"Deep clean of appliances inside.",basePriceHint:"+$40$80"},{id:"upsell_windows",label:"Interior Glass & Windows",description:"Interior window cleaning for main living areas.",basePriceHint:"+$60$120"}],featureToggles:[{id:"airbnb_turnovers",label:"Short-Term Rental Turnovers",description:"Enable Airbnb/VRBO turnover logic, linens, restocking, and guest-ready checks.",enabledByDefault:!0},{id:"supplies_included",label:"Supplies Included Pricing",description:"Assume cleaner brings all supplies and adjust quotes accordingly.",enabledByDefault:!0}],aiPersona:{internalName:"house_cleaning_concierge",voiceStyle:"premium_concierge",shortTagline:"White-glove but warm, focussed on trust, safety, and consistency.",smsTone:"Polite and reassuring, confirms access instructions, pets, alarms, and expectations.",emailTone:"Professional and detailed, clearly lists whats included, whats add-on, and what to prep before arrival."}},{id:"pressure_washing",slug:"pressure-washing",label:"Pressure Washing & Soft Wash",category:"Home Services",description:"Driveways, siding, roofs, and commercial flatwork with soft wash and high-pressure options.",exampleBusinessName:"Prime Wash Exterior Cleaning",imageUrl:"https://images.unsplash.com/photo-1628177142898-93e36e4e3a50?w=800&h=450&fit=crop",imageAlt:"Pressure washing driveway with professional equipment",defaultPrimaryServices:[{id:"driveway_clean",label:"Driveway & Walkway Cleaning",description:"Pressure wash concrete and flat surfaces around the home.",basePriceHint:"$175$400",defaultDurationMinutes:120},{id:"house_wash",label:"House Wash (Soft Wash)",description:"Soft wash siding, eaves, and fascia; includes gutters exterior rinse.",basePriceHint:"$300$600",defaultDurationMinutes:180}],defaultUpsellServices:[{id:"upsell_roof_softwash",label:"Roof Soft Wash",description:"Roof algae, moss, and stain removal with proper chemistry.",basePriceHint:"$600$1,500",isPremium:!0},{id:"upsell_sealing",label:"Concrete Sealing",description:"Protect and enhance concrete surfaces after cleaning.",basePriceHint:"$300$800"}],featureToggles:[{id:"commercial_flatwork",label:"Commercial Flatwork & Lots",description:"Enable large-lot scheduling and off-hours appointment logic.",enabledByDefault:!1}],aiPersona:{internalName:"pressure_wash_pro",voiceStyle:"tech_forward",shortTagline:"Explains chemistry and methods in plain English, not jargon.",smsTone:"Straightforward and quick, confirms water access and parking, checks weather and drying time.",emailTone:"Detailed, educational, good before/after explanations; focuses on protecting surfaces and preventing damage."}},{id:"window_cleaning",slug:"window-cleaning",label:"Window Cleaning",category:"Home Services",description:"Interior and exterior window cleaning for homes and light commercial.",exampleBusinessName:"CrystalView Window Cleaning",imageUrl:"https://images.unsplash.com/photo-1527515637462-cff94eecc1ac?w=800&h=450&fit=crop",imageAlt:"Professional window cleaner working on glass windows",defaultPrimaryServices:[{id:"residential_windows",label:"Residential Windows (In & Out)",description:"Exterior and interior glass cleaning for the main home.",basePriceHint:"$150$400",defaultDurationMinutes:150}],defaultUpsellServices:[{id:"upsell_screens_tracks",label:"Screens & Tracks Detailing",description:"Clean window screens and tracks for smoother operation.",basePriceHint:"+$60$150"}],featureToggles:[{id:"commercial_storefront",label:"Commercial Storefront Routes",description:"Enable recurring storefront route logic and recurring invoicing.",enabledByDefault:!0}],aiPersona:{internalName:"window_cleaning_route_pro",voiceStyle:"friendly_local",shortTagline:"Route-based pro who talks about sparkle, schedule, and views.",smsTone:"Short, efficient, confirms floor count, access, and interior vs exterior needs.",emailTone:"Clear and visual, uses simple language to explain whats included and how often to schedule."}},{id:"mobile_pet_grooming",slug:"mobile-pet-grooming",label:"Mobile Pet Grooming",category:"Pets",description:"In-van grooming with baths, haircuts, deshedding, and spa add-ons.",exampleBusinessName:"Paws & Wheels Mobile Grooming",imageUrl:"https://images.unsplash.com/photo-1548681528-6a5c45b66b42?w=800&h=450&fit=crop",imageAlt:"Dog being groomed at professional grooming station",defaultPrimaryServices:[{id:"full_groom",label:"Full Groom",description:"Bath, haircut, nails, ears, and basic tidy.",basePriceHint:"$75$150+",defaultDurationMinutes:90},{id:"bath_only",label:"Bath & Tidy",description:"Bath, blow-dry, nails, brush, and light trim.",basePriceHint:"$60$120",defaultDurationMinutes:60}],defaultUpsellServices:[{id:"upsell_deshed",label:"Deshedding Treatment",description:"Extra brushing and tools for heavy shedders.",basePriceHint:"+$30$60"},{id:"upsell_teeth",label:"Teeth & Breath Care",description:"Add-on dental hygiene treatment.",basePriceHint:"+$15$35"}],featureToggles:[{id:"multi_pet",label:"Multi-Pet Households",description:"Optimize routes and pricing for multiple pets at one stop.",enabledByDefault:!0}],aiPersona:{internalName:"pet_grooming_soft",voiceStyle:"friendly_local",shortTagline:"Soft, pet-loving voice that reassures anxious pet parents.",smsTone:"Warm and kind, double-checks breed, coat condition, temperament, and any health notes.",emailTone:"Gentle, detailed overview of process, what to expect, and how often to groom."}},{id:"hvac",slug:"hvac",label:"HVAC Service & Install",category:"Trades",description:"Heating and cooling diagnostics, repairs, installs, and seasonal tune-ups.",exampleBusinessName:"ComfortZone Heating & Air",imageUrl:"https://images.unsplash.com/photo-1581094271901-8022df4466f9?w=800&h=450&fit=crop",imageAlt:"HVAC technician servicing air conditioning unit",defaultPrimaryServices:[{id:"diagnostic",label:"Diagnostic Service Call",description:"Inspect and diagnose heating or cooling issues.",basePriceHint:"$89$149",defaultDurationMinutes:60},{id:"tune_up",label:"Seasonal Tune-Up",description:"Preventative maintenance tune-up for AC or furnace.",basePriceHint:"$89$189",defaultDurationMinutes:90}],defaultUpsellServices:[{id:"upsell_membership",label:"Membership / Maintenance Plan",description:"Priority scheduling and discounted tune-ups.",basePriceHint:"$15$35/month"}],featureToggles:[{id:"24_7_emergency",label:"24/7 Emergency Service",description:"Special routing and messaging for urgent after-hours calls.",enabledByDefault:!0}],aiPersona:{internalName:"hvac_tech_forward",voiceStyle:"tech_forward",shortTagline:"Explains systems and options clearly without scare tactics.",smsTone:"Prompt, calm, asks key questions about symptoms, age of system, and filters.",emailTone:"Clear, option-based quotes that explain pros/cons of repair vs replace."}},{id:"plumbing",slug:"plumbing",label:"Plumbing Service",category:"Trades",description:"Residential and light commercial plumbing service and repairs.",exampleBusinessName:"FlowRight Plumbing Co.",imageUrl:"https://images.unsplash.com/photo-1607472586893-edb57bdc0e39?w=800&h=450&fit=crop",imageAlt:"Professional plumber working on pipes",defaultPrimaryServices:[{id:"service_call",label:"Service Call / Repair",description:"General plumbing diagnostic and repair appointment.",basePriceHint:"$120$300+",defaultDurationMinutes:90}],defaultUpsellServices:[{id:"upsell_maintenance",label:"Whole-Home Plumbing Checkup",description:"Inspection of main fixtures, shutoffs, and accessible lines.",basePriceHint:"$250$450"}],featureToggles:[{id:"emergency_flood",label:"Emergency Leak & Flood Response",description:"High-priority routing and messaging for burst pipes and leaks.",enabledByDefault:!0}],aiPersona:{internalName:"plumbing_steady",voiceStyle:"friendly_local",shortTagline:"Steady, no-drama voice that calms people in stressful situations.",smsTone:"Direct, checks for active leaks, shutoff knowledge, and urgency level.",emailTone:"Simple and reassuring, explains scope and what to expect on arrival."}},{id:"electrical",slug:"electrical",label:"Electrical Contractor",category:"Trades",description:"Residential and small commercial electrical service and installs.",exampleBusinessName:"BrightSpark Electric",imageUrl:"https://images.unsplash.com/photo-1621905251189-08b45d6a269e?w=800&h=450&fit=crop",imageAlt:"Electrician working on electrical panel",defaultPrimaryServices:[{id:"service_call",label:"Electrical Service Call",description:"Troubleshoot outlets, switches, breakers, or lighting.",basePriceHint:"$150$350",defaultDurationMinutes:90}],defaultUpsellServices:[{id:"upsell_panel",label:"Panel Upgrade / Replacement",description:"Upgrade old panels to modern capacity and safety.",basePriceHint:"$1,800$3,500",isPremium:!0}],featureToggles:[{id:"ev_chargers",label:"EV Charger Installs",description:"Focus on EV charger installs and education.",enabledByDefault:!0}],aiPersona:{internalName:"electrical_safety_first",voiceStyle:"tech_forward",shortTagline:"Safety-first electrician, explains code and safety in normal language.",smsTone:"Careful and direct, avoids asking for unsafe DIY steps, focuses on simple triage questions.",emailTone:"Clear, safety-focused, puts code compliance and long-term reliability first."}},{id:"roofing_gutters",slug:"roofing",label:"Roofing & Gutters",category:"Trades",description:"Roof inspections, replacements, repairs, and gutter cleaning/installs.",exampleBusinessName:"HighPeak Roofing & Gutters",imageUrl:"https://images.unsplash.com/photo-1632778149955-e80f8ceca2e8?w=800&h=450&fit=crop",imageAlt:"Roofer installing shingles on residential roof",defaultPrimaryServices:[{id:"inspection",label:"Roof Inspection",description:"Photo-heavy inspection with basic report.",basePriceHint:"Often free / or $99$199",defaultDurationMinutes:60}],defaultUpsellServices:[{id:"upsell_gutter_guard",label:"Gutter Guard Install",description:"Install guards to reduce clogs and maintenance.",basePriceHint:"$800$2,500"}],featureToggles:[{id:"insurance_work",label:"Insurance Claims & Storm Work",description:"Enable language for hail/storm claims and adjuster coordination.",enabledByDefault:!0}],aiPersona:{internalName:"roofing_storm_pro",voiceStyle:"premium_concierge",shortTagline:"Reassuring expert during stressful roof or storm situations.",smsTone:"Kind and clear, checks for active leaks, tarps, and urgency; coordinates inspection times.",emailTone:"Detailed but simple, explains options and next steps with photos and timelines."}},{id:"handyman",slug:"handyman",label:"Handyman & Small Projects",category:"Home Services",description:"Punch lists, minor repairs, mounting, small carpentry, and honey-do lists.",exampleBusinessName:"TaskSmith Home Repair",imageUrl:"https://images.unsplash.com/photo-1504148455328-c376907d081c?w=800&h=450&fit=crop",imageAlt:"Handyman with tools working on home repairs",defaultPrimaryServices:[{id:"punch_list",label:"Punch List Visit",description:"Book a block of time for multiple small tasks.",basePriceHint:"$150$400",defaultDurationMinutes:120}],defaultUpsellServices:[{id:"upsell_membership",label:"Home Maintenance Membership",description:"Quarterly visits to knock out small tasks and maintenance.",basePriceHint:"$49$99/month"}],featureToggles:[{id:"materials_sourcing",label:"Materials Sourcing Included",description:"Enable workflows where tech buys materials and passes through cost.",enabledByDefault:!0}],aiPersona:{internalName:"handyman_friendly",voiceStyle:"friendly_local",shortTagline:"Friendly fixer who makes punch lists feel easy, not overwhelming.",smsTone:"Conversational, asks for photos or videos, groups tasks to estimate time and cost.",emailTone:"List-based and clear, lays out what will be done and whats out of scope."}},{id:"pool_spa_service",slug:"pool-service",label:"Pool & Spa Service",category:"Home Services",description:"Weekly pool service, cleanings, openings/closings, and minor repairs.",exampleBusinessName:"BlueWave Pool Service",imageUrl:"https://images.unsplash.com/photo-1576013551627-0cc20b96c2a7?w=800&h=450&fit=crop",imageAlt:"Clean swimming pool with maintenance equipment",defaultPrimaryServices:[{id:"weekly_service",label:"Weekly Pool Service",description:"Chemicals, brushing, skimming, equipment check.",basePriceHint:"$120$250/month",defaultDurationMinutes:45}],defaultUpsellServices:[{id:"upsell_open_close",label:"Pool Opening / Closing",description:"Seasonal open and winterize packages.",basePriceHint:"$250$600"}],featureToggles:[{id:"chem_delivery",label:"Chemical Delivery & Drop-Off",description:"Offer chemical-only deliveries and simple instructions.",enabledByDefault:!1}],aiPersona:{internalName:"pool_chem_guru",voiceStyle:"tech_forward",shortTagline:"Chill but nerdy about water chemistry, in simple language.",smsTone:"Short and relaxed, confirms pool type, equipment, and any known issues.",emailTone:"Educational and visual, uses simple charts/phrasing around clarity, safety, and maintenance."}},{id:"pest_control",slug:"pest-control",label:"Pest Control",category:"Home Services",description:"General pest, termite, rodent, and specialty treatments with recurring plans.",exampleBusinessName:"ShieldGuard Pest Solutions",imageUrl:"https://images.unsplash.com/photo-1563207153-f403bf289096?w=800&h=450&fit=crop",imageAlt:"Pest control technician treating home exterior",defaultPrimaryServices:[{id:"initial_treatment",label:"Initial Pest Treatment",description:"First-time treatment inside and outside.",basePriceHint:"$150$300",defaultDurationMinutes:120}],defaultUpsellServices:[{id:"upsell_recurring",label:"Quarterly Pest Plan",description:"Quarterly or bi-monthly maintenance visits.",basePriceHint:"$40$80/visit"}],featureToggles:[{id:"wildlife",label:"Wildlife & Rodent",description:"Enable trapping and exclusion style services.",enabledByDefault:!1}],aiPersona:{internalName:"pest_control_steady",voiceStyle:"premium_concierge",shortTagline:"Reassuring and calm, especially when people are grossed out or scared.",smsTone:"Empathetic, asks just enough questions to route to the right treatment without being graphic.",emailTone:"Clean, non-alarming explanations of process, safety, and what to expect."}},{id:"carpet_cleaning",slug:"carpet-cleaning",label:"Carpet & Upholstery Cleaning",category:"Home Services",description:"Steam cleaning, stain removal, upholstery, and odor treatment for homes and offices.",exampleBusinessName:"FreshStep Carpet & Upholstery",imageUrl:"https://images.unsplash.com/photo-1628177142898-93e36e4e3a50?w=800&h=450&fit=crop",imageAlt:"Professional carpet cleaning in progress",defaultPrimaryServices:[{id:"whole_home",label:"Whole-Home Carpet Cleaning",description:"Standard clean for main traffic areas and bedrooms.",basePriceHint:"$200$450",defaultDurationMinutes:180}],defaultUpsellServices:[{id:"upsell_protectant",label:"Carpet Protector",description:"Protectant applied after cleaning to resist stains.",basePriceHint:"+$75$200"},{id:"upsell_pet_odor",label:"Pet Odor/Enzyme Treatment",description:"Specialty treatment for pet accidents and odor.",basePriceHint:"+$60$200"}],featureToggles:[{id:"commercial_office",label:"Commercial Office Accounts",description:"Enable after-hours booking and recurring floor maintenance.",enabledByDefault:!0}],aiPersona:{internalName:"carpet_cleaning_local",voiceStyle:"friendly_local",shortTagline:"Relatable pro who explains drying times and furniture moves clearly.",smsTone:"Casual, confirms square footage or room count, stairs, and pet issues.",emailTone:"Straightforward, uses bullet lists for whats included and what to prep."}},{id:"junk_removal",slug:"junk-removal",label:"Junk Removal & Hauling",category:"Home Services",description:"Single-item pick-ups, full load hauls, cleanouts, and light demo.",exampleBusinessName:"LoadOut Junk Removal",imageUrl:"https://images.unsplash.com/photo-1580121441575-41bcb5c6b47c?w=800&h=450&fit=crop",imageAlt:"Junk removal truck loading furniture and debris",defaultPrimaryServices:[{id:"single_item",label:"Single Item Pickup",description:"Sofa, mattress, or appliance pickup.",basePriceHint:"$75$175",defaultDurationMinutes:45},{id:"full_load",label:"Full Load Haul",description:"Truck or trailer load of mixed junk.",basePriceHint:"$250$600",defaultDurationMinutes:120}],defaultUpsellServices:[{id:"upsell_cleanout",label:"Garage / Estate Cleanout",description:"Larger cleanouts with multiple loads and sorting.",basePriceHint:"$500$2,000+"}],featureToggles:[{id:"donation_focus",label:"Donation & Recycling Focus",description:"Emphasize donation drop-offs and recycling in copy.",enabledByDefault:!0}],aiPersona:{internalName:"junk_removal_no_judgment",voiceStyle:"friendly_local",shortTagline:"Zero-judgment, just-helpful voice for clutter and hoarding situations.",smsTone:"Warm and practical, suggests sending photos, clarifies access and heavy items.",emailTone:"Empathetic and simple, uses ranges and explains factors that affect pricing."}},{id:"mobile_mechanic",slug:"mobile-mechanic",label:"Mobile Mechanic",category:"Automotive",description:"On-site diagnostics, repairs, maintenance, and inspections for vehicles.",exampleBusinessName:"Driveway Mobile Auto Repair",imageUrl:"https://images.unsplash.com/photo-1486262715619-67b85e0b08d3?w=800&h=450&fit=crop",imageAlt:"Mobile mechanic working on car engine",defaultPrimaryServices:[{id:"diag",label:"Diagnostic Visit",description:"On-site diagnostic with basic code scan and inspection.",basePriceHint:"$120$250",defaultDurationMinutes:90}],defaultUpsellServices:[{id:"upsell_maintenance",label:"Mobile Maintenance Package",description:"Oil change, filters, and inspection in one visit.",basePriceHint:"$200$350"}],featureToggles:[{id:"fleet_service",label:"Fleet & Commercial Vehicles",description:"Enable routing and billing for multiple vehicles and fleets.",enabledByDefault:!0}],aiPersona:{internalName:"mobile_mechanic_route",voiceStyle:"friendly_local",shortTagline:"Mechanic who speaks like a real tech, but explains clearly.",smsTone:"Direct and friendly, asks for year/make/model, symptoms, and location.",emailTone:"Simple, clear breakdowns of recommended work with priority levels."}},{id:"tutoring_coaching",slug:"tutoring",label:"Tutoring & Coaching",category:"Professional Services",description:"Academic tutoring, test prep, and skills coaching (online or in-person).",exampleBusinessName:"BrightPath Tutoring & Coaching",imageUrl:"https://images.unsplash.com/photo-1488190211105-8b0e65b80b4e?w=800&h=450&fit=crop",imageAlt:"Tutor teaching student at desk with books",defaultPrimaryServices:[{id:"session_standard",label:"Standard Session",description:"One-on-one tutoring or coaching session.",basePriceHint:"$60$150/hr",defaultDurationMinutes:60}],defaultUpsellServices:[{id:"upsell_package",label:"Multi-Session Package",description:"Pack of sessions with a small discount.",basePriceHint:"410 sessions, discounted"}],featureToggles:[{id:"online_only",label:"Online-Only Mode",description:"Shift the flow to assume video calls and no travel.",enabledByDefault:!0}],aiPersona:{internalName:"tutor_supportive",voiceStyle:"premium_concierge",shortTagline:"Supportive, structured, and very clear about expectations and progress.",smsTone:"Encouraging, confirms subject, level, goals, and time zone.",emailTone:"Organized and reassuring, outlines plan, schedule, and progress updates."}},{id:"beauty_salon_barber",slug:"beauty-salon",label:"Beauty, Salon & Barber",category:"Personal Care",description:"Hair, barbering, brows, lashes, and simple esthetician-style services.",exampleBusinessName:"Studio 47 Salon & Grooming",imageUrl:"https://images.unsplash.com/photo-1503951914875-452162b0f3f1?w=800&h=450&fit=crop",imageAlt:"Barber cutting hair in modern barbershop",defaultPrimaryServices:[{id:"haircut_basic",label:"Haircut / Style",description:"Standard cut or trim with style.",basePriceHint:"$35$120",defaultDurationMinutes:60}],defaultUpsellServices:[{id:"upsell_color",label:"Color / Highlights",description:"Color, balayage, or highlight add-ons.",basePriceHint:"$120$300+",isPremium:!0}],featureToggles:[{id:"membership_bundles",label:"Memberships & Bundles",description:"Enable bundles like monthly cuts, blowout memberships, etc.",enabledByDefault:!0}],aiPersona:{internalName:"beauty_salon_vibe",voiceStyle:"friendly_local",shortTagline:"Warm, stylish voice that feels like texting with your stylist.",smsTone:"Friendly and personable, confirms hair type, goals, and inspiration photos.",emailTone:"On-brand and aesthetic, explains booking policies and prep instructions."}},{id:"str_turnovers",slug:"airbnb-turnovers",label:"Short-Term Rental Turnovers",category:"Hospitality",description:"Airbnb/VRBO turnovers, restocking, laundry, and light staging.",exampleBusinessName:"TurnKey STR Services",imageUrl:"https://images.unsplash.com/photo-1522708323590-d24dbb6b0267?w=800&h=450&fit=crop",imageAlt:"Clean modern Airbnb apartment ready for guests",defaultPrimaryServices:[{id:"standard_turnover",label:"Standard Turnover",description:"Clean, reset, restock essentials, and quick inspection.",basePriceHint:"$80$250+",defaultDurationMinutes:120}],defaultUpsellServices:[{id:"upsell_deep_reset",label:"Deep Reset",description:"Occasional deep clean plus linen refresh and minor touch-ups.",basePriceHint:"$250$500"}],featureToggles:[{id:"multi_property",label:"Multi-Property Owners & Hosts",description:"Enable dashboards and messaging for multiple properties per client.",enabledByDefault:!0}],aiPersona:{internalName:"str_host_helper",voiceStyle:"tech_forward",shortTagline:"Host-side assistant that speaks in results, not fluff.",smsTone:"Fast, concise, understands calendars and check-in/check-out times.",emailTone:"Operational and structured, uses bullet lists and emphasizes reliability."}},{id:"photography_full",slug:"photography",label:"Photography & Media Studio",category:"Creative",description:"Portraits, events, weddings, branding, and real estate photography under one roof. Everything is togglable so a single studio can turn niches on/off instead of needing separate sites.",exampleBusinessName:"Lightcraft Photo & Media",imageUrl:"https://images.unsplash.com/photo-1542038784456-1ea8e935640e?w=800&h=450&fit=crop",imageAlt:"Photographer capturing wedding moment with professional camera",defaultPrimaryServices:[{id:"portraits_standard",label:"Portrait Session",description:"Standard portrait session for individuals, couples, or small families, on location or in-studio.",basePriceHint:"$250$600",defaultDurationMinutes:60},{id:"event_coverage",label:"Event Coverage",description:"Hourly event coverage for parties, corporate events, and small gatherings.",basePriceHint:"$250$450/hr",defaultDurationMinutes:120},{id:"wedding_collection",label:"Wedding Collection",description:"Curated wedding package with pre-wedding consult, ceremony + reception coverage, and edited gallery.",basePriceHint:"$2,000$5,500",defaultDurationMinutes:480,isPremium:!0},{id:"real_estate_package",label:"Real Estate Photo Package",description:"Listing photos for residential real estate; includes interior, exterior, and detail shots.",basePriceHint:"$200$450",defaultDurationMinutes:90}],defaultUpsellServices:[{id:"upsell_albums",label:"Albums & Prints",description:"Designed albums, framed prints, and wall art options.",basePriceHint:"Varies by product; offer starting ranges."},{id:"upsell_video",label:"Highlight Video / Reels",description:"Short highlight film or social-media-ready vertical clips.",basePriceHint:"$600$2,000+"},{id:"upsell_branding",label:"Branding & Headshot Day",description:"Half-day or full-day branding session for individuals or teams.",basePriceHint:"$800$2,500"},{id:"upsell_re_3d_drone",label:"Real Estate Drone / 3D Tour",description:"Aerial exterior shots and/or 3D walkthrough for listings.",basePriceHint:"+$150$500"}],featureToggles:[{id:"ft_portraits",label:"Portraits & Families",description:"Toggle to emphasize portraits, couples, seniors, and family sessions in the flows and templates.",enabledByDefault:!0},{id:"ft_weddings",label:"Weddings & Elopements",description:"Turns on wedding-specific funnels, questionnaires, and longer timelines.",enabledByDefault:!0},{id:"ft_events",label:"Events & Corporate",description:"Enables corporate events, conferences, and party coverage flows.",enabledByDefault:!0},{id:"ft_real_estate",label:"Real Estate Photo & Media",description:"Turns on real-estate-style quoting (square footage, MLS timelines, add-on media).",enabledByDefault:!0},{id:"ft_branding",label:"Branding, Headshots & Content Days",description:"Focuses on business/branding clients, content days, and retainer-style work.",enabledByDefault:!0},{id:"ft_mini_sessions",label:"Mini Sessions",description:"Enables mini-session signup pages, stacked time slots, and batch scheduling.",enabledByDefault:!1},{id:"ft_retainers",label:"Retainer / Subscription Clients",description:"Turns on recurring content plans with monthly or quarterly shoots.",enabledByDefault:!1}],aiPersona:{internalName:"photography_ultra_premium",voiceStyle:"premium_concierge",shortTagline:"Ultra-premium but human studio voice  clear, kind, and confident, not cheesy or salesy.",smsTone:"Warm, efficient, and on-brand. Asks smart discovery questions (date, location, vibe, guest count, usage) without overwhelming people.",emailTone:"High-end, cinematic but grounded. Uses clear packages, timelines, and expectations. Speaks to value, experience, and story, not just cheap photos."}}],OB=["Portrait Sessions","Weddings","Engagements","Corporate Headshots","Events","Family Photos","Newborn Photos","Real Estate Photography","Aerial Drone","Product Photography","Automotive Media"];function Kgt(){const{toast:e}=Ee(),[,t]=zt(),[r,s]=p.useState(null),[a,i]=p.useState(()=>Object.fromEntries(OB.map(A=>[A,!1]))),[o,l]=p.useState(!1),[c,d]=p.useState(null),[u,f]=p.useState(""),[h,m]=p.useState(""),[g,x]=p.useState(""),[y,v]=p.useState(""),[b,w]=p.useState(!1),[N,j]=p.useState(!1),[S,C]=p.useState(null),k=A=>{i(P=>({...P,[A]:!P[A]}))},M=async()=>{if(!r){C("Please select an industry first");return}if(!u.trim()){C("Username is required");return}if(u.length<3){C("Username must be at least 3 characters");return}if(!g){C("Password is required");return}if(g.length<6){C("Password must be at least 6 characters");return}if(g!==y){C("Passwords do not match");return}if(h&&!h.match(/^[^\s@]+@[^\s@]+\.[^\s@]+$/)){C("Please enter a valid email address");return}C(null);const A=CN.find(I=>I.id===r),P=r==="photography_full"?Object.fromEntries(Object.entries(a).map(([I,L])=>[`photography:${I}`,L])):{},T={username:u.trim(),email:h.trim()||void 0,password:g,industryId:r,industryName:(A==null?void 0:A.label)??r,featureFlags:P,rawSelection:{selectedIndustry:r,photoToggles:a}};l(!0),d(null);try{const I=await fetch("/api/onboarding/complete",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(T)}),L=await I.json().catch(()=>({}));if(!I.ok||!(L!=null&&L.success))throw new Error((L==null?void 0:L.message)||"Failed to create account");d({sent:T,serverResponse:L}),e({title:"Account created!",description:"Taking you to your dashboard..."});try{(await fetch("/api/auth/verify",{credentials:"include"})).ok?t("/dashboard"):(e({title:"Please log in",description:"Account created successfully. Please log in with your credentials.",variant:"default"}),setTimeout(()=>t("/login"),1e3))}catch(R){console.error("[OnboardingIndustry] Session verification error:",R),e({title:"Please log in",description:"Account created. Please log in to continue.",variant:"default"}),setTimeout(()=>t("/login"),1e3)}}catch(I){console.error("[OnboardingIndustry] Account creation error:",I),C((I==null?void 0:I.message)||"Failed to create account. Please try again."),e({title:"Account creation failed",description:(I==null?void 0:I.message)||"There was a problem creating your account.",variant:"destructive"})}finally{l(!1)}};return n.jsxs("div",{className:"p-6 max-w-6xl mx-auto space-y-8",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold mb-2",children:"What kind of business is this?"}),n.jsx("p",{className:"text-muted-foreground",children:"Pick the closest match. You'll be able to fine-tune services, pricing, and wording later."})]}),n.jsx("div",{className:"grid grid-cols-2 gap-3 max-[360px]:grid-cols-1 sm:gap-4 sm:grid-cols-3 lg:grid-cols-4",children:CN.map(A=>{const P=r===A.id;return n.jsxs(O,{onClick:()=>s(A.id),className:`cursor-pointer transition border overflow-hidden ${P?"border-blue-500 ring-2 ring-blue-500/60":"border-border hover:border-blue-400/60"}`,"data-testid":`industry-${A.id}`,children:[A.imageUrl&&n.jsx("div",{className:"w-full h-32 md:h-40 overflow-hidden",children:n.jsx("img",{src:A.imageUrl,alt:A.imageAlt||A.label,className:"w-full h-full object-cover transition-transform hover:scale-105",loading:"lazy"})}),n.jsxs(ee,{className:"p-3 sm:p-4",children:[n.jsx(te,{className:"text-sm sm:text-base",children:A.label}),n.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:A.category})]})]},A.id)})}),r==="photography_full"&&n.jsxs("div",{className:"space-y-4",children:[n.jsx("h2",{className:"text-2xl font-semibold",children:"What types of photography do you offer?"}),n.jsx("p",{className:"text-muted-foreground",children:"Turn on all that apply. Your website, services, and AI concierge can lean into these automatically."}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:OB.map(A=>n.jsxs(O,{className:"p-4 flex justify-between items-center","data-testid":`photo-option-${A.replace(/\s+/g,"-").toLowerCase()}`,children:[n.jsx("span",{children:A}),n.jsx(Vt,{checked:a[A],onCheckedChange:()=>k(A),"data-testid":`toggle-${A.replace(/\s+/g,"-").toLowerCase()}`})]},A))})]}),r&&n.jsxs("div",{className:"space-y-6 pt-6 border-t border-border",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-semibold mb-2",children:"Create Your Account"}),n.jsx("p",{className:"text-muted-foreground",children:"Enter your details to save your industry selection and get started."})]}),n.jsx(O,{className:"p-6",children:n.jsxs(H,{className:"p-0 space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs(U,{htmlFor:"username",children:["Username ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx(se,{id:"username",type:"text",placeholder:"johndoe",value:u,onChange:A=>f(A.target.value),disabled:o,"data-testid":"input-username",required:!0}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"At least 3 characters. This will be your login name."})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(U,{htmlFor:"email",children:"Email (optional)"}),n.jsx(se,{id:"email",type:"email",placeholder:"john@example.com",value:h,onChange:A=>m(A.target.value),disabled:o,"data-testid":"input-email"}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"For password recovery and notifications."})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs(U,{htmlFor:"password",children:["Password ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("div",{className:"relative",children:[n.jsx(se,{id:"password",type:b?"text":"password",placeholder:"",value:g,onChange:A=>x(A.target.value),disabled:o,"data-testid":"input-password",required:!0}),n.jsx("button",{type:"button",onClick:()=>w(!b),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground","data-testid":"toggle-password-visibility",children:b?n.jsx(uy,{size:18}):n.jsx(Kl,{size:18})})]}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"At least 6 characters."})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs(U,{htmlFor:"confirmPassword",children:["Confirm Password ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("div",{className:"relative",children:[n.jsx(se,{id:"confirmPassword",type:N?"text":"password",placeholder:"",value:y,onChange:A=>v(A.target.value),disabled:o,"data-testid":"input-confirm-password",required:!0}),n.jsx("button",{type:"button",onClick:()=>j(!N),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground","data-testid":"toggle-confirm-password-visibility",children:N?n.jsx(uy,{size:18}):n.jsx(Kl,{size:18})})]})]}),S&&n.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-950/20 border border-red-200 dark:border-red-800 rounded-md",children:n.jsx("p",{className:"text-sm text-red-600 dark:text-red-400","data-testid":"form-error",children:S})})]})})]}),r&&n.jsxs("div",{className:"pt-4 border-t border-border flex items-center justify-between gap-4",children:[n.jsx("div",{className:"text-sm text-muted-foreground",children:"Your account will be created and you'll be logged in automatically."}),n.jsx(_,{size:"lg",disabled:!r||o,onClick:M,"data-testid":"button-create-account",children:o?"Creating Account...":"Create Account & Continue"})]}),c&&n.jsxs("div",{className:"mt-6",children:[n.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Phase 8B debug payload (sent to server)"}),n.jsx("pre",{className:"text-xs bg-black/40 rounded-md p-4 overflow-x-auto",children:JSON.stringify(c,null,2)})]})]})}function Jgt(){const{toast:e}=Ee(),[t,r]=p.useState({}),[s,a]=p.useState(new Set),[i,o]=p.useState({}),l=(d,u)=>{u&&r(f=>({...f,[d]:u}))},c=async d=>{var f;const u=t[d];if(!u){e({title:"No file selected",description:"Please select an image file first.",variant:"destructive"});return}a(h=>new Set(h).add(d));try{const h=new FormData;h.append("image",u),h.append("industryId",d);const m=await fetch("/api/upload-industry-image",{method:"POST",body:h}),g=await m.json();if(!m.ok||!g.success)throw new Error(g.error||"Upload failed");o(x=>({...x,[d]:g.imageUrl})),e({title:"Upload successful",description:`Image uploaded for ${(f=CN.find(x=>x.id===d))==null?void 0:f.label}. Update the config file to use: ${g.imageUrl}`}),r(x=>{const y={...x};return delete y[d],y})}catch(h){console.error("Upload error:",h),e({title:"Upload failed",description:h.message||"Failed to upload image",variant:"destructive"})}finally{a(h=>{const m=new Set(h);return m.delete(d),m})}};return n.jsxs("div",{className:"p-6 max-w-7xl mx-auto space-y-6",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Industry Hero Images"}),n.jsxs("p",{className:"text-muted-foreground",children:["Upload custom images for each industry. After uploading, copy the URL and update it in"," ",n.jsx("code",{className:"bg-muted px-2 py-0.5 rounded text-sm",children:"client/src/config/industryPacks.ts"})]})]}),n.jsxs("div",{className:"bg-blue-50 dark:bg-blue-950/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4 space-y-2",children:[n.jsx("h3",{className:"font-semibold text-blue-900 dark:text-blue-100",children:"Quick Guide:"}),n.jsxs("ol",{className:"list-decimal list-inside space-y-1 text-sm text-blue-800 dark:text-blue-200",children:[n.jsx("li",{children:"Select an image file for the industry (JPG, PNG, GIF, or WebP)"}),n.jsx("li",{children:'Click "Upload" to save the image to the server'}),n.jsx("li",{children:"Copy the returned URL from the success message"}),n.jsxs("li",{children:["Open ",n.jsx("code",{className:"bg-blue-100 dark:bg-blue-900 px-1 rounded",children:"client/src/config/industryPacks.ts"})]}),n.jsxs("li",{children:["Find the industry and update its ",n.jsx("code",{className:"bg-blue-100 dark:bg-blue-900 px-1 rounded",children:"imageUrl"})," field"]}),n.jsx("li",{children:"The image will appear automatically on the onboarding page"})]})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:CN.map(d=>{const u=t[d.id],f=s.has(d.id),h=i[d.id];return n.jsxs(O,{"data-testid":`industry-upload-${d.id}`,children:[n.jsx(ee,{children:n.jsxs(te,{className:"text-lg flex items-center justify-between",children:[n.jsx("span",{children:d.label}),n.jsx("span",{className:"text-xs font-normal text-muted-foreground",children:d.category})]})}),n.jsxs(H,{className:"space-y-4",children:[d.imageUrl&&n.jsxs("div",{className:"space-y-2",children:[n.jsx(U,{className:"text-sm text-muted-foreground",children:"Current Image:"}),n.jsx("div",{className:"relative w-full h-32 rounded-md overflow-hidden border",children:n.jsx("img",{src:d.imageUrl,alt:d.imageAlt||d.label,className:"w-full h-full object-cover"})}),d.imageUrl.startsWith("http")&&n.jsxs("a",{href:d.imageUrl,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-600 hover:underline flex items-center gap-1",children:[n.jsx(xa,{className:"w-3 h-3"}),"View source"]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx(U,{htmlFor:`file-${d.id}`,children:"Upload New Image:"}),n.jsx(se,{id:`file-${d.id}`,type:"file",accept:"image/jpeg,image/jpg,image/png,image/gif,image/webp",onChange:m=>{var g;return l(d.id,((g=m.target.files)==null?void 0:g[0])||null)},disabled:f,"data-testid":`file-input-${d.id}`}),u&&n.jsxs("p",{className:"text-xs text-muted-foreground",children:["Selected: ",u.name," (",(u.size/1024).toFixed(1)," KB)"]})]}),n.jsxs(_,{onClick:()=>c(d.id),disabled:!u||f,className:"w-full","data-testid":`button-upload-${d.id}`,children:[n.jsx(_p,{className:"w-4 h-4 mr-2"}),f?"Uploading...":"Upload Image"]}),h&&n.jsxs("div",{className:"bg-green-50 dark:bg-green-950/20 border border-green-200 dark:border-green-800 rounded p-3 space-y-2",children:[n.jsx("p",{className:"text-xs font-semibold text-green-900 dark:text-green-100",children:" Uploaded successfully!"}),n.jsx("p",{className:"text-xs text-green-800 dark:text-green-200",children:"Update config with this URL:"}),n.jsxs("code",{className:"block text-xs bg-green-100 dark:bg-green-900 px-2 py-1 rounded break-all",children:['imageUrl: "',h,'"']})]})]})]},d.id)})})]})}function Zgt(){const[,e]=zt(),{toast:t}=Ee(),[r,s]=p.useState("phone"),[a,i]=p.useState(""),[o,l]=p.useState(""),[c,d]=p.useState(""),[u,f]=p.useState(!1),h=async x=>{if(x.preventDefault(),!a.trim()){t({title:"Phone Required",description:"Please enter your phone number",variant:"destructive"});return}f(!0);try{const v=await(await Ne("POST","/api/public/customer-auth/request-otp",{channel:"sms",phone:a.trim()})).json();v.success&&v.maskedDestination?(d(v.maskedDestination),s("code"),t({title:"Code Sent",description:`Verification code sent to ${v.maskedDestination}`})):t({title:"Error",description:v.error||"Failed to send verification code",variant:"destructive"})}catch(y){console.error("Request OTP error:",y),t({title:"Error",description:"Failed to send verification code. Please try again.",variant:"destructive"})}finally{f(!1)}},m=async x=>{if(x.preventDefault(),!o.trim()||o.length!==6){t({title:"Invalid Code",description:"Please enter the 6-digit verification code",variant:"destructive"});return}f(!0);try{const v=await(await Ne("POST","/api/public/customer-auth/verify-otp",{channel:"sms",phone:a.trim(),code:o.trim()})).json();v.success?(t({title:"Success",description:"You are now logged in"}),e("/portal")):t({title:"Verification Failed",description:v.error||"Invalid or expired code",variant:"destructive"})}catch(y){console.error("Verify OTP error:",y),t({title:"Error",description:"Failed to verify code. Please try again.",variant:"destructive"})}finally{f(!1)}},g=()=>{s("phone"),l("")};return n.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800 flex items-center justify-center p-4",children:[n.jsx(dE,{}),n.jsxs(O,{className:"w-full max-w-md",children:[n.jsxs(ee,{children:[n.jsx(te,{className:"text-2xl font-bold text-center",children:"Customer Portal"}),n.jsx(ke,{className:"text-center",children:r==="phone"?"Enter your phone number to log in":`Enter the code sent to ${c}`})]}),n.jsx(H,{children:r==="phone"?n.jsxs("form",{onSubmit:h,className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(U,{htmlFor:"phone",children:"Phone Number"}),n.jsxs("div",{className:"relative",children:[n.jsx(bt,{className:"absolute left-3 top-3 h-5 w-5 text-muted-foreground"}),n.jsx(se,{id:"phone",type:"tel",placeholder:"(918) 555-1234",value:a,onChange:x=>i(x.target.value),className:"pl-10",disabled:u,"data-testid":"input-customer-phone"})]})]}),n.jsx(_,{type:"submit",className:"w-full",disabled:u,"data-testid":"button-send-code",children:u?n.jsxs(n.Fragment,{children:[n.jsx(nt,{className:"mr-2 h-4 w-4 animate-spin"}),"Sending Code..."]}):"Send Verification Code"})]}):n.jsxs("form",{onSubmit:m,className:"space-y-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(U,{htmlFor:"code",children:"Verification Code"}),n.jsxs("div",{className:"relative",children:[n.jsx(gj,{className:"absolute left-3 top-3 h-5 w-5 text-muted-foreground"}),n.jsx(se,{id:"code",type:"text",inputMode:"numeric",pattern:"[0-9]*",maxLength:6,placeholder:"000000",value:o,onChange:x=>l(x.target.value.replace(/\D/g,"")),className:"pl-10 text-center text-2xl tracking-widest font-mono",disabled:u,autoFocus:!0,"data-testid":"input-otp-code"})]}),n.jsx("p",{className:"text-sm text-muted-foreground text-center",children:"Code expires in 10 minutes"})]}),n.jsx(_,{type:"submit",className:"w-full",disabled:u||o.length!==6,"data-testid":"button-verify-code",children:u?n.jsxs(n.Fragment,{children:[n.jsx(nt,{className:"mr-2 h-4 w-4 animate-spin"}),"Verifying..."]}):"Verify & Log In"}),n.jsx(_,{type:"button",variant:"ghost",className:"w-full",onClick:g,disabled:u,"data-testid":"button-back",children:"Use Different Phone Number"}),n.jsx(_,{type:"button",variant:"link",className:"w-full text-sm",onClick:h,disabled:u,"data-testid":"button-resend",children:"Resend Code"})]})})]})]})}function Xgt(){const[,e]=zt(),{toast:t}=Ee(),{data:r,isLoading:s,error:a}=be({queryKey:["/api/portal/me"]}),i=async()=>{try{await Ne("/api/public/customer-auth/logout",{method:"POST"}),t({title:"Logged Out",description:"You have been logged out successfully"}),e("/portal/login")}catch(l){console.error("Logout error:",l),t({title:"Error",description:"Failed to log out",variant:"destructive"})}};if(s)return n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800 p-4",children:n.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[n.jsx(Lt,{className:"h-12 w-64"}),n.jsxs("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:[n.jsx(Lt,{className:"h-64"}),n.jsx(Lt,{className:"h-64"}),n.jsx(Lt,{className:"h-64"})]})]})});if(a||!r)return n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800 flex items-center justify-center p-4",children:n.jsxs(O,{className:"w-full max-w-md",children:[n.jsxs(ee,{children:[n.jsx(te,{className:"text-red-600",children:"Error"}),n.jsx(ke,{children:"Failed to load your account information"})]}),n.jsx(H,{children:n.jsx(_,{onClick:()=>e("/portal/login"),className:"w-full",children:"Back to Login"})})]})});const o=r.customer.name.split(" ")[0];return n.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800 p-4",children:[n.jsx(dE,{}),n.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:["Welcome back, ",o,"!"]}),n.jsx("p",{className:"text-muted-foreground",children:"Your customer portal"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs(_,{variant:"outline",onClick:()=>e("/portal/settings"),"data-testid":"button-settings",children:[n.jsx(ja,{className:"mr-2 h-4 w-4"}),"Settings"]}),n.jsxs(_,{variant:"outline",onClick:i,"data-testid":"button-logout",children:[n.jsx(lQ,{className:"mr-2 h-4 w-4"}),"Log Out"]})]})]}),n.jsxs(O,{"data-testid":"card-profile",children:[n.jsx(ee,{children:n.jsxs(te,{className:"flex items-center gap-2",children:[n.jsx(Fn,{className:"h-5 w-5"}),"Your Profile"]})}),n.jsxs(H,{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[n.jsx(Fn,{className:"h-4 w-4 text-muted-foreground"}),n.jsx("span",{className:"font-medium",children:"Name:"}),n.jsx("span",{"data-testid":"text-customer-name",children:r.customer.name})]}),r.customer.phone&&n.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[n.jsx(bt,{className:"h-4 w-4 text-muted-foreground"}),n.jsx("span",{className:"font-medium",children:"Phone:"}),n.jsx("span",{"data-testid":"text-customer-phone",children:r.customer.phone})]}),r.customer.email&&n.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[n.jsx(Cr,{className:"h-4 w-4 text-muted-foreground"}),n.jsx("span",{className:"font-medium",children:"Email:"}),n.jsx("span",{"data-testid":"text-customer-email",children:r.customer.email})]}),r.customer.address&&n.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[n.jsx(zr,{className:"h-4 w-4 text-muted-foreground"}),n.jsx("span",{className:"font-medium",children:"Address:"}),n.jsx("span",{children:r.customer.address})]}),r.customer.vehicleInfo&&n.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[n.jsx(Ys,{className:"h-4 w-4 text-muted-foreground"}),n.jsx("span",{className:"font-medium",children:"Vehicle:"}),n.jsx("span",{children:r.customer.vehicleInfo})]}),r.customer.isVip&&n.jsx(ge,{variant:"secondary",className:"bg-yellow-500 text-white",children:"VIP Customer"})]})]}),n.jsxs(O,{"data-testid":"card-appointments",children:[n.jsx(ee,{children:n.jsxs(te,{className:"flex items-center gap-2",children:[n.jsx(Dt,{className:"h-5 w-5"}),"Appointments"]})}),n.jsx(H,{children:r.appointments.upcoming.length>0?n.jsxs("div",{className:"space-y-3",children:[n.jsx("h3",{className:"font-semibold",children:"Upcoming"}),r.appointments.upcoming.map(l=>n.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg","data-testid":`appointment-${l.id}`,children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:Ie(new Date(l.scheduledTime),"MMM d, yyyy")}),n.jsx("p",{className:"text-sm text-muted-foreground",children:Ie(new Date(l.scheduledTime),"h:mm a")})]}),n.jsx(ge,{children:l.status})]},l.id))]}):n.jsxs("div",{className:"text-center py-6",children:[n.jsx("p",{className:"text-muted-foreground mb-4",children:"No upcoming appointments"}),n.jsx(_,{onClick:()=>e("/book"),"data-testid":"button-book-appointment",children:"Book an Appointment"})]})})]}),n.jsxs(O,{"data-testid":"card-loyalty",children:[n.jsx(ee,{children:n.jsxs(te,{className:"flex items-center gap-2",children:[n.jsx(yQ,{className:"h-5 w-5"}),"Loyalty Rewards"]})}),n.jsxs(H,{children:[n.jsxs("div",{className:"text-center mb-4",children:[n.jsx("p",{className:"text-4xl font-bold text-primary","data-testid":"text-loyalty-points",children:r.loyalty.totalPoints}),n.jsx("p",{className:"text-muted-foreground",children:"Points"}),n.jsx(ge,{variant:"outline",className:"mt-2",children:r.loyalty.tier})]}),r.loyalty.recentTransactions.length>0&&n.jsxs("div",{className:"space-y-2",children:[n.jsx("h3",{className:"font-semibold text-sm",children:"Recent Activity"}),r.loyalty.recentTransactions.slice(0,5).map(l=>n.jsxs("div",{className:"flex items-center justify-between text-sm border-b pb-2","data-testid":`transaction-${l.id}`,children:[n.jsx("span",{className:"text-muted-foreground",children:l.description||"Points earned"}),n.jsxs("span",{className:l.points>0?"text-green-600 font-medium":"text-red-600 font-medium",children:[l.points>0?"+":"",l.points]})]},l.id))]})]})]})]})]})}function ext(){var b;const[,e]=zt(),{toast:t}=Ee(),[r,s]=p.useState(!1),[a,i]=p.useState({}),[o,l]=p.useState(!1),{data:c,isLoading:d}=be({queryKey:["/api/portal/me"]}),u=je({mutationFn:async w=>(await Ne("PUT","/api/portal/profile",w)).json(),onSuccess:()=>{ze.invalidateQueries({queryKey:["/api/portal/me"]}),t({title:"Success",description:"Your profile has been updated"}),s(!1)},onError:w=>{t({title:"Error",description:w.message||"Failed to update profile",variant:"destructive"})}}),f=async w=>{var j;const N=(j=w.target.files)==null?void 0:j[0];if(N){if(N.size>2*1024*1024){t({title:"File Too Large",description:"Profile picture must be under 2MB",variant:"destructive"});return}l(!0);try{const S=new FormData;S.append("profilePicture",N);const C=await fetch("/api/portal/upload-profile-picture",{method:"POST",body:S,credentials:"include"});if(!C.ok)throw new Error("Upload failed");const k=await C.json();t({title:"Success",description:"Profile picture updated"}),ze.invalidateQueries({queryKey:["/api/portal/me"]})}catch{t({title:"Upload Failed",description:"Failed to upload profile picture",variant:"destructive"})}finally{l(!1)}}},h=()=>{u.mutate(a)},m=()=>{i({}),s(!1)},g=()=>{c!=null&&c.customer&&i(c.customer),s(!0)};if(d)return n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800 p-4",children:n.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[n.jsx(Lt,{className:"h-12 w-64"}),n.jsx(Lt,{className:"h-96"})]})});if(!(c!=null&&c.customer))return n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800 flex items-center justify-center p-4",children:n.jsxs(O,{className:"w-full max-w-md",children:[n.jsxs(ee,{children:[n.jsx(te,{className:"text-red-600",children:"Error"}),n.jsx(ke,{children:"Failed to load your profile"})]}),n.jsx(H,{children:n.jsx(_,{onClick:()=>e("/portal"),className:"w-full",children:"Back to Portal"})})]})});const x=c.customer,y=r?a:x,v=x.name.split(" ").map(w=>w[0]).join("").toUpperCase().slice(0,2);return n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800 p-4",children:n.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx(_,{variant:"ghost",size:"icon",onClick:()=>e("/portal"),"data-testid":"button-back",children:n.jsx(pi,{className:"h-5 w-5"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Profile Settings"}),n.jsx("p",{className:"text-muted-foreground",children:"Manage your account and preferences"})]})]}),!r&&n.jsxs(_,{onClick:g,"data-testid":"button-edit-profile",children:[n.jsx(Fn,{className:"mr-2 h-4 w-4"}),"Edit Profile"]})]}),n.jsxs(O,{"data-testid":"card-profile-picture",children:[n.jsxs(ee,{children:[n.jsx(te,{children:"Profile Picture"}),n.jsx(ke,{children:"Upload a photo to personalize your account"})]}),n.jsxs(H,{className:"flex items-center gap-6",children:[n.jsxs(vN,{className:"h-24 w-24",children:[n.jsx(bN,{src:x.profilePictureUrl||void 0,alt:x.name}),n.jsx(wN,{className:"text-2xl",children:v})]}),n.jsxs("div",{className:"flex-1",children:[n.jsxs(U,{htmlFor:"profile-picture",className:"cursor-pointer",children:[n.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 w-fit","data-testid":"button-upload-picture",children:[n.jsx(mu,{className:"h-4 w-4"}),o?"Uploading...":"Change Picture"]}),n.jsx(se,{id:"profile-picture",type:"file",accept:"image/*",className:"hidden",onChange:f,disabled:o,"data-testid":"input-profile-picture"})]}),n.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"JPG, PNG, or GIF. Max 2MB."})]})]})]}),n.jsxs(O,{"data-testid":"card-personal-info",children:[n.jsxs(ee,{children:[n.jsxs(te,{className:"flex items-center gap-2",children:[n.jsx(Fn,{className:"h-5 w-5"}),"Personal Information"]}),n.jsx(ke,{children:"Your contact details and vehicle information"})]}),n.jsxs(H,{className:"space-y-4",children:[n.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx(U,{htmlFor:"name",children:"Name"}),n.jsx(se,{id:"name",value:y.name||"",onChange:w=>i({...a,name:w.target.value}),disabled:!r,"data-testid":"input-name"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs(U,{htmlFor:"phone",className:"flex items-center gap-2",children:[n.jsx(bt,{className:"h-4 w-4"}),"Phone"]}),n.jsx(se,{id:"phone",value:y.phone||"",onChange:w=>i({...a,phone:w.target.value}),disabled:!r,"data-testid":"input-phone"})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs(U,{htmlFor:"email",className:"flex items-center gap-2",children:[n.jsx(Cr,{className:"h-4 w-4"}),"Email"]}),n.jsx(se,{id:"email",type:"email",value:y.email||"",onChange:w=>i({...a,email:w.target.value}),disabled:!r,"data-testid":"input-email"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs(U,{htmlFor:"address",className:"flex items-center gap-2",children:[n.jsx(zr,{className:"h-4 w-4"}),"Address"]}),n.jsx(se,{id:"address",value:y.address||"",onChange:w=>i({...a,address:w.target.value}),disabled:!r,placeholder:"123 Main St, City, State 12345","data-testid":"input-address"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs(U,{htmlFor:"vehicleInfo",className:"flex items-center gap-2",children:[n.jsx(Ys,{className:"h-4 w-4"}),"Vehicle Information"]}),n.jsx(se,{id:"vehicleInfo",value:y.vehicleInfo||"",onChange:w=>i({...a,vehicleInfo:w.target.value}),disabled:!r,placeholder:"2020 Toyota Camry","data-testid":"input-vehicle"})]})]})]}),n.jsxs(O,{"data-testid":"card-notifications",children:[n.jsxs(ee,{children:[n.jsxs(te,{className:"flex items-center gap-2",children:[n.jsx(Yc,{className:"h-5 w-5"}),"Notification Preferences"]}),n.jsx(ke,{children:"Choose how you want to receive updates"})]}),n.jsxs(H,{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"space-y-0.5",children:[n.jsx(U,{htmlFor:"notify-email",children:"Email Notifications"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive appointment reminders and updates via email"})]}),n.jsx(Vt,{id:"notify-email",checked:y.notifyViaEmail??!0,onCheckedChange:w=>i({...a,notifyViaEmail:w}),disabled:!r,"data-testid":"switch-notify-email"})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"space-y-0.5",children:[n.jsx(U,{htmlFor:"notify-sms",children:"SMS Notifications"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive text message updates about your appointments"})]}),n.jsx(Vt,{id:"notify-sms",checked:y.notifyViaSms??!0,onCheckedChange:w=>i({...a,notifyViaSms:w}),disabled:!r,"data-testid":"switch-notify-sms"})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"space-y-0.5",children:[n.jsx(U,{htmlFor:"notify-push",children:"Push Notifications"}),n.jsx("p",{className:"text-sm text-muted-foreground",children:"Get instant updates when the app is installed"})]}),n.jsx(Vt,{id:"notify-push",checked:y.notifyViaPush??!1,onCheckedChange:w=>i({...a,notifyViaPush:w}),disabled:!r,"data-testid":"switch-notify-push"})]})]})]}),n.jsxs(O,{"data-testid":"card-notes",children:[n.jsxs(ee,{children:[n.jsxs(te,{className:"flex items-center gap-2",children:[n.jsx(bs,{className:"h-5 w-5"}),"Personal Notes & Preferences"]}),n.jsx(ke,{children:"Add any special requests or preferences for your service"})]}),n.jsxs(H,{children:[n.jsx(un,{value:y.customerNotes||"",onChange:w=>i({...a,customerNotes:w.target.value}),disabled:!r,placeholder:"E.g., Please call when you arrive, sensitive to certain chemicals, etc.",className:"min-h-[120px]",maxLength:2e3,"data-testid":"textarea-notes"}),n.jsxs("p",{className:"text-sm text-muted-foreground mt-2",children:[((b=y.customerNotes)==null?void 0:b.length)||0,"/2000 characters"]})]})]}),r&&n.jsxs("div",{className:"flex gap-3 justify-end",children:[n.jsx(_,{variant:"outline",onClick:m,disabled:u.isPending,"data-testid":"button-cancel",children:"Cancel"}),n.jsx(_,{onClick:h,disabled:u.isPending,"data-testid":"button-save",children:u.isPending?"Saving...":n.jsxs(n.Fragment,{children:[n.jsx(fr,{className:"mr-2 h-4 w-4"}),"Save Changes"]})})]})]})})}function em({children:e,className:t="",delay:r=0,highlight:s=!1}){const a=p.useRef(null),i=uJ(a,{once:!0,amount:.2});return n.jsx(q.div,{ref:a,initial:{opacity:0,y:30},animate:i?{opacity:1,y:0}:{opacity:0,y:30},transition:{duration:.5,delay:r},children:n.jsxs(O,{className:`
          relative overflow-hidden
          bg-slate-900/40 backdrop-blur-xl
          border ${s?"border-amber-400/40":"border-white/10"}
          shadow-2xl ${s?"shadow-amber-500/20":"shadow-black/40"}
          transition-all duration-300 ease-out
          hover:scale-[1.02] hover:shadow-3xl
          ${s?"hover:shadow-amber-500/30 hover:border-amber-400/60":"hover:shadow-blue-500/20 hover:border-white/20"}
          hover:-translate-y-1
          ${t}
        `,children:[n.jsx("div",{className:`absolute inset-0 opacity-0 hover:opacity-100 transition-opacity duration-300 ${s?"bg-gradient-to-br from-amber-500/10 via-transparent to-orange-500/10":"bg-gradient-to-br from-blue-500/5 via-transparent to-purple-500/5"}`}),n.jsx("div",{className:"absolute top-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-white/20 to-transparent"}),n.jsx("div",{className:"relative z-10",children:e})]})})}function txt(){const[,e]=zt(),t=p.useRef(null),r=uJ(t,{once:!0}),{data:s,isLoading:a,error:i}=be({queryKey:["/api/public/customer-auth/welcome-config"]}),o=s==null?void 0:s.config,l=c=>{if(c.startsWith("http://")||c.startsWith("https://"))window.open(c,"_blank");else if(c.startsWith("#")){const d=document.querySelector(c);d==null||d.scrollIntoView({behavior:"smooth"})}else e(c)};return a?n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-950 via-blue-950 to-purple-950 flex items-center justify-center",children:n.jsxs(q.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5},className:"text-center",children:[n.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full border-4 border-blue-500/30 border-t-blue-500 animate-spin"}),n.jsx("p",{className:"text-white text-lg font-medium",children:"Loading your rewards portal..."})]})}):i||!o?n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-950 via-blue-950 to-purple-950 flex items-center justify-center p-4",children:n.jsx(em,{className:"max-w-md",children:n.jsxs(H,{className:"pt-8 pb-8 text-center",children:[n.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-red-500/20 flex items-center justify-center",children:n.jsx("span",{className:"text-3xl",children:""})}),n.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Unable to Load"}),n.jsx("p",{className:"text-slate-300 mb-6",children:"We couldn't load the welcome page. Please try again."}),n.jsx(_,{onClick:()=>window.location.reload(),className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700",children:"Reload Page"})]})})}):n.jsxs("div",{className:"min-h-screen relative overflow-hidden bg-slate-950",children:[n.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-slate-950 via-blue-950 to-purple-950"}),n.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[n.jsx(q.div,{className:"absolute -top-1/4 -left-1/4 w-1/2 h-1/2 rounded-full",style:{background:"radial-gradient(circle, rgba(59, 130, 246, 0.15) 0%, transparent 70%)",filter:"blur(80px)"},animate:{x:[0,50,0],y:[0,30,0],scale:[1,1.1,1]},transition:{duration:20,repeat:1/0,ease:"easeInOut"}}),n.jsx(q.div,{className:"absolute -top-1/3 -right-1/4 w-1/2 h-1/2 rounded-full",style:{background:"radial-gradient(circle, rgba(168, 85, 247, 0.15) 0%, transparent 70%)",filter:"blur(80px)"},animate:{x:[0,-50,0],y:[0,40,0],scale:[1,1.15,1]},transition:{duration:25,repeat:1/0,ease:"easeInOut"}}),n.jsx(q.div,{className:"absolute -bottom-1/4 left-1/2 -translate-x-1/2 w-2/3 h-1/2 rounded-full",style:{background:"radial-gradient(circle, rgba(59, 130, 246, 0.12) 0%, transparent 70%)",filter:"blur(100px)"},animate:{scale:[1,1.2,1]},transition:{duration:15,repeat:1/0,ease:"easeInOut"}}),n.jsx("div",{className:"absolute inset-0 opacity-[0.015]",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg viewBox='0 0 400 400' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' /%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' /%3E%3C/svg%3E")`}})]}),n.jsxs("div",{className:"relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 md:py-16 lg:py-24",children:[n.jsxs(q.div,{ref:t,initial:{opacity:0,y:40},animate:r?{opacity:1,y:0}:{opacity:0,y:40},transition:{duration:.8,ease:"easeOut"},className:"text-center mb-20 md:mb-28",children:[o.badge&&n.jsx(q.div,{initial:{opacity:0,scale:.8},animate:r?{opacity:1,scale:1}:{opacity:0,scale:.8},transition:{duration:.6,delay:.2},className:"inline-block mb-6",children:n.jsxs(ge,{className:`
                relative px-6 py-2.5 text-sm font-semibold
                bg-gradient-to-r from-blue-600 to-purple-600
                border border-white/20
                shadow-lg shadow-blue-500/50
                transition-all duration-300
                hover:shadow-xl hover:shadow-blue-500/60
                hover:scale-105
              `,children:[n.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-400/20 to-purple-400/20 rounded-full blur-xl"}),n.jsx(ln,{className:"h-4 w-4 mr-2 inline-block"}),o.badge]})}),n.jsx(q.h1,{initial:{opacity:0,y:20},animate:r?{opacity:1,y:0}:{opacity:0,y:20},transition:{duration:.8,delay:.3},className:"text-4xl sm:text-5xl md:text-6xl lg:text-7xl font-bold text-white mb-6 leading-tight",children:o.heading.split(" ").map((c,d)=>c.toLowerCase().includes("reward")||c.toLowerCase().includes("loyalty")||c.toLowerCase().includes("points")?n.jsxs("span",{className:"relative inline-block bg-gradient-to-r from-blue-400 via-purple-400 to-pink-400 bg-clip-text text-transparent animate-gradient",children:[c," "]},d):n.jsxs("span",{children:[c," "]},d))}),n.jsx(q.p,{initial:{opacity:0,y:20},animate:r?{opacity:1,y:0}:{opacity:0,y:20},transition:{duration:.8,delay:.4},className:"text-lg sm:text-xl md:text-2xl text-slate-300 max-w-4xl mx-auto mb-12 leading-relaxed",children:o.subheading}),n.jsx("div",{className:"max-w-5xl mx-auto mb-12",children:n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 md:gap-6",children:[n.jsx(q.div,{initial:{opacity:0,y:30,scale:.9},animate:r?{opacity:1,y:0,scale:1}:{opacity:0,y:30,scale:.9},transition:{duration:.6,delay:.5},children:n.jsxs("div",{className:`
                  relative group
                  bg-gradient-to-br from-amber-500/20 to-orange-500/20
                  backdrop-blur-xl border border-amber-400/30
                  rounded-2xl p-6
                  shadow-xl shadow-amber-500/20
                  transition-all duration-300
                  hover:scale-105 hover:shadow-2xl hover:shadow-amber-500/30
                  hover:border-amber-400/50
                `,children:[n.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-amber-400/10 to-orange-400/10 rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity"}),n.jsxs("div",{className:"relative z-10",children:[n.jsx("div",{className:"w-12 h-12 mx-auto mb-3 rounded-xl bg-gradient-to-br from-amber-500 to-orange-500 flex items-center justify-center",children:n.jsx(jr,{className:"h-6 w-6 text-white"})}),n.jsx("div",{className:"text-4xl font-black bg-gradient-to-r from-amber-300 to-yellow-300 bg-clip-text text-transparent mb-1",children:o.welcomeOffer.points}),n.jsx("div",{className:"text-sm font-semibold text-amber-200",children:"Welcome Bonus"}),n.jsx("div",{className:"text-xs text-slate-400 mt-1",children:"Sign in today!"})]})]})}),n.jsx(q.div,{initial:{opacity:0,y:30,scale:.9},animate:r?{opacity:1,y:0,scale:1}:{opacity:0,y:30,scale:.9},transition:{duration:.6,delay:.6},children:n.jsxs("div",{className:`
                  relative group
                  bg-gradient-to-br from-blue-500/20 to-purple-500/20
                  backdrop-blur-xl border border-blue-400/30
                  rounded-2xl p-6
                  shadow-xl shadow-blue-500/20
                  transition-all duration-300
                  hover:scale-105 hover:shadow-2xl hover:shadow-blue-500/30
                  hover:border-blue-400/50
                `,children:[n.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-400/10 to-purple-400/10 rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity"}),n.jsxs("div",{className:"relative z-10",children:[n.jsx("div",{className:"w-12 h-12 mx-auto mb-3 rounded-xl bg-gradient-to-br from-blue-500 to-purple-500 flex items-center justify-center",children:n.jsx(ya,{className:"h-6 w-6 text-white"})}),n.jsx("div",{className:"text-4xl font-black bg-gradient-to-r from-blue-300 to-purple-300 bg-clip-text text-transparent mb-1",children:"1pt/$1"}),n.jsx("div",{className:"text-sm font-semibold text-blue-200",children:"Earn on Every $"}),n.jsx("div",{className:"text-xs text-slate-400 mt-1",children:"Automatic points"})]})]})}),n.jsx(q.div,{initial:{opacity:0,y:30,scale:.9},animate:r?{opacity:1,y:0,scale:1}:{opacity:0,y:30,scale:.9},transition:{duration:.6,delay:.7},children:n.jsxs("div",{className:`
                  relative group
                  bg-gradient-to-br from-green-500/20 to-emerald-500/20
                  backdrop-blur-xl border border-green-400/30
                  rounded-2xl p-6
                  shadow-xl shadow-green-500/20
                  transition-all duration-300
                  hover:scale-105 hover:shadow-2xl hover:shadow-green-500/30
                  hover:border-green-400/50
                `,children:[n.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-green-400/10 to-emerald-400/10 rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity"}),n.jsxs("div",{className:"relative z-10",children:[n.jsx("div",{className:"w-12 h-12 mx-auto mb-3 rounded-xl bg-gradient-to-br from-green-500 to-emerald-500 flex items-center justify-center",children:n.jsx(Yr,{className:"h-6 w-6 text-white"})}),n.jsx("div",{className:"text-4xl font-black bg-gradient-to-r from-green-300 to-emerald-300 bg-clip-text text-transparent mb-1",children:o.tiers.length}),n.jsx("div",{className:"text-sm font-semibold text-green-200",children:"Reward Tiers"}),n.jsx("div",{className:"text-xs text-slate-400 mt-1",children:"Unlock services"})]})]})})]})}),n.jsxs(q.div,{initial:{opacity:0,scale:.9},animate:r?{opacity:1,scale:1}:{opacity:0,scale:.9},transition:{duration:.6,delay:.8},className:"flex flex-wrap items-center justify-center gap-6 mb-10",children:[n.jsxs("div",{className:"flex items-center gap-2 text-slate-400",children:[n.jsxs("div",{className:"flex -space-x-2",children:[n.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-blue-500 to-purple-500 border-2 border-slate-950 flex items-center justify-center",children:n.jsx(Qr,{className:"h-4 w-4 text-white fill-white"})}),n.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-purple-500 to-pink-500 border-2 border-slate-950 flex items-center justify-center",children:n.jsx(Qr,{className:"h-4 w-4 text-white fill-white"})}),n.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-pink-500 to-red-500 border-2 border-slate-950 flex items-center justify-center",children:n.jsx(Qr,{className:"h-4 w-4 text-white fill-white"})})]}),n.jsx("span",{className:"text-sm font-medium text-slate-300",children:"Join hundreds earning rewards"})]}),n.jsx("div",{className:"h-4 w-px bg-slate-700 hidden sm:block"}),n.jsxs("div",{className:"flex items-center gap-2 text-slate-400",children:[n.jsx(zn,{className:"h-5 w-5 text-green-400"}),n.jsx("span",{className:"text-sm font-medium text-slate-300",children:"Secure & Easy"})]}),n.jsx("div",{className:"h-4 w-px bg-slate-700 hidden sm:block"}),n.jsxs("div",{className:"flex items-center gap-2 text-slate-400",children:[n.jsx(na,{className:"h-5 w-5 text-yellow-400"}),n.jsx("span",{className:"text-sm font-medium text-slate-300",children:"Instant Access"})]})]}),n.jsxs(q.div,{initial:{opacity:0,y:20},animate:r?{opacity:1,y:0}:{opacity:0,y:20},transition:{duration:.8,delay:.9},className:"flex flex-col sm:flex-row gap-4 justify-center items-center",children:[n.jsxs(_,{size:"lg",onClick:()=>l(o.ctas.primary.href),"data-testid":"button-primary-cta",className:`
                group relative px-8 py-6 text-lg font-semibold
                bg-gradient-to-r from-blue-600 via-purple-600 to-pink-600
                hover:from-blue-500 hover:via-purple-500 hover:to-pink-500
                border border-white/20
                shadow-2xl shadow-blue-500/50
                transition-all duration-300
                hover:shadow-3xl hover:shadow-blue-500/70
                hover:scale-105
                overflow-hidden
              `,children:[n.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-1000"}),n.jsx(oD,{className:"h-5 w-5 mr-2 inline-block group-hover:rotate-12 transition-transform"}),n.jsx("span",{className:"relative z-10",children:o.ctas.primary.label}),n.jsx(Gc,{className:"h-5 w-5 ml-2 inline-block group-hover:translate-x-1 transition-transform"})]}),o.ctas.secondary&&n.jsxs(_,{size:"lg",variant:"outline",onClick:()=>l(o.ctas.secondary.href),"data-testid":"button-secondary-cta",className:`
                  group px-8 py-6 text-lg font-semibold text-white
                  bg-white/5 backdrop-blur-xl
                  border-2 border-white/20
                  hover:bg-white/10 hover:border-white/30
                  shadow-lg hover:shadow-xl
                  transition-all duration-300
                  hover:scale-105
                `,children:[n.jsx(Dt,{className:"h-5 w-5 mr-2 inline-block group-hover:scale-110 transition-transform"}),o.ctas.secondary.label]}),o.ctas.giftCard&&n.jsxs(_,{size:"lg",variant:"outline",onClick:()=>l(o.ctas.giftCard.href),"data-testid":"button-giftcard-cta",className:`
                  group px-8 py-6 text-lg font-semibold text-white
                  bg-gradient-to-r from-purple-500/10 to-pink-500/10 backdrop-blur-xl
                  border-2 border-purple-400/30
                  hover:from-purple-500/20 hover:to-pink-500/20 hover:border-purple-400/50
                  shadow-lg hover:shadow-xl
                  transition-all duration-300
                  hover:scale-105
                `,children:[n.jsx(jr,{className:"h-5 w-5 mr-2 inline-block group-hover:rotate-12 transition-transform"}),o.ctas.giftCard.label]})]})]}),n.jsxs("section",{className:"mb-24 md:mb-32",children:[n.jsxs(q.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0,amount:.3},transition:{duration:.6},className:"text-center mb-12",children:[n.jsx("h2",{className:"text-3xl md:text-4xl lg:text-5xl font-bold text-white mb-4",children:"How It Works"}),n.jsx("p",{className:"text-slate-400 text-lg max-w-2xl mx-auto",children:"Three simple steps to start earning rewards on every service"})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 lg:gap-8",children:o.bullets.map((c,d)=>{const f=[bt,Dt,Yr][d]||na,h=["from-blue-500 to-cyan-500","from-purple-500 to-pink-500","from-amber-500 to-orange-500"];return n.jsx(em,{delay:d*.1,children:n.jsx(H,{className:"pt-8 pb-8",children:n.jsxs("div",{className:"flex items-start gap-5",children:[n.jsx("div",{className:`
                        flex-shrink-0 w-16 h-16 rounded-2xl
                        bg-gradient-to-br ${h[d]}
                        flex items-center justify-center
                        shadow-lg
                        transition-transform duration-300
                        group-hover:scale-110
                      `,children:n.jsx(f,{className:"h-8 w-8 text-white"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("div",{className:"flex items-center gap-2 mb-3",children:n.jsxs("span",{className:"text-sm font-bold text-blue-400",children:["Step ",d+1]})}),n.jsx("p",{className:"text-slate-200 text-base leading-relaxed",children:c})]})]})})},d)})})]}),n.jsx("section",{className:"mb-24 md:mb-32",children:n.jsxs(em,{highlight:!0,className:"relative overflow-hidden",children:[n.jsx("div",{className:"absolute inset-0 bg-gradient-radial from-amber-500/20 via-transparent to-transparent opacity-50"}),n.jsx(H,{className:"pt-12 pb-12 text-center relative z-10",children:n.jsxs(q.div,{initial:{opacity:0,scale:.9},whileInView:{opacity:1,scale:1},viewport:{once:!0},transition:{duration:.6},children:[n.jsxs(ge,{className:`
                  mb-6 px-6 py-2.5 text-base font-bold
                  bg-gradient-to-r from-amber-500 to-orange-500
                  border border-amber-300/30
                  shadow-xl shadow-amber-500/50
                `,children:[n.jsx(jr,{className:"h-5 w-5 mr-2 inline-block animate-pulse"}),"Limited-Time Welcome Bonus"]}),n.jsx("div",{className:"mb-6",children:n.jsxs("div",{className:"inline-flex items-baseline gap-3",children:[n.jsx("span",{className:"text-6xl md:text-7xl lg:text-8xl font-black bg-gradient-to-r from-amber-300 via-yellow-300 to-amber-300 bg-clip-text text-transparent",children:o.welcomeOffer.points}),n.jsx("span",{className:"text-2xl md:text-3xl font-bold text-amber-200",children:"Points"})]})}),n.jsx("p",{className:"text-xl md:text-2xl text-slate-100 mb-8 max-w-3xl mx-auto leading-relaxed",children:o.welcomeOffer.label}),n.jsxs(_,{size:"lg",onClick:()=>l(o.ctas.primary.href),"data-testid":"button-claim-bonus",className:`
                    group px-12 py-7 text-xl font-bold
                    bg-gradient-to-r from-amber-500 via-yellow-500 to-amber-500
                    hover:from-amber-400 hover:via-yellow-400 hover:to-amber-400
                    text-slate-900
                    border-2 border-amber-300/50
                    shadow-2xl shadow-amber-500/60
                    hover:shadow-3xl hover:shadow-amber-500/80
                    transition-all duration-300
                    hover:scale-105
                  `,children:[n.jsx(Qr,{className:"h-6 w-6 mr-2 inline-block group-hover:rotate-180 transition-transform duration-500"}),o.ctas.primary.label,n.jsx(ln,{className:"h-6 w-6 ml-2 inline-block group-hover:scale-125 transition-transform"})]}),n.jsx("p",{className:"text-slate-400 text-sm mt-6 max-w-2xl mx-auto",children:o.welcomeOffer.finePrint})]})})]})}),n.jsxs("section",{className:"mb-24 md:mb-32",id:"rewards",children:[n.jsxs(q.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0,amount:.3},transition:{duration:.6},className:"text-center mb-12",children:[n.jsx("h2",{className:"text-3xl md:text-4xl lg:text-5xl font-bold text-white mb-4",children:"Reward Tiers"}),n.jsx("p",{className:"text-slate-400 text-lg max-w-2xl mx-auto",children:"Earn 1 point per dollar and unlock amazing rewards at every milestone"})]}),n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:o.tiers.map((c,d)=>{const u=c.points===o.welcomeOffer.points;return n.jsx(em,{delay:d*.05,highlight:u,children:n.jsxs(H,{className:"pt-8 pb-8",children:[u&&n.jsxs(ge,{className:"mb-4 bg-amber-500/90 text-white border-amber-400/50",children:[n.jsx(ya,{className:"h-3.5 w-3.5 mr-1.5"}),"Perfect Welcome Reward"]}),n.jsx("div",{className:"mb-4",children:n.jsxs("div",{className:"flex items-baseline gap-2",children:[n.jsx("span",{className:`
                          text-4xl font-black
                          ${u?"bg-gradient-to-r from-amber-300 to-yellow-300 bg-clip-text text-transparent":"bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent"}
                        `,children:c.points}),n.jsx("span",{className:"text-slate-400 text-sm font-medium",children:"pts"})]})}),n.jsx("h3",{className:"text-white font-bold text-lg mb-2 leading-tight",children:c.label}),c.description&&n.jsx("p",{className:"text-slate-400 text-sm leading-relaxed",children:c.description})]})},d)})})]}),n.jsx("section",{className:"mb-24 md:mb-32",children:n.jsx(em,{children:n.jsx(H,{className:"pt-10 pb-10",children:n.jsxs(q.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6},children:[n.jsxs("div",{className:"flex items-center justify-center gap-3 mb-8",children:[n.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-blue-500 to-purple-500 flex items-center justify-center",children:n.jsx(zn,{className:"h-6 w-6 text-white"})}),n.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-white",children:o.trust.heading})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 max-w-5xl mx-auto",children:o.trust.bullets.map((c,d)=>n.jsxs(q.div,{initial:{opacity:0,x:-20},whileInView:{opacity:1,x:0},viewport:{once:!0},transition:{duration:.4,delay:d*.1},className:"flex items-start gap-3","data-testid":`trust-bullet-${d}`,children:[n.jsx("div",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-green-500/20 flex items-center justify-center mt-0.5",children:n.jsx(Mr,{className:"h-4 w-4 text-green-400"})}),n.jsx("p",{className:"text-slate-300 text-sm leading-relaxed",children:c})]},d))})]})})})}),n.jsx("section",{children:n.jsxs(em,{className:"relative overflow-hidden",children:[n.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/10 via-purple-500/10 to-pink-500/10"}),n.jsx(H,{className:"pt-12 pb-12 text-center relative z-10",children:n.jsxs(q.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6},children:[n.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-white mb-4",children:"Ready to Start Earning Points?"}),n.jsxs("p",{className:"text-slate-300 text-lg mb-8 max-w-2xl mx-auto",children:["Join the portal today, book your next service, and claim your ",o.welcomeOffer.points,"-point welcome bonus"]}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center",children:[n.jsxs(_,{size:"lg",onClick:()=>l(o.ctas.primary.href),"data-testid":"button-bottom-signin",className:`
                      group px-10 py-6 text-lg font-semibold
                      bg-gradient-to-r from-blue-600 to-purple-600
                      hover:from-blue-500 hover:to-purple-500
                      border border-white/20
                      shadow-2xl shadow-blue-500/50
                      hover:shadow-3xl hover:shadow-blue-500/70
                      transition-all duration-300
                      hover:scale-105
                    `,children:[n.jsx(oD,{className:"h-5 w-5 mr-2 inline-block"}),o.ctas.primary.label]}),o.ctas.secondary&&n.jsxs(_,{size:"lg",variant:"outline",onClick:()=>l(o.ctas.secondary.href),"data-testid":"button-bottom-book",className:`
                        group px-10 py-6 text-lg font-semibold text-white
                        bg-white/5 backdrop-blur-xl
                        border-2 border-white/20
                        hover:bg-white/10 hover:border-white/30
                        shadow-lg hover:shadow-xl
                        transition-all duration-300
                        hover:scale-105
                      `,children:[n.jsx(Dt,{className:"h-5 w-5 mr-2 inline-block"}),o.ctas.secondary.label]})]})]})})]})}),n.jsx("div",{className:"h-16"})]})]})}function nxt(){var w,N;const[e,t]=k0("/site/:subdomain"),r=t==null?void 0:t.subdomain,{data:s,isLoading:a,error:i}=be({queryKey:["/api/public/site",r],enabled:!!r}),[o,l]=p.useState({name:"",phone:"",message:""}),c=s==null?void 0:s.data;p.useEffect(()=>{window.scrollTo(0,0)},[]);const d=((w=c==null?void 0:c.branding)==null?void 0:w.primaryColor)||"#6366f1",u=((N=c==null?void 0:c.branding)==null?void 0:N.accentColor)||"#a855f7";if(a)return n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-purple-50/20 to-cyan-50/30 flex items-center justify-center",children:n.jsxs(q.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"text-center",children:[n.jsx("div",{className:"w-16 h-16 mx-auto mb-4 border-4 border-purple-500 border-t-transparent rounded-full animate-spin"}),n.jsx("p",{className:"text-slate-600 font-medium",children:"Loading..."})]})});if(i||!c)return n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-red-50/20 to-orange-50/30 flex items-center justify-center p-4",children:n.jsxs(q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center max-w-md",children:[n.jsx("div",{className:"w-20 h-20 mx-auto mb-6 rounded-full bg-red-100 flex items-center justify-center",children:n.jsx("span",{className:"text-4xl",children:""})}),n.jsx("h1",{className:"text-3xl font-bold text-slate-800 mb-2",children:"Site Not Found"}),n.jsx("p",{className:"text-slate-600 mb-6",children:"The website you're looking for doesn't exist or is no longer available."}),n.jsx(_,{variant:"outline",onClick:()=>window.location.href="/",children:"Go Home"})]})});const{tenant:f,websiteContent:h,services:m,faqs:g,featureFlags:x}=c,y=f.businessName.split(" ").map(j=>j[0]).join("").substring(0,2).toUpperCase(),v={hidden:{opacity:0,y:20},visible:{opacity:1,y:0}},b={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}};return n.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-purple-50/20 to-cyan-50/30",children:[n.jsx("header",{className:"sticky top-0 z-50 backdrop-blur-md bg-white/70 border-b border-white/20 shadow-sm",children:n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[c.branding.logoUrl?n.jsx("img",{src:c.branding.logoUrl,alt:f.businessName,className:"h-10 w-10 rounded-lg object-cover"}):n.jsx("div",{className:"h-10 w-10 rounded-lg flex items-center justify-center text-white font-bold text-sm",style:{background:`linear-gradient(135deg, ${d}, ${u})`},children:y}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-lg font-bold text-slate-900",children:f.businessName}),f.city&&n.jsxs("p",{className:"text-xs text-slate-600 flex items-center gap-1",children:[n.jsx(zr,{className:"w-3 h-3"}),f.city]})]})]}),n.jsx(_,{size:"sm",style:{backgroundColor:d},className:"text-white hover:opacity-90",onClick:()=>{var j;return(j=document.getElementById("contact"))==null?void 0:j.scrollIntoView({behavior:"smooth"})},"data-testid":"header-cta-button",children:h.primaryCtaLabel})]})}),n.jsxs(q.section,{initial:"hidden",animate:"visible",variants:v,className:"relative overflow-hidden py-20 sm:py-32","data-testid":"hero-section",children:[n.jsxs("div",{className:"absolute inset-0 -z-10 overflow-hidden",children:[n.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 rounded-full blur-3xl opacity-20",style:{background:d}}),n.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 rounded-full blur-3xl opacity-20",style:{background:u}})]}),n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[n.jsxs(q.div,{variants:v,transition:{delay:.2},className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-white/60 backdrop-blur-sm border border-white/40 shadow-sm mb-8",children:[n.jsx(ln,{className:"w-4 h-4",style:{color:u}}),n.jsx("span",{className:"text-sm font-medium text-slate-700",children:f.industry||"Professional Service"})]}),n.jsx(q.h2,{variants:v,transition:{delay:.3},className:"text-4xl sm:text-6xl font-bold text-slate-900 mb-6 leading-tight","data-testid":"hero-headline",children:h.heroHeadline}),n.jsx(q.p,{variants:v,transition:{delay:.4},className:"text-xl text-slate-600 mb-10 max-w-2xl mx-auto","data-testid":"hero-subheadline",children:h.heroSubheadline}),n.jsxs(q.div,{variants:v,transition:{delay:.5},className:"flex flex-col sm:flex-row gap-4 justify-center",children:[n.jsxs(_,{size:"lg",style:{backgroundColor:d},className:"text-white hover:opacity-90 shadow-lg",onClick:()=>{var j;return(j=document.getElementById("contact"))==null?void 0:j.scrollIntoView({behavior:"smooth"})},"data-testid":"hero-primary-cta",children:[n.jsx(Dt,{className:"w-5 h-5 mr-2"}),h.primaryCtaLabel]}),n.jsx(_,{size:"lg",variant:"outline",onClick:()=>{var j;return(j=document.getElementById("services"))==null?void 0:j.scrollIntoView({behavior:"smooth"})},"data-testid":"hero-secondary-cta",children:h.secondaryCtaLabel})]})]})]}),m&&m.length>0&&n.jsx("section",{id:"services",className:"py-20 px-4 sm:px-6 lg:px-8","data-testid":"services-section",children:n.jsxs("div",{className:"max-w-7xl mx-auto",children:[n.jsxs(q.div,{initial:"hidden",whileInView:"visible",viewport:{once:!0,margin:"-100px"},variants:v,className:"text-center mb-12",children:[n.jsx("h3",{className:"text-3xl sm:text-4xl font-bold text-slate-900 mb-4",children:"Our Services"}),n.jsxs("p",{className:"text-slate-600 max-w-2xl mx-auto",children:["Professional ",f.industry||"services"," tailored to your needs"]})]}),n.jsx(q.div,{initial:"hidden",whileInView:"visible",viewport:{once:!0,margin:"-100px"},variants:b,className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:m.slice(0,6).map((j,S)=>n.jsx(q.div,{variants:v,"data-testid":`service-card-${j.id}`,children:n.jsxs(O,{className:"h-full backdrop-blur-sm bg-white/70 border-white/40 hover:shadow-xl hover:scale-[1.02] transition-all duration-300",children:[n.jsxs(ee,{children:[n.jsxs("div",{className:"flex items-start justify-between mb-2",children:[n.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center",style:{background:`linear-gradient(135deg, ${d}20, ${u}20)`},children:n.jsx(nn,{className:"w-6 h-6",style:{color:d}})}),j.highlight&&n.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 rounded-full bg-amber-100 text-amber-700 text-xs font-medium",children:[n.jsx(Qr,{className:"w-3 h-3 fill-current"}),"Popular"]})]}),n.jsx(te,{className:"text-xl","data-testid":`service-name-${j.id}`,children:j.name}),j.category&&n.jsx(ke,{className:"text-sm",children:j.category})]}),n.jsxs(H,{children:[j.description&&n.jsx("p",{className:"text-slate-600 text-sm mb-4 line-clamp-3","data-testid":`service-description-${j.id}`,children:j.description}),n.jsxs("div",{className:"flex items-center justify-between text-sm",children:[j.startingPrice&&n.jsxs("span",{className:"font-semibold text-slate-900","data-testid":`service-price-${j.id}`,children:["From $",(j.startingPrice/100).toFixed(0)]}),j.durationMinutes&&n.jsxs("span",{className:"flex items-center gap-1 text-slate-600",children:[n.jsx(Rt,{className:"w-4 h-4"}),"~",Math.round(j.durationMinutes/60),"h"]})]})]})]})},j.id))})]})}),n.jsx("section",{className:"py-20 px-4 sm:px-6 lg:px-8","data-testid":"about-section",children:n.jsx(q.div,{initial:"hidden",whileInView:"visible",viewport:{once:!0,margin:"-100px"},variants:v,className:"max-w-4xl mx-auto",children:n.jsxs(O,{className:"backdrop-blur-md bg-gradient-to-br from-white/80 to-white/60 border-white/40 shadow-xl",children:[n.jsx(ee,{children:n.jsx(te,{className:"text-3xl text-center",children:"About Us"})}),n.jsx(H,{children:n.jsx("p",{className:"text-slate-700 text-lg leading-relaxed text-center","data-testid":"about-blurb",children:h.aboutBlurb})})]})})}),g&&g.length>0&&n.jsx("section",{className:"py-20 px-4 sm:px-6 lg:px-8 bg-white/30","data-testid":"faq-section",children:n.jsxs("div",{className:"max-w-3xl mx-auto",children:[n.jsxs(q.div,{initial:"hidden",whileInView:"visible",viewport:{once:!0,margin:"-100px"},variants:v,className:"text-center mb-12",children:[n.jsx("h3",{className:"text-3xl sm:text-4xl font-bold text-slate-900 mb-4",children:"Frequently Asked Questions"}),n.jsx("p",{className:"text-slate-600",children:"Get answers to common questions"})]}),n.jsx(q.div,{initial:"hidden",whileInView:"visible",viewport:{once:!0,margin:"-100px"},variants:v,children:n.jsx(t3,{type:"single",collapsible:!0,className:"space-y-4",children:g.map((j,S)=>n.jsxs(zf,{value:`faq-${S}`,className:"backdrop-blur-sm bg-white/70 border border-white/40 rounded-xl px-6 shadow-sm","data-testid":`faq-item-${S}`,children:[n.jsx(Bf,{className:"text-left font-semibold text-slate-900 hover:no-underline",children:j.question}),n.jsx(Uf,{className:"text-slate-600 pt-2",children:j.answer})]},S))})})]})}),n.jsx("section",{id:"contact",className:"py-20 px-4 sm:px-6 lg:px-8","data-testid":"contact-section",children:n.jsx(q.div,{initial:"hidden",whileInView:"visible",viewport:{once:!0,margin:"-100px"},variants:v,className:"max-w-2xl mx-auto",children:n.jsxs(O,{className:"backdrop-blur-md bg-gradient-to-br from-white/90 to-white/70 border-white/40 shadow-2xl",children:[n.jsxs(ee,{className:"text-center",children:[n.jsx(te,{className:"text-3xl mb-2",children:x.canShowBookingForm?"Ready to Book?":"Get in Touch"}),n.jsx(ke,{className:"text-base",children:x.canShowBookingForm?"Tell us about your project and we'll get back to you right away":"Request a quote and we'll contact you soon"})]}),n.jsx(H,{children:n.jsxs("form",{className:"space-y-4","data-testid":"contact-form",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-slate-700 mb-1",children:"Name"}),n.jsx("input",{id:"name",type:"text",value:o.name,onChange:j=>l({...o,name:j.target.value}),className:"w-full px-4 py-2 rounded-lg border border-slate-300 focus:ring-2 focus:ring-offset-2 outline-none",style:{focusRing:d},placeholder:"Your name","data-testid":"input-contact-name"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-slate-700 mb-1",children:"Phone"}),n.jsx("input",{id:"phone",type:"tel",value:o.phone,onChange:j=>l({...o,phone:j.target.value}),className:"w-full px-4 py-2 rounded-lg border border-slate-300 focus:ring-2 focus:ring-offset-2 outline-none",style:{focusRing:d},placeholder:"(555) 123-4567","data-testid":"input-contact-phone"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"message",className:"block text-sm font-medium text-slate-700 mb-1",children:"Message"}),n.jsx("textarea",{id:"message",rows:4,value:o.message,onChange:j=>l({...o,message:j.target.value}),className:"w-full px-4 py-2 rounded-lg border border-slate-300 focus:ring-2 focus:ring-offset-2 outline-none resize-none",style:{focusRing:d},placeholder:"Tell us about your project...","data-testid":"input-contact-message"})]}),n.jsxs(_,{type:"submit",size:"lg",className:"w-full text-white hover:opacity-90",style:{backgroundColor:d},"data-testid":"button-submit-contact",children:[n.jsx(Cr,{className:"w-5 h-5 mr-2"}),"Send Message"]})]})})]})})}),n.jsx("footer",{className:"bg-slate-900 text-white py-12 px-4 sm:px-6 lg:px-8",children:n.jsx("div",{className:"max-w-7xl mx-auto",children:n.jsxs("div",{className:"flex flex-col items-center text-center space-y-4",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[c.branding.logoUrl?n.jsx("img",{src:c.branding.logoUrl,alt:f.businessName,className:"h-8 w-8 rounded-lg object-cover"}):n.jsx("div",{className:"h-8 w-8 rounded-lg flex items-center justify-center text-white font-bold text-xs",style:{background:`linear-gradient(135deg, ${d}, ${u})`},children:y}),n.jsx("h4",{className:"text-lg font-semibold",children:f.businessName})]}),f.city&&n.jsxs("p",{className:"text-slate-400 flex items-center gap-2",children:[n.jsx(zr,{className:"w-4 h-4"}),"Serving ",f.city," and surrounding areas"]}),n.jsx("div",{className:"pt-6 border-t border-slate-800 w-full text-center",children:n.jsxs("p",{className:"text-slate-500 text-sm",children:[" ",new Date().getFullYear()," ",f.businessName,". All rights reserved."]})}),x.showWatermark&&n.jsx(q.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:1},className:"pt-4","data-testid":"watermark-free-tier",children:n.jsxs("a",{href:"https://servicepro.com",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-slate-800/50 hover:bg-slate-800 transition-colors text-sm text-slate-400 hover:text-slate-300",children:[n.jsx(ln,{className:"w-4 h-4"}),n.jsx("span",{children:"Powered by ServicePro"}),n.jsx("span",{className:"text-xs opacity-60",children:" Upgrade to remove this"})]})})]})})})]})}function rxt(){const{data:e,isLoading:t,error:r}=be({queryKey:["/api/public/pricing"]});if(r)return n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 flex items-center justify-center p-4",children:n.jsxs(O,{className:"p-8 bg-white/10 backdrop-blur-lg border-white/20",children:[n.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Unable to load pricing"}),n.jsx("p",{className:"text-gray-300",children:"Please try again later"})]})});if(t||!e)return n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 p-8",children:n.jsxs("div",{className:"max-w-7xl mx-auto",children:[n.jsx(Lt,{className:"h-16 w-3/4 mx-auto mb-4 bg-white/10"}),n.jsx(Lt,{className:"h-8 w-1/2 mx-auto mb-12 bg-white/10"}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[1,2,3,4].map(d=>n.jsx(Lt,{className:"h-[600px] bg-white/10"},d))})]})});const{plans:s,features:a,marketing:i}=e,o={free:jr,starter:ln,pro:na,elite:sQ},l={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},c={hidden:{opacity:0,y:50},visible:{opacity:1,y:0,transition:{type:"spring",stiffness:100}}};return n.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 relative overflow-hidden",children:[n.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute -top-1/2 -right-1/4 w-96 h-96 bg-purple-500/30 rounded-full blur-3xl animate-pulse"}),n.jsx("div",{className:"absolute -bottom-1/2 -left-1/4 w-96 h-96 bg-blue-500/30 rounded-full blur-3xl animate-pulse delay-1000"})]}),n.jsxs("div",{className:"relative z-10 pt-20 pb-12 px-4",children:[n.jsxs(q.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.6},className:"text-center max-w-4xl mx-auto mb-16",children:[n.jsx("h1",{className:"text-5xl md:text-6xl font-bold text-white mb-6 bg-clip-text text-transparent bg-gradient-to-r from-white via-purple-200 to-white",children:i.headline}),n.jsx("p",{className:"text-xl md:text-2xl text-gray-300 mb-4",children:i.subheadline}),i.finePrint&&n.jsx("p",{className:"text-sm text-gray-400 max-w-2xl mx-auto",children:i.finePrint})]}),n.jsx(q.div,{variants:l,initial:"hidden",animate:"visible",className:"max-w-7xl mx-auto grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-20",children:s.map(d=>{const u=o[d.id]||ln,f=d.recommended||d.highlight;return n.jsxs(q.div,{variants:c,whileHover:{scale:1.05,y:-10},transition:{type:"spring",stiffness:300},className:"relative","data-testid":`pricing-card-${d.id}`,children:[f&&n.jsx("div",{className:"absolute -top-4 left-1/2 -translate-x-1/2 z-20",children:n.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 text-white px-4 py-1 rounded-full text-sm font-semibold shadow-lg",children:"Most Popular"})}),n.jsxs(O,{className:`
                    h-full relative overflow-hidden backdrop-blur-lg border-2 transition-all duration-300
                    ${f?"bg-white/20 border-purple-400/50 shadow-2xl shadow-purple-500/50":"bg-white/10 border-white/20 shadow-xl"}
                  `,children:[n.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/5 to-transparent pointer-events-none"}),n.jsxs("div",{className:"relative p-8",children:[n.jsx("div",{className:`
                      w-16 h-16 rounded-2xl flex items-center justify-center mb-6
                      ${f?"bg-gradient-to-br from-purple-500 to-pink-500":"bg-gradient-to-br from-gray-700 to-gray-800"}
                    `,children:n.jsx(u,{className:"w-8 h-8 text-white"})}),n.jsx("h3",{className:"text-3xl font-bold text-white mb-2",children:d.name}),n.jsx("p",{className:"text-gray-300 text-sm mb-6 h-12",children:d.tagline}),n.jsxs("div",{className:"mb-6",children:[n.jsxs("div",{className:"flex items-baseline gap-2",children:[n.jsxs("span",{className:"text-5xl font-bold text-white",children:["$",d.monthlyPrice]}),d.priceSuffix&&n.jsx("span",{className:"text-gray-400 text-lg",children:d.priceSuffix})]}),d.maxUsers&&n.jsxs("p",{className:"text-sm text-gray-400 mt-2",children:["Up to ",d.maxUsers," ",d.maxUsers===1?"user":"users"]}),d.maxUsers===null&&n.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Unlimited users"})]}),n.jsx(_,{className:`
                        w-full mb-8 font-semibold text-lg py-6
                        ${f?"bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white":"bg-white/20 hover:bg-white/30 text-white border-2 border-white/30"}
                      `,"data-testid":`button-cta-${d.id}`,children:d.id==="free"?"Start Free":d.id==="elite"?"Contact Us":"Start Trial"}),n.jsx("div",{className:"space-y-3 mb-6",children:d.bulletPoints.map((h,m)=>n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(Mr,{className:"w-5 h-5 text-green-400 flex-shrink-0 mt-0.5"}),n.jsx("span",{className:"text-gray-200 text-sm",children:h})]},m))}),d.usageNotes&&n.jsx("p",{className:"text-xs text-gray-400 italic border-t border-white/10 pt-4",children:d.usageNotes})]})]})]},d.id)})}),n.jsxs(q.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{delay:.4,duration:.6},className:"max-w-7xl mx-auto",children:[n.jsx("h2",{className:"text-4xl font-bold text-white text-center mb-12",children:"Compare Plans"}),n.jsx("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl border-2 border-white/20 overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"border-b border-white/20",children:[n.jsx("th",{className:"text-left p-6 text-white font-semibold min-w-[300px]",children:"Feature"}),s.map(d=>n.jsx("th",{className:`
                          p-6 text-center font-semibold min-w-[120px]
                          ${d.recommended?"bg-purple-500/20 text-purple-200":"text-gray-300"}
                        `,children:d.name},d.id))]})}),n.jsx("tbody",{children:a.map((d,u)=>n.jsxs("tr",{className:`
                        border-b border-white/10 transition-colors hover:bg-white/5
                        ${u%2===0?"bg-white/5":""}
                      `,"data-testid":`feature-row-${d.key}`,children:[n.jsxs("td",{className:"p-6",children:[n.jsx("div",{className:"text-white font-medium",children:d.label}),d.description&&n.jsx("div",{className:"text-sm text-gray-400 mt-1",children:d.description})]}),s.map(f=>{const h=d.planAccess[f.id];return n.jsx("td",{className:`
                              p-6 text-center
                              ${f.recommended?"bg-purple-500/10":""}
                            `,children:h?n.jsx(Mr,{className:"w-6 h-6 text-green-400 mx-auto","data-testid":`check-${d.key}-${f.id}`}):n.jsx(Jr,{className:"w-6 h-6 text-gray-600 mx-auto","data-testid":`cross-${d.key}-${f.id}`})},f.id)})]},d.key))})]})})})]}),n.jsxs(q.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.6,duration:.6},className:"text-center mt-16 mb-8",children:[n.jsx("p",{className:"text-gray-300 mb-6 max-w-2xl mx-auto",children:"Not sure which plan is right for you? Start with the free tier and upgrade anytime as your business grows."}),n.jsx(_,{className:"bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white font-semibold text-lg px-8 py-6","data-testid":"button-start-free",children:"Get Started Free"})]})]})]})}function sxt(){const[,e]=zt();return p.useEffect(()=>{const t=setTimeout(()=>{e("/billing")},5e3);return()=>clearTimeout(t)},[e]),n.jsx("div",{className:"container max-w-2xl mx-auto py-16 px-4",children:n.jsxs(O,{className:"text-center",children:[n.jsxs(ee,{children:[n.jsx("div",{className:"flex justify-center mb-4",children:n.jsx("div",{className:"w-16 h-16 rounded-full bg-green-100 dark:bg-green-900/20 flex items-center justify-center",children:n.jsx(bn,{className:"w-10 h-10 text-green-600 dark:text-green-400"})})}),n.jsx(te,{className:"text-3xl",children:"Subscription Activated!"}),n.jsx(ke,{className:"text-lg mt-2",children:"Your plan upgrade has been processed successfully"})]}),n.jsxs(H,{className:"space-y-6",children:[n.jsxs("div",{className:"space-y-2 text-muted-foreground",children:[n.jsx("p",{children:"Thank you for upgrading! Your new features are now active and ready to use."}),n.jsx("p",{className:"text-sm",children:"You'll receive a confirmation email with your invoice shortly."})]}),n.jsxs("div",{className:"flex gap-3 justify-center pt-4",children:[n.jsx(_,{onClick:()=>e("/billing"),variant:"default","data-testid":"button-view-billing",children:"View Billing Details"}),n.jsx(_,{onClick:()=>e("/dashboard"),variant:"outline","data-testid":"button-go-dashboard",children:"Go to Dashboard"})]}),n.jsx("p",{className:"text-xs text-muted-foreground",children:"Redirecting to billing page in 5 seconds..."})]})]})})}function axt(){return n.jsxs(lpe,{children:[n.jsx(at,{path:"/site/:subdomain",component:nxt}),n.jsx(at,{path:"/pricing",component:rxt}),n.jsx(at,{path:"/onboarding/industry",component:Kgt}),n.jsx(at,{path:"/admin/industry-images",children:n.jsx(en,{children:n.jsx(Jgt,{})})}),n.jsx(at,{path:"/launch",children:n.jsx(en,{children:n.jsx(Qgt,{})})}),n.jsx(at,{path:"/export-download",component:Ygt}),n.jsx(at,{path:"/maintenance",component:imt}),n.jsx(at,{path:"/showcase",component:Pmt}),n.jsx(at,{path:"/clean-machine",component:Amt}),n.jsx(at,{path:"/login",component:n7e}),n.jsx(at,{path:"/forgot-password",component:r7e}),n.jsx(at,{path:"/reset-password",component:s7e}),n.jsx(at,{path:"/change-password",component:a7e}),n.jsx(at,{path:"/approve/:token",component:tmt}),n.jsx(at,{path:"/deposit-payment-success",component:p.lazy(()=>cy(()=>import("./deposit-payment-success-DuOjQxfm.js"),[]))}),n.jsx(at,{path:"/deposit-payment-cancelled",component:p.lazy(()=>cy(()=>import("./deposit-payment-cancelled-CblJ12UF.js"),[]))}),n.jsx(at,{path:"/quote-approval/:token",component:nmt}),n.jsx(at,{path:"/dashboard",children:n.jsx(en,{children:n.jsx(Dne,{})})}),n.jsx(at,{path:"/messages",children:n.jsx(en,{children:n.jsx(pOe,{})})}),n.jsx(at,{path:"/phone",children:n.jsx(en,{children:n.jsx(ZOe,{})})}),n.jsx(at,{path:"/call-metrics",children:n.jsx(en,{children:n.jsx(amt,{})})}),n.jsx(at,{path:"/facebook-settings",children:n.jsx(en,{children:n.jsx(t7e,{})})}),n.jsx(at,{path:"/quick-replies",children:n.jsx(en,{children:n.jsx(oRe,{})})}),n.jsx(at,{path:"/settings/:section?/:item?",children:n.jsx(en,{children:n.jsx(e7e,{})})}),n.jsx(at,{path:"/security-settings",children:n.jsx(en,{children:n.jsx(Emt,{})})}),n.jsx(at,{path:"/phone-settings",children:n.jsx(en,{children:n.jsx(Dgt,{})})}),n.jsx(at,{path:"/sip-setup-guide",children:n.jsx(en,{children:n.jsx($gt,{})})}),n.jsx(at,{path:"/customer-database",children:n.jsx(en,{children:n.jsx(_Te,{})})}),n.jsx(at,{path:"/business-settings",children:n.jsx(en,{children:n.jsx(Qne,{})})}),n.jsx(at,{path:"/banner-management",children:n.jsx(en,{children:n.jsx(yO,{})})}),n.jsx(at,{path:"/damage-assessment",children:n.jsx(en,{children:n.jsx(S9e,{})})}),n.jsx(at,{path:"/user-management",children:n.jsx(en,{children:n.jsx(o7e,{})})}),n.jsx(at,{path:"/escalations",children:n.jsx(en,{children:n.jsx(Rgt,{})})}),n.jsx(at,{path:"/reminders",children:n.jsx(en,{children:n.jsx(Fgt,{})})}),n.jsx(at,{path:"/notifications-settings",children:n.jsx(en,{children:n.jsx(Wie,{})})}),n.jsx(at,{path:"/analytics",children:n.jsx(en,{children:n.jsx(zft,{})})}),n.jsx(at,{path:"/billing",children:n.jsx(en,{children:n.jsx(Ogt,{})})}),n.jsx(at,{path:"/billing/success",children:n.jsx(en,{children:n.jsx(sxt,{})})}),n.jsx(at,{path:"/admin/employees",children:n.jsx(en,{children:n.jsx(dht,{})})}),n.jsx(at,{path:"/admin/jobs/:id",children:n.jsx(en,{children:n.jsx(Oht,{})})}),n.jsx(at,{path:"/admin/quote-requests",children:n.jsx(en,{children:n.jsx(Fht,{})})}),n.jsx(at,{path:"/admin/applications",children:n.jsx(en,{children:n.jsx(zht,{})})}),n.jsx(at,{path:"/admin/tenants",children:n.jsx(en,{children:n.jsx(Vht,{})})}),n.jsx(at,{path:"/admin/phone-config",children:n.jsx(en,{children:n.jsx(qht,{})})}),n.jsx(at,{path:"/admin/concierge-setup",children:n.jsx(en,{children:n.jsx(Kht,{})})}),n.jsx(at,{path:"/admin/suggestions",children:n.jsx(en,{children:n.jsx(Jht,{})})}),n.jsx(at,{path:"/suggestions",children:n.jsx(en,{children:n.jsx(Zht,{})})}),n.jsx(at,{path:"/admin/theme-gallery",children:n.jsx(en,{children:n.jsx(Xht,{})})}),n.jsx(at,{path:"/admin/scheduling",children:n.jsx(en,{children:n.jsx(zgt,{})})}),n.jsx(at,{path:"/admin/pto",children:n.jsx(en,{children:n.jsx(Ugt,{})})}),n.jsx(at,{path:"/admin/homepage-editor",children:n.jsx(en,{children:n.jsx(qie,{})})}),n.jsx(at,{path:"/admin/usage-dashboard",children:n.jsx(en,{children:n.jsx(Wgt,{})})}),n.jsx(at,{path:"/admin/gallery-management",children:n.jsx(en,{children:n.jsx(Ggt,{})})}),n.jsx(at,{path:"/admin/banner-management",children:n.jsx(en,{children:n.jsx(yO,{})})}),n.jsx(at,{path:"/technician",children:n.jsx(en,{children:n.jsx(V0t,{})})}),n.jsx(at,{path:"/tech/wizard",children:n.jsx(en,{children:n.jsx(eht,{})})}),n.jsx(at,{path:"/tech/profile",children:n.jsx(en,{children:n.jsx(nht,{})})}),n.jsx(at,{path:"/tech/schedule",children:n.jsx(en,{children:n.jsx(sht,{})})}),n.jsx(at,{path:"/tech/pto",children:n.jsx(en,{children:n.jsx(Bgt,{})})}),n.jsx(at,{path:"/tech/open-shifts",children:n.jsx(en,{children:n.jsx(Vgt,{})})}),n.jsx(at,{path:"/tech/shift-trades",children:n.jsx(en,{children:n.jsx(Hgt,{})})}),n.jsx(at,{path:"/p/:publicId",component:rht}),n.jsx(at,{path:"/chat",component:n_e}),n.jsx(at,{path:"/schedule",component:NO}),n.jsx(at,{path:"/book",component:NO}),n.jsx(at,{path:"/quick-booking",component:oLe}),n.jsx(at,{path:"/directions",component:r_e}),n.jsx(at,{path:"/service-history",component:J_e}),n.jsx(at,{path:"/demo",component:$9e}),n.jsx(at,{path:"/rewards",component:uLe}),n.jsx(at,{path:"/referrals",children:n.jsx(en,{children:n.jsx(Igt,{})})}),n.jsx(at,{path:"/gallery",component:hLe}),n.jsx(at,{path:"/reviews",component:mLe}),n.jsx(at,{path:"/my-services",component:Bft}),n.jsx(at,{path:"/recurring-booking/:serviceId",component:Wft}),n.jsx(at,{path:"/sms-consent",component:rmt}),n.jsx(at,{path:"/privacy-policy",component:smt}),n.jsx(at,{path:"/careers",component:omt}),n.jsx(at,{path:"/portal/welcome",component:txt}),n.jsx(at,{path:"/portal/login",component:Zgt}),n.jsx(at,{path:"/portal/settings",component:ext}),n.jsx(at,{path:"/portal",component:Xgt}),n.jsx(at,{path:"/",component:iLe}),n.jsx(at,{component:oxe})]})}function ixt(){const[e]=zt();sxe();const t=()=>!["/dashboard","/customer-database","/business-settings","/damage-assessment","/formatter-test","/messages","/facebook-settings","/settings","/admin/employees","/admin/jobs","/admin/quote-requests"].some(s=>e.startsWith(s));return n.jsx(SY,{client:ze,children:n.jsx(ixe,{children:n.jsxs(axe,{children:[n.jsx(rxe,{}),n.jsx(l7e,{}),n.jsx(N9e,{}),n.jsx(axt,{}),!t()&&!e.startsWith("/dashboard")&&!e.startsWith("/messages")&&!e.startsWith("/phone")&&!e.startsWith("/notifications-settings")&&n.jsx(fLe,{})]})})})}class oxt extends p.Component{constructor(){super(...arguments),this.state={hasError:!1,message:void 0,componentStack:void 0},this.handleRefresh=()=>{window.location.reload()}}static getDerivedStateFromError(t){return{hasError:!0,message:t instanceof Error?t.message:"An unexpected error occurred."}}componentDidCatch(t,r){console.error("[AppErrorBoundary] Caught error:",t),console.error("[AppErrorBoundary] Component stack:",r.componentStack),this.setState({componentStack:r.componentStack||void 0})}render(){return this.state.hasError?n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-950 text-slate-50",children:n.jsxs("div",{className:"max-w-md px-6 py-6 rounded-2xl border border-slate-700 bg-slate-900/80 shadow-lg",children:[n.jsx("h1",{className:"text-lg font-semibold mb-3 text-red-400",children:"Something went wrong loading the app."}),this.state.message&&n.jsx("p",{className:"text-sm text-slate-300 mb-4 break-words font-mono bg-slate-800 p-3 rounded",children:this.state.message}),n.jsx("p",{className:"text-sm text-slate-400 mb-4",children:"This error has been logged. Try refreshing the page. If this keeps happening, please send a screenshot of this message to support."}),n.jsx("button",{onClick:this.handleRefresh,className:"w-full px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors","data-testid":"button-error-refresh",children:"Refresh Page"}),this.state.componentStack&&n.jsxs("details",{className:"mt-4",children:[n.jsx("summary",{className:"text-xs text-slate-500 cursor-pointer hover:text-slate-400",children:"Technical details"}),n.jsx("pre",{className:"mt-2 text-xs text-slate-500 overflow-auto max-h-40 bg-slate-800 p-2 rounded",children:this.state.componentStack})]})]})}):this.props.children}}XG(document.getElementById("root")).render(n.jsx(oxt,{children:n.jsx(ixt,{})}));const lxt=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"||window.location.hostname.includes(".replit.dev");"serviceWorker"in navigator&&window.addEventListener("load",()=>{if(lxt){navigator.serviceWorker.getRegistrations().then(e=>{for(let t of e)t.unregister().then(()=>{console.log("[PWA] DEV MODE - Service Worker unregistered to prevent caching")})}),"caches"in window&&caches.keys().then(e=>{e.forEach(t=>{caches.delete(t),console.log("[PWA] DEV MODE - Cache cleared:",t)})}),console.log("[PWA] DEV MODE - Service Worker disabled for fresh reloads");return}navigator.serviceWorker.register("/service-worker.js").then(e=>{console.log("[PWA] PRODUCTION - Service Worker registered successfully:",e.scope),e.addEventListener("updatefound",()=>{const t=e.installing;t&&t.addEventListener("statechange",()=>{t.state==="installed"&&navigator.serviceWorker.controller&&console.log("[PWA] New service worker available, please reload")})})}).catch(e=>{console.error("[PWA] Service Worker registration failed:",e)})});export{_ as B,O as C,nt as L,bt as P,bn as a,Ws as b,n as j,p as r,zt as u};