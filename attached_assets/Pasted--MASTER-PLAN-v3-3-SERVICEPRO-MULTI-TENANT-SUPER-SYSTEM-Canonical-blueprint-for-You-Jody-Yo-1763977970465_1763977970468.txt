ğŸŒŸ MASTER PLAN v3.3 â€“ SERVICEPRO MULTI-TENANT SUPER-SYSTEM

Canonical blueprint for:

You (Jody)

Your partner

Replit AI agents

Future developers

Platform scaling & white-labeling

This is the single source of truth.
All development must reference this file.

0. NORTH STAR
Product Vision

Transform Clean Machine into ServicePro â€” a multi-tenant, AI-powered operating system for service-based businesses.

Clean Machine = root tenant
Other businesses = child tenants

Shared:

Codebase

AI framework

Telephony infrastructure

Industry packs

Website templates

Tiered SaaS features

Each tenant has:

Their own phone number(s)

Their own AI messaging brain

Their own site & branding

Their own customer + service data

Their own plan tier

Their own onboarding flow

1. CURRENT STATE SNAPSHOT (v3.3)
1.1 Architecture
Backend

Node + Express

TypeScript

Drizzle ORM + Neon/Postgres

tenantDb injected DB isolation

Central telephony router

Loyalty, campaigns, customer, appointment systems

Frontend

React + Vite

Admin (you only)

Tenant dashboard

Customer portal (Phase 15)

Telephony

POST /twilio/voice/incoming canonical entry

tenant_phone_config table

IVR modes

Multi-tenant SMS + voice routing

AI (current)

AI SMS brain (Phase 14+ roadmap)

AI voice entry (static for now)

Agent prompt builder v2

Multi-tenancy

Complete and hardened

Every write includes tenant_id

Root tenant backfilled

2. PHASE ROADMAP (0â€“22)

Legend:
âœ”ï¸ complete â€¢ ğŸŸ¡ in progress â€¢ ğŸ“ designed / future

Phase	Area	Status
0	Canonicalization	âœ”ï¸
1	Tenant Isolation Core	âœ”ï¸
2	Telephony Spine	âœ”ï¸
3	Inbound Routing	âœ”ï¸
4	AI Voice Entry	âœ”ï¸
5	Concierge Setup Dashboard	ğŸ“
6	Impersonate Tenant	ğŸ“
7	SaaS Tiers + Feature Gating	âœ”ï¸
8	Industry Packs	ğŸ“
9	Website Generator	ğŸ“
10	AI Setup & Support Agent	ğŸ“
11	Data Export & Retention	ğŸ“
12	Keys & Integrations Checklist	ğŸ“
13	Idea Parking Lot	âœ”ï¸
14	SMS Super-Agent Index	ğŸ“
15	Customer Identity (OTP/Magic Link)	ğŸŸ¡
16	Customer Master Backfill	ğŸ“
17	White-Label Branding + Domains	ğŸ“
18	ServicePro In-App Support Bot	ğŸ“
19	Analytics + Showcase Dashboards	ğŸ“
20	Template / Clone-a-Tenant Factory	ğŸ“
21	Advanced Analytics & Intelligence	ğŸ“
22	Agency Mode (Reseller White-Label)	ğŸ“
3. PHASE 1 â€“ TENANT ISOLATION âœ”ï¸

Fully implemented:

tenant_id columns

tenantDb helper

Isolation tests

4. PHASE 2 â€“ TELEPHONY SPINE âœ”ï¸

Includes:

Canonical inbound entry

Multi-tenant phone config

IVR mode selection

Admin UI for phone config

5. PHASE 3 â€“ TENANT COMMUNICATION ROUTER âœ”ï¸

resolveTenantFromInbound:

SMS + voice unified resolution

MessagingServiceSid â†’ tenant

Fallback to root

Full tests

6. PHASE 4 â€“ AI VOICE ENTRY POINT âœ”ï¸

Static AI receptionist with safe TwiML.
Future streaming-ready structure.

7. PHASE 5 â€“ CONCIERGE SETUP DASHBOARD ğŸ“

Owner-only power dashboard:

Create tenant

Assign phone numbers

Select industry pack

Apply Tier (starter/pro/elite/internal)

Provision website starter

Send onboarding links

â€œLogin as tenant" button (Phase 6 hook)

8. PHASE 6 â€“ IMPERSONATE TENANT ğŸ“

Secure â€œLogin asâ€¦â€:

Audit logs

Session shows â€œYou are viewing asâ€¦â€

Owner can help tenants directly

9. PHASE 7 â€“ TIERS, BILLING & GATING âœ”ï¸

Plan tiers:

starter

pro

elite

internal

Features gated using hasFeature(tenant, key).

Stripe wiring will be Phase 7B.

10. PHASE 8 â€“ INDUSTRY PACKS ğŸ“

Per-industry starter template:

Services

Durations

Pricing suggestions

FAQs

Upsells

Industry-specific tone for AI

Add-on library

Starter website content

Supports:

Detailing

Lawn care

House cleaning

Pet grooming

Photography

Moving help

Pressure washing

+10 more (your target is 20 industries)

11. PHASE 9 â€“ WEBSITE GENERATOR ğŸ“

High-end builder:

6â€“10 templates

React/Tailwind components

Custom brand colors

Logo upload

Custom domain connection

SEO & OpenGraph presets

Connected to Industry Packs.

12. PHASE 10 â€“ AI SETUP & SUPPORT AGENT ğŸ“

Dashboard assistant that:

Reads tenant config

Reads industry pack

Reads service lists

Understands telephony/IVR setup

Helps configure automations

Can fix common issues automatically

Appears in â€œNeed help?â€ sidebar

13. PHASE 11 â€“ DATA EXPORT & RETENTION ğŸ“

Per-tenant data export:

Customers

Appointments

Campaigns

Loyalty

Invoices

SMS/voice logs

Suspended/cancelled tenants still get export access.

14. PHASE 12 â€“ INTEGRATIONS & KEY CHECKLIST ğŸ“

Platform-level:

DB

OpenAI

Twilio super-tenant

SendGrid

Stripe

Google APIs

Per-tenant:

Phone config

Website settings

Industry configuration

Branding

15. PHASE 13 â€“ IDEA PARKING LOT âœ”ï¸

Includes:

Technician PWA

Operator dashboard

Review funnel

Loyalty gamification expansion

AI revenue coaching

16. PHASE 14 â€“ SMS SUPER-AGENT INDEX ğŸ“

Master index of:

Intent classes

Structured agent actions

Scheduling logic

Customer state machine

Upsell engine

Industry pack integration

This phase maps all AI functionality.

17. PHASE 15 â€“ CUSTOMER IDENTITY (OTP + MAGIC LINK) ğŸŸ¡

V1 implemented:

OTP-based login (SMS)

Customer identity in database

V2 (Magic Link):

â€œTap to loginâ€ URLs

Auto-login for returning customers

Portal pages:

Points

Appointment history

Vehicle list

Profile

18. PHASE 16 â€“ CUSTOMER MASTER BACKFILL ğŸ“

Merge historical:

Appointments

SMS conversations

Vehicles

Service history

Loyalty accrual

Customer deduping (phone/email)

This creates a unified Customer Master record.

19. PHASE 17 â€“ WHITE-LABEL BRANDING + DOMAINS ğŸ“

Enables full white-label:

Tenant branding (logo, color, name)

Toggle â€œpowered by ServiceProâ€

Custom domain mapping

Tenant-themed:

booking page

customer portal

confirmation emails

receipts

SMS templates

20. PHASE 18 â€“ SERVICEPRO SUPPORT CONCIERGE (ADMIN AI) ğŸ“

Built-in support bot for tenants:

Knows your whole platform

Can explain ANY page

Can walk user through setup

Answers â€œHow do Iâ€¦?â€ questions

Helps configure:

IVR

Website

Industry pack

Apps & automations

Billing questions

Massively reduces live support load.

21. PHASE 19 â€“ ANALYTICS + SHOWCASE DASHBOARDS ğŸ“

Tenant dashboards:

Revenue

Booking volume

Customer LTV

Upsell rate

Loyalty impact

Repeat rate

Channel breakdown (phone/web/SMS)

Super-admin dashboards:

Tenants ranked

Revenue per tenant

Messaging volume

AI booking contribution

Churn prediction

Public â€œshowcase modeâ€ for demos.

22. PHASE 20 â€“ TEMPLATE / CLONE-A-TENANT FACTORY ğŸ“

Snapshot a tenant â†’ use as template.

Copies:

Industry pack

Services/pricing

Automations

Campaigns

AI configs

Website theme

Massively accelerates onboarding.

23. PHASE 21 â€“ ADVANCED ANALYTICS & INTELLIGENCE ğŸ“

Predictive intelligence:

Forecast revenue

Detect declining customer behavior

Predict no-shows

Detect optimal pricing

AI-driven suggestions to tenants

Anti-churn alerts

24. PHASE 22 â€“ AGENCY MODE (SUPER-WHITE-LABEL) ğŸ“

Reseller mode:

Agencies manage multiple tenants

Agencies apply their own branding

Agencies have their own dashboard

Agencies can clone templates

Agencies handle their own billing

You bill the agency

This unlocks massive scale.

ğŸ¯ CURRENT FOCUS (v3.3)

Phase 5 â€“ Concierge Dashboard

Phase 6 â€“ Impersonate Tenant

Phase 8 â€“ Industry Packs

Phase 14â€“16 â€“ SMS Super-Agent + customer identity

END OF MASTER PLAN v3.3

This is the canonical document.
Everything else must follow it.