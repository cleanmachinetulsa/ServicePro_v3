Yeah, thatâ€™s the scary part, right? â€œCool, thanks Agentâ€¦ wait, what did you just overwrite?â€ ğŸ˜…

You canâ€™t make it 100% impossible for it to touch existing logic, but you can stack the deck heavily in your favor with:
	â€¢	Prompt constraints,
	â€¢	Workflow habits in Replit,
	â€¢	And a couple of cheap â€œsafety netsâ€ (snapshots + tests).

Let me break it into what you can do in Replit and what we should add to the prompt.

â¸»

1. Safety habits in Replit (stuff you control)

A. Always keep a clean â€œcheckpointâ€ before big Agent runs

Do this every time before you ask it to do major work:
	1.	Fork / snapshot / use the last known-good publish
	â€¢	In Replit, you can:
	â€¢	Fork the repl (cheap but very safe), or
	â€¢	Use the â€œSaved progress / Rollback hereâ€ commit as a checkpoint.
	â€¢	Mentally label that commit: pre-scheduler-overhaul.

If the Agent goes rogue, you can just roll back / fork from that commit and youâ€™re safe.

â¸»

B. Never â€œApply allâ€ without skimming the diff

Replit already shows:
	â€¢	â€œPreview code changesâ€
	â€¢	A list of files with + / - and hunks

Use that like a mini pull request review:
	â€¢	Scan file names:
	â€¢	If you see surprise edits in core logic files (like booking logic, Twilio stuff, referral engine, etc.) that you didnâ€™t expect, stop and inspect those first.
	â€¢	Basic red flags:
	â€¢	Big deletions of existing functions.
	â€¢	Name or signature changes to key handlers you care about.
	â€¢	Removing checks/guards.

If something looks off, donâ€™t apply those hunks; or just cancel, tweak the prompt, and rerun.

â¸»

C. Add a couple of â€œgolden behavior testsâ€ before changes

Super simple smoke tests that encode what must not break:
	â€¢	Example: referral discounts still apply on invoice creation.
	â€¢	Example: existing booking / /book flow still works.

Even a couple of quick tests mean:
	â€¢	Agent makes changes
	â€¢	It runs npm test / npm run test (weâ€™ll tell it to)
	â€¢	If those fail, you know it broke something critical.

You donâ€™t need a full test suite for this to be usefulâ€”just 2â€“3 â€œdonâ€™t break thisâ€ tests.

â¸»

2. Add explicit guardrails inside the prompt

We can hard-bake â€œdonâ€™t nuke my logicâ€ rules straight into the master prompt. Hereâ€™s a small add-on block you can paste at the top of the big scheduling prompt we wrote:

ğŸ”’ Guardrail Add-On (prepend this to the master prompt)